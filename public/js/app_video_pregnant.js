/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./node_modules/@babel/runtime/regenerator/index.js":
/*!**********************************************************!*\
  !*** ./node_modules/@babel/runtime/regenerator/index.js ***!
  \**********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

module.exports = __webpack_require__(/*! regenerator-runtime */ "./node_modules/regenerator-runtime/runtime.js");


/***/ }),

/***/ "./node_modules/@vue/compiler-core/dist/compiler-core.esm-bundler.js":
/*!***************************************************************************!*\
  !*** ./node_modules/@vue/compiler-core/dist/compiler-core.esm-bundler.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "BASE_TRANSITION": () => (/* binding */ BASE_TRANSITION),
/* harmony export */   "CAMELIZE": () => (/* binding */ CAMELIZE),
/* harmony export */   "CAPITALIZE": () => (/* binding */ CAPITALIZE),
/* harmony export */   "CREATE_BLOCK": () => (/* binding */ CREATE_BLOCK),
/* harmony export */   "CREATE_COMMENT": () => (/* binding */ CREATE_COMMENT),
/* harmony export */   "CREATE_ELEMENT_BLOCK": () => (/* binding */ CREATE_ELEMENT_BLOCK),
/* harmony export */   "CREATE_ELEMENT_VNODE": () => (/* binding */ CREATE_ELEMENT_VNODE),
/* harmony export */   "CREATE_SLOTS": () => (/* binding */ CREATE_SLOTS),
/* harmony export */   "CREATE_STATIC": () => (/* binding */ CREATE_STATIC),
/* harmony export */   "CREATE_TEXT": () => (/* binding */ CREATE_TEXT),
/* harmony export */   "CREATE_VNODE": () => (/* binding */ CREATE_VNODE),
/* harmony export */   "FRAGMENT": () => (/* binding */ FRAGMENT),
/* harmony export */   "GUARD_REACTIVE_PROPS": () => (/* binding */ GUARD_REACTIVE_PROPS),
/* harmony export */   "IS_MEMO_SAME": () => (/* binding */ IS_MEMO_SAME),
/* harmony export */   "IS_REF": () => (/* binding */ IS_REF),
/* harmony export */   "KEEP_ALIVE": () => (/* binding */ KEEP_ALIVE),
/* harmony export */   "MERGE_PROPS": () => (/* binding */ MERGE_PROPS),
/* harmony export */   "NORMALIZE_CLASS": () => (/* binding */ NORMALIZE_CLASS),
/* harmony export */   "NORMALIZE_PROPS": () => (/* binding */ NORMALIZE_PROPS),
/* harmony export */   "NORMALIZE_STYLE": () => (/* binding */ NORMALIZE_STYLE),
/* harmony export */   "OPEN_BLOCK": () => (/* binding */ OPEN_BLOCK),
/* harmony export */   "POP_SCOPE_ID": () => (/* binding */ POP_SCOPE_ID),
/* harmony export */   "PUSH_SCOPE_ID": () => (/* binding */ PUSH_SCOPE_ID),
/* harmony export */   "RENDER_LIST": () => (/* binding */ RENDER_LIST),
/* harmony export */   "RENDER_SLOT": () => (/* binding */ RENDER_SLOT),
/* harmony export */   "RESOLVE_COMPONENT": () => (/* binding */ RESOLVE_COMPONENT),
/* harmony export */   "RESOLVE_DIRECTIVE": () => (/* binding */ RESOLVE_DIRECTIVE),
/* harmony export */   "RESOLVE_DYNAMIC_COMPONENT": () => (/* binding */ RESOLVE_DYNAMIC_COMPONENT),
/* harmony export */   "RESOLVE_FILTER": () => (/* binding */ RESOLVE_FILTER),
/* harmony export */   "SET_BLOCK_TRACKING": () => (/* binding */ SET_BLOCK_TRACKING),
/* harmony export */   "SUSPENSE": () => (/* binding */ SUSPENSE),
/* harmony export */   "TELEPORT": () => (/* binding */ TELEPORT),
/* harmony export */   "TO_DISPLAY_STRING": () => (/* binding */ TO_DISPLAY_STRING),
/* harmony export */   "TO_HANDLERS": () => (/* binding */ TO_HANDLERS),
/* harmony export */   "TO_HANDLER_KEY": () => (/* binding */ TO_HANDLER_KEY),
/* harmony export */   "TS_NODE_TYPES": () => (/* binding */ TS_NODE_TYPES),
/* harmony export */   "UNREF": () => (/* binding */ UNREF),
/* harmony export */   "WITH_CTX": () => (/* binding */ WITH_CTX),
/* harmony export */   "WITH_DIRECTIVES": () => (/* binding */ WITH_DIRECTIVES),
/* harmony export */   "WITH_MEMO": () => (/* binding */ WITH_MEMO),
/* harmony export */   "advancePositionWithClone": () => (/* binding */ advancePositionWithClone),
/* harmony export */   "advancePositionWithMutation": () => (/* binding */ advancePositionWithMutation),
/* harmony export */   "assert": () => (/* binding */ assert),
/* harmony export */   "baseCompile": () => (/* binding */ baseCompile),
/* harmony export */   "baseParse": () => (/* binding */ baseParse),
/* harmony export */   "buildDirectiveArgs": () => (/* binding */ buildDirectiveArgs),
/* harmony export */   "buildProps": () => (/* binding */ buildProps),
/* harmony export */   "buildSlots": () => (/* binding */ buildSlots),
/* harmony export */   "checkCompatEnabled": () => (/* binding */ checkCompatEnabled),
/* harmony export */   "convertToBlock": () => (/* binding */ convertToBlock),
/* harmony export */   "createArrayExpression": () => (/* binding */ createArrayExpression),
/* harmony export */   "createAssignmentExpression": () => (/* binding */ createAssignmentExpression),
/* harmony export */   "createBlockStatement": () => (/* binding */ createBlockStatement),
/* harmony export */   "createCacheExpression": () => (/* binding */ createCacheExpression),
/* harmony export */   "createCallExpression": () => (/* binding */ createCallExpression),
/* harmony export */   "createCompilerError": () => (/* binding */ createCompilerError),
/* harmony export */   "createCompoundExpression": () => (/* binding */ createCompoundExpression),
/* harmony export */   "createConditionalExpression": () => (/* binding */ createConditionalExpression),
/* harmony export */   "createForLoopParams": () => (/* binding */ createForLoopParams),
/* harmony export */   "createFunctionExpression": () => (/* binding */ createFunctionExpression),
/* harmony export */   "createIfStatement": () => (/* binding */ createIfStatement),
/* harmony export */   "createInterpolation": () => (/* binding */ createInterpolation),
/* harmony export */   "createObjectExpression": () => (/* binding */ createObjectExpression),
/* harmony export */   "createObjectProperty": () => (/* binding */ createObjectProperty),
/* harmony export */   "createReturnStatement": () => (/* binding */ createReturnStatement),
/* harmony export */   "createRoot": () => (/* binding */ createRoot),
/* harmony export */   "createSequenceExpression": () => (/* binding */ createSequenceExpression),
/* harmony export */   "createSimpleExpression": () => (/* binding */ createSimpleExpression),
/* harmony export */   "createStructuralDirectiveTransform": () => (/* binding */ createStructuralDirectiveTransform),
/* harmony export */   "createTemplateLiteral": () => (/* binding */ createTemplateLiteral),
/* harmony export */   "createTransformContext": () => (/* binding */ createTransformContext),
/* harmony export */   "createVNodeCall": () => (/* binding */ createVNodeCall),
/* harmony export */   "extractIdentifiers": () => (/* binding */ extractIdentifiers),
/* harmony export */   "findDir": () => (/* binding */ findDir),
/* harmony export */   "findProp": () => (/* binding */ findProp),
/* harmony export */   "generate": () => (/* binding */ generate),
/* harmony export */   "generateCodeFrame": () => (/* reexport safe */ _vue_shared__WEBPACK_IMPORTED_MODULE_0__.generateCodeFrame),
/* harmony export */   "getBaseTransformPreset": () => (/* binding */ getBaseTransformPreset),
/* harmony export */   "getConstantType": () => (/* binding */ getConstantType),
/* harmony export */   "getInnerRange": () => (/* binding */ getInnerRange),
/* harmony export */   "getMemoedVNodeCall": () => (/* binding */ getMemoedVNodeCall),
/* harmony export */   "getVNodeBlockHelper": () => (/* binding */ getVNodeBlockHelper),
/* harmony export */   "getVNodeHelper": () => (/* binding */ getVNodeHelper),
/* harmony export */   "hasDynamicKeyVBind": () => (/* binding */ hasDynamicKeyVBind),
/* harmony export */   "hasScopeRef": () => (/* binding */ hasScopeRef),
/* harmony export */   "helperNameMap": () => (/* binding */ helperNameMap),
/* harmony export */   "injectProp": () => (/* binding */ injectProp),
/* harmony export */   "isBuiltInType": () => (/* binding */ isBuiltInType),
/* harmony export */   "isCoreComponent": () => (/* binding */ isCoreComponent),
/* harmony export */   "isFunctionType": () => (/* binding */ isFunctionType),
/* harmony export */   "isInDestructureAssignment": () => (/* binding */ isInDestructureAssignment),
/* harmony export */   "isMemberExpression": () => (/* binding */ isMemberExpression),
/* harmony export */   "isMemberExpressionBrowser": () => (/* binding */ isMemberExpressionBrowser),
/* harmony export */   "isMemberExpressionNode": () => (/* binding */ isMemberExpressionNode),
/* harmony export */   "isReferencedIdentifier": () => (/* binding */ isReferencedIdentifier),
/* harmony export */   "isSimpleIdentifier": () => (/* binding */ isSimpleIdentifier),
/* harmony export */   "isSlotOutlet": () => (/* binding */ isSlotOutlet),
/* harmony export */   "isStaticArgOf": () => (/* binding */ isStaticArgOf),
/* harmony export */   "isStaticExp": () => (/* binding */ isStaticExp),
/* harmony export */   "isStaticProperty": () => (/* binding */ isStaticProperty),
/* harmony export */   "isStaticPropertyKey": () => (/* binding */ isStaticPropertyKey),
/* harmony export */   "isTemplateNode": () => (/* binding */ isTemplateNode),
/* harmony export */   "isText": () => (/* binding */ isText$1),
/* harmony export */   "isVSlot": () => (/* binding */ isVSlot),
/* harmony export */   "locStub": () => (/* binding */ locStub),
/* harmony export */   "noopDirectiveTransform": () => (/* binding */ noopDirectiveTransform),
/* harmony export */   "processExpression": () => (/* binding */ processExpression),
/* harmony export */   "processFor": () => (/* binding */ processFor),
/* harmony export */   "processIf": () => (/* binding */ processIf),
/* harmony export */   "processSlotOutlet": () => (/* binding */ processSlotOutlet),
/* harmony export */   "registerRuntimeHelpers": () => (/* binding */ registerRuntimeHelpers),
/* harmony export */   "resolveComponentType": () => (/* binding */ resolveComponentType),
/* harmony export */   "stringifyExpression": () => (/* binding */ stringifyExpression),
/* harmony export */   "toValidAssetId": () => (/* binding */ toValidAssetId),
/* harmony export */   "trackSlotScopes": () => (/* binding */ trackSlotScopes),
/* harmony export */   "trackVForSlotScopes": () => (/* binding */ trackVForSlotScopes),
/* harmony export */   "transform": () => (/* binding */ transform),
/* harmony export */   "transformBind": () => (/* binding */ transformBind),
/* harmony export */   "transformElement": () => (/* binding */ transformElement),
/* harmony export */   "transformExpression": () => (/* binding */ transformExpression),
/* harmony export */   "transformModel": () => (/* binding */ transformModel),
/* harmony export */   "transformOn": () => (/* binding */ transformOn),
/* harmony export */   "traverseNode": () => (/* binding */ traverseNode),
/* harmony export */   "walkBlockDeclarations": () => (/* binding */ walkBlockDeclarations),
/* harmony export */   "walkFunctionParams": () => (/* binding */ walkFunctionParams),
/* harmony export */   "walkIdentifiers": () => (/* binding */ walkIdentifiers),
/* harmony export */   "warnDeprecation": () => (/* binding */ warnDeprecation)
/* harmony export */ });
/* harmony import */ var _vue_shared__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @vue/shared */ "./node_modules/@vue/shared/dist/shared.esm-bundler.js");



function defaultOnError(error) {
  throw error;
}
function defaultOnWarn(msg) {
   true && console.warn(`[Vue warn] ${msg.message}`);
}
function createCompilerError(code, loc, messages, additionalMessage) {
  const msg =  true ? (messages || errorMessages)[code] + (additionalMessage || ``) : 0;
  const error = new SyntaxError(String(msg));
  error.code = code;
  error.loc = loc;
  return error;
}
const errorMessages = {
  // parse errors
  [0]: "Illegal comment.",
  [1]: "CDATA section is allowed only in XML context.",
  [2]: "Duplicate attribute.",
  [3]: "End tag cannot have attributes.",
  [4]: "Illegal '/' in tags.",
  [5]: "Unexpected EOF in tag.",
  [6]: "Unexpected EOF in CDATA section.",
  [7]: "Unexpected EOF in comment.",
  [8]: "Unexpected EOF in script.",
  [9]: "Unexpected EOF in tag.",
  [10]: "Incorrectly closed comment.",
  [11]: "Incorrectly opened comment.",
  [12]: "Illegal tag name. Use '&lt;' to print '<'.",
  [13]: "Attribute value was expected.",
  [14]: "End tag name was expected.",
  [15]: "Whitespace was expected.",
  [16]: "Unexpected '<!--' in comment.",
  [17]: `Attribute name cannot contain U+0022 ("), U+0027 ('), and U+003C (<).`,
  [18]: "Unquoted attribute value cannot contain U+0022 (\"), U+0027 ('), U+003C (<), U+003D (=), and U+0060 (`).",
  [19]: "Attribute name cannot start with '='.",
  [21]: "'<?' is allowed only in XML context.",
  [20]: `Unexpected null character.`,
  [22]: "Illegal '/' in tags.",
  // Vue-specific parse errors
  [23]: "Invalid end tag.",
  [24]: "Element is missing end tag.",
  [25]: "Interpolation end sign was not found.",
  [27]: "End bracket for dynamic directive argument was not found. Note that dynamic directive argument cannot contain spaces.",
  [26]: "Legal directive name was expected.",
  // transform errors
  [28]: `v-if/v-else-if is missing expression.`,
  [29]: `v-if/else branches must use unique keys.`,
  [30]: `v-else/v-else-if has no adjacent v-if or v-else-if.`,
  [31]: `v-for is missing expression.`,
  [32]: `v-for has invalid expression.`,
  [33]: `<template v-for> key should be placed on the <template> tag.`,
  [34]: `v-bind is missing expression.`,
  [35]: `v-on is missing expression.`,
  [36]: `Unexpected custom directive on <slot> outlet.`,
  [37]: `Mixed v-slot usage on both the component and nested <template>. When there are multiple named slots, all slots should use <template> syntax to avoid scope ambiguity.`,
  [38]: `Duplicate slot names found. `,
  [39]: `Extraneous children found when component already has explicitly named default slot. These children will be ignored.`,
  [40]: `v-slot can only be used on components or <template> tags.`,
  [41]: `v-model is missing expression.`,
  [42]: `v-model value must be a valid JavaScript member expression.`,
  [43]: `v-model cannot be used on v-for or v-slot scope variables because they are not writable.`,
  [44]: `v-model cannot be used on a prop, because local prop bindings are not writable.
Use a v-bind binding combined with a v-on listener that emits update:x event instead.`,
  [45]: `Error parsing JavaScript expression: `,
  [46]: `<KeepAlive> expects exactly one child component.`,
  // generic errors
  [47]: `"prefixIdentifiers" option is not supported in this build of compiler.`,
  [48]: `ES module mode is not supported in this build of compiler.`,
  [49]: `"cacheHandlers" option is only supported when the "prefixIdentifiers" option is enabled.`,
  [50]: `"scopeId" option is only supported in module mode.`,
  // deprecations
  [51]: `@vnode-* hooks in templates are deprecated. Use the vue: prefix instead. For example, @vnode-mounted should be changed to @vue:mounted. @vnode-* hooks support will be removed in 3.4.`,
  [52]: `v-is="component-name" has been deprecated. Use is="vue:component-name" instead. v-is support will be removed in 3.4.`,
  // just to fulfill types
  [53]: ``
};

const FRAGMENT = Symbol( true ? `Fragment` : 0);
const TELEPORT = Symbol( true ? `Teleport` : 0);
const SUSPENSE = Symbol( true ? `Suspense` : 0);
const KEEP_ALIVE = Symbol( true ? `KeepAlive` : 0);
const BASE_TRANSITION = Symbol( true ? `BaseTransition` : 0);
const OPEN_BLOCK = Symbol( true ? `openBlock` : 0);
const CREATE_BLOCK = Symbol( true ? `createBlock` : 0);
const CREATE_ELEMENT_BLOCK = Symbol( true ? `createElementBlock` : 0);
const CREATE_VNODE = Symbol( true ? `createVNode` : 0);
const CREATE_ELEMENT_VNODE = Symbol( true ? `createElementVNode` : 0);
const CREATE_COMMENT = Symbol( true ? `createCommentVNode` : 0);
const CREATE_TEXT = Symbol( true ? `createTextVNode` : 0);
const CREATE_STATIC = Symbol( true ? `createStaticVNode` : 0);
const RESOLVE_COMPONENT = Symbol( true ? `resolveComponent` : 0);
const RESOLVE_DYNAMIC_COMPONENT = Symbol(
   true ? `resolveDynamicComponent` : 0
);
const RESOLVE_DIRECTIVE = Symbol( true ? `resolveDirective` : 0);
const RESOLVE_FILTER = Symbol( true ? `resolveFilter` : 0);
const WITH_DIRECTIVES = Symbol( true ? `withDirectives` : 0);
const RENDER_LIST = Symbol( true ? `renderList` : 0);
const RENDER_SLOT = Symbol( true ? `renderSlot` : 0);
const CREATE_SLOTS = Symbol( true ? `createSlots` : 0);
const TO_DISPLAY_STRING = Symbol( true ? `toDisplayString` : 0);
const MERGE_PROPS = Symbol( true ? `mergeProps` : 0);
const NORMALIZE_CLASS = Symbol( true ? `normalizeClass` : 0);
const NORMALIZE_STYLE = Symbol( true ? `normalizeStyle` : 0);
const NORMALIZE_PROPS = Symbol( true ? `normalizeProps` : 0);
const GUARD_REACTIVE_PROPS = Symbol( true ? `guardReactiveProps` : 0);
const TO_HANDLERS = Symbol( true ? `toHandlers` : 0);
const CAMELIZE = Symbol( true ? `camelize` : 0);
const CAPITALIZE = Symbol( true ? `capitalize` : 0);
const TO_HANDLER_KEY = Symbol( true ? `toHandlerKey` : 0);
const SET_BLOCK_TRACKING = Symbol( true ? `setBlockTracking` : 0);
const PUSH_SCOPE_ID = Symbol( true ? `pushScopeId` : 0);
const POP_SCOPE_ID = Symbol( true ? `popScopeId` : 0);
const WITH_CTX = Symbol( true ? `withCtx` : 0);
const UNREF = Symbol( true ? `unref` : 0);
const IS_REF = Symbol( true ? `isRef` : 0);
const WITH_MEMO = Symbol( true ? `withMemo` : 0);
const IS_MEMO_SAME = Symbol( true ? `isMemoSame` : 0);
const helperNameMap = {
  [FRAGMENT]: `Fragment`,
  [TELEPORT]: `Teleport`,
  [SUSPENSE]: `Suspense`,
  [KEEP_ALIVE]: `KeepAlive`,
  [BASE_TRANSITION]: `BaseTransition`,
  [OPEN_BLOCK]: `openBlock`,
  [CREATE_BLOCK]: `createBlock`,
  [CREATE_ELEMENT_BLOCK]: `createElementBlock`,
  [CREATE_VNODE]: `createVNode`,
  [CREATE_ELEMENT_VNODE]: `createElementVNode`,
  [CREATE_COMMENT]: `createCommentVNode`,
  [CREATE_TEXT]: `createTextVNode`,
  [CREATE_STATIC]: `createStaticVNode`,
  [RESOLVE_COMPONENT]: `resolveComponent`,
  [RESOLVE_DYNAMIC_COMPONENT]: `resolveDynamicComponent`,
  [RESOLVE_DIRECTIVE]: `resolveDirective`,
  [RESOLVE_FILTER]: `resolveFilter`,
  [WITH_DIRECTIVES]: `withDirectives`,
  [RENDER_LIST]: `renderList`,
  [RENDER_SLOT]: `renderSlot`,
  [CREATE_SLOTS]: `createSlots`,
  [TO_DISPLAY_STRING]: `toDisplayString`,
  [MERGE_PROPS]: `mergeProps`,
  [NORMALIZE_CLASS]: `normalizeClass`,
  [NORMALIZE_STYLE]: `normalizeStyle`,
  [NORMALIZE_PROPS]: `normalizeProps`,
  [GUARD_REACTIVE_PROPS]: `guardReactiveProps`,
  [TO_HANDLERS]: `toHandlers`,
  [CAMELIZE]: `camelize`,
  [CAPITALIZE]: `capitalize`,
  [TO_HANDLER_KEY]: `toHandlerKey`,
  [SET_BLOCK_TRACKING]: `setBlockTracking`,
  [PUSH_SCOPE_ID]: `pushScopeId`,
  [POP_SCOPE_ID]: `popScopeId`,
  [WITH_CTX]: `withCtx`,
  [UNREF]: `unref`,
  [IS_REF]: `isRef`,
  [WITH_MEMO]: `withMemo`,
  [IS_MEMO_SAME]: `isMemoSame`
};
function registerRuntimeHelpers(helpers) {
  Object.getOwnPropertySymbols(helpers).forEach((s) => {
    helperNameMap[s] = helpers[s];
  });
}

const locStub = {
  source: "",
  start: { line: 1, column: 1, offset: 0 },
  end: { line: 1, column: 1, offset: 0 }
};
function createRoot(children, loc = locStub) {
  return {
    type: 0,
    children,
    helpers: /* @__PURE__ */ new Set(),
    components: [],
    directives: [],
    hoists: [],
    imports: [],
    cached: 0,
    temps: 0,
    codegenNode: void 0,
    loc
  };
}
function createVNodeCall(context, tag, props, children, patchFlag, dynamicProps, directives, isBlock = false, disableTracking = false, isComponent = false, loc = locStub) {
  if (context) {
    if (isBlock) {
      context.helper(OPEN_BLOCK);
      context.helper(getVNodeBlockHelper(context.inSSR, isComponent));
    } else {
      context.helper(getVNodeHelper(context.inSSR, isComponent));
    }
    if (directives) {
      context.helper(WITH_DIRECTIVES);
    }
  }
  return {
    type: 13,
    tag,
    props,
    children,
    patchFlag,
    dynamicProps,
    directives,
    isBlock,
    disableTracking,
    isComponent,
    loc
  };
}
function createArrayExpression(elements, loc = locStub) {
  return {
    type: 17,
    loc,
    elements
  };
}
function createObjectExpression(properties, loc = locStub) {
  return {
    type: 15,
    loc,
    properties
  };
}
function createObjectProperty(key, value) {
  return {
    type: 16,
    loc: locStub,
    key: (0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.isString)(key) ? createSimpleExpression(key, true) : key,
    value
  };
}
function createSimpleExpression(content, isStatic = false, loc = locStub, constType = 0) {
  return {
    type: 4,
    loc,
    content,
    isStatic,
    constType: isStatic ? 3 : constType
  };
}
function createInterpolation(content, loc) {
  return {
    type: 5,
    loc,
    content: (0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.isString)(content) ? createSimpleExpression(content, false, loc) : content
  };
}
function createCompoundExpression(children, loc = locStub) {
  return {
    type: 8,
    loc,
    children
  };
}
function createCallExpression(callee, args = [], loc = locStub) {
  return {
    type: 14,
    loc,
    callee,
    arguments: args
  };
}
function createFunctionExpression(params, returns = void 0, newline = false, isSlot = false, loc = locStub) {
  return {
    type: 18,
    params,
    returns,
    newline,
    isSlot,
    loc
  };
}
function createConditionalExpression(test, consequent, alternate, newline = true) {
  return {
    type: 19,
    test,
    consequent,
    alternate,
    newline,
    loc: locStub
  };
}
function createCacheExpression(index, value, isVNode = false) {
  return {
    type: 20,
    index,
    value,
    isVNode,
    loc: locStub
  };
}
function createBlockStatement(body) {
  return {
    type: 21,
    body,
    loc: locStub
  };
}
function createTemplateLiteral(elements) {
  return {
    type: 22,
    elements,
    loc: locStub
  };
}
function createIfStatement(test, consequent, alternate) {
  return {
    type: 23,
    test,
    consequent,
    alternate,
    loc: locStub
  };
}
function createAssignmentExpression(left, right) {
  return {
    type: 24,
    left,
    right,
    loc: locStub
  };
}
function createSequenceExpression(expressions) {
  return {
    type: 25,
    expressions,
    loc: locStub
  };
}
function createReturnStatement(returns) {
  return {
    type: 26,
    returns,
    loc: locStub
  };
}
function getVNodeHelper(ssr, isComponent) {
  return ssr || isComponent ? CREATE_VNODE : CREATE_ELEMENT_VNODE;
}
function getVNodeBlockHelper(ssr, isComponent) {
  return ssr || isComponent ? CREATE_BLOCK : CREATE_ELEMENT_BLOCK;
}
function convertToBlock(node, { helper, removeHelper, inSSR }) {
  if (!node.isBlock) {
    node.isBlock = true;
    removeHelper(getVNodeHelper(inSSR, node.isComponent));
    helper(OPEN_BLOCK);
    helper(getVNodeBlockHelper(inSSR, node.isComponent));
  }
}

const isStaticExp = (p) => p.type === 4 && p.isStatic;
const isBuiltInType = (tag, expected) => tag === expected || tag === (0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.hyphenate)(expected);
function isCoreComponent(tag) {
  if (isBuiltInType(tag, "Teleport")) {
    return TELEPORT;
  } else if (isBuiltInType(tag, "Suspense")) {
    return SUSPENSE;
  } else if (isBuiltInType(tag, "KeepAlive")) {
    return KEEP_ALIVE;
  } else if (isBuiltInType(tag, "BaseTransition")) {
    return BASE_TRANSITION;
  }
}
const nonIdentifierRE = /^\d|[^\$\w]/;
const isSimpleIdentifier = (name) => !nonIdentifierRE.test(name);
const validFirstIdentCharRE = /[A-Za-z_$\xA0-\uFFFF]/;
const validIdentCharRE = /[\.\?\w$\xA0-\uFFFF]/;
const whitespaceRE = /\s+[.[]\s*|\s*[.[]\s+/g;
const isMemberExpressionBrowser = (path) => {
  path = path.trim().replace(whitespaceRE, (s) => s.trim());
  let state = 0 /* inMemberExp */;
  let stateStack = [];
  let currentOpenBracketCount = 0;
  let currentOpenParensCount = 0;
  let currentStringType = null;
  for (let i = 0; i < path.length; i++) {
    const char = path.charAt(i);
    switch (state) {
      case 0 /* inMemberExp */:
        if (char === "[") {
          stateStack.push(state);
          state = 1 /* inBrackets */;
          currentOpenBracketCount++;
        } else if (char === "(") {
          stateStack.push(state);
          state = 2 /* inParens */;
          currentOpenParensCount++;
        } else if (!(i === 0 ? validFirstIdentCharRE : validIdentCharRE).test(char)) {
          return false;
        }
        break;
      case 1 /* inBrackets */:
        if (char === `'` || char === `"` || char === "`") {
          stateStack.push(state);
          state = 3 /* inString */;
          currentStringType = char;
        } else if (char === `[`) {
          currentOpenBracketCount++;
        } else if (char === `]`) {
          if (!--currentOpenBracketCount) {
            state = stateStack.pop();
          }
        }
        break;
      case 2 /* inParens */:
        if (char === `'` || char === `"` || char === "`") {
          stateStack.push(state);
          state = 3 /* inString */;
          currentStringType = char;
        } else if (char === `(`) {
          currentOpenParensCount++;
        } else if (char === `)`) {
          if (i === path.length - 1) {
            return false;
          }
          if (!--currentOpenParensCount) {
            state = stateStack.pop();
          }
        }
        break;
      case 3 /* inString */:
        if (char === currentStringType) {
          state = stateStack.pop();
          currentStringType = null;
        }
        break;
    }
  }
  return !currentOpenBracketCount && !currentOpenParensCount;
};
const isMemberExpressionNode = _vue_shared__WEBPACK_IMPORTED_MODULE_0__.NOOP ;
const isMemberExpression = isMemberExpressionBrowser ;
function getInnerRange(loc, offset, length) {
  const source = loc.source.slice(offset, offset + length);
  const newLoc = {
    source,
    start: advancePositionWithClone(loc.start, loc.source, offset),
    end: loc.end
  };
  if (length != null) {
    newLoc.end = advancePositionWithClone(
      loc.start,
      loc.source,
      offset + length
    );
  }
  return newLoc;
}
function advancePositionWithClone(pos, source, numberOfCharacters = source.length) {
  return advancePositionWithMutation(
    (0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.extend)({}, pos),
    source,
    numberOfCharacters
  );
}
function advancePositionWithMutation(pos, source, numberOfCharacters = source.length) {
  let linesCount = 0;
  let lastNewLinePos = -1;
  for (let i = 0; i < numberOfCharacters; i++) {
    if (source.charCodeAt(i) === 10) {
      linesCount++;
      lastNewLinePos = i;
    }
  }
  pos.offset += numberOfCharacters;
  pos.line += linesCount;
  pos.column = lastNewLinePos === -1 ? pos.column + numberOfCharacters : numberOfCharacters - lastNewLinePos;
  return pos;
}
function assert(condition, msg) {
  if (!condition) {
    throw new Error(msg || `unexpected compiler condition`);
  }
}
function findDir(node, name, allowEmpty = false) {
  for (let i = 0; i < node.props.length; i++) {
    const p = node.props[i];
    if (p.type === 7 && (allowEmpty || p.exp) && ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.isString)(name) ? p.name === name : name.test(p.name))) {
      return p;
    }
  }
}
function findProp(node, name, dynamicOnly = false, allowEmpty = false) {
  for (let i = 0; i < node.props.length; i++) {
    const p = node.props[i];
    if (p.type === 6) {
      if (dynamicOnly)
        continue;
      if (p.name === name && (p.value || allowEmpty)) {
        return p;
      }
    } else if (p.name === "bind" && (p.exp || allowEmpty) && isStaticArgOf(p.arg, name)) {
      return p;
    }
  }
}
function isStaticArgOf(arg, name) {
  return !!(arg && isStaticExp(arg) && arg.content === name);
}
function hasDynamicKeyVBind(node) {
  return node.props.some(
    (p) => p.type === 7 && p.name === "bind" && (!p.arg || // v-bind="obj"
    p.arg.type !== 4 || // v-bind:[_ctx.foo]
    !p.arg.isStatic)
    // v-bind:[foo]
  );
}
function isText$1(node) {
  return node.type === 5 || node.type === 2;
}
function isVSlot(p) {
  return p.type === 7 && p.name === "slot";
}
function isTemplateNode(node) {
  return node.type === 1 && node.tagType === 3;
}
function isSlotOutlet(node) {
  return node.type === 1 && node.tagType === 2;
}
const propsHelperSet = /* @__PURE__ */ new Set([NORMALIZE_PROPS, GUARD_REACTIVE_PROPS]);
function getUnnormalizedProps(props, callPath = []) {
  if (props && !(0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.isString)(props) && props.type === 14) {
    const callee = props.callee;
    if (!(0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.isString)(callee) && propsHelperSet.has(callee)) {
      return getUnnormalizedProps(
        props.arguments[0],
        callPath.concat(props)
      );
    }
  }
  return [props, callPath];
}
function injectProp(node, prop, context) {
  let propsWithInjection;
  let props = node.type === 13 ? node.props : node.arguments[2];
  let callPath = [];
  let parentCall;
  if (props && !(0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.isString)(props) && props.type === 14) {
    const ret = getUnnormalizedProps(props);
    props = ret[0];
    callPath = ret[1];
    parentCall = callPath[callPath.length - 1];
  }
  if (props == null || (0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.isString)(props)) {
    propsWithInjection = createObjectExpression([prop]);
  } else if (props.type === 14) {
    const first = props.arguments[0];
    if (!(0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.isString)(first) && first.type === 15) {
      if (!hasProp(prop, first)) {
        first.properties.unshift(prop);
      }
    } else {
      if (props.callee === TO_HANDLERS) {
        propsWithInjection = createCallExpression(context.helper(MERGE_PROPS), [
          createObjectExpression([prop]),
          props
        ]);
      } else {
        props.arguments.unshift(createObjectExpression([prop]));
      }
    }
    !propsWithInjection && (propsWithInjection = props);
  } else if (props.type === 15) {
    if (!hasProp(prop, props)) {
      props.properties.unshift(prop);
    }
    propsWithInjection = props;
  } else {
    propsWithInjection = createCallExpression(context.helper(MERGE_PROPS), [
      createObjectExpression([prop]),
      props
    ]);
    if (parentCall && parentCall.callee === GUARD_REACTIVE_PROPS) {
      parentCall = callPath[callPath.length - 2];
    }
  }
  if (node.type === 13) {
    if (parentCall) {
      parentCall.arguments[0] = propsWithInjection;
    } else {
      node.props = propsWithInjection;
    }
  } else {
    if (parentCall) {
      parentCall.arguments[0] = propsWithInjection;
    } else {
      node.arguments[2] = propsWithInjection;
    }
  }
}
function hasProp(prop, props) {
  let result = false;
  if (prop.key.type === 4) {
    const propKeyName = prop.key.content;
    result = props.properties.some(
      (p) => p.key.type === 4 && p.key.content === propKeyName
    );
  }
  return result;
}
function toValidAssetId(name, type) {
  return `_${type}_${name.replace(/[^\w]/g, (searchValue, replaceValue) => {
    return searchValue === "-" ? "_" : name.charCodeAt(replaceValue).toString();
  })}`;
}
function hasScopeRef(node, ids) {
  if (!node || Object.keys(ids).length === 0) {
    return false;
  }
  switch (node.type) {
    case 1:
      for (let i = 0; i < node.props.length; i++) {
        const p = node.props[i];
        if (p.type === 7 && (hasScopeRef(p.arg, ids) || hasScopeRef(p.exp, ids))) {
          return true;
        }
      }
      return node.children.some((c) => hasScopeRef(c, ids));
    case 11:
      if (hasScopeRef(node.source, ids)) {
        return true;
      }
      return node.children.some((c) => hasScopeRef(c, ids));
    case 9:
      return node.branches.some((b) => hasScopeRef(b, ids));
    case 10:
      if (hasScopeRef(node.condition, ids)) {
        return true;
      }
      return node.children.some((c) => hasScopeRef(c, ids));
    case 4:
      return !node.isStatic && isSimpleIdentifier(node.content) && !!ids[node.content];
    case 8:
      return node.children.some((c) => (0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.isObject)(c) && hasScopeRef(c, ids));
    case 5:
    case 12:
      return hasScopeRef(node.content, ids);
    case 2:
    case 3:
      return false;
    default:
      if (true) ;
      return false;
  }
}
function getMemoedVNodeCall(node) {
  if (node.type === 14 && node.callee === WITH_MEMO) {
    return node.arguments[1].returns;
  } else {
    return node;
  }
}

const deprecationData = {
  ["COMPILER_IS_ON_ELEMENT"]: {
    message: `Platform-native elements with "is" prop will no longer be treated as components in Vue 3 unless the "is" value is explicitly prefixed with "vue:".`,
    link: `https://v3-migration.vuejs.org/breaking-changes/custom-elements-interop.html`
  },
  ["COMPILER_V_BIND_SYNC"]: {
    message: (key) => `.sync modifier for v-bind has been removed. Use v-model with argument instead. \`v-bind:${key}.sync\` should be changed to \`v-model:${key}\`.`,
    link: `https://v3-migration.vuejs.org/breaking-changes/v-model.html`
  },
  ["COMPILER_V_BIND_PROP"]: {
    message: `.prop modifier for v-bind has been removed and no longer necessary. Vue 3 will automatically set a binding as DOM property when appropriate.`
  },
  ["COMPILER_V_BIND_OBJECT_ORDER"]: {
    message: `v-bind="obj" usage is now order sensitive and behaves like JavaScript object spread: it will now overwrite an existing non-mergeable attribute that appears before v-bind in the case of conflict. To retain 2.x behavior, move v-bind to make it the first attribute. You can also suppress this warning if the usage is intended.`,
    link: `https://v3-migration.vuejs.org/breaking-changes/v-bind.html`
  },
  ["COMPILER_V_ON_NATIVE"]: {
    message: `.native modifier for v-on has been removed as is no longer necessary.`,
    link: `https://v3-migration.vuejs.org/breaking-changes/v-on-native-modifier-removed.html`
  },
  ["COMPILER_V_IF_V_FOR_PRECEDENCE"]: {
    message: `v-if / v-for precedence when used on the same element has changed in Vue 3: v-if now takes higher precedence and will no longer have access to v-for scope variables. It is best to avoid the ambiguity with <template> tags or use a computed property that filters v-for data source.`,
    link: `https://v3-migration.vuejs.org/breaking-changes/v-if-v-for.html`
  },
  ["COMPILER_NATIVE_TEMPLATE"]: {
    message: `<template> with no special directives will render as a native template element instead of its inner content in Vue 3.`
  },
  ["COMPILER_INLINE_TEMPLATE"]: {
    message: `"inline-template" has been removed in Vue 3.`,
    link: `https://v3-migration.vuejs.org/breaking-changes/inline-template-attribute.html`
  },
  ["COMPILER_FILTER"]: {
    message: `filters have been removed in Vue 3. The "|" symbol will be treated as native JavaScript bitwise OR operator. Use method calls or computed properties instead.`,
    link: `https://v3-migration.vuejs.org/breaking-changes/filters.html`
  }
};
function getCompatValue(key, context) {
  const config = context.options ? context.options.compatConfig : context.compatConfig;
  const value = config && config[key];
  if (key === "MODE") {
    return value || 3;
  } else {
    return value;
  }
}
function isCompatEnabled(key, context) {
  const mode = getCompatValue("MODE", context);
  const value = getCompatValue(key, context);
  return mode === 3 ? value === true : value !== false;
}
function checkCompatEnabled(key, context, loc, ...args) {
  const enabled = isCompatEnabled(key, context);
  if ( true && enabled) {
    warnDeprecation(key, context, loc, ...args);
  }
  return enabled;
}
function warnDeprecation(key, context, loc, ...args) {
  const val = getCompatValue(key, context);
  if (val === "suppress-warning") {
    return;
  }
  const { message, link } = deprecationData[key];
  const msg = `(deprecation ${key}) ${typeof message === "function" ? message(...args) : message}${link ? `
  Details: ${link}` : ``}`;
  const err = new SyntaxError(msg);
  err.code = key;
  if (loc)
    err.loc = loc;
  context.onWarn(err);
}

const decodeRE = /&(gt|lt|amp|apos|quot);/g;
const decodeMap = {
  gt: ">",
  lt: "<",
  amp: "&",
  apos: "'",
  quot: '"'
};
const defaultParserOptions = {
  delimiters: [`{{`, `}}`],
  getNamespace: () => 0,
  getTextMode: () => 0,
  isVoidTag: _vue_shared__WEBPACK_IMPORTED_MODULE_0__.NO,
  isPreTag: _vue_shared__WEBPACK_IMPORTED_MODULE_0__.NO,
  isCustomElement: _vue_shared__WEBPACK_IMPORTED_MODULE_0__.NO,
  decodeEntities: (rawText) => rawText.replace(decodeRE, (_, p1) => decodeMap[p1]),
  onError: defaultOnError,
  onWarn: defaultOnWarn,
  comments: !!("development" !== "production")
};
function baseParse(content, options = {}) {
  const context = createParserContext(content, options);
  const start = getCursor(context);
  return createRoot(
    parseChildren(context, 0, []),
    getSelection(context, start)
  );
}
function createParserContext(content, rawOptions) {
  const options = (0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.extend)({}, defaultParserOptions);
  let key;
  for (key in rawOptions) {
    options[key] = rawOptions[key] === void 0 ? defaultParserOptions[key] : rawOptions[key];
  }
  return {
    options,
    column: 1,
    line: 1,
    offset: 0,
    originalSource: content,
    source: content,
    inPre: false,
    inVPre: false,
    onWarn: options.onWarn
  };
}
function parseChildren(context, mode, ancestors) {
  const parent = last(ancestors);
  const ns = parent ? parent.ns : 0;
  const nodes = [];
  while (!isEnd(context, mode, ancestors)) {
    const s = context.source;
    let node = void 0;
    if (mode === 0 || mode === 1) {
      if (!context.inVPre && startsWith(s, context.options.delimiters[0])) {
        node = parseInterpolation(context, mode);
      } else if (mode === 0 && s[0] === "<") {
        if (s.length === 1) {
          emitError(context, 5, 1);
        } else if (s[1] === "!") {
          if (startsWith(s, "<!--")) {
            node = parseComment(context);
          } else if (startsWith(s, "<!DOCTYPE")) {
            node = parseBogusComment(context);
          } else if (startsWith(s, "<![CDATA[")) {
            if (ns !== 0) {
              node = parseCDATA(context, ancestors);
            } else {
              emitError(context, 1);
              node = parseBogusComment(context);
            }
          } else {
            emitError(context, 11);
            node = parseBogusComment(context);
          }
        } else if (s[1] === "/") {
          if (s.length === 2) {
            emitError(context, 5, 2);
          } else if (s[2] === ">") {
            emitError(context, 14, 2);
            advanceBy(context, 3);
            continue;
          } else if (/[a-z]/i.test(s[2])) {
            emitError(context, 23);
            parseTag(context, TagType.End, parent);
            continue;
          } else {
            emitError(
              context,
              12,
              2
            );
            node = parseBogusComment(context);
          }
        } else if (/[a-z]/i.test(s[1])) {
          node = parseElement(context, ancestors);
          if (isCompatEnabled(
            "COMPILER_NATIVE_TEMPLATE",
            context
          ) && node && node.tag === "template" && !node.props.some(
            (p) => p.type === 7 && isSpecialTemplateDirective(p.name)
          )) {
             true && warnDeprecation(
              "COMPILER_NATIVE_TEMPLATE",
              context,
              node.loc
            );
            node = node.children;
          }
        } else if (s[1] === "?") {
          emitError(
            context,
            21,
            1
          );
          node = parseBogusComment(context);
        } else {
          emitError(context, 12, 1);
        }
      }
    }
    if (!node) {
      node = parseText(context, mode);
    }
    if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.isArray)(node)) {
      for (let i = 0; i < node.length; i++) {
        pushNode(nodes, node[i]);
      }
    } else {
      pushNode(nodes, node);
    }
  }
  let removedWhitespace = false;
  if (mode !== 2 && mode !== 1) {
    const shouldCondense = context.options.whitespace !== "preserve";
    for (let i = 0; i < nodes.length; i++) {
      const node = nodes[i];
      if (node.type === 2) {
        if (!context.inPre) {
          if (!/[^\t\r\n\f ]/.test(node.content)) {
            const prev = nodes[i - 1];
            const next = nodes[i + 1];
            if (!prev || !next || shouldCondense && (prev.type === 3 && next.type === 3 || prev.type === 3 && next.type === 1 || prev.type === 1 && next.type === 3 || prev.type === 1 && next.type === 1 && /[\r\n]/.test(node.content))) {
              removedWhitespace = true;
              nodes[i] = null;
            } else {
              node.content = " ";
            }
          } else if (shouldCondense) {
            node.content = node.content.replace(/[\t\r\n\f ]+/g, " ");
          }
        } else {
          node.content = node.content.replace(/\r\n/g, "\n");
        }
      } else if (node.type === 3 && !context.options.comments) {
        removedWhitespace = true;
        nodes[i] = null;
      }
    }
    if (context.inPre && parent && context.options.isPreTag(parent.tag)) {
      const first = nodes[0];
      if (first && first.type === 2) {
        first.content = first.content.replace(/^\r?\n/, "");
      }
    }
  }
  return removedWhitespace ? nodes.filter(Boolean) : nodes;
}
function pushNode(nodes, node) {
  if (node.type === 2) {
    const prev = last(nodes);
    if (prev && prev.type === 2 && prev.loc.end.offset === node.loc.start.offset) {
      prev.content += node.content;
      prev.loc.end = node.loc.end;
      prev.loc.source += node.loc.source;
      return;
    }
  }
  nodes.push(node);
}
function parseCDATA(context, ancestors) {
  advanceBy(context, 9);
  const nodes = parseChildren(context, 3, ancestors);
  if (context.source.length === 0) {
    emitError(context, 6);
  } else {
    advanceBy(context, 3);
  }
  return nodes;
}
function parseComment(context) {
  const start = getCursor(context);
  let content;
  const match = /--(\!)?>/.exec(context.source);
  if (!match) {
    content = context.source.slice(4);
    advanceBy(context, context.source.length);
    emitError(context, 7);
  } else {
    if (match.index <= 3) {
      emitError(context, 0);
    }
    if (match[1]) {
      emitError(context, 10);
    }
    content = context.source.slice(4, match.index);
    const s = context.source.slice(0, match.index);
    let prevIndex = 1, nestedIndex = 0;
    while ((nestedIndex = s.indexOf("<!--", prevIndex)) !== -1) {
      advanceBy(context, nestedIndex - prevIndex + 1);
      if (nestedIndex + 4 < s.length) {
        emitError(context, 16);
      }
      prevIndex = nestedIndex + 1;
    }
    advanceBy(context, match.index + match[0].length - prevIndex + 1);
  }
  return {
    type: 3,
    content,
    loc: getSelection(context, start)
  };
}
function parseBogusComment(context) {
  const start = getCursor(context);
  const contentStart = context.source[1] === "?" ? 1 : 2;
  let content;
  const closeIndex = context.source.indexOf(">");
  if (closeIndex === -1) {
    content = context.source.slice(contentStart);
    advanceBy(context, context.source.length);
  } else {
    content = context.source.slice(contentStart, closeIndex);
    advanceBy(context, closeIndex + 1);
  }
  return {
    type: 3,
    content,
    loc: getSelection(context, start)
  };
}
function parseElement(context, ancestors) {
  const wasInPre = context.inPre;
  const wasInVPre = context.inVPre;
  const parent = last(ancestors);
  const element = parseTag(context, TagType.Start, parent);
  const isPreBoundary = context.inPre && !wasInPre;
  const isVPreBoundary = context.inVPre && !wasInVPre;
  if (element.isSelfClosing || context.options.isVoidTag(element.tag)) {
    if (isPreBoundary) {
      context.inPre = false;
    }
    if (isVPreBoundary) {
      context.inVPre = false;
    }
    return element;
  }
  ancestors.push(element);
  const mode = context.options.getTextMode(element, parent);
  const children = parseChildren(context, mode, ancestors);
  ancestors.pop();
  {
    const inlineTemplateProp = element.props.find(
      (p) => p.type === 6 && p.name === "inline-template"
    );
    if (inlineTemplateProp && checkCompatEnabled(
      "COMPILER_INLINE_TEMPLATE",
      context,
      inlineTemplateProp.loc
    )) {
      const loc = getSelection(context, element.loc.end);
      inlineTemplateProp.value = {
        type: 2,
        content: loc.source,
        loc
      };
    }
  }
  element.children = children;
  if (startsWithEndTagOpen(context.source, element.tag)) {
    parseTag(context, TagType.End, parent);
  } else {
    emitError(context, 24, 0, element.loc.start);
    if (context.source.length === 0 && element.tag.toLowerCase() === "script") {
      const first = children[0];
      if (first && startsWith(first.loc.source, "<!--")) {
        emitError(context, 8);
      }
    }
  }
  element.loc = getSelection(context, element.loc.start);
  if (isPreBoundary) {
    context.inPre = false;
  }
  if (isVPreBoundary) {
    context.inVPre = false;
  }
  return element;
}
var TagType = /* @__PURE__ */ ((TagType2) => {
  TagType2[TagType2["Start"] = 0] = "Start";
  TagType2[TagType2["End"] = 1] = "End";
  return TagType2;
})(TagType || {});
const isSpecialTemplateDirective = /* @__PURE__ */ (0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.makeMap)(
  `if,else,else-if,for,slot`
);
function parseTag(context, type, parent) {
  const start = getCursor(context);
  const match = /^<\/?([a-z][^\t\r\n\f />]*)/i.exec(context.source);
  const tag = match[1];
  const ns = context.options.getNamespace(tag, parent);
  advanceBy(context, match[0].length);
  advanceSpaces(context);
  const cursor = getCursor(context);
  const currentSource = context.source;
  if (context.options.isPreTag(tag)) {
    context.inPre = true;
  }
  let props = parseAttributes(context, type);
  if (type === 0 /* Start */ && !context.inVPre && props.some((p) => p.type === 7 && p.name === "pre")) {
    context.inVPre = true;
    (0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.extend)(context, cursor);
    context.source = currentSource;
    props = parseAttributes(context, type).filter((p) => p.name !== "v-pre");
  }
  let isSelfClosing = false;
  if (context.source.length === 0) {
    emitError(context, 9);
  } else {
    isSelfClosing = startsWith(context.source, "/>");
    if (type === 1 /* End */ && isSelfClosing) {
      emitError(context, 4);
    }
    advanceBy(context, isSelfClosing ? 2 : 1);
  }
  if (type === 1 /* End */) {
    return;
  }
  if ( true && isCompatEnabled(
    "COMPILER_V_IF_V_FOR_PRECEDENCE",
    context
  )) {
    let hasIf = false;
    let hasFor = false;
    for (let i = 0; i < props.length; i++) {
      const p = props[i];
      if (p.type === 7) {
        if (p.name === "if") {
          hasIf = true;
        } else if (p.name === "for") {
          hasFor = true;
        }
      }
      if (hasIf && hasFor) {
        warnDeprecation(
          "COMPILER_V_IF_V_FOR_PRECEDENCE",
          context,
          getSelection(context, start)
        );
        break;
      }
    }
  }
  let tagType = 0;
  if (!context.inVPre) {
    if (tag === "slot") {
      tagType = 2;
    } else if (tag === "template") {
      if (props.some(
        (p) => p.type === 7 && isSpecialTemplateDirective(p.name)
      )) {
        tagType = 3;
      }
    } else if (isComponent(tag, props, context)) {
      tagType = 1;
    }
  }
  return {
    type: 1,
    ns,
    tag,
    tagType,
    props,
    isSelfClosing,
    children: [],
    loc: getSelection(context, start),
    codegenNode: void 0
    // to be created during transform phase
  };
}
function isComponent(tag, props, context) {
  const options = context.options;
  if (options.isCustomElement(tag)) {
    return false;
  }
  if (tag === "component" || /^[A-Z]/.test(tag) || isCoreComponent(tag) || options.isBuiltInComponent && options.isBuiltInComponent(tag) || options.isNativeTag && !options.isNativeTag(tag)) {
    return true;
  }
  for (let i = 0; i < props.length; i++) {
    const p = props[i];
    if (p.type === 6) {
      if (p.name === "is" && p.value) {
        if (p.value.content.startsWith("vue:")) {
          return true;
        } else if (checkCompatEnabled(
          "COMPILER_IS_ON_ELEMENT",
          context,
          p.loc
        )) {
          return true;
        }
      }
    } else {
      if (p.name === "is") {
        return true;
      } else if (
        // :is on plain element - only treat as component in compat mode
        p.name === "bind" && isStaticArgOf(p.arg, "is") && true && checkCompatEnabled(
          "COMPILER_IS_ON_ELEMENT",
          context,
          p.loc
        )
      ) {
        return true;
      }
    }
  }
}
function parseAttributes(context, type) {
  const props = [];
  const attributeNames = /* @__PURE__ */ new Set();
  while (context.source.length > 0 && !startsWith(context.source, ">") && !startsWith(context.source, "/>")) {
    if (startsWith(context.source, "/")) {
      emitError(context, 22);
      advanceBy(context, 1);
      advanceSpaces(context);
      continue;
    }
    if (type === 1 /* End */) {
      emitError(context, 3);
    }
    const attr = parseAttribute(context, attributeNames);
    if (attr.type === 6 && attr.value && attr.name === "class") {
      attr.value.content = attr.value.content.replace(/\s+/g, " ").trim();
    }
    if (type === 0 /* Start */) {
      props.push(attr);
    }
    if (/^[^\t\r\n\f />]/.test(context.source)) {
      emitError(context, 15);
    }
    advanceSpaces(context);
  }
  return props;
}
function parseAttribute(context, nameSet) {
  var _a;
  const start = getCursor(context);
  const match = /^[^\t\r\n\f />][^\t\r\n\f />=]*/.exec(context.source);
  const name = match[0];
  if (nameSet.has(name)) {
    emitError(context, 2);
  }
  nameSet.add(name);
  if (name[0] === "=") {
    emitError(context, 19);
  }
  {
    const pattern = /["'<]/g;
    let m;
    while (m = pattern.exec(name)) {
      emitError(
        context,
        17,
        m.index
      );
    }
  }
  advanceBy(context, name.length);
  let value = void 0;
  if (/^[\t\r\n\f ]*=/.test(context.source)) {
    advanceSpaces(context);
    advanceBy(context, 1);
    advanceSpaces(context);
    value = parseAttributeValue(context);
    if (!value) {
      emitError(context, 13);
    }
  }
  const loc = getSelection(context, start);
  if (!context.inVPre && /^(v-[A-Za-z0-9-]|:|\.|@|#)/.test(name)) {
    const match2 = /(?:^v-([a-z0-9-]+))?(?:(?::|^\.|^@|^#)(\[[^\]]+\]|[^\.]+))?(.+)?$/i.exec(
      name
    );
    let isPropShorthand = startsWith(name, ".");
    let dirName = match2[1] || (isPropShorthand || startsWith(name, ":") ? "bind" : startsWith(name, "@") ? "on" : "slot");
    let arg;
    if (match2[2]) {
      const isSlot = dirName === "slot";
      const startOffset = name.lastIndexOf(
        match2[2],
        name.length - (((_a = match2[3]) == null ? void 0 : _a.length) || 0)
      );
      const loc2 = getSelection(
        context,
        getNewPosition(context, start, startOffset),
        getNewPosition(
          context,
          start,
          startOffset + match2[2].length + (isSlot && match2[3] || "").length
        )
      );
      let content = match2[2];
      let isStatic = true;
      if (content.startsWith("[")) {
        isStatic = false;
        if (!content.endsWith("]")) {
          emitError(
            context,
            27
          );
          content = content.slice(1);
        } else {
          content = content.slice(1, content.length - 1);
        }
      } else if (isSlot) {
        content += match2[3] || "";
      }
      arg = {
        type: 4,
        content,
        isStatic,
        constType: isStatic ? 3 : 0,
        loc: loc2
      };
    }
    if (value && value.isQuoted) {
      const valueLoc = value.loc;
      valueLoc.start.offset++;
      valueLoc.start.column++;
      valueLoc.end = advancePositionWithClone(valueLoc.start, value.content);
      valueLoc.source = valueLoc.source.slice(1, -1);
    }
    const modifiers = match2[3] ? match2[3].slice(1).split(".") : [];
    if (isPropShorthand)
      modifiers.push("prop");
    if (dirName === "bind" && arg) {
      if (modifiers.includes("sync") && checkCompatEnabled(
        "COMPILER_V_BIND_SYNC",
        context,
        loc,
        arg.loc.source
      )) {
        dirName = "model";
        modifiers.splice(modifiers.indexOf("sync"), 1);
      }
      if ( true && modifiers.includes("prop")) {
        checkCompatEnabled(
          "COMPILER_V_BIND_PROP",
          context,
          loc
        );
      }
    }
    return {
      type: 7,
      name: dirName,
      exp: value && {
        type: 4,
        content: value.content,
        isStatic: false,
        // Treat as non-constant by default. This can be potentially set to
        // other values by `transformExpression` to make it eligible for hoisting.
        constType: 0,
        loc: value.loc
      },
      arg,
      modifiers,
      loc
    };
  }
  if (!context.inVPre && startsWith(name, "v-")) {
    emitError(context, 26);
  }
  return {
    type: 6,
    name,
    value: value && {
      type: 2,
      content: value.content,
      loc: value.loc
    },
    loc
  };
}
function parseAttributeValue(context) {
  const start = getCursor(context);
  let content;
  const quote = context.source[0];
  const isQuoted = quote === `"` || quote === `'`;
  if (isQuoted) {
    advanceBy(context, 1);
    const endIndex = context.source.indexOf(quote);
    if (endIndex === -1) {
      content = parseTextData(
        context,
        context.source.length,
        4
      );
    } else {
      content = parseTextData(context, endIndex, 4);
      advanceBy(context, 1);
    }
  } else {
    const match = /^[^\t\r\n\f >]+/.exec(context.source);
    if (!match) {
      return void 0;
    }
    const unexpectedChars = /["'<=`]/g;
    let m;
    while (m = unexpectedChars.exec(match[0])) {
      emitError(
        context,
        18,
        m.index
      );
    }
    content = parseTextData(context, match[0].length, 4);
  }
  return { content, isQuoted, loc: getSelection(context, start) };
}
function parseInterpolation(context, mode) {
  const [open, close] = context.options.delimiters;
  const closeIndex = context.source.indexOf(close, open.length);
  if (closeIndex === -1) {
    emitError(context, 25);
    return void 0;
  }
  const start = getCursor(context);
  advanceBy(context, open.length);
  const innerStart = getCursor(context);
  const innerEnd = getCursor(context);
  const rawContentLength = closeIndex - open.length;
  const rawContent = context.source.slice(0, rawContentLength);
  const preTrimContent = parseTextData(context, rawContentLength, mode);
  const content = preTrimContent.trim();
  const startOffset = preTrimContent.indexOf(content);
  if (startOffset > 0) {
    advancePositionWithMutation(innerStart, rawContent, startOffset);
  }
  const endOffset = rawContentLength - (preTrimContent.length - content.length - startOffset);
  advancePositionWithMutation(innerEnd, rawContent, endOffset);
  advanceBy(context, close.length);
  return {
    type: 5,
    content: {
      type: 4,
      isStatic: false,
      // Set `isConstant` to false by default and will decide in transformExpression
      constType: 0,
      content,
      loc: getSelection(context, innerStart, innerEnd)
    },
    loc: getSelection(context, start)
  };
}
function parseText(context, mode) {
  const endTokens = mode === 3 ? ["]]>"] : ["<", context.options.delimiters[0]];
  let endIndex = context.source.length;
  for (let i = 0; i < endTokens.length; i++) {
    const index = context.source.indexOf(endTokens[i], 1);
    if (index !== -1 && endIndex > index) {
      endIndex = index;
    }
  }
  const start = getCursor(context);
  const content = parseTextData(context, endIndex, mode);
  return {
    type: 2,
    content,
    loc: getSelection(context, start)
  };
}
function parseTextData(context, length, mode) {
  const rawText = context.source.slice(0, length);
  advanceBy(context, length);
  if (mode === 2 || mode === 3 || !rawText.includes("&")) {
    return rawText;
  } else {
    return context.options.decodeEntities(
      rawText,
      mode === 4
    );
  }
}
function getCursor(context) {
  const { column, line, offset } = context;
  return { column, line, offset };
}
function getSelection(context, start, end) {
  end = end || getCursor(context);
  return {
    start,
    end,
    source: context.originalSource.slice(start.offset, end.offset)
  };
}
function last(xs) {
  return xs[xs.length - 1];
}
function startsWith(source, searchString) {
  return source.startsWith(searchString);
}
function advanceBy(context, numberOfCharacters) {
  const { source } = context;
  advancePositionWithMutation(context, source, numberOfCharacters);
  context.source = source.slice(numberOfCharacters);
}
function advanceSpaces(context) {
  const match = /^[\t\r\n\f ]+/.exec(context.source);
  if (match) {
    advanceBy(context, match[0].length);
  }
}
function getNewPosition(context, start, numberOfCharacters) {
  return advancePositionWithClone(
    start,
    context.originalSource.slice(start.offset, numberOfCharacters),
    numberOfCharacters
  );
}
function emitError(context, code, offset, loc = getCursor(context)) {
  if (offset) {
    loc.offset += offset;
    loc.column += offset;
  }
  context.options.onError(
    createCompilerError(code, {
      start: loc,
      end: loc,
      source: ""
    })
  );
}
function isEnd(context, mode, ancestors) {
  const s = context.source;
  switch (mode) {
    case 0:
      if (startsWith(s, "</")) {
        for (let i = ancestors.length - 1; i >= 0; --i) {
          if (startsWithEndTagOpen(s, ancestors[i].tag)) {
            return true;
          }
        }
      }
      break;
    case 1:
    case 2: {
      const parent = last(ancestors);
      if (parent && startsWithEndTagOpen(s, parent.tag)) {
        return true;
      }
      break;
    }
    case 3:
      if (startsWith(s, "]]>")) {
        return true;
      }
      break;
  }
  return !s;
}
function startsWithEndTagOpen(source, tag) {
  return startsWith(source, "</") && source.slice(2, 2 + tag.length).toLowerCase() === tag.toLowerCase() && /[\t\r\n\f />]/.test(source[2 + tag.length] || ">");
}

function hoistStatic(root, context) {
  walk(
    root,
    context,
    // Root node is unfortunately non-hoistable due to potential parent
    // fallthrough attributes.
    isSingleElementRoot(root, root.children[0])
  );
}
function isSingleElementRoot(root, child) {
  const { children } = root;
  return children.length === 1 && child.type === 1 && !isSlotOutlet(child);
}
function walk(node, context, doNotHoistNode = false) {
  const { children } = node;
  const originalCount = children.length;
  let hoistedCount = 0;
  for (let i = 0; i < children.length; i++) {
    const child = children[i];
    if (child.type === 1 && child.tagType === 0) {
      const constantType = doNotHoistNode ? 0 : getConstantType(child, context);
      if (constantType > 0) {
        if (constantType >= 2) {
          child.codegenNode.patchFlag = -1 + ( true ? ` /* HOISTED */` : 0);
          child.codegenNode = context.hoist(child.codegenNode);
          hoistedCount++;
          continue;
        }
      } else {
        const codegenNode = child.codegenNode;
        if (codegenNode.type === 13) {
          const flag = getPatchFlag(codegenNode);
          if ((!flag || flag === 512 || flag === 1) && getGeneratedPropsConstantType(child, context) >= 2) {
            const props = getNodeProps(child);
            if (props) {
              codegenNode.props = context.hoist(props);
            }
          }
          if (codegenNode.dynamicProps) {
            codegenNode.dynamicProps = context.hoist(codegenNode.dynamicProps);
          }
        }
      }
    }
    if (child.type === 1) {
      const isComponent = child.tagType === 1;
      if (isComponent) {
        context.scopes.vSlot++;
      }
      walk(child, context);
      if (isComponent) {
        context.scopes.vSlot--;
      }
    } else if (child.type === 11) {
      walk(child, context, child.children.length === 1);
    } else if (child.type === 9) {
      for (let i2 = 0; i2 < child.branches.length; i2++) {
        walk(
          child.branches[i2],
          context,
          child.branches[i2].children.length === 1
        );
      }
    }
  }
  if (hoistedCount && context.transformHoist) {
    context.transformHoist(children, context, node);
  }
  if (hoistedCount && hoistedCount === originalCount && node.type === 1 && node.tagType === 0 && node.codegenNode && node.codegenNode.type === 13 && (0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.isArray)(node.codegenNode.children)) {
    node.codegenNode.children = context.hoist(
      createArrayExpression(node.codegenNode.children)
    );
  }
}
function getConstantType(node, context) {
  const { constantCache } = context;
  switch (node.type) {
    case 1:
      if (node.tagType !== 0) {
        return 0;
      }
      const cached = constantCache.get(node);
      if (cached !== void 0) {
        return cached;
      }
      const codegenNode = node.codegenNode;
      if (codegenNode.type !== 13) {
        return 0;
      }
      if (codegenNode.isBlock && node.tag !== "svg" && node.tag !== "foreignObject") {
        return 0;
      }
      const flag = getPatchFlag(codegenNode);
      if (!flag) {
        let returnType2 = 3;
        const generatedPropsType = getGeneratedPropsConstantType(node, context);
        if (generatedPropsType === 0) {
          constantCache.set(node, 0);
          return 0;
        }
        if (generatedPropsType < returnType2) {
          returnType2 = generatedPropsType;
        }
        for (let i = 0; i < node.children.length; i++) {
          const childType = getConstantType(node.children[i], context);
          if (childType === 0) {
            constantCache.set(node, 0);
            return 0;
          }
          if (childType < returnType2) {
            returnType2 = childType;
          }
        }
        if (returnType2 > 1) {
          for (let i = 0; i < node.props.length; i++) {
            const p = node.props[i];
            if (p.type === 7 && p.name === "bind" && p.exp) {
              const expType = getConstantType(p.exp, context);
              if (expType === 0) {
                constantCache.set(node, 0);
                return 0;
              }
              if (expType < returnType2) {
                returnType2 = expType;
              }
            }
          }
        }
        if (codegenNode.isBlock) {
          for (let i = 0; i < node.props.length; i++) {
            const p = node.props[i];
            if (p.type === 7) {
              constantCache.set(node, 0);
              return 0;
            }
          }
          context.removeHelper(OPEN_BLOCK);
          context.removeHelper(
            getVNodeBlockHelper(context.inSSR, codegenNode.isComponent)
          );
          codegenNode.isBlock = false;
          context.helper(getVNodeHelper(context.inSSR, codegenNode.isComponent));
        }
        constantCache.set(node, returnType2);
        return returnType2;
      } else {
        constantCache.set(node, 0);
        return 0;
      }
    case 2:
    case 3:
      return 3;
    case 9:
    case 11:
    case 10:
      return 0;
    case 5:
    case 12:
      return getConstantType(node.content, context);
    case 4:
      return node.constType;
    case 8:
      let returnType = 3;
      for (let i = 0; i < node.children.length; i++) {
        const child = node.children[i];
        if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.isString)(child) || (0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.isSymbol)(child)) {
          continue;
        }
        const childType = getConstantType(child, context);
        if (childType === 0) {
          return 0;
        } else if (childType < returnType) {
          returnType = childType;
        }
      }
      return returnType;
    default:
      if (true) ;
      return 0;
  }
}
const allowHoistedHelperSet = /* @__PURE__ */ new Set([
  NORMALIZE_CLASS,
  NORMALIZE_STYLE,
  NORMALIZE_PROPS,
  GUARD_REACTIVE_PROPS
]);
function getConstantTypeOfHelperCall(value, context) {
  if (value.type === 14 && !(0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.isString)(value.callee) && allowHoistedHelperSet.has(value.callee)) {
    const arg = value.arguments[0];
    if (arg.type === 4) {
      return getConstantType(arg, context);
    } else if (arg.type === 14) {
      return getConstantTypeOfHelperCall(arg, context);
    }
  }
  return 0;
}
function getGeneratedPropsConstantType(node, context) {
  let returnType = 3;
  const props = getNodeProps(node);
  if (props && props.type === 15) {
    const { properties } = props;
    for (let i = 0; i < properties.length; i++) {
      const { key, value } = properties[i];
      const keyType = getConstantType(key, context);
      if (keyType === 0) {
        return keyType;
      }
      if (keyType < returnType) {
        returnType = keyType;
      }
      let valueType;
      if (value.type === 4) {
        valueType = getConstantType(value, context);
      } else if (value.type === 14) {
        valueType = getConstantTypeOfHelperCall(value, context);
      } else {
        valueType = 0;
      }
      if (valueType === 0) {
        return valueType;
      }
      if (valueType < returnType) {
        returnType = valueType;
      }
    }
  }
  return returnType;
}
function getNodeProps(node) {
  const codegenNode = node.codegenNode;
  if (codegenNode.type === 13) {
    return codegenNode.props;
  }
}
function getPatchFlag(node) {
  const flag = node.patchFlag;
  return flag ? parseInt(flag, 10) : void 0;
}

function createTransformContext(root, {
  filename = "",
  prefixIdentifiers = false,
  hoistStatic: hoistStatic2 = false,
  cacheHandlers = false,
  nodeTransforms = [],
  directiveTransforms = {},
  transformHoist = null,
  isBuiltInComponent = _vue_shared__WEBPACK_IMPORTED_MODULE_0__.NOOP,
  isCustomElement = _vue_shared__WEBPACK_IMPORTED_MODULE_0__.NOOP,
  expressionPlugins = [],
  scopeId = null,
  slotted = true,
  ssr = false,
  inSSR = false,
  ssrCssVars = ``,
  bindingMetadata = _vue_shared__WEBPACK_IMPORTED_MODULE_0__.EMPTY_OBJ,
  inline = false,
  isTS = false,
  onError = defaultOnError,
  onWarn = defaultOnWarn,
  compatConfig
}) {
  const nameMatch = filename.replace(/\?.*$/, "").match(/([^/\\]+)\.\w+$/);
  const context = {
    // options
    selfName: nameMatch && (0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.capitalize)((0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.camelize)(nameMatch[1])),
    prefixIdentifiers,
    hoistStatic: hoistStatic2,
    cacheHandlers,
    nodeTransforms,
    directiveTransforms,
    transformHoist,
    isBuiltInComponent,
    isCustomElement,
    expressionPlugins,
    scopeId,
    slotted,
    ssr,
    inSSR,
    ssrCssVars,
    bindingMetadata,
    inline,
    isTS,
    onError,
    onWarn,
    compatConfig,
    // state
    root,
    helpers: /* @__PURE__ */ new Map(),
    components: /* @__PURE__ */ new Set(),
    directives: /* @__PURE__ */ new Set(),
    hoists: [],
    imports: [],
    constantCache: /* @__PURE__ */ new Map(),
    temps: 0,
    cached: 0,
    identifiers: /* @__PURE__ */ Object.create(null),
    scopes: {
      vFor: 0,
      vSlot: 0,
      vPre: 0,
      vOnce: 0
    },
    parent: null,
    currentNode: root,
    childIndex: 0,
    inVOnce: false,
    // methods
    helper(name) {
      const count = context.helpers.get(name) || 0;
      context.helpers.set(name, count + 1);
      return name;
    },
    removeHelper(name) {
      const count = context.helpers.get(name);
      if (count) {
        const currentCount = count - 1;
        if (!currentCount) {
          context.helpers.delete(name);
        } else {
          context.helpers.set(name, currentCount);
        }
      }
    },
    helperString(name) {
      return `_${helperNameMap[context.helper(name)]}`;
    },
    replaceNode(node) {
      if (true) {
        if (!context.currentNode) {
          throw new Error(`Node being replaced is already removed.`);
        }
        if (!context.parent) {
          throw new Error(`Cannot replace root node.`);
        }
      }
      context.parent.children[context.childIndex] = context.currentNode = node;
    },
    removeNode(node) {
      if ( true && !context.parent) {
        throw new Error(`Cannot remove root node.`);
      }
      const list = context.parent.children;
      const removalIndex = node ? list.indexOf(node) : context.currentNode ? context.childIndex : -1;
      if ( true && removalIndex < 0) {
        throw new Error(`node being removed is not a child of current parent`);
      }
      if (!node || node === context.currentNode) {
        context.currentNode = null;
        context.onNodeRemoved();
      } else {
        if (context.childIndex > removalIndex) {
          context.childIndex--;
          context.onNodeRemoved();
        }
      }
      context.parent.children.splice(removalIndex, 1);
    },
    onNodeRemoved: () => {
    },
    addIdentifiers(exp) {
    },
    removeIdentifiers(exp) {
    },
    hoist(exp) {
      if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.isString)(exp))
        exp = createSimpleExpression(exp);
      context.hoists.push(exp);
      const identifier = createSimpleExpression(
        `_hoisted_${context.hoists.length}`,
        false,
        exp.loc,
        2
      );
      identifier.hoisted = exp;
      return identifier;
    },
    cache(exp, isVNode = false) {
      return createCacheExpression(context.cached++, exp, isVNode);
    }
  };
  {
    context.filters = /* @__PURE__ */ new Set();
  }
  return context;
}
function transform(root, options) {
  const context = createTransformContext(root, options);
  traverseNode(root, context);
  if (options.hoistStatic) {
    hoistStatic(root, context);
  }
  if (!options.ssr) {
    createRootCodegen(root, context);
  }
  root.helpers = /* @__PURE__ */ new Set([...context.helpers.keys()]);
  root.components = [...context.components];
  root.directives = [...context.directives];
  root.imports = context.imports;
  root.hoists = context.hoists;
  root.temps = context.temps;
  root.cached = context.cached;
  {
    root.filters = [...context.filters];
  }
}
function createRootCodegen(root, context) {
  const { helper } = context;
  const { children } = root;
  if (children.length === 1) {
    const child = children[0];
    if (isSingleElementRoot(root, child) && child.codegenNode) {
      const codegenNode = child.codegenNode;
      if (codegenNode.type === 13) {
        convertToBlock(codegenNode, context);
      }
      root.codegenNode = codegenNode;
    } else {
      root.codegenNode = child;
    }
  } else if (children.length > 1) {
    let patchFlag = 64;
    let patchFlagText = _vue_shared__WEBPACK_IMPORTED_MODULE_0__.PatchFlagNames[64];
    if ( true && children.filter((c) => c.type !== 3).length === 1) {
      patchFlag |= 2048;
      patchFlagText += `, ${_vue_shared__WEBPACK_IMPORTED_MODULE_0__.PatchFlagNames[2048]}`;
    }
    root.codegenNode = createVNodeCall(
      context,
      helper(FRAGMENT),
      void 0,
      root.children,
      patchFlag + ( true ? ` /* ${patchFlagText} */` : 0),
      void 0,
      void 0,
      true,
      void 0,
      false
      /* isComponent */
    );
  } else ;
}
function traverseChildren(parent, context) {
  let i = 0;
  const nodeRemoved = () => {
    i--;
  };
  for (; i < parent.children.length; i++) {
    const child = parent.children[i];
    if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.isString)(child))
      continue;
    context.parent = parent;
    context.childIndex = i;
    context.onNodeRemoved = nodeRemoved;
    traverseNode(child, context);
  }
}
function traverseNode(node, context) {
  context.currentNode = node;
  const { nodeTransforms } = context;
  const exitFns = [];
  for (let i2 = 0; i2 < nodeTransforms.length; i2++) {
    const onExit = nodeTransforms[i2](node, context);
    if (onExit) {
      if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.isArray)(onExit)) {
        exitFns.push(...onExit);
      } else {
        exitFns.push(onExit);
      }
    }
    if (!context.currentNode) {
      return;
    } else {
      node = context.currentNode;
    }
  }
  switch (node.type) {
    case 3:
      if (!context.ssr) {
        context.helper(CREATE_COMMENT);
      }
      break;
    case 5:
      if (!context.ssr) {
        context.helper(TO_DISPLAY_STRING);
      }
      break;
    case 9:
      for (let i2 = 0; i2 < node.branches.length; i2++) {
        traverseNode(node.branches[i2], context);
      }
      break;
    case 10:
    case 11:
    case 1:
    case 0:
      traverseChildren(node, context);
      break;
  }
  context.currentNode = node;
  let i = exitFns.length;
  while (i--) {
    exitFns[i]();
  }
}
function createStructuralDirectiveTransform(name, fn) {
  const matches = (0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.isString)(name) ? (n) => n === name : (n) => name.test(n);
  return (node, context) => {
    if (node.type === 1) {
      const { props } = node;
      if (node.tagType === 3 && props.some(isVSlot)) {
        return;
      }
      const exitFns = [];
      for (let i = 0; i < props.length; i++) {
        const prop = props[i];
        if (prop.type === 7 && matches(prop.name)) {
          props.splice(i, 1);
          i--;
          const onExit = fn(node, prop, context);
          if (onExit)
            exitFns.push(onExit);
        }
      }
      return exitFns;
    }
  };
}

const PURE_ANNOTATION = `/*#__PURE__*/`;
const aliasHelper = (s) => `${helperNameMap[s]}: _${helperNameMap[s]}`;
function createCodegenContext(ast, {
  mode = "function",
  prefixIdentifiers = mode === "module",
  sourceMap = false,
  filename = `template.vue.html`,
  scopeId = null,
  optimizeImports = false,
  runtimeGlobalName = `Vue`,
  runtimeModuleName = `vue`,
  ssrRuntimeModuleName = "vue/server-renderer",
  ssr = false,
  isTS = false,
  inSSR = false
}) {
  const context = {
    mode,
    prefixIdentifiers,
    sourceMap,
    filename,
    scopeId,
    optimizeImports,
    runtimeGlobalName,
    runtimeModuleName,
    ssrRuntimeModuleName,
    ssr,
    isTS,
    inSSR,
    source: ast.loc.source,
    code: ``,
    column: 1,
    line: 1,
    offset: 0,
    indentLevel: 0,
    pure: false,
    map: void 0,
    helper(key) {
      return `_${helperNameMap[key]}`;
    },
    push(code, node) {
      context.code += code;
    },
    indent() {
      newline(++context.indentLevel);
    },
    deindent(withoutNewLine = false) {
      if (withoutNewLine) {
        --context.indentLevel;
      } else {
        newline(--context.indentLevel);
      }
    },
    newline() {
      newline(context.indentLevel);
    }
  };
  function newline(n) {
    context.push("\n" + `  `.repeat(n));
  }
  return context;
}
function generate(ast, options = {}) {
  const context = createCodegenContext(ast, options);
  if (options.onContextCreated)
    options.onContextCreated(context);
  const {
    mode,
    push,
    prefixIdentifiers,
    indent,
    deindent,
    newline,
    scopeId,
    ssr
  } = context;
  const helpers = Array.from(ast.helpers);
  const hasHelpers = helpers.length > 0;
  const useWithBlock = !prefixIdentifiers && mode !== "module";
  const isSetupInlined = false;
  const preambleContext = isSetupInlined ? createCodegenContext(ast, options) : context;
  {
    genFunctionPreamble(ast, preambleContext);
  }
  const functionName = ssr ? `ssrRender` : `render`;
  const args = ssr ? ["_ctx", "_push", "_parent", "_attrs"] : ["_ctx", "_cache"];
  const signature = args.join(", ");
  {
    push(`function ${functionName}(${signature}) {`);
  }
  indent();
  if (useWithBlock) {
    push(`with (_ctx) {`);
    indent();
    if (hasHelpers) {
      push(`const { ${helpers.map(aliasHelper).join(", ")} } = _Vue`);
      push(`
`);
      newline();
    }
  }
  if (ast.components.length) {
    genAssets(ast.components, "component", context);
    if (ast.directives.length || ast.temps > 0) {
      newline();
    }
  }
  if (ast.directives.length) {
    genAssets(ast.directives, "directive", context);
    if (ast.temps > 0) {
      newline();
    }
  }
  if (ast.filters && ast.filters.length) {
    newline();
    genAssets(ast.filters, "filter", context);
    newline();
  }
  if (ast.temps > 0) {
    push(`let `);
    for (let i = 0; i < ast.temps; i++) {
      push(`${i > 0 ? `, ` : ``}_temp${i}`);
    }
  }
  if (ast.components.length || ast.directives.length || ast.temps) {
    push(`
`);
    newline();
  }
  if (!ssr) {
    push(`return `);
  }
  if (ast.codegenNode) {
    genNode(ast.codegenNode, context);
  } else {
    push(`null`);
  }
  if (useWithBlock) {
    deindent();
    push(`}`);
  }
  deindent();
  push(`}`);
  return {
    ast,
    code: context.code,
    preamble: isSetupInlined ? preambleContext.code : ``,
    // SourceMapGenerator does have toJSON() method but it's not in the types
    map: context.map ? context.map.toJSON() : void 0
  };
}
function genFunctionPreamble(ast, context) {
  const {
    ssr,
    prefixIdentifiers,
    push,
    newline,
    runtimeModuleName,
    runtimeGlobalName,
    ssrRuntimeModuleName
  } = context;
  const VueBinding = runtimeGlobalName;
  const helpers = Array.from(ast.helpers);
  if (helpers.length > 0) {
    {
      push(`const _Vue = ${VueBinding}
`);
      if (ast.hoists.length) {
        const staticHelpers = [
          CREATE_VNODE,
          CREATE_ELEMENT_VNODE,
          CREATE_COMMENT,
          CREATE_TEXT,
          CREATE_STATIC
        ].filter((helper) => helpers.includes(helper)).map(aliasHelper).join(", ");
        push(`const { ${staticHelpers} } = _Vue
`);
      }
    }
  }
  genHoists(ast.hoists, context);
  newline();
  push(`return `);
}
function genAssets(assets, type, { helper, push, newline, isTS }) {
  const resolver = helper(
    type === "filter" ? RESOLVE_FILTER : type === "component" ? RESOLVE_COMPONENT : RESOLVE_DIRECTIVE
  );
  for (let i = 0; i < assets.length; i++) {
    let id = assets[i];
    const maybeSelfReference = id.endsWith("__self");
    if (maybeSelfReference) {
      id = id.slice(0, -6);
    }
    push(
      `const ${toValidAssetId(id, type)} = ${resolver}(${JSON.stringify(id)}${maybeSelfReference ? `, true` : ``})${isTS ? `!` : ``}`
    );
    if (i < assets.length - 1) {
      newline();
    }
  }
}
function genHoists(hoists, context) {
  if (!hoists.length) {
    return;
  }
  context.pure = true;
  const { push, newline, helper, scopeId, mode } = context;
  newline();
  for (let i = 0; i < hoists.length; i++) {
    const exp = hoists[i];
    if (exp) {
      push(
        `const _hoisted_${i + 1} = ${``}`
      );
      genNode(exp, context);
      newline();
    }
  }
  context.pure = false;
}
function isText(n) {
  return (0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.isString)(n) || n.type === 4 || n.type === 2 || n.type === 5 || n.type === 8;
}
function genNodeListAsArray(nodes, context) {
  const multilines = nodes.length > 3 ||  true && nodes.some((n) => (0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.isArray)(n) || !isText(n));
  context.push(`[`);
  multilines && context.indent();
  genNodeList(nodes, context, multilines);
  multilines && context.deindent();
  context.push(`]`);
}
function genNodeList(nodes, context, multilines = false, comma = true) {
  const { push, newline } = context;
  for (let i = 0; i < nodes.length; i++) {
    const node = nodes[i];
    if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.isString)(node)) {
      push(node);
    } else if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.isArray)(node)) {
      genNodeListAsArray(node, context);
    } else {
      genNode(node, context);
    }
    if (i < nodes.length - 1) {
      if (multilines) {
        comma && push(",");
        newline();
      } else {
        comma && push(", ");
      }
    }
  }
}
function genNode(node, context) {
  if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.isString)(node)) {
    context.push(node);
    return;
  }
  if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.isSymbol)(node)) {
    context.push(context.helper(node));
    return;
  }
  switch (node.type) {
    case 1:
    case 9:
    case 11:
       true && assert(
        node.codegenNode != null,
        `Codegen node is missing for element/if/for node. Apply appropriate transforms first.`
      );
      genNode(node.codegenNode, context);
      break;
    case 2:
      genText(node, context);
      break;
    case 4:
      genExpression(node, context);
      break;
    case 5:
      genInterpolation(node, context);
      break;
    case 12:
      genNode(node.codegenNode, context);
      break;
    case 8:
      genCompoundExpression(node, context);
      break;
    case 3:
      genComment(node, context);
      break;
    case 13:
      genVNodeCall(node, context);
      break;
    case 14:
      genCallExpression(node, context);
      break;
    case 15:
      genObjectExpression(node, context);
      break;
    case 17:
      genArrayExpression(node, context);
      break;
    case 18:
      genFunctionExpression(node, context);
      break;
    case 19:
      genConditionalExpression(node, context);
      break;
    case 20:
      genCacheExpression(node, context);
      break;
    case 21:
      genNodeList(node.body, context, true, false);
      break;
    case 22:
      break;
    case 23:
      break;
    case 24:
      break;
    case 25:
      break;
    case 26:
      break;
    case 10:
      break;
    default:
      if (true) {
        assert(false, `unhandled codegen node type: ${node.type}`);
        const exhaustiveCheck = node;
        return exhaustiveCheck;
      }
  }
}
function genText(node, context) {
  context.push(JSON.stringify(node.content), node);
}
function genExpression(node, context) {
  const { content, isStatic } = node;
  context.push(isStatic ? JSON.stringify(content) : content, node);
}
function genInterpolation(node, context) {
  const { push, helper, pure } = context;
  if (pure)
    push(PURE_ANNOTATION);
  push(`${helper(TO_DISPLAY_STRING)}(`);
  genNode(node.content, context);
  push(`)`);
}
function genCompoundExpression(node, context) {
  for (let i = 0; i < node.children.length; i++) {
    const child = node.children[i];
    if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.isString)(child)) {
      context.push(child);
    } else {
      genNode(child, context);
    }
  }
}
function genExpressionAsPropertyKey(node, context) {
  const { push } = context;
  if (node.type === 8) {
    push(`[`);
    genCompoundExpression(node, context);
    push(`]`);
  } else if (node.isStatic) {
    const text = isSimpleIdentifier(node.content) ? node.content : JSON.stringify(node.content);
    push(text, node);
  } else {
    push(`[${node.content}]`, node);
  }
}
function genComment(node, context) {
  const { push, helper, pure } = context;
  if (pure) {
    push(PURE_ANNOTATION);
  }
  push(`${helper(CREATE_COMMENT)}(${JSON.stringify(node.content)})`, node);
}
function genVNodeCall(node, context) {
  const { push, helper, pure } = context;
  const {
    tag,
    props,
    children,
    patchFlag,
    dynamicProps,
    directives,
    isBlock,
    disableTracking,
    isComponent
  } = node;
  if (directives) {
    push(helper(WITH_DIRECTIVES) + `(`);
  }
  if (isBlock) {
    push(`(${helper(OPEN_BLOCK)}(${disableTracking ? `true` : ``}), `);
  }
  if (pure) {
    push(PURE_ANNOTATION);
  }
  const callHelper = isBlock ? getVNodeBlockHelper(context.inSSR, isComponent) : getVNodeHelper(context.inSSR, isComponent);
  push(helper(callHelper) + `(`, node);
  genNodeList(
    genNullableArgs([tag, props, children, patchFlag, dynamicProps]),
    context
  );
  push(`)`);
  if (isBlock) {
    push(`)`);
  }
  if (directives) {
    push(`, `);
    genNode(directives, context);
    push(`)`);
  }
}
function genNullableArgs(args) {
  let i = args.length;
  while (i--) {
    if (args[i] != null)
      break;
  }
  return args.slice(0, i + 1).map((arg) => arg || `null`);
}
function genCallExpression(node, context) {
  const { push, helper, pure } = context;
  const callee = (0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.isString)(node.callee) ? node.callee : helper(node.callee);
  if (pure) {
    push(PURE_ANNOTATION);
  }
  push(callee + `(`, node);
  genNodeList(node.arguments, context);
  push(`)`);
}
function genObjectExpression(node, context) {
  const { push, indent, deindent, newline } = context;
  const { properties } = node;
  if (!properties.length) {
    push(`{}`, node);
    return;
  }
  const multilines = properties.length > 1 ||  true && properties.some((p) => p.value.type !== 4);
  push(multilines ? `{` : `{ `);
  multilines && indent();
  for (let i = 0; i < properties.length; i++) {
    const { key, value } = properties[i];
    genExpressionAsPropertyKey(key, context);
    push(`: `);
    genNode(value, context);
    if (i < properties.length - 1) {
      push(`,`);
      newline();
    }
  }
  multilines && deindent();
  push(multilines ? `}` : ` }`);
}
function genArrayExpression(node, context) {
  genNodeListAsArray(node.elements, context);
}
function genFunctionExpression(node, context) {
  const { push, indent, deindent } = context;
  const { params, returns, body, newline, isSlot } = node;
  if (isSlot) {
    push(`_${helperNameMap[WITH_CTX]}(`);
  }
  push(`(`, node);
  if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.isArray)(params)) {
    genNodeList(params, context);
  } else if (params) {
    genNode(params, context);
  }
  push(`) => `);
  if (newline || body) {
    push(`{`);
    indent();
  }
  if (returns) {
    if (newline) {
      push(`return `);
    }
    if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.isArray)(returns)) {
      genNodeListAsArray(returns, context);
    } else {
      genNode(returns, context);
    }
  } else if (body) {
    genNode(body, context);
  }
  if (newline || body) {
    deindent();
    push(`}`);
  }
  if (isSlot) {
    if (node.isNonScopedSlot) {
      push(`, undefined, true`);
    }
    push(`)`);
  }
}
function genConditionalExpression(node, context) {
  const { test, consequent, alternate, newline: needNewline } = node;
  const { push, indent, deindent, newline } = context;
  if (test.type === 4) {
    const needsParens = !isSimpleIdentifier(test.content);
    needsParens && push(`(`);
    genExpression(test, context);
    needsParens && push(`)`);
  } else {
    push(`(`);
    genNode(test, context);
    push(`)`);
  }
  needNewline && indent();
  context.indentLevel++;
  needNewline || push(` `);
  push(`? `);
  genNode(consequent, context);
  context.indentLevel--;
  needNewline && newline();
  needNewline || push(` `);
  push(`: `);
  const isNested = alternate.type === 19;
  if (!isNested) {
    context.indentLevel++;
  }
  genNode(alternate, context);
  if (!isNested) {
    context.indentLevel--;
  }
  needNewline && deindent(
    true
    /* without newline */
  );
}
function genCacheExpression(node, context) {
  const { push, helper, indent, deindent, newline } = context;
  push(`_cache[${node.index}] || (`);
  if (node.isVNode) {
    indent();
    push(`${helper(SET_BLOCK_TRACKING)}(-1),`);
    newline();
  }
  push(`_cache[${node.index}] = `);
  genNode(node.value, context);
  if (node.isVNode) {
    push(`,`);
    newline();
    push(`${helper(SET_BLOCK_TRACKING)}(1),`);
    newline();
    push(`_cache[${node.index}]`);
    deindent();
  }
  push(`)`);
}

function walkIdentifiers(root, onIdentifier, includeAll = false, parentStack = [], knownIds = /* @__PURE__ */ Object.create(null)) {
  {
    return;
  }
}
function isReferencedIdentifier(id, parent, parentStack) {
  {
    return false;
  }
}
function isInDestructureAssignment(parent, parentStack) {
  if (parent && (parent.type === "ObjectProperty" || parent.type === "ArrayPattern")) {
    let i = parentStack.length;
    while (i--) {
      const p = parentStack[i];
      if (p.type === "AssignmentExpression") {
        return true;
      } else if (p.type !== "ObjectProperty" && !p.type.endsWith("Pattern")) {
        break;
      }
    }
  }
  return false;
}
function walkFunctionParams(node, onIdent) {
  for (const p of node.params) {
    for (const id of extractIdentifiers(p)) {
      onIdent(id);
    }
  }
}
function walkBlockDeclarations(block, onIdent) {
  for (const stmt of block.body) {
    if (stmt.type === "VariableDeclaration") {
      if (stmt.declare)
        continue;
      for (const decl of stmt.declarations) {
        for (const id of extractIdentifiers(decl.id)) {
          onIdent(id);
        }
      }
    } else if (stmt.type === "FunctionDeclaration" || stmt.type === "ClassDeclaration") {
      if (stmt.declare || !stmt.id)
        continue;
      onIdent(stmt.id);
    }
  }
}
function extractIdentifiers(param, nodes = []) {
  switch (param.type) {
    case "Identifier":
      nodes.push(param);
      break;
    case "MemberExpression":
      let object = param;
      while (object.type === "MemberExpression") {
        object = object.object;
      }
      nodes.push(object);
      break;
    case "ObjectPattern":
      for (const prop of param.properties) {
        if (prop.type === "RestElement") {
          extractIdentifiers(prop.argument, nodes);
        } else {
          extractIdentifiers(prop.value, nodes);
        }
      }
      break;
    case "ArrayPattern":
      param.elements.forEach((element) => {
        if (element)
          extractIdentifiers(element, nodes);
      });
      break;
    case "RestElement":
      extractIdentifiers(param.argument, nodes);
      break;
    case "AssignmentPattern":
      extractIdentifiers(param.left, nodes);
      break;
  }
  return nodes;
}
const isFunctionType = (node) => {
  return /Function(?:Expression|Declaration)$|Method$/.test(node.type);
};
const isStaticProperty = (node) => node && (node.type === "ObjectProperty" || node.type === "ObjectMethod") && !node.computed;
const isStaticPropertyKey = (node, parent) => isStaticProperty(parent) && parent.key === node;
const TS_NODE_TYPES = [
  "TSAsExpression",
  // foo as number
  "TSTypeAssertion",
  // (<number>foo)
  "TSNonNullExpression",
  // foo!
  "TSInstantiationExpression",
  // foo<string>
  "TSSatisfiesExpression"
  // foo satisfies T
];

const prohibitedKeywordRE = new RegExp(
  "\\b" + "arguments,await,break,case,catch,class,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,let,new,return,super,switch,throw,try,var,void,while,with,yield".split(",").join("\\b|\\b") + "\\b"
);
const stripStringRE = /'(?:[^'\\]|\\.)*'|"(?:[^"\\]|\\.)*"|`(?:[^`\\]|\\.)*\$\{|\}(?:[^`\\]|\\.)*`|`(?:[^`\\]|\\.)*`/g;
function validateBrowserExpression(node, context, asParams = false, asRawStatements = false) {
  const exp = node.content;
  if (!exp.trim()) {
    return;
  }
  try {
    new Function(
      asRawStatements ? ` ${exp} ` : `return ${asParams ? `(${exp}) => {}` : `(${exp})`}`
    );
  } catch (e) {
    let message = e.message;
    const keywordMatch = exp.replace(stripStringRE, "").match(prohibitedKeywordRE);
    if (keywordMatch) {
      message = `avoid using JavaScript keyword as property name: "${keywordMatch[0]}"`;
    }
    context.onError(
      createCompilerError(
        45,
        node.loc,
        void 0,
        message
      )
    );
  }
}

const transformExpression = (node, context) => {
  if (node.type === 5) {
    node.content = processExpression(
      node.content,
      context
    );
  } else if (node.type === 1) {
    for (let i = 0; i < node.props.length; i++) {
      const dir = node.props[i];
      if (dir.type === 7 && dir.name !== "for") {
        const exp = dir.exp;
        const arg = dir.arg;
        if (exp && exp.type === 4 && !(dir.name === "on" && arg)) {
          dir.exp = processExpression(
            exp,
            context,
            // slot args must be processed as function params
            dir.name === "slot"
          );
        }
        if (arg && arg.type === 4 && !arg.isStatic) {
          dir.arg = processExpression(arg, context);
        }
      }
    }
  }
};
function processExpression(node, context, asParams = false, asRawStatements = false, localVars = Object.create(context.identifiers)) {
  {
    if (true) {
      validateBrowserExpression(node, context, asParams, asRawStatements);
    }
    return node;
  }
}
function stringifyExpression(exp) {
  if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.isString)(exp)) {
    return exp;
  } else if (exp.type === 4) {
    return exp.content;
  } else {
    return exp.children.map(stringifyExpression).join("");
  }
}

const transformIf = createStructuralDirectiveTransform(
  /^(if|else|else-if)$/,
  (node, dir, context) => {
    return processIf(node, dir, context, (ifNode, branch, isRoot) => {
      const siblings = context.parent.children;
      let i = siblings.indexOf(ifNode);
      let key = 0;
      while (i-- >= 0) {
        const sibling = siblings[i];
        if (sibling && sibling.type === 9) {
          key += sibling.branches.length;
        }
      }
      return () => {
        if (isRoot) {
          ifNode.codegenNode = createCodegenNodeForBranch(
            branch,
            key,
            context
          );
        } else {
          const parentCondition = getParentCondition(ifNode.codegenNode);
          parentCondition.alternate = createCodegenNodeForBranch(
            branch,
            key + ifNode.branches.length - 1,
            context
          );
        }
      };
    });
  }
);
function processIf(node, dir, context, processCodegen) {
  if (dir.name !== "else" && (!dir.exp || !dir.exp.content.trim())) {
    const loc = dir.exp ? dir.exp.loc : node.loc;
    context.onError(
      createCompilerError(28, dir.loc)
    );
    dir.exp = createSimpleExpression(`true`, false, loc);
  }
  if ( true && dir.exp) {
    validateBrowserExpression(dir.exp, context);
  }
  if (dir.name === "if") {
    const branch = createIfBranch(node, dir);
    const ifNode = {
      type: 9,
      loc: node.loc,
      branches: [branch]
    };
    context.replaceNode(ifNode);
    if (processCodegen) {
      return processCodegen(ifNode, branch, true);
    }
  } else {
    const siblings = context.parent.children;
    const comments = [];
    let i = siblings.indexOf(node);
    while (i-- >= -1) {
      const sibling = siblings[i];
      if (sibling && sibling.type === 3) {
        context.removeNode(sibling);
         true && comments.unshift(sibling);
        continue;
      }
      if (sibling && sibling.type === 2 && !sibling.content.trim().length) {
        context.removeNode(sibling);
        continue;
      }
      if (sibling && sibling.type === 9) {
        if (dir.name === "else-if" && sibling.branches[sibling.branches.length - 1].condition === void 0) {
          context.onError(
            createCompilerError(30, node.loc)
          );
        }
        context.removeNode();
        const branch = createIfBranch(node, dir);
        if ( true && comments.length && // #3619 ignore comments if the v-if is direct child of <transition>
        !(context.parent && context.parent.type === 1 && isBuiltInType(context.parent.tag, "transition"))) {
          branch.children = [...comments, ...branch.children];
        }
        if (true) {
          const key = branch.userKey;
          if (key) {
            sibling.branches.forEach(({ userKey }) => {
              if (isSameKey(userKey, key)) {
                context.onError(
                  createCompilerError(
                    29,
                    branch.userKey.loc
                  )
                );
              }
            });
          }
        }
        sibling.branches.push(branch);
        const onExit = processCodegen && processCodegen(sibling, branch, false);
        traverseNode(branch, context);
        if (onExit)
          onExit();
        context.currentNode = null;
      } else {
        context.onError(
          createCompilerError(30, node.loc)
        );
      }
      break;
    }
  }
}
function createIfBranch(node, dir) {
  const isTemplateIf = node.tagType === 3;
  return {
    type: 10,
    loc: node.loc,
    condition: dir.name === "else" ? void 0 : dir.exp,
    children: isTemplateIf && !findDir(node, "for") ? node.children : [node],
    userKey: findProp(node, `key`),
    isTemplateIf
  };
}
function createCodegenNodeForBranch(branch, keyIndex, context) {
  if (branch.condition) {
    return createConditionalExpression(
      branch.condition,
      createChildrenCodegenNode(branch, keyIndex, context),
      // make sure to pass in asBlock: true so that the comment node call
      // closes the current block.
      createCallExpression(context.helper(CREATE_COMMENT), [
         true ? '"v-if"' : 0,
        "true"
      ])
    );
  } else {
    return createChildrenCodegenNode(branch, keyIndex, context);
  }
}
function createChildrenCodegenNode(branch, keyIndex, context) {
  const { helper } = context;
  const keyProperty = createObjectProperty(
    `key`,
    createSimpleExpression(
      `${keyIndex}`,
      false,
      locStub,
      2
    )
  );
  const { children } = branch;
  const firstChild = children[0];
  const needFragmentWrapper = children.length !== 1 || firstChild.type !== 1;
  if (needFragmentWrapper) {
    if (children.length === 1 && firstChild.type === 11) {
      const vnodeCall = firstChild.codegenNode;
      injectProp(vnodeCall, keyProperty, context);
      return vnodeCall;
    } else {
      let patchFlag = 64;
      let patchFlagText = _vue_shared__WEBPACK_IMPORTED_MODULE_0__.PatchFlagNames[64];
      if ( true && !branch.isTemplateIf && children.filter((c) => c.type !== 3).length === 1) {
        patchFlag |= 2048;
        patchFlagText += `, ${_vue_shared__WEBPACK_IMPORTED_MODULE_0__.PatchFlagNames[2048]}`;
      }
      return createVNodeCall(
        context,
        helper(FRAGMENT),
        createObjectExpression([keyProperty]),
        children,
        patchFlag + ( true ? ` /* ${patchFlagText} */` : 0),
        void 0,
        void 0,
        true,
        false,
        false,
        branch.loc
      );
    }
  } else {
    const ret = firstChild.codegenNode;
    const vnodeCall = getMemoedVNodeCall(ret);
    if (vnodeCall.type === 13) {
      convertToBlock(vnodeCall, context);
    }
    injectProp(vnodeCall, keyProperty, context);
    return ret;
  }
}
function isSameKey(a, b) {
  if (!a || a.type !== b.type) {
    return false;
  }
  if (a.type === 6) {
    if (a.value.content !== b.value.content) {
      return false;
    }
  } else {
    const exp = a.exp;
    const branchExp = b.exp;
    if (exp.type !== branchExp.type) {
      return false;
    }
    if (exp.type !== 4 || exp.isStatic !== branchExp.isStatic || exp.content !== branchExp.content) {
      return false;
    }
  }
  return true;
}
function getParentCondition(node) {
  while (true) {
    if (node.type === 19) {
      if (node.alternate.type === 19) {
        node = node.alternate;
      } else {
        return node;
      }
    } else if (node.type === 20) {
      node = node.value;
    }
  }
}

const transformFor = createStructuralDirectiveTransform(
  "for",
  (node, dir, context) => {
    const { helper, removeHelper } = context;
    return processFor(node, dir, context, (forNode) => {
      const renderExp = createCallExpression(helper(RENDER_LIST), [
        forNode.source
      ]);
      const isTemplate = isTemplateNode(node);
      const memo = findDir(node, "memo");
      const keyProp = findProp(node, `key`);
      const keyExp = keyProp && (keyProp.type === 6 ? createSimpleExpression(keyProp.value.content, true) : keyProp.exp);
      const keyProperty = keyProp ? createObjectProperty(`key`, keyExp) : null;
      const isStableFragment = forNode.source.type === 4 && forNode.source.constType > 0;
      const fragmentFlag = isStableFragment ? 64 : keyProp ? 128 : 256;
      forNode.codegenNode = createVNodeCall(
        context,
        helper(FRAGMENT),
        void 0,
        renderExp,
        fragmentFlag + ( true ? ` /* ${_vue_shared__WEBPACK_IMPORTED_MODULE_0__.PatchFlagNames[fragmentFlag]} */` : 0),
        void 0,
        void 0,
        true,
        !isStableFragment,
        false,
        node.loc
      );
      return () => {
        let childBlock;
        const { children } = forNode;
        if (( true) && isTemplate) {
          node.children.some((c) => {
            if (c.type === 1) {
              const key = findProp(c, "key");
              if (key) {
                context.onError(
                  createCompilerError(
                    33,
                    key.loc
                  )
                );
                return true;
              }
            }
          });
        }
        const needFragmentWrapper = children.length !== 1 || children[0].type !== 1;
        const slotOutlet = isSlotOutlet(node) ? node : isTemplate && node.children.length === 1 && isSlotOutlet(node.children[0]) ? node.children[0] : null;
        if (slotOutlet) {
          childBlock = slotOutlet.codegenNode;
          if (isTemplate && keyProperty) {
            injectProp(childBlock, keyProperty, context);
          }
        } else if (needFragmentWrapper) {
          childBlock = createVNodeCall(
            context,
            helper(FRAGMENT),
            keyProperty ? createObjectExpression([keyProperty]) : void 0,
            node.children,
            64 + ( true ? ` /* ${_vue_shared__WEBPACK_IMPORTED_MODULE_0__.PatchFlagNames[64]} */` : 0),
            void 0,
            void 0,
            true,
            void 0,
            false
            /* isComponent */
          );
        } else {
          childBlock = children[0].codegenNode;
          if (isTemplate && keyProperty) {
            injectProp(childBlock, keyProperty, context);
          }
          if (childBlock.isBlock !== !isStableFragment) {
            if (childBlock.isBlock) {
              removeHelper(OPEN_BLOCK);
              removeHelper(
                getVNodeBlockHelper(context.inSSR, childBlock.isComponent)
              );
            } else {
              removeHelper(
                getVNodeHelper(context.inSSR, childBlock.isComponent)
              );
            }
          }
          childBlock.isBlock = !isStableFragment;
          if (childBlock.isBlock) {
            helper(OPEN_BLOCK);
            helper(getVNodeBlockHelper(context.inSSR, childBlock.isComponent));
          } else {
            helper(getVNodeHelper(context.inSSR, childBlock.isComponent));
          }
        }
        if (memo) {
          const loop = createFunctionExpression(
            createForLoopParams(forNode.parseResult, [
              createSimpleExpression(`_cached`)
            ])
          );
          loop.body = createBlockStatement([
            createCompoundExpression([`const _memo = (`, memo.exp, `)`]),
            createCompoundExpression([
              `if (_cached`,
              ...keyExp ? [` && _cached.key === `, keyExp] : [],
              ` && ${context.helperString(
                IS_MEMO_SAME
              )}(_cached, _memo)) return _cached`
            ]),
            createCompoundExpression([`const _item = `, childBlock]),
            createSimpleExpression(`_item.memo = _memo`),
            createSimpleExpression(`return _item`)
          ]);
          renderExp.arguments.push(
            loop,
            createSimpleExpression(`_cache`),
            createSimpleExpression(String(context.cached++))
          );
        } else {
          renderExp.arguments.push(
            createFunctionExpression(
              createForLoopParams(forNode.parseResult),
              childBlock,
              true
              /* force newline */
            )
          );
        }
      };
    });
  }
);
function processFor(node, dir, context, processCodegen) {
  if (!dir.exp) {
    context.onError(
      createCompilerError(31, dir.loc)
    );
    return;
  }
  const parseResult = parseForExpression(
    // can only be simple expression because vFor transform is applied
    // before expression transform.
    dir.exp,
    context
  );
  if (!parseResult) {
    context.onError(
      createCompilerError(32, dir.loc)
    );
    return;
  }
  const { addIdentifiers, removeIdentifiers, scopes } = context;
  const { source, value, key, index } = parseResult;
  const forNode = {
    type: 11,
    loc: dir.loc,
    source,
    valueAlias: value,
    keyAlias: key,
    objectIndexAlias: index,
    parseResult,
    children: isTemplateNode(node) ? node.children : [node]
  };
  context.replaceNode(forNode);
  scopes.vFor++;
  const onExit = processCodegen && processCodegen(forNode);
  return () => {
    scopes.vFor--;
    if (onExit)
      onExit();
  };
}
const forAliasRE = /([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/;
const forIteratorRE = /,([^,\}\]]*)(?:,([^,\}\]]*))?$/;
const stripParensRE = /^\(|\)$/g;
function parseForExpression(input, context) {
  const loc = input.loc;
  const exp = input.content;
  const inMatch = exp.match(forAliasRE);
  if (!inMatch)
    return;
  const [, LHS, RHS] = inMatch;
  const result = {
    source: createAliasExpression(
      loc,
      RHS.trim(),
      exp.indexOf(RHS, LHS.length)
    ),
    value: void 0,
    key: void 0,
    index: void 0
  };
  if (true) {
    validateBrowserExpression(result.source, context);
  }
  let valueContent = LHS.trim().replace(stripParensRE, "").trim();
  const trimmedOffset = LHS.indexOf(valueContent);
  const iteratorMatch = valueContent.match(forIteratorRE);
  if (iteratorMatch) {
    valueContent = valueContent.replace(forIteratorRE, "").trim();
    const keyContent = iteratorMatch[1].trim();
    let keyOffset;
    if (keyContent) {
      keyOffset = exp.indexOf(keyContent, trimmedOffset + valueContent.length);
      result.key = createAliasExpression(loc, keyContent, keyOffset);
      if (true) {
        validateBrowserExpression(
          result.key,
          context,
          true
        );
      }
    }
    if (iteratorMatch[2]) {
      const indexContent = iteratorMatch[2].trim();
      if (indexContent) {
        result.index = createAliasExpression(
          loc,
          indexContent,
          exp.indexOf(
            indexContent,
            result.key ? keyOffset + keyContent.length : trimmedOffset + valueContent.length
          )
        );
        if (true) {
          validateBrowserExpression(
            result.index,
            context,
            true
          );
        }
      }
    }
  }
  if (valueContent) {
    result.value = createAliasExpression(loc, valueContent, trimmedOffset);
    if (true) {
      validateBrowserExpression(
        result.value,
        context,
        true
      );
    }
  }
  return result;
}
function createAliasExpression(range, content, offset) {
  return createSimpleExpression(
    content,
    false,
    getInnerRange(range, offset, content.length)
  );
}
function createForLoopParams({ value, key, index }, memoArgs = []) {
  return createParamsList([value, key, index, ...memoArgs]);
}
function createParamsList(args) {
  let i = args.length;
  while (i--) {
    if (args[i])
      break;
  }
  return args.slice(0, i + 1).map((arg, i2) => arg || createSimpleExpression(`_`.repeat(i2 + 1), false));
}

const defaultFallback = createSimpleExpression(`undefined`, false);
const trackSlotScopes = (node, context) => {
  if (node.type === 1 && (node.tagType === 1 || node.tagType === 3)) {
    const vSlot = findDir(node, "slot");
    if (vSlot) {
      vSlot.exp;
      context.scopes.vSlot++;
      return () => {
        context.scopes.vSlot--;
      };
    }
  }
};
const trackVForSlotScopes = (node, context) => {
  let vFor;
  if (isTemplateNode(node) && node.props.some(isVSlot) && (vFor = findDir(node, "for"))) {
    const result = vFor.parseResult = parseForExpression(
      vFor.exp,
      context
    );
    if (result) {
      const { value, key, index } = result;
      const { addIdentifiers, removeIdentifiers } = context;
      value && addIdentifiers(value);
      key && addIdentifiers(key);
      index && addIdentifiers(index);
      return () => {
        value && removeIdentifiers(value);
        key && removeIdentifiers(key);
        index && removeIdentifiers(index);
      };
    }
  }
};
const buildClientSlotFn = (props, children, loc) => createFunctionExpression(
  props,
  children,
  false,
  true,
  children.length ? children[0].loc : loc
);
function buildSlots(node, context, buildSlotFn = buildClientSlotFn) {
  context.helper(WITH_CTX);
  const { children, loc } = node;
  const slotsProperties = [];
  const dynamicSlots = [];
  let hasDynamicSlots = context.scopes.vSlot > 0 || context.scopes.vFor > 0;
  const onComponentSlot = findDir(node, "slot", true);
  if (onComponentSlot) {
    const { arg, exp } = onComponentSlot;
    if (arg && !isStaticExp(arg)) {
      hasDynamicSlots = true;
    }
    slotsProperties.push(
      createObjectProperty(
        arg || createSimpleExpression("default", true),
        buildSlotFn(exp, children, loc)
      )
    );
  }
  let hasTemplateSlots = false;
  let hasNamedDefaultSlot = false;
  const implicitDefaultChildren = [];
  const seenSlotNames = /* @__PURE__ */ new Set();
  let conditionalBranchIndex = 0;
  for (let i = 0; i < children.length; i++) {
    const slotElement = children[i];
    let slotDir;
    if (!isTemplateNode(slotElement) || !(slotDir = findDir(slotElement, "slot", true))) {
      if (slotElement.type !== 3) {
        implicitDefaultChildren.push(slotElement);
      }
      continue;
    }
    if (onComponentSlot) {
      context.onError(
        createCompilerError(37, slotDir.loc)
      );
      break;
    }
    hasTemplateSlots = true;
    const { children: slotChildren, loc: slotLoc } = slotElement;
    const {
      arg: slotName = createSimpleExpression(`default`, true),
      exp: slotProps,
      loc: dirLoc
    } = slotDir;
    let staticSlotName;
    if (isStaticExp(slotName)) {
      staticSlotName = slotName ? slotName.content : `default`;
    } else {
      hasDynamicSlots = true;
    }
    const slotFunction = buildSlotFn(slotProps, slotChildren, slotLoc);
    let vIf;
    let vElse;
    let vFor;
    if (vIf = findDir(slotElement, "if")) {
      hasDynamicSlots = true;
      dynamicSlots.push(
        createConditionalExpression(
          vIf.exp,
          buildDynamicSlot(slotName, slotFunction, conditionalBranchIndex++),
          defaultFallback
        )
      );
    } else if (vElse = findDir(
      slotElement,
      /^else(-if)?$/,
      true
      /* allowEmpty */
    )) {
      let j = i;
      let prev;
      while (j--) {
        prev = children[j];
        if (prev.type !== 3) {
          break;
        }
      }
      if (prev && isTemplateNode(prev) && findDir(prev, "if")) {
        children.splice(i, 1);
        i--;
        let conditional = dynamicSlots[dynamicSlots.length - 1];
        while (conditional.alternate.type === 19) {
          conditional = conditional.alternate;
        }
        conditional.alternate = vElse.exp ? createConditionalExpression(
          vElse.exp,
          buildDynamicSlot(
            slotName,
            slotFunction,
            conditionalBranchIndex++
          ),
          defaultFallback
        ) : buildDynamicSlot(slotName, slotFunction, conditionalBranchIndex++);
      } else {
        context.onError(
          createCompilerError(30, vElse.loc)
        );
      }
    } else if (vFor = findDir(slotElement, "for")) {
      hasDynamicSlots = true;
      const parseResult = vFor.parseResult || parseForExpression(vFor.exp, context);
      if (parseResult) {
        dynamicSlots.push(
          createCallExpression(context.helper(RENDER_LIST), [
            parseResult.source,
            createFunctionExpression(
              createForLoopParams(parseResult),
              buildDynamicSlot(slotName, slotFunction),
              true
              /* force newline */
            )
          ])
        );
      } else {
        context.onError(
          createCompilerError(32, vFor.loc)
        );
      }
    } else {
      if (staticSlotName) {
        if (seenSlotNames.has(staticSlotName)) {
          context.onError(
            createCompilerError(
              38,
              dirLoc
            )
          );
          continue;
        }
        seenSlotNames.add(staticSlotName);
        if (staticSlotName === "default") {
          hasNamedDefaultSlot = true;
        }
      }
      slotsProperties.push(createObjectProperty(slotName, slotFunction));
    }
  }
  if (!onComponentSlot) {
    const buildDefaultSlotProperty = (props, children2) => {
      const fn = buildSlotFn(props, children2, loc);
      if (context.compatConfig) {
        fn.isNonScopedSlot = true;
      }
      return createObjectProperty(`default`, fn);
    };
    if (!hasTemplateSlots) {
      slotsProperties.push(buildDefaultSlotProperty(void 0, children));
    } else if (implicitDefaultChildren.length && // #3766
    // with whitespace: 'preserve', whitespaces between slots will end up in
    // implicitDefaultChildren. Ignore if all implicit children are whitespaces.
    implicitDefaultChildren.some((node2) => isNonWhitespaceContent(node2))) {
      if (hasNamedDefaultSlot) {
        context.onError(
          createCompilerError(
            39,
            implicitDefaultChildren[0].loc
          )
        );
      } else {
        slotsProperties.push(
          buildDefaultSlotProperty(void 0, implicitDefaultChildren)
        );
      }
    }
  }
  const slotFlag = hasDynamicSlots ? 2 : hasForwardedSlots(node.children) ? 3 : 1;
  let slots = createObjectExpression(
    slotsProperties.concat(
      createObjectProperty(
        `_`,
        // 2 = compiled but dynamic = can skip normalization, but must run diff
        // 1 = compiled and static = can skip normalization AND diff as optimized
        createSimpleExpression(
          slotFlag + ( true ? ` /* ${_vue_shared__WEBPACK_IMPORTED_MODULE_0__.slotFlagsText[slotFlag]} */` : 0),
          false
        )
      )
    ),
    loc
  );
  if (dynamicSlots.length) {
    slots = createCallExpression(context.helper(CREATE_SLOTS), [
      slots,
      createArrayExpression(dynamicSlots)
    ]);
  }
  return {
    slots,
    hasDynamicSlots
  };
}
function buildDynamicSlot(name, fn, index) {
  const props = [
    createObjectProperty(`name`, name),
    createObjectProperty(`fn`, fn)
  ];
  if (index != null) {
    props.push(
      createObjectProperty(`key`, createSimpleExpression(String(index), true))
    );
  }
  return createObjectExpression(props);
}
function hasForwardedSlots(children) {
  for (let i = 0; i < children.length; i++) {
    const child = children[i];
    switch (child.type) {
      case 1:
        if (child.tagType === 2 || hasForwardedSlots(child.children)) {
          return true;
        }
        break;
      case 9:
        if (hasForwardedSlots(child.branches))
          return true;
        break;
      case 10:
      case 11:
        if (hasForwardedSlots(child.children))
          return true;
        break;
    }
  }
  return false;
}
function isNonWhitespaceContent(node) {
  if (node.type !== 2 && node.type !== 12)
    return true;
  return node.type === 2 ? !!node.content.trim() : isNonWhitespaceContent(node.content);
}

const directiveImportMap = /* @__PURE__ */ new WeakMap();
const transformElement = (node, context) => {
  return function postTransformElement() {
    node = context.currentNode;
    if (!(node.type === 1 && (node.tagType === 0 || node.tagType === 1))) {
      return;
    }
    const { tag, props } = node;
    const isComponent = node.tagType === 1;
    let vnodeTag = isComponent ? resolveComponentType(node, context) : `"${tag}"`;
    const isDynamicComponent = (0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.isObject)(vnodeTag) && vnodeTag.callee === RESOLVE_DYNAMIC_COMPONENT;
    let vnodeProps;
    let vnodeChildren;
    let vnodePatchFlag;
    let patchFlag = 0;
    let vnodeDynamicProps;
    let dynamicPropNames;
    let vnodeDirectives;
    let shouldUseBlock = (
      // dynamic component may resolve to plain elements
      isDynamicComponent || vnodeTag === TELEPORT || vnodeTag === SUSPENSE || !isComponent && // <svg> and <foreignObject> must be forced into blocks so that block
      // updates inside get proper isSVG flag at runtime. (#639, #643)
      // This is technically web-specific, but splitting the logic out of core
      // leads to too much unnecessary complexity.
      (tag === "svg" || tag === "foreignObject")
    );
    if (props.length > 0) {
      const propsBuildResult = buildProps(
        node,
        context,
        void 0,
        isComponent,
        isDynamicComponent
      );
      vnodeProps = propsBuildResult.props;
      patchFlag = propsBuildResult.patchFlag;
      dynamicPropNames = propsBuildResult.dynamicPropNames;
      const directives = propsBuildResult.directives;
      vnodeDirectives = directives && directives.length ? createArrayExpression(
        directives.map((dir) => buildDirectiveArgs(dir, context))
      ) : void 0;
      if (propsBuildResult.shouldUseBlock) {
        shouldUseBlock = true;
      }
    }
    if (node.children.length > 0) {
      if (vnodeTag === KEEP_ALIVE) {
        shouldUseBlock = true;
        patchFlag |= 1024;
        if ( true && node.children.length > 1) {
          context.onError(
            createCompilerError(46, {
              start: node.children[0].loc.start,
              end: node.children[node.children.length - 1].loc.end,
              source: ""
            })
          );
        }
      }
      const shouldBuildAsSlots = isComponent && // Teleport is not a real component and has dedicated runtime handling
      vnodeTag !== TELEPORT && // explained above.
      vnodeTag !== KEEP_ALIVE;
      if (shouldBuildAsSlots) {
        const { slots, hasDynamicSlots } = buildSlots(node, context);
        vnodeChildren = slots;
        if (hasDynamicSlots) {
          patchFlag |= 1024;
        }
      } else if (node.children.length === 1 && vnodeTag !== TELEPORT) {
        const child = node.children[0];
        const type = child.type;
        const hasDynamicTextChild = type === 5 || type === 8;
        if (hasDynamicTextChild && getConstantType(child, context) === 0) {
          patchFlag |= 1;
        }
        if (hasDynamicTextChild || type === 2) {
          vnodeChildren = child;
        } else {
          vnodeChildren = node.children;
        }
      } else {
        vnodeChildren = node.children;
      }
    }
    if (patchFlag !== 0) {
      if (true) {
        if (patchFlag < 0) {
          vnodePatchFlag = patchFlag + ` /* ${_vue_shared__WEBPACK_IMPORTED_MODULE_0__.PatchFlagNames[patchFlag]} */`;
        } else {
          const flagNames = Object.keys(_vue_shared__WEBPACK_IMPORTED_MODULE_0__.PatchFlagNames).map(Number).filter((n) => n > 0 && patchFlag & n).map((n) => _vue_shared__WEBPACK_IMPORTED_MODULE_0__.PatchFlagNames[n]).join(`, `);
          vnodePatchFlag = patchFlag + ` /* ${flagNames} */`;
        }
      } else {}
      if (dynamicPropNames && dynamicPropNames.length) {
        vnodeDynamicProps = stringifyDynamicPropNames(dynamicPropNames);
      }
    }
    node.codegenNode = createVNodeCall(
      context,
      vnodeTag,
      vnodeProps,
      vnodeChildren,
      vnodePatchFlag,
      vnodeDynamicProps,
      vnodeDirectives,
      !!shouldUseBlock,
      false,
      isComponent,
      node.loc
    );
  };
};
function resolveComponentType(node, context, ssr = false) {
  let { tag } = node;
  const isExplicitDynamic = isComponentTag(tag);
  const isProp = findProp(node, "is");
  if (isProp) {
    if (isExplicitDynamic || isCompatEnabled(
      "COMPILER_IS_ON_ELEMENT",
      context
    )) {
      const exp = isProp.type === 6 ? isProp.value && createSimpleExpression(isProp.value.content, true) : isProp.exp;
      if (exp) {
        return createCallExpression(context.helper(RESOLVE_DYNAMIC_COMPONENT), [
          exp
        ]);
      }
    } else if (isProp.type === 6 && isProp.value.content.startsWith("vue:")) {
      tag = isProp.value.content.slice(4);
    }
  }
  const isDir = !isExplicitDynamic && findDir(node, "is");
  if (isDir && isDir.exp) {
    if (true) {
      context.onWarn(
        createCompilerError(52, isDir.loc)
      );
    }
    return createCallExpression(context.helper(RESOLVE_DYNAMIC_COMPONENT), [
      isDir.exp
    ]);
  }
  const builtIn = isCoreComponent(tag) || context.isBuiltInComponent(tag);
  if (builtIn) {
    if (!ssr)
      context.helper(builtIn);
    return builtIn;
  }
  context.helper(RESOLVE_COMPONENT);
  context.components.add(tag);
  return toValidAssetId(tag, `component`);
}
function buildProps(node, context, props = node.props, isComponent, isDynamicComponent, ssr = false) {
  const { tag, loc: elementLoc, children } = node;
  let properties = [];
  const mergeArgs = [];
  const runtimeDirectives = [];
  const hasChildren = children.length > 0;
  let shouldUseBlock = false;
  let patchFlag = 0;
  let hasRef = false;
  let hasClassBinding = false;
  let hasStyleBinding = false;
  let hasHydrationEventBinding = false;
  let hasDynamicKeys = false;
  let hasVnodeHook = false;
  const dynamicPropNames = [];
  const pushMergeArg = (arg) => {
    if (properties.length) {
      mergeArgs.push(
        createObjectExpression(dedupeProperties(properties), elementLoc)
      );
      properties = [];
    }
    if (arg)
      mergeArgs.push(arg);
  };
  const analyzePatchFlag = ({ key, value }) => {
    if (isStaticExp(key)) {
      const name = key.content;
      const isEventHandler = (0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.isOn)(name);
      if (isEventHandler && (!isComponent || isDynamicComponent) && // omit the flag for click handlers because hydration gives click
      // dedicated fast path.
      name.toLowerCase() !== "onclick" && // omit v-model handlers
      name !== "onUpdate:modelValue" && // omit onVnodeXXX hooks
      !(0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.isReservedProp)(name)) {
        hasHydrationEventBinding = true;
      }
      if (isEventHandler && (0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.isReservedProp)(name)) {
        hasVnodeHook = true;
      }
      if (value.type === 20 || (value.type === 4 || value.type === 8) && getConstantType(value, context) > 0) {
        return;
      }
      if (name === "ref") {
        hasRef = true;
      } else if (name === "class") {
        hasClassBinding = true;
      } else if (name === "style") {
        hasStyleBinding = true;
      } else if (name !== "key" && !dynamicPropNames.includes(name)) {
        dynamicPropNames.push(name);
      }
      if (isComponent && (name === "class" || name === "style") && !dynamicPropNames.includes(name)) {
        dynamicPropNames.push(name);
      }
    } else {
      hasDynamicKeys = true;
    }
  };
  for (let i = 0; i < props.length; i++) {
    const prop = props[i];
    if (prop.type === 6) {
      const { loc, name, value } = prop;
      let isStatic = true;
      if (name === "ref") {
        hasRef = true;
        if (context.scopes.vFor > 0) {
          properties.push(
            createObjectProperty(
              createSimpleExpression("ref_for", true),
              createSimpleExpression("true")
            )
          );
        }
      }
      if (name === "is" && (isComponentTag(tag) || value && value.content.startsWith("vue:") || isCompatEnabled(
        "COMPILER_IS_ON_ELEMENT",
        context
      ))) {
        continue;
      }
      properties.push(
        createObjectProperty(
          createSimpleExpression(
            name,
            true,
            getInnerRange(loc, 0, name.length)
          ),
          createSimpleExpression(
            value ? value.content : "",
            isStatic,
            value ? value.loc : loc
          )
        )
      );
    } else {
      const { name, arg, exp, loc } = prop;
      const isVBind = name === "bind";
      const isVOn = name === "on";
      if (name === "slot") {
        if (!isComponent) {
          context.onError(
            createCompilerError(40, loc)
          );
        }
        continue;
      }
      if (name === "once" || name === "memo") {
        continue;
      }
      if (name === "is" || isVBind && isStaticArgOf(arg, "is") && (isComponentTag(tag) || isCompatEnabled(
        "COMPILER_IS_ON_ELEMENT",
        context
      ))) {
        continue;
      }
      if (isVOn && ssr) {
        continue;
      }
      if (
        // #938: elements with dynamic keys should be forced into blocks
        isVBind && isStaticArgOf(arg, "key") || // inline before-update hooks need to force block so that it is invoked
        // before children
        isVOn && hasChildren && isStaticArgOf(arg, "vue:before-update")
      ) {
        shouldUseBlock = true;
      }
      if (isVBind && isStaticArgOf(arg, "ref") && context.scopes.vFor > 0) {
        properties.push(
          createObjectProperty(
            createSimpleExpression("ref_for", true),
            createSimpleExpression("true")
          )
        );
      }
      if (!arg && (isVBind || isVOn)) {
        hasDynamicKeys = true;
        if (exp) {
          if (isVBind) {
            pushMergeArg();
            {
              if (true) {
                const hasOverridableKeys = mergeArgs.some((arg2) => {
                  if (arg2.type === 15) {
                    return arg2.properties.some(({ key }) => {
                      if (key.type !== 4 || !key.isStatic) {
                        return true;
                      }
                      return key.content !== "class" && key.content !== "style" && !(0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.isOn)(key.content);
                    });
                  } else {
                    return true;
                  }
                });
                if (hasOverridableKeys) {
                  checkCompatEnabled(
                    "COMPILER_V_BIND_OBJECT_ORDER",
                    context,
                    loc
                  );
                }
              }
              if (isCompatEnabled(
                "COMPILER_V_BIND_OBJECT_ORDER",
                context
              )) {
                mergeArgs.unshift(exp);
                continue;
              }
            }
            mergeArgs.push(exp);
          } else {
            pushMergeArg({
              type: 14,
              loc,
              callee: context.helper(TO_HANDLERS),
              arguments: isComponent ? [exp] : [exp, `true`]
            });
          }
        } else {
          context.onError(
            createCompilerError(
              isVBind ? 34 : 35,
              loc
            )
          );
        }
        continue;
      }
      const directiveTransform = context.directiveTransforms[name];
      if (directiveTransform) {
        const { props: props2, needRuntime } = directiveTransform(prop, node, context);
        !ssr && props2.forEach(analyzePatchFlag);
        if (isVOn && arg && !isStaticExp(arg)) {
          pushMergeArg(createObjectExpression(props2, elementLoc));
        } else {
          properties.push(...props2);
        }
        if (needRuntime) {
          runtimeDirectives.push(prop);
          if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.isSymbol)(needRuntime)) {
            directiveImportMap.set(prop, needRuntime);
          }
        }
      } else if (!(0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.isBuiltInDirective)(name)) {
        runtimeDirectives.push(prop);
        if (hasChildren) {
          shouldUseBlock = true;
        }
      }
    }
  }
  let propsExpression = void 0;
  if (mergeArgs.length) {
    pushMergeArg();
    if (mergeArgs.length > 1) {
      propsExpression = createCallExpression(
        context.helper(MERGE_PROPS),
        mergeArgs,
        elementLoc
      );
    } else {
      propsExpression = mergeArgs[0];
    }
  } else if (properties.length) {
    propsExpression = createObjectExpression(
      dedupeProperties(properties),
      elementLoc
    );
  }
  if (hasDynamicKeys) {
    patchFlag |= 16;
  } else {
    if (hasClassBinding && !isComponent) {
      patchFlag |= 2;
    }
    if (hasStyleBinding && !isComponent) {
      patchFlag |= 4;
    }
    if (dynamicPropNames.length) {
      patchFlag |= 8;
    }
    if (hasHydrationEventBinding) {
      patchFlag |= 32;
    }
  }
  if (!shouldUseBlock && (patchFlag === 0 || patchFlag === 32) && (hasRef || hasVnodeHook || runtimeDirectives.length > 0)) {
    patchFlag |= 512;
  }
  if (!context.inSSR && propsExpression) {
    switch (propsExpression.type) {
      case 15:
        let classKeyIndex = -1;
        let styleKeyIndex = -1;
        let hasDynamicKey = false;
        for (let i = 0; i < propsExpression.properties.length; i++) {
          const key = propsExpression.properties[i].key;
          if (isStaticExp(key)) {
            if (key.content === "class") {
              classKeyIndex = i;
            } else if (key.content === "style") {
              styleKeyIndex = i;
            }
          } else if (!key.isHandlerKey) {
            hasDynamicKey = true;
          }
        }
        const classProp = propsExpression.properties[classKeyIndex];
        const styleProp = propsExpression.properties[styleKeyIndex];
        if (!hasDynamicKey) {
          if (classProp && !isStaticExp(classProp.value)) {
            classProp.value = createCallExpression(
              context.helper(NORMALIZE_CLASS),
              [classProp.value]
            );
          }
          if (styleProp && // the static style is compiled into an object,
          // so use `hasStyleBinding` to ensure that it is a dynamic style binding
          (hasStyleBinding || styleProp.value.type === 4 && styleProp.value.content.trim()[0] === `[` || // v-bind:style and style both exist,
          // v-bind:style with static literal object
          styleProp.value.type === 17)) {
            styleProp.value = createCallExpression(
              context.helper(NORMALIZE_STYLE),
              [styleProp.value]
            );
          }
        } else {
          propsExpression = createCallExpression(
            context.helper(NORMALIZE_PROPS),
            [propsExpression]
          );
        }
        break;
      case 14:
        break;
      default:
        propsExpression = createCallExpression(
          context.helper(NORMALIZE_PROPS),
          [
            createCallExpression(context.helper(GUARD_REACTIVE_PROPS), [
              propsExpression
            ])
          ]
        );
        break;
    }
  }
  return {
    props: propsExpression,
    directives: runtimeDirectives,
    patchFlag,
    dynamicPropNames,
    shouldUseBlock
  };
}
function dedupeProperties(properties) {
  const knownProps = /* @__PURE__ */ new Map();
  const deduped = [];
  for (let i = 0; i < properties.length; i++) {
    const prop = properties[i];
    if (prop.key.type === 8 || !prop.key.isStatic) {
      deduped.push(prop);
      continue;
    }
    const name = prop.key.content;
    const existing = knownProps.get(name);
    if (existing) {
      if (name === "style" || name === "class" || (0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.isOn)(name)) {
        mergeAsArray(existing, prop);
      }
    } else {
      knownProps.set(name, prop);
      deduped.push(prop);
    }
  }
  return deduped;
}
function mergeAsArray(existing, incoming) {
  if (existing.value.type === 17) {
    existing.value.elements.push(incoming.value);
  } else {
    existing.value = createArrayExpression(
      [existing.value, incoming.value],
      existing.loc
    );
  }
}
function buildDirectiveArgs(dir, context) {
  const dirArgs = [];
  const runtime = directiveImportMap.get(dir);
  if (runtime) {
    dirArgs.push(context.helperString(runtime));
  } else {
    {
      context.helper(RESOLVE_DIRECTIVE);
      context.directives.add(dir.name);
      dirArgs.push(toValidAssetId(dir.name, `directive`));
    }
  }
  const { loc } = dir;
  if (dir.exp)
    dirArgs.push(dir.exp);
  if (dir.arg) {
    if (!dir.exp) {
      dirArgs.push(`void 0`);
    }
    dirArgs.push(dir.arg);
  }
  if (Object.keys(dir.modifiers).length) {
    if (!dir.arg) {
      if (!dir.exp) {
        dirArgs.push(`void 0`);
      }
      dirArgs.push(`void 0`);
    }
    const trueExpression = createSimpleExpression(`true`, false, loc);
    dirArgs.push(
      createObjectExpression(
        dir.modifiers.map(
          (modifier) => createObjectProperty(modifier, trueExpression)
        ),
        loc
      )
    );
  }
  return createArrayExpression(dirArgs, dir.loc);
}
function stringifyDynamicPropNames(props) {
  let propsNamesString = `[`;
  for (let i = 0, l = props.length; i < l; i++) {
    propsNamesString += JSON.stringify(props[i]);
    if (i < l - 1)
      propsNamesString += ", ";
  }
  return propsNamesString + `]`;
}
function isComponentTag(tag) {
  return tag === "component" || tag === "Component";
}

const transformSlotOutlet = (node, context) => {
  if (isSlotOutlet(node)) {
    const { children, loc } = node;
    const { slotName, slotProps } = processSlotOutlet(node, context);
    const slotArgs = [
      context.prefixIdentifiers ? `_ctx.$slots` : `$slots`,
      slotName,
      "{}",
      "undefined",
      "true"
    ];
    let expectedLen = 2;
    if (slotProps) {
      slotArgs[2] = slotProps;
      expectedLen = 3;
    }
    if (children.length) {
      slotArgs[3] = createFunctionExpression([], children, false, false, loc);
      expectedLen = 4;
    }
    if (context.scopeId && !context.slotted) {
      expectedLen = 5;
    }
    slotArgs.splice(expectedLen);
    node.codegenNode = createCallExpression(
      context.helper(RENDER_SLOT),
      slotArgs,
      loc
    );
  }
};
function processSlotOutlet(node, context) {
  let slotName = `"default"`;
  let slotProps = void 0;
  const nonNameProps = [];
  for (let i = 0; i < node.props.length; i++) {
    const p = node.props[i];
    if (p.type === 6) {
      if (p.value) {
        if (p.name === "name") {
          slotName = JSON.stringify(p.value.content);
        } else {
          p.name = (0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.camelize)(p.name);
          nonNameProps.push(p);
        }
      }
    } else {
      if (p.name === "bind" && isStaticArgOf(p.arg, "name")) {
        if (p.exp)
          slotName = p.exp;
      } else {
        if (p.name === "bind" && p.arg && isStaticExp(p.arg)) {
          p.arg.content = (0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.camelize)(p.arg.content);
        }
        nonNameProps.push(p);
      }
    }
  }
  if (nonNameProps.length > 0) {
    const { props, directives } = buildProps(
      node,
      context,
      nonNameProps,
      false,
      false
    );
    slotProps = props;
    if (directives.length) {
      context.onError(
        createCompilerError(
          36,
          directives[0].loc
        )
      );
    }
  }
  return {
    slotName,
    slotProps
  };
}

const fnExpRE = /^\s*([\w$_]+|(async\s*)?\([^)]*?\))\s*(:[^=]+)?=>|^\s*(async\s+)?function(?:\s+[\w$]+)?\s*\(/;
const transformOn = (dir, node, context, augmentor) => {
  const { loc, modifiers, arg } = dir;
  if (!dir.exp && !modifiers.length) {
    context.onError(createCompilerError(35, loc));
  }
  let eventName;
  if (arg.type === 4) {
    if (arg.isStatic) {
      let rawName = arg.content;
      if ( true && rawName.startsWith("vnode")) {
        context.onWarn(
          createCompilerError(51, arg.loc)
        );
      }
      if (rawName.startsWith("vue:")) {
        rawName = `vnode-${rawName.slice(4)}`;
      }
      const eventString = node.tagType !== 0 || rawName.startsWith("vnode") || !/[A-Z]/.test(rawName) ? (
        // for non-element and vnode lifecycle event listeners, auto convert
        // it to camelCase. See issue #2249
        (0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.toHandlerKey)((0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.camelize)(rawName))
      ) : (
        // preserve case for plain element listeners that have uppercase
        // letters, as these may be custom elements' custom events
        `on:${rawName}`
      );
      eventName = createSimpleExpression(eventString, true, arg.loc);
    } else {
      eventName = createCompoundExpression([
        `${context.helperString(TO_HANDLER_KEY)}(`,
        arg,
        `)`
      ]);
    }
  } else {
    eventName = arg;
    eventName.children.unshift(`${context.helperString(TO_HANDLER_KEY)}(`);
    eventName.children.push(`)`);
  }
  let exp = dir.exp;
  if (exp && !exp.content.trim()) {
    exp = void 0;
  }
  let shouldCache = context.cacheHandlers && !exp && !context.inVOnce;
  if (exp) {
    const isMemberExp = isMemberExpression(exp.content);
    const isInlineStatement = !(isMemberExp || fnExpRE.test(exp.content));
    const hasMultipleStatements = exp.content.includes(`;`);
    if (true) {
      validateBrowserExpression(
        exp,
        context,
        false,
        hasMultipleStatements
      );
    }
    if (isInlineStatement || shouldCache && isMemberExp) {
      exp = createCompoundExpression([
        `${isInlineStatement ? `$event` : `${``}(...args)`} => ${hasMultipleStatements ? `{` : `(`}`,
        exp,
        hasMultipleStatements ? `}` : `)`
      ]);
    }
  }
  let ret = {
    props: [
      createObjectProperty(
        eventName,
        exp || createSimpleExpression(`() => {}`, false, loc)
      )
    ]
  };
  if (augmentor) {
    ret = augmentor(ret);
  }
  if (shouldCache) {
    ret.props[0].value = context.cache(ret.props[0].value);
  }
  ret.props.forEach((p) => p.key.isHandlerKey = true);
  return ret;
};

const transformBind = (dir, _node, context) => {
  const { exp, modifiers, loc } = dir;
  const arg = dir.arg;
  if (arg.type !== 4) {
    arg.children.unshift(`(`);
    arg.children.push(`) || ""`);
  } else if (!arg.isStatic) {
    arg.content = `${arg.content} || ""`;
  }
  if (modifiers.includes("camel")) {
    if (arg.type === 4) {
      if (arg.isStatic) {
        arg.content = (0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.camelize)(arg.content);
      } else {
        arg.content = `${context.helperString(CAMELIZE)}(${arg.content})`;
      }
    } else {
      arg.children.unshift(`${context.helperString(CAMELIZE)}(`);
      arg.children.push(`)`);
    }
  }
  if (!context.inSSR) {
    if (modifiers.includes("prop")) {
      injectPrefix(arg, ".");
    }
    if (modifiers.includes("attr")) {
      injectPrefix(arg, "^");
    }
  }
  if (!exp || exp.type === 4 && !exp.content.trim()) {
    context.onError(createCompilerError(34, loc));
    return {
      props: [createObjectProperty(arg, createSimpleExpression("", true, loc))]
    };
  }
  return {
    props: [createObjectProperty(arg, exp)]
  };
};
const injectPrefix = (arg, prefix) => {
  if (arg.type === 4) {
    if (arg.isStatic) {
      arg.content = prefix + arg.content;
    } else {
      arg.content = `\`${prefix}\${${arg.content}}\``;
    }
  } else {
    arg.children.unshift(`'${prefix}' + (`);
    arg.children.push(`)`);
  }
};

const transformText = (node, context) => {
  if (node.type === 0 || node.type === 1 || node.type === 11 || node.type === 10) {
    return () => {
      const children = node.children;
      let currentContainer = void 0;
      let hasText = false;
      for (let i = 0; i < children.length; i++) {
        const child = children[i];
        if (isText$1(child)) {
          hasText = true;
          for (let j = i + 1; j < children.length; j++) {
            const next = children[j];
            if (isText$1(next)) {
              if (!currentContainer) {
                currentContainer = children[i] = createCompoundExpression(
                  [child],
                  child.loc
                );
              }
              currentContainer.children.push(` + `, next);
              children.splice(j, 1);
              j--;
            } else {
              currentContainer = void 0;
              break;
            }
          }
        }
      }
      if (!hasText || // if this is a plain element with a single text child, leave it
      // as-is since the runtime has dedicated fast path for this by directly
      // setting textContent of the element.
      // for component root it's always normalized anyway.
      children.length === 1 && (node.type === 0 || node.type === 1 && node.tagType === 0 && // #3756
      // custom directives can potentially add DOM elements arbitrarily,
      // we need to avoid setting textContent of the element at runtime
      // to avoid accidentally overwriting the DOM elements added
      // by the user through custom directives.
      !node.props.find(
        (p) => p.type === 7 && !context.directiveTransforms[p.name]
      ) && // in compat mode, <template> tags with no special directives
      // will be rendered as a fragment so its children must be
      // converted into vnodes.
      !(node.tag === "template"))) {
        return;
      }
      for (let i = 0; i < children.length; i++) {
        const child = children[i];
        if (isText$1(child) || child.type === 8) {
          const callArgs = [];
          if (child.type !== 2 || child.content !== " ") {
            callArgs.push(child);
          }
          if (!context.ssr && getConstantType(child, context) === 0) {
            callArgs.push(
              1 + ( true ? ` /* ${_vue_shared__WEBPACK_IMPORTED_MODULE_0__.PatchFlagNames[1]} */` : 0)
            );
          }
          children[i] = {
            type: 12,
            content: child,
            loc: child.loc,
            codegenNode: createCallExpression(
              context.helper(CREATE_TEXT),
              callArgs
            )
          };
        }
      }
    };
  }
};

const seen$1 = /* @__PURE__ */ new WeakSet();
const transformOnce = (node, context) => {
  if (node.type === 1 && findDir(node, "once", true)) {
    if (seen$1.has(node) || context.inVOnce || context.inSSR) {
      return;
    }
    seen$1.add(node);
    context.inVOnce = true;
    context.helper(SET_BLOCK_TRACKING);
    return () => {
      context.inVOnce = false;
      const cur = context.currentNode;
      if (cur.codegenNode) {
        cur.codegenNode = context.cache(
          cur.codegenNode,
          true
          /* isVNode */
        );
      }
    };
  }
};

const transformModel = (dir, node, context) => {
  const { exp, arg } = dir;
  if (!exp) {
    context.onError(
      createCompilerError(41, dir.loc)
    );
    return createTransformProps();
  }
  const rawExp = exp.loc.source;
  const expString = exp.type === 4 ? exp.content : rawExp;
  const bindingType = context.bindingMetadata[rawExp];
  if (bindingType === "props" || bindingType === "props-aliased") {
    context.onError(createCompilerError(44, exp.loc));
    return createTransformProps();
  }
  const maybeRef = false;
  if (!expString.trim() || !isMemberExpression(expString) && !maybeRef) {
    context.onError(
      createCompilerError(42, exp.loc)
    );
    return createTransformProps();
  }
  const propName = arg ? arg : createSimpleExpression("modelValue", true);
  const eventName = arg ? isStaticExp(arg) ? `onUpdate:${(0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.camelize)(arg.content)}` : createCompoundExpression(['"onUpdate:" + ', arg]) : `onUpdate:modelValue`;
  let assignmentExp;
  const eventArg = context.isTS ? `($event: any)` : `$event`;
  {
    assignmentExp = createCompoundExpression([
      `${eventArg} => ((`,
      exp,
      `) = $event)`
    ]);
  }
  const props = [
    // modelValue: foo
    createObjectProperty(propName, dir.exp),
    // "onUpdate:modelValue": $event => (foo = $event)
    createObjectProperty(eventName, assignmentExp)
  ];
  if (dir.modifiers.length && node.tagType === 1) {
    const modifiers = dir.modifiers.map((m) => (isSimpleIdentifier(m) ? m : JSON.stringify(m)) + `: true`).join(`, `);
    const modifiersKey = arg ? isStaticExp(arg) ? `${arg.content}Modifiers` : createCompoundExpression([arg, ' + "Modifiers"']) : `modelModifiers`;
    props.push(
      createObjectProperty(
        modifiersKey,
        createSimpleExpression(
          `{ ${modifiers} }`,
          false,
          dir.loc,
          2
        )
      )
    );
  }
  return createTransformProps(props);
};
function createTransformProps(props = []) {
  return { props };
}

const validDivisionCharRE = /[\w).+\-_$\]]/;
const transformFilter = (node, context) => {
  if (!isCompatEnabled("COMPILER_FILTER", context)) {
    return;
  }
  if (node.type === 5) {
    rewriteFilter(node.content, context);
  }
  if (node.type === 1) {
    node.props.forEach((prop) => {
      if (prop.type === 7 && prop.name !== "for" && prop.exp) {
        rewriteFilter(prop.exp, context);
      }
    });
  }
};
function rewriteFilter(node, context) {
  if (node.type === 4) {
    parseFilter(node, context);
  } else {
    for (let i = 0; i < node.children.length; i++) {
      const child = node.children[i];
      if (typeof child !== "object")
        continue;
      if (child.type === 4) {
        parseFilter(child, context);
      } else if (child.type === 8) {
        rewriteFilter(node, context);
      } else if (child.type === 5) {
        rewriteFilter(child.content, context);
      }
    }
  }
}
function parseFilter(node, context) {
  const exp = node.content;
  let inSingle = false;
  let inDouble = false;
  let inTemplateString = false;
  let inRegex = false;
  let curly = 0;
  let square = 0;
  let paren = 0;
  let lastFilterIndex = 0;
  let c, prev, i, expression, filters = [];
  for (i = 0; i < exp.length; i++) {
    prev = c;
    c = exp.charCodeAt(i);
    if (inSingle) {
      if (c === 39 && prev !== 92)
        inSingle = false;
    } else if (inDouble) {
      if (c === 34 && prev !== 92)
        inDouble = false;
    } else if (inTemplateString) {
      if (c === 96 && prev !== 92)
        inTemplateString = false;
    } else if (inRegex) {
      if (c === 47 && prev !== 92)
        inRegex = false;
    } else if (c === 124 && // pipe
    exp.charCodeAt(i + 1) !== 124 && exp.charCodeAt(i - 1) !== 124 && !curly && !square && !paren) {
      if (expression === void 0) {
        lastFilterIndex = i + 1;
        expression = exp.slice(0, i).trim();
      } else {
        pushFilter();
      }
    } else {
      switch (c) {
        case 34:
          inDouble = true;
          break;
        case 39:
          inSingle = true;
          break;
        case 96:
          inTemplateString = true;
          break;
        case 40:
          paren++;
          break;
        case 41:
          paren--;
          break;
        case 91:
          square++;
          break;
        case 93:
          square--;
          break;
        case 123:
          curly++;
          break;
        case 125:
          curly--;
          break;
      }
      if (c === 47) {
        let j = i - 1;
        let p;
        for (; j >= 0; j--) {
          p = exp.charAt(j);
          if (p !== " ")
            break;
        }
        if (!p || !validDivisionCharRE.test(p)) {
          inRegex = true;
        }
      }
    }
  }
  if (expression === void 0) {
    expression = exp.slice(0, i).trim();
  } else if (lastFilterIndex !== 0) {
    pushFilter();
  }
  function pushFilter() {
    filters.push(exp.slice(lastFilterIndex, i).trim());
    lastFilterIndex = i + 1;
  }
  if (filters.length) {
     true && warnDeprecation(
      "COMPILER_FILTER",
      context,
      node.loc
    );
    for (i = 0; i < filters.length; i++) {
      expression = wrapFilter(expression, filters[i], context);
    }
    node.content = expression;
  }
}
function wrapFilter(exp, filter, context) {
  context.helper(RESOLVE_FILTER);
  const i = filter.indexOf("(");
  if (i < 0) {
    context.filters.add(filter);
    return `${toValidAssetId(filter, "filter")}(${exp})`;
  } else {
    const name = filter.slice(0, i);
    const args = filter.slice(i + 1);
    context.filters.add(name);
    return `${toValidAssetId(name, "filter")}(${exp}${args !== ")" ? "," + args : args}`;
  }
}

const seen = /* @__PURE__ */ new WeakSet();
const transformMemo = (node, context) => {
  if (node.type === 1) {
    const dir = findDir(node, "memo");
    if (!dir || seen.has(node)) {
      return;
    }
    seen.add(node);
    return () => {
      const codegenNode = node.codegenNode || context.currentNode.codegenNode;
      if (codegenNode && codegenNode.type === 13) {
        if (node.tagType !== 1) {
          convertToBlock(codegenNode, context);
        }
        node.codegenNode = createCallExpression(context.helper(WITH_MEMO), [
          dir.exp,
          createFunctionExpression(void 0, codegenNode),
          `_cache`,
          String(context.cached++)
        ]);
      }
    };
  }
};

function getBaseTransformPreset(prefixIdentifiers) {
  return [
    [
      transformOnce,
      transformIf,
      transformMemo,
      transformFor,
      ...[transformFilter] ,
      ... true ? [transformExpression] : 0,
      transformSlotOutlet,
      transformElement,
      trackSlotScopes,
      transformText
    ],
    {
      on: transformOn,
      bind: transformBind,
      model: transformModel
    }
  ];
}
function baseCompile(template, options = {}) {
  const onError = options.onError || defaultOnError;
  const isModuleMode = options.mode === "module";
  {
    if (options.prefixIdentifiers === true) {
      onError(createCompilerError(47));
    } else if (isModuleMode) {
      onError(createCompilerError(48));
    }
  }
  const prefixIdentifiers = false;
  if (options.cacheHandlers) {
    onError(createCompilerError(49));
  }
  if (options.scopeId && !isModuleMode) {
    onError(createCompilerError(50));
  }
  const ast = (0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.isString)(template) ? baseParse(template, options) : template;
  const [nodeTransforms, directiveTransforms] = getBaseTransformPreset();
  transform(
    ast,
    (0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.extend)({}, options, {
      prefixIdentifiers,
      nodeTransforms: [
        ...nodeTransforms,
        ...options.nodeTransforms || []
        // user transforms
      ],
      directiveTransforms: (0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.extend)(
        {},
        directiveTransforms,
        options.directiveTransforms || {}
        // user transforms
      )
    })
  );
  return generate(
    ast,
    (0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.extend)({}, options, {
      prefixIdentifiers
    })
  );
}

const noopDirectiveTransform = () => ({ props: [] });




/***/ }),

/***/ "./node_modules/@vue/compiler-dom/dist/compiler-dom.esm-bundler.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@vue/compiler-dom/dist/compiler-dom.esm-bundler.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "BASE_TRANSITION": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.BASE_TRANSITION),
/* harmony export */   "CAMELIZE": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.CAMELIZE),
/* harmony export */   "CAPITALIZE": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.CAPITALIZE),
/* harmony export */   "CREATE_BLOCK": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.CREATE_BLOCK),
/* harmony export */   "CREATE_COMMENT": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.CREATE_COMMENT),
/* harmony export */   "CREATE_ELEMENT_BLOCK": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.CREATE_ELEMENT_BLOCK),
/* harmony export */   "CREATE_ELEMENT_VNODE": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.CREATE_ELEMENT_VNODE),
/* harmony export */   "CREATE_SLOTS": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.CREATE_SLOTS),
/* harmony export */   "CREATE_STATIC": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.CREATE_STATIC),
/* harmony export */   "CREATE_TEXT": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.CREATE_TEXT),
/* harmony export */   "CREATE_VNODE": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.CREATE_VNODE),
/* harmony export */   "DOMDirectiveTransforms": () => (/* binding */ DOMDirectiveTransforms),
/* harmony export */   "DOMNodeTransforms": () => (/* binding */ DOMNodeTransforms),
/* harmony export */   "FRAGMENT": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.FRAGMENT),
/* harmony export */   "GUARD_REACTIVE_PROPS": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.GUARD_REACTIVE_PROPS),
/* harmony export */   "IS_MEMO_SAME": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.IS_MEMO_SAME),
/* harmony export */   "IS_REF": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.IS_REF),
/* harmony export */   "KEEP_ALIVE": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.KEEP_ALIVE),
/* harmony export */   "MERGE_PROPS": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.MERGE_PROPS),
/* harmony export */   "NORMALIZE_CLASS": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.NORMALIZE_CLASS),
/* harmony export */   "NORMALIZE_PROPS": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.NORMALIZE_PROPS),
/* harmony export */   "NORMALIZE_STYLE": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.NORMALIZE_STYLE),
/* harmony export */   "OPEN_BLOCK": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.OPEN_BLOCK),
/* harmony export */   "POP_SCOPE_ID": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.POP_SCOPE_ID),
/* harmony export */   "PUSH_SCOPE_ID": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.PUSH_SCOPE_ID),
/* harmony export */   "RENDER_LIST": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.RENDER_LIST),
/* harmony export */   "RENDER_SLOT": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.RENDER_SLOT),
/* harmony export */   "RESOLVE_COMPONENT": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.RESOLVE_COMPONENT),
/* harmony export */   "RESOLVE_DIRECTIVE": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.RESOLVE_DIRECTIVE),
/* harmony export */   "RESOLVE_DYNAMIC_COMPONENT": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.RESOLVE_DYNAMIC_COMPONENT),
/* harmony export */   "RESOLVE_FILTER": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.RESOLVE_FILTER),
/* harmony export */   "SET_BLOCK_TRACKING": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.SET_BLOCK_TRACKING),
/* harmony export */   "SUSPENSE": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.SUSPENSE),
/* harmony export */   "TELEPORT": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.TELEPORT),
/* harmony export */   "TO_DISPLAY_STRING": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.TO_DISPLAY_STRING),
/* harmony export */   "TO_HANDLERS": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.TO_HANDLERS),
/* harmony export */   "TO_HANDLER_KEY": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.TO_HANDLER_KEY),
/* harmony export */   "TRANSITION": () => (/* binding */ TRANSITION),
/* harmony export */   "TRANSITION_GROUP": () => (/* binding */ TRANSITION_GROUP),
/* harmony export */   "TS_NODE_TYPES": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.TS_NODE_TYPES),
/* harmony export */   "UNREF": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.UNREF),
/* harmony export */   "V_MODEL_CHECKBOX": () => (/* binding */ V_MODEL_CHECKBOX),
/* harmony export */   "V_MODEL_DYNAMIC": () => (/* binding */ V_MODEL_DYNAMIC),
/* harmony export */   "V_MODEL_RADIO": () => (/* binding */ V_MODEL_RADIO),
/* harmony export */   "V_MODEL_SELECT": () => (/* binding */ V_MODEL_SELECT),
/* harmony export */   "V_MODEL_TEXT": () => (/* binding */ V_MODEL_TEXT),
/* harmony export */   "V_ON_WITH_KEYS": () => (/* binding */ V_ON_WITH_KEYS),
/* harmony export */   "V_ON_WITH_MODIFIERS": () => (/* binding */ V_ON_WITH_MODIFIERS),
/* harmony export */   "V_SHOW": () => (/* binding */ V_SHOW),
/* harmony export */   "WITH_CTX": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.WITH_CTX),
/* harmony export */   "WITH_DIRECTIVES": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.WITH_DIRECTIVES),
/* harmony export */   "WITH_MEMO": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.WITH_MEMO),
/* harmony export */   "advancePositionWithClone": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.advancePositionWithClone),
/* harmony export */   "advancePositionWithMutation": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.advancePositionWithMutation),
/* harmony export */   "assert": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.assert),
/* harmony export */   "baseCompile": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.baseCompile),
/* harmony export */   "baseParse": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.baseParse),
/* harmony export */   "buildDirectiveArgs": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.buildDirectiveArgs),
/* harmony export */   "buildProps": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.buildProps),
/* harmony export */   "buildSlots": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.buildSlots),
/* harmony export */   "checkCompatEnabled": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.checkCompatEnabled),
/* harmony export */   "compile": () => (/* binding */ compile),
/* harmony export */   "convertToBlock": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.convertToBlock),
/* harmony export */   "createArrayExpression": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.createArrayExpression),
/* harmony export */   "createAssignmentExpression": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.createAssignmentExpression),
/* harmony export */   "createBlockStatement": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.createBlockStatement),
/* harmony export */   "createCacheExpression": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.createCacheExpression),
/* harmony export */   "createCallExpression": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.createCallExpression),
/* harmony export */   "createCompilerError": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.createCompilerError),
/* harmony export */   "createCompoundExpression": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.createCompoundExpression),
/* harmony export */   "createConditionalExpression": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.createConditionalExpression),
/* harmony export */   "createDOMCompilerError": () => (/* binding */ createDOMCompilerError),
/* harmony export */   "createForLoopParams": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.createForLoopParams),
/* harmony export */   "createFunctionExpression": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.createFunctionExpression),
/* harmony export */   "createIfStatement": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.createIfStatement),
/* harmony export */   "createInterpolation": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.createInterpolation),
/* harmony export */   "createObjectExpression": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.createObjectExpression),
/* harmony export */   "createObjectProperty": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.createObjectProperty),
/* harmony export */   "createReturnStatement": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.createReturnStatement),
/* harmony export */   "createRoot": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.createRoot),
/* harmony export */   "createSequenceExpression": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.createSequenceExpression),
/* harmony export */   "createSimpleExpression": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.createSimpleExpression),
/* harmony export */   "createStructuralDirectiveTransform": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.createStructuralDirectiveTransform),
/* harmony export */   "createTemplateLiteral": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.createTemplateLiteral),
/* harmony export */   "createTransformContext": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.createTransformContext),
/* harmony export */   "createVNodeCall": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.createVNodeCall),
/* harmony export */   "extractIdentifiers": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.extractIdentifiers),
/* harmony export */   "findDir": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.findDir),
/* harmony export */   "findProp": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.findProp),
/* harmony export */   "generate": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.generate),
/* harmony export */   "generateCodeFrame": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.generateCodeFrame),
/* harmony export */   "getBaseTransformPreset": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.getBaseTransformPreset),
/* harmony export */   "getConstantType": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.getConstantType),
/* harmony export */   "getInnerRange": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.getInnerRange),
/* harmony export */   "getMemoedVNodeCall": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.getMemoedVNodeCall),
/* harmony export */   "getVNodeBlockHelper": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.getVNodeBlockHelper),
/* harmony export */   "getVNodeHelper": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.getVNodeHelper),
/* harmony export */   "hasDynamicKeyVBind": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.hasDynamicKeyVBind),
/* harmony export */   "hasScopeRef": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.hasScopeRef),
/* harmony export */   "helperNameMap": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.helperNameMap),
/* harmony export */   "injectProp": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.injectProp),
/* harmony export */   "isBuiltInType": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.isBuiltInType),
/* harmony export */   "isCoreComponent": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.isCoreComponent),
/* harmony export */   "isFunctionType": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.isFunctionType),
/* harmony export */   "isInDestructureAssignment": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.isInDestructureAssignment),
/* harmony export */   "isMemberExpression": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.isMemberExpression),
/* harmony export */   "isMemberExpressionBrowser": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.isMemberExpressionBrowser),
/* harmony export */   "isMemberExpressionNode": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.isMemberExpressionNode),
/* harmony export */   "isReferencedIdentifier": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.isReferencedIdentifier),
/* harmony export */   "isSimpleIdentifier": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.isSimpleIdentifier),
/* harmony export */   "isSlotOutlet": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.isSlotOutlet),
/* harmony export */   "isStaticArgOf": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.isStaticArgOf),
/* harmony export */   "isStaticExp": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.isStaticExp),
/* harmony export */   "isStaticProperty": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.isStaticProperty),
/* harmony export */   "isStaticPropertyKey": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.isStaticPropertyKey),
/* harmony export */   "isTemplateNode": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.isTemplateNode),
/* harmony export */   "isText": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.isText),
/* harmony export */   "isVSlot": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.isVSlot),
/* harmony export */   "locStub": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.locStub),
/* harmony export */   "noopDirectiveTransform": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.noopDirectiveTransform),
/* harmony export */   "parse": () => (/* binding */ parse),
/* harmony export */   "parserOptions": () => (/* binding */ parserOptions),
/* harmony export */   "processExpression": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.processExpression),
/* harmony export */   "processFor": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.processFor),
/* harmony export */   "processIf": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.processIf),
/* harmony export */   "processSlotOutlet": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.processSlotOutlet),
/* harmony export */   "registerRuntimeHelpers": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.registerRuntimeHelpers),
/* harmony export */   "resolveComponentType": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.resolveComponentType),
/* harmony export */   "stringifyExpression": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.stringifyExpression),
/* harmony export */   "toValidAssetId": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.toValidAssetId),
/* harmony export */   "trackSlotScopes": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.trackSlotScopes),
/* harmony export */   "trackVForSlotScopes": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.trackVForSlotScopes),
/* harmony export */   "transform": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.transform),
/* harmony export */   "transformBind": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.transformBind),
/* harmony export */   "transformElement": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.transformElement),
/* harmony export */   "transformExpression": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.transformExpression),
/* harmony export */   "transformModel": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.transformModel),
/* harmony export */   "transformOn": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.transformOn),
/* harmony export */   "transformStyle": () => (/* binding */ transformStyle),
/* harmony export */   "traverseNode": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.traverseNode),
/* harmony export */   "walkBlockDeclarations": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.walkBlockDeclarations),
/* harmony export */   "walkFunctionParams": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.walkFunctionParams),
/* harmony export */   "walkIdentifiers": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.walkIdentifiers),
/* harmony export */   "warnDeprecation": () => (/* reexport safe */ _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.warnDeprecation)
/* harmony export */ });
/* harmony import */ var _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @vue/compiler-core */ "./node_modules/@vue/compiler-core/dist/compiler-core.esm-bundler.js");
/* harmony import */ var _vue_shared__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @vue/shared */ "./node_modules/@vue/shared/dist/shared.esm-bundler.js");




const V_MODEL_RADIO = Symbol( true ? `vModelRadio` : 0);
const V_MODEL_CHECKBOX = Symbol( true ? `vModelCheckbox` : 0);
const V_MODEL_TEXT = Symbol( true ? `vModelText` : 0);
const V_MODEL_SELECT = Symbol( true ? `vModelSelect` : 0);
const V_MODEL_DYNAMIC = Symbol( true ? `vModelDynamic` : 0);
const V_ON_WITH_MODIFIERS = Symbol( true ? `vOnModifiersGuard` : 0);
const V_ON_WITH_KEYS = Symbol( true ? `vOnKeysGuard` : 0);
const V_SHOW = Symbol( true ? `vShow` : 0);
const TRANSITION = Symbol( true ? `Transition` : 0);
const TRANSITION_GROUP = Symbol( true ? `TransitionGroup` : 0);
(0,_vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.registerRuntimeHelpers)({
  [V_MODEL_RADIO]: `vModelRadio`,
  [V_MODEL_CHECKBOX]: `vModelCheckbox`,
  [V_MODEL_TEXT]: `vModelText`,
  [V_MODEL_SELECT]: `vModelSelect`,
  [V_MODEL_DYNAMIC]: `vModelDynamic`,
  [V_ON_WITH_MODIFIERS]: `withModifiers`,
  [V_ON_WITH_KEYS]: `withKeys`,
  [V_SHOW]: `vShow`,
  [TRANSITION]: `Transition`,
  [TRANSITION_GROUP]: `TransitionGroup`
});

let decoder;
function decodeHtmlBrowser(raw, asAttr = false) {
  if (!decoder) {
    decoder = document.createElement("div");
  }
  if (asAttr) {
    decoder.innerHTML = `<div foo="${raw.replace(/"/g, "&quot;")}">`;
    return decoder.children[0].getAttribute("foo");
  } else {
    decoder.innerHTML = raw;
    return decoder.textContent;
  }
}

const isRawTextContainer = /* @__PURE__ */ (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.makeMap)(
  "style,iframe,script,noscript",
  true
);
const parserOptions = {
  isVoidTag: _vue_shared__WEBPACK_IMPORTED_MODULE_1__.isVoidTag,
  isNativeTag: (tag) => (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isHTMLTag)(tag) || (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isSVGTag)(tag),
  isPreTag: (tag) => tag === "pre",
  decodeEntities: decodeHtmlBrowser ,
  isBuiltInComponent: (tag) => {
    if ((0,_vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.isBuiltInType)(tag, `Transition`)) {
      return TRANSITION;
    } else if ((0,_vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.isBuiltInType)(tag, `TransitionGroup`)) {
      return TRANSITION_GROUP;
    }
  },
  // https://html.spec.whatwg.org/multipage/parsing.html#tree-construction-dispatcher
  getNamespace(tag, parent) {
    let ns = parent ? parent.ns : 0;
    if (parent && ns === 2) {
      if (parent.tag === "annotation-xml") {
        if (tag === "svg") {
          return 1;
        }
        if (parent.props.some(
          (a) => a.type === 6 && a.name === "encoding" && a.value != null && (a.value.content === "text/html" || a.value.content === "application/xhtml+xml")
        )) {
          ns = 0;
        }
      } else if (/^m(?:[ions]|text)$/.test(parent.tag) && tag !== "mglyph" && tag !== "malignmark") {
        ns = 0;
      }
    } else if (parent && ns === 1) {
      if (parent.tag === "foreignObject" || parent.tag === "desc" || parent.tag === "title") {
        ns = 0;
      }
    }
    if (ns === 0) {
      if (tag === "svg") {
        return 1;
      }
      if (tag === "math") {
        return 2;
      }
    }
    return ns;
  },
  // https://html.spec.whatwg.org/multipage/parsing.html#parsing-html-fragments
  getTextMode({ tag, ns }) {
    if (ns === 0) {
      if (tag === "textarea" || tag === "title") {
        return 1;
      }
      if (isRawTextContainer(tag)) {
        return 2;
      }
    }
    return 0;
  }
};

const transformStyle = (node) => {
  if (node.type === 1) {
    node.props.forEach((p, i) => {
      if (p.type === 6 && p.name === "style" && p.value) {
        node.props[i] = {
          type: 7,
          name: `bind`,
          arg: (0,_vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.createSimpleExpression)(`style`, true, p.loc),
          exp: parseInlineCSS(p.value.content, p.loc),
          modifiers: [],
          loc: p.loc
        };
      }
    });
  }
};
const parseInlineCSS = (cssText, loc) => {
  const normalized = (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.parseStringStyle)(cssText);
  return (0,_vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.createSimpleExpression)(
    JSON.stringify(normalized),
    false,
    loc,
    3
  );
};

function createDOMCompilerError(code, loc) {
  return (0,_vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.createCompilerError)(
    code,
    loc,
     true ? DOMErrorMessages : 0
  );
}
const DOMErrorMessages = {
  [53]: `v-html is missing expression.`,
  [54]: `v-html will override element children.`,
  [55]: `v-text is missing expression.`,
  [56]: `v-text will override element children.`,
  [57]: `v-model can only be used on <input>, <textarea> and <select> elements.`,
  [58]: `v-model argument is not supported on plain elements.`,
  [59]: `v-model cannot be used on file inputs since they are read-only. Use a v-on:change listener instead.`,
  [60]: `Unnecessary value binding used alongside v-model. It will interfere with v-model's behavior.`,
  [61]: `v-show is missing expression.`,
  [62]: `<Transition> expects exactly one child element or component.`,
  [63]: `Tags with side effect (<script> and <style>) are ignored in client component templates.`
};

const transformVHtml = (dir, node, context) => {
  const { exp, loc } = dir;
  if (!exp) {
    context.onError(
      createDOMCompilerError(53, loc)
    );
  }
  if (node.children.length) {
    context.onError(
      createDOMCompilerError(54, loc)
    );
    node.children.length = 0;
  }
  return {
    props: [
      (0,_vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.createObjectProperty)(
        (0,_vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.createSimpleExpression)(`innerHTML`, true, loc),
        exp || (0,_vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.createSimpleExpression)("", true)
      )
    ]
  };
};

const transformVText = (dir, node, context) => {
  const { exp, loc } = dir;
  if (!exp) {
    context.onError(
      createDOMCompilerError(55, loc)
    );
  }
  if (node.children.length) {
    context.onError(
      createDOMCompilerError(56, loc)
    );
    node.children.length = 0;
  }
  return {
    props: [
      (0,_vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.createObjectProperty)(
        (0,_vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.createSimpleExpression)(`textContent`, true),
        exp ? (0,_vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.getConstantType)(exp, context) > 0 ? exp : (0,_vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.createCallExpression)(
          context.helperString(_vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.TO_DISPLAY_STRING),
          [exp],
          loc
        ) : (0,_vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.createSimpleExpression)("", true)
      )
    ]
  };
};

const transformModel = (dir, node, context) => {
  const baseResult = (0,_vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.transformModel)(dir, node, context);
  if (!baseResult.props.length || node.tagType === 1) {
    return baseResult;
  }
  if (dir.arg) {
    context.onError(
      createDOMCompilerError(
        58,
        dir.arg.loc
      )
    );
  }
  function checkDuplicatedValue() {
    const value = (0,_vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.findProp)(node, "value");
    if (value) {
      context.onError(
        createDOMCompilerError(
          60,
          value.loc
        )
      );
    }
  }
  const { tag } = node;
  const isCustomElement = context.isCustomElement(tag);
  if (tag === "input" || tag === "textarea" || tag === "select" || isCustomElement) {
    let directiveToUse = V_MODEL_TEXT;
    let isInvalidType = false;
    if (tag === "input" || isCustomElement) {
      const type = (0,_vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.findProp)(node, `type`);
      if (type) {
        if (type.type === 7) {
          directiveToUse = V_MODEL_DYNAMIC;
        } else if (type.value) {
          switch (type.value.content) {
            case "radio":
              directiveToUse = V_MODEL_RADIO;
              break;
            case "checkbox":
              directiveToUse = V_MODEL_CHECKBOX;
              break;
            case "file":
              isInvalidType = true;
              context.onError(
                createDOMCompilerError(
                  59,
                  dir.loc
                )
              );
              break;
            default:
               true && checkDuplicatedValue();
              break;
          }
        }
      } else if ((0,_vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.hasDynamicKeyVBind)(node)) {
        directiveToUse = V_MODEL_DYNAMIC;
      } else {
         true && checkDuplicatedValue();
      }
    } else if (tag === "select") {
      directiveToUse = V_MODEL_SELECT;
    } else {
       true && checkDuplicatedValue();
    }
    if (!isInvalidType) {
      baseResult.needRuntime = context.helper(directiveToUse);
    }
  } else {
    context.onError(
      createDOMCompilerError(
        57,
        dir.loc
      )
    );
  }
  baseResult.props = baseResult.props.filter(
    (p) => !(p.key.type === 4 && p.key.content === "modelValue")
  );
  return baseResult;
};

const isEventOptionModifier = /* @__PURE__ */ (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.makeMap)(`passive,once,capture`);
const isNonKeyModifier = /* @__PURE__ */ (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.makeMap)(
  // event propagation management
  `stop,prevent,self,ctrl,shift,alt,meta,exact,middle`
);
const maybeKeyModifier = /* @__PURE__ */ (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.makeMap)("left,right");
const isKeyboardEvent = /* @__PURE__ */ (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.makeMap)(
  `onkeyup,onkeydown,onkeypress`,
  true
);
const resolveModifiers = (key, modifiers, context, loc) => {
  const keyModifiers = [];
  const nonKeyModifiers = [];
  const eventOptionModifiers = [];
  for (let i = 0; i < modifiers.length; i++) {
    const modifier = modifiers[i];
    if (modifier === "native" && (0,_vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.checkCompatEnabled)(
      "COMPILER_V_ON_NATIVE",
      context,
      loc
    )) {
      eventOptionModifiers.push(modifier);
    } else if (isEventOptionModifier(modifier)) {
      eventOptionModifiers.push(modifier);
    } else {
      if (maybeKeyModifier(modifier)) {
        if ((0,_vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.isStaticExp)(key)) {
          if (isKeyboardEvent(key.content)) {
            keyModifiers.push(modifier);
          } else {
            nonKeyModifiers.push(modifier);
          }
        } else {
          keyModifiers.push(modifier);
          nonKeyModifiers.push(modifier);
        }
      } else {
        if (isNonKeyModifier(modifier)) {
          nonKeyModifiers.push(modifier);
        } else {
          keyModifiers.push(modifier);
        }
      }
    }
  }
  return {
    keyModifiers,
    nonKeyModifiers,
    eventOptionModifiers
  };
};
const transformClick = (key, event) => {
  const isStaticClick = (0,_vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.isStaticExp)(key) && key.content.toLowerCase() === "onclick";
  return isStaticClick ? (0,_vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.createSimpleExpression)(event, true) : key.type !== 4 ? (0,_vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.createCompoundExpression)([
    `(`,
    key,
    `) === "onClick" ? "${event}" : (`,
    key,
    `)`
  ]) : key;
};
const transformOn = (dir, node, context) => {
  return (0,_vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.transformOn)(dir, node, context, (baseResult) => {
    const { modifiers } = dir;
    if (!modifiers.length)
      return baseResult;
    let { key, value: handlerExp } = baseResult.props[0];
    const { keyModifiers, nonKeyModifiers, eventOptionModifiers } = resolveModifiers(key, modifiers, context, dir.loc);
    if (nonKeyModifiers.includes("right")) {
      key = transformClick(key, `onContextmenu`);
    }
    if (nonKeyModifiers.includes("middle")) {
      key = transformClick(key, `onMouseup`);
    }
    if (nonKeyModifiers.length) {
      handlerExp = (0,_vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.createCallExpression)(context.helper(V_ON_WITH_MODIFIERS), [
        handlerExp,
        JSON.stringify(nonKeyModifiers)
      ]);
    }
    if (keyModifiers.length && // if event name is dynamic, always wrap with keys guard
    (!(0,_vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.isStaticExp)(key) || isKeyboardEvent(key.content))) {
      handlerExp = (0,_vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.createCallExpression)(context.helper(V_ON_WITH_KEYS), [
        handlerExp,
        JSON.stringify(keyModifiers)
      ]);
    }
    if (eventOptionModifiers.length) {
      const modifierPostfix = eventOptionModifiers.map(_vue_shared__WEBPACK_IMPORTED_MODULE_1__.capitalize).join("");
      key = (0,_vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.isStaticExp)(key) ? (0,_vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.createSimpleExpression)(`${key.content}${modifierPostfix}`, true) : (0,_vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.createCompoundExpression)([`(`, key, `) + "${modifierPostfix}"`]);
    }
    return {
      props: [(0,_vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.createObjectProperty)(key, handlerExp)]
    };
  });
};

const transformShow = (dir, node, context) => {
  const { exp, loc } = dir;
  if (!exp) {
    context.onError(
      createDOMCompilerError(61, loc)
    );
  }
  return {
    props: [],
    needRuntime: context.helper(V_SHOW)
  };
};

const transformTransition = (node, context) => {
  if (node.type === 1 && node.tagType === 1) {
    const component = context.isBuiltInComponent(node.tag);
    if (component === TRANSITION) {
      return () => {
        if (!node.children.length) {
          return;
        }
        if (hasMultipleChildren(node)) {
          context.onError(
            createDOMCompilerError(
              62,
              {
                start: node.children[0].loc.start,
                end: node.children[node.children.length - 1].loc.end,
                source: ""
              }
            )
          );
        }
        const child = node.children[0];
        if (child.type === 1) {
          for (const p of child.props) {
            if (p.type === 7 && p.name === "show") {
              node.props.push({
                type: 6,
                name: "persisted",
                value: void 0,
                loc: node.loc
              });
            }
          }
        }
      };
    }
  }
};
function hasMultipleChildren(node) {
  const children = node.children = node.children.filter(
    (c) => c.type !== 3 && !(c.type === 2 && !c.content.trim())
  );
  const child = children[0];
  return children.length !== 1 || child.type === 11 || child.type === 9 && child.branches.some(hasMultipleChildren);
}

const ignoreSideEffectTags = (node, context) => {
  if (node.type === 1 && node.tagType === 0 && (node.tag === "script" || node.tag === "style")) {
     true && context.onError(
      createDOMCompilerError(
        63,
        node.loc
      )
    );
    context.removeNode();
  }
};

const DOMNodeTransforms = [
  transformStyle,
  ... true ? [transformTransition] : 0
];
const DOMDirectiveTransforms = {
  cloak: _vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.noopDirectiveTransform,
  html: transformVHtml,
  text: transformVText,
  model: transformModel,
  // override compiler-core
  on: transformOn,
  // override compiler-core
  show: transformShow
};
function compile(template, options = {}) {
  return (0,_vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.baseCompile)(
    template,
    (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.extend)({}, parserOptions, options, {
      nodeTransforms: [
        // ignore <script> and <tag>
        // this is not put inside DOMNodeTransforms because that list is used
        // by compiler-ssr to generate vnode fallback branches
        ignoreSideEffectTags,
        ...DOMNodeTransforms,
        ...options.nodeTransforms || []
      ],
      directiveTransforms: (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.extend)(
        {},
        DOMDirectiveTransforms,
        options.directiveTransforms || {}
      ),
      transformHoist: null 
    })
  );
}
function parse(template, options = {}) {
  return (0,_vue_compiler_core__WEBPACK_IMPORTED_MODULE_0__.baseParse)(template, (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.extend)({}, parserOptions, options));
}




/***/ }),

/***/ "./node_modules/@vue/reactivity/dist/reactivity.esm-bundler.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@vue/reactivity/dist/reactivity.esm-bundler.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "EffectScope": () => (/* binding */ EffectScope),
/* harmony export */   "ITERATE_KEY": () => (/* binding */ ITERATE_KEY),
/* harmony export */   "ReactiveEffect": () => (/* binding */ ReactiveEffect),
/* harmony export */   "computed": () => (/* binding */ computed),
/* harmony export */   "customRef": () => (/* binding */ customRef),
/* harmony export */   "deferredComputed": () => (/* binding */ deferredComputed),
/* harmony export */   "effect": () => (/* binding */ effect),
/* harmony export */   "effectScope": () => (/* binding */ effectScope),
/* harmony export */   "enableTracking": () => (/* binding */ enableTracking),
/* harmony export */   "getCurrentScope": () => (/* binding */ getCurrentScope),
/* harmony export */   "isProxy": () => (/* binding */ isProxy),
/* harmony export */   "isReactive": () => (/* binding */ isReactive),
/* harmony export */   "isReadonly": () => (/* binding */ isReadonly),
/* harmony export */   "isRef": () => (/* binding */ isRef),
/* harmony export */   "isShallow": () => (/* binding */ isShallow),
/* harmony export */   "markRaw": () => (/* binding */ markRaw),
/* harmony export */   "onScopeDispose": () => (/* binding */ onScopeDispose),
/* harmony export */   "pauseTracking": () => (/* binding */ pauseTracking),
/* harmony export */   "proxyRefs": () => (/* binding */ proxyRefs),
/* harmony export */   "reactive": () => (/* binding */ reactive),
/* harmony export */   "readonly": () => (/* binding */ readonly),
/* harmony export */   "ref": () => (/* binding */ ref),
/* harmony export */   "resetTracking": () => (/* binding */ resetTracking),
/* harmony export */   "shallowReactive": () => (/* binding */ shallowReactive),
/* harmony export */   "shallowReadonly": () => (/* binding */ shallowReadonly),
/* harmony export */   "shallowRef": () => (/* binding */ shallowRef),
/* harmony export */   "stop": () => (/* binding */ stop),
/* harmony export */   "toRaw": () => (/* binding */ toRaw),
/* harmony export */   "toRef": () => (/* binding */ toRef),
/* harmony export */   "toRefs": () => (/* binding */ toRefs),
/* harmony export */   "toValue": () => (/* binding */ toValue),
/* harmony export */   "track": () => (/* binding */ track),
/* harmony export */   "trigger": () => (/* binding */ trigger),
/* harmony export */   "triggerRef": () => (/* binding */ triggerRef),
/* harmony export */   "unref": () => (/* binding */ unref)
/* harmony export */ });
/* harmony import */ var _vue_shared__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @vue/shared */ "./node_modules/@vue/shared/dist/shared.esm-bundler.js");


function warn(msg, ...args) {
  console.warn(`[Vue warn] ${msg}`, ...args);
}

let activeEffectScope;
class EffectScope {
  constructor(detached = false) {
    this.detached = detached;
    /**
     * @internal
     */
    this._active = true;
    /**
     * @internal
     */
    this.effects = [];
    /**
     * @internal
     */
    this.cleanups = [];
    this.parent = activeEffectScope;
    if (!detached && activeEffectScope) {
      this.index = (activeEffectScope.scopes || (activeEffectScope.scopes = [])).push(
        this
      ) - 1;
    }
  }
  get active() {
    return this._active;
  }
  run(fn) {
    if (this._active) {
      const currentEffectScope = activeEffectScope;
      try {
        activeEffectScope = this;
        return fn();
      } finally {
        activeEffectScope = currentEffectScope;
      }
    } else if (true) {
      warn(`cannot run an inactive effect scope.`);
    }
  }
  /**
   * This should only be called on non-detached scopes
   * @internal
   */
  on() {
    activeEffectScope = this;
  }
  /**
   * This should only be called on non-detached scopes
   * @internal
   */
  off() {
    activeEffectScope = this.parent;
  }
  stop(fromParent) {
    if (this._active) {
      let i, l;
      for (i = 0, l = this.effects.length; i < l; i++) {
        this.effects[i].stop();
      }
      for (i = 0, l = this.cleanups.length; i < l; i++) {
        this.cleanups[i]();
      }
      if (this.scopes) {
        for (i = 0, l = this.scopes.length; i < l; i++) {
          this.scopes[i].stop(true);
        }
      }
      if (!this.detached && this.parent && !fromParent) {
        const last = this.parent.scopes.pop();
        if (last && last !== this) {
          this.parent.scopes[this.index] = last;
          last.index = this.index;
        }
      }
      this.parent = void 0;
      this._active = false;
    }
  }
}
function effectScope(detached) {
  return new EffectScope(detached);
}
function recordEffectScope(effect, scope = activeEffectScope) {
  if (scope && scope.active) {
    scope.effects.push(effect);
  }
}
function getCurrentScope() {
  return activeEffectScope;
}
function onScopeDispose(fn) {
  if (activeEffectScope) {
    activeEffectScope.cleanups.push(fn);
  } else if (true) {
    warn(
      `onScopeDispose() is called when there is no active effect scope to be associated with.`
    );
  }
}

const createDep = (effects) => {
  const dep = new Set(effects);
  dep.w = 0;
  dep.n = 0;
  return dep;
};
const wasTracked = (dep) => (dep.w & trackOpBit) > 0;
const newTracked = (dep) => (dep.n & trackOpBit) > 0;
const initDepMarkers = ({ deps }) => {
  if (deps.length) {
    for (let i = 0; i < deps.length; i++) {
      deps[i].w |= trackOpBit;
    }
  }
};
const finalizeDepMarkers = (effect) => {
  const { deps } = effect;
  if (deps.length) {
    let ptr = 0;
    for (let i = 0; i < deps.length; i++) {
      const dep = deps[i];
      if (wasTracked(dep) && !newTracked(dep)) {
        dep.delete(effect);
      } else {
        deps[ptr++] = dep;
      }
      dep.w &= ~trackOpBit;
      dep.n &= ~trackOpBit;
    }
    deps.length = ptr;
  }
};

const targetMap = /* @__PURE__ */ new WeakMap();
let effectTrackDepth = 0;
let trackOpBit = 1;
const maxMarkerBits = 30;
let activeEffect;
const ITERATE_KEY = Symbol( true ? "iterate" : 0);
const MAP_KEY_ITERATE_KEY = Symbol( true ? "Map key iterate" : 0);
class ReactiveEffect {
  constructor(fn, scheduler = null, scope) {
    this.fn = fn;
    this.scheduler = scheduler;
    this.active = true;
    this.deps = [];
    this.parent = void 0;
    recordEffectScope(this, scope);
  }
  run() {
    if (!this.active) {
      return this.fn();
    }
    let parent = activeEffect;
    let lastShouldTrack = shouldTrack;
    while (parent) {
      if (parent === this) {
        return;
      }
      parent = parent.parent;
    }
    try {
      this.parent = activeEffect;
      activeEffect = this;
      shouldTrack = true;
      trackOpBit = 1 << ++effectTrackDepth;
      if (effectTrackDepth <= maxMarkerBits) {
        initDepMarkers(this);
      } else {
        cleanupEffect(this);
      }
      return this.fn();
    } finally {
      if (effectTrackDepth <= maxMarkerBits) {
        finalizeDepMarkers(this);
      }
      trackOpBit = 1 << --effectTrackDepth;
      activeEffect = this.parent;
      shouldTrack = lastShouldTrack;
      this.parent = void 0;
      if (this.deferStop) {
        this.stop();
      }
    }
  }
  stop() {
    if (activeEffect === this) {
      this.deferStop = true;
    } else if (this.active) {
      cleanupEffect(this);
      if (this.onStop) {
        this.onStop();
      }
      this.active = false;
    }
  }
}
function cleanupEffect(effect2) {
  const { deps } = effect2;
  if (deps.length) {
    for (let i = 0; i < deps.length; i++) {
      deps[i].delete(effect2);
    }
    deps.length = 0;
  }
}
function effect(fn, options) {
  if (fn.effect) {
    fn = fn.effect.fn;
  }
  const _effect = new ReactiveEffect(fn);
  if (options) {
    (0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.extend)(_effect, options);
    if (options.scope)
      recordEffectScope(_effect, options.scope);
  }
  if (!options || !options.lazy) {
    _effect.run();
  }
  const runner = _effect.run.bind(_effect);
  runner.effect = _effect;
  return runner;
}
function stop(runner) {
  runner.effect.stop();
}
let shouldTrack = true;
const trackStack = [];
function pauseTracking() {
  trackStack.push(shouldTrack);
  shouldTrack = false;
}
function enableTracking() {
  trackStack.push(shouldTrack);
  shouldTrack = true;
}
function resetTracking() {
  const last = trackStack.pop();
  shouldTrack = last === void 0 ? true : last;
}
function track(target, type, key) {
  if (shouldTrack && activeEffect) {
    let depsMap = targetMap.get(target);
    if (!depsMap) {
      targetMap.set(target, depsMap = /* @__PURE__ */ new Map());
    }
    let dep = depsMap.get(key);
    if (!dep) {
      depsMap.set(key, dep = createDep());
    }
    const eventInfo =  true ? { effect: activeEffect, target, type, key } : 0;
    trackEffects(dep, eventInfo);
  }
}
function trackEffects(dep, debuggerEventExtraInfo) {
  let shouldTrack2 = false;
  if (effectTrackDepth <= maxMarkerBits) {
    if (!newTracked(dep)) {
      dep.n |= trackOpBit;
      shouldTrack2 = !wasTracked(dep);
    }
  } else {
    shouldTrack2 = !dep.has(activeEffect);
  }
  if (shouldTrack2) {
    dep.add(activeEffect);
    activeEffect.deps.push(dep);
    if ( true && activeEffect.onTrack) {
      activeEffect.onTrack(
        (0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.extend)(
          {
            effect: activeEffect
          },
          debuggerEventExtraInfo
        )
      );
    }
  }
}
function trigger(target, type, key, newValue, oldValue, oldTarget) {
  const depsMap = targetMap.get(target);
  if (!depsMap) {
    return;
  }
  let deps = [];
  if (type === "clear") {
    deps = [...depsMap.values()];
  } else if (key === "length" && (0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.isArray)(target)) {
    const newLength = Number(newValue);
    depsMap.forEach((dep, key2) => {
      if (key2 === "length" || key2 >= newLength) {
        deps.push(dep);
      }
    });
  } else {
    if (key !== void 0) {
      deps.push(depsMap.get(key));
    }
    switch (type) {
      case "add":
        if (!(0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.isArray)(target)) {
          deps.push(depsMap.get(ITERATE_KEY));
          if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.isMap)(target)) {
            deps.push(depsMap.get(MAP_KEY_ITERATE_KEY));
          }
        } else if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.isIntegerKey)(key)) {
          deps.push(depsMap.get("length"));
        }
        break;
      case "delete":
        if (!(0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.isArray)(target)) {
          deps.push(depsMap.get(ITERATE_KEY));
          if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.isMap)(target)) {
            deps.push(depsMap.get(MAP_KEY_ITERATE_KEY));
          }
        }
        break;
      case "set":
        if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.isMap)(target)) {
          deps.push(depsMap.get(ITERATE_KEY));
        }
        break;
    }
  }
  const eventInfo =  true ? { target, type, key, newValue, oldValue, oldTarget } : 0;
  if (deps.length === 1) {
    if (deps[0]) {
      if (true) {
        triggerEffects(deps[0], eventInfo);
      } else {}
    }
  } else {
    const effects = [];
    for (const dep of deps) {
      if (dep) {
        effects.push(...dep);
      }
    }
    if (true) {
      triggerEffects(createDep(effects), eventInfo);
    } else {}
  }
}
function triggerEffects(dep, debuggerEventExtraInfo) {
  const effects = (0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.isArray)(dep) ? dep : [...dep];
  for (const effect2 of effects) {
    if (effect2.computed) {
      triggerEffect(effect2, debuggerEventExtraInfo);
    }
  }
  for (const effect2 of effects) {
    if (!effect2.computed) {
      triggerEffect(effect2, debuggerEventExtraInfo);
    }
  }
}
function triggerEffect(effect2, debuggerEventExtraInfo) {
  if (effect2 !== activeEffect || effect2.allowRecurse) {
    if ( true && effect2.onTrigger) {
      effect2.onTrigger((0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.extend)({ effect: effect2 }, debuggerEventExtraInfo));
    }
    if (effect2.scheduler) {
      effect2.scheduler();
    } else {
      effect2.run();
    }
  }
}
function getDepFromReactive(object, key) {
  var _a;
  return (_a = targetMap.get(object)) == null ? void 0 : _a.get(key);
}

const isNonTrackableKeys = /* @__PURE__ */ (0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.makeMap)(`__proto__,__v_isRef,__isVue`);
const builtInSymbols = new Set(
  /* @__PURE__ */ Object.getOwnPropertyNames(Symbol).filter((key) => key !== "arguments" && key !== "caller").map((key) => Symbol[key]).filter(_vue_shared__WEBPACK_IMPORTED_MODULE_0__.isSymbol)
);
const get$1 = /* @__PURE__ */ createGetter();
const shallowGet = /* @__PURE__ */ createGetter(false, true);
const readonlyGet = /* @__PURE__ */ createGetter(true);
const shallowReadonlyGet = /* @__PURE__ */ createGetter(true, true);
const arrayInstrumentations = /* @__PURE__ */ createArrayInstrumentations();
function createArrayInstrumentations() {
  const instrumentations = {};
  ["includes", "indexOf", "lastIndexOf"].forEach((key) => {
    instrumentations[key] = function(...args) {
      const arr = toRaw(this);
      for (let i = 0, l = this.length; i < l; i++) {
        track(arr, "get", i + "");
      }
      const res = arr[key](...args);
      if (res === -1 || res === false) {
        return arr[key](...args.map(toRaw));
      } else {
        return res;
      }
    };
  });
  ["push", "pop", "shift", "unshift", "splice"].forEach((key) => {
    instrumentations[key] = function(...args) {
      pauseTracking();
      const res = toRaw(this)[key].apply(this, args);
      resetTracking();
      return res;
    };
  });
  return instrumentations;
}
function hasOwnProperty(key) {
  const obj = toRaw(this);
  track(obj, "has", key);
  return obj.hasOwnProperty(key);
}
function createGetter(isReadonly2 = false, shallow = false) {
  return function get2(target, key, receiver) {
    if (key === "__v_isReactive") {
      return !isReadonly2;
    } else if (key === "__v_isReadonly") {
      return isReadonly2;
    } else if (key === "__v_isShallow") {
      return shallow;
    } else if (key === "__v_raw" && receiver === (isReadonly2 ? shallow ? shallowReadonlyMap : readonlyMap : shallow ? shallowReactiveMap : reactiveMap).get(target)) {
      return target;
    }
    const targetIsArray = (0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.isArray)(target);
    if (!isReadonly2) {
      if (targetIsArray && (0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.hasOwn)(arrayInstrumentations, key)) {
        return Reflect.get(arrayInstrumentations, key, receiver);
      }
      if (key === "hasOwnProperty") {
        return hasOwnProperty;
      }
    }
    const res = Reflect.get(target, key, receiver);
    if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.isSymbol)(key) ? builtInSymbols.has(key) : isNonTrackableKeys(key)) {
      return res;
    }
    if (!isReadonly2) {
      track(target, "get", key);
    }
    if (shallow) {
      return res;
    }
    if (isRef(res)) {
      return targetIsArray && (0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.isIntegerKey)(key) ? res : res.value;
    }
    if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.isObject)(res)) {
      return isReadonly2 ? readonly(res) : reactive(res);
    }
    return res;
  };
}
const set$1 = /* @__PURE__ */ createSetter();
const shallowSet = /* @__PURE__ */ createSetter(true);
function createSetter(shallow = false) {
  return function set2(target, key, value, receiver) {
    let oldValue = target[key];
    if (isReadonly(oldValue) && isRef(oldValue) && !isRef(value)) {
      return false;
    }
    if (!shallow) {
      if (!isShallow(value) && !isReadonly(value)) {
        oldValue = toRaw(oldValue);
        value = toRaw(value);
      }
      if (!(0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.isArray)(target) && isRef(oldValue) && !isRef(value)) {
        oldValue.value = value;
        return true;
      }
    }
    const hadKey = (0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.isArray)(target) && (0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.isIntegerKey)(key) ? Number(key) < target.length : (0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.hasOwn)(target, key);
    const result = Reflect.set(target, key, value, receiver);
    if (target === toRaw(receiver)) {
      if (!hadKey) {
        trigger(target, "add", key, value);
      } else if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.hasChanged)(value, oldValue)) {
        trigger(target, "set", key, value, oldValue);
      }
    }
    return result;
  };
}
function deleteProperty(target, key) {
  const hadKey = (0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.hasOwn)(target, key);
  const oldValue = target[key];
  const result = Reflect.deleteProperty(target, key);
  if (result && hadKey) {
    trigger(target, "delete", key, void 0, oldValue);
  }
  return result;
}
function has$1(target, key) {
  const result = Reflect.has(target, key);
  if (!(0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.isSymbol)(key) || !builtInSymbols.has(key)) {
    track(target, "has", key);
  }
  return result;
}
function ownKeys(target) {
  track(target, "iterate", (0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.isArray)(target) ? "length" : ITERATE_KEY);
  return Reflect.ownKeys(target);
}
const mutableHandlers = {
  get: get$1,
  set: set$1,
  deleteProperty,
  has: has$1,
  ownKeys
};
const readonlyHandlers = {
  get: readonlyGet,
  set(target, key) {
    if (true) {
      warn(
        `Set operation on key "${String(key)}" failed: target is readonly.`,
        target
      );
    }
    return true;
  },
  deleteProperty(target, key) {
    if (true) {
      warn(
        `Delete operation on key "${String(key)}" failed: target is readonly.`,
        target
      );
    }
    return true;
  }
};
const shallowReactiveHandlers = /* @__PURE__ */ (0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.extend)(
  {},
  mutableHandlers,
  {
    get: shallowGet,
    set: shallowSet
  }
);
const shallowReadonlyHandlers = /* @__PURE__ */ (0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.extend)(
  {},
  readonlyHandlers,
  {
    get: shallowReadonlyGet
  }
);

const toShallow = (value) => value;
const getProto = (v) => Reflect.getPrototypeOf(v);
function get(target, key, isReadonly = false, isShallow = false) {
  target = target["__v_raw"];
  const rawTarget = toRaw(target);
  const rawKey = toRaw(key);
  if (!isReadonly) {
    if (key !== rawKey) {
      track(rawTarget, "get", key);
    }
    track(rawTarget, "get", rawKey);
  }
  const { has: has2 } = getProto(rawTarget);
  const wrap = isShallow ? toShallow : isReadonly ? toReadonly : toReactive;
  if (has2.call(rawTarget, key)) {
    return wrap(target.get(key));
  } else if (has2.call(rawTarget, rawKey)) {
    return wrap(target.get(rawKey));
  } else if (target !== rawTarget) {
    target.get(key);
  }
}
function has(key, isReadonly = false) {
  const target = this["__v_raw"];
  const rawTarget = toRaw(target);
  const rawKey = toRaw(key);
  if (!isReadonly) {
    if (key !== rawKey) {
      track(rawTarget, "has", key);
    }
    track(rawTarget, "has", rawKey);
  }
  return key === rawKey ? target.has(key) : target.has(key) || target.has(rawKey);
}
function size(target, isReadonly = false) {
  target = target["__v_raw"];
  !isReadonly && track(toRaw(target), "iterate", ITERATE_KEY);
  return Reflect.get(target, "size", target);
}
function add(value) {
  value = toRaw(value);
  const target = toRaw(this);
  const proto = getProto(target);
  const hadKey = proto.has.call(target, value);
  if (!hadKey) {
    target.add(value);
    trigger(target, "add", value, value);
  }
  return this;
}
function set(key, value) {
  value = toRaw(value);
  const target = toRaw(this);
  const { has: has2, get: get2 } = getProto(target);
  let hadKey = has2.call(target, key);
  if (!hadKey) {
    key = toRaw(key);
    hadKey = has2.call(target, key);
  } else if (true) {
    checkIdentityKeys(target, has2, key);
  }
  const oldValue = get2.call(target, key);
  target.set(key, value);
  if (!hadKey) {
    trigger(target, "add", key, value);
  } else if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.hasChanged)(value, oldValue)) {
    trigger(target, "set", key, value, oldValue);
  }
  return this;
}
function deleteEntry(key) {
  const target = toRaw(this);
  const { has: has2, get: get2 } = getProto(target);
  let hadKey = has2.call(target, key);
  if (!hadKey) {
    key = toRaw(key);
    hadKey = has2.call(target, key);
  } else if (true) {
    checkIdentityKeys(target, has2, key);
  }
  const oldValue = get2 ? get2.call(target, key) : void 0;
  const result = target.delete(key);
  if (hadKey) {
    trigger(target, "delete", key, void 0, oldValue);
  }
  return result;
}
function clear() {
  const target = toRaw(this);
  const hadItems = target.size !== 0;
  const oldTarget =  true ? (0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.isMap)(target) ? new Map(target) : new Set(target) : 0;
  const result = target.clear();
  if (hadItems) {
    trigger(target, "clear", void 0, void 0, oldTarget);
  }
  return result;
}
function createForEach(isReadonly, isShallow) {
  return function forEach(callback, thisArg) {
    const observed = this;
    const target = observed["__v_raw"];
    const rawTarget = toRaw(target);
    const wrap = isShallow ? toShallow : isReadonly ? toReadonly : toReactive;
    !isReadonly && track(rawTarget, "iterate", ITERATE_KEY);
    return target.forEach((value, key) => {
      return callback.call(thisArg, wrap(value), wrap(key), observed);
    });
  };
}
function createIterableMethod(method, isReadonly, isShallow) {
  return function(...args) {
    const target = this["__v_raw"];
    const rawTarget = toRaw(target);
    const targetIsMap = (0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.isMap)(rawTarget);
    const isPair = method === "entries" || method === Symbol.iterator && targetIsMap;
    const isKeyOnly = method === "keys" && targetIsMap;
    const innerIterator = target[method](...args);
    const wrap = isShallow ? toShallow : isReadonly ? toReadonly : toReactive;
    !isReadonly && track(
      rawTarget,
      "iterate",
      isKeyOnly ? MAP_KEY_ITERATE_KEY : ITERATE_KEY
    );
    return {
      // iterator protocol
      next() {
        const { value, done } = innerIterator.next();
        return done ? { value, done } : {
          value: isPair ? [wrap(value[0]), wrap(value[1])] : wrap(value),
          done
        };
      },
      // iterable protocol
      [Symbol.iterator]() {
        return this;
      }
    };
  };
}
function createReadonlyMethod(type) {
  return function(...args) {
    if (true) {
      const key = args[0] ? `on key "${args[0]}" ` : ``;
      console.warn(
        `${(0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.capitalize)(type)} operation ${key}failed: target is readonly.`,
        toRaw(this)
      );
    }
    return type === "delete" ? false : this;
  };
}
function createInstrumentations() {
  const mutableInstrumentations2 = {
    get(key) {
      return get(this, key);
    },
    get size() {
      return size(this);
    },
    has,
    add,
    set,
    delete: deleteEntry,
    clear,
    forEach: createForEach(false, false)
  };
  const shallowInstrumentations2 = {
    get(key) {
      return get(this, key, false, true);
    },
    get size() {
      return size(this);
    },
    has,
    add,
    set,
    delete: deleteEntry,
    clear,
    forEach: createForEach(false, true)
  };
  const readonlyInstrumentations2 = {
    get(key) {
      return get(this, key, true);
    },
    get size() {
      return size(this, true);
    },
    has(key) {
      return has.call(this, key, true);
    },
    add: createReadonlyMethod("add"),
    set: createReadonlyMethod("set"),
    delete: createReadonlyMethod("delete"),
    clear: createReadonlyMethod("clear"),
    forEach: createForEach(true, false)
  };
  const shallowReadonlyInstrumentations2 = {
    get(key) {
      return get(this, key, true, true);
    },
    get size() {
      return size(this, true);
    },
    has(key) {
      return has.call(this, key, true);
    },
    add: createReadonlyMethod("add"),
    set: createReadonlyMethod("set"),
    delete: createReadonlyMethod("delete"),
    clear: createReadonlyMethod("clear"),
    forEach: createForEach(true, true)
  };
  const iteratorMethods = ["keys", "values", "entries", Symbol.iterator];
  iteratorMethods.forEach((method) => {
    mutableInstrumentations2[method] = createIterableMethod(
      method,
      false,
      false
    );
    readonlyInstrumentations2[method] = createIterableMethod(
      method,
      true,
      false
    );
    shallowInstrumentations2[method] = createIterableMethod(
      method,
      false,
      true
    );
    shallowReadonlyInstrumentations2[method] = createIterableMethod(
      method,
      true,
      true
    );
  });
  return [
    mutableInstrumentations2,
    readonlyInstrumentations2,
    shallowInstrumentations2,
    shallowReadonlyInstrumentations2
  ];
}
const [
  mutableInstrumentations,
  readonlyInstrumentations,
  shallowInstrumentations,
  shallowReadonlyInstrumentations
] = /* @__PURE__ */ createInstrumentations();
function createInstrumentationGetter(isReadonly, shallow) {
  const instrumentations = shallow ? isReadonly ? shallowReadonlyInstrumentations : shallowInstrumentations : isReadonly ? readonlyInstrumentations : mutableInstrumentations;
  return (target, key, receiver) => {
    if (key === "__v_isReactive") {
      return !isReadonly;
    } else if (key === "__v_isReadonly") {
      return isReadonly;
    } else if (key === "__v_raw") {
      return target;
    }
    return Reflect.get(
      (0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.hasOwn)(instrumentations, key) && key in target ? instrumentations : target,
      key,
      receiver
    );
  };
}
const mutableCollectionHandlers = {
  get: /* @__PURE__ */ createInstrumentationGetter(false, false)
};
const shallowCollectionHandlers = {
  get: /* @__PURE__ */ createInstrumentationGetter(false, true)
};
const readonlyCollectionHandlers = {
  get: /* @__PURE__ */ createInstrumentationGetter(true, false)
};
const shallowReadonlyCollectionHandlers = {
  get: /* @__PURE__ */ createInstrumentationGetter(true, true)
};
function checkIdentityKeys(target, has2, key) {
  const rawKey = toRaw(key);
  if (rawKey !== key && has2.call(target, rawKey)) {
    const type = (0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.toRawType)(target);
    console.warn(
      `Reactive ${type} contains both the raw and reactive versions of the same object${type === `Map` ? ` as keys` : ``}, which can lead to inconsistencies. Avoid differentiating between the raw and reactive versions of an object and only use the reactive version if possible.`
    );
  }
}

const reactiveMap = /* @__PURE__ */ new WeakMap();
const shallowReactiveMap = /* @__PURE__ */ new WeakMap();
const readonlyMap = /* @__PURE__ */ new WeakMap();
const shallowReadonlyMap = /* @__PURE__ */ new WeakMap();
function targetTypeMap(rawType) {
  switch (rawType) {
    case "Object":
    case "Array":
      return 1 /* COMMON */;
    case "Map":
    case "Set":
    case "WeakMap":
    case "WeakSet":
      return 2 /* COLLECTION */;
    default:
      return 0 /* INVALID */;
  }
}
function getTargetType(value) {
  return value["__v_skip"] || !Object.isExtensible(value) ? 0 /* INVALID */ : targetTypeMap((0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.toRawType)(value));
}
function reactive(target) {
  if (isReadonly(target)) {
    return target;
  }
  return createReactiveObject(
    target,
    false,
    mutableHandlers,
    mutableCollectionHandlers,
    reactiveMap
  );
}
function shallowReactive(target) {
  return createReactiveObject(
    target,
    false,
    shallowReactiveHandlers,
    shallowCollectionHandlers,
    shallowReactiveMap
  );
}
function readonly(target) {
  return createReactiveObject(
    target,
    true,
    readonlyHandlers,
    readonlyCollectionHandlers,
    readonlyMap
  );
}
function shallowReadonly(target) {
  return createReactiveObject(
    target,
    true,
    shallowReadonlyHandlers,
    shallowReadonlyCollectionHandlers,
    shallowReadonlyMap
  );
}
function createReactiveObject(target, isReadonly2, baseHandlers, collectionHandlers, proxyMap) {
  if (!(0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.isObject)(target)) {
    if (true) {
      console.warn(`value cannot be made reactive: ${String(target)}`);
    }
    return target;
  }
  if (target["__v_raw"] && !(isReadonly2 && target["__v_isReactive"])) {
    return target;
  }
  const existingProxy = proxyMap.get(target);
  if (existingProxy) {
    return existingProxy;
  }
  const targetType = getTargetType(target);
  if (targetType === 0 /* INVALID */) {
    return target;
  }
  const proxy = new Proxy(
    target,
    targetType === 2 /* COLLECTION */ ? collectionHandlers : baseHandlers
  );
  proxyMap.set(target, proxy);
  return proxy;
}
function isReactive(value) {
  if (isReadonly(value)) {
    return isReactive(value["__v_raw"]);
  }
  return !!(value && value["__v_isReactive"]);
}
function isReadonly(value) {
  return !!(value && value["__v_isReadonly"]);
}
function isShallow(value) {
  return !!(value && value["__v_isShallow"]);
}
function isProxy(value) {
  return isReactive(value) || isReadonly(value);
}
function toRaw(observed) {
  const raw = observed && observed["__v_raw"];
  return raw ? toRaw(raw) : observed;
}
function markRaw(value) {
  (0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.def)(value, "__v_skip", true);
  return value;
}
const toReactive = (value) => (0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.isObject)(value) ? reactive(value) : value;
const toReadonly = (value) => (0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.isObject)(value) ? readonly(value) : value;

function trackRefValue(ref2) {
  if (shouldTrack && activeEffect) {
    ref2 = toRaw(ref2);
    if (true) {
      trackEffects(ref2.dep || (ref2.dep = createDep()), {
        target: ref2,
        type: "get",
        key: "value"
      });
    } else {}
  }
}
function triggerRefValue(ref2, newVal) {
  ref2 = toRaw(ref2);
  const dep = ref2.dep;
  if (dep) {
    if (true) {
      triggerEffects(dep, {
        target: ref2,
        type: "set",
        key: "value",
        newValue: newVal
      });
    } else {}
  }
}
function isRef(r) {
  return !!(r && r.__v_isRef === true);
}
function ref(value) {
  return createRef(value, false);
}
function shallowRef(value) {
  return createRef(value, true);
}
function createRef(rawValue, shallow) {
  if (isRef(rawValue)) {
    return rawValue;
  }
  return new RefImpl(rawValue, shallow);
}
class RefImpl {
  constructor(value, __v_isShallow) {
    this.__v_isShallow = __v_isShallow;
    this.dep = void 0;
    this.__v_isRef = true;
    this._rawValue = __v_isShallow ? value : toRaw(value);
    this._value = __v_isShallow ? value : toReactive(value);
  }
  get value() {
    trackRefValue(this);
    return this._value;
  }
  set value(newVal) {
    const useDirectValue = this.__v_isShallow || isShallow(newVal) || isReadonly(newVal);
    newVal = useDirectValue ? newVal : toRaw(newVal);
    if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.hasChanged)(newVal, this._rawValue)) {
      this._rawValue = newVal;
      this._value = useDirectValue ? newVal : toReactive(newVal);
      triggerRefValue(this, newVal);
    }
  }
}
function triggerRef(ref2) {
  triggerRefValue(ref2,  true ? ref2.value : 0);
}
function unref(ref2) {
  return isRef(ref2) ? ref2.value : ref2;
}
function toValue(source) {
  return (0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.isFunction)(source) ? source() : unref(source);
}
const shallowUnwrapHandlers = {
  get: (target, key, receiver) => unref(Reflect.get(target, key, receiver)),
  set: (target, key, value, receiver) => {
    const oldValue = target[key];
    if (isRef(oldValue) && !isRef(value)) {
      oldValue.value = value;
      return true;
    } else {
      return Reflect.set(target, key, value, receiver);
    }
  }
};
function proxyRefs(objectWithRefs) {
  return isReactive(objectWithRefs) ? objectWithRefs : new Proxy(objectWithRefs, shallowUnwrapHandlers);
}
class CustomRefImpl {
  constructor(factory) {
    this.dep = void 0;
    this.__v_isRef = true;
    const { get, set } = factory(
      () => trackRefValue(this),
      () => triggerRefValue(this)
    );
    this._get = get;
    this._set = set;
  }
  get value() {
    return this._get();
  }
  set value(newVal) {
    this._set(newVal);
  }
}
function customRef(factory) {
  return new CustomRefImpl(factory);
}
function toRefs(object) {
  if ( true && !isProxy(object)) {
    console.warn(`toRefs() expects a reactive object but received a plain one.`);
  }
  const ret = (0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.isArray)(object) ? new Array(object.length) : {};
  for (const key in object) {
    ret[key] = propertyToRef(object, key);
  }
  return ret;
}
class ObjectRefImpl {
  constructor(_object, _key, _defaultValue) {
    this._object = _object;
    this._key = _key;
    this._defaultValue = _defaultValue;
    this.__v_isRef = true;
  }
  get value() {
    const val = this._object[this._key];
    return val === void 0 ? this._defaultValue : val;
  }
  set value(newVal) {
    this._object[this._key] = newVal;
  }
  get dep() {
    return getDepFromReactive(toRaw(this._object), this._key);
  }
}
class GetterRefImpl {
  constructor(_getter) {
    this._getter = _getter;
    this.__v_isRef = true;
    this.__v_isReadonly = true;
  }
  get value() {
    return this._getter();
  }
}
function toRef(source, key, defaultValue) {
  if (isRef(source)) {
    return source;
  } else if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.isFunction)(source)) {
    return new GetterRefImpl(source);
  } else if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.isObject)(source) && arguments.length > 1) {
    return propertyToRef(source, key, defaultValue);
  } else {
    return ref(source);
  }
}
function propertyToRef(source, key, defaultValue) {
  const val = source[key];
  return isRef(val) ? val : new ObjectRefImpl(
    source,
    key,
    defaultValue
  );
}

class ComputedRefImpl {
  constructor(getter, _setter, isReadonly, isSSR) {
    this._setter = _setter;
    this.dep = void 0;
    this.__v_isRef = true;
    this["__v_isReadonly"] = false;
    this._dirty = true;
    this.effect = new ReactiveEffect(getter, () => {
      if (!this._dirty) {
        this._dirty = true;
        triggerRefValue(this);
      }
    });
    this.effect.computed = this;
    this.effect.active = this._cacheable = !isSSR;
    this["__v_isReadonly"] = isReadonly;
  }
  get value() {
    const self = toRaw(this);
    trackRefValue(self);
    if (self._dirty || !self._cacheable) {
      self._dirty = false;
      self._value = self.effect.run();
    }
    return self._value;
  }
  set value(newValue) {
    this._setter(newValue);
  }
}
function computed(getterOrOptions, debugOptions, isSSR = false) {
  let getter;
  let setter;
  const onlyGetter = (0,_vue_shared__WEBPACK_IMPORTED_MODULE_0__.isFunction)(getterOrOptions);
  if (onlyGetter) {
    getter = getterOrOptions;
    setter =  true ? () => {
      console.warn("Write operation failed: computed value is readonly");
    } : 0;
  } else {
    getter = getterOrOptions.get;
    setter = getterOrOptions.set;
  }
  const cRef = new ComputedRefImpl(getter, setter, onlyGetter || !setter, isSSR);
  if ( true && debugOptions && !isSSR) {
    cRef.effect.onTrack = debugOptions.onTrack;
    cRef.effect.onTrigger = debugOptions.onTrigger;
  }
  return cRef;
}

const tick = /* @__PURE__ */ Promise.resolve();
const queue = [];
let queued = false;
const scheduler = (fn) => {
  queue.push(fn);
  if (!queued) {
    queued = true;
    tick.then(flush);
  }
};
const flush = () => {
  for (let i = 0; i < queue.length; i++) {
    queue[i]();
  }
  queue.length = 0;
  queued = false;
};
class DeferredComputedRefImpl {
  constructor(getter) {
    this.dep = void 0;
    this._dirty = true;
    this.__v_isRef = true;
    this["__v_isReadonly"] = true;
    let compareTarget;
    let hasCompareTarget = false;
    let scheduled = false;
    this.effect = new ReactiveEffect(getter, (computedTrigger) => {
      if (this.dep) {
        if (computedTrigger) {
          compareTarget = this._value;
          hasCompareTarget = true;
        } else if (!scheduled) {
          const valueToCompare = hasCompareTarget ? compareTarget : this._value;
          scheduled = true;
          hasCompareTarget = false;
          scheduler(() => {
            if (this.effect.active && this._get() !== valueToCompare) {
              triggerRefValue(this);
            }
            scheduled = false;
          });
        }
        for (const e of this.dep) {
          if (e.computed instanceof DeferredComputedRefImpl) {
            e.scheduler(
              true
              /* computedTrigger */
            );
          }
        }
      }
      this._dirty = true;
    });
    this.effect.computed = this;
  }
  _get() {
    if (this._dirty) {
      this._dirty = false;
      return this._value = this.effect.run();
    }
    return this._value;
  }
  get value() {
    trackRefValue(this);
    return toRaw(this)._get();
  }
}
function deferredComputed(getter) {
  return new DeferredComputedRefImpl(getter);
}




/***/ }),

/***/ "./node_modules/@vue/runtime-core/dist/runtime-core.esm-bundler.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@vue/runtime-core/dist/runtime-core.esm-bundler.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "BaseTransition": () => (/* binding */ BaseTransition),
/* harmony export */   "BaseTransitionPropsValidators": () => (/* binding */ BaseTransitionPropsValidators),
/* harmony export */   "Comment": () => (/* binding */ Comment),
/* harmony export */   "EffectScope": () => (/* reexport safe */ _vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.EffectScope),
/* harmony export */   "Fragment": () => (/* binding */ Fragment),
/* harmony export */   "KeepAlive": () => (/* binding */ KeepAlive),
/* harmony export */   "ReactiveEffect": () => (/* reexport safe */ _vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.ReactiveEffect),
/* harmony export */   "Static": () => (/* binding */ Static),
/* harmony export */   "Suspense": () => (/* binding */ Suspense),
/* harmony export */   "Teleport": () => (/* binding */ Teleport),
/* harmony export */   "Text": () => (/* binding */ Text),
/* harmony export */   "assertNumber": () => (/* binding */ assertNumber),
/* harmony export */   "callWithAsyncErrorHandling": () => (/* binding */ callWithAsyncErrorHandling),
/* harmony export */   "callWithErrorHandling": () => (/* binding */ callWithErrorHandling),
/* harmony export */   "camelize": () => (/* reexport safe */ _vue_shared__WEBPACK_IMPORTED_MODULE_1__.camelize),
/* harmony export */   "capitalize": () => (/* reexport safe */ _vue_shared__WEBPACK_IMPORTED_MODULE_1__.capitalize),
/* harmony export */   "cloneVNode": () => (/* binding */ cloneVNode),
/* harmony export */   "compatUtils": () => (/* binding */ compatUtils),
/* harmony export */   "computed": () => (/* binding */ computed),
/* harmony export */   "createBlock": () => (/* binding */ createBlock),
/* harmony export */   "createCommentVNode": () => (/* binding */ createCommentVNode),
/* harmony export */   "createElementBlock": () => (/* binding */ createElementBlock),
/* harmony export */   "createElementVNode": () => (/* binding */ createBaseVNode),
/* harmony export */   "createHydrationRenderer": () => (/* binding */ createHydrationRenderer),
/* harmony export */   "createPropsRestProxy": () => (/* binding */ createPropsRestProxy),
/* harmony export */   "createRenderer": () => (/* binding */ createRenderer),
/* harmony export */   "createSlots": () => (/* binding */ createSlots),
/* harmony export */   "createStaticVNode": () => (/* binding */ createStaticVNode),
/* harmony export */   "createTextVNode": () => (/* binding */ createTextVNode),
/* harmony export */   "createVNode": () => (/* binding */ createVNode),
/* harmony export */   "customRef": () => (/* reexport safe */ _vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.customRef),
/* harmony export */   "defineAsyncComponent": () => (/* binding */ defineAsyncComponent),
/* harmony export */   "defineComponent": () => (/* binding */ defineComponent),
/* harmony export */   "defineEmits": () => (/* binding */ defineEmits),
/* harmony export */   "defineExpose": () => (/* binding */ defineExpose),
/* harmony export */   "defineModel": () => (/* binding */ defineModel),
/* harmony export */   "defineOptions": () => (/* binding */ defineOptions),
/* harmony export */   "defineProps": () => (/* binding */ defineProps),
/* harmony export */   "defineSlots": () => (/* binding */ defineSlots),
/* harmony export */   "devtools": () => (/* binding */ devtools),
/* harmony export */   "effect": () => (/* reexport safe */ _vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.effect),
/* harmony export */   "effectScope": () => (/* reexport safe */ _vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.effectScope),
/* harmony export */   "getCurrentInstance": () => (/* binding */ getCurrentInstance),
/* harmony export */   "getCurrentScope": () => (/* reexport safe */ _vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.getCurrentScope),
/* harmony export */   "getTransitionRawChildren": () => (/* binding */ getTransitionRawChildren),
/* harmony export */   "guardReactiveProps": () => (/* binding */ guardReactiveProps),
/* harmony export */   "h": () => (/* binding */ h),
/* harmony export */   "handleError": () => (/* binding */ handleError),
/* harmony export */   "hasInjectionContext": () => (/* binding */ hasInjectionContext),
/* harmony export */   "initCustomFormatter": () => (/* binding */ initCustomFormatter),
/* harmony export */   "inject": () => (/* binding */ inject),
/* harmony export */   "isMemoSame": () => (/* binding */ isMemoSame),
/* harmony export */   "isProxy": () => (/* reexport safe */ _vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.isProxy),
/* harmony export */   "isReactive": () => (/* reexport safe */ _vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.isReactive),
/* harmony export */   "isReadonly": () => (/* reexport safe */ _vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.isReadonly),
/* harmony export */   "isRef": () => (/* reexport safe */ _vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.isRef),
/* harmony export */   "isRuntimeOnly": () => (/* binding */ isRuntimeOnly),
/* harmony export */   "isShallow": () => (/* reexport safe */ _vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.isShallow),
/* harmony export */   "isVNode": () => (/* binding */ isVNode),
/* harmony export */   "markRaw": () => (/* reexport safe */ _vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.markRaw),
/* harmony export */   "mergeDefaults": () => (/* binding */ mergeDefaults),
/* harmony export */   "mergeModels": () => (/* binding */ mergeModels),
/* harmony export */   "mergeProps": () => (/* binding */ mergeProps),
/* harmony export */   "nextTick": () => (/* binding */ nextTick),
/* harmony export */   "normalizeClass": () => (/* reexport safe */ _vue_shared__WEBPACK_IMPORTED_MODULE_1__.normalizeClass),
/* harmony export */   "normalizeProps": () => (/* reexport safe */ _vue_shared__WEBPACK_IMPORTED_MODULE_1__.normalizeProps),
/* harmony export */   "normalizeStyle": () => (/* reexport safe */ _vue_shared__WEBPACK_IMPORTED_MODULE_1__.normalizeStyle),
/* harmony export */   "onActivated": () => (/* binding */ onActivated),
/* harmony export */   "onBeforeMount": () => (/* binding */ onBeforeMount),
/* harmony export */   "onBeforeUnmount": () => (/* binding */ onBeforeUnmount),
/* harmony export */   "onBeforeUpdate": () => (/* binding */ onBeforeUpdate),
/* harmony export */   "onDeactivated": () => (/* binding */ onDeactivated),
/* harmony export */   "onErrorCaptured": () => (/* binding */ onErrorCaptured),
/* harmony export */   "onMounted": () => (/* binding */ onMounted),
/* harmony export */   "onRenderTracked": () => (/* binding */ onRenderTracked),
/* harmony export */   "onRenderTriggered": () => (/* binding */ onRenderTriggered),
/* harmony export */   "onScopeDispose": () => (/* reexport safe */ _vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.onScopeDispose),
/* harmony export */   "onServerPrefetch": () => (/* binding */ onServerPrefetch),
/* harmony export */   "onUnmounted": () => (/* binding */ onUnmounted),
/* harmony export */   "onUpdated": () => (/* binding */ onUpdated),
/* harmony export */   "openBlock": () => (/* binding */ openBlock),
/* harmony export */   "popScopeId": () => (/* binding */ popScopeId),
/* harmony export */   "provide": () => (/* binding */ provide),
/* harmony export */   "proxyRefs": () => (/* reexport safe */ _vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.proxyRefs),
/* harmony export */   "pushScopeId": () => (/* binding */ pushScopeId),
/* harmony export */   "queuePostFlushCb": () => (/* binding */ queuePostFlushCb),
/* harmony export */   "reactive": () => (/* reexport safe */ _vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.reactive),
/* harmony export */   "readonly": () => (/* reexport safe */ _vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.readonly),
/* harmony export */   "ref": () => (/* reexport safe */ _vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.ref),
/* harmony export */   "registerRuntimeCompiler": () => (/* binding */ registerRuntimeCompiler),
/* harmony export */   "renderList": () => (/* binding */ renderList),
/* harmony export */   "renderSlot": () => (/* binding */ renderSlot),
/* harmony export */   "resolveComponent": () => (/* binding */ resolveComponent),
/* harmony export */   "resolveDirective": () => (/* binding */ resolveDirective),
/* harmony export */   "resolveDynamicComponent": () => (/* binding */ resolveDynamicComponent),
/* harmony export */   "resolveFilter": () => (/* binding */ resolveFilter),
/* harmony export */   "resolveTransitionHooks": () => (/* binding */ resolveTransitionHooks),
/* harmony export */   "setBlockTracking": () => (/* binding */ setBlockTracking),
/* harmony export */   "setDevtoolsHook": () => (/* binding */ setDevtoolsHook),
/* harmony export */   "setTransitionHooks": () => (/* binding */ setTransitionHooks),
/* harmony export */   "shallowReactive": () => (/* reexport safe */ _vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.shallowReactive),
/* harmony export */   "shallowReadonly": () => (/* reexport safe */ _vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.shallowReadonly),
/* harmony export */   "shallowRef": () => (/* reexport safe */ _vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.shallowRef),
/* harmony export */   "ssrContextKey": () => (/* binding */ ssrContextKey),
/* harmony export */   "ssrUtils": () => (/* binding */ ssrUtils),
/* harmony export */   "stop": () => (/* reexport safe */ _vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.stop),
/* harmony export */   "toDisplayString": () => (/* reexport safe */ _vue_shared__WEBPACK_IMPORTED_MODULE_1__.toDisplayString),
/* harmony export */   "toHandlerKey": () => (/* reexport safe */ _vue_shared__WEBPACK_IMPORTED_MODULE_1__.toHandlerKey),
/* harmony export */   "toHandlers": () => (/* binding */ toHandlers),
/* harmony export */   "toRaw": () => (/* reexport safe */ _vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.toRaw),
/* harmony export */   "toRef": () => (/* reexport safe */ _vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.toRef),
/* harmony export */   "toRefs": () => (/* reexport safe */ _vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.toRefs),
/* harmony export */   "toValue": () => (/* reexport safe */ _vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.toValue),
/* harmony export */   "transformVNodeArgs": () => (/* binding */ transformVNodeArgs),
/* harmony export */   "triggerRef": () => (/* reexport safe */ _vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.triggerRef),
/* harmony export */   "unref": () => (/* reexport safe */ _vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.unref),
/* harmony export */   "useAttrs": () => (/* binding */ useAttrs),
/* harmony export */   "useModel": () => (/* binding */ useModel),
/* harmony export */   "useSSRContext": () => (/* binding */ useSSRContext),
/* harmony export */   "useSlots": () => (/* binding */ useSlots),
/* harmony export */   "useTransitionState": () => (/* binding */ useTransitionState),
/* harmony export */   "version": () => (/* binding */ version),
/* harmony export */   "warn": () => (/* binding */ warn),
/* harmony export */   "watch": () => (/* binding */ watch),
/* harmony export */   "watchEffect": () => (/* binding */ watchEffect),
/* harmony export */   "watchPostEffect": () => (/* binding */ watchPostEffect),
/* harmony export */   "watchSyncEffect": () => (/* binding */ watchSyncEffect),
/* harmony export */   "withAsyncContext": () => (/* binding */ withAsyncContext),
/* harmony export */   "withCtx": () => (/* binding */ withCtx),
/* harmony export */   "withDefaults": () => (/* binding */ withDefaults),
/* harmony export */   "withDirectives": () => (/* binding */ withDirectives),
/* harmony export */   "withMemo": () => (/* binding */ withMemo),
/* harmony export */   "withScopeId": () => (/* binding */ withScopeId)
/* harmony export */ });
/* harmony import */ var _vue_reactivity__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @vue/reactivity */ "./node_modules/@vue/reactivity/dist/reactivity.esm-bundler.js");
/* harmony import */ var _vue_shared__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @vue/shared */ "./node_modules/@vue/shared/dist/shared.esm-bundler.js");





const stack = [];
function pushWarningContext(vnode) {
  stack.push(vnode);
}
function popWarningContext() {
  stack.pop();
}
function warn(msg, ...args) {
  if (false)
    {}
  (0,_vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.pauseTracking)();
  const instance = stack.length ? stack[stack.length - 1].component : null;
  const appWarnHandler = instance && instance.appContext.config.warnHandler;
  const trace = getComponentTrace();
  if (appWarnHandler) {
    callWithErrorHandling(
      appWarnHandler,
      instance,
      11,
      [
        msg + args.join(""),
        instance && instance.proxy,
        trace.map(
          ({ vnode }) => `at <${formatComponentName(instance, vnode.type)}>`
        ).join("\n"),
        trace
      ]
    );
  } else {
    const warnArgs = [`[Vue warn]: ${msg}`, ...args];
    if (trace.length && // avoid spamming console during tests
    true) {
      warnArgs.push(`
`, ...formatTrace(trace));
    }
    console.warn(...warnArgs);
  }
  (0,_vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.resetTracking)();
}
function getComponentTrace() {
  let currentVNode = stack[stack.length - 1];
  if (!currentVNode) {
    return [];
  }
  const normalizedStack = [];
  while (currentVNode) {
    const last = normalizedStack[0];
    if (last && last.vnode === currentVNode) {
      last.recurseCount++;
    } else {
      normalizedStack.push({
        vnode: currentVNode,
        recurseCount: 0
      });
    }
    const parentInstance = currentVNode.component && currentVNode.component.parent;
    currentVNode = parentInstance && parentInstance.vnode;
  }
  return normalizedStack;
}
function formatTrace(trace) {
  const logs = [];
  trace.forEach((entry, i) => {
    logs.push(...i === 0 ? [] : [`
`], ...formatTraceEntry(entry));
  });
  return logs;
}
function formatTraceEntry({ vnode, recurseCount }) {
  const postfix = recurseCount > 0 ? `... (${recurseCount} recursive calls)` : ``;
  const isRoot = vnode.component ? vnode.component.parent == null : false;
  const open = ` at <${formatComponentName(
    vnode.component,
    vnode.type,
    isRoot
  )}`;
  const close = `>` + postfix;
  return vnode.props ? [open, ...formatProps(vnode.props), close] : [open + close];
}
function formatProps(props) {
  const res = [];
  const keys = Object.keys(props);
  keys.slice(0, 3).forEach((key) => {
    res.push(...formatProp(key, props[key]));
  });
  if (keys.length > 3) {
    res.push(` ...`);
  }
  return res;
}
function formatProp(key, value, raw) {
  if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isString)(value)) {
    value = JSON.stringify(value);
    return raw ? value : [`${key}=${value}`];
  } else if (typeof value === "number" || typeof value === "boolean" || value == null) {
    return raw ? value : [`${key}=${value}`];
  } else if ((0,_vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.isRef)(value)) {
    value = formatProp(key, (0,_vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.toRaw)(value.value), true);
    return raw ? value : [`${key}=Ref<`, value, `>`];
  } else if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isFunction)(value)) {
    return [`${key}=fn${value.name ? `<${value.name}>` : ``}`];
  } else {
    value = (0,_vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.toRaw)(value);
    return raw ? value : [`${key}=`, value];
  }
}
function assertNumber(val, type) {
  if (false)
    {}
  if (val === void 0) {
    return;
  } else if (typeof val !== "number") {
    warn(`${type} is not a valid number - got ${JSON.stringify(val)}.`);
  } else if (isNaN(val)) {
    warn(`${type} is NaN - the duration expression might be incorrect.`);
  }
}

const ErrorTypeStrings = {
  ["sp"]: "serverPrefetch hook",
  ["bc"]: "beforeCreate hook",
  ["c"]: "created hook",
  ["bm"]: "beforeMount hook",
  ["m"]: "mounted hook",
  ["bu"]: "beforeUpdate hook",
  ["u"]: "updated",
  ["bum"]: "beforeUnmount hook",
  ["um"]: "unmounted hook",
  ["a"]: "activated hook",
  ["da"]: "deactivated hook",
  ["ec"]: "errorCaptured hook",
  ["rtc"]: "renderTracked hook",
  ["rtg"]: "renderTriggered hook",
  [0]: "setup function",
  [1]: "render function",
  [2]: "watcher getter",
  [3]: "watcher callback",
  [4]: "watcher cleanup function",
  [5]: "native event handler",
  [6]: "component event handler",
  [7]: "vnode hook",
  [8]: "directive hook",
  [9]: "transition hook",
  [10]: "app errorHandler",
  [11]: "app warnHandler",
  [12]: "ref function",
  [13]: "async component loader",
  [14]: "scheduler flush. This is likely a Vue internals bug. Please open an issue at https://new-issue.vuejs.org/?repo=vuejs/core"
};
function callWithErrorHandling(fn, instance, type, args) {
  let res;
  try {
    res = args ? fn(...args) : fn();
  } catch (err) {
    handleError(err, instance, type);
  }
  return res;
}
function callWithAsyncErrorHandling(fn, instance, type, args) {
  if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isFunction)(fn)) {
    const res = callWithErrorHandling(fn, instance, type, args);
    if (res && (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isPromise)(res)) {
      res.catch((err) => {
        handleError(err, instance, type);
      });
    }
    return res;
  }
  const values = [];
  for (let i = 0; i < fn.length; i++) {
    values.push(callWithAsyncErrorHandling(fn[i], instance, type, args));
  }
  return values;
}
function handleError(err, instance, type, throwInDev = true) {
  const contextVNode = instance ? instance.vnode : null;
  if (instance) {
    let cur = instance.parent;
    const exposedInstance = instance.proxy;
    const errorInfo =  true ? ErrorTypeStrings[type] : 0;
    while (cur) {
      const errorCapturedHooks = cur.ec;
      if (errorCapturedHooks) {
        for (let i = 0; i < errorCapturedHooks.length; i++) {
          if (errorCapturedHooks[i](err, exposedInstance, errorInfo) === false) {
            return;
          }
        }
      }
      cur = cur.parent;
    }
    const appErrorHandler = instance.appContext.config.errorHandler;
    if (appErrorHandler) {
      callWithErrorHandling(
        appErrorHandler,
        null,
        10,
        [err, exposedInstance, errorInfo]
      );
      return;
    }
  }
  logError(err, type, contextVNode, throwInDev);
}
function logError(err, type, contextVNode, throwInDev = true) {
  if (true) {
    const info = ErrorTypeStrings[type];
    if (contextVNode) {
      pushWarningContext(contextVNode);
    }
    warn(`Unhandled error${info ? ` during execution of ${info}` : ``}`);
    if (contextVNode) {
      popWarningContext();
    }
    if (throwInDev) {
      throw err;
    } else {
      console.error(err);
    }
  } else {}
}

let isFlushing = false;
let isFlushPending = false;
const queue = [];
let flushIndex = 0;
const pendingPostFlushCbs = [];
let activePostFlushCbs = null;
let postFlushIndex = 0;
const resolvedPromise = /* @__PURE__ */ Promise.resolve();
let currentFlushPromise = null;
const RECURSION_LIMIT = 100;
function nextTick(fn) {
  const p = currentFlushPromise || resolvedPromise;
  return fn ? p.then(this ? fn.bind(this) : fn) : p;
}
function findInsertionIndex(id) {
  let start = flushIndex + 1;
  let end = queue.length;
  while (start < end) {
    const middle = start + end >>> 1;
    const middleJobId = getId(queue[middle]);
    middleJobId < id ? start = middle + 1 : end = middle;
  }
  return start;
}
function queueJob(job) {
  if (!queue.length || !queue.includes(
    job,
    isFlushing && job.allowRecurse ? flushIndex + 1 : flushIndex
  )) {
    if (job.id == null) {
      queue.push(job);
    } else {
      queue.splice(findInsertionIndex(job.id), 0, job);
    }
    queueFlush();
  }
}
function queueFlush() {
  if (!isFlushing && !isFlushPending) {
    isFlushPending = true;
    currentFlushPromise = resolvedPromise.then(flushJobs);
  }
}
function invalidateJob(job) {
  const i = queue.indexOf(job);
  if (i > flushIndex) {
    queue.splice(i, 1);
  }
}
function queuePostFlushCb(cb) {
  if (!(0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isArray)(cb)) {
    if (!activePostFlushCbs || !activePostFlushCbs.includes(
      cb,
      cb.allowRecurse ? postFlushIndex + 1 : postFlushIndex
    )) {
      pendingPostFlushCbs.push(cb);
    }
  } else {
    pendingPostFlushCbs.push(...cb);
  }
  queueFlush();
}
function flushPreFlushCbs(seen, i = isFlushing ? flushIndex + 1 : 0) {
  if (true) {
    seen = seen || /* @__PURE__ */ new Map();
  }
  for (; i < queue.length; i++) {
    const cb = queue[i];
    if (cb && cb.pre) {
      if ( true && checkRecursiveUpdates(seen, cb)) {
        continue;
      }
      queue.splice(i, 1);
      i--;
      cb();
    }
  }
}
function flushPostFlushCbs(seen) {
  if (pendingPostFlushCbs.length) {
    const deduped = [...new Set(pendingPostFlushCbs)];
    pendingPostFlushCbs.length = 0;
    if (activePostFlushCbs) {
      activePostFlushCbs.push(...deduped);
      return;
    }
    activePostFlushCbs = deduped;
    if (true) {
      seen = seen || /* @__PURE__ */ new Map();
    }
    activePostFlushCbs.sort((a, b) => getId(a) - getId(b));
    for (postFlushIndex = 0; postFlushIndex < activePostFlushCbs.length; postFlushIndex++) {
      if ( true && checkRecursiveUpdates(seen, activePostFlushCbs[postFlushIndex])) {
        continue;
      }
      activePostFlushCbs[postFlushIndex]();
    }
    activePostFlushCbs = null;
    postFlushIndex = 0;
  }
}
const getId = (job) => job.id == null ? Infinity : job.id;
const comparator = (a, b) => {
  const diff = getId(a) - getId(b);
  if (diff === 0) {
    if (a.pre && !b.pre)
      return -1;
    if (b.pre && !a.pre)
      return 1;
  }
  return diff;
};
function flushJobs(seen) {
  isFlushPending = false;
  isFlushing = true;
  if (true) {
    seen = seen || /* @__PURE__ */ new Map();
  }
  queue.sort(comparator);
  const check =  true ? (job) => checkRecursiveUpdates(seen, job) : 0;
  try {
    for (flushIndex = 0; flushIndex < queue.length; flushIndex++) {
      const job = queue[flushIndex];
      if (job && job.active !== false) {
        if ( true && check(job)) {
          continue;
        }
        callWithErrorHandling(job, null, 14);
      }
    }
  } finally {
    flushIndex = 0;
    queue.length = 0;
    flushPostFlushCbs(seen);
    isFlushing = false;
    currentFlushPromise = null;
    if (queue.length || pendingPostFlushCbs.length) {
      flushJobs(seen);
    }
  }
}
function checkRecursiveUpdates(seen, fn) {
  if (!seen.has(fn)) {
    seen.set(fn, 1);
  } else {
    const count = seen.get(fn);
    if (count > RECURSION_LIMIT) {
      const instance = fn.ownerInstance;
      const componentName = instance && getComponentName(instance.type);
      warn(
        `Maximum recursive updates exceeded${componentName ? ` in component <${componentName}>` : ``}. This means you have a reactive effect that is mutating its own dependencies and thus recursively triggering itself. Possible sources include component template, render function, updated hook or watcher source function.`
      );
      return true;
    } else {
      seen.set(fn, count + 1);
    }
  }
}

let isHmrUpdating = false;
const hmrDirtyComponents = /* @__PURE__ */ new Set();
if (true) {
  (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.getGlobalThis)().__VUE_HMR_RUNTIME__ = {
    createRecord: tryWrap(createRecord),
    rerender: tryWrap(rerender),
    reload: tryWrap(reload)
  };
}
const map = /* @__PURE__ */ new Map();
function registerHMR(instance) {
  const id = instance.type.__hmrId;
  let record = map.get(id);
  if (!record) {
    createRecord(id, instance.type);
    record = map.get(id);
  }
  record.instances.add(instance);
}
function unregisterHMR(instance) {
  map.get(instance.type.__hmrId).instances.delete(instance);
}
function createRecord(id, initialDef) {
  if (map.has(id)) {
    return false;
  }
  map.set(id, {
    initialDef: normalizeClassComponent(initialDef),
    instances: /* @__PURE__ */ new Set()
  });
  return true;
}
function normalizeClassComponent(component) {
  return isClassComponent(component) ? component.__vccOpts : component;
}
function rerender(id, newRender) {
  const record = map.get(id);
  if (!record) {
    return;
  }
  record.initialDef.render = newRender;
  [...record.instances].forEach((instance) => {
    if (newRender) {
      instance.render = newRender;
      normalizeClassComponent(instance.type).render = newRender;
    }
    instance.renderCache = [];
    isHmrUpdating = true;
    instance.update();
    isHmrUpdating = false;
  });
}
function reload(id, newComp) {
  const record = map.get(id);
  if (!record)
    return;
  newComp = normalizeClassComponent(newComp);
  updateComponentDef(record.initialDef, newComp);
  const instances = [...record.instances];
  for (const instance of instances) {
    const oldComp = normalizeClassComponent(instance.type);
    if (!hmrDirtyComponents.has(oldComp)) {
      if (oldComp !== record.initialDef) {
        updateComponentDef(oldComp, newComp);
      }
      hmrDirtyComponents.add(oldComp);
    }
    instance.appContext.propsCache.delete(instance.type);
    instance.appContext.emitsCache.delete(instance.type);
    instance.appContext.optionsCache.delete(instance.type);
    if (instance.ceReload) {
      hmrDirtyComponents.add(oldComp);
      instance.ceReload(newComp.styles);
      hmrDirtyComponents.delete(oldComp);
    } else if (instance.parent) {
      queueJob(instance.parent.update);
    } else if (instance.appContext.reload) {
      instance.appContext.reload();
    } else if (typeof window !== "undefined") {
      window.location.reload();
    } else {
      console.warn(
        "[HMR] Root or manually mounted instance modified. Full reload required."
      );
    }
  }
  queuePostFlushCb(() => {
    for (const instance of instances) {
      hmrDirtyComponents.delete(
        normalizeClassComponent(instance.type)
      );
    }
  });
}
function updateComponentDef(oldComp, newComp) {
  (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.extend)(oldComp, newComp);
  for (const key in oldComp) {
    if (key !== "__file" && !(key in newComp)) {
      delete oldComp[key];
    }
  }
}
function tryWrap(fn) {
  return (id, arg) => {
    try {
      return fn(id, arg);
    } catch (e) {
      console.error(e);
      console.warn(
        `[HMR] Something went wrong during Vue component hot-reload. Full reload required.`
      );
    }
  };
}

let devtools;
let buffer = [];
let devtoolsNotInstalled = false;
function emit$1(event, ...args) {
  if (devtools) {
    devtools.emit(event, ...args);
  } else if (!devtoolsNotInstalled) {
    buffer.push({ event, args });
  }
}
function setDevtoolsHook(hook, target) {
  var _a, _b;
  devtools = hook;
  if (devtools) {
    devtools.enabled = true;
    buffer.forEach(({ event, args }) => devtools.emit(event, ...args));
    buffer = [];
  } else if (
    // handle late devtools injection - only do this if we are in an actual
    // browser environment to avoid the timer handle stalling test runner exit
    // (#4815)
    typeof window !== "undefined" && // some envs mock window but not fully
    window.HTMLElement && // also exclude jsdom
    !((_b = (_a = window.navigator) == null ? void 0 : _a.userAgent) == null ? void 0 : _b.includes("jsdom"))
  ) {
    const replay = target.__VUE_DEVTOOLS_HOOK_REPLAY__ = target.__VUE_DEVTOOLS_HOOK_REPLAY__ || [];
    replay.push((newHook) => {
      setDevtoolsHook(newHook, target);
    });
    setTimeout(() => {
      if (!devtools) {
        target.__VUE_DEVTOOLS_HOOK_REPLAY__ = null;
        devtoolsNotInstalled = true;
        buffer = [];
      }
    }, 3e3);
  } else {
    devtoolsNotInstalled = true;
    buffer = [];
  }
}
function devtoolsInitApp(app, version) {
  emit$1("app:init" /* APP_INIT */, app, version, {
    Fragment,
    Text,
    Comment,
    Static
  });
}
function devtoolsUnmountApp(app) {
  emit$1("app:unmount" /* APP_UNMOUNT */, app);
}
const devtoolsComponentAdded = /* @__PURE__ */ createDevtoolsComponentHook(
  "component:added" /* COMPONENT_ADDED */
);
const devtoolsComponentUpdated = /* @__PURE__ */ createDevtoolsComponentHook("component:updated" /* COMPONENT_UPDATED */);
const _devtoolsComponentRemoved = /* @__PURE__ */ createDevtoolsComponentHook(
  "component:removed" /* COMPONENT_REMOVED */
);
const devtoolsComponentRemoved = (component) => {
  if (devtools && typeof devtools.cleanupBuffer === "function" && // remove the component if it wasn't buffered
  !devtools.cleanupBuffer(component)) {
    _devtoolsComponentRemoved(component);
  }
};
function createDevtoolsComponentHook(hook) {
  return (component) => {
    emit$1(
      hook,
      component.appContext.app,
      component.uid,
      component.parent ? component.parent.uid : void 0,
      component
    );
  };
}
const devtoolsPerfStart = /* @__PURE__ */ createDevtoolsPerformanceHook(
  "perf:start" /* PERFORMANCE_START */
);
const devtoolsPerfEnd = /* @__PURE__ */ createDevtoolsPerformanceHook(
  "perf:end" /* PERFORMANCE_END */
);
function createDevtoolsPerformanceHook(hook) {
  return (component, type, time) => {
    emit$1(hook, component.appContext.app, component.uid, component, type, time);
  };
}
function devtoolsComponentEmit(component, event, params) {
  emit$1(
    "component:emit" /* COMPONENT_EMIT */,
    component.appContext.app,
    component,
    event,
    params
  );
}

function emit(instance, event, ...rawArgs) {
  if (instance.isUnmounted)
    return;
  const props = instance.vnode.props || _vue_shared__WEBPACK_IMPORTED_MODULE_1__.EMPTY_OBJ;
  if (true) {
    const {
      emitsOptions,
      propsOptions: [propsOptions]
    } = instance;
    if (emitsOptions) {
      if (!(event in emitsOptions) && true) {
        if (!propsOptions || !((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.toHandlerKey)(event) in propsOptions)) {
          warn(
            `Component emitted event "${event}" but it is neither declared in the emits option nor as an "${(0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.toHandlerKey)(event)}" prop.`
          );
        }
      } else {
        const validator = emitsOptions[event];
        if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isFunction)(validator)) {
          const isValid = validator(...rawArgs);
          if (!isValid) {
            warn(
              `Invalid event arguments: event validation failed for event "${event}".`
            );
          }
        }
      }
    }
  }
  let args = rawArgs;
  const isModelListener = event.startsWith("update:");
  const modelArg = isModelListener && event.slice(7);
  if (modelArg && modelArg in props) {
    const modifiersKey = `${modelArg === "modelValue" ? "model" : modelArg}Modifiers`;
    const { number, trim } = props[modifiersKey] || _vue_shared__WEBPACK_IMPORTED_MODULE_1__.EMPTY_OBJ;
    if (trim) {
      args = rawArgs.map((a) => (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isString)(a) ? a.trim() : a);
    }
    if (number) {
      args = rawArgs.map(_vue_shared__WEBPACK_IMPORTED_MODULE_1__.looseToNumber);
    }
  }
  if (true) {
    devtoolsComponentEmit(instance, event, args);
  }
  if (true) {
    const lowerCaseEvent = event.toLowerCase();
    if (lowerCaseEvent !== event && props[(0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.toHandlerKey)(lowerCaseEvent)]) {
      warn(
        `Event "${lowerCaseEvent}" is emitted in component ${formatComponentName(
          instance,
          instance.type
        )} but the handler is registered for "${event}". Note that HTML attributes are case-insensitive and you cannot use v-on to listen to camelCase events when using in-DOM templates. You should probably use "${(0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.hyphenate)(event)}" instead of "${event}".`
      );
    }
  }
  let handlerName;
  let handler = props[handlerName = (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.toHandlerKey)(event)] || // also try camelCase event handler (#2249)
  props[handlerName = (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.toHandlerKey)((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.camelize)(event))];
  if (!handler && isModelListener) {
    handler = props[handlerName = (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.toHandlerKey)((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.hyphenate)(event))];
  }
  if (handler) {
    callWithAsyncErrorHandling(
      handler,
      instance,
      6,
      args
    );
  }
  const onceHandler = props[handlerName + `Once`];
  if (onceHandler) {
    if (!instance.emitted) {
      instance.emitted = {};
    } else if (instance.emitted[handlerName]) {
      return;
    }
    instance.emitted[handlerName] = true;
    callWithAsyncErrorHandling(
      onceHandler,
      instance,
      6,
      args
    );
  }
}
function normalizeEmitsOptions(comp, appContext, asMixin = false) {
  const cache = appContext.emitsCache;
  const cached = cache.get(comp);
  if (cached !== void 0) {
    return cached;
  }
  const raw = comp.emits;
  let normalized = {};
  let hasExtends = false;
  if ( true && !(0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isFunction)(comp)) {
    const extendEmits = (raw2) => {
      const normalizedFromExtend = normalizeEmitsOptions(raw2, appContext, true);
      if (normalizedFromExtend) {
        hasExtends = true;
        (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.extend)(normalized, normalizedFromExtend);
      }
    };
    if (!asMixin && appContext.mixins.length) {
      appContext.mixins.forEach(extendEmits);
    }
    if (comp.extends) {
      extendEmits(comp.extends);
    }
    if (comp.mixins) {
      comp.mixins.forEach(extendEmits);
    }
  }
  if (!raw && !hasExtends) {
    if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isObject)(comp)) {
      cache.set(comp, null);
    }
    return null;
  }
  if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isArray)(raw)) {
    raw.forEach((key) => normalized[key] = null);
  } else {
    (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.extend)(normalized, raw);
  }
  if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isObject)(comp)) {
    cache.set(comp, normalized);
  }
  return normalized;
}
function isEmitListener(options, key) {
  if (!options || !(0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isOn)(key)) {
    return false;
  }
  key = key.slice(2).replace(/Once$/, "");
  return (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.hasOwn)(options, key[0].toLowerCase() + key.slice(1)) || (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.hasOwn)(options, (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.hyphenate)(key)) || (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.hasOwn)(options, key);
}

let currentRenderingInstance = null;
let currentScopeId = null;
function setCurrentRenderingInstance(instance) {
  const prev = currentRenderingInstance;
  currentRenderingInstance = instance;
  currentScopeId = instance && instance.type.__scopeId || null;
  return prev;
}
function pushScopeId(id) {
  currentScopeId = id;
}
function popScopeId() {
  currentScopeId = null;
}
const withScopeId = (_id) => withCtx;
function withCtx(fn, ctx = currentRenderingInstance, isNonScopedSlot) {
  if (!ctx)
    return fn;
  if (fn._n) {
    return fn;
  }
  const renderFnWithContext = (...args) => {
    if (renderFnWithContext._d) {
      setBlockTracking(-1);
    }
    const prevInstance = setCurrentRenderingInstance(ctx);
    let res;
    try {
      res = fn(...args);
    } finally {
      setCurrentRenderingInstance(prevInstance);
      if (renderFnWithContext._d) {
        setBlockTracking(1);
      }
    }
    if (true) {
      devtoolsComponentUpdated(ctx);
    }
    return res;
  };
  renderFnWithContext._n = true;
  renderFnWithContext._c = true;
  renderFnWithContext._d = true;
  return renderFnWithContext;
}

let accessedAttrs = false;
function markAttrsAccessed() {
  accessedAttrs = true;
}
function renderComponentRoot(instance) {
  const {
    type: Component,
    vnode,
    proxy,
    withProxy,
    props,
    propsOptions: [propsOptions],
    slots,
    attrs,
    emit,
    render,
    renderCache,
    data,
    setupState,
    ctx,
    inheritAttrs
  } = instance;
  let result;
  let fallthroughAttrs;
  const prev = setCurrentRenderingInstance(instance);
  if (true) {
    accessedAttrs = false;
  }
  try {
    if (vnode.shapeFlag & 4) {
      const proxyToUse = withProxy || proxy;
      result = normalizeVNode(
        render.call(
          proxyToUse,
          proxyToUse,
          renderCache,
          props,
          setupState,
          data,
          ctx
        )
      );
      fallthroughAttrs = attrs;
    } else {
      const render2 = Component;
      if ( true && attrs === props) {
        markAttrsAccessed();
      }
      result = normalizeVNode(
        render2.length > 1 ? render2(
          props,
           true ? {
            get attrs() {
              markAttrsAccessed();
              return attrs;
            },
            slots,
            emit
          } : 0
        ) : render2(
          props,
          null
          /* we know it doesn't need it */
        )
      );
      fallthroughAttrs = Component.props ? attrs : getFunctionalFallthrough(attrs);
    }
  } catch (err) {
    blockStack.length = 0;
    handleError(err, instance, 1);
    result = createVNode(Comment);
  }
  let root = result;
  let setRoot = void 0;
  if ( true && result.patchFlag > 0 && result.patchFlag & 2048) {
    [root, setRoot] = getChildRoot(result);
  }
  if (fallthroughAttrs && inheritAttrs !== false) {
    const keys = Object.keys(fallthroughAttrs);
    const { shapeFlag } = root;
    if (keys.length) {
      if (shapeFlag & (1 | 6)) {
        if (propsOptions && keys.some(_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isModelListener)) {
          fallthroughAttrs = filterModelListeners(
            fallthroughAttrs,
            propsOptions
          );
        }
        root = cloneVNode(root, fallthroughAttrs);
      } else if ( true && !accessedAttrs && root.type !== Comment) {
        const allAttrs = Object.keys(attrs);
        const eventAttrs = [];
        const extraAttrs = [];
        for (let i = 0, l = allAttrs.length; i < l; i++) {
          const key = allAttrs[i];
          if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isOn)(key)) {
            if (!(0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isModelListener)(key)) {
              eventAttrs.push(key[2].toLowerCase() + key.slice(3));
            }
          } else {
            extraAttrs.push(key);
          }
        }
        if (extraAttrs.length) {
          warn(
            `Extraneous non-props attributes (${extraAttrs.join(", ")}) were passed to component but could not be automatically inherited because component renders fragment or text root nodes.`
          );
        }
        if (eventAttrs.length) {
          warn(
            `Extraneous non-emits event listeners (${eventAttrs.join(", ")}) were passed to component but could not be automatically inherited because component renders fragment or text root nodes. If the listener is intended to be a component custom event listener only, declare it using the "emits" option.`
          );
        }
      }
    }
  }
  if (vnode.dirs) {
    if ( true && !isElementRoot(root)) {
      warn(
        `Runtime directive used on component with non-element root node. The directives will not function as intended.`
      );
    }
    root = cloneVNode(root);
    root.dirs = root.dirs ? root.dirs.concat(vnode.dirs) : vnode.dirs;
  }
  if (vnode.transition) {
    if ( true && !isElementRoot(root)) {
      warn(
        `Component inside <Transition> renders non-element root node that cannot be animated.`
      );
    }
    root.transition = vnode.transition;
  }
  if ( true && setRoot) {
    setRoot(root);
  } else {
    result = root;
  }
  setCurrentRenderingInstance(prev);
  return result;
}
const getChildRoot = (vnode) => {
  const rawChildren = vnode.children;
  const dynamicChildren = vnode.dynamicChildren;
  const childRoot = filterSingleRoot(rawChildren);
  if (!childRoot) {
    return [vnode, void 0];
  }
  const index = rawChildren.indexOf(childRoot);
  const dynamicIndex = dynamicChildren ? dynamicChildren.indexOf(childRoot) : -1;
  const setRoot = (updatedRoot) => {
    rawChildren[index] = updatedRoot;
    if (dynamicChildren) {
      if (dynamicIndex > -1) {
        dynamicChildren[dynamicIndex] = updatedRoot;
      } else if (updatedRoot.patchFlag > 0) {
        vnode.dynamicChildren = [...dynamicChildren, updatedRoot];
      }
    }
  };
  return [normalizeVNode(childRoot), setRoot];
};
function filterSingleRoot(children) {
  let singleRoot;
  for (let i = 0; i < children.length; i++) {
    const child = children[i];
    if (isVNode(child)) {
      if (child.type !== Comment || child.children === "v-if") {
        if (singleRoot) {
          return;
        } else {
          singleRoot = child;
        }
      }
    } else {
      return;
    }
  }
  return singleRoot;
}
const getFunctionalFallthrough = (attrs) => {
  let res;
  for (const key in attrs) {
    if (key === "class" || key === "style" || (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isOn)(key)) {
      (res || (res = {}))[key] = attrs[key];
    }
  }
  return res;
};
const filterModelListeners = (attrs, props) => {
  const res = {};
  for (const key in attrs) {
    if (!(0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isModelListener)(key) || !(key.slice(9) in props)) {
      res[key] = attrs[key];
    }
  }
  return res;
};
const isElementRoot = (vnode) => {
  return vnode.shapeFlag & (6 | 1) || vnode.type === Comment;
};
function shouldUpdateComponent(prevVNode, nextVNode, optimized) {
  const { props: prevProps, children: prevChildren, component } = prevVNode;
  const { props: nextProps, children: nextChildren, patchFlag } = nextVNode;
  const emits = component.emitsOptions;
  if ( true && (prevChildren || nextChildren) && isHmrUpdating) {
    return true;
  }
  if (nextVNode.dirs || nextVNode.transition) {
    return true;
  }
  if (optimized && patchFlag >= 0) {
    if (patchFlag & 1024) {
      return true;
    }
    if (patchFlag & 16) {
      if (!prevProps) {
        return !!nextProps;
      }
      return hasPropsChanged(prevProps, nextProps, emits);
    } else if (patchFlag & 8) {
      const dynamicProps = nextVNode.dynamicProps;
      for (let i = 0; i < dynamicProps.length; i++) {
        const key = dynamicProps[i];
        if (nextProps[key] !== prevProps[key] && !isEmitListener(emits, key)) {
          return true;
        }
      }
    }
  } else {
    if (prevChildren || nextChildren) {
      if (!nextChildren || !nextChildren.$stable) {
        return true;
      }
    }
    if (prevProps === nextProps) {
      return false;
    }
    if (!prevProps) {
      return !!nextProps;
    }
    if (!nextProps) {
      return true;
    }
    return hasPropsChanged(prevProps, nextProps, emits);
  }
  return false;
}
function hasPropsChanged(prevProps, nextProps, emitsOptions) {
  const nextKeys = Object.keys(nextProps);
  if (nextKeys.length !== Object.keys(prevProps).length) {
    return true;
  }
  for (let i = 0; i < nextKeys.length; i++) {
    const key = nextKeys[i];
    if (nextProps[key] !== prevProps[key] && !isEmitListener(emitsOptions, key)) {
      return true;
    }
  }
  return false;
}
function updateHOCHostEl({ vnode, parent }, el) {
  while (parent && parent.subTree === vnode) {
    (vnode = parent.vnode).el = el;
    parent = parent.parent;
  }
}

const isSuspense = (type) => type.__isSuspense;
const SuspenseImpl = {
  name: "Suspense",
  // In order to make Suspense tree-shakable, we need to avoid importing it
  // directly in the renderer. The renderer checks for the __isSuspense flag
  // on a vnode's type and calls the `process` method, passing in renderer
  // internals.
  __isSuspense: true,
  process(n1, n2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized, rendererInternals) {
    if (n1 == null) {
      mountSuspense(
        n2,
        container,
        anchor,
        parentComponent,
        parentSuspense,
        isSVG,
        slotScopeIds,
        optimized,
        rendererInternals
      );
    } else {
      patchSuspense(
        n1,
        n2,
        container,
        anchor,
        parentComponent,
        isSVG,
        slotScopeIds,
        optimized,
        rendererInternals
      );
    }
  },
  hydrate: hydrateSuspense,
  create: createSuspenseBoundary,
  normalize: normalizeSuspenseChildren
};
const Suspense = SuspenseImpl ;
function triggerEvent(vnode, name) {
  const eventListener = vnode.props && vnode.props[name];
  if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isFunction)(eventListener)) {
    eventListener();
  }
}
function mountSuspense(vnode, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized, rendererInternals) {
  const {
    p: patch,
    o: { createElement }
  } = rendererInternals;
  const hiddenContainer = createElement("div");
  const suspense = vnode.suspense = createSuspenseBoundary(
    vnode,
    parentSuspense,
    parentComponent,
    container,
    hiddenContainer,
    anchor,
    isSVG,
    slotScopeIds,
    optimized,
    rendererInternals
  );
  patch(
    null,
    suspense.pendingBranch = vnode.ssContent,
    hiddenContainer,
    null,
    parentComponent,
    suspense,
    isSVG,
    slotScopeIds
  );
  if (suspense.deps > 0) {
    triggerEvent(vnode, "onPending");
    triggerEvent(vnode, "onFallback");
    patch(
      null,
      vnode.ssFallback,
      container,
      anchor,
      parentComponent,
      null,
      // fallback tree will not have suspense context
      isSVG,
      slotScopeIds
    );
    setActiveBranch(suspense, vnode.ssFallback);
  } else {
    suspense.resolve(false, true);
  }
}
function patchSuspense(n1, n2, container, anchor, parentComponent, isSVG, slotScopeIds, optimized, { p: patch, um: unmount, o: { createElement } }) {
  const suspense = n2.suspense = n1.suspense;
  suspense.vnode = n2;
  n2.el = n1.el;
  const newBranch = n2.ssContent;
  const newFallback = n2.ssFallback;
  const { activeBranch, pendingBranch, isInFallback, isHydrating } = suspense;
  if (pendingBranch) {
    suspense.pendingBranch = newBranch;
    if (isSameVNodeType(newBranch, pendingBranch)) {
      patch(
        pendingBranch,
        newBranch,
        suspense.hiddenContainer,
        null,
        parentComponent,
        suspense,
        isSVG,
        slotScopeIds,
        optimized
      );
      if (suspense.deps <= 0) {
        suspense.resolve();
      } else if (isInFallback) {
        patch(
          activeBranch,
          newFallback,
          container,
          anchor,
          parentComponent,
          null,
          // fallback tree will not have suspense context
          isSVG,
          slotScopeIds,
          optimized
        );
        setActiveBranch(suspense, newFallback);
      }
    } else {
      suspense.pendingId++;
      if (isHydrating) {
        suspense.isHydrating = false;
        suspense.activeBranch = pendingBranch;
      } else {
        unmount(pendingBranch, parentComponent, suspense);
      }
      suspense.deps = 0;
      suspense.effects.length = 0;
      suspense.hiddenContainer = createElement("div");
      if (isInFallback) {
        patch(
          null,
          newBranch,
          suspense.hiddenContainer,
          null,
          parentComponent,
          suspense,
          isSVG,
          slotScopeIds,
          optimized
        );
        if (suspense.deps <= 0) {
          suspense.resolve();
        } else {
          patch(
            activeBranch,
            newFallback,
            container,
            anchor,
            parentComponent,
            null,
            // fallback tree will not have suspense context
            isSVG,
            slotScopeIds,
            optimized
          );
          setActiveBranch(suspense, newFallback);
        }
      } else if (activeBranch && isSameVNodeType(newBranch, activeBranch)) {
        patch(
          activeBranch,
          newBranch,
          container,
          anchor,
          parentComponent,
          suspense,
          isSVG,
          slotScopeIds,
          optimized
        );
        suspense.resolve(true);
      } else {
        patch(
          null,
          newBranch,
          suspense.hiddenContainer,
          null,
          parentComponent,
          suspense,
          isSVG,
          slotScopeIds,
          optimized
        );
        if (suspense.deps <= 0) {
          suspense.resolve();
        }
      }
    }
  } else {
    if (activeBranch && isSameVNodeType(newBranch, activeBranch)) {
      patch(
        activeBranch,
        newBranch,
        container,
        anchor,
        parentComponent,
        suspense,
        isSVG,
        slotScopeIds,
        optimized
      );
      setActiveBranch(suspense, newBranch);
    } else {
      triggerEvent(n2, "onPending");
      suspense.pendingBranch = newBranch;
      suspense.pendingId++;
      patch(
        null,
        newBranch,
        suspense.hiddenContainer,
        null,
        parentComponent,
        suspense,
        isSVG,
        slotScopeIds,
        optimized
      );
      if (suspense.deps <= 0) {
        suspense.resolve();
      } else {
        const { timeout, pendingId } = suspense;
        if (timeout > 0) {
          setTimeout(() => {
            if (suspense.pendingId === pendingId) {
              suspense.fallback(newFallback);
            }
          }, timeout);
        } else if (timeout === 0) {
          suspense.fallback(newFallback);
        }
      }
    }
  }
}
let hasWarned = false;
function createSuspenseBoundary(vnode, parentSuspense, parentComponent, container, hiddenContainer, anchor, isSVG, slotScopeIds, optimized, rendererInternals, isHydrating = false) {
  if ( true && !hasWarned) {
    hasWarned = true;
    console[console.info ? "info" : "log"](
      `<Suspense> is an experimental feature and its API will likely change.`
    );
  }
  const {
    p: patch,
    m: move,
    um: unmount,
    n: next,
    o: { parentNode, remove }
  } = rendererInternals;
  let parentSuspenseId;
  const isSuspensible = isVNodeSuspensible(vnode);
  if (isSuspensible) {
    if (parentSuspense == null ? void 0 : parentSuspense.pendingBranch) {
      parentSuspenseId = parentSuspense.pendingId;
      parentSuspense.deps++;
    }
  }
  const timeout = vnode.props ? (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.toNumber)(vnode.props.timeout) : void 0;
  if (true) {
    assertNumber(timeout, `Suspense timeout`);
  }
  const suspense = {
    vnode,
    parent: parentSuspense,
    parentComponent,
    isSVG,
    container,
    hiddenContainer,
    anchor,
    deps: 0,
    pendingId: 0,
    timeout: typeof timeout === "number" ? timeout : -1,
    activeBranch: null,
    pendingBranch: null,
    isInFallback: true,
    isHydrating,
    isUnmounted: false,
    effects: [],
    resolve(resume = false, sync = false) {
      if (true) {
        if (!resume && !suspense.pendingBranch) {
          throw new Error(
            `suspense.resolve() is called without a pending branch.`
          );
        }
        if (suspense.isUnmounted) {
          throw new Error(
            `suspense.resolve() is called on an already unmounted suspense boundary.`
          );
        }
      }
      const {
        vnode: vnode2,
        activeBranch,
        pendingBranch,
        pendingId,
        effects,
        parentComponent: parentComponent2,
        container: container2
      } = suspense;
      if (suspense.isHydrating) {
        suspense.isHydrating = false;
      } else if (!resume) {
        const delayEnter = activeBranch && pendingBranch.transition && pendingBranch.transition.mode === "out-in";
        if (delayEnter) {
          activeBranch.transition.afterLeave = () => {
            if (pendingId === suspense.pendingId) {
              move(pendingBranch, container2, anchor2, 0);
            }
          };
        }
        let { anchor: anchor2 } = suspense;
        if (activeBranch) {
          anchor2 = next(activeBranch);
          unmount(activeBranch, parentComponent2, suspense, true);
        }
        if (!delayEnter) {
          move(pendingBranch, container2, anchor2, 0);
        }
      }
      setActiveBranch(suspense, pendingBranch);
      suspense.pendingBranch = null;
      suspense.isInFallback = false;
      let parent = suspense.parent;
      let hasUnresolvedAncestor = false;
      while (parent) {
        if (parent.pendingBranch) {
          parent.effects.push(...effects);
          hasUnresolvedAncestor = true;
          break;
        }
        parent = parent.parent;
      }
      if (!hasUnresolvedAncestor) {
        queuePostFlushCb(effects);
      }
      suspense.effects = [];
      if (isSuspensible) {
        if (parentSuspense && parentSuspense.pendingBranch && parentSuspenseId === parentSuspense.pendingId) {
          parentSuspense.deps--;
          if (parentSuspense.deps === 0 && !sync) {
            parentSuspense.resolve();
          }
        }
      }
      triggerEvent(vnode2, "onResolve");
    },
    fallback(fallbackVNode) {
      if (!suspense.pendingBranch) {
        return;
      }
      const { vnode: vnode2, activeBranch, parentComponent: parentComponent2, container: container2, isSVG: isSVG2 } = suspense;
      triggerEvent(vnode2, "onFallback");
      const anchor2 = next(activeBranch);
      const mountFallback = () => {
        if (!suspense.isInFallback) {
          return;
        }
        patch(
          null,
          fallbackVNode,
          container2,
          anchor2,
          parentComponent2,
          null,
          // fallback tree will not have suspense context
          isSVG2,
          slotScopeIds,
          optimized
        );
        setActiveBranch(suspense, fallbackVNode);
      };
      const delayEnter = fallbackVNode.transition && fallbackVNode.transition.mode === "out-in";
      if (delayEnter) {
        activeBranch.transition.afterLeave = mountFallback;
      }
      suspense.isInFallback = true;
      unmount(
        activeBranch,
        parentComponent2,
        null,
        // no suspense so unmount hooks fire now
        true
        // shouldRemove
      );
      if (!delayEnter) {
        mountFallback();
      }
    },
    move(container2, anchor2, type) {
      suspense.activeBranch && move(suspense.activeBranch, container2, anchor2, type);
      suspense.container = container2;
    },
    next() {
      return suspense.activeBranch && next(suspense.activeBranch);
    },
    registerDep(instance, setupRenderEffect) {
      const isInPendingSuspense = !!suspense.pendingBranch;
      if (isInPendingSuspense) {
        suspense.deps++;
      }
      const hydratedEl = instance.vnode.el;
      instance.asyncDep.catch((err) => {
        handleError(err, instance, 0);
      }).then((asyncSetupResult) => {
        if (instance.isUnmounted || suspense.isUnmounted || suspense.pendingId !== instance.suspenseId) {
          return;
        }
        instance.asyncResolved = true;
        const { vnode: vnode2 } = instance;
        if (true) {
          pushWarningContext(vnode2);
        }
        handleSetupResult(instance, asyncSetupResult, false);
        if (hydratedEl) {
          vnode2.el = hydratedEl;
        }
        const placeholder = !hydratedEl && instance.subTree.el;
        setupRenderEffect(
          instance,
          vnode2,
          // component may have been moved before resolve.
          // if this is not a hydration, instance.subTree will be the comment
          // placeholder.
          parentNode(hydratedEl || instance.subTree.el),
          // anchor will not be used if this is hydration, so only need to
          // consider the comment placeholder case.
          hydratedEl ? null : next(instance.subTree),
          suspense,
          isSVG,
          optimized
        );
        if (placeholder) {
          remove(placeholder);
        }
        updateHOCHostEl(instance, vnode2.el);
        if (true) {
          popWarningContext();
        }
        if (isInPendingSuspense && --suspense.deps === 0) {
          suspense.resolve();
        }
      });
    },
    unmount(parentSuspense2, doRemove) {
      suspense.isUnmounted = true;
      if (suspense.activeBranch) {
        unmount(
          suspense.activeBranch,
          parentComponent,
          parentSuspense2,
          doRemove
        );
      }
      if (suspense.pendingBranch) {
        unmount(
          suspense.pendingBranch,
          parentComponent,
          parentSuspense2,
          doRemove
        );
      }
    }
  };
  return suspense;
}
function hydrateSuspense(node, vnode, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized, rendererInternals, hydrateNode) {
  const suspense = vnode.suspense = createSuspenseBoundary(
    vnode,
    parentSuspense,
    parentComponent,
    node.parentNode,
    document.createElement("div"),
    null,
    isSVG,
    slotScopeIds,
    optimized,
    rendererInternals,
    true
    /* hydrating */
  );
  const result = hydrateNode(
    node,
    suspense.pendingBranch = vnode.ssContent,
    parentComponent,
    suspense,
    slotScopeIds,
    optimized
  );
  if (suspense.deps === 0) {
    suspense.resolve(false, true);
  }
  return result;
}
function normalizeSuspenseChildren(vnode) {
  const { shapeFlag, children } = vnode;
  const isSlotChildren = shapeFlag & 32;
  vnode.ssContent = normalizeSuspenseSlot(
    isSlotChildren ? children.default : children
  );
  vnode.ssFallback = isSlotChildren ? normalizeSuspenseSlot(children.fallback) : createVNode(Comment);
}
function normalizeSuspenseSlot(s) {
  let block;
  if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isFunction)(s)) {
    const trackBlock = isBlockTreeEnabled && s._c;
    if (trackBlock) {
      s._d = false;
      openBlock();
    }
    s = s();
    if (trackBlock) {
      s._d = true;
      block = currentBlock;
      closeBlock();
    }
  }
  if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isArray)(s)) {
    const singleChild = filterSingleRoot(s);
    if ( true && !singleChild) {
      warn(`<Suspense> slots expect a single root node.`);
    }
    s = singleChild;
  }
  s = normalizeVNode(s);
  if (block && !s.dynamicChildren) {
    s.dynamicChildren = block.filter((c) => c !== s);
  }
  return s;
}
function queueEffectWithSuspense(fn, suspense) {
  if (suspense && suspense.pendingBranch) {
    if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isArray)(fn)) {
      suspense.effects.push(...fn);
    } else {
      suspense.effects.push(fn);
    }
  } else {
    queuePostFlushCb(fn);
  }
}
function setActiveBranch(suspense, branch) {
  suspense.activeBranch = branch;
  const { vnode, parentComponent } = suspense;
  const el = vnode.el = branch.el;
  if (parentComponent && parentComponent.subTree === vnode) {
    parentComponent.vnode.el = el;
    updateHOCHostEl(parentComponent, el);
  }
}
function isVNodeSuspensible(vnode) {
  var _a;
  return ((_a = vnode.props) == null ? void 0 : _a.suspensible) != null && vnode.props.suspensible !== false;
}

function watchEffect(effect, options) {
  return doWatch(effect, null, options);
}
function watchPostEffect(effect, options) {
  return doWatch(
    effect,
    null,
     true ? (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.extend)({}, options, { flush: "post" }) : 0
  );
}
function watchSyncEffect(effect, options) {
  return doWatch(
    effect,
    null,
     true ? (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.extend)({}, options, { flush: "sync" }) : 0
  );
}
const INITIAL_WATCHER_VALUE = {};
function watch(source, cb, options) {
  if ( true && !(0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isFunction)(cb)) {
    warn(
      `\`watch(fn, options?)\` signature has been moved to a separate API. Use \`watchEffect(fn, options?)\` instead. \`watch\` now only supports \`watch(source, cb, options?) signature.`
    );
  }
  return doWatch(source, cb, options);
}
function doWatch(source, cb, { immediate, deep, flush, onTrack, onTrigger } = _vue_shared__WEBPACK_IMPORTED_MODULE_1__.EMPTY_OBJ) {
  var _a;
  if ( true && !cb) {
    if (immediate !== void 0) {
      warn(
        `watch() "immediate" option is only respected when using the watch(source, callback, options?) signature.`
      );
    }
    if (deep !== void 0) {
      warn(
        `watch() "deep" option is only respected when using the watch(source, callback, options?) signature.`
      );
    }
  }
  const warnInvalidSource = (s) => {
    warn(
      `Invalid watch source: `,
      s,
      `A watch source can only be a getter/effect function, a ref, a reactive object, or an array of these types.`
    );
  };
  const instance = (0,_vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.getCurrentScope)() === ((_a = currentInstance) == null ? void 0 : _a.scope) ? currentInstance : null;
  let getter;
  let forceTrigger = false;
  let isMultiSource = false;
  if ((0,_vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.isRef)(source)) {
    getter = () => source.value;
    forceTrigger = (0,_vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.isShallow)(source);
  } else if ((0,_vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.isReactive)(source)) {
    getter = () => source;
    deep = true;
  } else if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isArray)(source)) {
    isMultiSource = true;
    forceTrigger = source.some((s) => (0,_vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.isReactive)(s) || (0,_vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.isShallow)(s));
    getter = () => source.map((s) => {
      if ((0,_vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.isRef)(s)) {
        return s.value;
      } else if ((0,_vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.isReactive)(s)) {
        return traverse(s);
      } else if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isFunction)(s)) {
        return callWithErrorHandling(s, instance, 2);
      } else {
         true && warnInvalidSource(s);
      }
    });
  } else if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isFunction)(source)) {
    if (cb) {
      getter = () => callWithErrorHandling(source, instance, 2);
    } else {
      getter = () => {
        if (instance && instance.isUnmounted) {
          return;
        }
        if (cleanup) {
          cleanup();
        }
        return callWithAsyncErrorHandling(
          source,
          instance,
          3,
          [onCleanup]
        );
      };
    }
  } else {
    getter = _vue_shared__WEBPACK_IMPORTED_MODULE_1__.NOOP;
     true && warnInvalidSource(source);
  }
  if (cb && deep) {
    const baseGetter = getter;
    getter = () => traverse(baseGetter());
  }
  let cleanup;
  let onCleanup = (fn) => {
    cleanup = effect.onStop = () => {
      callWithErrorHandling(fn, instance, 4);
    };
  };
  let ssrCleanup;
  if (isInSSRComponentSetup) {
    onCleanup = _vue_shared__WEBPACK_IMPORTED_MODULE_1__.NOOP;
    if (!cb) {
      getter();
    } else if (immediate) {
      callWithAsyncErrorHandling(cb, instance, 3, [
        getter(),
        isMultiSource ? [] : void 0,
        onCleanup
      ]);
    }
    if (flush === "sync") {
      const ctx = useSSRContext();
      ssrCleanup = ctx.__watcherHandles || (ctx.__watcherHandles = []);
    } else {
      return _vue_shared__WEBPACK_IMPORTED_MODULE_1__.NOOP;
    }
  }
  let oldValue = isMultiSource ? new Array(source.length).fill(INITIAL_WATCHER_VALUE) : INITIAL_WATCHER_VALUE;
  const job = () => {
    if (!effect.active) {
      return;
    }
    if (cb) {
      const newValue = effect.run();
      if (deep || forceTrigger || (isMultiSource ? newValue.some(
        (v, i) => (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.hasChanged)(v, oldValue[i])
      ) : (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.hasChanged)(newValue, oldValue)) || false) {
        if (cleanup) {
          cleanup();
        }
        callWithAsyncErrorHandling(cb, instance, 3, [
          newValue,
          // pass undefined as the old value when it's changed for the first time
          oldValue === INITIAL_WATCHER_VALUE ? void 0 : isMultiSource && oldValue[0] === INITIAL_WATCHER_VALUE ? [] : oldValue,
          onCleanup
        ]);
        oldValue = newValue;
      }
    } else {
      effect.run();
    }
  };
  job.allowRecurse = !!cb;
  let scheduler;
  if (flush === "sync") {
    scheduler = job;
  } else if (flush === "post") {
    scheduler = () => queuePostRenderEffect(job, instance && instance.suspense);
  } else {
    job.pre = true;
    if (instance)
      job.id = instance.uid;
    scheduler = () => queueJob(job);
  }
  const effect = new _vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.ReactiveEffect(getter, scheduler);
  if (true) {
    effect.onTrack = onTrack;
    effect.onTrigger = onTrigger;
  }
  if (cb) {
    if (immediate) {
      job();
    } else {
      oldValue = effect.run();
    }
  } else if (flush === "post") {
    queuePostRenderEffect(
      effect.run.bind(effect),
      instance && instance.suspense
    );
  } else {
    effect.run();
  }
  const unwatch = () => {
    effect.stop();
    if (instance && instance.scope) {
      (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.remove)(instance.scope.effects, effect);
    }
  };
  if (ssrCleanup)
    ssrCleanup.push(unwatch);
  return unwatch;
}
function instanceWatch(source, value, options) {
  const publicThis = this.proxy;
  const getter = (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isString)(source) ? source.includes(".") ? createPathGetter(publicThis, source) : () => publicThis[source] : source.bind(publicThis, publicThis);
  let cb;
  if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isFunction)(value)) {
    cb = value;
  } else {
    cb = value.handler;
    options = value;
  }
  const cur = currentInstance;
  setCurrentInstance(this);
  const res = doWatch(getter, cb.bind(publicThis), options);
  if (cur) {
    setCurrentInstance(cur);
  } else {
    unsetCurrentInstance();
  }
  return res;
}
function createPathGetter(ctx, path) {
  const segments = path.split(".");
  return () => {
    let cur = ctx;
    for (let i = 0; i < segments.length && cur; i++) {
      cur = cur[segments[i]];
    }
    return cur;
  };
}
function traverse(value, seen) {
  if (!(0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isObject)(value) || value["__v_skip"]) {
    return value;
  }
  seen = seen || /* @__PURE__ */ new Set();
  if (seen.has(value)) {
    return value;
  }
  seen.add(value);
  if ((0,_vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.isRef)(value)) {
    traverse(value.value, seen);
  } else if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isArray)(value)) {
    for (let i = 0; i < value.length; i++) {
      traverse(value[i], seen);
    }
  } else if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isSet)(value) || (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isMap)(value)) {
    value.forEach((v) => {
      traverse(v, seen);
    });
  } else if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isPlainObject)(value)) {
    for (const key in value) {
      traverse(value[key], seen);
    }
  }
  return value;
}

function validateDirectiveName(name) {
  if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isBuiltInDirective)(name)) {
    warn("Do not use built-in directive ids as custom directive id: " + name);
  }
}
function withDirectives(vnode, directives) {
  const internalInstance = currentRenderingInstance;
  if (internalInstance === null) {
     true && warn(`withDirectives can only be used inside render functions.`);
    return vnode;
  }
  const instance = getExposeProxy(internalInstance) || internalInstance.proxy;
  const bindings = vnode.dirs || (vnode.dirs = []);
  for (let i = 0; i < directives.length; i++) {
    let [dir, value, arg, modifiers = _vue_shared__WEBPACK_IMPORTED_MODULE_1__.EMPTY_OBJ] = directives[i];
    if (dir) {
      if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isFunction)(dir)) {
        dir = {
          mounted: dir,
          updated: dir
        };
      }
      if (dir.deep) {
        traverse(value);
      }
      bindings.push({
        dir,
        instance,
        value,
        oldValue: void 0,
        arg,
        modifiers
      });
    }
  }
  return vnode;
}
function invokeDirectiveHook(vnode, prevVNode, instance, name) {
  const bindings = vnode.dirs;
  const oldBindings = prevVNode && prevVNode.dirs;
  for (let i = 0; i < bindings.length; i++) {
    const binding = bindings[i];
    if (oldBindings) {
      binding.oldValue = oldBindings[i].value;
    }
    let hook = binding.dir[name];
    if (hook) {
      (0,_vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.pauseTracking)();
      callWithAsyncErrorHandling(hook, instance, 8, [
        vnode.el,
        binding,
        vnode,
        prevVNode
      ]);
      (0,_vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.resetTracking)();
    }
  }
}

function useTransitionState() {
  const state = {
    isMounted: false,
    isLeaving: false,
    isUnmounting: false,
    leavingVNodes: /* @__PURE__ */ new Map()
  };
  onMounted(() => {
    state.isMounted = true;
  });
  onBeforeUnmount(() => {
    state.isUnmounting = true;
  });
  return state;
}
const TransitionHookValidator = [Function, Array];
const BaseTransitionPropsValidators = {
  mode: String,
  appear: Boolean,
  persisted: Boolean,
  // enter
  onBeforeEnter: TransitionHookValidator,
  onEnter: TransitionHookValidator,
  onAfterEnter: TransitionHookValidator,
  onEnterCancelled: TransitionHookValidator,
  // leave
  onBeforeLeave: TransitionHookValidator,
  onLeave: TransitionHookValidator,
  onAfterLeave: TransitionHookValidator,
  onLeaveCancelled: TransitionHookValidator,
  // appear
  onBeforeAppear: TransitionHookValidator,
  onAppear: TransitionHookValidator,
  onAfterAppear: TransitionHookValidator,
  onAppearCancelled: TransitionHookValidator
};
const BaseTransitionImpl = {
  name: `BaseTransition`,
  props: BaseTransitionPropsValidators,
  setup(props, { slots }) {
    const instance = getCurrentInstance();
    const state = useTransitionState();
    let prevTransitionKey;
    return () => {
      const children = slots.default && getTransitionRawChildren(slots.default(), true);
      if (!children || !children.length) {
        return;
      }
      let child = children[0];
      if (children.length > 1) {
        let hasFound = false;
        for (const c of children) {
          if (c.type !== Comment) {
            if ( true && hasFound) {
              warn(
                "<transition> can only be used on a single element or component. Use <transition-group> for lists."
              );
              break;
            }
            child = c;
            hasFound = true;
            if (false)
              {}
          }
        }
      }
      const rawProps = (0,_vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.toRaw)(props);
      const { mode } = rawProps;
      if ( true && mode && mode !== "in-out" && mode !== "out-in" && mode !== "default") {
        warn(`invalid <transition> mode: ${mode}`);
      }
      if (state.isLeaving) {
        return emptyPlaceholder(child);
      }
      const innerChild = getKeepAliveChild(child);
      if (!innerChild) {
        return emptyPlaceholder(child);
      }
      const enterHooks = resolveTransitionHooks(
        innerChild,
        rawProps,
        state,
        instance
      );
      setTransitionHooks(innerChild, enterHooks);
      const oldChild = instance.subTree;
      const oldInnerChild = oldChild && getKeepAliveChild(oldChild);
      let transitionKeyChanged = false;
      const { getTransitionKey } = innerChild.type;
      if (getTransitionKey) {
        const key = getTransitionKey();
        if (prevTransitionKey === void 0) {
          prevTransitionKey = key;
        } else if (key !== prevTransitionKey) {
          prevTransitionKey = key;
          transitionKeyChanged = true;
        }
      }
      if (oldInnerChild && oldInnerChild.type !== Comment && (!isSameVNodeType(innerChild, oldInnerChild) || transitionKeyChanged)) {
        const leavingHooks = resolveTransitionHooks(
          oldInnerChild,
          rawProps,
          state,
          instance
        );
        setTransitionHooks(oldInnerChild, leavingHooks);
        if (mode === "out-in") {
          state.isLeaving = true;
          leavingHooks.afterLeave = () => {
            state.isLeaving = false;
            if (instance.update.active !== false) {
              instance.update();
            }
          };
          return emptyPlaceholder(child);
        } else if (mode === "in-out" && innerChild.type !== Comment) {
          leavingHooks.delayLeave = (el, earlyRemove, delayedLeave) => {
            const leavingVNodesCache = getLeavingNodesForType(
              state,
              oldInnerChild
            );
            leavingVNodesCache[String(oldInnerChild.key)] = oldInnerChild;
            el._leaveCb = () => {
              earlyRemove();
              el._leaveCb = void 0;
              delete enterHooks.delayedLeave;
            };
            enterHooks.delayedLeave = delayedLeave;
          };
        }
      }
      return child;
    };
  }
};
const BaseTransition = BaseTransitionImpl;
function getLeavingNodesForType(state, vnode) {
  const { leavingVNodes } = state;
  let leavingVNodesCache = leavingVNodes.get(vnode.type);
  if (!leavingVNodesCache) {
    leavingVNodesCache = /* @__PURE__ */ Object.create(null);
    leavingVNodes.set(vnode.type, leavingVNodesCache);
  }
  return leavingVNodesCache;
}
function resolveTransitionHooks(vnode, props, state, instance) {
  const {
    appear,
    mode,
    persisted = false,
    onBeforeEnter,
    onEnter,
    onAfterEnter,
    onEnterCancelled,
    onBeforeLeave,
    onLeave,
    onAfterLeave,
    onLeaveCancelled,
    onBeforeAppear,
    onAppear,
    onAfterAppear,
    onAppearCancelled
  } = props;
  const key = String(vnode.key);
  const leavingVNodesCache = getLeavingNodesForType(state, vnode);
  const callHook = (hook, args) => {
    hook && callWithAsyncErrorHandling(
      hook,
      instance,
      9,
      args
    );
  };
  const callAsyncHook = (hook, args) => {
    const done = args[1];
    callHook(hook, args);
    if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isArray)(hook)) {
      if (hook.every((hook2) => hook2.length <= 1))
        done();
    } else if (hook.length <= 1) {
      done();
    }
  };
  const hooks = {
    mode,
    persisted,
    beforeEnter(el) {
      let hook = onBeforeEnter;
      if (!state.isMounted) {
        if (appear) {
          hook = onBeforeAppear || onBeforeEnter;
        } else {
          return;
        }
      }
      if (el._leaveCb) {
        el._leaveCb(
          true
          /* cancelled */
        );
      }
      const leavingVNode = leavingVNodesCache[key];
      if (leavingVNode && isSameVNodeType(vnode, leavingVNode) && leavingVNode.el._leaveCb) {
        leavingVNode.el._leaveCb();
      }
      callHook(hook, [el]);
    },
    enter(el) {
      let hook = onEnter;
      let afterHook = onAfterEnter;
      let cancelHook = onEnterCancelled;
      if (!state.isMounted) {
        if (appear) {
          hook = onAppear || onEnter;
          afterHook = onAfterAppear || onAfterEnter;
          cancelHook = onAppearCancelled || onEnterCancelled;
        } else {
          return;
        }
      }
      let called = false;
      const done = el._enterCb = (cancelled) => {
        if (called)
          return;
        called = true;
        if (cancelled) {
          callHook(cancelHook, [el]);
        } else {
          callHook(afterHook, [el]);
        }
        if (hooks.delayedLeave) {
          hooks.delayedLeave();
        }
        el._enterCb = void 0;
      };
      if (hook) {
        callAsyncHook(hook, [el, done]);
      } else {
        done();
      }
    },
    leave(el, remove) {
      const key2 = String(vnode.key);
      if (el._enterCb) {
        el._enterCb(
          true
          /* cancelled */
        );
      }
      if (state.isUnmounting) {
        return remove();
      }
      callHook(onBeforeLeave, [el]);
      let called = false;
      const done = el._leaveCb = (cancelled) => {
        if (called)
          return;
        called = true;
        remove();
        if (cancelled) {
          callHook(onLeaveCancelled, [el]);
        } else {
          callHook(onAfterLeave, [el]);
        }
        el._leaveCb = void 0;
        if (leavingVNodesCache[key2] === vnode) {
          delete leavingVNodesCache[key2];
        }
      };
      leavingVNodesCache[key2] = vnode;
      if (onLeave) {
        callAsyncHook(onLeave, [el, done]);
      } else {
        done();
      }
    },
    clone(vnode2) {
      return resolveTransitionHooks(vnode2, props, state, instance);
    }
  };
  return hooks;
}
function emptyPlaceholder(vnode) {
  if (isKeepAlive(vnode)) {
    vnode = cloneVNode(vnode);
    vnode.children = null;
    return vnode;
  }
}
function getKeepAliveChild(vnode) {
  return isKeepAlive(vnode) ? vnode.children ? vnode.children[0] : void 0 : vnode;
}
function setTransitionHooks(vnode, hooks) {
  if (vnode.shapeFlag & 6 && vnode.component) {
    setTransitionHooks(vnode.component.subTree, hooks);
  } else if (vnode.shapeFlag & 128) {
    vnode.ssContent.transition = hooks.clone(vnode.ssContent);
    vnode.ssFallback.transition = hooks.clone(vnode.ssFallback);
  } else {
    vnode.transition = hooks;
  }
}
function getTransitionRawChildren(children, keepComment = false, parentKey) {
  let ret = [];
  let keyedFragmentCount = 0;
  for (let i = 0; i < children.length; i++) {
    let child = children[i];
    const key = parentKey == null ? child.key : String(parentKey) + String(child.key != null ? child.key : i);
    if (child.type === Fragment) {
      if (child.patchFlag & 128)
        keyedFragmentCount++;
      ret = ret.concat(
        getTransitionRawChildren(child.children, keepComment, key)
      );
    } else if (keepComment || child.type !== Comment) {
      ret.push(key != null ? cloneVNode(child, { key }) : child);
    }
  }
  if (keyedFragmentCount > 1) {
    for (let i = 0; i < ret.length; i++) {
      ret[i].patchFlag = -2;
    }
  }
  return ret;
}

function defineComponent(options, extraOptions) {
  return (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isFunction)(options) ? (
    // #8326: extend call and options.name access are considered side-effects
    // by Rollup, so we have to wrap it in a pure-annotated IIFE.
    /* @__PURE__ */ (() => (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.extend)({ name: options.name }, extraOptions, { setup: options }))()
  ) : options;
}

const isAsyncWrapper = (i) => !!i.type.__asyncLoader;
function defineAsyncComponent(source) {
  if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isFunction)(source)) {
    source = { loader: source };
  }
  const {
    loader,
    loadingComponent,
    errorComponent,
    delay = 200,
    timeout,
    // undefined = never times out
    suspensible = true,
    onError: userOnError
  } = source;
  let pendingRequest = null;
  let resolvedComp;
  let retries = 0;
  const retry = () => {
    retries++;
    pendingRequest = null;
    return load();
  };
  const load = () => {
    let thisRequest;
    return pendingRequest || (thisRequest = pendingRequest = loader().catch((err) => {
      err = err instanceof Error ? err : new Error(String(err));
      if (userOnError) {
        return new Promise((resolve, reject) => {
          const userRetry = () => resolve(retry());
          const userFail = () => reject(err);
          userOnError(err, userRetry, userFail, retries + 1);
        });
      } else {
        throw err;
      }
    }).then((comp) => {
      if (thisRequest !== pendingRequest && pendingRequest) {
        return pendingRequest;
      }
      if ( true && !comp) {
        warn(
          `Async component loader resolved to undefined. If you are using retry(), make sure to return its return value.`
        );
      }
      if (comp && (comp.__esModule || comp[Symbol.toStringTag] === "Module")) {
        comp = comp.default;
      }
      if ( true && comp && !(0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isObject)(comp) && !(0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isFunction)(comp)) {
        throw new Error(`Invalid async component load result: ${comp}`);
      }
      resolvedComp = comp;
      return comp;
    }));
  };
  return defineComponent({
    name: "AsyncComponentWrapper",
    __asyncLoader: load,
    get __asyncResolved() {
      return resolvedComp;
    },
    setup() {
      const instance = currentInstance;
      if (resolvedComp) {
        return () => createInnerComp(resolvedComp, instance);
      }
      const onError = (err) => {
        pendingRequest = null;
        handleError(
          err,
          instance,
          13,
          !errorComponent
          /* do not throw in dev if user provided error component */
        );
      };
      if (suspensible && instance.suspense || isInSSRComponentSetup) {
        return load().then((comp) => {
          return () => createInnerComp(comp, instance);
        }).catch((err) => {
          onError(err);
          return () => errorComponent ? createVNode(errorComponent, {
            error: err
          }) : null;
        });
      }
      const loaded = (0,_vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.ref)(false);
      const error = (0,_vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.ref)();
      const delayed = (0,_vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.ref)(!!delay);
      if (delay) {
        setTimeout(() => {
          delayed.value = false;
        }, delay);
      }
      if (timeout != null) {
        setTimeout(() => {
          if (!loaded.value && !error.value) {
            const err = new Error(
              `Async component timed out after ${timeout}ms.`
            );
            onError(err);
            error.value = err;
          }
        }, timeout);
      }
      load().then(() => {
        loaded.value = true;
        if (instance.parent && isKeepAlive(instance.parent.vnode)) {
          queueJob(instance.parent.update);
        }
      }).catch((err) => {
        onError(err);
        error.value = err;
      });
      return () => {
        if (loaded.value && resolvedComp) {
          return createInnerComp(resolvedComp, instance);
        } else if (error.value && errorComponent) {
          return createVNode(errorComponent, {
            error: error.value
          });
        } else if (loadingComponent && !delayed.value) {
          return createVNode(loadingComponent);
        }
      };
    }
  });
}
function createInnerComp(comp, parent) {
  const { ref: ref2, props, children, ce } = parent.vnode;
  const vnode = createVNode(comp, props, children);
  vnode.ref = ref2;
  vnode.ce = ce;
  delete parent.vnode.ce;
  return vnode;
}

const isKeepAlive = (vnode) => vnode.type.__isKeepAlive;
const KeepAliveImpl = {
  name: `KeepAlive`,
  // Marker for special handling inside the renderer. We are not using a ===
  // check directly on KeepAlive in the renderer, because importing it directly
  // would prevent it from being tree-shaken.
  __isKeepAlive: true,
  props: {
    include: [String, RegExp, Array],
    exclude: [String, RegExp, Array],
    max: [String, Number]
  },
  setup(props, { slots }) {
    const instance = getCurrentInstance();
    const sharedContext = instance.ctx;
    if (!sharedContext.renderer) {
      return () => {
        const children = slots.default && slots.default();
        return children && children.length === 1 ? children[0] : children;
      };
    }
    const cache = /* @__PURE__ */ new Map();
    const keys = /* @__PURE__ */ new Set();
    let current = null;
    if (true) {
      instance.__v_cache = cache;
    }
    const parentSuspense = instance.suspense;
    const {
      renderer: {
        p: patch,
        m: move,
        um: _unmount,
        o: { createElement }
      }
    } = sharedContext;
    const storageContainer = createElement("div");
    sharedContext.activate = (vnode, container, anchor, isSVG, optimized) => {
      const instance2 = vnode.component;
      move(vnode, container, anchor, 0, parentSuspense);
      patch(
        instance2.vnode,
        vnode,
        container,
        anchor,
        instance2,
        parentSuspense,
        isSVG,
        vnode.slotScopeIds,
        optimized
      );
      queuePostRenderEffect(() => {
        instance2.isDeactivated = false;
        if (instance2.a) {
          (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.invokeArrayFns)(instance2.a);
        }
        const vnodeHook = vnode.props && vnode.props.onVnodeMounted;
        if (vnodeHook) {
          invokeVNodeHook(vnodeHook, instance2.parent, vnode);
        }
      }, parentSuspense);
      if (true) {
        devtoolsComponentAdded(instance2);
      }
    };
    sharedContext.deactivate = (vnode) => {
      const instance2 = vnode.component;
      move(vnode, storageContainer, null, 1, parentSuspense);
      queuePostRenderEffect(() => {
        if (instance2.da) {
          (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.invokeArrayFns)(instance2.da);
        }
        const vnodeHook = vnode.props && vnode.props.onVnodeUnmounted;
        if (vnodeHook) {
          invokeVNodeHook(vnodeHook, instance2.parent, vnode);
        }
        instance2.isDeactivated = true;
      }, parentSuspense);
      if (true) {
        devtoolsComponentAdded(instance2);
      }
    };
    function unmount(vnode) {
      resetShapeFlag(vnode);
      _unmount(vnode, instance, parentSuspense, true);
    }
    function pruneCache(filter) {
      cache.forEach((vnode, key) => {
        const name = getComponentName(vnode.type);
        if (name && (!filter || !filter(name))) {
          pruneCacheEntry(key);
        }
      });
    }
    function pruneCacheEntry(key) {
      const cached = cache.get(key);
      if (!current || !isSameVNodeType(cached, current)) {
        unmount(cached);
      } else if (current) {
        resetShapeFlag(current);
      }
      cache.delete(key);
      keys.delete(key);
    }
    watch(
      () => [props.include, props.exclude],
      ([include, exclude]) => {
        include && pruneCache((name) => matches(include, name));
        exclude && pruneCache((name) => !matches(exclude, name));
      },
      // prune post-render after `current` has been updated
      { flush: "post", deep: true }
    );
    let pendingCacheKey = null;
    const cacheSubtree = () => {
      if (pendingCacheKey != null) {
        cache.set(pendingCacheKey, getInnerChild(instance.subTree));
      }
    };
    onMounted(cacheSubtree);
    onUpdated(cacheSubtree);
    onBeforeUnmount(() => {
      cache.forEach((cached) => {
        const { subTree, suspense } = instance;
        const vnode = getInnerChild(subTree);
        if (cached.type === vnode.type && cached.key === vnode.key) {
          resetShapeFlag(vnode);
          const da = vnode.component.da;
          da && queuePostRenderEffect(da, suspense);
          return;
        }
        unmount(cached);
      });
    });
    return () => {
      pendingCacheKey = null;
      if (!slots.default) {
        return null;
      }
      const children = slots.default();
      const rawVNode = children[0];
      if (children.length > 1) {
        if (true) {
          warn(`KeepAlive should contain exactly one component child.`);
        }
        current = null;
        return children;
      } else if (!isVNode(rawVNode) || !(rawVNode.shapeFlag & 4) && !(rawVNode.shapeFlag & 128)) {
        current = null;
        return rawVNode;
      }
      let vnode = getInnerChild(rawVNode);
      const comp = vnode.type;
      const name = getComponentName(
        isAsyncWrapper(vnode) ? vnode.type.__asyncResolved || {} : comp
      );
      const { include, exclude, max } = props;
      if (include && (!name || !matches(include, name)) || exclude && name && matches(exclude, name)) {
        current = vnode;
        return rawVNode;
      }
      const key = vnode.key == null ? comp : vnode.key;
      const cachedVNode = cache.get(key);
      if (vnode.el) {
        vnode = cloneVNode(vnode);
        if (rawVNode.shapeFlag & 128) {
          rawVNode.ssContent = vnode;
        }
      }
      pendingCacheKey = key;
      if (cachedVNode) {
        vnode.el = cachedVNode.el;
        vnode.component = cachedVNode.component;
        if (vnode.transition) {
          setTransitionHooks(vnode, vnode.transition);
        }
        vnode.shapeFlag |= 512;
        keys.delete(key);
        keys.add(key);
      } else {
        keys.add(key);
        if (max && keys.size > parseInt(max, 10)) {
          pruneCacheEntry(keys.values().next().value);
        }
      }
      vnode.shapeFlag |= 256;
      current = vnode;
      return isSuspense(rawVNode.type) ? rawVNode : vnode;
    };
  }
};
const KeepAlive = KeepAliveImpl;
function matches(pattern, name) {
  if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isArray)(pattern)) {
    return pattern.some((p) => matches(p, name));
  } else if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isString)(pattern)) {
    return pattern.split(",").includes(name);
  } else if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isRegExp)(pattern)) {
    return pattern.test(name);
  }
  return false;
}
function onActivated(hook, target) {
  registerKeepAliveHook(hook, "a", target);
}
function onDeactivated(hook, target) {
  registerKeepAliveHook(hook, "da", target);
}
function registerKeepAliveHook(hook, type, target = currentInstance) {
  const wrappedHook = hook.__wdc || (hook.__wdc = () => {
    let current = target;
    while (current) {
      if (current.isDeactivated) {
        return;
      }
      current = current.parent;
    }
    return hook();
  });
  injectHook(type, wrappedHook, target);
  if (target) {
    let current = target.parent;
    while (current && current.parent) {
      if (isKeepAlive(current.parent.vnode)) {
        injectToKeepAliveRoot(wrappedHook, type, target, current);
      }
      current = current.parent;
    }
  }
}
function injectToKeepAliveRoot(hook, type, target, keepAliveRoot) {
  const injected = injectHook(
    type,
    hook,
    keepAliveRoot,
    true
    /* prepend */
  );
  onUnmounted(() => {
    (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.remove)(keepAliveRoot[type], injected);
  }, target);
}
function resetShapeFlag(vnode) {
  vnode.shapeFlag &= ~256;
  vnode.shapeFlag &= ~512;
}
function getInnerChild(vnode) {
  return vnode.shapeFlag & 128 ? vnode.ssContent : vnode;
}

function injectHook(type, hook, target = currentInstance, prepend = false) {
  if (target) {
    const hooks = target[type] || (target[type] = []);
    const wrappedHook = hook.__weh || (hook.__weh = (...args) => {
      if (target.isUnmounted) {
        return;
      }
      (0,_vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.pauseTracking)();
      setCurrentInstance(target);
      const res = callWithAsyncErrorHandling(hook, target, type, args);
      unsetCurrentInstance();
      (0,_vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.resetTracking)();
      return res;
    });
    if (prepend) {
      hooks.unshift(wrappedHook);
    } else {
      hooks.push(wrappedHook);
    }
    return wrappedHook;
  } else if (true) {
    const apiName = (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.toHandlerKey)(ErrorTypeStrings[type].replace(/ hook$/, ""));
    warn(
      `${apiName} is called when there is no active component instance to be associated with. Lifecycle injection APIs can only be used during execution of setup().` + (` If you are using async setup(), make sure to register lifecycle hooks before the first await statement.` )
    );
  }
}
const createHook = (lifecycle) => (hook, target = currentInstance) => (
  // post-create lifecycle registrations are noops during SSR (except for serverPrefetch)
  (!isInSSRComponentSetup || lifecycle === "sp") && injectHook(lifecycle, (...args) => hook(...args), target)
);
const onBeforeMount = createHook("bm");
const onMounted = createHook("m");
const onBeforeUpdate = createHook("bu");
const onUpdated = createHook("u");
const onBeforeUnmount = createHook("bum");
const onUnmounted = createHook("um");
const onServerPrefetch = createHook("sp");
const onRenderTriggered = createHook(
  "rtg"
);
const onRenderTracked = createHook(
  "rtc"
);
function onErrorCaptured(hook, target = currentInstance) {
  injectHook("ec", hook, target);
}

const COMPONENTS = "components";
const DIRECTIVES = "directives";
function resolveComponent(name, maybeSelfReference) {
  return resolveAsset(COMPONENTS, name, true, maybeSelfReference) || name;
}
const NULL_DYNAMIC_COMPONENT = Symbol.for("v-ndc");
function resolveDynamicComponent(component) {
  if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isString)(component)) {
    return resolveAsset(COMPONENTS, component, false) || component;
  } else {
    return component || NULL_DYNAMIC_COMPONENT;
  }
}
function resolveDirective(name) {
  return resolveAsset(DIRECTIVES, name);
}
function resolveAsset(type, name, warnMissing = true, maybeSelfReference = false) {
  const instance = currentRenderingInstance || currentInstance;
  if (instance) {
    const Component = instance.type;
    if (type === COMPONENTS) {
      const selfName = getComponentName(
        Component,
        false
        /* do not include inferred name to avoid breaking existing code */
      );
      if (selfName && (selfName === name || selfName === (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.camelize)(name) || selfName === (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.capitalize)((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.camelize)(name)))) {
        return Component;
      }
    }
    const res = (
      // local registration
      // check instance[type] first which is resolved for options API
      resolve(instance[type] || Component[type], name) || // global registration
      resolve(instance.appContext[type], name)
    );
    if (!res && maybeSelfReference) {
      return Component;
    }
    if ( true && warnMissing && !res) {
      const extra = type === COMPONENTS ? `
If this is a native custom element, make sure to exclude it from component resolution via compilerOptions.isCustomElement.` : ``;
      warn(`Failed to resolve ${type.slice(0, -1)}: ${name}${extra}`);
    }
    return res;
  } else if (true) {
    warn(
      `resolve${(0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.capitalize)(type.slice(0, -1))} can only be used in render() or setup().`
    );
  }
}
function resolve(registry, name) {
  return registry && (registry[name] || registry[(0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.camelize)(name)] || registry[(0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.capitalize)((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.camelize)(name))]);
}

function renderList(source, renderItem, cache, index) {
  let ret;
  const cached = cache && cache[index];
  if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isArray)(source) || (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isString)(source)) {
    ret = new Array(source.length);
    for (let i = 0, l = source.length; i < l; i++) {
      ret[i] = renderItem(source[i], i, void 0, cached && cached[i]);
    }
  } else if (typeof source === "number") {
    if ( true && !Number.isInteger(source)) {
      warn(`The v-for range expect an integer value but got ${source}.`);
    }
    ret = new Array(source);
    for (let i = 0; i < source; i++) {
      ret[i] = renderItem(i + 1, i, void 0, cached && cached[i]);
    }
  } else if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isObject)(source)) {
    if (source[Symbol.iterator]) {
      ret = Array.from(
        source,
        (item, i) => renderItem(item, i, void 0, cached && cached[i])
      );
    } else {
      const keys = Object.keys(source);
      ret = new Array(keys.length);
      for (let i = 0, l = keys.length; i < l; i++) {
        const key = keys[i];
        ret[i] = renderItem(source[key], key, i, cached && cached[i]);
      }
    }
  } else {
    ret = [];
  }
  if (cache) {
    cache[index] = ret;
  }
  return ret;
}

function createSlots(slots, dynamicSlots) {
  for (let i = 0; i < dynamicSlots.length; i++) {
    const slot = dynamicSlots[i];
    if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isArray)(slot)) {
      for (let j = 0; j < slot.length; j++) {
        slots[slot[j].name] = slot[j].fn;
      }
    } else if (slot) {
      slots[slot.name] = slot.key ? (...args) => {
        const res = slot.fn(...args);
        if (res)
          res.key = slot.key;
        return res;
      } : slot.fn;
    }
  }
  return slots;
}

function renderSlot(slots, name, props = {}, fallback, noSlotted) {
  if (currentRenderingInstance.isCE || currentRenderingInstance.parent && isAsyncWrapper(currentRenderingInstance.parent) && currentRenderingInstance.parent.isCE) {
    if (name !== "default")
      props.name = name;
    return createVNode("slot", props, fallback && fallback());
  }
  let slot = slots[name];
  if ( true && slot && slot.length > 1) {
    warn(
      `SSR-optimized slot function detected in a non-SSR-optimized render function. You need to mark this component with $dynamic-slots in the parent template.`
    );
    slot = () => [];
  }
  if (slot && slot._c) {
    slot._d = false;
  }
  openBlock();
  const validSlotContent = slot && ensureValidVNode(slot(props));
  const rendered = createBlock(
    Fragment,
    {
      key: props.key || // slot content array of a dynamic conditional slot may have a branch
      // key attached in the `createSlots` helper, respect that
      validSlotContent && validSlotContent.key || `_${name}`
    },
    validSlotContent || (fallback ? fallback() : []),
    validSlotContent && slots._ === 1 ? 64 : -2
  );
  if (!noSlotted && rendered.scopeId) {
    rendered.slotScopeIds = [rendered.scopeId + "-s"];
  }
  if (slot && slot._c) {
    slot._d = true;
  }
  return rendered;
}
function ensureValidVNode(vnodes) {
  return vnodes.some((child) => {
    if (!isVNode(child))
      return true;
    if (child.type === Comment)
      return false;
    if (child.type === Fragment && !ensureValidVNode(child.children))
      return false;
    return true;
  }) ? vnodes : null;
}

function toHandlers(obj, preserveCaseIfNecessary) {
  const ret = {};
  if ( true && !(0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isObject)(obj)) {
    warn(`v-on with no argument expects an object value.`);
    return ret;
  }
  for (const key in obj) {
    ret[preserveCaseIfNecessary && /[A-Z]/.test(key) ? `on:${key}` : (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.toHandlerKey)(key)] = obj[key];
  }
  return ret;
}

const getPublicInstance = (i) => {
  if (!i)
    return null;
  if (isStatefulComponent(i))
    return getExposeProxy(i) || i.proxy;
  return getPublicInstance(i.parent);
};
const publicPropertiesMap = (
  // Move PURE marker to new line to workaround compiler discarding it
  // due to type annotation
  /* @__PURE__ */ (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.extend)(/* @__PURE__ */ Object.create(null), {
    $: (i) => i,
    $el: (i) => i.vnode.el,
    $data: (i) => i.data,
    $props: (i) =>  true ? (0,_vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.shallowReadonly)(i.props) : 0,
    $attrs: (i) =>  true ? (0,_vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.shallowReadonly)(i.attrs) : 0,
    $slots: (i) =>  true ? (0,_vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.shallowReadonly)(i.slots) : 0,
    $refs: (i) =>  true ? (0,_vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.shallowReadonly)(i.refs) : 0,
    $parent: (i) => getPublicInstance(i.parent),
    $root: (i) => getPublicInstance(i.root),
    $emit: (i) => i.emit,
    $options: (i) =>  true ? resolveMergedOptions(i) : 0,
    $forceUpdate: (i) => i.f || (i.f = () => queueJob(i.update)),
    $nextTick: (i) => i.n || (i.n = nextTick.bind(i.proxy)),
    $watch: (i) =>  true ? instanceWatch.bind(i) : 0
  })
);
const isReservedPrefix = (key) => key === "_" || key === "$";
const hasSetupBinding = (state, key) => state !== _vue_shared__WEBPACK_IMPORTED_MODULE_1__.EMPTY_OBJ && !state.__isScriptSetup && (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.hasOwn)(state, key);
const PublicInstanceProxyHandlers = {
  get({ _: instance }, key) {
    const { ctx, setupState, data, props, accessCache, type, appContext } = instance;
    if ( true && key === "__isVue") {
      return true;
    }
    let normalizedProps;
    if (key[0] !== "$") {
      const n = accessCache[key];
      if (n !== void 0) {
        switch (n) {
          case 1 /* SETUP */:
            return setupState[key];
          case 2 /* DATA */:
            return data[key];
          case 4 /* CONTEXT */:
            return ctx[key];
          case 3 /* PROPS */:
            return props[key];
        }
      } else if (hasSetupBinding(setupState, key)) {
        accessCache[key] = 1 /* SETUP */;
        return setupState[key];
      } else if (data !== _vue_shared__WEBPACK_IMPORTED_MODULE_1__.EMPTY_OBJ && (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.hasOwn)(data, key)) {
        accessCache[key] = 2 /* DATA */;
        return data[key];
      } else if (
        // only cache other properties when instance has declared (thus stable)
        // props
        (normalizedProps = instance.propsOptions[0]) && (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.hasOwn)(normalizedProps, key)
      ) {
        accessCache[key] = 3 /* PROPS */;
        return props[key];
      } else if (ctx !== _vue_shared__WEBPACK_IMPORTED_MODULE_1__.EMPTY_OBJ && (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.hasOwn)(ctx, key)) {
        accessCache[key] = 4 /* CONTEXT */;
        return ctx[key];
      } else if ( false || shouldCacheAccess) {
        accessCache[key] = 0 /* OTHER */;
      }
    }
    const publicGetter = publicPropertiesMap[key];
    let cssModule, globalProperties;
    if (publicGetter) {
      if (key === "$attrs") {
        (0,_vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.track)(instance, "get", key);
         true && markAttrsAccessed();
      } else if ( true && key === "$slots") {
        (0,_vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.track)(instance, "get", key);
      }
      return publicGetter(instance);
    } else if (
      // css module (injected by vue-loader)
      (cssModule = type.__cssModules) && (cssModule = cssModule[key])
    ) {
      return cssModule;
    } else if (ctx !== _vue_shared__WEBPACK_IMPORTED_MODULE_1__.EMPTY_OBJ && (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.hasOwn)(ctx, key)) {
      accessCache[key] = 4 /* CONTEXT */;
      return ctx[key];
    } else if (
      // global properties
      globalProperties = appContext.config.globalProperties, (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.hasOwn)(globalProperties, key)
    ) {
      {
        return globalProperties[key];
      }
    } else if ( true && currentRenderingInstance && (!(0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isString)(key) || // #1091 avoid internal isRef/isVNode checks on component instance leading
    // to infinite warning loop
    key.indexOf("__v") !== 0)) {
      if (data !== _vue_shared__WEBPACK_IMPORTED_MODULE_1__.EMPTY_OBJ && isReservedPrefix(key[0]) && (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.hasOwn)(data, key)) {
        warn(
          `Property ${JSON.stringify(
            key
          )} must be accessed via $data because it starts with a reserved character ("$" or "_") and is not proxied on the render context.`
        );
      } else if (instance === currentRenderingInstance) {
        warn(
          `Property ${JSON.stringify(key)} was accessed during render but is not defined on instance.`
        );
      }
    }
  },
  set({ _: instance }, key, value) {
    const { data, setupState, ctx } = instance;
    if (hasSetupBinding(setupState, key)) {
      setupState[key] = value;
      return true;
    } else if ( true && setupState.__isScriptSetup && (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.hasOwn)(setupState, key)) {
      warn(`Cannot mutate <script setup> binding "${key}" from Options API.`);
      return false;
    } else if (data !== _vue_shared__WEBPACK_IMPORTED_MODULE_1__.EMPTY_OBJ && (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.hasOwn)(data, key)) {
      data[key] = value;
      return true;
    } else if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.hasOwn)(instance.props, key)) {
       true && warn(`Attempting to mutate prop "${key}". Props are readonly.`);
      return false;
    }
    if (key[0] === "$" && key.slice(1) in instance) {
       true && warn(
        `Attempting to mutate public property "${key}". Properties starting with $ are reserved and readonly.`
      );
      return false;
    } else {
      if ( true && key in instance.appContext.config.globalProperties) {
        Object.defineProperty(ctx, key, {
          enumerable: true,
          configurable: true,
          value
        });
      } else {
        ctx[key] = value;
      }
    }
    return true;
  },
  has({
    _: { data, setupState, accessCache, ctx, appContext, propsOptions }
  }, key) {
    let normalizedProps;
    return !!accessCache[key] || data !== _vue_shared__WEBPACK_IMPORTED_MODULE_1__.EMPTY_OBJ && (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.hasOwn)(data, key) || hasSetupBinding(setupState, key) || (normalizedProps = propsOptions[0]) && (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.hasOwn)(normalizedProps, key) || (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.hasOwn)(ctx, key) || (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.hasOwn)(publicPropertiesMap, key) || (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.hasOwn)(appContext.config.globalProperties, key);
  },
  defineProperty(target, key, descriptor) {
    if (descriptor.get != null) {
      target._.accessCache[key] = 0;
    } else if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.hasOwn)(descriptor, "value")) {
      this.set(target, key, descriptor.value, null);
    }
    return Reflect.defineProperty(target, key, descriptor);
  }
};
if (true) {
  PublicInstanceProxyHandlers.ownKeys = (target) => {
    warn(
      `Avoid app logic that relies on enumerating keys on a component instance. The keys will be empty in production mode to avoid performance overhead.`
    );
    return Reflect.ownKeys(target);
  };
}
const RuntimeCompiledPublicInstanceProxyHandlers = /* @__PURE__ */ (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.extend)(
  {},
  PublicInstanceProxyHandlers,
  {
    get(target, key) {
      if (key === Symbol.unscopables) {
        return;
      }
      return PublicInstanceProxyHandlers.get(target, key, target);
    },
    has(_, key) {
      const has = key[0] !== "_" && !(0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isGloballyWhitelisted)(key);
      if ( true && !has && PublicInstanceProxyHandlers.has(_, key)) {
        warn(
          `Property ${JSON.stringify(
            key
          )} should not start with _ which is a reserved prefix for Vue internals.`
        );
      }
      return has;
    }
  }
);
function createDevRenderContext(instance) {
  const target = {};
  Object.defineProperty(target, `_`, {
    configurable: true,
    enumerable: false,
    get: () => instance
  });
  Object.keys(publicPropertiesMap).forEach((key) => {
    Object.defineProperty(target, key, {
      configurable: true,
      enumerable: false,
      get: () => publicPropertiesMap[key](instance),
      // intercepted by the proxy so no need for implementation,
      // but needed to prevent set errors
      set: _vue_shared__WEBPACK_IMPORTED_MODULE_1__.NOOP
    });
  });
  return target;
}
function exposePropsOnRenderContext(instance) {
  const {
    ctx,
    propsOptions: [propsOptions]
  } = instance;
  if (propsOptions) {
    Object.keys(propsOptions).forEach((key) => {
      Object.defineProperty(ctx, key, {
        enumerable: true,
        configurable: true,
        get: () => instance.props[key],
        set: _vue_shared__WEBPACK_IMPORTED_MODULE_1__.NOOP
      });
    });
  }
}
function exposeSetupStateOnRenderContext(instance) {
  const { ctx, setupState } = instance;
  Object.keys((0,_vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.toRaw)(setupState)).forEach((key) => {
    if (!setupState.__isScriptSetup) {
      if (isReservedPrefix(key[0])) {
        warn(
          `setup() return property ${JSON.stringify(
            key
          )} should not start with "$" or "_" which are reserved prefixes for Vue internals.`
        );
        return;
      }
      Object.defineProperty(ctx, key, {
        enumerable: true,
        configurable: true,
        get: () => setupState[key],
        set: _vue_shared__WEBPACK_IMPORTED_MODULE_1__.NOOP
      });
    }
  });
}

const warnRuntimeUsage = (method) => warn(
  `${method}() is a compiler-hint helper that is only usable inside <script setup> of a single file component. Its arguments should be compiled away and passing it at runtime has no effect.`
);
function defineProps() {
  if (true) {
    warnRuntimeUsage(`defineProps`);
  }
  return null;
}
function defineEmits() {
  if (true) {
    warnRuntimeUsage(`defineEmits`);
  }
  return null;
}
function defineExpose(exposed) {
  if (true) {
    warnRuntimeUsage(`defineExpose`);
  }
}
function defineOptions(options) {
  if (true) {
    warnRuntimeUsage(`defineOptions`);
  }
}
function defineSlots() {
  if (true) {
    warnRuntimeUsage(`defineSlots`);
  }
  return null;
}
function defineModel() {
  if (true) {
    warnRuntimeUsage("defineModel");
  }
}
function withDefaults(props, defaults) {
  if (true) {
    warnRuntimeUsage(`withDefaults`);
  }
  return null;
}
function useSlots() {
  return getContext().slots;
}
function useAttrs() {
  return getContext().attrs;
}
function useModel(props, name, options) {
  const i = getCurrentInstance();
  if ( true && !i) {
    warn(`useModel() called without active instance.`);
    return (0,_vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.ref)();
  }
  if ( true && !i.propsOptions[0][name]) {
    warn(`useModel() called with prop "${name}" which is not declared.`);
    return (0,_vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.ref)();
  }
  if (options && options.local) {
    const proxy = (0,_vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.ref)(props[name]);
    watch(
      () => props[name],
      (v) => proxy.value = v
    );
    watch(proxy, (value) => {
      if (value !== props[name]) {
        i.emit(`update:${name}`, value);
      }
    });
    return proxy;
  } else {
    return {
      __v_isRef: true,
      get value() {
        return props[name];
      },
      set value(value) {
        i.emit(`update:${name}`, value);
      }
    };
  }
}
function getContext() {
  const i = getCurrentInstance();
  if ( true && !i) {
    warn(`useContext() called without active instance.`);
  }
  return i.setupContext || (i.setupContext = createSetupContext(i));
}
function normalizePropsOrEmits(props) {
  return (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isArray)(props) ? props.reduce(
    (normalized, p) => (normalized[p] = null, normalized),
    {}
  ) : props;
}
function mergeDefaults(raw, defaults) {
  const props = normalizePropsOrEmits(raw);
  for (const key in defaults) {
    if (key.startsWith("__skip"))
      continue;
    let opt = props[key];
    if (opt) {
      if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isArray)(opt) || (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isFunction)(opt)) {
        opt = props[key] = { type: opt, default: defaults[key] };
      } else {
        opt.default = defaults[key];
      }
    } else if (opt === null) {
      opt = props[key] = { default: defaults[key] };
    } else if (true) {
      warn(`props default key "${key}" has no corresponding declaration.`);
    }
    if (opt && defaults[`__skip_${key}`]) {
      opt.skipFactory = true;
    }
  }
  return props;
}
function mergeModels(a, b) {
  if (!a || !b)
    return a || b;
  if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isArray)(a) && (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isArray)(b))
    return a.concat(b);
  return (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.extend)({}, normalizePropsOrEmits(a), normalizePropsOrEmits(b));
}
function createPropsRestProxy(props, excludedKeys) {
  const ret = {};
  for (const key in props) {
    if (!excludedKeys.includes(key)) {
      Object.defineProperty(ret, key, {
        enumerable: true,
        get: () => props[key]
      });
    }
  }
  return ret;
}
function withAsyncContext(getAwaitable) {
  const ctx = getCurrentInstance();
  if ( true && !ctx) {
    warn(
      `withAsyncContext called without active current instance. This is likely a bug.`
    );
  }
  let awaitable = getAwaitable();
  unsetCurrentInstance();
  if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isPromise)(awaitable)) {
    awaitable = awaitable.catch((e) => {
      setCurrentInstance(ctx);
      throw e;
    });
  }
  return [awaitable, () => setCurrentInstance(ctx)];
}

function createDuplicateChecker() {
  const cache = /* @__PURE__ */ Object.create(null);
  return (type, key) => {
    if (cache[key]) {
      warn(`${type} property "${key}" is already defined in ${cache[key]}.`);
    } else {
      cache[key] = type;
    }
  };
}
let shouldCacheAccess = true;
function applyOptions(instance) {
  const options = resolveMergedOptions(instance);
  const publicThis = instance.proxy;
  const ctx = instance.ctx;
  shouldCacheAccess = false;
  if (options.beforeCreate) {
    callHook(options.beforeCreate, instance, "bc");
  }
  const {
    // state
    data: dataOptions,
    computed: computedOptions,
    methods,
    watch: watchOptions,
    provide: provideOptions,
    inject: injectOptions,
    // lifecycle
    created,
    beforeMount,
    mounted,
    beforeUpdate,
    updated,
    activated,
    deactivated,
    beforeDestroy,
    beforeUnmount,
    destroyed,
    unmounted,
    render,
    renderTracked,
    renderTriggered,
    errorCaptured,
    serverPrefetch,
    // public API
    expose,
    inheritAttrs,
    // assets
    components,
    directives,
    filters
  } = options;
  const checkDuplicateProperties =  true ? createDuplicateChecker() : 0;
  if (true) {
    const [propsOptions] = instance.propsOptions;
    if (propsOptions) {
      for (const key in propsOptions) {
        checkDuplicateProperties("Props" /* PROPS */, key);
      }
    }
  }
  if (injectOptions) {
    resolveInjections(injectOptions, ctx, checkDuplicateProperties);
  }
  if (methods) {
    for (const key in methods) {
      const methodHandler = methods[key];
      if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isFunction)(methodHandler)) {
        if (true) {
          Object.defineProperty(ctx, key, {
            value: methodHandler.bind(publicThis),
            configurable: true,
            enumerable: true,
            writable: true
          });
        } else {}
        if (true) {
          checkDuplicateProperties("Methods" /* METHODS */, key);
        }
      } else if (true) {
        warn(
          `Method "${key}" has type "${typeof methodHandler}" in the component definition. Did you reference the function correctly?`
        );
      }
    }
  }
  if (dataOptions) {
    if ( true && !(0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isFunction)(dataOptions)) {
      warn(
        `The data option must be a function. Plain object usage is no longer supported.`
      );
    }
    const data = dataOptions.call(publicThis, publicThis);
    if ( true && (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isPromise)(data)) {
      warn(
        `data() returned a Promise - note data() cannot be async; If you intend to perform data fetching before component renders, use async setup() + <Suspense>.`
      );
    }
    if (!(0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isObject)(data)) {
       true && warn(`data() should return an object.`);
    } else {
      instance.data = (0,_vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.reactive)(data);
      if (true) {
        for (const key in data) {
          checkDuplicateProperties("Data" /* DATA */, key);
          if (!isReservedPrefix(key[0])) {
            Object.defineProperty(ctx, key, {
              configurable: true,
              enumerable: true,
              get: () => data[key],
              set: _vue_shared__WEBPACK_IMPORTED_MODULE_1__.NOOP
            });
          }
        }
      }
    }
  }
  shouldCacheAccess = true;
  if (computedOptions) {
    for (const key in computedOptions) {
      const opt = computedOptions[key];
      const get = (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isFunction)(opt) ? opt.bind(publicThis, publicThis) : (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isFunction)(opt.get) ? opt.get.bind(publicThis, publicThis) : _vue_shared__WEBPACK_IMPORTED_MODULE_1__.NOOP;
      if ( true && get === _vue_shared__WEBPACK_IMPORTED_MODULE_1__.NOOP) {
        warn(`Computed property "${key}" has no getter.`);
      }
      const set = !(0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isFunction)(opt) && (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isFunction)(opt.set) ? opt.set.bind(publicThis) :  true ? () => {
        warn(
          `Write operation failed: computed property "${key}" is readonly.`
        );
      } : 0;
      const c = computed({
        get,
        set
      });
      Object.defineProperty(ctx, key, {
        enumerable: true,
        configurable: true,
        get: () => c.value,
        set: (v) => c.value = v
      });
      if (true) {
        checkDuplicateProperties("Computed" /* COMPUTED */, key);
      }
    }
  }
  if (watchOptions) {
    for (const key in watchOptions) {
      createWatcher(watchOptions[key], ctx, publicThis, key);
    }
  }
  if (provideOptions) {
    const provides = (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isFunction)(provideOptions) ? provideOptions.call(publicThis) : provideOptions;
    Reflect.ownKeys(provides).forEach((key) => {
      provide(key, provides[key]);
    });
  }
  if (created) {
    callHook(created, instance, "c");
  }
  function registerLifecycleHook(register, hook) {
    if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isArray)(hook)) {
      hook.forEach((_hook) => register(_hook.bind(publicThis)));
    } else if (hook) {
      register(hook.bind(publicThis));
    }
  }
  registerLifecycleHook(onBeforeMount, beforeMount);
  registerLifecycleHook(onMounted, mounted);
  registerLifecycleHook(onBeforeUpdate, beforeUpdate);
  registerLifecycleHook(onUpdated, updated);
  registerLifecycleHook(onActivated, activated);
  registerLifecycleHook(onDeactivated, deactivated);
  registerLifecycleHook(onErrorCaptured, errorCaptured);
  registerLifecycleHook(onRenderTracked, renderTracked);
  registerLifecycleHook(onRenderTriggered, renderTriggered);
  registerLifecycleHook(onBeforeUnmount, beforeUnmount);
  registerLifecycleHook(onUnmounted, unmounted);
  registerLifecycleHook(onServerPrefetch, serverPrefetch);
  if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isArray)(expose)) {
    if (expose.length) {
      const exposed = instance.exposed || (instance.exposed = {});
      expose.forEach((key) => {
        Object.defineProperty(exposed, key, {
          get: () => publicThis[key],
          set: (val) => publicThis[key] = val
        });
      });
    } else if (!instance.exposed) {
      instance.exposed = {};
    }
  }
  if (render && instance.render === _vue_shared__WEBPACK_IMPORTED_MODULE_1__.NOOP) {
    instance.render = render;
  }
  if (inheritAttrs != null) {
    instance.inheritAttrs = inheritAttrs;
  }
  if (components)
    instance.components = components;
  if (directives)
    instance.directives = directives;
}
function resolveInjections(injectOptions, ctx, checkDuplicateProperties = _vue_shared__WEBPACK_IMPORTED_MODULE_1__.NOOP) {
  if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isArray)(injectOptions)) {
    injectOptions = normalizeInject(injectOptions);
  }
  for (const key in injectOptions) {
    const opt = injectOptions[key];
    let injected;
    if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isObject)(opt)) {
      if ("default" in opt) {
        injected = inject(
          opt.from || key,
          opt.default,
          true
          /* treat default function as factory */
        );
      } else {
        injected = inject(opt.from || key);
      }
    } else {
      injected = inject(opt);
    }
    if ((0,_vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.isRef)(injected)) {
      Object.defineProperty(ctx, key, {
        enumerable: true,
        configurable: true,
        get: () => injected.value,
        set: (v) => injected.value = v
      });
    } else {
      ctx[key] = injected;
    }
    if (true) {
      checkDuplicateProperties("Inject" /* INJECT */, key);
    }
  }
}
function callHook(hook, instance, type) {
  callWithAsyncErrorHandling(
    (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isArray)(hook) ? hook.map((h) => h.bind(instance.proxy)) : hook.bind(instance.proxy),
    instance,
    type
  );
}
function createWatcher(raw, ctx, publicThis, key) {
  const getter = key.includes(".") ? createPathGetter(publicThis, key) : () => publicThis[key];
  if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isString)(raw)) {
    const handler = ctx[raw];
    if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isFunction)(handler)) {
      watch(getter, handler);
    } else if (true) {
      warn(`Invalid watch handler specified by key "${raw}"`, handler);
    }
  } else if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isFunction)(raw)) {
    watch(getter, raw.bind(publicThis));
  } else if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isObject)(raw)) {
    if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isArray)(raw)) {
      raw.forEach((r) => createWatcher(r, ctx, publicThis, key));
    } else {
      const handler = (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isFunction)(raw.handler) ? raw.handler.bind(publicThis) : ctx[raw.handler];
      if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isFunction)(handler)) {
        watch(getter, handler, raw);
      } else if (true) {
        warn(`Invalid watch handler specified by key "${raw.handler}"`, handler);
      }
    }
  } else if (true) {
    warn(`Invalid watch option: "${key}"`, raw);
  }
}
function resolveMergedOptions(instance) {
  const base = instance.type;
  const { mixins, extends: extendsOptions } = base;
  const {
    mixins: globalMixins,
    optionsCache: cache,
    config: { optionMergeStrategies }
  } = instance.appContext;
  const cached = cache.get(base);
  let resolved;
  if (cached) {
    resolved = cached;
  } else if (!globalMixins.length && !mixins && !extendsOptions) {
    {
      resolved = base;
    }
  } else {
    resolved = {};
    if (globalMixins.length) {
      globalMixins.forEach(
        (m) => mergeOptions(resolved, m, optionMergeStrategies, true)
      );
    }
    mergeOptions(resolved, base, optionMergeStrategies);
  }
  if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isObject)(base)) {
    cache.set(base, resolved);
  }
  return resolved;
}
function mergeOptions(to, from, strats, asMixin = false) {
  const { mixins, extends: extendsOptions } = from;
  if (extendsOptions) {
    mergeOptions(to, extendsOptions, strats, true);
  }
  if (mixins) {
    mixins.forEach(
      (m) => mergeOptions(to, m, strats, true)
    );
  }
  for (const key in from) {
    if (asMixin && key === "expose") {
       true && warn(
        `"expose" option is ignored when declared in mixins or extends. It should only be declared in the base component itself.`
      );
    } else {
      const strat = internalOptionMergeStrats[key] || strats && strats[key];
      to[key] = strat ? strat(to[key], from[key]) : from[key];
    }
  }
  return to;
}
const internalOptionMergeStrats = {
  data: mergeDataFn,
  props: mergeEmitsOrPropsOptions,
  emits: mergeEmitsOrPropsOptions,
  // objects
  methods: mergeObjectOptions,
  computed: mergeObjectOptions,
  // lifecycle
  beforeCreate: mergeAsArray,
  created: mergeAsArray,
  beforeMount: mergeAsArray,
  mounted: mergeAsArray,
  beforeUpdate: mergeAsArray,
  updated: mergeAsArray,
  beforeDestroy: mergeAsArray,
  beforeUnmount: mergeAsArray,
  destroyed: mergeAsArray,
  unmounted: mergeAsArray,
  activated: mergeAsArray,
  deactivated: mergeAsArray,
  errorCaptured: mergeAsArray,
  serverPrefetch: mergeAsArray,
  // assets
  components: mergeObjectOptions,
  directives: mergeObjectOptions,
  // watch
  watch: mergeWatchOptions,
  // provide / inject
  provide: mergeDataFn,
  inject: mergeInject
};
function mergeDataFn(to, from) {
  if (!from) {
    return to;
  }
  if (!to) {
    return from;
  }
  return function mergedDataFn() {
    return ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.extend))(
      (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isFunction)(to) ? to.call(this, this) : to,
      (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isFunction)(from) ? from.call(this, this) : from
    );
  };
}
function mergeInject(to, from) {
  return mergeObjectOptions(normalizeInject(to), normalizeInject(from));
}
function normalizeInject(raw) {
  if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isArray)(raw)) {
    const res = {};
    for (let i = 0; i < raw.length; i++) {
      res[raw[i]] = raw[i];
    }
    return res;
  }
  return raw;
}
function mergeAsArray(to, from) {
  return to ? [...new Set([].concat(to, from))] : from;
}
function mergeObjectOptions(to, from) {
  return to ? (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.extend)(/* @__PURE__ */ Object.create(null), to, from) : from;
}
function mergeEmitsOrPropsOptions(to, from) {
  if (to) {
    if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isArray)(to) && (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isArray)(from)) {
      return [.../* @__PURE__ */ new Set([...to, ...from])];
    }
    return (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.extend)(
      /* @__PURE__ */ Object.create(null),
      normalizePropsOrEmits(to),
      normalizePropsOrEmits(from != null ? from : {})
    );
  } else {
    return from;
  }
}
function mergeWatchOptions(to, from) {
  if (!to)
    return from;
  if (!from)
    return to;
  const merged = (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.extend)(/* @__PURE__ */ Object.create(null), to);
  for (const key in from) {
    merged[key] = mergeAsArray(to[key], from[key]);
  }
  return merged;
}

function createAppContext() {
  return {
    app: null,
    config: {
      isNativeTag: _vue_shared__WEBPACK_IMPORTED_MODULE_1__.NO,
      performance: false,
      globalProperties: {},
      optionMergeStrategies: {},
      errorHandler: void 0,
      warnHandler: void 0,
      compilerOptions: {}
    },
    mixins: [],
    components: {},
    directives: {},
    provides: /* @__PURE__ */ Object.create(null),
    optionsCache: /* @__PURE__ */ new WeakMap(),
    propsCache: /* @__PURE__ */ new WeakMap(),
    emitsCache: /* @__PURE__ */ new WeakMap()
  };
}
let uid$1 = 0;
function createAppAPI(render, hydrate) {
  return function createApp(rootComponent, rootProps = null) {
    if (!(0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isFunction)(rootComponent)) {
      rootComponent = (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.extend)({}, rootComponent);
    }
    if (rootProps != null && !(0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isObject)(rootProps)) {
       true && warn(`root props passed to app.mount() must be an object.`);
      rootProps = null;
    }
    const context = createAppContext();
    if (true) {
      Object.defineProperty(context.config, "unwrapInjectedRef", {
        get() {
          return true;
        },
        set() {
          warn(
            `app.config.unwrapInjectedRef has been deprecated. 3.3 now alawys unwraps injected refs in Options API.`
          );
        }
      });
    }
    const installedPlugins = /* @__PURE__ */ new Set();
    let isMounted = false;
    const app = context.app = {
      _uid: uid$1++,
      _component: rootComponent,
      _props: rootProps,
      _container: null,
      _context: context,
      _instance: null,
      version,
      get config() {
        return context.config;
      },
      set config(v) {
        if (true) {
          warn(
            `app.config cannot be replaced. Modify individual options instead.`
          );
        }
      },
      use(plugin, ...options) {
        if (installedPlugins.has(plugin)) {
           true && warn(`Plugin has already been applied to target app.`);
        } else if (plugin && (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isFunction)(plugin.install)) {
          installedPlugins.add(plugin);
          plugin.install(app, ...options);
        } else if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isFunction)(plugin)) {
          installedPlugins.add(plugin);
          plugin(app, ...options);
        } else if (true) {
          warn(
            `A plugin must either be a function or an object with an "install" function.`
          );
        }
        return app;
      },
      mixin(mixin) {
        if (true) {
          if (!context.mixins.includes(mixin)) {
            context.mixins.push(mixin);
          } else if (true) {
            warn(
              "Mixin has already been applied to target app" + (mixin.name ? `: ${mixin.name}` : "")
            );
          }
        } else {}
        return app;
      },
      component(name, component) {
        if (true) {
          validateComponentName(name, context.config);
        }
        if (!component) {
          return context.components[name];
        }
        if ( true && context.components[name]) {
          warn(`Component "${name}" has already been registered in target app.`);
        }
        context.components[name] = component;
        return app;
      },
      directive(name, directive) {
        if (true) {
          validateDirectiveName(name);
        }
        if (!directive) {
          return context.directives[name];
        }
        if ( true && context.directives[name]) {
          warn(`Directive "${name}" has already been registered in target app.`);
        }
        context.directives[name] = directive;
        return app;
      },
      mount(rootContainer, isHydrate, isSVG) {
        if (!isMounted) {
          if ( true && rootContainer.__vue_app__) {
            warn(
              `There is already an app instance mounted on the host container.
 If you want to mount another app on the same host container, you need to unmount the previous app by calling \`app.unmount()\` first.`
            );
          }
          const vnode = createVNode(
            rootComponent,
            rootProps
          );
          vnode.appContext = context;
          if (true) {
            context.reload = () => {
              render(cloneVNode(vnode), rootContainer, isSVG);
            };
          }
          if (isHydrate && hydrate) {
            hydrate(vnode, rootContainer);
          } else {
            render(vnode, rootContainer, isSVG);
          }
          isMounted = true;
          app._container = rootContainer;
          rootContainer.__vue_app__ = app;
          if (true) {
            app._instance = vnode.component;
            devtoolsInitApp(app, version);
          }
          return getExposeProxy(vnode.component) || vnode.component.proxy;
        } else if (true) {
          warn(
            `App has already been mounted.
If you want to remount the same app, move your app creation logic into a factory function and create fresh app instances for each mount - e.g. \`const createMyApp = () => createApp(App)\``
          );
        }
      },
      unmount() {
        if (isMounted) {
          render(null, app._container);
          if (true) {
            app._instance = null;
            devtoolsUnmountApp(app);
          }
          delete app._container.__vue_app__;
        } else if (true) {
          warn(`Cannot unmount an app that is not mounted.`);
        }
      },
      provide(key, value) {
        if ( true && key in context.provides) {
          warn(
            `App already provides property with key "${String(key)}". It will be overwritten with the new value.`
          );
        }
        context.provides[key] = value;
        return app;
      },
      runWithContext(fn) {
        currentApp = app;
        try {
          return fn();
        } finally {
          currentApp = null;
        }
      }
    };
    return app;
  };
}
let currentApp = null;

function provide(key, value) {
  if (!currentInstance) {
    if (true) {
      warn(`provide() can only be used inside setup().`);
    }
  } else {
    let provides = currentInstance.provides;
    const parentProvides = currentInstance.parent && currentInstance.parent.provides;
    if (parentProvides === provides) {
      provides = currentInstance.provides = Object.create(parentProvides);
    }
    provides[key] = value;
  }
}
function inject(key, defaultValue, treatDefaultAsFactory = false) {
  const instance = currentInstance || currentRenderingInstance;
  if (instance || currentApp) {
    const provides = instance ? instance.parent == null ? instance.vnode.appContext && instance.vnode.appContext.provides : instance.parent.provides : currentApp._context.provides;
    if (provides && key in provides) {
      return provides[key];
    } else if (arguments.length > 1) {
      return treatDefaultAsFactory && (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isFunction)(defaultValue) ? defaultValue.call(instance && instance.proxy) : defaultValue;
    } else if (true) {
      warn(`injection "${String(key)}" not found.`);
    }
  } else if (true) {
    warn(`inject() can only be used inside setup() or functional components.`);
  }
}
function hasInjectionContext() {
  return !!(currentInstance || currentRenderingInstance || currentApp);
}

function initProps(instance, rawProps, isStateful, isSSR = false) {
  const props = {};
  const attrs = {};
  (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.def)(attrs, InternalObjectKey, 1);
  instance.propsDefaults = /* @__PURE__ */ Object.create(null);
  setFullProps(instance, rawProps, props, attrs);
  for (const key in instance.propsOptions[0]) {
    if (!(key in props)) {
      props[key] = void 0;
    }
  }
  if (true) {
    validateProps(rawProps || {}, props, instance);
  }
  if (isStateful) {
    instance.props = isSSR ? props : (0,_vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.shallowReactive)(props);
  } else {
    if (!instance.type.props) {
      instance.props = attrs;
    } else {
      instance.props = props;
    }
  }
  instance.attrs = attrs;
}
function isInHmrContext(instance) {
  while (instance) {
    if (instance.type.__hmrId)
      return true;
    instance = instance.parent;
  }
}
function updateProps(instance, rawProps, rawPrevProps, optimized) {
  const {
    props,
    attrs,
    vnode: { patchFlag }
  } = instance;
  const rawCurrentProps = (0,_vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.toRaw)(props);
  const [options] = instance.propsOptions;
  let hasAttrsChanged = false;
  if (
    // always force full diff in dev
    // - #1942 if hmr is enabled with sfc component
    // - vite#872 non-sfc component used by sfc component
    !( true && isInHmrContext(instance)) && (optimized || patchFlag > 0) && !(patchFlag & 16)
  ) {
    if (patchFlag & 8) {
      const propsToUpdate = instance.vnode.dynamicProps;
      for (let i = 0; i < propsToUpdate.length; i++) {
        let key = propsToUpdate[i];
        if (isEmitListener(instance.emitsOptions, key)) {
          continue;
        }
        const value = rawProps[key];
        if (options) {
          if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.hasOwn)(attrs, key)) {
            if (value !== attrs[key]) {
              attrs[key] = value;
              hasAttrsChanged = true;
            }
          } else {
            const camelizedKey = (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.camelize)(key);
            props[camelizedKey] = resolvePropValue(
              options,
              rawCurrentProps,
              camelizedKey,
              value,
              instance,
              false
              /* isAbsent */
            );
          }
        } else {
          if (value !== attrs[key]) {
            attrs[key] = value;
            hasAttrsChanged = true;
          }
        }
      }
    }
  } else {
    if (setFullProps(instance, rawProps, props, attrs)) {
      hasAttrsChanged = true;
    }
    let kebabKey;
    for (const key in rawCurrentProps) {
      if (!rawProps || // for camelCase
      !(0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.hasOwn)(rawProps, key) && // it's possible the original props was passed in as kebab-case
      // and converted to camelCase (#955)
      ((kebabKey = (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.hyphenate)(key)) === key || !(0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.hasOwn)(rawProps, kebabKey))) {
        if (options) {
          if (rawPrevProps && // for camelCase
          (rawPrevProps[key] !== void 0 || // for kebab-case
          rawPrevProps[kebabKey] !== void 0)) {
            props[key] = resolvePropValue(
              options,
              rawCurrentProps,
              key,
              void 0,
              instance,
              true
              /* isAbsent */
            );
          }
        } else {
          delete props[key];
        }
      }
    }
    if (attrs !== rawCurrentProps) {
      for (const key in attrs) {
        if (!rawProps || !(0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.hasOwn)(rawProps, key) && true) {
          delete attrs[key];
          hasAttrsChanged = true;
        }
      }
    }
  }
  if (hasAttrsChanged) {
    (0,_vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.trigger)(instance, "set", "$attrs");
  }
  if (true) {
    validateProps(rawProps || {}, props, instance);
  }
}
function setFullProps(instance, rawProps, props, attrs) {
  const [options, needCastKeys] = instance.propsOptions;
  let hasAttrsChanged = false;
  let rawCastValues;
  if (rawProps) {
    for (let key in rawProps) {
      if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isReservedProp)(key)) {
        continue;
      }
      const value = rawProps[key];
      let camelKey;
      if (options && (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.hasOwn)(options, camelKey = (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.camelize)(key))) {
        if (!needCastKeys || !needCastKeys.includes(camelKey)) {
          props[camelKey] = value;
        } else {
          (rawCastValues || (rawCastValues = {}))[camelKey] = value;
        }
      } else if (!isEmitListener(instance.emitsOptions, key)) {
        if (!(key in attrs) || value !== attrs[key]) {
          attrs[key] = value;
          hasAttrsChanged = true;
        }
      }
    }
  }
  if (needCastKeys) {
    const rawCurrentProps = (0,_vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.toRaw)(props);
    const castValues = rawCastValues || _vue_shared__WEBPACK_IMPORTED_MODULE_1__.EMPTY_OBJ;
    for (let i = 0; i < needCastKeys.length; i++) {
      const key = needCastKeys[i];
      props[key] = resolvePropValue(
        options,
        rawCurrentProps,
        key,
        castValues[key],
        instance,
        !(0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.hasOwn)(castValues, key)
      );
    }
  }
  return hasAttrsChanged;
}
function resolvePropValue(options, props, key, value, instance, isAbsent) {
  const opt = options[key];
  if (opt != null) {
    const hasDefault = (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.hasOwn)(opt, "default");
    if (hasDefault && value === void 0) {
      const defaultValue = opt.default;
      if (opt.type !== Function && !opt.skipFactory && (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isFunction)(defaultValue)) {
        const { propsDefaults } = instance;
        if (key in propsDefaults) {
          value = propsDefaults[key];
        } else {
          setCurrentInstance(instance);
          value = propsDefaults[key] = defaultValue.call(
            null,
            props
          );
          unsetCurrentInstance();
        }
      } else {
        value = defaultValue;
      }
    }
    if (opt[0 /* shouldCast */]) {
      if (isAbsent && !hasDefault) {
        value = false;
      } else if (opt[1 /* shouldCastTrue */] && (value === "" || value === (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.hyphenate)(key))) {
        value = true;
      }
    }
  }
  return value;
}
function normalizePropsOptions(comp, appContext, asMixin = false) {
  const cache = appContext.propsCache;
  const cached = cache.get(comp);
  if (cached) {
    return cached;
  }
  const raw = comp.props;
  const normalized = {};
  const needCastKeys = [];
  let hasExtends = false;
  if ( true && !(0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isFunction)(comp)) {
    const extendProps = (raw2) => {
      hasExtends = true;
      const [props, keys] = normalizePropsOptions(raw2, appContext, true);
      (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.extend)(normalized, props);
      if (keys)
        needCastKeys.push(...keys);
    };
    if (!asMixin && appContext.mixins.length) {
      appContext.mixins.forEach(extendProps);
    }
    if (comp.extends) {
      extendProps(comp.extends);
    }
    if (comp.mixins) {
      comp.mixins.forEach(extendProps);
    }
  }
  if (!raw && !hasExtends) {
    if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isObject)(comp)) {
      cache.set(comp, _vue_shared__WEBPACK_IMPORTED_MODULE_1__.EMPTY_ARR);
    }
    return _vue_shared__WEBPACK_IMPORTED_MODULE_1__.EMPTY_ARR;
  }
  if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isArray)(raw)) {
    for (let i = 0; i < raw.length; i++) {
      if ( true && !(0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isString)(raw[i])) {
        warn(`props must be strings when using array syntax.`, raw[i]);
      }
      const normalizedKey = (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.camelize)(raw[i]);
      if (validatePropName(normalizedKey)) {
        normalized[normalizedKey] = _vue_shared__WEBPACK_IMPORTED_MODULE_1__.EMPTY_OBJ;
      }
    }
  } else if (raw) {
    if ( true && !(0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isObject)(raw)) {
      warn(`invalid props options`, raw);
    }
    for (const key in raw) {
      const normalizedKey = (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.camelize)(key);
      if (validatePropName(normalizedKey)) {
        const opt = raw[key];
        const prop = normalized[normalizedKey] = (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isArray)(opt) || (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isFunction)(opt) ? { type: opt } : (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.extend)({}, opt);
        if (prop) {
          const booleanIndex = getTypeIndex(Boolean, prop.type);
          const stringIndex = getTypeIndex(String, prop.type);
          prop[0 /* shouldCast */] = booleanIndex > -1;
          prop[1 /* shouldCastTrue */] = stringIndex < 0 || booleanIndex < stringIndex;
          if (booleanIndex > -1 || (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.hasOwn)(prop, "default")) {
            needCastKeys.push(normalizedKey);
          }
        }
      }
    }
  }
  const res = [normalized, needCastKeys];
  if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isObject)(comp)) {
    cache.set(comp, res);
  }
  return res;
}
function validatePropName(key) {
  if (key[0] !== "$") {
    return true;
  } else if (true) {
    warn(`Invalid prop name: "${key}" is a reserved property.`);
  }
  return false;
}
function getType(ctor) {
  const match = ctor && ctor.toString().match(/^\s*(function|class) (\w+)/);
  return match ? match[2] : ctor === null ? "null" : "";
}
function isSameType(a, b) {
  return getType(a) === getType(b);
}
function getTypeIndex(type, expectedTypes) {
  if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isArray)(expectedTypes)) {
    return expectedTypes.findIndex((t) => isSameType(t, type));
  } else if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isFunction)(expectedTypes)) {
    return isSameType(expectedTypes, type) ? 0 : -1;
  }
  return -1;
}
function validateProps(rawProps, props, instance) {
  const resolvedValues = (0,_vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.toRaw)(props);
  const options = instance.propsOptions[0];
  for (const key in options) {
    let opt = options[key];
    if (opt == null)
      continue;
    validateProp(
      key,
      resolvedValues[key],
      opt,
      !(0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.hasOwn)(rawProps, key) && !(0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.hasOwn)(rawProps, (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.hyphenate)(key))
    );
  }
}
function validateProp(name, value, prop, isAbsent) {
  const { type, required, validator, skipCheck } = prop;
  if (required && isAbsent) {
    warn('Missing required prop: "' + name + '"');
    return;
  }
  if (value == null && !required) {
    return;
  }
  if (type != null && type !== true && !skipCheck) {
    let isValid = false;
    const types = (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isArray)(type) ? type : [type];
    const expectedTypes = [];
    for (let i = 0; i < types.length && !isValid; i++) {
      const { valid, expectedType } = assertType(value, types[i]);
      expectedTypes.push(expectedType || "");
      isValid = valid;
    }
    if (!isValid) {
      warn(getInvalidTypeMessage(name, value, expectedTypes));
      return;
    }
  }
  if (validator && !validator(value)) {
    warn('Invalid prop: custom validator check failed for prop "' + name + '".');
  }
}
const isSimpleType = /* @__PURE__ */ (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.makeMap)(
  "String,Number,Boolean,Function,Symbol,BigInt"
);
function assertType(value, type) {
  let valid;
  const expectedType = getType(type);
  if (isSimpleType(expectedType)) {
    const t = typeof value;
    valid = t === expectedType.toLowerCase();
    if (!valid && t === "object") {
      valid = value instanceof type;
    }
  } else if (expectedType === "Object") {
    valid = (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isObject)(value);
  } else if (expectedType === "Array") {
    valid = (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isArray)(value);
  } else if (expectedType === "null") {
    valid = value === null;
  } else {
    valid = value instanceof type;
  }
  return {
    valid,
    expectedType
  };
}
function getInvalidTypeMessage(name, value, expectedTypes) {
  let message = `Invalid prop: type check failed for prop "${name}". Expected ${expectedTypes.map(_vue_shared__WEBPACK_IMPORTED_MODULE_1__.capitalize).join(" | ")}`;
  const expectedType = expectedTypes[0];
  const receivedType = (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.toRawType)(value);
  const expectedValue = styleValue(value, expectedType);
  const receivedValue = styleValue(value, receivedType);
  if (expectedTypes.length === 1 && isExplicable(expectedType) && !isBoolean(expectedType, receivedType)) {
    message += ` with value ${expectedValue}`;
  }
  message += `, got ${receivedType} `;
  if (isExplicable(receivedType)) {
    message += `with value ${receivedValue}.`;
  }
  return message;
}
function styleValue(value, type) {
  if (type === "String") {
    return `"${value}"`;
  } else if (type === "Number") {
    return `${Number(value)}`;
  } else {
    return `${value}`;
  }
}
function isExplicable(type) {
  const explicitTypes = ["string", "number", "boolean"];
  return explicitTypes.some((elem) => type.toLowerCase() === elem);
}
function isBoolean(...args) {
  return args.some((elem) => elem.toLowerCase() === "boolean");
}

const isInternalKey = (key) => key[0] === "_" || key === "$stable";
const normalizeSlotValue = (value) => (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isArray)(value) ? value.map(normalizeVNode) : [normalizeVNode(value)];
const normalizeSlot = (key, rawSlot, ctx) => {
  if (rawSlot._n) {
    return rawSlot;
  }
  const normalized = withCtx((...args) => {
    if ( true && currentInstance) {
      warn(
        `Slot "${key}" invoked outside of the render function: this will not track dependencies used in the slot. Invoke the slot function inside the render function instead.`
      );
    }
    return normalizeSlotValue(rawSlot(...args));
  }, ctx);
  normalized._c = false;
  return normalized;
};
const normalizeObjectSlots = (rawSlots, slots, instance) => {
  const ctx = rawSlots._ctx;
  for (const key in rawSlots) {
    if (isInternalKey(key))
      continue;
    const value = rawSlots[key];
    if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isFunction)(value)) {
      slots[key] = normalizeSlot(key, value, ctx);
    } else if (value != null) {
      if (true) {
        warn(
          `Non-function value encountered for slot "${key}". Prefer function slots for better performance.`
        );
      }
      const normalized = normalizeSlotValue(value);
      slots[key] = () => normalized;
    }
  }
};
const normalizeVNodeSlots = (instance, children) => {
  if ( true && !isKeepAlive(instance.vnode) && true) {
    warn(
      `Non-function value encountered for default slot. Prefer function slots for better performance.`
    );
  }
  const normalized = normalizeSlotValue(children);
  instance.slots.default = () => normalized;
};
const initSlots = (instance, children) => {
  if (instance.vnode.shapeFlag & 32) {
    const type = children._;
    if (type) {
      instance.slots = (0,_vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.toRaw)(children);
      (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.def)(children, "_", type);
    } else {
      normalizeObjectSlots(
        children,
        instance.slots = {});
    }
  } else {
    instance.slots = {};
    if (children) {
      normalizeVNodeSlots(instance, children);
    }
  }
  (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.def)(instance.slots, InternalObjectKey, 1);
};
const updateSlots = (instance, children, optimized) => {
  const { vnode, slots } = instance;
  let needDeletionCheck = true;
  let deletionComparisonTarget = _vue_shared__WEBPACK_IMPORTED_MODULE_1__.EMPTY_OBJ;
  if (vnode.shapeFlag & 32) {
    const type = children._;
    if (type) {
      if ( true && isHmrUpdating) {
        (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.extend)(slots, children);
        (0,_vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.trigger)(instance, "set", "$slots");
      } else if (optimized && type === 1) {
        needDeletionCheck = false;
      } else {
        (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.extend)(slots, children);
        if (!optimized && type === 1) {
          delete slots._;
        }
      }
    } else {
      needDeletionCheck = !children.$stable;
      normalizeObjectSlots(children, slots);
    }
    deletionComparisonTarget = children;
  } else if (children) {
    normalizeVNodeSlots(instance, children);
    deletionComparisonTarget = { default: 1 };
  }
  if (needDeletionCheck) {
    for (const key in slots) {
      if (!isInternalKey(key) && !(key in deletionComparisonTarget)) {
        delete slots[key];
      }
    }
  }
};

function setRef(rawRef, oldRawRef, parentSuspense, vnode, isUnmount = false) {
  if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isArray)(rawRef)) {
    rawRef.forEach(
      (r, i) => setRef(
        r,
        oldRawRef && ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isArray)(oldRawRef) ? oldRawRef[i] : oldRawRef),
        parentSuspense,
        vnode,
        isUnmount
      )
    );
    return;
  }
  if (isAsyncWrapper(vnode) && !isUnmount) {
    return;
  }
  const refValue = vnode.shapeFlag & 4 ? getExposeProxy(vnode.component) || vnode.component.proxy : vnode.el;
  const value = isUnmount ? null : refValue;
  const { i: owner, r: ref } = rawRef;
  if ( true && !owner) {
    warn(
      `Missing ref owner context. ref cannot be used on hoisted vnodes. A vnode with ref must be created inside the render function.`
    );
    return;
  }
  const oldRef = oldRawRef && oldRawRef.r;
  const refs = owner.refs === _vue_shared__WEBPACK_IMPORTED_MODULE_1__.EMPTY_OBJ ? owner.refs = {} : owner.refs;
  const setupState = owner.setupState;
  if (oldRef != null && oldRef !== ref) {
    if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isString)(oldRef)) {
      refs[oldRef] = null;
      if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.hasOwn)(setupState, oldRef)) {
        setupState[oldRef] = null;
      }
    } else if ((0,_vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.isRef)(oldRef)) {
      oldRef.value = null;
    }
  }
  if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isFunction)(ref)) {
    callWithErrorHandling(ref, owner, 12, [value, refs]);
  } else {
    const _isString = (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isString)(ref);
    const _isRef = (0,_vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.isRef)(ref);
    if (_isString || _isRef) {
      const doSet = () => {
        if (rawRef.f) {
          const existing = _isString ? (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.hasOwn)(setupState, ref) ? setupState[ref] : refs[ref] : ref.value;
          if (isUnmount) {
            (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isArray)(existing) && (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.remove)(existing, refValue);
          } else {
            if (!(0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isArray)(existing)) {
              if (_isString) {
                refs[ref] = [refValue];
                if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.hasOwn)(setupState, ref)) {
                  setupState[ref] = refs[ref];
                }
              } else {
                ref.value = [refValue];
                if (rawRef.k)
                  refs[rawRef.k] = ref.value;
              }
            } else if (!existing.includes(refValue)) {
              existing.push(refValue);
            }
          }
        } else if (_isString) {
          refs[ref] = value;
          if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.hasOwn)(setupState, ref)) {
            setupState[ref] = value;
          }
        } else if (_isRef) {
          ref.value = value;
          if (rawRef.k)
            refs[rawRef.k] = value;
        } else if (true) {
          warn("Invalid template ref type:", ref, `(${typeof ref})`);
        }
      };
      if (value) {
        doSet.id = -1;
        queuePostRenderEffect(doSet, parentSuspense);
      } else {
        doSet();
      }
    } else if (true) {
      warn("Invalid template ref type:", ref, `(${typeof ref})`);
    }
  }
}

let hasMismatch = false;
const isSVGContainer = (container) => /svg/.test(container.namespaceURI) && container.tagName !== "foreignObject";
const isComment = (node) => node.nodeType === 8 /* COMMENT */;
function createHydrationFunctions(rendererInternals) {
  const {
    mt: mountComponent,
    p: patch,
    o: {
      patchProp,
      createText,
      nextSibling,
      parentNode,
      remove,
      insert,
      createComment
    }
  } = rendererInternals;
  const hydrate = (vnode, container) => {
    if (!container.hasChildNodes()) {
       true && warn(
        `Attempting to hydrate existing markup but container is empty. Performing full mount instead.`
      );
      patch(null, vnode, container);
      flushPostFlushCbs();
      container._vnode = vnode;
      return;
    }
    hasMismatch = false;
    hydrateNode(container.firstChild, vnode, null, null, null);
    flushPostFlushCbs();
    container._vnode = vnode;
    if (hasMismatch && true) {
      console.error(`Hydration completed but contains mismatches.`);
    }
  };
  const hydrateNode = (node, vnode, parentComponent, parentSuspense, slotScopeIds, optimized = false) => {
    const isFragmentStart = isComment(node) && node.data === "[";
    const onMismatch = () => handleMismatch(
      node,
      vnode,
      parentComponent,
      parentSuspense,
      slotScopeIds,
      isFragmentStart
    );
    const { type, ref, shapeFlag, patchFlag } = vnode;
    let domType = node.nodeType;
    vnode.el = node;
    if (patchFlag === -2) {
      optimized = false;
      vnode.dynamicChildren = null;
    }
    let nextNode = null;
    switch (type) {
      case Text:
        if (domType !== 3 /* TEXT */) {
          if (vnode.children === "") {
            insert(vnode.el = createText(""), parentNode(node), node);
            nextNode = node;
          } else {
            nextNode = onMismatch();
          }
        } else {
          if (node.data !== vnode.children) {
            hasMismatch = true;
             true && warn(
              `Hydration text mismatch:
- Client: ${JSON.stringify(node.data)}
- Server: ${JSON.stringify(vnode.children)}`
            );
            node.data = vnode.children;
          }
          nextNode = nextSibling(node);
        }
        break;
      case Comment:
        if (domType !== 8 /* COMMENT */ || isFragmentStart) {
          nextNode = onMismatch();
        } else {
          nextNode = nextSibling(node);
        }
        break;
      case Static:
        if (isFragmentStart) {
          node = nextSibling(node);
          domType = node.nodeType;
        }
        if (domType === 1 /* ELEMENT */ || domType === 3 /* TEXT */) {
          nextNode = node;
          const needToAdoptContent = !vnode.children.length;
          for (let i = 0; i < vnode.staticCount; i++) {
            if (needToAdoptContent)
              vnode.children += nextNode.nodeType === 1 /* ELEMENT */ ? nextNode.outerHTML : nextNode.data;
            if (i === vnode.staticCount - 1) {
              vnode.anchor = nextNode;
            }
            nextNode = nextSibling(nextNode);
          }
          return isFragmentStart ? nextSibling(nextNode) : nextNode;
        } else {
          onMismatch();
        }
        break;
      case Fragment:
        if (!isFragmentStart) {
          nextNode = onMismatch();
        } else {
          nextNode = hydrateFragment(
            node,
            vnode,
            parentComponent,
            parentSuspense,
            slotScopeIds,
            optimized
          );
        }
        break;
      default:
        if (shapeFlag & 1) {
          if (domType !== 1 /* ELEMENT */ || vnode.type.toLowerCase() !== node.tagName.toLowerCase()) {
            nextNode = onMismatch();
          } else {
            nextNode = hydrateElement(
              node,
              vnode,
              parentComponent,
              parentSuspense,
              slotScopeIds,
              optimized
            );
          }
        } else if (shapeFlag & 6) {
          vnode.slotScopeIds = slotScopeIds;
          const container = parentNode(node);
          mountComponent(
            vnode,
            container,
            null,
            parentComponent,
            parentSuspense,
            isSVGContainer(container),
            optimized
          );
          nextNode = isFragmentStart ? locateClosingAsyncAnchor(node) : nextSibling(node);
          if (nextNode && isComment(nextNode) && nextNode.data === "teleport end") {
            nextNode = nextSibling(nextNode);
          }
          if (isAsyncWrapper(vnode)) {
            let subTree;
            if (isFragmentStart) {
              subTree = createVNode(Fragment);
              subTree.anchor = nextNode ? nextNode.previousSibling : container.lastChild;
            } else {
              subTree = node.nodeType === 3 ? createTextVNode("") : createVNode("div");
            }
            subTree.el = node;
            vnode.component.subTree = subTree;
          }
        } else if (shapeFlag & 64) {
          if (domType !== 8 /* COMMENT */) {
            nextNode = onMismatch();
          } else {
            nextNode = vnode.type.hydrate(
              node,
              vnode,
              parentComponent,
              parentSuspense,
              slotScopeIds,
              optimized,
              rendererInternals,
              hydrateChildren
            );
          }
        } else if (shapeFlag & 128) {
          nextNode = vnode.type.hydrate(
            node,
            vnode,
            parentComponent,
            parentSuspense,
            isSVGContainer(parentNode(node)),
            slotScopeIds,
            optimized,
            rendererInternals,
            hydrateNode
          );
        } else if (true) {
          warn("Invalid HostVNode type:", type, `(${typeof type})`);
        }
    }
    if (ref != null) {
      setRef(ref, null, parentSuspense, vnode);
    }
    return nextNode;
  };
  const hydrateElement = (el, vnode, parentComponent, parentSuspense, slotScopeIds, optimized) => {
    optimized = optimized || !!vnode.dynamicChildren;
    const { type, props, patchFlag, shapeFlag, dirs } = vnode;
    const forcePatchValue = type === "input" && dirs || type === "option";
    if (true) {
      if (dirs) {
        invokeDirectiveHook(vnode, null, parentComponent, "created");
      }
      if (props) {
        if (forcePatchValue || !optimized || patchFlag & (16 | 32)) {
          for (const key in props) {
            if (forcePatchValue && key.endsWith("value") || (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isOn)(key) && !(0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isReservedProp)(key)) {
              patchProp(
                el,
                key,
                null,
                props[key],
                false,
                void 0,
                parentComponent
              );
            }
          }
        } else if (props.onClick) {
          patchProp(
            el,
            "onClick",
            null,
            props.onClick,
            false,
            void 0,
            parentComponent
          );
        }
      }
      let vnodeHooks;
      if (vnodeHooks = props && props.onVnodeBeforeMount) {
        invokeVNodeHook(vnodeHooks, parentComponent, vnode);
      }
      if (dirs) {
        invokeDirectiveHook(vnode, null, parentComponent, "beforeMount");
      }
      if ((vnodeHooks = props && props.onVnodeMounted) || dirs) {
        queueEffectWithSuspense(() => {
          vnodeHooks && invokeVNodeHook(vnodeHooks, parentComponent, vnode);
          dirs && invokeDirectiveHook(vnode, null, parentComponent, "mounted");
        }, parentSuspense);
      }
      if (shapeFlag & 16 && // skip if element has innerHTML / textContent
      !(props && (props.innerHTML || props.textContent))) {
        let next = hydrateChildren(
          el.firstChild,
          vnode,
          el,
          parentComponent,
          parentSuspense,
          slotScopeIds,
          optimized
        );
        let hasWarned = false;
        while (next) {
          hasMismatch = true;
          if ( true && !hasWarned) {
            warn(
              `Hydration children mismatch in <${vnode.type}>: server rendered element contains more child nodes than client vdom.`
            );
            hasWarned = true;
          }
          const cur = next;
          next = next.nextSibling;
          remove(cur);
        }
      } else if (shapeFlag & 8) {
        if (el.textContent !== vnode.children) {
          hasMismatch = true;
           true && warn(
            `Hydration text content mismatch in <${vnode.type}>:
- Client: ${el.textContent}
- Server: ${vnode.children}`
          );
          el.textContent = vnode.children;
        }
      }
    }
    return el.nextSibling;
  };
  const hydrateChildren = (node, parentVNode, container, parentComponent, parentSuspense, slotScopeIds, optimized) => {
    optimized = optimized || !!parentVNode.dynamicChildren;
    const children = parentVNode.children;
    const l = children.length;
    let hasWarned = false;
    for (let i = 0; i < l; i++) {
      const vnode = optimized ? children[i] : children[i] = normalizeVNode(children[i]);
      if (node) {
        node = hydrateNode(
          node,
          vnode,
          parentComponent,
          parentSuspense,
          slotScopeIds,
          optimized
        );
      } else if (vnode.type === Text && !vnode.children) {
        continue;
      } else {
        hasMismatch = true;
        if ( true && !hasWarned) {
          warn(
            `Hydration children mismatch in <${container.tagName.toLowerCase()}>: server rendered element contains fewer child nodes than client vdom.`
          );
          hasWarned = true;
        }
        patch(
          null,
          vnode,
          container,
          null,
          parentComponent,
          parentSuspense,
          isSVGContainer(container),
          slotScopeIds
        );
      }
    }
    return node;
  };
  const hydrateFragment = (node, vnode, parentComponent, parentSuspense, slotScopeIds, optimized) => {
    const { slotScopeIds: fragmentSlotScopeIds } = vnode;
    if (fragmentSlotScopeIds) {
      slotScopeIds = slotScopeIds ? slotScopeIds.concat(fragmentSlotScopeIds) : fragmentSlotScopeIds;
    }
    const container = parentNode(node);
    const next = hydrateChildren(
      nextSibling(node),
      vnode,
      container,
      parentComponent,
      parentSuspense,
      slotScopeIds,
      optimized
    );
    if (next && isComment(next) && next.data === "]") {
      return nextSibling(vnode.anchor = next);
    } else {
      hasMismatch = true;
      insert(vnode.anchor = createComment(`]`), container, next);
      return next;
    }
  };
  const handleMismatch = (node, vnode, parentComponent, parentSuspense, slotScopeIds, isFragment) => {
    hasMismatch = true;
     true && warn(
      `Hydration node mismatch:
- Client vnode:`,
      vnode.type,
      `
- Server rendered DOM:`,
      node,
      node.nodeType === 3 /* TEXT */ ? `(text)` : isComment(node) && node.data === "[" ? `(start of fragment)` : ``
    );
    vnode.el = null;
    if (isFragment) {
      const end = locateClosingAsyncAnchor(node);
      while (true) {
        const next2 = nextSibling(node);
        if (next2 && next2 !== end) {
          remove(next2);
        } else {
          break;
        }
      }
    }
    const next = nextSibling(node);
    const container = parentNode(node);
    remove(node);
    patch(
      null,
      vnode,
      container,
      next,
      parentComponent,
      parentSuspense,
      isSVGContainer(container),
      slotScopeIds
    );
    return next;
  };
  const locateClosingAsyncAnchor = (node) => {
    let match = 0;
    while (node) {
      node = nextSibling(node);
      if (node && isComment(node)) {
        if (node.data === "[")
          match++;
        if (node.data === "]") {
          if (match === 0) {
            return nextSibling(node);
          } else {
            match--;
          }
        }
      }
    }
    return node;
  };
  return [hydrate, hydrateNode];
}

let supported;
let perf;
function startMeasure(instance, type) {
  if (instance.appContext.config.performance && isSupported()) {
    perf.mark(`vue-${type}-${instance.uid}`);
  }
  if (true) {
    devtoolsPerfStart(instance, type, isSupported() ? perf.now() : Date.now());
  }
}
function endMeasure(instance, type) {
  if (instance.appContext.config.performance && isSupported()) {
    const startTag = `vue-${type}-${instance.uid}`;
    const endTag = startTag + `:end`;
    perf.mark(endTag);
    perf.measure(
      `<${formatComponentName(instance, instance.type)}> ${type}`,
      startTag,
      endTag
    );
    perf.clearMarks(startTag);
    perf.clearMarks(endTag);
  }
  if (true) {
    devtoolsPerfEnd(instance, type, isSupported() ? perf.now() : Date.now());
  }
}
function isSupported() {
  if (supported !== void 0) {
    return supported;
  }
  if (typeof window !== "undefined" && window.performance) {
    supported = true;
    perf = window.performance;
  } else {
    supported = false;
  }
  return supported;
}

function initFeatureFlags() {
  const needWarn = [];
  if (false) {}
  if (false) {}
  if ( true && needWarn.length) {
    const multi = needWarn.length > 1;
    console.warn(
      `Feature flag${multi ? `s` : ``} ${needWarn.join(", ")} ${multi ? `are` : `is`} not explicitly defined. You are running the esm-bundler build of Vue, which expects these compile-time feature flags to be globally injected via the bundler config in order to get better tree-shaking in the production bundle.

For more details, see https://link.vuejs.org/feature-flags.`
    );
  }
}

const queuePostRenderEffect = queueEffectWithSuspense ;
function createRenderer(options) {
  return baseCreateRenderer(options);
}
function createHydrationRenderer(options) {
  return baseCreateRenderer(options, createHydrationFunctions);
}
function baseCreateRenderer(options, createHydrationFns) {
  {
    initFeatureFlags();
  }
  const target = (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.getGlobalThis)();
  target.__VUE__ = true;
  if (true) {
    setDevtoolsHook(target.__VUE_DEVTOOLS_GLOBAL_HOOK__, target);
  }
  const {
    insert: hostInsert,
    remove: hostRemove,
    patchProp: hostPatchProp,
    createElement: hostCreateElement,
    createText: hostCreateText,
    createComment: hostCreateComment,
    setText: hostSetText,
    setElementText: hostSetElementText,
    parentNode: hostParentNode,
    nextSibling: hostNextSibling,
    setScopeId: hostSetScopeId = _vue_shared__WEBPACK_IMPORTED_MODULE_1__.NOOP,
    insertStaticContent: hostInsertStaticContent
  } = options;
  const patch = (n1, n2, container, anchor = null, parentComponent = null, parentSuspense = null, isSVG = false, slotScopeIds = null, optimized =  true && isHmrUpdating ? false : !!n2.dynamicChildren) => {
    if (n1 === n2) {
      return;
    }
    if (n1 && !isSameVNodeType(n1, n2)) {
      anchor = getNextHostNode(n1);
      unmount(n1, parentComponent, parentSuspense, true);
      n1 = null;
    }
    if (n2.patchFlag === -2) {
      optimized = false;
      n2.dynamicChildren = null;
    }
    const { type, ref, shapeFlag } = n2;
    switch (type) {
      case Text:
        processText(n1, n2, container, anchor);
        break;
      case Comment:
        processCommentNode(n1, n2, container, anchor);
        break;
      case Static:
        if (n1 == null) {
          mountStaticNode(n2, container, anchor, isSVG);
        } else if (true) {
          patchStaticNode(n1, n2, container, isSVG);
        }
        break;
      case Fragment:
        processFragment(
          n1,
          n2,
          container,
          anchor,
          parentComponent,
          parentSuspense,
          isSVG,
          slotScopeIds,
          optimized
        );
        break;
      default:
        if (shapeFlag & 1) {
          processElement(
            n1,
            n2,
            container,
            anchor,
            parentComponent,
            parentSuspense,
            isSVG,
            slotScopeIds,
            optimized
          );
        } else if (shapeFlag & 6) {
          processComponent(
            n1,
            n2,
            container,
            anchor,
            parentComponent,
            parentSuspense,
            isSVG,
            slotScopeIds,
            optimized
          );
        } else if (shapeFlag & 64) {
          type.process(
            n1,
            n2,
            container,
            anchor,
            parentComponent,
            parentSuspense,
            isSVG,
            slotScopeIds,
            optimized,
            internals
          );
        } else if (shapeFlag & 128) {
          type.process(
            n1,
            n2,
            container,
            anchor,
            parentComponent,
            parentSuspense,
            isSVG,
            slotScopeIds,
            optimized,
            internals
          );
        } else if (true) {
          warn("Invalid VNode type:", type, `(${typeof type})`);
        }
    }
    if (ref != null && parentComponent) {
      setRef(ref, n1 && n1.ref, parentSuspense, n2 || n1, !n2);
    }
  };
  const processText = (n1, n2, container, anchor) => {
    if (n1 == null) {
      hostInsert(
        n2.el = hostCreateText(n2.children),
        container,
        anchor
      );
    } else {
      const el = n2.el = n1.el;
      if (n2.children !== n1.children) {
        hostSetText(el, n2.children);
      }
    }
  };
  const processCommentNode = (n1, n2, container, anchor) => {
    if (n1 == null) {
      hostInsert(
        n2.el = hostCreateComment(n2.children || ""),
        container,
        anchor
      );
    } else {
      n2.el = n1.el;
    }
  };
  const mountStaticNode = (n2, container, anchor, isSVG) => {
    [n2.el, n2.anchor] = hostInsertStaticContent(
      n2.children,
      container,
      anchor,
      isSVG,
      n2.el,
      n2.anchor
    );
  };
  const patchStaticNode = (n1, n2, container, isSVG) => {
    if (n2.children !== n1.children) {
      const anchor = hostNextSibling(n1.anchor);
      removeStaticNode(n1);
      [n2.el, n2.anchor] = hostInsertStaticContent(
        n2.children,
        container,
        anchor,
        isSVG
      );
    } else {
      n2.el = n1.el;
      n2.anchor = n1.anchor;
    }
  };
  const moveStaticNode = ({ el, anchor }, container, nextSibling) => {
    let next;
    while (el && el !== anchor) {
      next = hostNextSibling(el);
      hostInsert(el, container, nextSibling);
      el = next;
    }
    hostInsert(anchor, container, nextSibling);
  };
  const removeStaticNode = ({ el, anchor }) => {
    let next;
    while (el && el !== anchor) {
      next = hostNextSibling(el);
      hostRemove(el);
      el = next;
    }
    hostRemove(anchor);
  };
  const processElement = (n1, n2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized) => {
    isSVG = isSVG || n2.type === "svg";
    if (n1 == null) {
      mountElement(
        n2,
        container,
        anchor,
        parentComponent,
        parentSuspense,
        isSVG,
        slotScopeIds,
        optimized
      );
    } else {
      patchElement(
        n1,
        n2,
        parentComponent,
        parentSuspense,
        isSVG,
        slotScopeIds,
        optimized
      );
    }
  };
  const mountElement = (vnode, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized) => {
    let el;
    let vnodeHook;
    const { type, props, shapeFlag, transition, dirs } = vnode;
    el = vnode.el = hostCreateElement(
      vnode.type,
      isSVG,
      props && props.is,
      props
    );
    if (shapeFlag & 8) {
      hostSetElementText(el, vnode.children);
    } else if (shapeFlag & 16) {
      mountChildren(
        vnode.children,
        el,
        null,
        parentComponent,
        parentSuspense,
        isSVG && type !== "foreignObject",
        slotScopeIds,
        optimized
      );
    }
    if (dirs) {
      invokeDirectiveHook(vnode, null, parentComponent, "created");
    }
    setScopeId(el, vnode, vnode.scopeId, slotScopeIds, parentComponent);
    if (props) {
      for (const key in props) {
        if (key !== "value" && !(0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isReservedProp)(key)) {
          hostPatchProp(
            el,
            key,
            null,
            props[key],
            isSVG,
            vnode.children,
            parentComponent,
            parentSuspense,
            unmountChildren
          );
        }
      }
      if ("value" in props) {
        hostPatchProp(el, "value", null, props.value);
      }
      if (vnodeHook = props.onVnodeBeforeMount) {
        invokeVNodeHook(vnodeHook, parentComponent, vnode);
      }
    }
    if (true) {
      Object.defineProperty(el, "__vnode", {
        value: vnode,
        enumerable: false
      });
      Object.defineProperty(el, "__vueParentComponent", {
        value: parentComponent,
        enumerable: false
      });
    }
    if (dirs) {
      invokeDirectiveHook(vnode, null, parentComponent, "beforeMount");
    }
    const needCallTransitionHooks = (!parentSuspense || parentSuspense && !parentSuspense.pendingBranch) && transition && !transition.persisted;
    if (needCallTransitionHooks) {
      transition.beforeEnter(el);
    }
    hostInsert(el, container, anchor);
    if ((vnodeHook = props && props.onVnodeMounted) || needCallTransitionHooks || dirs) {
      queuePostRenderEffect(() => {
        vnodeHook && invokeVNodeHook(vnodeHook, parentComponent, vnode);
        needCallTransitionHooks && transition.enter(el);
        dirs && invokeDirectiveHook(vnode, null, parentComponent, "mounted");
      }, parentSuspense);
    }
  };
  const setScopeId = (el, vnode, scopeId, slotScopeIds, parentComponent) => {
    if (scopeId) {
      hostSetScopeId(el, scopeId);
    }
    if (slotScopeIds) {
      for (let i = 0; i < slotScopeIds.length; i++) {
        hostSetScopeId(el, slotScopeIds[i]);
      }
    }
    if (parentComponent) {
      let subTree = parentComponent.subTree;
      if ( true && subTree.patchFlag > 0 && subTree.patchFlag & 2048) {
        subTree = filterSingleRoot(subTree.children) || subTree;
      }
      if (vnode === subTree) {
        const parentVNode = parentComponent.vnode;
        setScopeId(
          el,
          parentVNode,
          parentVNode.scopeId,
          parentVNode.slotScopeIds,
          parentComponent.parent
        );
      }
    }
  };
  const mountChildren = (children, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized, start = 0) => {
    for (let i = start; i < children.length; i++) {
      const child = children[i] = optimized ? cloneIfMounted(children[i]) : normalizeVNode(children[i]);
      patch(
        null,
        child,
        container,
        anchor,
        parentComponent,
        parentSuspense,
        isSVG,
        slotScopeIds,
        optimized
      );
    }
  };
  const patchElement = (n1, n2, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized) => {
    const el = n2.el = n1.el;
    let { patchFlag, dynamicChildren, dirs } = n2;
    patchFlag |= n1.patchFlag & 16;
    const oldProps = n1.props || _vue_shared__WEBPACK_IMPORTED_MODULE_1__.EMPTY_OBJ;
    const newProps = n2.props || _vue_shared__WEBPACK_IMPORTED_MODULE_1__.EMPTY_OBJ;
    let vnodeHook;
    parentComponent && toggleRecurse(parentComponent, false);
    if (vnodeHook = newProps.onVnodeBeforeUpdate) {
      invokeVNodeHook(vnodeHook, parentComponent, n2, n1);
    }
    if (dirs) {
      invokeDirectiveHook(n2, n1, parentComponent, "beforeUpdate");
    }
    parentComponent && toggleRecurse(parentComponent, true);
    if ( true && isHmrUpdating) {
      patchFlag = 0;
      optimized = false;
      dynamicChildren = null;
    }
    const areChildrenSVG = isSVG && n2.type !== "foreignObject";
    if (dynamicChildren) {
      patchBlockChildren(
        n1.dynamicChildren,
        dynamicChildren,
        el,
        parentComponent,
        parentSuspense,
        areChildrenSVG,
        slotScopeIds
      );
      if (true) {
        traverseStaticChildren(n1, n2);
      }
    } else if (!optimized) {
      patchChildren(
        n1,
        n2,
        el,
        null,
        parentComponent,
        parentSuspense,
        areChildrenSVG,
        slotScopeIds,
        false
      );
    }
    if (patchFlag > 0) {
      if (patchFlag & 16) {
        patchProps(
          el,
          n2,
          oldProps,
          newProps,
          parentComponent,
          parentSuspense,
          isSVG
        );
      } else {
        if (patchFlag & 2) {
          if (oldProps.class !== newProps.class) {
            hostPatchProp(el, "class", null, newProps.class, isSVG);
          }
        }
        if (patchFlag & 4) {
          hostPatchProp(el, "style", oldProps.style, newProps.style, isSVG);
        }
        if (patchFlag & 8) {
          const propsToUpdate = n2.dynamicProps;
          for (let i = 0; i < propsToUpdate.length; i++) {
            const key = propsToUpdate[i];
            const prev = oldProps[key];
            const next = newProps[key];
            if (next !== prev || key === "value") {
              hostPatchProp(
                el,
                key,
                prev,
                next,
                isSVG,
                n1.children,
                parentComponent,
                parentSuspense,
                unmountChildren
              );
            }
          }
        }
      }
      if (patchFlag & 1) {
        if (n1.children !== n2.children) {
          hostSetElementText(el, n2.children);
        }
      }
    } else if (!optimized && dynamicChildren == null) {
      patchProps(
        el,
        n2,
        oldProps,
        newProps,
        parentComponent,
        parentSuspense,
        isSVG
      );
    }
    if ((vnodeHook = newProps.onVnodeUpdated) || dirs) {
      queuePostRenderEffect(() => {
        vnodeHook && invokeVNodeHook(vnodeHook, parentComponent, n2, n1);
        dirs && invokeDirectiveHook(n2, n1, parentComponent, "updated");
      }, parentSuspense);
    }
  };
  const patchBlockChildren = (oldChildren, newChildren, fallbackContainer, parentComponent, parentSuspense, isSVG, slotScopeIds) => {
    for (let i = 0; i < newChildren.length; i++) {
      const oldVNode = oldChildren[i];
      const newVNode = newChildren[i];
      const container = (
        // oldVNode may be an errored async setup() component inside Suspense
        // which will not have a mounted element
        oldVNode.el && // - In the case of a Fragment, we need to provide the actual parent
        // of the Fragment itself so it can move its children.
        (oldVNode.type === Fragment || // - In the case of different nodes, there is going to be a replacement
        // which also requires the correct parent container
        !isSameVNodeType(oldVNode, newVNode) || // - In the case of a component, it could contain anything.
        oldVNode.shapeFlag & (6 | 64)) ? hostParentNode(oldVNode.el) : (
          // In other cases, the parent container is not actually used so we
          // just pass the block element here to avoid a DOM parentNode call.
          fallbackContainer
        )
      );
      patch(
        oldVNode,
        newVNode,
        container,
        null,
        parentComponent,
        parentSuspense,
        isSVG,
        slotScopeIds,
        true
      );
    }
  };
  const patchProps = (el, vnode, oldProps, newProps, parentComponent, parentSuspense, isSVG) => {
    if (oldProps !== newProps) {
      if (oldProps !== _vue_shared__WEBPACK_IMPORTED_MODULE_1__.EMPTY_OBJ) {
        for (const key in oldProps) {
          if (!(0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isReservedProp)(key) && !(key in newProps)) {
            hostPatchProp(
              el,
              key,
              oldProps[key],
              null,
              isSVG,
              vnode.children,
              parentComponent,
              parentSuspense,
              unmountChildren
            );
          }
        }
      }
      for (const key in newProps) {
        if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isReservedProp)(key))
          continue;
        const next = newProps[key];
        const prev = oldProps[key];
        if (next !== prev && key !== "value") {
          hostPatchProp(
            el,
            key,
            prev,
            next,
            isSVG,
            vnode.children,
            parentComponent,
            parentSuspense,
            unmountChildren
          );
        }
      }
      if ("value" in newProps) {
        hostPatchProp(el, "value", oldProps.value, newProps.value);
      }
    }
  };
  const processFragment = (n1, n2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized) => {
    const fragmentStartAnchor = n2.el = n1 ? n1.el : hostCreateText("");
    const fragmentEndAnchor = n2.anchor = n1 ? n1.anchor : hostCreateText("");
    let { patchFlag, dynamicChildren, slotScopeIds: fragmentSlotScopeIds } = n2;
    if ( true && // #5523 dev root fragment may inherit directives
    (isHmrUpdating || patchFlag & 2048)) {
      patchFlag = 0;
      optimized = false;
      dynamicChildren = null;
    }
    if (fragmentSlotScopeIds) {
      slotScopeIds = slotScopeIds ? slotScopeIds.concat(fragmentSlotScopeIds) : fragmentSlotScopeIds;
    }
    if (n1 == null) {
      hostInsert(fragmentStartAnchor, container, anchor);
      hostInsert(fragmentEndAnchor, container, anchor);
      mountChildren(
        n2.children,
        container,
        fragmentEndAnchor,
        parentComponent,
        parentSuspense,
        isSVG,
        slotScopeIds,
        optimized
      );
    } else {
      if (patchFlag > 0 && patchFlag & 64 && dynamicChildren && // #2715 the previous fragment could've been a BAILed one as a result
      // of renderSlot() with no valid children
      n1.dynamicChildren) {
        patchBlockChildren(
          n1.dynamicChildren,
          dynamicChildren,
          container,
          parentComponent,
          parentSuspense,
          isSVG,
          slotScopeIds
        );
        if (true) {
          traverseStaticChildren(n1, n2);
        } else {}
      } else {
        patchChildren(
          n1,
          n2,
          container,
          fragmentEndAnchor,
          parentComponent,
          parentSuspense,
          isSVG,
          slotScopeIds,
          optimized
        );
      }
    }
  };
  const processComponent = (n1, n2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized) => {
    n2.slotScopeIds = slotScopeIds;
    if (n1 == null) {
      if (n2.shapeFlag & 512) {
        parentComponent.ctx.activate(
          n2,
          container,
          anchor,
          isSVG,
          optimized
        );
      } else {
        mountComponent(
          n2,
          container,
          anchor,
          parentComponent,
          parentSuspense,
          isSVG,
          optimized
        );
      }
    } else {
      updateComponent(n1, n2, optimized);
    }
  };
  const mountComponent = (initialVNode, container, anchor, parentComponent, parentSuspense, isSVG, optimized) => {
    const instance = (initialVNode.component = createComponentInstance(
      initialVNode,
      parentComponent,
      parentSuspense
    ));
    if ( true && instance.type.__hmrId) {
      registerHMR(instance);
    }
    if (true) {
      pushWarningContext(initialVNode);
      startMeasure(instance, `mount`);
    }
    if (isKeepAlive(initialVNode)) {
      instance.ctx.renderer = internals;
    }
    {
      if (true) {
        startMeasure(instance, `init`);
      }
      setupComponent(instance);
      if (true) {
        endMeasure(instance, `init`);
      }
    }
    if (instance.asyncDep) {
      parentSuspense && parentSuspense.registerDep(instance, setupRenderEffect);
      if (!initialVNode.el) {
        const placeholder = instance.subTree = createVNode(Comment);
        processCommentNode(null, placeholder, container, anchor);
      }
      return;
    }
    setupRenderEffect(
      instance,
      initialVNode,
      container,
      anchor,
      parentSuspense,
      isSVG,
      optimized
    );
    if (true) {
      popWarningContext();
      endMeasure(instance, `mount`);
    }
  };
  const updateComponent = (n1, n2, optimized) => {
    const instance = n2.component = n1.component;
    if (shouldUpdateComponent(n1, n2, optimized)) {
      if (instance.asyncDep && !instance.asyncResolved) {
        if (true) {
          pushWarningContext(n2);
        }
        updateComponentPreRender(instance, n2, optimized);
        if (true) {
          popWarningContext();
        }
        return;
      } else {
        instance.next = n2;
        invalidateJob(instance.update);
        instance.update();
      }
    } else {
      n2.el = n1.el;
      instance.vnode = n2;
    }
  };
  const setupRenderEffect = (instance, initialVNode, container, anchor, parentSuspense, isSVG, optimized) => {
    const componentUpdateFn = () => {
      if (!instance.isMounted) {
        let vnodeHook;
        const { el, props } = initialVNode;
        const { bm, m, parent } = instance;
        const isAsyncWrapperVNode = isAsyncWrapper(initialVNode);
        toggleRecurse(instance, false);
        if (bm) {
          (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.invokeArrayFns)(bm);
        }
        if (!isAsyncWrapperVNode && (vnodeHook = props && props.onVnodeBeforeMount)) {
          invokeVNodeHook(vnodeHook, parent, initialVNode);
        }
        toggleRecurse(instance, true);
        if (el && hydrateNode) {
          const hydrateSubTree = () => {
            if (true) {
              startMeasure(instance, `render`);
            }
            instance.subTree = renderComponentRoot(instance);
            if (true) {
              endMeasure(instance, `render`);
            }
            if (true) {
              startMeasure(instance, `hydrate`);
            }
            hydrateNode(
              el,
              instance.subTree,
              instance,
              parentSuspense,
              null
            );
            if (true) {
              endMeasure(instance, `hydrate`);
            }
          };
          if (isAsyncWrapperVNode) {
            initialVNode.type.__asyncLoader().then(
              // note: we are moving the render call into an async callback,
              // which means it won't track dependencies - but it's ok because
              // a server-rendered async wrapper is already in resolved state
              // and it will never need to change.
              () => !instance.isUnmounted && hydrateSubTree()
            );
          } else {
            hydrateSubTree();
          }
        } else {
          if (true) {
            startMeasure(instance, `render`);
          }
          const subTree = instance.subTree = renderComponentRoot(instance);
          if (true) {
            endMeasure(instance, `render`);
          }
          if (true) {
            startMeasure(instance, `patch`);
          }
          patch(
            null,
            subTree,
            container,
            anchor,
            instance,
            parentSuspense,
            isSVG
          );
          if (true) {
            endMeasure(instance, `patch`);
          }
          initialVNode.el = subTree.el;
        }
        if (m) {
          queuePostRenderEffect(m, parentSuspense);
        }
        if (!isAsyncWrapperVNode && (vnodeHook = props && props.onVnodeMounted)) {
          const scopedInitialVNode = initialVNode;
          queuePostRenderEffect(
            () => invokeVNodeHook(vnodeHook, parent, scopedInitialVNode),
            parentSuspense
          );
        }
        if (initialVNode.shapeFlag & 256 || parent && isAsyncWrapper(parent.vnode) && parent.vnode.shapeFlag & 256) {
          instance.a && queuePostRenderEffect(instance.a, parentSuspense);
        }
        instance.isMounted = true;
        if (true) {
          devtoolsComponentAdded(instance);
        }
        initialVNode = container = anchor = null;
      } else {
        let { next, bu, u, parent, vnode } = instance;
        let originNext = next;
        let vnodeHook;
        if (true) {
          pushWarningContext(next || instance.vnode);
        }
        toggleRecurse(instance, false);
        if (next) {
          next.el = vnode.el;
          updateComponentPreRender(instance, next, optimized);
        } else {
          next = vnode;
        }
        if (bu) {
          (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.invokeArrayFns)(bu);
        }
        if (vnodeHook = next.props && next.props.onVnodeBeforeUpdate) {
          invokeVNodeHook(vnodeHook, parent, next, vnode);
        }
        toggleRecurse(instance, true);
        if (true) {
          startMeasure(instance, `render`);
        }
        const nextTree = renderComponentRoot(instance);
        if (true) {
          endMeasure(instance, `render`);
        }
        const prevTree = instance.subTree;
        instance.subTree = nextTree;
        if (true) {
          startMeasure(instance, `patch`);
        }
        patch(
          prevTree,
          nextTree,
          // parent may have changed if it's in a teleport
          hostParentNode(prevTree.el),
          // anchor may have changed if it's in a fragment
          getNextHostNode(prevTree),
          instance,
          parentSuspense,
          isSVG
        );
        if (true) {
          endMeasure(instance, `patch`);
        }
        next.el = nextTree.el;
        if (originNext === null) {
          updateHOCHostEl(instance, nextTree.el);
        }
        if (u) {
          queuePostRenderEffect(u, parentSuspense);
        }
        if (vnodeHook = next.props && next.props.onVnodeUpdated) {
          queuePostRenderEffect(
            () => invokeVNodeHook(vnodeHook, parent, next, vnode),
            parentSuspense
          );
        }
        if (true) {
          devtoolsComponentUpdated(instance);
        }
        if (true) {
          popWarningContext();
        }
      }
    };
    const effect = instance.effect = new _vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.ReactiveEffect(
      componentUpdateFn,
      () => queueJob(update),
      instance.scope
      // track it in component's effect scope
    );
    const update = instance.update = () => effect.run();
    update.id = instance.uid;
    toggleRecurse(instance, true);
    if (true) {
      effect.onTrack = instance.rtc ? (e) => (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.invokeArrayFns)(instance.rtc, e) : void 0;
      effect.onTrigger = instance.rtg ? (e) => (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.invokeArrayFns)(instance.rtg, e) : void 0;
      update.ownerInstance = instance;
    }
    update();
  };
  const updateComponentPreRender = (instance, nextVNode, optimized) => {
    nextVNode.component = instance;
    const prevProps = instance.vnode.props;
    instance.vnode = nextVNode;
    instance.next = null;
    updateProps(instance, nextVNode.props, prevProps, optimized);
    updateSlots(instance, nextVNode.children, optimized);
    (0,_vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.pauseTracking)();
    flushPreFlushCbs();
    (0,_vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.resetTracking)();
  };
  const patchChildren = (n1, n2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized = false) => {
    const c1 = n1 && n1.children;
    const prevShapeFlag = n1 ? n1.shapeFlag : 0;
    const c2 = n2.children;
    const { patchFlag, shapeFlag } = n2;
    if (patchFlag > 0) {
      if (patchFlag & 128) {
        patchKeyedChildren(
          c1,
          c2,
          container,
          anchor,
          parentComponent,
          parentSuspense,
          isSVG,
          slotScopeIds,
          optimized
        );
        return;
      } else if (patchFlag & 256) {
        patchUnkeyedChildren(
          c1,
          c2,
          container,
          anchor,
          parentComponent,
          parentSuspense,
          isSVG,
          slotScopeIds,
          optimized
        );
        return;
      }
    }
    if (shapeFlag & 8) {
      if (prevShapeFlag & 16) {
        unmountChildren(c1, parentComponent, parentSuspense);
      }
      if (c2 !== c1) {
        hostSetElementText(container, c2);
      }
    } else {
      if (prevShapeFlag & 16) {
        if (shapeFlag & 16) {
          patchKeyedChildren(
            c1,
            c2,
            container,
            anchor,
            parentComponent,
            parentSuspense,
            isSVG,
            slotScopeIds,
            optimized
          );
        } else {
          unmountChildren(c1, parentComponent, parentSuspense, true);
        }
      } else {
        if (prevShapeFlag & 8) {
          hostSetElementText(container, "");
        }
        if (shapeFlag & 16) {
          mountChildren(
            c2,
            container,
            anchor,
            parentComponent,
            parentSuspense,
            isSVG,
            slotScopeIds,
            optimized
          );
        }
      }
    }
  };
  const patchUnkeyedChildren = (c1, c2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized) => {
    c1 = c1 || _vue_shared__WEBPACK_IMPORTED_MODULE_1__.EMPTY_ARR;
    c2 = c2 || _vue_shared__WEBPACK_IMPORTED_MODULE_1__.EMPTY_ARR;
    const oldLength = c1.length;
    const newLength = c2.length;
    const commonLength = Math.min(oldLength, newLength);
    let i;
    for (i = 0; i < commonLength; i++) {
      const nextChild = c2[i] = optimized ? cloneIfMounted(c2[i]) : normalizeVNode(c2[i]);
      patch(
        c1[i],
        nextChild,
        container,
        null,
        parentComponent,
        parentSuspense,
        isSVG,
        slotScopeIds,
        optimized
      );
    }
    if (oldLength > newLength) {
      unmountChildren(
        c1,
        parentComponent,
        parentSuspense,
        true,
        false,
        commonLength
      );
    } else {
      mountChildren(
        c2,
        container,
        anchor,
        parentComponent,
        parentSuspense,
        isSVG,
        slotScopeIds,
        optimized,
        commonLength
      );
    }
  };
  const patchKeyedChildren = (c1, c2, container, parentAnchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized) => {
    let i = 0;
    const l2 = c2.length;
    let e1 = c1.length - 1;
    let e2 = l2 - 1;
    while (i <= e1 && i <= e2) {
      const n1 = c1[i];
      const n2 = c2[i] = optimized ? cloneIfMounted(c2[i]) : normalizeVNode(c2[i]);
      if (isSameVNodeType(n1, n2)) {
        patch(
          n1,
          n2,
          container,
          null,
          parentComponent,
          parentSuspense,
          isSVG,
          slotScopeIds,
          optimized
        );
      } else {
        break;
      }
      i++;
    }
    while (i <= e1 && i <= e2) {
      const n1 = c1[e1];
      const n2 = c2[e2] = optimized ? cloneIfMounted(c2[e2]) : normalizeVNode(c2[e2]);
      if (isSameVNodeType(n1, n2)) {
        patch(
          n1,
          n2,
          container,
          null,
          parentComponent,
          parentSuspense,
          isSVG,
          slotScopeIds,
          optimized
        );
      } else {
        break;
      }
      e1--;
      e2--;
    }
    if (i > e1) {
      if (i <= e2) {
        const nextPos = e2 + 1;
        const anchor = nextPos < l2 ? c2[nextPos].el : parentAnchor;
        while (i <= e2) {
          patch(
            null,
            c2[i] = optimized ? cloneIfMounted(c2[i]) : normalizeVNode(c2[i]),
            container,
            anchor,
            parentComponent,
            parentSuspense,
            isSVG,
            slotScopeIds,
            optimized
          );
          i++;
        }
      }
    } else if (i > e2) {
      while (i <= e1) {
        unmount(c1[i], parentComponent, parentSuspense, true);
        i++;
      }
    } else {
      const s1 = i;
      const s2 = i;
      const keyToNewIndexMap = /* @__PURE__ */ new Map();
      for (i = s2; i <= e2; i++) {
        const nextChild = c2[i] = optimized ? cloneIfMounted(c2[i]) : normalizeVNode(c2[i]);
        if (nextChild.key != null) {
          if ( true && keyToNewIndexMap.has(nextChild.key)) {
            warn(
              `Duplicate keys found during update:`,
              JSON.stringify(nextChild.key),
              `Make sure keys are unique.`
            );
          }
          keyToNewIndexMap.set(nextChild.key, i);
        }
      }
      let j;
      let patched = 0;
      const toBePatched = e2 - s2 + 1;
      let moved = false;
      let maxNewIndexSoFar = 0;
      const newIndexToOldIndexMap = new Array(toBePatched);
      for (i = 0; i < toBePatched; i++)
        newIndexToOldIndexMap[i] = 0;
      for (i = s1; i <= e1; i++) {
        const prevChild = c1[i];
        if (patched >= toBePatched) {
          unmount(prevChild, parentComponent, parentSuspense, true);
          continue;
        }
        let newIndex;
        if (prevChild.key != null) {
          newIndex = keyToNewIndexMap.get(prevChild.key);
        } else {
          for (j = s2; j <= e2; j++) {
            if (newIndexToOldIndexMap[j - s2] === 0 && isSameVNodeType(prevChild, c2[j])) {
              newIndex = j;
              break;
            }
          }
        }
        if (newIndex === void 0) {
          unmount(prevChild, parentComponent, parentSuspense, true);
        } else {
          newIndexToOldIndexMap[newIndex - s2] = i + 1;
          if (newIndex >= maxNewIndexSoFar) {
            maxNewIndexSoFar = newIndex;
          } else {
            moved = true;
          }
          patch(
            prevChild,
            c2[newIndex],
            container,
            null,
            parentComponent,
            parentSuspense,
            isSVG,
            slotScopeIds,
            optimized
          );
          patched++;
        }
      }
      const increasingNewIndexSequence = moved ? getSequence(newIndexToOldIndexMap) : _vue_shared__WEBPACK_IMPORTED_MODULE_1__.EMPTY_ARR;
      j = increasingNewIndexSequence.length - 1;
      for (i = toBePatched - 1; i >= 0; i--) {
        const nextIndex = s2 + i;
        const nextChild = c2[nextIndex];
        const anchor = nextIndex + 1 < l2 ? c2[nextIndex + 1].el : parentAnchor;
        if (newIndexToOldIndexMap[i] === 0) {
          patch(
            null,
            nextChild,
            container,
            anchor,
            parentComponent,
            parentSuspense,
            isSVG,
            slotScopeIds,
            optimized
          );
        } else if (moved) {
          if (j < 0 || i !== increasingNewIndexSequence[j]) {
            move(nextChild, container, anchor, 2);
          } else {
            j--;
          }
        }
      }
    }
  };
  const move = (vnode, container, anchor, moveType, parentSuspense = null) => {
    const { el, type, transition, children, shapeFlag } = vnode;
    if (shapeFlag & 6) {
      move(vnode.component.subTree, container, anchor, moveType);
      return;
    }
    if (shapeFlag & 128) {
      vnode.suspense.move(container, anchor, moveType);
      return;
    }
    if (shapeFlag & 64) {
      type.move(vnode, container, anchor, internals);
      return;
    }
    if (type === Fragment) {
      hostInsert(el, container, anchor);
      for (let i = 0; i < children.length; i++) {
        move(children[i], container, anchor, moveType);
      }
      hostInsert(vnode.anchor, container, anchor);
      return;
    }
    if (type === Static) {
      moveStaticNode(vnode, container, anchor);
      return;
    }
    const needTransition = moveType !== 2 && shapeFlag & 1 && transition;
    if (needTransition) {
      if (moveType === 0) {
        transition.beforeEnter(el);
        hostInsert(el, container, anchor);
        queuePostRenderEffect(() => transition.enter(el), parentSuspense);
      } else {
        const { leave, delayLeave, afterLeave } = transition;
        const remove2 = () => hostInsert(el, container, anchor);
        const performLeave = () => {
          leave(el, () => {
            remove2();
            afterLeave && afterLeave();
          });
        };
        if (delayLeave) {
          delayLeave(el, remove2, performLeave);
        } else {
          performLeave();
        }
      }
    } else {
      hostInsert(el, container, anchor);
    }
  };
  const unmount = (vnode, parentComponent, parentSuspense, doRemove = false, optimized = false) => {
    const {
      type,
      props,
      ref,
      children,
      dynamicChildren,
      shapeFlag,
      patchFlag,
      dirs
    } = vnode;
    if (ref != null) {
      setRef(ref, null, parentSuspense, vnode, true);
    }
    if (shapeFlag & 256) {
      parentComponent.ctx.deactivate(vnode);
      return;
    }
    const shouldInvokeDirs = shapeFlag & 1 && dirs;
    const shouldInvokeVnodeHook = !isAsyncWrapper(vnode);
    let vnodeHook;
    if (shouldInvokeVnodeHook && (vnodeHook = props && props.onVnodeBeforeUnmount)) {
      invokeVNodeHook(vnodeHook, parentComponent, vnode);
    }
    if (shapeFlag & 6) {
      unmountComponent(vnode.component, parentSuspense, doRemove);
    } else {
      if (shapeFlag & 128) {
        vnode.suspense.unmount(parentSuspense, doRemove);
        return;
      }
      if (shouldInvokeDirs) {
        invokeDirectiveHook(vnode, null, parentComponent, "beforeUnmount");
      }
      if (shapeFlag & 64) {
        vnode.type.remove(
          vnode,
          parentComponent,
          parentSuspense,
          optimized,
          internals,
          doRemove
        );
      } else if (dynamicChildren && // #1153: fast path should not be taken for non-stable (v-for) fragments
      (type !== Fragment || patchFlag > 0 && patchFlag & 64)) {
        unmountChildren(
          dynamicChildren,
          parentComponent,
          parentSuspense,
          false,
          true
        );
      } else if (type === Fragment && patchFlag & (128 | 256) || !optimized && shapeFlag & 16) {
        unmountChildren(children, parentComponent, parentSuspense);
      }
      if (doRemove) {
        remove(vnode);
      }
    }
    if (shouldInvokeVnodeHook && (vnodeHook = props && props.onVnodeUnmounted) || shouldInvokeDirs) {
      queuePostRenderEffect(() => {
        vnodeHook && invokeVNodeHook(vnodeHook, parentComponent, vnode);
        shouldInvokeDirs && invokeDirectiveHook(vnode, null, parentComponent, "unmounted");
      }, parentSuspense);
    }
  };
  const remove = (vnode) => {
    const { type, el, anchor, transition } = vnode;
    if (type === Fragment) {
      if ( true && vnode.patchFlag > 0 && vnode.patchFlag & 2048 && transition && !transition.persisted) {
        vnode.children.forEach((child) => {
          if (child.type === Comment) {
            hostRemove(child.el);
          } else {
            remove(child);
          }
        });
      } else {
        removeFragment(el, anchor);
      }
      return;
    }
    if (type === Static) {
      removeStaticNode(vnode);
      return;
    }
    const performRemove = () => {
      hostRemove(el);
      if (transition && !transition.persisted && transition.afterLeave) {
        transition.afterLeave();
      }
    };
    if (vnode.shapeFlag & 1 && transition && !transition.persisted) {
      const { leave, delayLeave } = transition;
      const performLeave = () => leave(el, performRemove);
      if (delayLeave) {
        delayLeave(vnode.el, performRemove, performLeave);
      } else {
        performLeave();
      }
    } else {
      performRemove();
    }
  };
  const removeFragment = (cur, end) => {
    let next;
    while (cur !== end) {
      next = hostNextSibling(cur);
      hostRemove(cur);
      cur = next;
    }
    hostRemove(end);
  };
  const unmountComponent = (instance, parentSuspense, doRemove) => {
    if ( true && instance.type.__hmrId) {
      unregisterHMR(instance);
    }
    const { bum, scope, update, subTree, um } = instance;
    if (bum) {
      (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.invokeArrayFns)(bum);
    }
    scope.stop();
    if (update) {
      update.active = false;
      unmount(subTree, instance, parentSuspense, doRemove);
    }
    if (um) {
      queuePostRenderEffect(um, parentSuspense);
    }
    queuePostRenderEffect(() => {
      instance.isUnmounted = true;
    }, parentSuspense);
    if (parentSuspense && parentSuspense.pendingBranch && !parentSuspense.isUnmounted && instance.asyncDep && !instance.asyncResolved && instance.suspenseId === parentSuspense.pendingId) {
      parentSuspense.deps--;
      if (parentSuspense.deps === 0) {
        parentSuspense.resolve();
      }
    }
    if (true) {
      devtoolsComponentRemoved(instance);
    }
  };
  const unmountChildren = (children, parentComponent, parentSuspense, doRemove = false, optimized = false, start = 0) => {
    for (let i = start; i < children.length; i++) {
      unmount(children[i], parentComponent, parentSuspense, doRemove, optimized);
    }
  };
  const getNextHostNode = (vnode) => {
    if (vnode.shapeFlag & 6) {
      return getNextHostNode(vnode.component.subTree);
    }
    if (vnode.shapeFlag & 128) {
      return vnode.suspense.next();
    }
    return hostNextSibling(vnode.anchor || vnode.el);
  };
  const render = (vnode, container, isSVG) => {
    if (vnode == null) {
      if (container._vnode) {
        unmount(container._vnode, null, null, true);
      }
    } else {
      patch(container._vnode || null, vnode, container, null, null, null, isSVG);
    }
    flushPreFlushCbs();
    flushPostFlushCbs();
    container._vnode = vnode;
  };
  const internals = {
    p: patch,
    um: unmount,
    m: move,
    r: remove,
    mt: mountComponent,
    mc: mountChildren,
    pc: patchChildren,
    pbc: patchBlockChildren,
    n: getNextHostNode,
    o: options
  };
  let hydrate;
  let hydrateNode;
  if (createHydrationFns) {
    [hydrate, hydrateNode] = createHydrationFns(
      internals
    );
  }
  return {
    render,
    hydrate,
    createApp: createAppAPI(render, hydrate)
  };
}
function toggleRecurse({ effect, update }, allowed) {
  effect.allowRecurse = update.allowRecurse = allowed;
}
function traverseStaticChildren(n1, n2, shallow = false) {
  const ch1 = n1.children;
  const ch2 = n2.children;
  if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isArray)(ch1) && (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isArray)(ch2)) {
    for (let i = 0; i < ch1.length; i++) {
      const c1 = ch1[i];
      let c2 = ch2[i];
      if (c2.shapeFlag & 1 && !c2.dynamicChildren) {
        if (c2.patchFlag <= 0 || c2.patchFlag === 32) {
          c2 = ch2[i] = cloneIfMounted(ch2[i]);
          c2.el = c1.el;
        }
        if (!shallow)
          traverseStaticChildren(c1, c2);
      }
      if (c2.type === Text) {
        c2.el = c1.el;
      }
      if ( true && c2.type === Comment && !c2.el) {
        c2.el = c1.el;
      }
    }
  }
}
function getSequence(arr) {
  const p = arr.slice();
  const result = [0];
  let i, j, u, v, c;
  const len = arr.length;
  for (i = 0; i < len; i++) {
    const arrI = arr[i];
    if (arrI !== 0) {
      j = result[result.length - 1];
      if (arr[j] < arrI) {
        p[i] = j;
        result.push(i);
        continue;
      }
      u = 0;
      v = result.length - 1;
      while (u < v) {
        c = u + v >> 1;
        if (arr[result[c]] < arrI) {
          u = c + 1;
        } else {
          v = c;
        }
      }
      if (arrI < arr[result[u]]) {
        if (u > 0) {
          p[i] = result[u - 1];
        }
        result[u] = i;
      }
    }
  }
  u = result.length;
  v = result[u - 1];
  while (u-- > 0) {
    result[u] = v;
    v = p[v];
  }
  return result;
}

const isTeleport = (type) => type.__isTeleport;
const isTeleportDisabled = (props) => props && (props.disabled || props.disabled === "");
const isTargetSVG = (target) => typeof SVGElement !== "undefined" && target instanceof SVGElement;
const resolveTarget = (props, select) => {
  const targetSelector = props && props.to;
  if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isString)(targetSelector)) {
    if (!select) {
       true && warn(
        `Current renderer does not support string target for Teleports. (missing querySelector renderer option)`
      );
      return null;
    } else {
      const target = select(targetSelector);
      if (!target) {
         true && warn(
          `Failed to locate Teleport target with selector "${targetSelector}". Note the target element must exist before the component is mounted - i.e. the target cannot be rendered by the component itself, and ideally should be outside of the entire Vue component tree.`
        );
      }
      return target;
    }
  } else {
    if ( true && !targetSelector && !isTeleportDisabled(props)) {
      warn(`Invalid Teleport target: ${targetSelector}`);
    }
    return targetSelector;
  }
};
const TeleportImpl = {
  __isTeleport: true,
  process(n1, n2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized, internals) {
    const {
      mc: mountChildren,
      pc: patchChildren,
      pbc: patchBlockChildren,
      o: { insert, querySelector, createText, createComment }
    } = internals;
    const disabled = isTeleportDisabled(n2.props);
    let { shapeFlag, children, dynamicChildren } = n2;
    if ( true && isHmrUpdating) {
      optimized = false;
      dynamicChildren = null;
    }
    if (n1 == null) {
      const placeholder = n2.el =  true ? createComment("teleport start") : 0;
      const mainAnchor = n2.anchor =  true ? createComment("teleport end") : 0;
      insert(placeholder, container, anchor);
      insert(mainAnchor, container, anchor);
      const target = n2.target = resolveTarget(n2.props, querySelector);
      const targetAnchor = n2.targetAnchor = createText("");
      if (target) {
        insert(targetAnchor, target);
        isSVG = isSVG || isTargetSVG(target);
      } else if ( true && !disabled) {
        warn("Invalid Teleport target on mount:", target, `(${typeof target})`);
      }
      const mount = (container2, anchor2) => {
        if (shapeFlag & 16) {
          mountChildren(
            children,
            container2,
            anchor2,
            parentComponent,
            parentSuspense,
            isSVG,
            slotScopeIds,
            optimized
          );
        }
      };
      if (disabled) {
        mount(container, mainAnchor);
      } else if (target) {
        mount(target, targetAnchor);
      }
    } else {
      n2.el = n1.el;
      const mainAnchor = n2.anchor = n1.anchor;
      const target = n2.target = n1.target;
      const targetAnchor = n2.targetAnchor = n1.targetAnchor;
      const wasDisabled = isTeleportDisabled(n1.props);
      const currentContainer = wasDisabled ? container : target;
      const currentAnchor = wasDisabled ? mainAnchor : targetAnchor;
      isSVG = isSVG || isTargetSVG(target);
      if (dynamicChildren) {
        patchBlockChildren(
          n1.dynamicChildren,
          dynamicChildren,
          currentContainer,
          parentComponent,
          parentSuspense,
          isSVG,
          slotScopeIds
        );
        traverseStaticChildren(n1, n2, true);
      } else if (!optimized) {
        patchChildren(
          n1,
          n2,
          currentContainer,
          currentAnchor,
          parentComponent,
          parentSuspense,
          isSVG,
          slotScopeIds,
          false
        );
      }
      if (disabled) {
        if (!wasDisabled) {
          moveTeleport(
            n2,
            container,
            mainAnchor,
            internals,
            1
          );
        }
      } else {
        if ((n2.props && n2.props.to) !== (n1.props && n1.props.to)) {
          const nextTarget = n2.target = resolveTarget(
            n2.props,
            querySelector
          );
          if (nextTarget) {
            moveTeleport(
              n2,
              nextTarget,
              null,
              internals,
              0
            );
          } else if (true) {
            warn(
              "Invalid Teleport target on update:",
              target,
              `(${typeof target})`
            );
          }
        } else if (wasDisabled) {
          moveTeleport(
            n2,
            target,
            targetAnchor,
            internals,
            1
          );
        }
      }
    }
    updateCssVars(n2);
  },
  remove(vnode, parentComponent, parentSuspense, optimized, { um: unmount, o: { remove: hostRemove } }, doRemove) {
    const { shapeFlag, children, anchor, targetAnchor, target, props } = vnode;
    if (target) {
      hostRemove(targetAnchor);
    }
    if (doRemove || !isTeleportDisabled(props)) {
      hostRemove(anchor);
      if (shapeFlag & 16) {
        for (let i = 0; i < children.length; i++) {
          const child = children[i];
          unmount(
            child,
            parentComponent,
            parentSuspense,
            true,
            !!child.dynamicChildren
          );
        }
      }
    }
  },
  move: moveTeleport,
  hydrate: hydrateTeleport
};
function moveTeleport(vnode, container, parentAnchor, { o: { insert }, m: move }, moveType = 2) {
  if (moveType === 0) {
    insert(vnode.targetAnchor, container, parentAnchor);
  }
  const { el, anchor, shapeFlag, children, props } = vnode;
  const isReorder = moveType === 2;
  if (isReorder) {
    insert(el, container, parentAnchor);
  }
  if (!isReorder || isTeleportDisabled(props)) {
    if (shapeFlag & 16) {
      for (let i = 0; i < children.length; i++) {
        move(
          children[i],
          container,
          parentAnchor,
          2
        );
      }
    }
  }
  if (isReorder) {
    insert(anchor, container, parentAnchor);
  }
}
function hydrateTeleport(node, vnode, parentComponent, parentSuspense, slotScopeIds, optimized, {
  o: { nextSibling, parentNode, querySelector }
}, hydrateChildren) {
  const target = vnode.target = resolveTarget(
    vnode.props,
    querySelector
  );
  if (target) {
    const targetNode = target._lpa || target.firstChild;
    if (vnode.shapeFlag & 16) {
      if (isTeleportDisabled(vnode.props)) {
        vnode.anchor = hydrateChildren(
          nextSibling(node),
          vnode,
          parentNode(node),
          parentComponent,
          parentSuspense,
          slotScopeIds,
          optimized
        );
        vnode.targetAnchor = targetNode;
      } else {
        vnode.anchor = nextSibling(node);
        let targetAnchor = targetNode;
        while (targetAnchor) {
          targetAnchor = nextSibling(targetAnchor);
          if (targetAnchor && targetAnchor.nodeType === 8 && targetAnchor.data === "teleport anchor") {
            vnode.targetAnchor = targetAnchor;
            target._lpa = vnode.targetAnchor && nextSibling(vnode.targetAnchor);
            break;
          }
        }
        hydrateChildren(
          targetNode,
          vnode,
          target,
          parentComponent,
          parentSuspense,
          slotScopeIds,
          optimized
        );
      }
    }
    updateCssVars(vnode);
  }
  return vnode.anchor && nextSibling(vnode.anchor);
}
const Teleport = TeleportImpl;
function updateCssVars(vnode) {
  const ctx = vnode.ctx;
  if (ctx && ctx.ut) {
    let node = vnode.children[0].el;
    while (node !== vnode.targetAnchor) {
      if (node.nodeType === 1)
        node.setAttribute("data-v-owner", ctx.uid);
      node = node.nextSibling;
    }
    ctx.ut();
  }
}

const Fragment = Symbol.for("v-fgt");
const Text = Symbol.for("v-txt");
const Comment = Symbol.for("v-cmt");
const Static = Symbol.for("v-stc");
const blockStack = [];
let currentBlock = null;
function openBlock(disableTracking = false) {
  blockStack.push(currentBlock = disableTracking ? null : []);
}
function closeBlock() {
  blockStack.pop();
  currentBlock = blockStack[blockStack.length - 1] || null;
}
let isBlockTreeEnabled = 1;
function setBlockTracking(value) {
  isBlockTreeEnabled += value;
}
function setupBlock(vnode) {
  vnode.dynamicChildren = isBlockTreeEnabled > 0 ? currentBlock || _vue_shared__WEBPACK_IMPORTED_MODULE_1__.EMPTY_ARR : null;
  closeBlock();
  if (isBlockTreeEnabled > 0 && currentBlock) {
    currentBlock.push(vnode);
  }
  return vnode;
}
function createElementBlock(type, props, children, patchFlag, dynamicProps, shapeFlag) {
  return setupBlock(
    createBaseVNode(
      type,
      props,
      children,
      patchFlag,
      dynamicProps,
      shapeFlag,
      true
      /* isBlock */
    )
  );
}
function createBlock(type, props, children, patchFlag, dynamicProps) {
  return setupBlock(
    createVNode(
      type,
      props,
      children,
      patchFlag,
      dynamicProps,
      true
      /* isBlock: prevent a block from tracking itself */
    )
  );
}
function isVNode(value) {
  return value ? value.__v_isVNode === true : false;
}
function isSameVNodeType(n1, n2) {
  if ( true && n2.shapeFlag & 6 && hmrDirtyComponents.has(n2.type)) {
    n1.shapeFlag &= ~256;
    n2.shapeFlag &= ~512;
    return false;
  }
  return n1.type === n2.type && n1.key === n2.key;
}
let vnodeArgsTransformer;
function transformVNodeArgs(transformer) {
  vnodeArgsTransformer = transformer;
}
const createVNodeWithArgsTransform = (...args) => {
  return _createVNode(
    ...vnodeArgsTransformer ? vnodeArgsTransformer(args, currentRenderingInstance) : args
  );
};
const InternalObjectKey = `__vInternal`;
const normalizeKey = ({ key }) => key != null ? key : null;
const normalizeRef = ({
  ref,
  ref_key,
  ref_for
}) => {
  if (typeof ref === "number") {
    ref = "" + ref;
  }
  return ref != null ? (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isString)(ref) || (0,_vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.isRef)(ref) || (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isFunction)(ref) ? { i: currentRenderingInstance, r: ref, k: ref_key, f: !!ref_for } : ref : null;
};
function createBaseVNode(type, props = null, children = null, patchFlag = 0, dynamicProps = null, shapeFlag = type === Fragment ? 0 : 1, isBlockNode = false, needFullChildrenNormalization = false) {
  const vnode = {
    __v_isVNode: true,
    __v_skip: true,
    type,
    props,
    key: props && normalizeKey(props),
    ref: props && normalizeRef(props),
    scopeId: currentScopeId,
    slotScopeIds: null,
    children,
    component: null,
    suspense: null,
    ssContent: null,
    ssFallback: null,
    dirs: null,
    transition: null,
    el: null,
    anchor: null,
    target: null,
    targetAnchor: null,
    staticCount: 0,
    shapeFlag,
    patchFlag,
    dynamicProps,
    dynamicChildren: null,
    appContext: null,
    ctx: currentRenderingInstance
  };
  if (needFullChildrenNormalization) {
    normalizeChildren(vnode, children);
    if (shapeFlag & 128) {
      type.normalize(vnode);
    }
  } else if (children) {
    vnode.shapeFlag |= (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isString)(children) ? 8 : 16;
  }
  if ( true && vnode.key !== vnode.key) {
    warn(`VNode created with invalid key (NaN). VNode type:`, vnode.type);
  }
  if (isBlockTreeEnabled > 0 && // avoid a block node from tracking itself
  !isBlockNode && // has current parent block
  currentBlock && // presence of a patch flag indicates this node needs patching on updates.
  // component nodes also should always be patched, because even if the
  // component doesn't need to update, it needs to persist the instance on to
  // the next vnode so that it can be properly unmounted later.
  (vnode.patchFlag > 0 || shapeFlag & 6) && // the EVENTS flag is only for hydration and if it is the only flag, the
  // vnode should not be considered dynamic due to handler caching.
  vnode.patchFlag !== 32) {
    currentBlock.push(vnode);
  }
  return vnode;
}
const createVNode =  true ? createVNodeWithArgsTransform : 0;
function _createVNode(type, props = null, children = null, patchFlag = 0, dynamicProps = null, isBlockNode = false) {
  if (!type || type === NULL_DYNAMIC_COMPONENT) {
    if ( true && !type) {
      warn(`Invalid vnode type when creating vnode: ${type}.`);
    }
    type = Comment;
  }
  if (isVNode(type)) {
    const cloned = cloneVNode(
      type,
      props,
      true
      /* mergeRef: true */
    );
    if (children) {
      normalizeChildren(cloned, children);
    }
    if (isBlockTreeEnabled > 0 && !isBlockNode && currentBlock) {
      if (cloned.shapeFlag & 6) {
        currentBlock[currentBlock.indexOf(type)] = cloned;
      } else {
        currentBlock.push(cloned);
      }
    }
    cloned.patchFlag |= -2;
    return cloned;
  }
  if (isClassComponent(type)) {
    type = type.__vccOpts;
  }
  if (props) {
    props = guardReactiveProps(props);
    let { class: klass, style } = props;
    if (klass && !(0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isString)(klass)) {
      props.class = (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.normalizeClass)(klass);
    }
    if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isObject)(style)) {
      if ((0,_vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.isProxy)(style) && !(0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isArray)(style)) {
        style = (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.extend)({}, style);
      }
      props.style = (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.normalizeStyle)(style);
    }
  }
  const shapeFlag = (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isString)(type) ? 1 : isSuspense(type) ? 128 : isTeleport(type) ? 64 : (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isObject)(type) ? 4 : (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isFunction)(type) ? 2 : 0;
  if ( true && shapeFlag & 4 && (0,_vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.isProxy)(type)) {
    type = (0,_vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.toRaw)(type);
    warn(
      `Vue received a Component which was made a reactive object. This can lead to unnecessary performance overhead, and should be avoided by marking the component with \`markRaw\` or using \`shallowRef\` instead of \`ref\`.`,
      `
Component that was made reactive: `,
      type
    );
  }
  return createBaseVNode(
    type,
    props,
    children,
    patchFlag,
    dynamicProps,
    shapeFlag,
    isBlockNode,
    true
  );
}
function guardReactiveProps(props) {
  if (!props)
    return null;
  return (0,_vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.isProxy)(props) || InternalObjectKey in props ? (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.extend)({}, props) : props;
}
function cloneVNode(vnode, extraProps, mergeRef = false) {
  const { props, ref, patchFlag, children } = vnode;
  const mergedProps = extraProps ? mergeProps(props || {}, extraProps) : props;
  const cloned = {
    __v_isVNode: true,
    __v_skip: true,
    type: vnode.type,
    props: mergedProps,
    key: mergedProps && normalizeKey(mergedProps),
    ref: extraProps && extraProps.ref ? (
      // #2078 in the case of <component :is="vnode" ref="extra"/>
      // if the vnode itself already has a ref, cloneVNode will need to merge
      // the refs so the single vnode can be set on multiple refs
      mergeRef && ref ? (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isArray)(ref) ? ref.concat(normalizeRef(extraProps)) : [ref, normalizeRef(extraProps)] : normalizeRef(extraProps)
    ) : ref,
    scopeId: vnode.scopeId,
    slotScopeIds: vnode.slotScopeIds,
    children:  true && patchFlag === -1 && (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isArray)(children) ? children.map(deepCloneVNode) : children,
    target: vnode.target,
    targetAnchor: vnode.targetAnchor,
    staticCount: vnode.staticCount,
    shapeFlag: vnode.shapeFlag,
    // if the vnode is cloned with extra props, we can no longer assume its
    // existing patch flag to be reliable and need to add the FULL_PROPS flag.
    // note: preserve flag for fragments since they use the flag for children
    // fast paths only.
    patchFlag: extraProps && vnode.type !== Fragment ? patchFlag === -1 ? 16 : patchFlag | 16 : patchFlag,
    dynamicProps: vnode.dynamicProps,
    dynamicChildren: vnode.dynamicChildren,
    appContext: vnode.appContext,
    dirs: vnode.dirs,
    transition: vnode.transition,
    // These should technically only be non-null on mounted VNodes. However,
    // they *should* be copied for kept-alive vnodes. So we just always copy
    // them since them being non-null during a mount doesn't affect the logic as
    // they will simply be overwritten.
    component: vnode.component,
    suspense: vnode.suspense,
    ssContent: vnode.ssContent && cloneVNode(vnode.ssContent),
    ssFallback: vnode.ssFallback && cloneVNode(vnode.ssFallback),
    el: vnode.el,
    anchor: vnode.anchor,
    ctx: vnode.ctx,
    ce: vnode.ce
  };
  return cloned;
}
function deepCloneVNode(vnode) {
  const cloned = cloneVNode(vnode);
  if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isArray)(vnode.children)) {
    cloned.children = vnode.children.map(deepCloneVNode);
  }
  return cloned;
}
function createTextVNode(text = " ", flag = 0) {
  return createVNode(Text, null, text, flag);
}
function createStaticVNode(content, numberOfNodes) {
  const vnode = createVNode(Static, null, content);
  vnode.staticCount = numberOfNodes;
  return vnode;
}
function createCommentVNode(text = "", asBlock = false) {
  return asBlock ? (openBlock(), createBlock(Comment, null, text)) : createVNode(Comment, null, text);
}
function normalizeVNode(child) {
  if (child == null || typeof child === "boolean") {
    return createVNode(Comment);
  } else if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isArray)(child)) {
    return createVNode(
      Fragment,
      null,
      // #3666, avoid reference pollution when reusing vnode
      child.slice()
    );
  } else if (typeof child === "object") {
    return cloneIfMounted(child);
  } else {
    return createVNode(Text, null, String(child));
  }
}
function cloneIfMounted(child) {
  return child.el === null && child.patchFlag !== -1 || child.memo ? child : cloneVNode(child);
}
function normalizeChildren(vnode, children) {
  let type = 0;
  const { shapeFlag } = vnode;
  if (children == null) {
    children = null;
  } else if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isArray)(children)) {
    type = 16;
  } else if (typeof children === "object") {
    if (shapeFlag & (1 | 64)) {
      const slot = children.default;
      if (slot) {
        slot._c && (slot._d = false);
        normalizeChildren(vnode, slot());
        slot._c && (slot._d = true);
      }
      return;
    } else {
      type = 32;
      const slotFlag = children._;
      if (!slotFlag && !(InternalObjectKey in children)) {
        children._ctx = currentRenderingInstance;
      } else if (slotFlag === 3 && currentRenderingInstance) {
        if (currentRenderingInstance.slots._ === 1) {
          children._ = 1;
        } else {
          children._ = 2;
          vnode.patchFlag |= 1024;
        }
      }
    }
  } else if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isFunction)(children)) {
    children = { default: children, _ctx: currentRenderingInstance };
    type = 32;
  } else {
    children = String(children);
    if (shapeFlag & 64) {
      type = 16;
      children = [createTextVNode(children)];
    } else {
      type = 8;
    }
  }
  vnode.children = children;
  vnode.shapeFlag |= type;
}
function mergeProps(...args) {
  const ret = {};
  for (let i = 0; i < args.length; i++) {
    const toMerge = args[i];
    for (const key in toMerge) {
      if (key === "class") {
        if (ret.class !== toMerge.class) {
          ret.class = (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.normalizeClass)([ret.class, toMerge.class]);
        }
      } else if (key === "style") {
        ret.style = (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.normalizeStyle)([ret.style, toMerge.style]);
      } else if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isOn)(key)) {
        const existing = ret[key];
        const incoming = toMerge[key];
        if (incoming && existing !== incoming && !((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isArray)(existing) && existing.includes(incoming))) {
          ret[key] = existing ? [].concat(existing, incoming) : incoming;
        }
      } else if (key !== "") {
        ret[key] = toMerge[key];
      }
    }
  }
  return ret;
}
function invokeVNodeHook(hook, instance, vnode, prevVNode = null) {
  callWithAsyncErrorHandling(hook, instance, 7, [
    vnode,
    prevVNode
  ]);
}

const emptyAppContext = createAppContext();
let uid = 0;
function createComponentInstance(vnode, parent, suspense) {
  const type = vnode.type;
  const appContext = (parent ? parent.appContext : vnode.appContext) || emptyAppContext;
  const instance = {
    uid: uid++,
    vnode,
    type,
    parent,
    appContext,
    root: null,
    // to be immediately set
    next: null,
    subTree: null,
    // will be set synchronously right after creation
    effect: null,
    update: null,
    // will be set synchronously right after creation
    scope: new _vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.EffectScope(
      true
      /* detached */
    ),
    render: null,
    proxy: null,
    exposed: null,
    exposeProxy: null,
    withProxy: null,
    provides: parent ? parent.provides : Object.create(appContext.provides),
    accessCache: null,
    renderCache: [],
    // local resolved assets
    components: null,
    directives: null,
    // resolved props and emits options
    propsOptions: normalizePropsOptions(type, appContext),
    emitsOptions: normalizeEmitsOptions(type, appContext),
    // emit
    emit: null,
    // to be set immediately
    emitted: null,
    // props default value
    propsDefaults: _vue_shared__WEBPACK_IMPORTED_MODULE_1__.EMPTY_OBJ,
    // inheritAttrs
    inheritAttrs: type.inheritAttrs,
    // state
    ctx: _vue_shared__WEBPACK_IMPORTED_MODULE_1__.EMPTY_OBJ,
    data: _vue_shared__WEBPACK_IMPORTED_MODULE_1__.EMPTY_OBJ,
    props: _vue_shared__WEBPACK_IMPORTED_MODULE_1__.EMPTY_OBJ,
    attrs: _vue_shared__WEBPACK_IMPORTED_MODULE_1__.EMPTY_OBJ,
    slots: _vue_shared__WEBPACK_IMPORTED_MODULE_1__.EMPTY_OBJ,
    refs: _vue_shared__WEBPACK_IMPORTED_MODULE_1__.EMPTY_OBJ,
    setupState: _vue_shared__WEBPACK_IMPORTED_MODULE_1__.EMPTY_OBJ,
    setupContext: null,
    attrsProxy: null,
    slotsProxy: null,
    // suspense related
    suspense,
    suspenseId: suspense ? suspense.pendingId : 0,
    asyncDep: null,
    asyncResolved: false,
    // lifecycle hooks
    // not using enums here because it results in computed properties
    isMounted: false,
    isUnmounted: false,
    isDeactivated: false,
    bc: null,
    c: null,
    bm: null,
    m: null,
    bu: null,
    u: null,
    um: null,
    bum: null,
    da: null,
    a: null,
    rtg: null,
    rtc: null,
    ec: null,
    sp: null
  };
  if (true) {
    instance.ctx = createDevRenderContext(instance);
  } else {}
  instance.root = parent ? parent.root : instance;
  instance.emit = emit.bind(null, instance);
  if (vnode.ce) {
    vnode.ce(instance);
  }
  return instance;
}
let currentInstance = null;
const getCurrentInstance = () => currentInstance || currentRenderingInstance;
let internalSetCurrentInstance;
let globalCurrentInstanceSetters;
let settersKey = "__VUE_INSTANCE_SETTERS__";
{
  if (!(globalCurrentInstanceSetters = (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.getGlobalThis)()[settersKey])) {
    globalCurrentInstanceSetters = (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.getGlobalThis)()[settersKey] = [];
  }
  globalCurrentInstanceSetters.push((i) => currentInstance = i);
  internalSetCurrentInstance = (instance) => {
    if (globalCurrentInstanceSetters.length > 1) {
      globalCurrentInstanceSetters.forEach((s) => s(instance));
    } else {
      globalCurrentInstanceSetters[0](instance);
    }
  };
}
const setCurrentInstance = (instance) => {
  internalSetCurrentInstance(instance);
  instance.scope.on();
};
const unsetCurrentInstance = () => {
  currentInstance && currentInstance.scope.off();
  internalSetCurrentInstance(null);
};
const isBuiltInTag = /* @__PURE__ */ (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.makeMap)("slot,component");
function validateComponentName(name, config) {
  const appIsNativeTag = config.isNativeTag || _vue_shared__WEBPACK_IMPORTED_MODULE_1__.NO;
  if (isBuiltInTag(name) || appIsNativeTag(name)) {
    warn(
      "Do not use built-in or reserved HTML elements as component id: " + name
    );
  }
}
function isStatefulComponent(instance) {
  return instance.vnode.shapeFlag & 4;
}
let isInSSRComponentSetup = false;
function setupComponent(instance, isSSR = false) {
  isInSSRComponentSetup = isSSR;
  const { props, children } = instance.vnode;
  const isStateful = isStatefulComponent(instance);
  initProps(instance, props, isStateful, isSSR);
  initSlots(instance, children);
  const setupResult = isStateful ? setupStatefulComponent(instance, isSSR) : void 0;
  isInSSRComponentSetup = false;
  return setupResult;
}
function setupStatefulComponent(instance, isSSR) {
  var _a;
  const Component = instance.type;
  if (true) {
    if (Component.name) {
      validateComponentName(Component.name, instance.appContext.config);
    }
    if (Component.components) {
      const names = Object.keys(Component.components);
      for (let i = 0; i < names.length; i++) {
        validateComponentName(names[i], instance.appContext.config);
      }
    }
    if (Component.directives) {
      const names = Object.keys(Component.directives);
      for (let i = 0; i < names.length; i++) {
        validateDirectiveName(names[i]);
      }
    }
    if (Component.compilerOptions && isRuntimeOnly()) {
      warn(
        `"compilerOptions" is only supported when using a build of Vue that includes the runtime compiler. Since you are using a runtime-only build, the options should be passed via your build tool config instead.`
      );
    }
  }
  instance.accessCache = /* @__PURE__ */ Object.create(null);
  instance.proxy = (0,_vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.markRaw)(new Proxy(instance.ctx, PublicInstanceProxyHandlers));
  if (true) {
    exposePropsOnRenderContext(instance);
  }
  const { setup } = Component;
  if (setup) {
    const setupContext = instance.setupContext = setup.length > 1 ? createSetupContext(instance) : null;
    setCurrentInstance(instance);
    (0,_vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.pauseTracking)();
    const setupResult = callWithErrorHandling(
      setup,
      instance,
      0,
      [ true ? (0,_vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.shallowReadonly)(instance.props) : 0, setupContext]
    );
    (0,_vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.resetTracking)();
    unsetCurrentInstance();
    if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isPromise)(setupResult)) {
      setupResult.then(unsetCurrentInstance, unsetCurrentInstance);
      if (isSSR) {
        return setupResult.then((resolvedResult) => {
          handleSetupResult(instance, resolvedResult, isSSR);
        }).catch((e) => {
          handleError(e, instance, 0);
        });
      } else {
        instance.asyncDep = setupResult;
        if ( true && !instance.suspense) {
          const name = (_a = Component.name) != null ? _a : "Anonymous";
          warn(
            `Component <${name}>: setup function returned a promise, but no <Suspense> boundary was found in the parent component tree. A component with async setup() must be nested in a <Suspense> in order to be rendered.`
          );
        }
      }
    } else {
      handleSetupResult(instance, setupResult, isSSR);
    }
  } else {
    finishComponentSetup(instance, isSSR);
  }
}
function handleSetupResult(instance, setupResult, isSSR) {
  if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isFunction)(setupResult)) {
    if (instance.type.__ssrInlineRender) {
      instance.ssrRender = setupResult;
    } else {
      instance.render = setupResult;
    }
  } else if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isObject)(setupResult)) {
    if ( true && isVNode(setupResult)) {
      warn(
        `setup() should not return VNodes directly - return a render function instead.`
      );
    }
    if (true) {
      instance.devtoolsRawSetupState = setupResult;
    }
    instance.setupState = (0,_vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.proxyRefs)(setupResult);
    if (true) {
      exposeSetupStateOnRenderContext(instance);
    }
  } else if ( true && setupResult !== void 0) {
    warn(
      `setup() should return an object. Received: ${setupResult === null ? "null" : typeof setupResult}`
    );
  }
  finishComponentSetup(instance, isSSR);
}
let compile;
let installWithProxy;
function registerRuntimeCompiler(_compile) {
  compile = _compile;
  installWithProxy = (i) => {
    if (i.render._rc) {
      i.withProxy = new Proxy(i.ctx, RuntimeCompiledPublicInstanceProxyHandlers);
    }
  };
}
const isRuntimeOnly = () => !compile;
function finishComponentSetup(instance, isSSR, skipOptions) {
  const Component = instance.type;
  if (!instance.render) {
    if (!isSSR && compile && !Component.render) {
      const template = Component.template || resolveMergedOptions(instance).template;
      if (template) {
        if (true) {
          startMeasure(instance, `compile`);
        }
        const { isCustomElement, compilerOptions } = instance.appContext.config;
        const { delimiters, compilerOptions: componentCompilerOptions } = Component;
        const finalCompilerOptions = (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.extend)(
          (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.extend)(
            {
              isCustomElement,
              delimiters
            },
            compilerOptions
          ),
          componentCompilerOptions
        );
        Component.render = compile(template, finalCompilerOptions);
        if (true) {
          endMeasure(instance, `compile`);
        }
      }
    }
    instance.render = Component.render || _vue_shared__WEBPACK_IMPORTED_MODULE_1__.NOOP;
    if (installWithProxy) {
      installWithProxy(instance);
    }
  }
  if (true) {
    setCurrentInstance(instance);
    (0,_vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.pauseTracking)();
    applyOptions(instance);
    (0,_vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.resetTracking)();
    unsetCurrentInstance();
  }
  if ( true && !Component.render && instance.render === _vue_shared__WEBPACK_IMPORTED_MODULE_1__.NOOP && !isSSR) {
    if (!compile && Component.template) {
      warn(
        `Component provided template option but runtime compilation is not supported in this build of Vue.` + (` Configure your bundler to alias "vue" to "vue/dist/vue.esm-bundler.js".` )
        /* should not happen */
      );
    } else {
      warn(`Component is missing template or render function.`);
    }
  }
}
function getAttrsProxy(instance) {
  return instance.attrsProxy || (instance.attrsProxy = new Proxy(
    instance.attrs,
     true ? {
      get(target, key) {
        markAttrsAccessed();
        (0,_vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.track)(instance, "get", "$attrs");
        return target[key];
      },
      set() {
        warn(`setupContext.attrs is readonly.`);
        return false;
      },
      deleteProperty() {
        warn(`setupContext.attrs is readonly.`);
        return false;
      }
    } : 0
  ));
}
function getSlotsProxy(instance) {
  return instance.slotsProxy || (instance.slotsProxy = new Proxy(instance.slots, {
    get(target, key) {
      (0,_vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.track)(instance, "get", "$slots");
      return target[key];
    }
  }));
}
function createSetupContext(instance) {
  const expose = (exposed) => {
    if (true) {
      if (instance.exposed) {
        warn(`expose() should be called only once per setup().`);
      }
      if (exposed != null) {
        let exposedType = typeof exposed;
        if (exposedType === "object") {
          if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isArray)(exposed)) {
            exposedType = "array";
          } else if ((0,_vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.isRef)(exposed)) {
            exposedType = "ref";
          }
        }
        if (exposedType !== "object") {
          warn(
            `expose() should be passed a plain object, received ${exposedType}.`
          );
        }
      }
    }
    instance.exposed = exposed || {};
  };
  if (true) {
    return Object.freeze({
      get attrs() {
        return getAttrsProxy(instance);
      },
      get slots() {
        return getSlotsProxy(instance);
      },
      get emit() {
        return (event, ...args) => instance.emit(event, ...args);
      },
      expose
    });
  } else {}
}
function getExposeProxy(instance) {
  if (instance.exposed) {
    return instance.exposeProxy || (instance.exposeProxy = new Proxy((0,_vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.proxyRefs)((0,_vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.markRaw)(instance.exposed)), {
      get(target, key) {
        if (key in target) {
          return target[key];
        } else if (key in publicPropertiesMap) {
          return publicPropertiesMap[key](instance);
        }
      },
      has(target, key) {
        return key in target || key in publicPropertiesMap;
      }
    }));
  }
}
const classifyRE = /(?:^|[-_])(\w)/g;
const classify = (str) => str.replace(classifyRE, (c) => c.toUpperCase()).replace(/[-_]/g, "");
function getComponentName(Component, includeInferred = true) {
  return (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isFunction)(Component) ? Component.displayName || Component.name : Component.name || includeInferred && Component.__name;
}
function formatComponentName(instance, Component, isRoot = false) {
  let name = getComponentName(Component);
  if (!name && Component.__file) {
    const match = Component.__file.match(/([^/\\]+)\.\w+$/);
    if (match) {
      name = match[1];
    }
  }
  if (!name && instance && instance.parent) {
    const inferFromRegistry = (registry) => {
      for (const key in registry) {
        if (registry[key] === Component) {
          return key;
        }
      }
    };
    name = inferFromRegistry(
      instance.components || instance.parent.type.components
    ) || inferFromRegistry(instance.appContext.components);
  }
  return name ? classify(name) : isRoot ? `App` : `Anonymous`;
}
function isClassComponent(value) {
  return (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isFunction)(value) && "__vccOpts" in value;
}

const computed = (getterOrOptions, debugOptions) => {
  return (0,_vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.computed)(getterOrOptions, debugOptions, isInSSRComponentSetup);
};

function h(type, propsOrChildren, children) {
  const l = arguments.length;
  if (l === 2) {
    if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isObject)(propsOrChildren) && !(0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isArray)(propsOrChildren)) {
      if (isVNode(propsOrChildren)) {
        return createVNode(type, null, [propsOrChildren]);
      }
      return createVNode(type, propsOrChildren);
    } else {
      return createVNode(type, null, propsOrChildren);
    }
  } else {
    if (l > 3) {
      children = Array.prototype.slice.call(arguments, 2);
    } else if (l === 3 && isVNode(children)) {
      children = [children];
    }
    return createVNode(type, propsOrChildren, children);
  }
}

const ssrContextKey = Symbol.for("v-scx");
const useSSRContext = () => {
  {
    const ctx = inject(ssrContextKey);
    if (!ctx) {
       true && warn(
        `Server rendering context not provided. Make sure to only call useSSRContext() conditionally in the server build.`
      );
    }
    return ctx;
  }
};

function isShallow(value) {
  return !!(value && value["__v_isShallow"]);
}

function initCustomFormatter() {
  if ( false || typeof window === "undefined") {
    return;
  }
  const vueStyle = { style: "color:#3ba776" };
  const numberStyle = { style: "color:#0b1bc9" };
  const stringStyle = { style: "color:#b62e24" };
  const keywordStyle = { style: "color:#9d288c" };
  const formatter = {
    header(obj) {
      if (!(0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isObject)(obj)) {
        return null;
      }
      if (obj.__isVue) {
        return ["div", vueStyle, `VueInstance`];
      } else if ((0,_vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.isRef)(obj)) {
        return [
          "div",
          {},
          ["span", vueStyle, genRefFlag(obj)],
          "<",
          formatValue(obj.value),
          `>`
        ];
      } else if ((0,_vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.isReactive)(obj)) {
        return [
          "div",
          {},
          ["span", vueStyle, isShallow(obj) ? "ShallowReactive" : "Reactive"],
          "<",
          formatValue(obj),
          `>${(0,_vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.isReadonly)(obj) ? ` (readonly)` : ``}`
        ];
      } else if ((0,_vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.isReadonly)(obj)) {
        return [
          "div",
          {},
          ["span", vueStyle, isShallow(obj) ? "ShallowReadonly" : "Readonly"],
          "<",
          formatValue(obj),
          ">"
        ];
      }
      return null;
    },
    hasBody(obj) {
      return obj && obj.__isVue;
    },
    body(obj) {
      if (obj && obj.__isVue) {
        return [
          "div",
          {},
          ...formatInstance(obj.$)
        ];
      }
    }
  };
  function formatInstance(instance) {
    const blocks = [];
    if (instance.type.props && instance.props) {
      blocks.push(createInstanceBlock("props", (0,_vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.toRaw)(instance.props)));
    }
    if (instance.setupState !== _vue_shared__WEBPACK_IMPORTED_MODULE_1__.EMPTY_OBJ) {
      blocks.push(createInstanceBlock("setup", instance.setupState));
    }
    if (instance.data !== _vue_shared__WEBPACK_IMPORTED_MODULE_1__.EMPTY_OBJ) {
      blocks.push(createInstanceBlock("data", (0,_vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.toRaw)(instance.data)));
    }
    const computed = extractKeys(instance, "computed");
    if (computed) {
      blocks.push(createInstanceBlock("computed", computed));
    }
    const injected = extractKeys(instance, "inject");
    if (injected) {
      blocks.push(createInstanceBlock("injected", injected));
    }
    blocks.push([
      "div",
      {},
      [
        "span",
        {
          style: keywordStyle.style + ";opacity:0.66"
        },
        "$ (internal): "
      ],
      ["object", { object: instance }]
    ]);
    return blocks;
  }
  function createInstanceBlock(type, target) {
    target = (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.extend)({}, target);
    if (!Object.keys(target).length) {
      return ["span", {}];
    }
    return [
      "div",
      { style: "line-height:1.25em;margin-bottom:0.6em" },
      [
        "div",
        {
          style: "color:#476582"
        },
        type
      ],
      [
        "div",
        {
          style: "padding-left:1.25em"
        },
        ...Object.keys(target).map((key) => {
          return [
            "div",
            {},
            ["span", keywordStyle, key + ": "],
            formatValue(target[key], false)
          ];
        })
      ]
    ];
  }
  function formatValue(v, asRaw = true) {
    if (typeof v === "number") {
      return ["span", numberStyle, v];
    } else if (typeof v === "string") {
      return ["span", stringStyle, JSON.stringify(v)];
    } else if (typeof v === "boolean") {
      return ["span", keywordStyle, v];
    } else if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isObject)(v)) {
      return ["object", { object: asRaw ? (0,_vue_reactivity__WEBPACK_IMPORTED_MODULE_0__.toRaw)(v) : v }];
    } else {
      return ["span", stringStyle, String(v)];
    }
  }
  function extractKeys(instance, type) {
    const Comp = instance.type;
    if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isFunction)(Comp)) {
      return;
    }
    const extracted = {};
    for (const key in instance.ctx) {
      if (isKeyOfType(Comp, key, type)) {
        extracted[key] = instance.ctx[key];
      }
    }
    return extracted;
  }
  function isKeyOfType(Comp, key, type) {
    const opts = Comp[type];
    if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isArray)(opts) && opts.includes(key) || (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isObject)(opts) && key in opts) {
      return true;
    }
    if (Comp.extends && isKeyOfType(Comp.extends, key, type)) {
      return true;
    }
    if (Comp.mixins && Comp.mixins.some((m) => isKeyOfType(m, key, type))) {
      return true;
    }
  }
  function genRefFlag(v) {
    if (isShallow(v)) {
      return `ShallowRef`;
    }
    if (v.effect) {
      return `ComputedRef`;
    }
    return `Ref`;
  }
  if (window.devtoolsFormatters) {
    window.devtoolsFormatters.push(formatter);
  } else {
    window.devtoolsFormatters = [formatter];
  }
}

function withMemo(memo, render, cache, index) {
  const cached = cache[index];
  if (cached && isMemoSame(cached, memo)) {
    return cached;
  }
  const ret = render();
  ret.memo = memo.slice();
  return cache[index] = ret;
}
function isMemoSame(cached, memo) {
  const prev = cached.memo;
  if (prev.length != memo.length) {
    return false;
  }
  for (let i = 0; i < prev.length; i++) {
    if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.hasChanged)(prev[i], memo[i])) {
      return false;
    }
  }
  if (isBlockTreeEnabled > 0 && currentBlock) {
    currentBlock.push(cached);
  }
  return true;
}

const version = "3.3.4";
const _ssrUtils = {
  createComponentInstance,
  setupComponent,
  renderComponentRoot,
  setCurrentRenderingInstance,
  isVNode: isVNode,
  normalizeVNode
};
const ssrUtils = _ssrUtils ;
const resolveFilter = null;
const compatUtils = null;




/***/ }),

/***/ "./node_modules/@vue/runtime-dom/dist/runtime-dom.esm-bundler.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@vue/runtime-dom/dist/runtime-dom.esm-bundler.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "BaseTransition": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.BaseTransition),
/* harmony export */   "BaseTransitionPropsValidators": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.BaseTransitionPropsValidators),
/* harmony export */   "Comment": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.Comment),
/* harmony export */   "EffectScope": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.EffectScope),
/* harmony export */   "Fragment": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.Fragment),
/* harmony export */   "KeepAlive": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.KeepAlive),
/* harmony export */   "ReactiveEffect": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.ReactiveEffect),
/* harmony export */   "Static": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.Static),
/* harmony export */   "Suspense": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.Suspense),
/* harmony export */   "Teleport": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.Teleport),
/* harmony export */   "Text": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.Text),
/* harmony export */   "Transition": () => (/* binding */ Transition),
/* harmony export */   "TransitionGroup": () => (/* binding */ TransitionGroup),
/* harmony export */   "VueElement": () => (/* binding */ VueElement),
/* harmony export */   "assertNumber": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.assertNumber),
/* harmony export */   "callWithAsyncErrorHandling": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.callWithAsyncErrorHandling),
/* harmony export */   "callWithErrorHandling": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.callWithErrorHandling),
/* harmony export */   "camelize": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.camelize),
/* harmony export */   "capitalize": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.capitalize),
/* harmony export */   "cloneVNode": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.cloneVNode),
/* harmony export */   "compatUtils": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.compatUtils),
/* harmony export */   "computed": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.computed),
/* harmony export */   "createApp": () => (/* binding */ createApp),
/* harmony export */   "createBlock": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.createBlock),
/* harmony export */   "createCommentVNode": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.createCommentVNode),
/* harmony export */   "createElementBlock": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.createElementBlock),
/* harmony export */   "createElementVNode": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.createElementVNode),
/* harmony export */   "createHydrationRenderer": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.createHydrationRenderer),
/* harmony export */   "createPropsRestProxy": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.createPropsRestProxy),
/* harmony export */   "createRenderer": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.createRenderer),
/* harmony export */   "createSSRApp": () => (/* binding */ createSSRApp),
/* harmony export */   "createSlots": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.createSlots),
/* harmony export */   "createStaticVNode": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.createStaticVNode),
/* harmony export */   "createTextVNode": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.createTextVNode),
/* harmony export */   "createVNode": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.createVNode),
/* harmony export */   "customRef": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.customRef),
/* harmony export */   "defineAsyncComponent": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.defineAsyncComponent),
/* harmony export */   "defineComponent": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.defineComponent),
/* harmony export */   "defineCustomElement": () => (/* binding */ defineCustomElement),
/* harmony export */   "defineEmits": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.defineEmits),
/* harmony export */   "defineExpose": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.defineExpose),
/* harmony export */   "defineModel": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.defineModel),
/* harmony export */   "defineOptions": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.defineOptions),
/* harmony export */   "defineProps": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.defineProps),
/* harmony export */   "defineSSRCustomElement": () => (/* binding */ defineSSRCustomElement),
/* harmony export */   "defineSlots": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.defineSlots),
/* harmony export */   "devtools": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.devtools),
/* harmony export */   "effect": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.effect),
/* harmony export */   "effectScope": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.effectScope),
/* harmony export */   "getCurrentInstance": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.getCurrentInstance),
/* harmony export */   "getCurrentScope": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.getCurrentScope),
/* harmony export */   "getTransitionRawChildren": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.getTransitionRawChildren),
/* harmony export */   "guardReactiveProps": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.guardReactiveProps),
/* harmony export */   "h": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.h),
/* harmony export */   "handleError": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.handleError),
/* harmony export */   "hasInjectionContext": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.hasInjectionContext),
/* harmony export */   "hydrate": () => (/* binding */ hydrate),
/* harmony export */   "initCustomFormatter": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.initCustomFormatter),
/* harmony export */   "initDirectivesForSSR": () => (/* binding */ initDirectivesForSSR),
/* harmony export */   "inject": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.inject),
/* harmony export */   "isMemoSame": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.isMemoSame),
/* harmony export */   "isProxy": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.isProxy),
/* harmony export */   "isReactive": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.isReactive),
/* harmony export */   "isReadonly": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.isReadonly),
/* harmony export */   "isRef": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.isRef),
/* harmony export */   "isRuntimeOnly": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.isRuntimeOnly),
/* harmony export */   "isShallow": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.isShallow),
/* harmony export */   "isVNode": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.isVNode),
/* harmony export */   "markRaw": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.markRaw),
/* harmony export */   "mergeDefaults": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.mergeDefaults),
/* harmony export */   "mergeModels": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.mergeModels),
/* harmony export */   "mergeProps": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.mergeProps),
/* harmony export */   "nextTick": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.nextTick),
/* harmony export */   "normalizeClass": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.normalizeClass),
/* harmony export */   "normalizeProps": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.normalizeProps),
/* harmony export */   "normalizeStyle": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.normalizeStyle),
/* harmony export */   "onActivated": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.onActivated),
/* harmony export */   "onBeforeMount": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.onBeforeMount),
/* harmony export */   "onBeforeUnmount": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.onBeforeUnmount),
/* harmony export */   "onBeforeUpdate": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.onBeforeUpdate),
/* harmony export */   "onDeactivated": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.onDeactivated),
/* harmony export */   "onErrorCaptured": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.onErrorCaptured),
/* harmony export */   "onMounted": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.onMounted),
/* harmony export */   "onRenderTracked": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.onRenderTracked),
/* harmony export */   "onRenderTriggered": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.onRenderTriggered),
/* harmony export */   "onScopeDispose": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.onScopeDispose),
/* harmony export */   "onServerPrefetch": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.onServerPrefetch),
/* harmony export */   "onUnmounted": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.onUnmounted),
/* harmony export */   "onUpdated": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.onUpdated),
/* harmony export */   "openBlock": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.openBlock),
/* harmony export */   "popScopeId": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.popScopeId),
/* harmony export */   "provide": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.provide),
/* harmony export */   "proxyRefs": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.proxyRefs),
/* harmony export */   "pushScopeId": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.pushScopeId),
/* harmony export */   "queuePostFlushCb": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.queuePostFlushCb),
/* harmony export */   "reactive": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.reactive),
/* harmony export */   "readonly": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.readonly),
/* harmony export */   "ref": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.ref),
/* harmony export */   "registerRuntimeCompiler": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.registerRuntimeCompiler),
/* harmony export */   "render": () => (/* binding */ render),
/* harmony export */   "renderList": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.renderList),
/* harmony export */   "renderSlot": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.renderSlot),
/* harmony export */   "resolveComponent": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.resolveComponent),
/* harmony export */   "resolveDirective": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.resolveDirective),
/* harmony export */   "resolveDynamicComponent": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.resolveDynamicComponent),
/* harmony export */   "resolveFilter": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.resolveFilter),
/* harmony export */   "resolveTransitionHooks": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.resolveTransitionHooks),
/* harmony export */   "setBlockTracking": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.setBlockTracking),
/* harmony export */   "setDevtoolsHook": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.setDevtoolsHook),
/* harmony export */   "setTransitionHooks": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.setTransitionHooks),
/* harmony export */   "shallowReactive": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.shallowReactive),
/* harmony export */   "shallowReadonly": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.shallowReadonly),
/* harmony export */   "shallowRef": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.shallowRef),
/* harmony export */   "ssrContextKey": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.ssrContextKey),
/* harmony export */   "ssrUtils": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.ssrUtils),
/* harmony export */   "stop": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.stop),
/* harmony export */   "toDisplayString": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.toDisplayString),
/* harmony export */   "toHandlerKey": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.toHandlerKey),
/* harmony export */   "toHandlers": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.toHandlers),
/* harmony export */   "toRaw": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.toRaw),
/* harmony export */   "toRef": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.toRef),
/* harmony export */   "toRefs": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.toRefs),
/* harmony export */   "toValue": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.toValue),
/* harmony export */   "transformVNodeArgs": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.transformVNodeArgs),
/* harmony export */   "triggerRef": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.triggerRef),
/* harmony export */   "unref": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.unref),
/* harmony export */   "useAttrs": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.useAttrs),
/* harmony export */   "useCssModule": () => (/* binding */ useCssModule),
/* harmony export */   "useCssVars": () => (/* binding */ useCssVars),
/* harmony export */   "useModel": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.useModel),
/* harmony export */   "useSSRContext": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.useSSRContext),
/* harmony export */   "useSlots": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.useSlots),
/* harmony export */   "useTransitionState": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.useTransitionState),
/* harmony export */   "vModelCheckbox": () => (/* binding */ vModelCheckbox),
/* harmony export */   "vModelDynamic": () => (/* binding */ vModelDynamic),
/* harmony export */   "vModelRadio": () => (/* binding */ vModelRadio),
/* harmony export */   "vModelSelect": () => (/* binding */ vModelSelect),
/* harmony export */   "vModelText": () => (/* binding */ vModelText),
/* harmony export */   "vShow": () => (/* binding */ vShow),
/* harmony export */   "version": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.version),
/* harmony export */   "warn": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.warn),
/* harmony export */   "watch": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.watch),
/* harmony export */   "watchEffect": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.watchEffect),
/* harmony export */   "watchPostEffect": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.watchPostEffect),
/* harmony export */   "watchSyncEffect": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.watchSyncEffect),
/* harmony export */   "withAsyncContext": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.withAsyncContext),
/* harmony export */   "withCtx": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.withCtx),
/* harmony export */   "withDefaults": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.withDefaults),
/* harmony export */   "withDirectives": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.withDirectives),
/* harmony export */   "withKeys": () => (/* binding */ withKeys),
/* harmony export */   "withMemo": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.withMemo),
/* harmony export */   "withModifiers": () => (/* binding */ withModifiers),
/* harmony export */   "withScopeId": () => (/* reexport safe */ _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.withScopeId)
/* harmony export */ });
/* harmony import */ var _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @vue/runtime-core */ "./node_modules/@vue/runtime-core/dist/runtime-core.esm-bundler.js");
/* harmony import */ var _vue_shared__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @vue/shared */ "./node_modules/@vue/shared/dist/shared.esm-bundler.js");
/* harmony import */ var _vue_runtime_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @vue/runtime-core */ "./node_modules/@vue/reactivity/dist/reactivity.esm-bundler.js");




const svgNS = "http://www.w3.org/2000/svg";
const doc = typeof document !== "undefined" ? document : null;
const templateContainer = doc && /* @__PURE__ */ doc.createElement("template");
const nodeOps = {
  insert: (child, parent, anchor) => {
    parent.insertBefore(child, anchor || null);
  },
  remove: (child) => {
    const parent = child.parentNode;
    if (parent) {
      parent.removeChild(child);
    }
  },
  createElement: (tag, isSVG, is, props) => {
    const el = isSVG ? doc.createElementNS(svgNS, tag) : doc.createElement(tag, is ? { is } : void 0);
    if (tag === "select" && props && props.multiple != null) {
      el.setAttribute("multiple", props.multiple);
    }
    return el;
  },
  createText: (text) => doc.createTextNode(text),
  createComment: (text) => doc.createComment(text),
  setText: (node, text) => {
    node.nodeValue = text;
  },
  setElementText: (el, text) => {
    el.textContent = text;
  },
  parentNode: (node) => node.parentNode,
  nextSibling: (node) => node.nextSibling,
  querySelector: (selector) => doc.querySelector(selector),
  setScopeId(el, id) {
    el.setAttribute(id, "");
  },
  // __UNSAFE__
  // Reason: innerHTML.
  // Static content here can only come from compiled templates.
  // As long as the user only uses trusted templates, this is safe.
  insertStaticContent(content, parent, anchor, isSVG, start, end) {
    const before = anchor ? anchor.previousSibling : parent.lastChild;
    if (start && (start === end || start.nextSibling)) {
      while (true) {
        parent.insertBefore(start.cloneNode(true), anchor);
        if (start === end || !(start = start.nextSibling))
          break;
      }
    } else {
      templateContainer.innerHTML = isSVG ? `<svg>${content}</svg>` : content;
      const template = templateContainer.content;
      if (isSVG) {
        const wrapper = template.firstChild;
        while (wrapper.firstChild) {
          template.appendChild(wrapper.firstChild);
        }
        template.removeChild(wrapper);
      }
      parent.insertBefore(template, anchor);
    }
    return [
      // first
      before ? before.nextSibling : parent.firstChild,
      // last
      anchor ? anchor.previousSibling : parent.lastChild
    ];
  }
};

function patchClass(el, value, isSVG) {
  const transitionClasses = el._vtc;
  if (transitionClasses) {
    value = (value ? [value, ...transitionClasses] : [...transitionClasses]).join(" ");
  }
  if (value == null) {
    el.removeAttribute("class");
  } else if (isSVG) {
    el.setAttribute("class", value);
  } else {
    el.className = value;
  }
}

function patchStyle(el, prev, next) {
  const style = el.style;
  const isCssString = (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isString)(next);
  if (next && !isCssString) {
    if (prev && !(0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isString)(prev)) {
      for (const key in prev) {
        if (next[key] == null) {
          setStyle(style, key, "");
        }
      }
    }
    for (const key in next) {
      setStyle(style, key, next[key]);
    }
  } else {
    const currentDisplay = style.display;
    if (isCssString) {
      if (prev !== next) {
        style.cssText = next;
      }
    } else if (prev) {
      el.removeAttribute("style");
    }
    if ("_vod" in el) {
      style.display = currentDisplay;
    }
  }
}
const semicolonRE = /[^\\];\s*$/;
const importantRE = /\s*!important$/;
function setStyle(style, name, val) {
  if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isArray)(val)) {
    val.forEach((v) => setStyle(style, name, v));
  } else {
    if (val == null)
      val = "";
    if (true) {
      if (semicolonRE.test(val)) {
        (0,_vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.warn)(
          `Unexpected semicolon at the end of '${name}' style value: '${val}'`
        );
      }
    }
    if (name.startsWith("--")) {
      style.setProperty(name, val);
    } else {
      const prefixed = autoPrefix(style, name);
      if (importantRE.test(val)) {
        style.setProperty(
          (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.hyphenate)(prefixed),
          val.replace(importantRE, ""),
          "important"
        );
      } else {
        style[prefixed] = val;
      }
    }
  }
}
const prefixes = ["Webkit", "Moz", "ms"];
const prefixCache = {};
function autoPrefix(style, rawName) {
  const cached = prefixCache[rawName];
  if (cached) {
    return cached;
  }
  let name = (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.camelize)(rawName);
  if (name !== "filter" && name in style) {
    return prefixCache[rawName] = name;
  }
  name = (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.capitalize)(name);
  for (let i = 0; i < prefixes.length; i++) {
    const prefixed = prefixes[i] + name;
    if (prefixed in style) {
      return prefixCache[rawName] = prefixed;
    }
  }
  return rawName;
}

const xlinkNS = "http://www.w3.org/1999/xlink";
function patchAttr(el, key, value, isSVG, instance) {
  if (isSVG && key.startsWith("xlink:")) {
    if (value == null) {
      el.removeAttributeNS(xlinkNS, key.slice(6, key.length));
    } else {
      el.setAttributeNS(xlinkNS, key, value);
    }
  } else {
    const isBoolean = (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isSpecialBooleanAttr)(key);
    if (value == null || isBoolean && !(0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.includeBooleanAttr)(value)) {
      el.removeAttribute(key);
    } else {
      el.setAttribute(key, isBoolean ? "" : value);
    }
  }
}

function patchDOMProp(el, key, value, prevChildren, parentComponent, parentSuspense, unmountChildren) {
  if (key === "innerHTML" || key === "textContent") {
    if (prevChildren) {
      unmountChildren(prevChildren, parentComponent, parentSuspense);
    }
    el[key] = value == null ? "" : value;
    return;
  }
  const tag = el.tagName;
  if (key === "value" && tag !== "PROGRESS" && // custom elements may use _value internally
  !tag.includes("-")) {
    el._value = value;
    const oldValue = tag === "OPTION" ? el.getAttribute("value") : el.value;
    const newValue = value == null ? "" : value;
    if (oldValue !== newValue) {
      el.value = newValue;
    }
    if (value == null) {
      el.removeAttribute(key);
    }
    return;
  }
  let needRemove = false;
  if (value === "" || value == null) {
    const type = typeof el[key];
    if (type === "boolean") {
      value = (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.includeBooleanAttr)(value);
    } else if (value == null && type === "string") {
      value = "";
      needRemove = true;
    } else if (type === "number") {
      value = 0;
      needRemove = true;
    }
  }
  try {
    el[key] = value;
  } catch (e) {
    if ( true && !needRemove) {
      (0,_vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.warn)(
        `Failed setting prop "${key}" on <${tag.toLowerCase()}>: value ${value} is invalid.`,
        e
      );
    }
  }
  needRemove && el.removeAttribute(key);
}

function addEventListener(el, event, handler, options) {
  el.addEventListener(event, handler, options);
}
function removeEventListener(el, event, handler, options) {
  el.removeEventListener(event, handler, options);
}
function patchEvent(el, rawName, prevValue, nextValue, instance = null) {
  const invokers = el._vei || (el._vei = {});
  const existingInvoker = invokers[rawName];
  if (nextValue && existingInvoker) {
    existingInvoker.value = nextValue;
  } else {
    const [name, options] = parseName(rawName);
    if (nextValue) {
      const invoker = invokers[rawName] = createInvoker(nextValue, instance);
      addEventListener(el, name, invoker, options);
    } else if (existingInvoker) {
      removeEventListener(el, name, existingInvoker, options);
      invokers[rawName] = void 0;
    }
  }
}
const optionsModifierRE = /(?:Once|Passive|Capture)$/;
function parseName(name) {
  let options;
  if (optionsModifierRE.test(name)) {
    options = {};
    let m;
    while (m = name.match(optionsModifierRE)) {
      name = name.slice(0, name.length - m[0].length);
      options[m[0].toLowerCase()] = true;
    }
  }
  const event = name[2] === ":" ? name.slice(3) : (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.hyphenate)(name.slice(2));
  return [event, options];
}
let cachedNow = 0;
const p = /* @__PURE__ */ Promise.resolve();
const getNow = () => cachedNow || (p.then(() => cachedNow = 0), cachedNow = Date.now());
function createInvoker(initialValue, instance) {
  const invoker = (e) => {
    if (!e._vts) {
      e._vts = Date.now();
    } else if (e._vts <= invoker.attached) {
      return;
    }
    (0,_vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.callWithAsyncErrorHandling)(
      patchStopImmediatePropagation(e, invoker.value),
      instance,
      5,
      [e]
    );
  };
  invoker.value = initialValue;
  invoker.attached = getNow();
  return invoker;
}
function patchStopImmediatePropagation(e, value) {
  if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isArray)(value)) {
    const originalStop = e.stopImmediatePropagation;
    e.stopImmediatePropagation = () => {
      originalStop.call(e);
      e._stopped = true;
    };
    return value.map((fn) => (e2) => !e2._stopped && fn && fn(e2));
  } else {
    return value;
  }
}

const nativeOnRE = /^on[a-z]/;
const patchProp = (el, key, prevValue, nextValue, isSVG = false, prevChildren, parentComponent, parentSuspense, unmountChildren) => {
  if (key === "class") {
    patchClass(el, nextValue, isSVG);
  } else if (key === "style") {
    patchStyle(el, prevValue, nextValue);
  } else if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isOn)(key)) {
    if (!(0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isModelListener)(key)) {
      patchEvent(el, key, prevValue, nextValue, parentComponent);
    }
  } else if (key[0] === "." ? (key = key.slice(1), true) : key[0] === "^" ? (key = key.slice(1), false) : shouldSetAsProp(el, key, nextValue, isSVG)) {
    patchDOMProp(
      el,
      key,
      nextValue,
      prevChildren,
      parentComponent,
      parentSuspense,
      unmountChildren
    );
  } else {
    if (key === "true-value") {
      el._trueValue = nextValue;
    } else if (key === "false-value") {
      el._falseValue = nextValue;
    }
    patchAttr(el, key, nextValue, isSVG);
  }
};
function shouldSetAsProp(el, key, value, isSVG) {
  if (isSVG) {
    if (key === "innerHTML" || key === "textContent") {
      return true;
    }
    if (key in el && nativeOnRE.test(key) && (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isFunction)(value)) {
      return true;
    }
    return false;
  }
  if (key === "spellcheck" || key === "draggable" || key === "translate") {
    return false;
  }
  if (key === "form") {
    return false;
  }
  if (key === "list" && el.tagName === "INPUT") {
    return false;
  }
  if (key === "type" && el.tagName === "TEXTAREA") {
    return false;
  }
  if (nativeOnRE.test(key) && (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isString)(value)) {
    return false;
  }
  return key in el;
}

function defineCustomElement(options, hydrate2) {
  const Comp = (0,_vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.defineComponent)(options);
  class VueCustomElement extends VueElement {
    constructor(initialProps) {
      super(Comp, initialProps, hydrate2);
    }
  }
  VueCustomElement.def = Comp;
  return VueCustomElement;
}
const defineSSRCustomElement = (options) => {
  return defineCustomElement(options, hydrate);
};
const BaseClass = typeof HTMLElement !== "undefined" ? HTMLElement : class {
};
class VueElement extends BaseClass {
  constructor(_def, _props = {}, hydrate2) {
    super();
    this._def = _def;
    this._props = _props;
    /**
     * @internal
     */
    this._instance = null;
    this._connected = false;
    this._resolved = false;
    this._numberProps = null;
    if (this.shadowRoot && hydrate2) {
      hydrate2(this._createVNode(), this.shadowRoot);
    } else {
      if ( true && this.shadowRoot) {
        (0,_vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.warn)(
          `Custom element has pre-rendered declarative shadow root but is not defined as hydratable. Use \`defineSSRCustomElement\`.`
        );
      }
      this.attachShadow({ mode: "open" });
      if (!this._def.__asyncLoader) {
        this._resolveProps(this._def);
      }
    }
  }
  connectedCallback() {
    this._connected = true;
    if (!this._instance) {
      if (this._resolved) {
        this._update();
      } else {
        this._resolveDef();
      }
    }
  }
  disconnectedCallback() {
    this._connected = false;
    (0,_vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.nextTick)(() => {
      if (!this._connected) {
        render(null, this.shadowRoot);
        this._instance = null;
      }
    });
  }
  /**
   * resolve inner component definition (handle possible async component)
   */
  _resolveDef() {
    this._resolved = true;
    for (let i = 0; i < this.attributes.length; i++) {
      this._setAttr(this.attributes[i].name);
    }
    new MutationObserver((mutations) => {
      for (const m of mutations) {
        this._setAttr(m.attributeName);
      }
    }).observe(this, { attributes: true });
    const resolve = (def, isAsync = false) => {
      const { props, styles } = def;
      let numberProps;
      if (props && !(0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isArray)(props)) {
        for (const key in props) {
          const opt = props[key];
          if (opt === Number || opt && opt.type === Number) {
            if (key in this._props) {
              this._props[key] = (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.toNumber)(this._props[key]);
            }
            (numberProps || (numberProps = /* @__PURE__ */ Object.create(null)))[(0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.camelize)(key)] = true;
          }
        }
      }
      this._numberProps = numberProps;
      if (isAsync) {
        this._resolveProps(def);
      }
      this._applyStyles(styles);
      this._update();
    };
    const asyncDef = this._def.__asyncLoader;
    if (asyncDef) {
      asyncDef().then((def) => resolve(def, true));
    } else {
      resolve(this._def);
    }
  }
  _resolveProps(def) {
    const { props } = def;
    const declaredPropKeys = (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isArray)(props) ? props : Object.keys(props || {});
    for (const key of Object.keys(this)) {
      if (key[0] !== "_" && declaredPropKeys.includes(key)) {
        this._setProp(key, this[key], true, false);
      }
    }
    for (const key of declaredPropKeys.map(_vue_shared__WEBPACK_IMPORTED_MODULE_1__.camelize)) {
      Object.defineProperty(this, key, {
        get() {
          return this._getProp(key);
        },
        set(val) {
          this._setProp(key, val);
        }
      });
    }
  }
  _setAttr(key) {
    let value = this.getAttribute(key);
    const camelKey = (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.camelize)(key);
    if (this._numberProps && this._numberProps[camelKey]) {
      value = (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.toNumber)(value);
    }
    this._setProp(camelKey, value, false);
  }
  /**
   * @internal
   */
  _getProp(key) {
    return this._props[key];
  }
  /**
   * @internal
   */
  _setProp(key, val, shouldReflect = true, shouldUpdate = true) {
    if (val !== this._props[key]) {
      this._props[key] = val;
      if (shouldUpdate && this._instance) {
        this._update();
      }
      if (shouldReflect) {
        if (val === true) {
          this.setAttribute((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.hyphenate)(key), "");
        } else if (typeof val === "string" || typeof val === "number") {
          this.setAttribute((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.hyphenate)(key), val + "");
        } else if (!val) {
          this.removeAttribute((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.hyphenate)(key));
        }
      }
    }
  }
  _update() {
    render(this._createVNode(), this.shadowRoot);
  }
  _createVNode() {
    const vnode = (0,_vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.createVNode)(this._def, (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.extend)({}, this._props));
    if (!this._instance) {
      vnode.ce = (instance) => {
        this._instance = instance;
        instance.isCE = true;
        if (true) {
          instance.ceReload = (newStyles) => {
            if (this._styles) {
              this._styles.forEach((s) => this.shadowRoot.removeChild(s));
              this._styles.length = 0;
            }
            this._applyStyles(newStyles);
            this._instance = null;
            this._update();
          };
        }
        const dispatch = (event, args) => {
          this.dispatchEvent(
            new CustomEvent(event, {
              detail: args
            })
          );
        };
        instance.emit = (event, ...args) => {
          dispatch(event, args);
          if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.hyphenate)(event) !== event) {
            dispatch((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.hyphenate)(event), args);
          }
        };
        let parent = this;
        while (parent = parent && (parent.parentNode || parent.host)) {
          if (parent instanceof VueElement) {
            instance.parent = parent._instance;
            instance.provides = parent._instance.provides;
            break;
          }
        }
      };
    }
    return vnode;
  }
  _applyStyles(styles) {
    if (styles) {
      styles.forEach((css) => {
        const s = document.createElement("style");
        s.textContent = css;
        this.shadowRoot.appendChild(s);
        if (true) {
          (this._styles || (this._styles = [])).push(s);
        }
      });
    }
  }
}

function useCssModule(name = "$style") {
  {
    const instance = (0,_vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.getCurrentInstance)();
    if (!instance) {
       true && (0,_vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.warn)(`useCssModule must be called inside setup()`);
      return _vue_shared__WEBPACK_IMPORTED_MODULE_1__.EMPTY_OBJ;
    }
    const modules = instance.type.__cssModules;
    if (!modules) {
       true && (0,_vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.warn)(`Current instance does not have CSS modules injected.`);
      return _vue_shared__WEBPACK_IMPORTED_MODULE_1__.EMPTY_OBJ;
    }
    const mod = modules[name];
    if (!mod) {
       true && (0,_vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.warn)(`Current instance does not have CSS module named "${name}".`);
      return _vue_shared__WEBPACK_IMPORTED_MODULE_1__.EMPTY_OBJ;
    }
    return mod;
  }
}

function useCssVars(getter) {
  const instance = (0,_vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.getCurrentInstance)();
  if (!instance) {
     true && (0,_vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.warn)(`useCssVars is called without current active component instance.`);
    return;
  }
  const updateTeleports = instance.ut = (vars = getter(instance.proxy)) => {
    Array.from(
      document.querySelectorAll(`[data-v-owner="${instance.uid}"]`)
    ).forEach((node) => setVarsOnNode(node, vars));
  };
  const setVars = () => {
    const vars = getter(instance.proxy);
    setVarsOnVNode(instance.subTree, vars);
    updateTeleports(vars);
  };
  (0,_vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.watchPostEffect)(setVars);
  (0,_vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.onMounted)(() => {
    const ob = new MutationObserver(setVars);
    ob.observe(instance.subTree.el.parentNode, { childList: true });
    (0,_vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.onUnmounted)(() => ob.disconnect());
  });
}
function setVarsOnVNode(vnode, vars) {
  if (vnode.shapeFlag & 128) {
    const suspense = vnode.suspense;
    vnode = suspense.activeBranch;
    if (suspense.pendingBranch && !suspense.isHydrating) {
      suspense.effects.push(() => {
        setVarsOnVNode(suspense.activeBranch, vars);
      });
    }
  }
  while (vnode.component) {
    vnode = vnode.component.subTree;
  }
  if (vnode.shapeFlag & 1 && vnode.el) {
    setVarsOnNode(vnode.el, vars);
  } else if (vnode.type === _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.Fragment) {
    vnode.children.forEach((c) => setVarsOnVNode(c, vars));
  } else if (vnode.type === _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.Static) {
    let { el, anchor } = vnode;
    while (el) {
      setVarsOnNode(el, vars);
      if (el === anchor)
        break;
      el = el.nextSibling;
    }
  }
}
function setVarsOnNode(el, vars) {
  if (el.nodeType === 1) {
    const style = el.style;
    for (const key in vars) {
      style.setProperty(`--${key}`, vars[key]);
    }
  }
}

const TRANSITION = "transition";
const ANIMATION = "animation";
const Transition = (props, { slots }) => (0,_vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.h)(_vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.BaseTransition, resolveTransitionProps(props), slots);
Transition.displayName = "Transition";
const DOMTransitionPropsValidators = {
  name: String,
  type: String,
  css: {
    type: Boolean,
    default: true
  },
  duration: [String, Number, Object],
  enterFromClass: String,
  enterActiveClass: String,
  enterToClass: String,
  appearFromClass: String,
  appearActiveClass: String,
  appearToClass: String,
  leaveFromClass: String,
  leaveActiveClass: String,
  leaveToClass: String
};
const TransitionPropsValidators = Transition.props = /* @__PURE__ */ (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.extend)(
  {},
  _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.BaseTransitionPropsValidators,
  DOMTransitionPropsValidators
);
const callHook = (hook, args = []) => {
  if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isArray)(hook)) {
    hook.forEach((h2) => h2(...args));
  } else if (hook) {
    hook(...args);
  }
};
const hasExplicitCallback = (hook) => {
  return hook ? (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isArray)(hook) ? hook.some((h2) => h2.length > 1) : hook.length > 1 : false;
};
function resolveTransitionProps(rawProps) {
  const baseProps = {};
  for (const key in rawProps) {
    if (!(key in DOMTransitionPropsValidators)) {
      baseProps[key] = rawProps[key];
    }
  }
  if (rawProps.css === false) {
    return baseProps;
  }
  const {
    name = "v",
    type,
    duration,
    enterFromClass = `${name}-enter-from`,
    enterActiveClass = `${name}-enter-active`,
    enterToClass = `${name}-enter-to`,
    appearFromClass = enterFromClass,
    appearActiveClass = enterActiveClass,
    appearToClass = enterToClass,
    leaveFromClass = `${name}-leave-from`,
    leaveActiveClass = `${name}-leave-active`,
    leaveToClass = `${name}-leave-to`
  } = rawProps;
  const durations = normalizeDuration(duration);
  const enterDuration = durations && durations[0];
  const leaveDuration = durations && durations[1];
  const {
    onBeforeEnter,
    onEnter,
    onEnterCancelled,
    onLeave,
    onLeaveCancelled,
    onBeforeAppear = onBeforeEnter,
    onAppear = onEnter,
    onAppearCancelled = onEnterCancelled
  } = baseProps;
  const finishEnter = (el, isAppear, done) => {
    removeTransitionClass(el, isAppear ? appearToClass : enterToClass);
    removeTransitionClass(el, isAppear ? appearActiveClass : enterActiveClass);
    done && done();
  };
  const finishLeave = (el, done) => {
    el._isLeaving = false;
    removeTransitionClass(el, leaveFromClass);
    removeTransitionClass(el, leaveToClass);
    removeTransitionClass(el, leaveActiveClass);
    done && done();
  };
  const makeEnterHook = (isAppear) => {
    return (el, done) => {
      const hook = isAppear ? onAppear : onEnter;
      const resolve = () => finishEnter(el, isAppear, done);
      callHook(hook, [el, resolve]);
      nextFrame(() => {
        removeTransitionClass(el, isAppear ? appearFromClass : enterFromClass);
        addTransitionClass(el, isAppear ? appearToClass : enterToClass);
        if (!hasExplicitCallback(hook)) {
          whenTransitionEnds(el, type, enterDuration, resolve);
        }
      });
    };
  };
  return (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.extend)(baseProps, {
    onBeforeEnter(el) {
      callHook(onBeforeEnter, [el]);
      addTransitionClass(el, enterFromClass);
      addTransitionClass(el, enterActiveClass);
    },
    onBeforeAppear(el) {
      callHook(onBeforeAppear, [el]);
      addTransitionClass(el, appearFromClass);
      addTransitionClass(el, appearActiveClass);
    },
    onEnter: makeEnterHook(false),
    onAppear: makeEnterHook(true),
    onLeave(el, done) {
      el._isLeaving = true;
      const resolve = () => finishLeave(el, done);
      addTransitionClass(el, leaveFromClass);
      forceReflow();
      addTransitionClass(el, leaveActiveClass);
      nextFrame(() => {
        if (!el._isLeaving) {
          return;
        }
        removeTransitionClass(el, leaveFromClass);
        addTransitionClass(el, leaveToClass);
        if (!hasExplicitCallback(onLeave)) {
          whenTransitionEnds(el, type, leaveDuration, resolve);
        }
      });
      callHook(onLeave, [el, resolve]);
    },
    onEnterCancelled(el) {
      finishEnter(el, false);
      callHook(onEnterCancelled, [el]);
    },
    onAppearCancelled(el) {
      finishEnter(el, true);
      callHook(onAppearCancelled, [el]);
    },
    onLeaveCancelled(el) {
      finishLeave(el);
      callHook(onLeaveCancelled, [el]);
    }
  });
}
function normalizeDuration(duration) {
  if (duration == null) {
    return null;
  } else if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isObject)(duration)) {
    return [NumberOf(duration.enter), NumberOf(duration.leave)];
  } else {
    const n = NumberOf(duration);
    return [n, n];
  }
}
function NumberOf(val) {
  const res = (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.toNumber)(val);
  if (true) {
    (0,_vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.assertNumber)(res, "<transition> explicit duration");
  }
  return res;
}
function addTransitionClass(el, cls) {
  cls.split(/\s+/).forEach((c) => c && el.classList.add(c));
  (el._vtc || (el._vtc = /* @__PURE__ */ new Set())).add(cls);
}
function removeTransitionClass(el, cls) {
  cls.split(/\s+/).forEach((c) => c && el.classList.remove(c));
  const { _vtc } = el;
  if (_vtc) {
    _vtc.delete(cls);
    if (!_vtc.size) {
      el._vtc = void 0;
    }
  }
}
function nextFrame(cb) {
  requestAnimationFrame(() => {
    requestAnimationFrame(cb);
  });
}
let endId = 0;
function whenTransitionEnds(el, expectedType, explicitTimeout, resolve) {
  const id = el._endId = ++endId;
  const resolveIfNotStale = () => {
    if (id === el._endId) {
      resolve();
    }
  };
  if (explicitTimeout) {
    return setTimeout(resolveIfNotStale, explicitTimeout);
  }
  const { type, timeout, propCount } = getTransitionInfo(el, expectedType);
  if (!type) {
    return resolve();
  }
  const endEvent = type + "end";
  let ended = 0;
  const end = () => {
    el.removeEventListener(endEvent, onEnd);
    resolveIfNotStale();
  };
  const onEnd = (e) => {
    if (e.target === el && ++ended >= propCount) {
      end();
    }
  };
  setTimeout(() => {
    if (ended < propCount) {
      end();
    }
  }, timeout + 1);
  el.addEventListener(endEvent, onEnd);
}
function getTransitionInfo(el, expectedType) {
  const styles = window.getComputedStyle(el);
  const getStyleProperties = (key) => (styles[key] || "").split(", ");
  const transitionDelays = getStyleProperties(`${TRANSITION}Delay`);
  const transitionDurations = getStyleProperties(`${TRANSITION}Duration`);
  const transitionTimeout = getTimeout(transitionDelays, transitionDurations);
  const animationDelays = getStyleProperties(`${ANIMATION}Delay`);
  const animationDurations = getStyleProperties(`${ANIMATION}Duration`);
  const animationTimeout = getTimeout(animationDelays, animationDurations);
  let type = null;
  let timeout = 0;
  let propCount = 0;
  if (expectedType === TRANSITION) {
    if (transitionTimeout > 0) {
      type = TRANSITION;
      timeout = transitionTimeout;
      propCount = transitionDurations.length;
    }
  } else if (expectedType === ANIMATION) {
    if (animationTimeout > 0) {
      type = ANIMATION;
      timeout = animationTimeout;
      propCount = animationDurations.length;
    }
  } else {
    timeout = Math.max(transitionTimeout, animationTimeout);
    type = timeout > 0 ? transitionTimeout > animationTimeout ? TRANSITION : ANIMATION : null;
    propCount = type ? type === TRANSITION ? transitionDurations.length : animationDurations.length : 0;
  }
  const hasTransform = type === TRANSITION && /\b(transform|all)(,|$)/.test(
    getStyleProperties(`${TRANSITION}Property`).toString()
  );
  return {
    type,
    timeout,
    propCount,
    hasTransform
  };
}
function getTimeout(delays, durations) {
  while (delays.length < durations.length) {
    delays = delays.concat(delays);
  }
  return Math.max(...durations.map((d, i) => toMs(d) + toMs(delays[i])));
}
function toMs(s) {
  return Number(s.slice(0, -1).replace(",", ".")) * 1e3;
}
function forceReflow() {
  return document.body.offsetHeight;
}

const positionMap = /* @__PURE__ */ new WeakMap();
const newPositionMap = /* @__PURE__ */ new WeakMap();
const TransitionGroupImpl = {
  name: "TransitionGroup",
  props: /* @__PURE__ */ (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.extend)({}, TransitionPropsValidators, {
    tag: String,
    moveClass: String
  }),
  setup(props, { slots }) {
    const instance = (0,_vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.getCurrentInstance)();
    const state = (0,_vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.useTransitionState)();
    let prevChildren;
    let children;
    (0,_vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.onUpdated)(() => {
      if (!prevChildren.length) {
        return;
      }
      const moveClass = props.moveClass || `${props.name || "v"}-move`;
      if (!hasCSSTransform(
        prevChildren[0].el,
        instance.vnode.el,
        moveClass
      )) {
        return;
      }
      prevChildren.forEach(callPendingCbs);
      prevChildren.forEach(recordPosition);
      const movedChildren = prevChildren.filter(applyTranslation);
      forceReflow();
      movedChildren.forEach((c) => {
        const el = c.el;
        const style = el.style;
        addTransitionClass(el, moveClass);
        style.transform = style.webkitTransform = style.transitionDuration = "";
        const cb = el._moveCb = (e) => {
          if (e && e.target !== el) {
            return;
          }
          if (!e || /transform$/.test(e.propertyName)) {
            el.removeEventListener("transitionend", cb);
            el._moveCb = null;
            removeTransitionClass(el, moveClass);
          }
        };
        el.addEventListener("transitionend", cb);
      });
    });
    return () => {
      const rawProps = (0,_vue_runtime_core__WEBPACK_IMPORTED_MODULE_2__.toRaw)(props);
      const cssTransitionProps = resolveTransitionProps(rawProps);
      let tag = rawProps.tag || _vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.Fragment;
      prevChildren = children;
      children = slots.default ? (0,_vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.getTransitionRawChildren)(slots.default()) : [];
      for (let i = 0; i < children.length; i++) {
        const child = children[i];
        if (child.key != null) {
          (0,_vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.setTransitionHooks)(
            child,
            (0,_vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.resolveTransitionHooks)(child, cssTransitionProps, state, instance)
          );
        } else if (true) {
          (0,_vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.warn)(`<TransitionGroup> children must be keyed.`);
        }
      }
      if (prevChildren) {
        for (let i = 0; i < prevChildren.length; i++) {
          const child = prevChildren[i];
          (0,_vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.setTransitionHooks)(
            child,
            (0,_vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.resolveTransitionHooks)(child, cssTransitionProps, state, instance)
          );
          positionMap.set(child, child.el.getBoundingClientRect());
        }
      }
      return (0,_vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.createVNode)(tag, null, children);
    };
  }
};
const removeMode = (props) => delete props.mode;
/* @__PURE__ */ removeMode(TransitionGroupImpl.props);
const TransitionGroup = TransitionGroupImpl;
function callPendingCbs(c) {
  const el = c.el;
  if (el._moveCb) {
    el._moveCb();
  }
  if (el._enterCb) {
    el._enterCb();
  }
}
function recordPosition(c) {
  newPositionMap.set(c, c.el.getBoundingClientRect());
}
function applyTranslation(c) {
  const oldPos = positionMap.get(c);
  const newPos = newPositionMap.get(c);
  const dx = oldPos.left - newPos.left;
  const dy = oldPos.top - newPos.top;
  if (dx || dy) {
    const s = c.el.style;
    s.transform = s.webkitTransform = `translate(${dx}px,${dy}px)`;
    s.transitionDuration = "0s";
    return c;
  }
}
function hasCSSTransform(el, root, moveClass) {
  const clone = el.cloneNode();
  if (el._vtc) {
    el._vtc.forEach((cls) => {
      cls.split(/\s+/).forEach((c) => c && clone.classList.remove(c));
    });
  }
  moveClass.split(/\s+/).forEach((c) => c && clone.classList.add(c));
  clone.style.display = "none";
  const container = root.nodeType === 1 ? root : root.parentNode;
  container.appendChild(clone);
  const { hasTransform } = getTransitionInfo(clone);
  container.removeChild(clone);
  return hasTransform;
}

const getModelAssigner = (vnode) => {
  const fn = vnode.props["onUpdate:modelValue"] || false;
  return (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isArray)(fn) ? (value) => (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.invokeArrayFns)(fn, value) : fn;
};
function onCompositionStart(e) {
  e.target.composing = true;
}
function onCompositionEnd(e) {
  const target = e.target;
  if (target.composing) {
    target.composing = false;
    target.dispatchEvent(new Event("input"));
  }
}
const vModelText = {
  created(el, { modifiers: { lazy, trim, number } }, vnode) {
    el._assign = getModelAssigner(vnode);
    const castToNumber = number || vnode.props && vnode.props.type === "number";
    addEventListener(el, lazy ? "change" : "input", (e) => {
      if (e.target.composing)
        return;
      let domValue = el.value;
      if (trim) {
        domValue = domValue.trim();
      }
      if (castToNumber) {
        domValue = (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.looseToNumber)(domValue);
      }
      el._assign(domValue);
    });
    if (trim) {
      addEventListener(el, "change", () => {
        el.value = el.value.trim();
      });
    }
    if (!lazy) {
      addEventListener(el, "compositionstart", onCompositionStart);
      addEventListener(el, "compositionend", onCompositionEnd);
      addEventListener(el, "change", onCompositionEnd);
    }
  },
  // set value on mounted so it's after min/max for type="range"
  mounted(el, { value }) {
    el.value = value == null ? "" : value;
  },
  beforeUpdate(el, { value, modifiers: { lazy, trim, number } }, vnode) {
    el._assign = getModelAssigner(vnode);
    if (el.composing)
      return;
    if (document.activeElement === el && el.type !== "range") {
      if (lazy) {
        return;
      }
      if (trim && el.value.trim() === value) {
        return;
      }
      if ((number || el.type === "number") && (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.looseToNumber)(el.value) === value) {
        return;
      }
    }
    const newValue = value == null ? "" : value;
    if (el.value !== newValue) {
      el.value = newValue;
    }
  }
};
const vModelCheckbox = {
  // #4096 array checkboxes need to be deep traversed
  deep: true,
  created(el, _, vnode) {
    el._assign = getModelAssigner(vnode);
    addEventListener(el, "change", () => {
      const modelValue = el._modelValue;
      const elementValue = getValue(el);
      const checked = el.checked;
      const assign = el._assign;
      if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isArray)(modelValue)) {
        const index = (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.looseIndexOf)(modelValue, elementValue);
        const found = index !== -1;
        if (checked && !found) {
          assign(modelValue.concat(elementValue));
        } else if (!checked && found) {
          const filtered = [...modelValue];
          filtered.splice(index, 1);
          assign(filtered);
        }
      } else if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isSet)(modelValue)) {
        const cloned = new Set(modelValue);
        if (checked) {
          cloned.add(elementValue);
        } else {
          cloned.delete(elementValue);
        }
        assign(cloned);
      } else {
        assign(getCheckboxValue(el, checked));
      }
    });
  },
  // set initial checked on mount to wait for true-value/false-value
  mounted: setChecked,
  beforeUpdate(el, binding, vnode) {
    el._assign = getModelAssigner(vnode);
    setChecked(el, binding, vnode);
  }
};
function setChecked(el, { value, oldValue }, vnode) {
  el._modelValue = value;
  if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isArray)(value)) {
    el.checked = (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.looseIndexOf)(value, vnode.props.value) > -1;
  } else if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isSet)(value)) {
    el.checked = value.has(vnode.props.value);
  } else if (value !== oldValue) {
    el.checked = (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.looseEqual)(value, getCheckboxValue(el, true));
  }
}
const vModelRadio = {
  created(el, { value }, vnode) {
    el.checked = (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.looseEqual)(value, vnode.props.value);
    el._assign = getModelAssigner(vnode);
    addEventListener(el, "change", () => {
      el._assign(getValue(el));
    });
  },
  beforeUpdate(el, { value, oldValue }, vnode) {
    el._assign = getModelAssigner(vnode);
    if (value !== oldValue) {
      el.checked = (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.looseEqual)(value, vnode.props.value);
    }
  }
};
const vModelSelect = {
  // <select multiple> value need to be deep traversed
  deep: true,
  created(el, { value, modifiers: { number } }, vnode) {
    const isSetModel = (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isSet)(value);
    addEventListener(el, "change", () => {
      const selectedVal = Array.prototype.filter.call(el.options, (o) => o.selected).map(
        (o) => number ? (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.looseToNumber)(getValue(o)) : getValue(o)
      );
      el._assign(
        el.multiple ? isSetModel ? new Set(selectedVal) : selectedVal : selectedVal[0]
      );
    });
    el._assign = getModelAssigner(vnode);
  },
  // set value in mounted & updated because <select> relies on its children
  // <option>s.
  mounted(el, { value }) {
    setSelected(el, value);
  },
  beforeUpdate(el, _binding, vnode) {
    el._assign = getModelAssigner(vnode);
  },
  updated(el, { value }) {
    setSelected(el, value);
  }
};
function setSelected(el, value) {
  const isMultiple = el.multiple;
  if (isMultiple && !(0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isArray)(value) && !(0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isSet)(value)) {
     true && (0,_vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.warn)(
      `<select multiple v-model> expects an Array or Set value for its binding, but got ${Object.prototype.toString.call(value).slice(8, -1)}.`
    );
    return;
  }
  for (let i = 0, l = el.options.length; i < l; i++) {
    const option = el.options[i];
    const optionValue = getValue(option);
    if (isMultiple) {
      if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isArray)(value)) {
        option.selected = (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.looseIndexOf)(value, optionValue) > -1;
      } else {
        option.selected = value.has(optionValue);
      }
    } else {
      if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.looseEqual)(getValue(option), value)) {
        if (el.selectedIndex !== i)
          el.selectedIndex = i;
        return;
      }
    }
  }
  if (!isMultiple && el.selectedIndex !== -1) {
    el.selectedIndex = -1;
  }
}
function getValue(el) {
  return "_value" in el ? el._value : el.value;
}
function getCheckboxValue(el, checked) {
  const key = checked ? "_trueValue" : "_falseValue";
  return key in el ? el[key] : checked;
}
const vModelDynamic = {
  created(el, binding, vnode) {
    callModelHook(el, binding, vnode, null, "created");
  },
  mounted(el, binding, vnode) {
    callModelHook(el, binding, vnode, null, "mounted");
  },
  beforeUpdate(el, binding, vnode, prevVNode) {
    callModelHook(el, binding, vnode, prevVNode, "beforeUpdate");
  },
  updated(el, binding, vnode, prevVNode) {
    callModelHook(el, binding, vnode, prevVNode, "updated");
  }
};
function resolveDynamicModel(tagName, type) {
  switch (tagName) {
    case "SELECT":
      return vModelSelect;
    case "TEXTAREA":
      return vModelText;
    default:
      switch (type) {
        case "checkbox":
          return vModelCheckbox;
        case "radio":
          return vModelRadio;
        default:
          return vModelText;
      }
  }
}
function callModelHook(el, binding, vnode, prevVNode, hook) {
  const modelToUse = resolveDynamicModel(
    el.tagName,
    vnode.props && vnode.props.type
  );
  const fn = modelToUse[hook];
  fn && fn(el, binding, vnode, prevVNode);
}
function initVModelForSSR() {
  vModelText.getSSRProps = ({ value }) => ({ value });
  vModelRadio.getSSRProps = ({ value }, vnode) => {
    if (vnode.props && (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.looseEqual)(vnode.props.value, value)) {
      return { checked: true };
    }
  };
  vModelCheckbox.getSSRProps = ({ value }, vnode) => {
    if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isArray)(value)) {
      if (vnode.props && (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.looseIndexOf)(value, vnode.props.value) > -1) {
        return { checked: true };
      }
    } else if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isSet)(value)) {
      if (vnode.props && value.has(vnode.props.value)) {
        return { checked: true };
      }
    } else if (value) {
      return { checked: true };
    }
  };
  vModelDynamic.getSSRProps = (binding, vnode) => {
    if (typeof vnode.type !== "string") {
      return;
    }
    const modelToUse = resolveDynamicModel(
      // resolveDynamicModel expects an uppercase tag name, but vnode.type is lowercase
      vnode.type.toUpperCase(),
      vnode.props && vnode.props.type
    );
    if (modelToUse.getSSRProps) {
      return modelToUse.getSSRProps(binding, vnode);
    }
  };
}

const systemModifiers = ["ctrl", "shift", "alt", "meta"];
const modifierGuards = {
  stop: (e) => e.stopPropagation(),
  prevent: (e) => e.preventDefault(),
  self: (e) => e.target !== e.currentTarget,
  ctrl: (e) => !e.ctrlKey,
  shift: (e) => !e.shiftKey,
  alt: (e) => !e.altKey,
  meta: (e) => !e.metaKey,
  left: (e) => "button" in e && e.button !== 0,
  middle: (e) => "button" in e && e.button !== 1,
  right: (e) => "button" in e && e.button !== 2,
  exact: (e, modifiers) => systemModifiers.some((m) => e[`${m}Key`] && !modifiers.includes(m))
};
const withModifiers = (fn, modifiers) => {
  return (event, ...args) => {
    for (let i = 0; i < modifiers.length; i++) {
      const guard = modifierGuards[modifiers[i]];
      if (guard && guard(event, modifiers))
        return;
    }
    return fn(event, ...args);
  };
};
const keyNames = {
  esc: "escape",
  space: " ",
  up: "arrow-up",
  left: "arrow-left",
  right: "arrow-right",
  down: "arrow-down",
  delete: "backspace"
};
const withKeys = (fn, modifiers) => {
  return (event) => {
    if (!("key" in event)) {
      return;
    }
    const eventKey = (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.hyphenate)(event.key);
    if (modifiers.some((k) => k === eventKey || keyNames[k] === eventKey)) {
      return fn(event);
    }
  };
};

const vShow = {
  beforeMount(el, { value }, { transition }) {
    el._vod = el.style.display === "none" ? "" : el.style.display;
    if (transition && value) {
      transition.beforeEnter(el);
    } else {
      setDisplay(el, value);
    }
  },
  mounted(el, { value }, { transition }) {
    if (transition && value) {
      transition.enter(el);
    }
  },
  updated(el, { value, oldValue }, { transition }) {
    if (!value === !oldValue)
      return;
    if (transition) {
      if (value) {
        transition.beforeEnter(el);
        setDisplay(el, true);
        transition.enter(el);
      } else {
        transition.leave(el, () => {
          setDisplay(el, false);
        });
      }
    } else {
      setDisplay(el, value);
    }
  },
  beforeUnmount(el, { value }) {
    setDisplay(el, value);
  }
};
function setDisplay(el, value) {
  el.style.display = value ? el._vod : "none";
}
function initVShowForSSR() {
  vShow.getSSRProps = ({ value }) => {
    if (!value) {
      return { style: { display: "none" } };
    }
  };
}

const rendererOptions = /* @__PURE__ */ (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.extend)({ patchProp }, nodeOps);
let renderer;
let enabledHydration = false;
function ensureRenderer() {
  return renderer || (renderer = (0,_vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.createRenderer)(rendererOptions));
}
function ensureHydrationRenderer() {
  renderer = enabledHydration ? renderer : (0,_vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.createHydrationRenderer)(rendererOptions);
  enabledHydration = true;
  return renderer;
}
const render = (...args) => {
  ensureRenderer().render(...args);
};
const hydrate = (...args) => {
  ensureHydrationRenderer().hydrate(...args);
};
const createApp = (...args) => {
  const app = ensureRenderer().createApp(...args);
  if (true) {
    injectNativeTagCheck(app);
    injectCompilerOptionsCheck(app);
  }
  const { mount } = app;
  app.mount = (containerOrSelector) => {
    const container = normalizeContainer(containerOrSelector);
    if (!container)
      return;
    const component = app._component;
    if (!(0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isFunction)(component) && !component.render && !component.template) {
      component.template = container.innerHTML;
    }
    container.innerHTML = "";
    const proxy = mount(container, false, container instanceof SVGElement);
    if (container instanceof Element) {
      container.removeAttribute("v-cloak");
      container.setAttribute("data-v-app", "");
    }
    return proxy;
  };
  return app;
};
const createSSRApp = (...args) => {
  const app = ensureHydrationRenderer().createApp(...args);
  if (true) {
    injectNativeTagCheck(app);
    injectCompilerOptionsCheck(app);
  }
  const { mount } = app;
  app.mount = (containerOrSelector) => {
    const container = normalizeContainer(containerOrSelector);
    if (container) {
      return mount(container, true, container instanceof SVGElement);
    }
  };
  return app;
};
function injectNativeTagCheck(app) {
  Object.defineProperty(app.config, "isNativeTag", {
    value: (tag) => (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isHTMLTag)(tag) || (0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isSVGTag)(tag),
    writable: false
  });
}
function injectCompilerOptionsCheck(app) {
  if ((0,_vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.isRuntimeOnly)()) {
    const isCustomElement = app.config.isCustomElement;
    Object.defineProperty(app.config, "isCustomElement", {
      get() {
        return isCustomElement;
      },
      set() {
        (0,_vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.warn)(
          `The \`isCustomElement\` config option is deprecated. Use \`compilerOptions.isCustomElement\` instead.`
        );
      }
    });
    const compilerOptions = app.config.compilerOptions;
    const msg = `The \`compilerOptions\` config option is only respected when using a build of Vue.js that includes the runtime compiler (aka "full build"). Since you are using the runtime-only build, \`compilerOptions\` must be passed to \`@vue/compiler-dom\` in the build setup instead.
- For vue-loader: pass it via vue-loader's \`compilerOptions\` loader option.
- For vue-cli: see https://cli.vuejs.org/guide/webpack.html#modifying-options-of-a-loader
- For vite: pass it via @vitejs/plugin-vue options. See https://github.com/vitejs/vite-plugin-vue/tree/main/packages/plugin-vue#example-for-passing-options-to-vuecompiler-sfc`;
    Object.defineProperty(app.config, "compilerOptions", {
      get() {
        (0,_vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.warn)(msg);
        return compilerOptions;
      },
      set() {
        (0,_vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.warn)(msg);
      }
    });
  }
}
function normalizeContainer(container) {
  if ((0,_vue_shared__WEBPACK_IMPORTED_MODULE_1__.isString)(container)) {
    const res = document.querySelector(container);
    if ( true && !res) {
      (0,_vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.warn)(
        `Failed to mount app: mount target selector "${container}" returned null.`
      );
    }
    return res;
  }
  if ( true && window.ShadowRoot && container instanceof window.ShadowRoot && container.mode === "closed") {
    (0,_vue_runtime_core__WEBPACK_IMPORTED_MODULE_0__.warn)(
      `mounting on a ShadowRoot with \`{mode: "closed"}\` may lead to unpredictable bugs`
    );
  }
  return container;
}
let ssrDirectiveInitialized = false;
const initDirectivesForSSR = () => {
  if (!ssrDirectiveInitialized) {
    ssrDirectiveInitialized = true;
    initVModelForSSR();
    initVShowForSSR();
  }
} ;




/***/ }),

/***/ "./node_modules/@vue/shared/dist/shared.esm-bundler.js":
/*!*************************************************************!*\
  !*** ./node_modules/@vue/shared/dist/shared.esm-bundler.js ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "EMPTY_ARR": () => (/* binding */ EMPTY_ARR),
/* harmony export */   "EMPTY_OBJ": () => (/* binding */ EMPTY_OBJ),
/* harmony export */   "NO": () => (/* binding */ NO),
/* harmony export */   "NOOP": () => (/* binding */ NOOP),
/* harmony export */   "PatchFlagNames": () => (/* binding */ PatchFlagNames),
/* harmony export */   "camelize": () => (/* binding */ camelize),
/* harmony export */   "capitalize": () => (/* binding */ capitalize),
/* harmony export */   "def": () => (/* binding */ def),
/* harmony export */   "escapeHtml": () => (/* binding */ escapeHtml),
/* harmony export */   "escapeHtmlComment": () => (/* binding */ escapeHtmlComment),
/* harmony export */   "extend": () => (/* binding */ extend),
/* harmony export */   "genPropsAccessExp": () => (/* binding */ genPropsAccessExp),
/* harmony export */   "generateCodeFrame": () => (/* binding */ generateCodeFrame),
/* harmony export */   "getGlobalThis": () => (/* binding */ getGlobalThis),
/* harmony export */   "hasChanged": () => (/* binding */ hasChanged),
/* harmony export */   "hasOwn": () => (/* binding */ hasOwn),
/* harmony export */   "hyphenate": () => (/* binding */ hyphenate),
/* harmony export */   "includeBooleanAttr": () => (/* binding */ includeBooleanAttr),
/* harmony export */   "invokeArrayFns": () => (/* binding */ invokeArrayFns),
/* harmony export */   "isArray": () => (/* binding */ isArray),
/* harmony export */   "isBooleanAttr": () => (/* binding */ isBooleanAttr),
/* harmony export */   "isBuiltInDirective": () => (/* binding */ isBuiltInDirective),
/* harmony export */   "isDate": () => (/* binding */ isDate),
/* harmony export */   "isFunction": () => (/* binding */ isFunction),
/* harmony export */   "isGloballyWhitelisted": () => (/* binding */ isGloballyWhitelisted),
/* harmony export */   "isHTMLTag": () => (/* binding */ isHTMLTag),
/* harmony export */   "isIntegerKey": () => (/* binding */ isIntegerKey),
/* harmony export */   "isKnownHtmlAttr": () => (/* binding */ isKnownHtmlAttr),
/* harmony export */   "isKnownSvgAttr": () => (/* binding */ isKnownSvgAttr),
/* harmony export */   "isMap": () => (/* binding */ isMap),
/* harmony export */   "isModelListener": () => (/* binding */ isModelListener),
/* harmony export */   "isObject": () => (/* binding */ isObject),
/* harmony export */   "isOn": () => (/* binding */ isOn),
/* harmony export */   "isPlainObject": () => (/* binding */ isPlainObject),
/* harmony export */   "isPromise": () => (/* binding */ isPromise),
/* harmony export */   "isRegExp": () => (/* binding */ isRegExp),
/* harmony export */   "isReservedProp": () => (/* binding */ isReservedProp),
/* harmony export */   "isSSRSafeAttrName": () => (/* binding */ isSSRSafeAttrName),
/* harmony export */   "isSVGTag": () => (/* binding */ isSVGTag),
/* harmony export */   "isSet": () => (/* binding */ isSet),
/* harmony export */   "isSpecialBooleanAttr": () => (/* binding */ isSpecialBooleanAttr),
/* harmony export */   "isString": () => (/* binding */ isString),
/* harmony export */   "isSymbol": () => (/* binding */ isSymbol),
/* harmony export */   "isVoidTag": () => (/* binding */ isVoidTag),
/* harmony export */   "looseEqual": () => (/* binding */ looseEqual),
/* harmony export */   "looseIndexOf": () => (/* binding */ looseIndexOf),
/* harmony export */   "looseToNumber": () => (/* binding */ looseToNumber),
/* harmony export */   "makeMap": () => (/* binding */ makeMap),
/* harmony export */   "normalizeClass": () => (/* binding */ normalizeClass),
/* harmony export */   "normalizeProps": () => (/* binding */ normalizeProps),
/* harmony export */   "normalizeStyle": () => (/* binding */ normalizeStyle),
/* harmony export */   "objectToString": () => (/* binding */ objectToString),
/* harmony export */   "parseStringStyle": () => (/* binding */ parseStringStyle),
/* harmony export */   "propsToAttrMap": () => (/* binding */ propsToAttrMap),
/* harmony export */   "remove": () => (/* binding */ remove),
/* harmony export */   "slotFlagsText": () => (/* binding */ slotFlagsText),
/* harmony export */   "stringifyStyle": () => (/* binding */ stringifyStyle),
/* harmony export */   "toDisplayString": () => (/* binding */ toDisplayString),
/* harmony export */   "toHandlerKey": () => (/* binding */ toHandlerKey),
/* harmony export */   "toNumber": () => (/* binding */ toNumber),
/* harmony export */   "toRawType": () => (/* binding */ toRawType),
/* harmony export */   "toTypeString": () => (/* binding */ toTypeString)
/* harmony export */ });
function makeMap(str, expectsLowerCase) {
  const map = /* @__PURE__ */ Object.create(null);
  const list = str.split(",");
  for (let i = 0; i < list.length; i++) {
    map[list[i]] = true;
  }
  return expectsLowerCase ? (val) => !!map[val.toLowerCase()] : (val) => !!map[val];
}

const EMPTY_OBJ =  true ? Object.freeze({}) : 0;
const EMPTY_ARR =  true ? Object.freeze([]) : 0;
const NOOP = () => {
};
const NO = () => false;
const onRE = /^on[^a-z]/;
const isOn = (key) => onRE.test(key);
const isModelListener = (key) => key.startsWith("onUpdate:");
const extend = Object.assign;
const remove = (arr, el) => {
  const i = arr.indexOf(el);
  if (i > -1) {
    arr.splice(i, 1);
  }
};
const hasOwnProperty = Object.prototype.hasOwnProperty;
const hasOwn = (val, key) => hasOwnProperty.call(val, key);
const isArray = Array.isArray;
const isMap = (val) => toTypeString(val) === "[object Map]";
const isSet = (val) => toTypeString(val) === "[object Set]";
const isDate = (val) => toTypeString(val) === "[object Date]";
const isRegExp = (val) => toTypeString(val) === "[object RegExp]";
const isFunction = (val) => typeof val === "function";
const isString = (val) => typeof val === "string";
const isSymbol = (val) => typeof val === "symbol";
const isObject = (val) => val !== null && typeof val === "object";
const isPromise = (val) => {
  return isObject(val) && isFunction(val.then) && isFunction(val.catch);
};
const objectToString = Object.prototype.toString;
const toTypeString = (value) => objectToString.call(value);
const toRawType = (value) => {
  return toTypeString(value).slice(8, -1);
};
const isPlainObject = (val) => toTypeString(val) === "[object Object]";
const isIntegerKey = (key) => isString(key) && key !== "NaN" && key[0] !== "-" && "" + parseInt(key, 10) === key;
const isReservedProp = /* @__PURE__ */ makeMap(
  // the leading comma is intentional so empty string "" is also included
  ",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"
);
const isBuiltInDirective = /* @__PURE__ */ makeMap(
  "bind,cloak,else-if,else,for,html,if,model,on,once,pre,show,slot,text,memo"
);
const cacheStringFunction = (fn) => {
  const cache = /* @__PURE__ */ Object.create(null);
  return (str) => {
    const hit = cache[str];
    return hit || (cache[str] = fn(str));
  };
};
const camelizeRE = /-(\w)/g;
const camelize = cacheStringFunction((str) => {
  return str.replace(camelizeRE, (_, c) => c ? c.toUpperCase() : "");
});
const hyphenateRE = /\B([A-Z])/g;
const hyphenate = cacheStringFunction(
  (str) => str.replace(hyphenateRE, "-$1").toLowerCase()
);
const capitalize = cacheStringFunction(
  (str) => str.charAt(0).toUpperCase() + str.slice(1)
);
const toHandlerKey = cacheStringFunction(
  (str) => str ? `on${capitalize(str)}` : ``
);
const hasChanged = (value, oldValue) => !Object.is(value, oldValue);
const invokeArrayFns = (fns, arg) => {
  for (let i = 0; i < fns.length; i++) {
    fns[i](arg);
  }
};
const def = (obj, key, value) => {
  Object.defineProperty(obj, key, {
    configurable: true,
    enumerable: false,
    value
  });
};
const looseToNumber = (val) => {
  const n = parseFloat(val);
  return isNaN(n) ? val : n;
};
const toNumber = (val) => {
  const n = isString(val) ? Number(val) : NaN;
  return isNaN(n) ? val : n;
};
let _globalThis;
const getGlobalThis = () => {
  return _globalThis || (_globalThis = typeof globalThis !== "undefined" ? globalThis : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : typeof __webpack_require__.g !== "undefined" ? __webpack_require__.g : {});
};
const identRE = /^[_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*$/;
function genPropsAccessExp(name) {
  return identRE.test(name) ? `__props.${name}` : `__props[${JSON.stringify(name)}]`;
}

const PatchFlagNames = {
  [1]: `TEXT`,
  [2]: `CLASS`,
  [4]: `STYLE`,
  [8]: `PROPS`,
  [16]: `FULL_PROPS`,
  [32]: `HYDRATE_EVENTS`,
  [64]: `STABLE_FRAGMENT`,
  [128]: `KEYED_FRAGMENT`,
  [256]: `UNKEYED_FRAGMENT`,
  [512]: `NEED_PATCH`,
  [1024]: `DYNAMIC_SLOTS`,
  [2048]: `DEV_ROOT_FRAGMENT`,
  [-1]: `HOISTED`,
  [-2]: `BAIL`
};

const slotFlagsText = {
  [1]: "STABLE",
  [2]: "DYNAMIC",
  [3]: "FORWARDED"
};

const GLOBALS_WHITE_LISTED = "Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console";
const isGloballyWhitelisted = /* @__PURE__ */ makeMap(GLOBALS_WHITE_LISTED);

const range = 2;
function generateCodeFrame(source, start = 0, end = source.length) {
  let lines = source.split(/(\r?\n)/);
  const newlineSequences = lines.filter((_, idx) => idx % 2 === 1);
  lines = lines.filter((_, idx) => idx % 2 === 0);
  let count = 0;
  const res = [];
  for (let i = 0; i < lines.length; i++) {
    count += lines[i].length + (newlineSequences[i] && newlineSequences[i].length || 0);
    if (count >= start) {
      for (let j = i - range; j <= i + range || end > count; j++) {
        if (j < 0 || j >= lines.length)
          continue;
        const line = j + 1;
        res.push(
          `${line}${" ".repeat(Math.max(3 - String(line).length, 0))}|  ${lines[j]}`
        );
        const lineLength = lines[j].length;
        const newLineSeqLength = newlineSequences[j] && newlineSequences[j].length || 0;
        if (j === i) {
          const pad = start - (count - (lineLength + newLineSeqLength));
          const length = Math.max(
            1,
            end > count ? lineLength - pad : end - start
          );
          res.push(`   |  ` + " ".repeat(pad) + "^".repeat(length));
        } else if (j > i) {
          if (end > count) {
            const length = Math.max(Math.min(end - count, lineLength), 1);
            res.push(`   |  ` + "^".repeat(length));
          }
          count += lineLength + newLineSeqLength;
        }
      }
      break;
    }
  }
  return res.join("\n");
}

function normalizeStyle(value) {
  if (isArray(value)) {
    const res = {};
    for (let i = 0; i < value.length; i++) {
      const item = value[i];
      const normalized = isString(item) ? parseStringStyle(item) : normalizeStyle(item);
      if (normalized) {
        for (const key in normalized) {
          res[key] = normalized[key];
        }
      }
    }
    return res;
  } else if (isString(value)) {
    return value;
  } else if (isObject(value)) {
    return value;
  }
}
const listDelimiterRE = /;(?![^(]*\))/g;
const propertyDelimiterRE = /:([^]+)/;
const styleCommentRE = /\/\*[^]*?\*\//g;
function parseStringStyle(cssText) {
  const ret = {};
  cssText.replace(styleCommentRE, "").split(listDelimiterRE).forEach((item) => {
    if (item) {
      const tmp = item.split(propertyDelimiterRE);
      tmp.length > 1 && (ret[tmp[0].trim()] = tmp[1].trim());
    }
  });
  return ret;
}
function stringifyStyle(styles) {
  let ret = "";
  if (!styles || isString(styles)) {
    return ret;
  }
  for (const key in styles) {
    const value = styles[key];
    const normalizedKey = key.startsWith(`--`) ? key : hyphenate(key);
    if (isString(value) || typeof value === "number") {
      ret += `${normalizedKey}:${value};`;
    }
  }
  return ret;
}
function normalizeClass(value) {
  let res = "";
  if (isString(value)) {
    res = value;
  } else if (isArray(value)) {
    for (let i = 0; i < value.length; i++) {
      const normalized = normalizeClass(value[i]);
      if (normalized) {
        res += normalized + " ";
      }
    }
  } else if (isObject(value)) {
    for (const name in value) {
      if (value[name]) {
        res += name + " ";
      }
    }
  }
  return res.trim();
}
function normalizeProps(props) {
  if (!props)
    return null;
  let { class: klass, style } = props;
  if (klass && !isString(klass)) {
    props.class = normalizeClass(klass);
  }
  if (style) {
    props.style = normalizeStyle(style);
  }
  return props;
}

const HTML_TAGS = "html,body,base,head,link,meta,style,title,address,article,aside,footer,header,hgroup,h1,h2,h3,h4,h5,h6,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,summary,template,blockquote,iframe,tfoot";
const SVG_TAGS = "svg,animate,animateMotion,animateTransform,circle,clipPath,color-profile,defs,desc,discard,ellipse,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feDistantLight,feDropShadow,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,filter,foreignObject,g,hatch,hatchpath,image,line,linearGradient,marker,mask,mesh,meshgradient,meshpatch,meshrow,metadata,mpath,path,pattern,polygon,polyline,radialGradient,rect,set,solidcolor,stop,switch,symbol,text,textPath,title,tspan,unknown,use,view";
const VOID_TAGS = "area,base,br,col,embed,hr,img,input,link,meta,param,source,track,wbr";
const isHTMLTag = /* @__PURE__ */ makeMap(HTML_TAGS);
const isSVGTag = /* @__PURE__ */ makeMap(SVG_TAGS);
const isVoidTag = /* @__PURE__ */ makeMap(VOID_TAGS);

const specialBooleanAttrs = `itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly`;
const isSpecialBooleanAttr = /* @__PURE__ */ makeMap(specialBooleanAttrs);
const isBooleanAttr = /* @__PURE__ */ makeMap(
  specialBooleanAttrs + `,async,autofocus,autoplay,controls,default,defer,disabled,hidden,inert,loop,open,required,reversed,scoped,seamless,checked,muted,multiple,selected`
);
function includeBooleanAttr(value) {
  return !!value || value === "";
}
const unsafeAttrCharRE = /[>/="'\u0009\u000a\u000c\u0020]/;
const attrValidationCache = {};
function isSSRSafeAttrName(name) {
  if (attrValidationCache.hasOwnProperty(name)) {
    return attrValidationCache[name];
  }
  const isUnsafe = unsafeAttrCharRE.test(name);
  if (isUnsafe) {
    console.error(`unsafe attribute name: ${name}`);
  }
  return attrValidationCache[name] = !isUnsafe;
}
const propsToAttrMap = {
  acceptCharset: "accept-charset",
  className: "class",
  htmlFor: "for",
  httpEquiv: "http-equiv"
};
const isKnownHtmlAttr = /* @__PURE__ */ makeMap(
  `accept,accept-charset,accesskey,action,align,allow,alt,async,autocapitalize,autocomplete,autofocus,autoplay,background,bgcolor,border,buffered,capture,challenge,charset,checked,cite,class,code,codebase,color,cols,colspan,content,contenteditable,contextmenu,controls,coords,crossorigin,csp,data,datetime,decoding,default,defer,dir,dirname,disabled,download,draggable,dropzone,enctype,enterkeyhint,for,form,formaction,formenctype,formmethod,formnovalidate,formtarget,headers,height,hidden,high,href,hreflang,http-equiv,icon,id,importance,inert,integrity,ismap,itemprop,keytype,kind,label,lang,language,loading,list,loop,low,manifest,max,maxlength,minlength,media,min,multiple,muted,name,novalidate,open,optimum,pattern,ping,placeholder,poster,preload,radiogroup,readonly,referrerpolicy,rel,required,reversed,rows,rowspan,sandbox,scope,scoped,selected,shape,size,sizes,slot,span,spellcheck,src,srcdoc,srclang,srcset,start,step,style,summary,tabindex,target,title,translate,type,usemap,value,width,wrap`
);
const isKnownSvgAttr = /* @__PURE__ */ makeMap(
  `xmlns,accent-height,accumulate,additive,alignment-baseline,alphabetic,amplitude,arabic-form,ascent,attributeName,attributeType,azimuth,baseFrequency,baseline-shift,baseProfile,bbox,begin,bias,by,calcMode,cap-height,class,clip,clipPathUnits,clip-path,clip-rule,color,color-interpolation,color-interpolation-filters,color-profile,color-rendering,contentScriptType,contentStyleType,crossorigin,cursor,cx,cy,d,decelerate,descent,diffuseConstant,direction,display,divisor,dominant-baseline,dur,dx,dy,edgeMode,elevation,enable-background,end,exponent,fill,fill-opacity,fill-rule,filter,filterRes,filterUnits,flood-color,flood-opacity,font-family,font-size,font-size-adjust,font-stretch,font-style,font-variant,font-weight,format,from,fr,fx,fy,g1,g2,glyph-name,glyph-orientation-horizontal,glyph-orientation-vertical,glyphRef,gradientTransform,gradientUnits,hanging,height,href,hreflang,horiz-adv-x,horiz-origin-x,id,ideographic,image-rendering,in,in2,intercept,k,k1,k2,k3,k4,kernelMatrix,kernelUnitLength,kerning,keyPoints,keySplines,keyTimes,lang,lengthAdjust,letter-spacing,lighting-color,limitingConeAngle,local,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mask,maskContentUnits,maskUnits,mathematical,max,media,method,min,mode,name,numOctaves,offset,opacity,operator,order,orient,orientation,origin,overflow,overline-position,overline-thickness,panose-1,paint-order,path,pathLength,patternContentUnits,patternTransform,patternUnits,ping,pointer-events,points,pointsAtX,pointsAtY,pointsAtZ,preserveAlpha,preserveAspectRatio,primitiveUnits,r,radius,referrerPolicy,refX,refY,rel,rendering-intent,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,result,rotate,rx,ry,scale,seed,shape-rendering,slope,spacing,specularConstant,specularExponent,speed,spreadMethod,startOffset,stdDeviation,stemh,stemv,stitchTiles,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,string,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,style,surfaceScale,systemLanguage,tabindex,tableValues,target,targetX,targetY,text-anchor,text-decoration,text-rendering,textLength,to,transform,transform-origin,type,u1,u2,underline-position,underline-thickness,unicode,unicode-bidi,unicode-range,units-per-em,v-alphabetic,v-hanging,v-ideographic,v-mathematical,values,vector-effect,version,vert-adv-y,vert-origin-x,vert-origin-y,viewBox,viewTarget,visibility,width,widths,word-spacing,writing-mode,x,x-height,x1,x2,xChannelSelector,xlink:actuate,xlink:arcrole,xlink:href,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,y,y1,y2,yChannelSelector,z,zoomAndPan`
);

const escapeRE = /["'&<>]/;
function escapeHtml(string) {
  const str = "" + string;
  const match = escapeRE.exec(str);
  if (!match) {
    return str;
  }
  let html = "";
  let escaped;
  let index;
  let lastIndex = 0;
  for (index = match.index; index < str.length; index++) {
    switch (str.charCodeAt(index)) {
      case 34:
        escaped = "&quot;";
        break;
      case 38:
        escaped = "&amp;";
        break;
      case 39:
        escaped = "&#39;";
        break;
      case 60:
        escaped = "&lt;";
        break;
      case 62:
        escaped = "&gt;";
        break;
      default:
        continue;
    }
    if (lastIndex !== index) {
      html += str.slice(lastIndex, index);
    }
    lastIndex = index + 1;
    html += escaped;
  }
  return lastIndex !== index ? html + str.slice(lastIndex, index) : html;
}
const commentStripRE = /^-?>|<!--|-->|--!>|<!-$/g;
function escapeHtmlComment(src) {
  return src.replace(commentStripRE, "");
}

function looseCompareArrays(a, b) {
  if (a.length !== b.length)
    return false;
  let equal = true;
  for (let i = 0; equal && i < a.length; i++) {
    equal = looseEqual(a[i], b[i]);
  }
  return equal;
}
function looseEqual(a, b) {
  if (a === b)
    return true;
  let aValidType = isDate(a);
  let bValidType = isDate(b);
  if (aValidType || bValidType) {
    return aValidType && bValidType ? a.getTime() === b.getTime() : false;
  }
  aValidType = isSymbol(a);
  bValidType = isSymbol(b);
  if (aValidType || bValidType) {
    return a === b;
  }
  aValidType = isArray(a);
  bValidType = isArray(b);
  if (aValidType || bValidType) {
    return aValidType && bValidType ? looseCompareArrays(a, b) : false;
  }
  aValidType = isObject(a);
  bValidType = isObject(b);
  if (aValidType || bValidType) {
    if (!aValidType || !bValidType) {
      return false;
    }
    const aKeysCount = Object.keys(a).length;
    const bKeysCount = Object.keys(b).length;
    if (aKeysCount !== bKeysCount) {
      return false;
    }
    for (const key in a) {
      const aHasKey = a.hasOwnProperty(key);
      const bHasKey = b.hasOwnProperty(key);
      if (aHasKey && !bHasKey || !aHasKey && bHasKey || !looseEqual(a[key], b[key])) {
        return false;
      }
    }
  }
  return String(a) === String(b);
}
function looseIndexOf(arr, val) {
  return arr.findIndex((item) => looseEqual(item, val));
}

const toDisplayString = (val) => {
  return isString(val) ? val : val == null ? "" : isArray(val) || isObject(val) && (val.toString === objectToString || !isFunction(val.toString)) ? JSON.stringify(val, replacer, 2) : String(val);
};
const replacer = (_key, val) => {
  if (val && val.__v_isRef) {
    return replacer(_key, val.value);
  } else if (isMap(val)) {
    return {
      [`Map(${val.size})`]: [...val.entries()].reduce((entries, [key, val2]) => {
        entries[`${key} =>`] = val2;
        return entries;
      }, {})
    };
  } else if (isSet(val)) {
    return {
      [`Set(${val.size})`]: [...val.values()]
    };
  } else if (isObject(val) && !isArray(val) && !isPlainObject(val)) {
    return String(val);
  }
  return val;
};




/***/ }),

/***/ "./node_modules/agora-rtc-sdk-ng/AgoraRTC_N-production.js":
/*!****************************************************************!*\
  !*** ./node_modules/agora-rtc-sdk-ng/AgoraRTC_N-production.js ***!
  \****************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

/* provided dependency */ var Buffer = __webpack_require__(/*! buffer */ "./node_modules/buffer/index.js")["Buffer"];
/* provided dependency */ var process = __webpack_require__(/*! process/browser.js */ "./node_modules/process/browser.js");
/**
 * AgoraWebSDK_N-v4.17.0-0-gf6ae6c87-dirty Copyright AgoraInc.
 */

!function(e,t){ true?module.exports=t():0}(this,(function(){"use strict";function e(e,t){return t.forEach((function(t){t&&"string"!=typeof t&&!Array.isArray(t)&&Object.keys(t).forEach((function(i){if("default"!==i&&!(i in e)){var n=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(e,i,n.get?n:{enumerable:!0,get:function(){return t[i]}})}}))})),Object.freeze(e)}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof __webpack_require__.g?__webpack_require__.g:"undefined"!=typeof self?self:{},i=function(e){try{return!!e()}catch(e){return!0}},n=!i((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")})),r=n,o=Function.prototype,s=o.bind,a=o.call,c=r&&s.bind(a,a),d=r?function(e){return e&&c(e)}:function(e){return e&&function(){return a.apply(e,arguments)}},u=d({}.isPrototypeOf),l=function(e){return e&&e.Math==Math&&e},h=l("object"==typeof globalThis&&globalThis)||l("object"==typeof window&&window)||l("object"==typeof self&&self)||l("object"==typeof t&&t)||function(){return this}()||Function("return this")(),p=n,_=Function.prototype,E=_.apply,m=_.call,f="object"==typeof Reflect&&Reflect.apply||(p?m.bind(E):function(){return m.apply(E,arguments)}),S=function(e){return"function"==typeof e},T={},g=!i((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),R=n,I=Function.prototype.call,v=R?I.bind(I):function(){return I.apply(I,arguments)},C={},y={}.propertyIsEnumerable,A=Object.getOwnPropertyDescriptor,O=A&&!y.call({1:2},1);C.f=O?function(e){var t=A(this,e);return!!t&&t.enumerable}:y;var b,w,N=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},D=d,P=D({}.toString),L=D("".slice),k=function(e){return L(P(e),8,-1)},M=d,U=i,x=k,V=h.Object,F=M("".split),j=U((function(){return!V("z").propertyIsEnumerable(0)}))?function(e){return"String"==x(e)?F(e,""):V(e)}:V,B=h.TypeError,G=function(e){if(null==e)throw B("Can't call method on "+e);return e},W=j,H=G,K=function(e){return W(H(e))},Y=S,q=function(e){return"object"==typeof e?null!==e:Y(e)},J={},X=J,z=h,Q=S,Z=function(e){return Q(e)?e:void 0},$=function(e,t){return arguments.length<2?Z(X[e])||Z(z[e]):X[e]&&X[e][t]||z[e]&&z[e][t]},ee=$("navigator","userAgent")||"",te=h,ie=ee,ne=te.process,re=te.Deno,oe=ne&&ne.versions||re&&re.version,se=oe&&oe.v8;se&&(w=(b=se.split("."))[0]>0&&b[0]<4?1:+(b[0]+b[1])),!w&&ie&&(!(b=ie.match(/Edge\/(\d+)/))||b[1]>=74)&&(b=ie.match(/Chrome\/(\d+)/))&&(w=+b[1]);var ae=w,ce=ae,de=i,ue=!!Object.getOwnPropertySymbols&&!de((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&ce&&ce<41})),le=ue&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,he=$,pe=S,_e=u,Ee=le,me=h.Object,fe=Ee?function(e){return"symbol"==typeof e}:function(e){var t=he("Symbol");return pe(t)&&_e(t.prototype,me(e))},Se=h.String,Te=function(e){try{return Se(e)}catch(e){return"Object"}},ge=S,Re=Te,Ie=h.TypeError,ve=function(e){if(ge(e))return e;throw Ie(Re(e)+" is not a function")},Ce=ve,ye=function(e,t){var i=e[t];return null==i?void 0:Ce(i)},Ae=v,Oe=S,be=q,we=h.TypeError,Ne={exports:{}},De=h,Pe=Object.defineProperty,Le=function(e,t){try{Pe(De,e,{value:t,configurable:!0,writable:!0})}catch(i){De[e]=t}return t},ke="__core-js_shared__",Me=h[ke]||Le(ke,{}),Ue=Me;(Ne.exports=function(e,t){return Ue[e]||(Ue[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.20.3",mode:"pure",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.20.3/LICENSE",source:"https://github.com/zloirock/core-js"});var xe=G,Ve=h.Object,Fe=function(e){return Ve(xe(e))},je=Fe,Be=d({}.hasOwnProperty),Ge=Object.hasOwn||function(e,t){return Be(je(e),t)},We=d,He=0,Ke=Math.random(),Ye=We(1..toString),qe=function(e){return"Symbol("+(void 0===e?"":e)+")_"+Ye(++He+Ke,36)},Je=h,Xe=Ne.exports,ze=Ge,Qe=qe,Ze=ue,$e=le,et=Xe("wks"),tt=Je.Symbol,it=tt&&tt.for,nt=$e?tt:tt&&tt.withoutSetter||Qe,rt=function(e){if(!ze(et,e)||!Ze&&"string"!=typeof et[e]){var t="Symbol."+e;Ze&&ze(tt,e)?et[e]=tt[e]:et[e]=$e&&it?it(t):nt(t)}return et[e]},ot=v,st=q,at=fe,ct=ye,dt=function(e,t){var i,n;if("string"===t&&Oe(i=e.toString)&&!be(n=Ae(i,e)))return n;if(Oe(i=e.valueOf)&&!be(n=Ae(i,e)))return n;if("string"!==t&&Oe(i=e.toString)&&!be(n=Ae(i,e)))return n;throw we("Can't convert object to primitive value")},ut=rt,lt=h.TypeError,ht=ut("toPrimitive"),pt=function(e,t){if(!st(e)||at(e))return e;var i,n=ct(e,ht);if(n){if(void 0===t&&(t="default"),i=ot(n,e,t),!st(i)||at(i))return i;throw lt("Can't convert object to primitive value")}return void 0===t&&(t="number"),dt(e,t)},_t=fe,Et=function(e){var t=pt(e,"string");return _t(t)?t:t+""},mt=q,ft=h.document,St=mt(ft)&&mt(ft.createElement),Tt=function(e){return St?ft.createElement(e):{}},gt=Tt,Rt=!g&&!i((function(){return 7!=Object.defineProperty(gt("div"),"a",{get:function(){return 7}}).a})),It=g,vt=v,Ct=C,yt=N,At=K,Ot=Et,bt=Ge,wt=Rt,Nt=Object.getOwnPropertyDescriptor;T.f=It?Nt:function(e,t){if(e=At(e),t=Ot(t),wt)try{return Nt(e,t)}catch(e){}if(bt(e,t))return yt(!vt(Ct.f,e,t),e[t])};var Dt=i,Pt=S,Lt=/#|\.prototype\./,kt=function(e,t){var i=Ut[Mt(e)];return i==Vt||i!=xt&&(Pt(t)?Dt(t):!!t)},Mt=kt.normalize=function(e){return String(e).replace(Lt,".").toLowerCase()},Ut=kt.data={},xt=kt.NATIVE="N",Vt=kt.POLYFILL="P",Ft=kt,jt=ve,Bt=n,Gt=d(d.bind),Wt=function(e,t){return jt(e),void 0===t?e:Bt?Gt(e,t):function(){return e.apply(t,arguments)}},Ht={},Kt=g&&i((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),Yt=h,qt=q,Jt=Yt.String,Xt=Yt.TypeError,zt=function(e){if(qt(e))return e;throw Xt(Jt(e)+" is not an object")},Qt=g,Zt=Rt,$t=Kt,ei=zt,ti=Et,ii=h.TypeError,ni=Object.defineProperty,ri=Object.getOwnPropertyDescriptor,oi="enumerable",si="configurable",ai="writable";Ht.f=Qt?$t?function(e,t,i){if(ei(e),t=ti(t),ei(i),"function"==typeof e&&"prototype"===t&&"value"in i&&ai in i&&!i.writable){var n=ri(e,t);n&&n.writable&&(e[t]=i.value,i={configurable:si in i?i.configurable:n.configurable,enumerable:oi in i?i.enumerable:n.enumerable,writable:!1})}return ni(e,t,i)}:ni:function(e,t,i){if(ei(e),t=ti(t),ei(i),Zt)try{return ni(e,t,i)}catch(e){}if("get"in i||"set"in i)throw ii("Accessors not supported");return"value"in i&&(e[t]=i.value),e};var ci=Ht,di=N,ui=g?function(e,t,i){return ci.f(e,t,di(1,i))}:function(e,t,i){return e[t]=i,e},li=h,hi=f,pi=d,_i=S,Ei=T.f,mi=Ft,fi=J,Si=Wt,Ti=ui,gi=Ge,Ri=function(e){var t=function(i,n,r){if(this instanceof t){switch(arguments.length){case 0:return new e;case 1:return new e(i);case 2:return new e(i,n)}return new e(i,n,r)}return hi(e,this,arguments)};return t.prototype=e.prototype,t},Ii=function(e,t){var i,n,r,o,s,a,c,d,u=e.target,l=e.global,h=e.stat,p=e.proto,_=l?li:h?li[u]:(li[u]||{}).prototype,E=l?fi:fi[u]||Ti(fi,u,{})[u],m=E.prototype;for(r in t)i=!mi(l?r:u+(h?".":"#")+r,e.forced)&&_&&gi(_,r),s=E[r],i&&(a=e.noTargetGet?(d=Ei(_,r))&&d.value:_[r]),o=i&&a?a:t[r],i&&typeof s==typeof o||(c=e.bind&&i?Si(o,li):e.wrap&&i?Ri(o):p&&_i(o)?pi(o):o,(e.sham||o&&o.sham||s&&s.sham)&&Ti(c,"sham",!0),Ti(E,r,c),p&&(gi(fi,n=u+"Prototype")||Ti(fi,n,{}),Ti(fi[n],r,o),e.real&&m&&!m[r]&&Ti(m,r,o)))},vi=Math.ceil,Ci=Math.floor,yi=function(e){var t=+e;return t!=t||0===t?0:(t>0?Ci:vi)(t)},Ai=yi,Oi=Math.min,bi=function(e){return e>0?Oi(Ai(e),9007199254740991):0},wi=function(e){return bi(e.length)},Ni=ve,Di=Fe,Pi=j,Li=wi,ki=h.TypeError,Mi=function(e){return function(t,i,n,r){Ni(i);var o=Di(t),s=Pi(o),a=Li(o),c=e?a-1:0,d=e?-1:1;if(n<2)for(;;){if(c in s){r=s[c],c+=d;break}if(c+=d,e?c<0:a<=c)throw ki("Reduce of empty array with no initial value")}for(;e?c>=0:a>c;c+=d)c in s&&(r=i(r,s[c],c,o));return r}},Ui={left:Mi(!1),right:Mi(!0)},xi=i,Vi=function(e,t){var i=[][e];return!!i&&xi((function(){i.call(null,t||function(){throw 1},1)}))},Fi="process"==k(h.process),ji=Ui.left,Bi=ae,Gi=Fi;Ii({target:"Array",proto:!0,forced:!Vi("reduce")||!Gi&&Bi>79&&Bi<83},{reduce:function(e){var t=arguments.length;return ji(this,e,t,t>1?arguments[1]:void 0)}});var Wi=J,Hi=function(e){return Wi[e+"Prototype"]},Ki=Hi("Array").reduce,Yi=u,qi=Ki,Ji=Array.prototype,Xi=function(e){var t=e.reduce;return e===Ji||Yi(Ji,e)&&t===Ji.reduce?qi:t},zi=Xi;let Qi=!0,Zi=!0;function $i(e,t,i){const n=e.match(t);return n&&n.length>=i&&parseInt(n[i],10)}function en(e,t,i){if(!e.RTCPeerConnection)return;const n=e.RTCPeerConnection.prototype,r=n.addEventListener;n.addEventListener=function(e,n){if(e!==t)return r.apply(this,arguments);const o=e=>{const t=i(e);t&&(n.handleEvent?n.handleEvent(t):n(t))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(n,o),r.apply(this,[e,o])};const o=n.removeEventListener;n.removeEventListener=function(e,i){if(e!==t||!this._eventMap||!this._eventMap[t])return o.apply(this,arguments);if(!this._eventMap[t].has(i))return o.apply(this,arguments);const n=this._eventMap[t].get(i);return this._eventMap[t].delete(i),0===this._eventMap[t].size&&delete this._eventMap[t],0===Object.keys(this._eventMap).length&&delete this._eventMap,o.apply(this,[e,n])},Object.defineProperty(n,"on"+t,{get(){return this["_on"+t]},set(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}function tn(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(Qi=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function nn(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(Zi=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function rn(){if("object"==typeof window){if(Qi)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}}function on(e,t){Zi&&console.warn(e+" is deprecated, please use "+t+" instead.")}function sn(e){const t={browser:null,version:null};if(void 0===e||!e.navigator)return t.browser="Not a browser.",t;const{navigator:i}=e;if(i.mozGetUserMedia)t.browser="firefox",t.version=$i(i.userAgent,/Firefox\/(\d+)\./,1);else if(i.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection)t.browser="chrome",t.version=$i(i.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else{if(!e.RTCPeerConnection||!i.userAgent.match(/AppleWebKit\/(\d+)\./))return t.browser="Not a supported browser.",t;t.browser="safari",t.version=$i(i.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return t}function an(e){return"[object Object]"===Object.prototype.toString.call(e)}function cn(e){var t;return an(e)?zi(t=Object.keys(e)).call(t,(function(t,i){const n=an(e[i]),r=n?cn(e[i]):e[i],o=n&&!Object.keys(r).length;return void 0===r||o?t:Object.assign(t,{[i]:r})}),{}):e}function dn(e,t,i){const n=i?"outbound-rtp":"inbound-rtp",r=new Map;if(null===t)return r;const o=[];return e.forEach(e=>{"track"===e.type&&e.trackIdentifier===t.id&&o.push(e)}),o.forEach(t=>{e.forEach(i=>{i.type===n&&i.trackId===t.id&&function e(t,i,n){i&&!n.has(i.id)&&(n.set(i.id,i),Object.keys(i).forEach(r=>{r.endsWith("Id")?e(t,t.get(i[r]),n):r.endsWith("Ids")&&i[r].forEach(i=>{e(t,t.get(i),n)})}))}(e,i,r)})}),r}var un=Ne.exports,ln=qe,hn=un("keys"),pn=function(e){return hn[e]||(hn[e]=ln(e))},_n=!i((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),En=h,mn=Ge,fn=S,Sn=Fe,Tn=_n,gn=pn("IE_PROTO"),Rn=En.Object,In=Rn.prototype,vn=Tn?Rn.getPrototypeOf:function(e){var t=Sn(e);if(mn(t,gn))return t[gn];var i=t.constructor;return fn(i)&&t instanceof i?i.prototype:t instanceof Rn?In:null},Cn=h,yn=S,An=Cn.String,On=Cn.TypeError,bn=d,wn=zt,Nn=function(e){if("object"==typeof e||yn(e))return e;throw On("Can't set "+An(e)+" as a prototype")},Dn=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,i={};try{(e=bn(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(i,[]),t=i instanceof Array}catch(e){}return function(i,n){return wn(i),Nn(n),t?e(i,n):i.__proto__=n,i}}():void 0),Pn={},Ln=yi,kn=Math.max,Mn=Math.min,Un=function(e,t){var i=Ln(e);return i<0?kn(i+t,0):Mn(i,t)},xn=K,Vn=Un,Fn=wi,jn=function(e){return function(t,i,n){var r,o=xn(t),s=Fn(o),a=Vn(n,s);if(e&&i!=i){for(;s>a;)if((r=o[a++])!=r)return!0}else for(;s>a;a++)if((e||a in o)&&o[a]===i)return e||a||0;return!e&&-1}},Bn={includes:jn(!0),indexOf:jn(!1)},Gn={},Wn=Ge,Hn=K,Kn=Bn.indexOf,Yn=Gn,qn=d([].push),Jn=function(e,t){var i,n=Hn(e),r=0,o=[];for(i in n)!Wn(Yn,i)&&Wn(n,i)&&qn(o,i);for(;t.length>r;)Wn(n,i=t[r++])&&(~Kn(o,i)||qn(o,i));return o},Xn=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],zn=Jn,Qn=Xn.concat("length","prototype");Pn.f=Object.getOwnPropertyNames||function(e){return zn(e,Qn)};var Zn={};Zn.f=Object.getOwnPropertySymbols;var $n=$,er=Pn,tr=Zn,ir=zt,nr=d([].concat),rr=$n("Reflect","ownKeys")||function(e){var t=er.f(ir(e)),i=tr.f;return i?nr(t,i(e)):t},or=Ge,sr=rr,ar=T,cr=Ht,dr={},ur=Jn,lr=Xn,hr=Object.keys||function(e){return ur(e,lr)},pr=g,_r=Kt,Er=Ht,mr=zt,fr=K,Sr=hr;dr.f=pr&&!_r?Object.defineProperties:function(e,t){mr(e);for(var i,n=fr(t),r=Sr(t),o=r.length,s=0;o>s;)Er.f(e,i=r[s++],n[i]);return e};var Tr,gr=$("document","documentElement"),Rr=zt,Ir=dr,vr=Xn,Cr=Gn,yr=gr,Ar=Tt,Or=pn("IE_PROTO"),br=function(){},wr=function(e){return"<script>"+e+"</"+"script>"},Nr=function(e){e.write(wr("")),e.close();var t=e.parentWindow.Object;return e=null,t},Dr=function(){try{Tr=new ActiveXObject("htmlfile")}catch(e){}var e,t;Dr="undefined"!=typeof document?document.domain&&Tr?Nr(Tr):((t=Ar("iframe")).style.display="none",yr.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(wr("document.F=Object")),e.close(),e.F):Nr(Tr);for(var i=vr.length;i--;)delete Dr.prototype[vr[i]];return Dr()};Cr[Or]=!0;var Pr=Object.create||function(e,t){var i;return null!==e?(br.prototype=Rr(e),i=new br,br.prototype=null,i[Or]=e):i=Dr(),void 0===t?i:Ir.f(i,t)},Lr=d("".replace),kr=String(Error("zxcasd").stack),Mr=/\n\s*at [^:]*:[^\n]*/,Ur=Mr.test(kr),xr=q,Vr=ui,Fr={},jr=Fr,Br=rt("iterator"),Gr=Array.prototype,Wr={};Wr[rt("toStringTag")]="z";var Hr="[object z]"===String(Wr),Kr=h,Yr=Hr,qr=S,Jr=k,Xr=rt("toStringTag"),zr=Kr.Object,Qr="Arguments"==Jr(function(){return arguments}()),Zr=Yr?Jr:function(e){var t,i,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(i=function(e,t){try{return e[t]}catch(e){}}(t=zr(e),Xr))?i:Qr?Jr(t):"Object"==(n=Jr(t))&&qr(t.callee)?"Arguments":n},$r=Zr,eo=ye,to=Fr,io=rt("iterator"),no=function(e){if(null!=e)return eo(e,io)||eo(e,"@@iterator")||to[$r(e)]},ro=v,oo=ve,so=zt,ao=Te,co=no,uo=h.TypeError,lo=v,ho=zt,po=ye,_o=Wt,Eo=v,mo=zt,fo=Te,So=function(e){return void 0!==e&&(jr.Array===e||Gr[Br]===e)},To=wi,go=u,Ro=function(e,t){var i=arguments.length<2?co(e):t;if(oo(i))return so(ro(i,e));throw uo(ao(e)+" is not iterable")},Io=no,vo=function(e,t,i){var n,r;ho(e);try{if(!(n=po(e,"return"))){if("throw"===t)throw i;return i}n=lo(n,e)}catch(e){r=!0,n=e}if("throw"===t)throw i;if(r)throw n;return ho(n),i},Co=h.TypeError,yo=function(e,t){this.stopped=e,this.result=t},Ao=yo.prototype,Oo=function(e,t,i){var n,r,o,s,a,c,d,u=i&&i.that,l=!(!i||!i.AS_ENTRIES),h=!(!i||!i.IS_ITERATOR),p=!(!i||!i.INTERRUPTED),_=_o(t,u),E=function(e){return n&&vo(n,"normal",e),new yo(!0,e)},m=function(e){return l?(mo(e),p?_(e[0],e[1],E):_(e[0],e[1])):p?_(e,E):_(e)};if(h)n=e;else{if(!(r=Io(e)))throw Co(fo(e)+" is not iterable");if(So(r)){for(o=0,s=To(e);s>o;o++)if((a=m(e[o]))&&go(Ao,a))return a;return new yo(!1)}n=Ro(e,r)}for(c=n.next;!(d=Eo(c,n)).done;){try{a=m(d.value)}catch(e){vo(n,"throw",e)}if("object"==typeof a&&a&&go(Ao,a))return a}return new yo(!1)},bo=Zr,wo=h.String,No=function(e){if("Symbol"===bo(e))throw TypeError("Cannot convert a Symbol value to a string");return wo(e)},Do=No,Po=N,Lo=!i((function(){var e=Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",Po(1,7)),7!==e.stack)})),ko=Ii,Mo=h,Uo=u,xo=vn,Vo=Dn,Fo=function(e,t,i){for(var n=sr(t),r=cr.f,o=ar.f,s=0;s<n.length;s++){var a=n[s];or(e,a)||i&&or(i,a)||r(e,a,o(t,a))}},jo=Pr,Bo=ui,Go=N,Wo=function(e,t){if(Ur&&"string"==typeof e)for(;t--;)e=Lr(e,Mr,"");return e},Ho=function(e,t){xr(t)&&"cause"in t&&Vr(e,"cause",t.cause)},Ko=Oo,Yo=function(e,t){return void 0===e?arguments.length<2?"":t:Do(e)},qo=Lo,Jo=rt("toStringTag"),Xo=Mo.Error,zo=[].push,Qo=function(e,t){var i,n=arguments.length>2?arguments[2]:void 0,r=Uo(Zo,this);Vo?i=Vo(new Xo,r?xo(this):Zo):(i=r?this:jo(Zo),Bo(i,Jo,"Error")),void 0!==t&&Bo(i,"message",Yo(t)),qo&&Bo(i,"stack",Wo(i.stack,1)),Ho(i,n);var o=[];return Ko(e,zo,{that:o}),Bo(i,"errors",o),i};Vo?Vo(Qo,Xo):Fo(Qo,Xo,{name:!0});var Zo=Qo.prototype=jo(Xo.prototype,{constructor:Go(1,Qo),message:Go(1,""),name:Go(1,"AggregateError")});ko({global:!0},{AggregateError:Qo});var $o=S,es=Me,ts=d(Function.toString);$o(es.inspectSource)||(es.inspectSource=function(e){return ts(e)});var is,ns,rs,os=es.inspectSource,ss=S,as=os,cs=h.WeakMap,ds=ss(cs)&&/native code/.test(as(cs)),us=h,ls=d,hs=q,ps=ui,_s=Ge,Es=Me,ms=pn,fs=Gn,Ss="Object already initialized",Ts=us.TypeError,gs=us.WeakMap;if(ds||Es.state){var Rs=Es.state||(Es.state=new gs),Is=ls(Rs.get),vs=ls(Rs.has),Cs=ls(Rs.set);is=function(e,t){if(vs(Rs,e))throw new Ts(Ss);return t.facade=e,Cs(Rs,e,t),t},ns=function(e){return Is(Rs,e)||{}},rs=function(e){return vs(Rs,e)}}else{var ys=ms("state");fs[ys]=!0,is=function(e,t){if(_s(e,ys))throw new Ts(Ss);return t.facade=e,ps(e,ys,t),t},ns=function(e){return _s(e,ys)?e[ys]:{}},rs=function(e){return _s(e,ys)}}var As,Os,bs,ws={set:is,get:ns,has:rs,enforce:function(e){return rs(e)?ns(e):is(e,{})},getterFor:function(e){return function(t){var i;if(!hs(t)||(i=ns(t)).type!==e)throw Ts("Incompatible receiver, "+e+" required");return i}}},Ns=g,Ds=Ge,Ps=Function.prototype,Ls=Ns&&Object.getOwnPropertyDescriptor,ks=Ds(Ps,"name"),Ms={EXISTS:ks,PROPER:ks&&"something"===function(){}.name,CONFIGURABLE:ks&&(!Ns||Ns&&Ls(Ps,"name").configurable)},Us=ui,xs=function(e,t,i,n){n&&n.enumerable?e[t]=i:Us(e,t,i)},Vs=i,Fs=S,js=Pr,Bs=vn,Gs=xs,Ws=rt("iterator"),Hs=!1;[].keys&&("next"in(bs=[].keys())?(Os=Bs(Bs(bs)))!==Object.prototype&&(As=Os):Hs=!0);var Ks=null==As||Vs((function(){var e={};return As[Ws].call(e)!==e}));Fs((As=Ks?{}:js(As))[Ws])||Gs(As,Ws,(function(){return this}));var Ys={IteratorPrototype:As,BUGGY_SAFARI_ITERATORS:Hs},qs=Zr,Js=Hr?{}.toString:function(){return"[object "+qs(this)+"]"},Xs=Hr,zs=Ht.f,Qs=ui,Zs=Ge,$s=Js,ea=rt("toStringTag"),ta=function(e,t,i,n){if(e){var r=i?e:e.prototype;Zs(r,ea)||zs(r,ea,{configurable:!0,value:t}),n&&!Xs&&Qs(r,"toString",$s)}},ia=Ys.IteratorPrototype,na=Pr,ra=N,oa=ta,sa=Fr,aa=function(){return this},ca=Ii,da=v,ua=function(e,t,i,n){var r=t+" Iterator";return e.prototype=na(ia,{next:ra(+!n,i)}),oa(e,r,!1,!0),sa[r]=aa,e},la=vn,ha=ta,pa=xs,_a=Fr,Ea=Ms.PROPER,ma=Ys.BUGGY_SAFARI_ITERATORS,fa=rt("iterator"),Sa="keys",Ta="values",ga="entries",Ra=function(){return this},Ia=function(e,t,i,n,r,o,s){ua(i,t,n);var a,c,d,u=function(e){if(e===r&&E)return E;if(!ma&&e in p)return p[e];switch(e){case Sa:case Ta:case ga:return function(){return new i(this,e)}}return function(){return new i(this)}},l=t+" Iterator",h=!1,p=e.prototype,_=p[fa]||p["@@iterator"]||r&&p[r],E=!ma&&_||u(r),m="Array"==t&&p.entries||_;if(m&&(a=la(m.call(new e)))!==Object.prototype&&a.next&&(ha(a,l,!0,!0),_a[l]=Ra),Ea&&r==Ta&&_&&_.name!==Ta&&(h=!0,E=function(){return da(_,this)}),r)if(c={values:u(Ta),keys:o?E:u(Sa),entries:u(ga)},s)for(d in c)(ma||h||!(d in p))&&pa(p,d,c[d]);else ca({target:t,proto:!0,forced:ma||h},c);return s&&p[fa]!==E&&pa(p,fa,E,{name:r}),_a[t]=E,c},va=K,Ca=Fr,ya=ws;Ht.f;var Aa=Ia,Oa="Array Iterator",ba=ya.set,wa=ya.getterFor(Oa);Aa(Array,"Array",(function(e,t){ba(this,{type:Oa,target:va(e),index:0,kind:t})}),(function(){var e=wa(this),t=e.target,i=e.kind,n=e.index++;return!t||n>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==i?{value:n,done:!1}:"values"==i?{value:t[n],done:!1}:{value:[n,t[n]],done:!1}}),"values"),Ca.Arguments=Ca.Array;var Na=h.Promise,Da=xs,Pa=$,La=Ht,ka=g,Ma=rt("species"),Ua=u,xa=h.TypeError,Va=rt("iterator"),Fa=!1;try{var ja=0,Ba={next:function(){return{done:!!ja++}},return:function(){Fa=!0}};Ba[Va]=function(){return this},Array.from(Ba,(function(){throw 2}))}catch(e){}var Ga=d,Wa=i,Ha=S,Ka=Zr,Ya=os,qa=function(){},Ja=[],Xa=$("Reflect","construct"),za=/^\s*(?:class|function)\b/,Qa=Ga(za.exec),Za=!za.exec(qa),$a=function(e){if(!Ha(e))return!1;try{return Xa(qa,Ja,e),!0}catch(e){return!1}},ec=function(e){if(!Ha(e))return!1;switch(Ka(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Za||!!Qa(za,Ya(e))}catch(e){return!0}};ec.sham=!0;var tc,ic,nc,rc,oc=!Xa||Wa((function(){var e;return $a($a.call)||!$a(Object)||!$a((function(){e=!0}))||e}))?ec:$a,sc=oc,ac=Te,cc=h.TypeError,dc=zt,uc=function(e){if(sc(e))return e;throw cc(ac(e)+" is not a constructor")},lc=rt("species"),hc=function(e,t){var i,n=dc(e).constructor;return void 0===n||null==(i=dc(n)[lc])?t:uc(i)},pc=d([].slice),_c=/(?:ipad|iphone|ipod).*applewebkit/i.test(ee),Ec=h,mc=f,fc=Wt,Sc=S,Tc=Ge,gc=i,Rc=gr,Ic=pc,vc=Tt,Cc=_c,yc=Fi,Ac=Ec.setImmediate,Oc=Ec.clearImmediate,bc=Ec.process,wc=Ec.Dispatch,Nc=Ec.Function,Dc=Ec.MessageChannel,Pc=Ec.String,Lc=0,kc={},Mc="onreadystatechange";try{tc=Ec.location}catch(e){}var Uc=function(e){if(Tc(kc,e)){var t=kc[e];delete kc[e],t()}},xc=function(e){return function(){Uc(e)}},Vc=function(e){Uc(e.data)},Fc=function(e){Ec.postMessage(Pc(e),tc.protocol+"//"+tc.host)};Ac&&Oc||(Ac=function(e){var t=Ic(arguments,1);return kc[++Lc]=function(){mc(Sc(e)?e:Nc(e),void 0,t)},ic(Lc),Lc},Oc=function(e){delete kc[e]},yc?ic=function(e){bc.nextTick(xc(e))}:wc&&wc.now?ic=function(e){wc.now(xc(e))}:Dc&&!Cc?(rc=(nc=new Dc).port2,nc.port1.onmessage=Vc,ic=fc(rc.postMessage,rc)):Ec.addEventListener&&Sc(Ec.postMessage)&&!Ec.importScripts&&tc&&"file:"!==tc.protocol&&!gc(Fc)?(ic=Fc,Ec.addEventListener("message",Vc,!1)):ic=Mc in vc("script")?function(e){Rc.appendChild(vc("script")).onreadystatechange=function(){Rc.removeChild(this),Uc(e)}}:function(e){setTimeout(xc(e),0)});var jc,Bc,Gc,Wc,Hc,Kc,Yc,qc,Jc={set:Ac,clear:Oc},Xc=h,zc=/ipad|iphone|ipod/i.test(ee)&&void 0!==Xc.Pebble,Qc=/web0s(?!.*chrome)/i.test(ee),Zc=h,$c=Wt,ed=T.f,td=Jc.set,id=_c,nd=zc,rd=Qc,od=Fi,sd=Zc.MutationObserver||Zc.WebKitMutationObserver,ad=Zc.document,cd=Zc.process,dd=Zc.Promise,ud=ed(Zc,"queueMicrotask"),ld=ud&&ud.value;ld||(jc=function(){var e,t;for(od&&(e=cd.domain)&&e.exit();Bc;){t=Bc.fn,Bc=Bc.next;try{t()}catch(e){throw Bc?Wc():Gc=void 0,e}}Gc=void 0,e&&e.enter()},id||od||rd||!sd||!ad?!nd&&dd&&dd.resolve?((Yc=dd.resolve(void 0)).constructor=dd,qc=$c(Yc.then,Yc),Wc=function(){qc(jc)}):od?Wc=function(){cd.nextTick(jc)}:(td=$c(td,Zc),Wc=function(){td(jc)}):(Hc=!0,Kc=ad.createTextNode(""),new sd(jc).observe(Kc,{characterData:!0}),Wc=function(){Kc.data=Hc=!Hc}));var hd=ld||function(e){var t={fn:e,next:void 0};Gc&&(Gc.next=t),Bc||(Bc=t,Wc()),Gc=t},pd={},_d=ve,Ed=function(e){var t,i;this.promise=new e((function(e,n){if(void 0!==t||void 0!==i)throw TypeError("Bad Promise constructor");t=e,i=n})),this.resolve=_d(t),this.reject=_d(i)};pd.f=function(e){return new Ed(e)};var md=zt,fd=q,Sd=pd,Td=function(e,t){if(md(e),fd(t)&&t.constructor===e)return t;var i=Sd.f(e);return(0,i.resolve)(t),i.promise},gd=h,Rd=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}},Id=function(){this.head=null,this.tail=null};Id.prototype={add:function(e){var t={item:e,next:null};this.head?this.tail.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e)return this.head=e.next,this.tail===e&&(this.tail=null),e.item}};var vd,Cd,yd,Ad="object"==typeof window,Od=Ii,bd=h,wd=$,Nd=v,Dd=Na,Pd=function(e,t,i){for(var n in t)i&&i.unsafe&&e[n]?e[n]=t[n]:Da(e,n,t[n],i);return e},Ld=ta,kd=function(e){var t=Pa(e),i=La.f;ka&&t&&!t[Ma]&&i(t,Ma,{configurable:!0,get:function(){return this}})},Md=ve,Ud=S,xd=q,Vd=function(e,t){if(Ua(t,e))return e;throw xa("Incorrect invocation")},Fd=os,jd=Oo,Bd=function(e,t){if(!t&&!Fa)return!1;var i=!1;try{var n={};n[Va]=function(){return{next:function(){return{done:i=!0}}}},e(n)}catch(e){}return i},Gd=hc,Wd=Jc.set,Hd=hd,Kd=Td,Yd=function(e,t){var i=gd.console;i&&i.error&&(1==arguments.length?i.error(e):i.error(e,t))},qd=pd,Jd=Rd,Xd=Id,zd=ws,Qd=Ft,Zd=Ad,$d=Fi,eu=ae,tu=rt("species"),iu="Promise",nu=zd.getterFor(iu),ru=zd.set,ou=zd.getterFor(iu),su=Dd&&Dd.prototype,au=Dd,cu=su,du=bd.TypeError,uu=bd.document,lu=bd.process,hu=qd.f,pu=hu,_u=!!(uu&&uu.createEvent&&bd.dispatchEvent),Eu=Ud(bd.PromiseRejectionEvent),mu="unhandledrejection",fu=Qd(iu,(function(){var e=Fd(au),t=e!==String(au);if(!t&&66===eu)return!0;if(!cu.finally)return!0;if(eu>=51&&/native code/.test(e))return!1;var i=new au((function(e){e(1)})),n=function(e){e((function(){}),(function(){}))};return(i.constructor={})[tu]=n,!(i.then((function(){}))instanceof n)||!t&&Zd&&!Eu})),Su=fu||!Bd((function(e){au.all(e).catch((function(){}))})),Tu=function(e){var t;return!(!xd(e)||!Ud(t=e.then))&&t},gu=function(e,t){var i,n,r,o=t.value,s=1==t.state,a=s?e.ok:e.fail,c=e.resolve,d=e.reject,u=e.domain;try{a?(s||(2===t.rejection&&yu(t),t.rejection=1),!0===a?i=o:(u&&u.enter(),i=a(o),u&&(u.exit(),r=!0)),i===e.promise?d(du("Promise-chain cycle")):(n=Tu(i))?Nd(n,i,c,d):c(i)):d(o)}catch(e){u&&!r&&u.exit(),d(e)}},Ru=function(e,t){e.notified||(e.notified=!0,Hd((function(){for(var i,n=e.reactions;i=n.get();)gu(i,e);e.notified=!1,t&&!e.rejection&&vu(e)})))},Iu=function(e,t,i){var n,r;_u?((n=uu.createEvent("Event")).promise=t,n.reason=i,n.initEvent(e,!1,!0),bd.dispatchEvent(n)):n={promise:t,reason:i},!Eu&&(r=bd["on"+e])?r(n):e===mu&&Yd("Unhandled promise rejection",i)},vu=function(e){Nd(Wd,bd,(function(){var t,i=e.facade,n=e.value;if(Cu(e)&&(t=Jd((function(){$d?lu.emit("unhandledRejection",n,i):Iu(mu,i,n)})),e.rejection=$d||Cu(e)?2:1,t.error))throw t.value}))},Cu=function(e){return 1!==e.rejection&&!e.parent},yu=function(e){Nd(Wd,bd,(function(){var t=e.facade;$d?lu.emit("rejectionHandled",t):Iu("rejectionhandled",t,e.value)}))},Au=function(e,t,i){return function(n){e(t,n,i)}},Ou=function(e,t,i){e.done||(e.done=!0,i&&(e=i),e.value=t,e.state=2,Ru(e,!0))},bu=function(e,t,i){if(!e.done){e.done=!0,i&&(e=i);try{if(e.facade===t)throw du("Promise can't be resolved itself");var n=Tu(t);n?Hd((function(){var i={done:!1};try{Nd(n,t,Au(bu,i,e),Au(Ou,i,e))}catch(t){Ou(i,t,e)}})):(e.value=t,e.state=1,Ru(e,!1))}catch(t){Ou({done:!1},t,e)}}};fu&&(cu=(au=function(e){Vd(this,cu),Md(e),Nd(vd,this);var t=nu(this);try{e(Au(bu,t),Au(Ou,t))}catch(e){Ou(t,e)}}).prototype,(vd=function(e){ru(this,{type:iu,done:!1,notified:!1,parent:!1,reactions:new Xd,rejection:!1,state:0,value:void 0})}).prototype=Pd(cu,{then:function(e,t){var i=ou(this),n=hu(Gd(this,au));return i.parent=!0,n.ok=!Ud(e)||e,n.fail=Ud(t)&&t,n.domain=$d?lu.domain:void 0,0==i.state?i.reactions.add(n):Hd((function(){gu(n,i)})),n.promise},catch:function(e){return this.then(void 0,e)}}),Cd=function(){var e=new vd,t=nu(e);this.promise=e,this.resolve=Au(bu,t),this.reject=Au(Ou,t)},qd.f=hu=function(e){return e===au||e===yd?new Cd(e):pu(e)}),Od({global:!0,wrap:!0,forced:fu},{Promise:au}),Ld(au,iu,!1,!0),kd(iu),yd=wd(iu),Od({target:iu,stat:!0,forced:fu},{reject:function(e){var t=hu(this);return Nd(t.reject,void 0,e),t.promise}}),Od({target:iu,stat:!0,forced:true},{resolve:function(e){return Kd(this===yd?au:this,e)}}),Od({target:iu,stat:!0,forced:Su},{all:function(e){var t=this,i=hu(t),n=i.resolve,r=i.reject,o=Jd((function(){var i=Md(t.resolve),o=[],s=0,a=1;jd(e,(function(e){var c=s++,d=!1;a++,Nd(i,t,e).then((function(e){d||(d=!0,o[c]=e,--a||n(o))}),r)})),--a||n(o)}));return o.error&&r(o.value),i.promise},race:function(e){var t=this,i=hu(t),n=i.reject,r=Jd((function(){var r=Md(t.resolve);jd(e,(function(e){Nd(r,t,e).then(i.resolve,n)}))}));return r.error&&n(r.value),i.promise}});var wu=v,Nu=ve,Du=pd,Pu=Rd,Lu=Oo;Ii({target:"Promise",stat:!0},{allSettled:function(e){var t=this,i=Du.f(t),n=i.resolve,r=i.reject,o=Pu((function(){var i=Nu(t.resolve),r=[],o=0,s=1;Lu(e,(function(e){var a=o++,c=!1;s++,wu(i,t,e).then((function(e){c||(c=!0,r[a]={status:"fulfilled",value:e},--s||n(r))}),(function(e){c||(c=!0,r[a]={status:"rejected",reason:e},--s||n(r))}))})),--s||n(r)}));return o.error&&r(o.value),i.promise}});var ku=ve,Mu=$,Uu=v,xu=pd,Vu=Rd,Fu=Oo,ju="No one promise resolved";Ii({target:"Promise",stat:!0},{any:function(e){var t=this,i=Mu("AggregateError"),n=xu.f(t),r=n.resolve,o=n.reject,s=Vu((function(){var n=ku(t.resolve),s=[],a=0,c=1,d=!1;Fu(e,(function(e){var u=a++,l=!1;c++,Uu(n,t,e).then((function(e){l||d||(d=!0,r(e))}),(function(e){l||d||(l=!0,s[u]=e,--c||o(new i(s,ju)))}))})),--c||o(new i(s,ju))}));return s.error&&o(s.value),n.promise}});var Bu=Na,Gu=$,Wu=S,Hu=hc,Ku=Td;Ii({target:"Promise",proto:!0,real:!0,forced:!!Bu&&i((function(){Bu.prototype.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var t=Hu(this,Gu("Promise")),i=Wu(e);return this.then(i?function(i){return Ku(t,e()).then((function(){return i}))}:e,i?function(i){return Ku(t,e()).then((function(){throw i}))}:e)}});var Yu=d,qu=yi,Ju=No,Xu=G,zu=Yu("".charAt),Qu=Yu("".charCodeAt),Zu=Yu("".slice),$u=function(e){return function(t,i){var n,r,o=Ju(Xu(t)),s=qu(i),a=o.length;return s<0||s>=a?e?"":void 0:(n=Qu(o,s))<55296||n>56319||s+1===a||(r=Qu(o,s+1))<56320||r>57343?e?zu(o,s):n:e?Zu(o,s,s+2):r-56320+(n-55296<<10)+65536}},el={codeAt:$u(!1),charAt:$u(!0)}.charAt,tl=No,il=ws,nl=Ia,rl="String Iterator",ol=il.set,sl=il.getterFor(rl);nl(String,"String",(function(e){ol(this,{type:rl,string:tl(e),index:0})}),(function(){var e,t=sl(this),i=t.string,n=t.index;return n>=i.length?{value:void 0,done:!0}:(e=el(i,n),t.index+=e.length,{value:e,done:!1})}));var al=J.Promise,cl={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},dl=h,ul=Zr,ll=ui,hl=Fr,pl=rt("toStringTag");for(var _l in cl){var El=dl[_l],ml=El&&El.prototype;ml&&ul(ml)!==pl&&ll(ml,pl,_l),hl[_l]=hl.Array}var fl=al,Sl=fl;const Tl=rn;function gl(e,t){const i=e&&e.navigator;if(!i.mediaDevices)return;const n=function(e){if("object"!=typeof e||e.mandatory||e.optional)return e;const t={};return Object.keys(e).forEach(i=>{if("require"===i||"advanced"===i||"mediaSource"===i)return;const n="object"==typeof e[i]?e[i]:{ideal:e[i]};void 0!==n.exact&&"number"==typeof n.exact&&(n.min=n.max=n.exact);const r=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==n.ideal){t.optional=t.optional||[];let e={};"number"==typeof n.ideal?(e[r("min",i)]=n.ideal,t.optional.push(e),e={},e[r("max",i)]=n.ideal,t.optional.push(e)):(e[r("",i)]=n.ideal,t.optional.push(e))}void 0!==n.exact&&"number"!=typeof n.exact?(t.mandatory=t.mandatory||{},t.mandatory[r("",i)]=n.exact):["min","max"].forEach(e=>{void 0!==n[e]&&(t.mandatory=t.mandatory||{},t.mandatory[r(e,i)]=n[e])})}),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},r=function(e,r){if(t.version>=61)return r(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"==typeof e.audio){const t=function(e,t,i){t in e&&!(i in e)&&(e[i]=e[t],delete e[t])};t((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),t(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=n(e.audio)}if(e&&"object"==typeof e.video){let o=e.video.facingMode;o=o&&("object"==typeof o?o:{ideal:o});const s=t.version<66;if(o&&("user"===o.exact||"environment"===o.exact||"user"===o.ideal||"environment"===o.ideal)&&(!i.mediaDevices.getSupportedConstraints||!i.mediaDevices.getSupportedConstraints().facingMode||s)){let t;if(delete e.video.facingMode,"environment"===o.exact||"environment"===o.ideal?t=["back","rear"]:"user"!==o.exact&&"user"!==o.ideal||(t=["front"]),t)return i.mediaDevices.enumerateDevices().then(i=>{let s=(i=i.filter(e=>"videoinput"===e.kind)).find(e=>t.some(t=>e.label.toLowerCase().includes(t)));return!s&&i.length&&t.includes("back")&&(s=i[i.length-1]),s&&(e.video.deviceId=o.exact?{exact:s.deviceId}:{ideal:s.deviceId}),e.video=n(e.video),Tl("chrome: "+JSON.stringify(e)),r(e)})}e.video=n(e.video)}return Tl("chrome: "+JSON.stringify(e)),r(e)},o=function(e){return t.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(i.getUserMedia=function(e,t,n){r(e,e=>{i.webkitGetUserMedia(e,t,e=>{n&&n(o(e))})})}.bind(i),i.mediaDevices.getUserMedia){const e=i.mediaDevices.getUserMedia.bind(i.mediaDevices);i.mediaDevices.getUserMedia=function(t){return r(t,t=>e(t).then(e=>{if(t.audio&&!e.getAudioTracks().length||t.video&&!e.getVideoTracks().length)throw e.getTracks().forEach(e=>{e.stop()}),new DOMException("","NotFoundError");return e},e=>Sl.reject(o(e))))}}}function Rl(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function Il(e){if("object"==typeof e&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=t=>{t.stream.addEventListener("addtrack",i=>{let n;n=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(e=>e.track&&e.track.id===i.track.id):{track:i.track};const r=new Event("track");r.track=i.track,r.receiver=n,r.transceiver={receiver:n},r.streams=[t.stream],this.dispatchEvent(r)}),t.stream.getTracks().forEach(i=>{let n;n=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(e=>e.track&&e.track.id===i.id):{track:i};const r=new Event("track");r.track=i,r.receiver=n,r.transceiver={receiver:n},r.streams=[t.stream],this.dispatchEvent(r)})},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else en(e,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function vl(e){if("object"==typeof e&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const i=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){let r=i.apply(this,arguments);return r||(r=t(this,e),this._senders.push(r)),r};const n=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){n.apply(this,arguments);const t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}const i=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._senders=this._senders||[],i.apply(this,[e]),e.getTracks().forEach(e=>{this._senders.push(t(this,e))})};const n=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._senders=this._senders||[],n.apply(this,[e]),e.getTracks().forEach(e=>{const t=this._senders.find(t=>t.track===e);t&&this._senders.splice(this._senders.indexOf(t),1)})}}else if("object"==typeof e&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function Cl(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,i,n]=arguments;if(arguments.length>0&&"function"==typeof e)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!=typeof e))return t.apply(this,[]);const r=function(e){const t={};return e.result().forEach(e=>{const i={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach(t=>{i[t]=e.stat(t)}),t[i.id]=i}),t},o=function(e){return new Map(Object.keys(e).map(t=>[t,e[t]]))};if(arguments.length>=2){const n=function(e){i(o(r(e)))};return t.apply(this,[n,e])}return new Sl((e,i)=>{t.apply(this,[function(t){e(o(r(t)))},i])}).then(i,n)}}function yl(e){if(!("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e});const i=e.RTCPeerConnection.prototype.addTrack;i&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=i.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){const e=this;return this._pc.getStats().then(t=>dn(t,e.track,!0))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e}),en(e,"track",e=>(e.receiver._pc=e.srcElement,e)),e.RTCRtpReceiver.prototype.getStats=function(){const e=this;return this._pc.getStats().then(t=>dn(t,e.track,!1))}}if(!("getStats"in e.RTCRtpSender.prototype)||!("getStats"in e.RTCRtpReceiver.prototype))return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const e=arguments[0];let t,i,n;return this.getSenders().forEach(i=>{i.track===e&&(t?n=!0:t=i)}),this.getReceivers().forEach(t=>(t.track===e&&(i?n=!0:i=t),t.track===e)),n||t&&i?Sl.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):t?t.getStats():i?i.getStats():Sl.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function Al(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(e=>this._shimmedLocalStreams[e][0])};const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,i){if(!i)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const n=t.apply(this,arguments);return this._shimmedLocalStreams[i.id]?-1===this._shimmedLocalStreams[i.id].indexOf(n)&&this._shimmedLocalStreams[i.id].push(n):this._shimmedLocalStreams[i.id]=[i,n],n};const i=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach(e=>{if(this.getSenders().find(t=>t.track===e))throw new DOMException("Track already exists.","InvalidAccessError")});const t=this.getSenders();i.apply(this,arguments);const n=this.getSenders().filter(e=>-1===t.indexOf(e));this._shimmedLocalStreams[e.id]=[e].concat(n)};const n=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],n.apply(this,arguments)};const r=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach(t=>{const i=this._shimmedLocalStreams[t].indexOf(e);-1!==i&&this._shimmedLocalStreams[t].splice(i,1),1===this._shimmedLocalStreams[t].length&&delete this._shimmedLocalStreams[t]}),r.apply(this,arguments)}}function Ol(e,t){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return Al(e);const i=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const e=i.apply(this);return this._reverseStreams=this._reverseStreams||{},e.map(e=>this._reverseStreams[e.id])};const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach(e=>{if(this.getSenders().find(t=>t.track===e))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[t.id]){const i=new e.MediaStream(t.getTracks());this._streams[t.id]=i,this._reverseStreams[i.id]=t,t=i}n.apply(this,[t])};const r=e.RTCPeerConnection.prototype.removeStream;function o(e,t){let i=t.sdp;return Object.keys(e._reverseStreams||[]).forEach(t=>{const n=e._reverseStreams[t],r=e._streams[n.id];i=i.replace(new RegExp(r.id,"g"),n.id)}),new RTCSessionDescription({type:t.type,sdp:i})}function s(e,t){let i=t.sdp;return Object.keys(e._reverseStreams||[]).forEach(t=>{const n=e._reverseStreams[t],r=e._streams[n.id];i=i.replace(new RegExp(n.id,"g"),r.id)}),new RTCSessionDescription({type:t.type,sdp:i})}e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},r.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,i){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const n=[].slice.call(arguments,1);if(1!==n.length||!n[0].getTracks().find(e=>e===t))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");const r=this.getSenders().find(e=>e.track===t);if(r)throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const o=this._streams[i.id];if(o)o.addTrack(t),Sl.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const n=new e.MediaStream([t]);this._streams[i.id]=n,this._reverseStreams[n.id]=i,this.addStream(n)}return this.getSenders().find(e=>e.track===t)},["createOffer","createAnswer"].forEach((function(t){const i=e.RTCPeerConnection.prototype[t],n={[t](){const e=arguments;return arguments.length&&"function"==typeof arguments[0]?i.apply(this,[t=>{const i=o(this,t);e[0].apply(null,[i])},t=>{e[1]&&e[1].apply(null,t)},arguments[2]]):i.apply(this,arguments).then(e=>o(this,e))}};e.RTCPeerConnection.prototype[t]=n[t]}));const a=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=s(this,arguments[0]),a.apply(this,arguments)):a.apply(this,arguments)};const c=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const e=c.get.apply(this);return""===e.type?e:o(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(e._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let t;this._streams=this._streams||{},Object.keys(this._streams).forEach(i=>{this._streams[i].getTracks().find(t=>e.track===t)&&(t=this._streams[i])}),t&&(1===t.getTracks().length?this.removeStream(this._reverseStreams[t.id]):t.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}function bl(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){const i=e.RTCPeerConnection.prototype[t],n={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),i.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=n[t]}))}function wl(e,t){en(e,"negotiationneeded",e=>{const i=e.target;if(!(t.version<72||i.getConfiguration&&"plan-b"===i.getConfiguration().sdpSemantics)||"stable"===i.signalingState)return e})}var Nl=Object.freeze({__proto__:null,shimMediaStream:Rl,shimOnTrack:Il,shimGetSendersWithDtmf:vl,shimGetStats:Cl,shimSenderReceiverGetStats:yl,shimAddTrackRemoveTrackWithNative:Al,shimAddTrackRemoveTrack:Ol,shimPeerConnection:bl,fixNegotiationNeeded:wl,shimGetUserMedia:gl,shimGetDisplayMedia:function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&("function"==typeof t?e.navigator.mediaDevices.getDisplayMedia=function(i){return t(i).then(t=>{const n=i.video&&i.video.width,r=i.video&&i.video.height,o=i.video&&i.video.frameRate;return i.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:o||3}},n&&(i.video.mandatory.maxWidth=n),r&&(i.video.mandatory.maxHeight=r),e.navigator.mediaDevices.getUserMedia(i)})}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}});function Dl(e,t){const i=e&&e.navigator,n=e&&e.MediaStreamTrack;if(i.getUserMedia=function(e,t,n){on("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),i.mediaDevices.getUserMedia(e).then(t,n)},!(t.version>55&&"autoGainControl"in i.mediaDevices.getSupportedConstraints())){const e=function(e,t,i){t in e&&!(i in e)&&(e[i]=e[t],delete e[t])},t=i.mediaDevices.getUserMedia.bind(i.mediaDevices);if(i.mediaDevices.getUserMedia=function(i){return"object"==typeof i&&"object"==typeof i.audio&&(i=JSON.parse(JSON.stringify(i)),e(i.audio,"autoGainControl","mozAutoGainControl"),e(i.audio,"noiseSuppression","mozNoiseSuppression")),t(i)},n&&n.prototype.getSettings){const t=n.prototype.getSettings;n.prototype.getSettings=function(){const i=t.apply(this,arguments);return e(i,"mozAutoGainControl","autoGainControl"),e(i,"mozNoiseSuppression","noiseSuppression"),i}}if(n&&n.prototype.applyConstraints){const t=n.prototype.applyConstraints;n.prototype.applyConstraints=function(i){return"audio"===this.kind&&"object"==typeof i&&(i=JSON.parse(JSON.stringify(i)),e(i,"autoGainControl","mozAutoGainControl"),e(i,"noiseSuppression","mozNoiseSuppression")),t.apply(this,[i])}}}}function Pl(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Ll(e,t){if("object"!=typeof e||!e.RTCPeerConnection&&!e.mozRTCPeerConnection)return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){const i=e.RTCPeerConnection.prototype[t],n={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),i.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=n[t]}));const i={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},n=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,r,o]=arguments;return n.apply(this,[e||null]).then(e=>{if(t.version<53&&!r)try{e.forEach(e=>{e.type=i[e.type]||e.type})}catch(t){if("TypeError"!==t.name)throw t;e.forEach((t,n)=>{e.set(n,Object.assign({},t,{type:i[t.type]||t.type}))})}return e}).then(r,o)}}function kl(e){if("object"!=typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e});const i=e.RTCPeerConnection.prototype.addTrack;i&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=i.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Sl.resolve(new Map)}}function Ml(e){if("object"!=typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e}),en(e,"track",e=>(e.receiver._pc=e.srcElement,e)),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function Ul(e){e.RTCPeerConnection&&!("removeStream"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(e){on("removeStream","removeTrack"),this.getSenders().forEach(t=>{t.track&&e.getTracks().includes(t.track)&&this.removeTrack(t)})})}function xl(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function Vl(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let e=arguments[1]&&arguments[1].sendEncodings;void 0===e&&(e=[]),e=[...e];const i=e.length>0;i&&e.forEach(e=>{if("rid"in e){if(!/^[a-z0-9]{0,16}$/i.test(e.rid))throw new TypeError("Invalid RID value provided.")}if("scaleResolutionDownBy"in e&&!(parseFloat(e.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(parseFloat(e.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const n=t.apply(this,arguments);if(i){const{sender:t}=n,i=t.getParameters();(!("encodings"in i)||1===i.encodings.length&&0===Object.keys(i.encodings[0]).length)&&(i.encodings=e,t.sendEncodings=e,this.setParametersPromises.push(t.setParameters(i).then(()=>{delete t.sendEncodings}).catch(()=>{delete t.sendEncodings})))}return n})}function Fl(e){if("object"!=typeof e||!e.RTCRtpSender)return;const t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){const e=t.apply(this,arguments);return"encodings"in e||(e.encodings=[].concat(this.sendEncodings||[{}])),e})}function jl(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Sl.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}function Bl(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Sl.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}var Gl=Object.freeze({__proto__:null,shimOnTrack:Pl,shimPeerConnection:Ll,shimSenderGetStats:kl,shimReceiverGetStats:Ml,shimRemoveStream:Ul,shimRTCDataChannel:xl,shimAddTransceiver:Vl,shimGetParameters:Fl,shimCreateOffer:jl,shimCreateAnswer:Bl,shimGetUserMedia:Dl,shimGetDisplayMedia:function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(i){if(!i||!i.video){const e=new DOMException("getDisplayMedia without video constraints is undefined");return e.name="NotFoundError",e.code=8,Sl.reject(e)}return!0===i.video?i.video={mediaSource:t}:i.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(i)})}});function Wl(e){if("object"==typeof e&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getAudioTracks().forEach(i=>t.call(this,i,e)),e.getVideoTracks().forEach(i=>t.call(this,i,e))},e.RTCPeerConnection.prototype.addTrack=function(e){for(var i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];return n&&n.forEach(e=>{this._localStreams?this._localStreams.includes(e)||this._localStreams.push(e):this._localStreams=[e]}),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){this._localStreams||(this._localStreams=[]);const t=this._localStreams.indexOf(e);if(-1===t)return;this._localStreams.splice(t,1);const i=e.getTracks();this.getSenders().forEach(e=>{i.includes(e.track)&&this.removeTrack(e)})})}}function Hl(e){if("object"==typeof e&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(e){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=e=>{e.streams.forEach(e=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(e))return;this._remoteStreams.push(e);const t=new Event("addstream");t.stream=e,this.dispatchEvent(t)})})}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach(t=>{if(e._remoteStreams||(e._remoteStreams=[]),e._remoteStreams.indexOf(t)>=0)return;e._remoteStreams.push(t);const i=new Event("addstream");i.stream=t,e.dispatchEvent(i)})}),t.apply(e,arguments)}}}function Kl(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype,i=t.createOffer,n=t.createAnswer,r=t.setLocalDescription,o=t.setRemoteDescription,s=t.addIceCandidate;t.createOffer=function(e,t){const n=arguments.length>=2?arguments[2]:arguments[0],r=i.apply(this,[n]);return t?(r.then(e,t),Sl.resolve()):r},t.createAnswer=function(e,t){const i=arguments.length>=2?arguments[2]:arguments[0],r=n.apply(this,[i]);return t?(r.then(e,t),Sl.resolve()):r};let a=function(e,t,i){const n=r.apply(this,[e]);return i?(n.then(t,i),Sl.resolve()):n};t.setLocalDescription=a,a=function(e,t,i){const n=o.apply(this,[e]);return i?(n.then(t,i),Sl.resolve()):n},t.setRemoteDescription=a,a=function(e,t,i){const n=s.apply(this,[e]);return i?(n.then(t,i),Sl.resolve()):n},t.addIceCandidate=a}function Yl(e){const t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const e=t.mediaDevices,i=e.getUserMedia.bind(e);t.mediaDevices.getUserMedia=e=>i(ql(e))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,i,n){t.mediaDevices.getUserMedia(e).then(i,n)}.bind(t))}function ql(e){return e&&void 0!==e.video?Object.assign({},e,{video:cn(e.video)}):e}function Jl(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,i){if(e&&e.iceServers){const t=[];for(let i=0;i<e.iceServers.length;i++){let n=e.iceServers[i];!n.hasOwnProperty("urls")&&n.hasOwnProperty("url")?(on("RTCIceServer.url","RTCIceServer.urls"),n=JSON.parse(JSON.stringify(n)),n.urls=n.url,delete n.url,t.push(n)):t.push(e.iceServers[i])}e.iceServers=t}return new t(e,i)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:()=>t.generateCertificate})}function Xl(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function zl(e){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);const t=this.getTransceivers().find(e=>"audio"===e.receiver.track.kind);!1===e.offerToReceiveAudio&&t?"sendrecv"===t.direction?t.setDirection?t.setDirection("sendonly"):t.direction="sendonly":"recvonly"===t.direction&&(t.setDirection?t.setDirection("inactive"):t.direction="inactive"):!0!==e.offerToReceiveAudio||t||this.addTransceiver("audio",{direction:"recvonly"}),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);const i=this.getTransceivers().find(e=>"video"===e.receiver.track.kind);!1===e.offerToReceiveVideo&&i?"sendrecv"===i.direction?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":"recvonly"===i.direction&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):!0!==e.offerToReceiveVideo||i||this.addTransceiver("video",{direction:"recvonly"})}return t.apply(this,arguments)}}function Ql(e){"object"!=typeof e||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}var Zl=Object.freeze({__proto__:null,shimLocalStreamsAPI:Wl,shimRemoteStreamsAPI:Hl,shimCallbacksAPI:Kl,shimGetUserMedia:Yl,shimConstraints:ql,shimRTCIceServerUrls:Jl,shimTrackEventTransceiver:Xl,shimCreateOfferLegacy:zl,shimAudioContext:Ql}),$l="\t\n\v\f\r                　\u2028\u2029\ufeff",eh=G,th=No,ih=d("".replace),nh="[\t\n\v\f\r                　\u2028\u2029\ufeff]",rh=RegExp("^"+nh+nh+"*"),oh=RegExp(nh+nh+"*$"),sh=function(e){return function(t){var i=th(eh(t));return 1&e&&(i=ih(i,rh,"")),2&e&&(i=ih(i,oh,"")),i}},ah={start:sh(1),end:sh(2),trim:sh(3)},ch=Ms.PROPER,dh=i,uh=$l,lh=ah.trim;Ii({target:"String",proto:!0,forced:function(e){return dh((function(){return!!uh[e]()||"​᠎"!=="​᠎"[e]()||ch&&uh[e].name!==e}))}("trim")},{trim:function(){return lh(this)}});var hh=Hi("String").trim,ph=u,_h=hh,Eh=String.prototype,mh=function(e){var t=e.trim;return"string"==typeof e||e===Eh||ph(Eh,e)&&t===Eh.trim?_h:t},fh={exports:{}};!function(e){const t={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};t.localCName=t.generateIdentifier(),t.splitLines=function(e){return mh(e).call(e).split("\n").map(e=>mh(e).call(e))},t.splitSections=function(e){return e.split("\nm=").map((e,t)=>{var i;return mh(i=t>0?"m="+e:e).call(i)+"\r\n"})},t.getDescription=function(e){const i=t.splitSections(e);return i&&i[0]},t.getMediaSections=function(e){const i=t.splitSections(e);return i.shift(),i},t.matchPrefix=function(e,i){return t.splitLines(e).filter(e=>0===e.indexOf(i))},t.parseCandidate=function(e){let t;t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" ");const i={foundation:t[0],component:{1:"rtp",2:"rtcp"}[t[1]]||t[1],protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]};for(let e=8;e<t.length;e+=2)switch(t[e]){case"raddr":i.relatedAddress=t[e+1];break;case"rport":i.relatedPort=parseInt(t[e+1],10);break;case"tcptype":i.tcpType=t[e+1];break;case"ufrag":i.ufrag=t[e+1],i.usernameFragment=t[e+1];break;default:void 0===i[t[e]]&&(i[t[e]]=t[e+1])}return i},t.writeCandidate=function(e){const t=[];t.push(e.foundation);const i=e.component;"rtp"===i?t.push(1):"rtcp"===i?t.push(2):t.push(i),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);const n=e.type;return t.push("typ"),t.push(n),"host"!==n&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},t.parseIceOptions=function(e){return e.substr(14).split(" ")},t.parseRtpMap=function(e){let t=e.substr(9).split(" ");const i={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),i.name=t[0],i.clockRate=parseInt(t[1],10),i.channels=3===t.length?parseInt(t[2],10):1,i.numChannels=i.channels,i},t.writeRtpMap=function(e){let t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);const i=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==i?"/"+i:"")+"\r\n"},t.parseExtmap=function(e){const t=e.substr(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1]}},t.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},t.parseFmtp=function(e){const t={};let i;const n=e.substr(e.indexOf(" ")+1).split(";");for(let e=0;e<n.length;e++){var r,o;i=mh(r=n[e]).call(r).split("="),t[mh(o=i[0]).call(o)]=i[1]}return t},t.writeFmtp=function(e){let t="",i=e.payloadType;if(void 0!==e.preferredPayloadType&&(i=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){const n=[];Object.keys(e.parameters).forEach(t=>{void 0!==e.parameters[t]?n.push(t+"="+e.parameters[t]):n.push(t)}),t+="a=fmtp:"+i+" "+n.join(";")+"\r\n"}return t},t.parseRtcpFb=function(e){const t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},t.writeRtcpFb=function(e){let t="",i=e.payloadType;return void 0!==e.preferredPayloadType&&(i=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach(e=>{t+="a=rtcp-fb:"+i+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"}),t},t.parseSsrcMedia=function(e){const t=e.indexOf(" "),i={ssrc:parseInt(e.substr(7,t-7),10)},n=e.indexOf(":",t);return n>-1?(i.attribute=e.substr(t+1,n-t-1),i.value=e.substr(n+1)):i.attribute=e.substr(t+1),i},t.parseSsrcGroup=function(e){const t=e.substr(13).split(" ");return{semantics:t.shift(),ssrcs:t.map(e=>parseInt(e,10))}},t.getMid=function(e){const i=t.matchPrefix(e,"a=mid:")[0];if(i)return i.substr(6)},t.parseFingerprint=function(e){const t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1].toUpperCase()}},t.getDtlsParameters=function(e,i){return{role:"auto",fingerprints:t.matchPrefix(e+i,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(e,t){let i="a=setup:"+t+"\r\n";return e.fingerprints.forEach(e=>{i+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"}),i},t.parseCryptoLine=function(e){const t=e.substr(9).split(" ");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},t.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"==typeof e.keyParams?t.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},t.parseCryptoKeyParams=function(e){if(0!==e.indexOf("inline:"))return null;const t=e.substr(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:void 0,mkiLength:t[2]?t[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(e){return e.keyMethod+":"+e.keySalt+(e.lifeTime?"|"+e.lifeTime:"")+(e.mkiValue&&e.mkiLength?"|"+e.mkiValue+":"+e.mkiLength:"")},t.getCryptoParameters=function(e,i){return t.matchPrefix(e+i,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(e,i){const n=t.matchPrefix(e+i,"a=ice-ufrag:")[0],r=t.matchPrefix(e+i,"a=ice-pwd:")[0];return n&&r?{usernameFragment:n.substr(12),password:r.substr(10)}:null},t.writeIceParameters=function(e){let t="a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n";return e.iceLite&&(t+="a=ice-lite\r\n"),t},t.parseRtpParameters=function(e){const i={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},n=t.splitLines(e)[0].split(" ");for(let r=3;r<n.length;r++){const o=n[r],s=t.matchPrefix(e,"a=rtpmap:"+o+" ")[0];if(s){const n=t.parseRtpMap(s),r=t.matchPrefix(e,"a=fmtp:"+o+" ");switch(n.parameters=r.length?t.parseFmtp(r[0]):{},n.rtcpFeedback=t.matchPrefix(e,"a=rtcp-fb:"+o+" ").map(t.parseRtcpFb),i.codecs.push(n),n.name.toUpperCase()){case"RED":case"ULPFEC":i.fecMechanisms.push(n.name.toUpperCase())}}}return t.matchPrefix(e,"a=extmap:").forEach(e=>{i.headerExtensions.push(t.parseExtmap(e))}),i},t.writeRtpDescription=function(e,i){let n="";n+="m="+e+" ",n+=i.codecs.length>0?"9":"0",n+=" UDP/TLS/RTP/SAVPF ",n+=i.codecs.map(e=>void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType).join(" ")+"\r\n",n+="c=IN IP4 0.0.0.0\r\n",n+="a=rtcp:9 IN IP4 0.0.0.0\r\n",i.codecs.forEach(e=>{n+=t.writeRtpMap(e),n+=t.writeFmtp(e),n+=t.writeRtcpFb(e)});let r=0;return i.codecs.forEach(e=>{e.maxptime>r&&(r=e.maxptime)}),r>0&&(n+="a=maxptime:"+r+"\r\n"),i.headerExtensions&&i.headerExtensions.forEach(e=>{n+=t.writeExtmap(e)}),n},t.parseRtpEncodingParameters=function(e){const i=[],n=t.parseRtpParameters(e),r=-1!==n.fecMechanisms.indexOf("RED"),o=-1!==n.fecMechanisms.indexOf("ULPFEC"),s=t.matchPrefix(e,"a=ssrc:").map(e=>t.parseSsrcMedia(e)).filter(e=>"cname"===e.attribute),a=s.length>0&&s[0].ssrc;let c;const d=t.matchPrefix(e,"a=ssrc-group:FID").map(e=>e.substr(17).split(" ").map(e=>parseInt(e,10)));d.length>0&&d[0].length>1&&d[0][0]===a&&(c=d[0][1]),n.codecs.forEach(e=>{if("RTX"===e.name.toUpperCase()&&e.parameters.apt){let t={ssrc:a,codecPayloadType:parseInt(e.parameters.apt,10)};a&&c&&(t.rtx={ssrc:c}),i.push(t),r&&(t=JSON.parse(JSON.stringify(t)),t.fec={ssrc:a,mechanism:o?"red+ulpfec":"red"},i.push(t))}}),0===i.length&&a&&i.push({ssrc:a});let u=t.matchPrefix(e,"b=");return u.length&&(u=0===u[0].indexOf("b=TIAS:")?parseInt(u[0].substr(7),10):0===u[0].indexOf("b=AS:")?1e3*parseInt(u[0].substr(5),10)*.95-16e3:void 0,i.forEach(e=>{e.maxBitrate=u})),i},t.parseRtcpParameters=function(e){const i={},n=t.matchPrefix(e,"a=ssrc:").map(e=>t.parseSsrcMedia(e)).filter(e=>"cname"===e.attribute)[0];n&&(i.cname=n.value,i.ssrc=n.ssrc);const r=t.matchPrefix(e,"a=rtcp-rsize");i.reducedSize=r.length>0,i.compound=0===r.length;const o=t.matchPrefix(e,"a=rtcp-mux");return i.mux=o.length>0,i},t.writeRtcpParameters=function(e){let t="";return e.reducedSize&&(t+="a=rtcp-rsize\r\n"),e.mux&&(t+="a=rtcp-mux\r\n"),void 0!==e.ssrc&&e.cname&&(t+="a=ssrc:"+e.ssrc+" cname:"+e.cname+"\r\n"),t},t.parseMsid=function(e){let i;const n=t.matchPrefix(e,"a=msid:");if(1===n.length)return i=n[0].substr(7).split(" "),{stream:i[0],track:i[1]};const r=t.matchPrefix(e,"a=ssrc:").map(e=>t.parseSsrcMedia(e)).filter(e=>"msid"===e.attribute);return r.length>0?(i=r[0].value.split(" "),{stream:i[0],track:i[1]}):void 0},t.parseSctpDescription=function(e){const i=t.parseMLine(e),n=t.matchPrefix(e,"a=max-message-size:");let r;n.length>0&&(r=parseInt(n[0].substr(19),10)),isNaN(r)&&(r=65536);const o=t.matchPrefix(e,"a=sctp-port:");if(o.length>0)return{port:parseInt(o[0].substr(12),10),protocol:i.fmt,maxMessageSize:r};const s=t.matchPrefix(e,"a=sctpmap:");if(s.length>0){const e=s[0].substr(10).split(" ");return{port:parseInt(e[0],10),protocol:e[1],maxMessageSize:r}}},t.writeSctpDescription=function(e,t){let i=[];return i="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&i.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),i.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,21)},t.writeSessionBoilerplate=function(e,i,n){let r;const o=void 0!==i?i:2;r=e||t.generateSessionId();return"v=0\r\no="+(n||"thisisadapterortc")+" "+r+" "+o+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},t.getDirection=function(e,i){const n=t.splitLines(e);for(let e=0;e<n.length;e++)switch(n[e]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return n[e].substr(2)}return i?t.getDirection(i):"sendrecv"},t.getKind=function(e){return t.splitLines(e)[0].split(" ")[0].substr(2)},t.isRejected=function(e){return"0"===e.split(" ",2)[1]},t.parseMLine=function(e){const i=t.splitLines(e)[0].substr(2).split(" ");return{kind:i[0],port:parseInt(i[1],10),protocol:i[2],fmt:i.slice(3).join(" ")}},t.parseOLine=function(e){const i=t.matchPrefix(e,"o=")[0].substr(2).split(" ");return{username:i[0],sessionId:i[1],sessionVersion:parseInt(i[2],10),netType:i[3],addressType:i[4],address:i[5]}},t.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;const i=t.splitLines(e);for(let e=0;e<i.length;e++)if(i[e].length<2||"="!==i[e].charAt(1))return!1;return!0},e.exports=t}(fh);var Sh=fh.exports,Th=Object.freeze(e({__proto__:null,default:Sh},[fh.exports]));function gh(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"==typeof e&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){const i=new t(e),n=Sh.parseCandidate(e.candidate),r=Object.assign(i,n);return r.toJSON=function(){return{candidate:r.candidate,sdpMid:r.sdpMid,sdpMLineIndex:r.sdpMLineIndex,usernameFragment:r.usernameFragment}},r}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,en(e,"icecandidate",t=>(t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t))}function Rh(e){!e.RTCIceCandidate||e.RTCIceCandidate&&"relayProtocol"in e.RTCIceCandidate.prototype||en(e,"icecandidate",e=>{if(e.candidate){const t=Sh.parseCandidate(e.candidate.candidate);"relay"===t.type&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[t.priority>>24])}return e})}function Ih(e,t){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return void 0===this._sctp?null:this._sctp}});const i=function(e){if(!e||!e.sdp)return!1;const t=Sh.splitSections(e.sdp);return t.shift(),t.some(e=>{const t=Sh.parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")})},n=function(e){const t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;const i=parseInt(t[1],10);return i!=i?-1:i},r=function(e){let i=65536;return"firefox"===t.browser&&(i=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),i},o=function(e,i){let n=65536;"firefox"===t.browser&&57===t.version&&(n=65535);const r=Sh.matchPrefix(e.sdp,"a=max-message-size:");return r.length>0?n=parseInt(r[0].substr(19),10):"firefox"===t.browser&&-1!==i&&(n=2147483637),n},s=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===t.browser&&t.version>=76){const{sdpSemantics:e}=this.getConfiguration();"plan-b"===e&&Object.defineProperty(this,"sctp",{get(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(i(arguments[0])){const e=n(arguments[0]),t=r(e),i=o(arguments[0],e);let s;s=0===t&&0===i?Number.POSITIVE_INFINITY:0===t||0===i?Math.max(t,i):Math.min(t,i);const a={};Object.defineProperty(a,"maxMessageSize",{get:()=>s}),this._sctp=a}return s.apply(this,arguments)}}function vh(e){if(!e.RTCPeerConnection||!("createDataChannel"in e.RTCPeerConnection.prototype))return;function t(e,t){const i=e.send;e.send=function(){const n=arguments[0],r=n.length||n.size||n.byteLength;if("open"===e.readyState&&t.sctp&&r>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return i.apply(e,arguments)}}const i=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const e=i.apply(this,arguments);return t(e,this),e},en(e,"datachannel",e=>(t(e.channel,e.target),e))}function Ch(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(e=>{const i=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=e=>{const t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;const i=new Event("connectionstatechange",e);t.dispatchEvent(i)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),i.apply(this,arguments)}})}function yh(e,t){if(!e.RTCPeerConnection)return;if("chrome"===t.browser&&t.version>=71)return;if("safari"===t.browser&&t.version>=605)return;const i=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(t){if(t&&t.sdp&&-1!==t.sdp.indexOf("\na=extmap-allow-mixed")){const i=t.sdp.split("\n").filter(e=>"a=extmap-allow-mixed"!==mh(e).call(e)).join("\n");e.RTCSessionDescription&&t instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:t.type,sdp:i}):t.sdp=i}return i.apply(this,arguments)}}function Ah(e,t){if(!e.RTCPeerConnection||!e.RTCPeerConnection.prototype)return;const i=e.RTCPeerConnection.prototype.addIceCandidate;i&&0!==i.length&&(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===t.browser&&t.version<78||"firefox"===t.browser&&t.version<68||"safari"===t.browser)&&arguments[0]&&""===arguments[0].candidate?Sl.resolve():i.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Sl.resolve())})}function Oh(e,t){if(!e.RTCPeerConnection||!e.RTCPeerConnection.prototype)return;const i=e.RTCPeerConnection.prototype.setLocalDescription;i&&0!==i.length&&(e.RTCPeerConnection.prototype.setLocalDescription=function(){let e=arguments[0]||{};if("object"!=typeof e||e.type&&e.sdp)return i.apply(this,arguments);if(e={type:e.type,sdp:e.sdp},!e.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":e.type="offer";break;default:e.type="answer"}if(e.sdp||"offer"!==e.type&&"answer"!==e.type)return i.apply(this,[e]);const t="offer"===e.type?this.createOffer:this.createAnswer;return t.apply(this).then(e=>i.apply(this,[e]))})}var bh=Object.freeze({__proto__:null,shimRTCIceCandidate:gh,shimRTCIceCandidateRelayProtocol:Rh,shimMaxMessageSize:Ih,shimSendThrowTypeError:vh,shimConnectionState:Ch,removeExtmapAllowMixed:yh,shimAddIceCandidateNullOrEmpty:Ah,shimParameterlessSetLocalDescription:Oh});let wh,Nh;!function(){let{window:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimSafari:!0};const i=rn,n=sn(e),r={browserDetails:n,commonShim:bh,extractVersion:$i,disableLog:tn,disableWarnings:nn,sdp:Th};switch(n.browser){case"chrome":if(!Nl||!bl||!t.shimChrome)return i("Chrome shim is not included in this adapter release."),r;if(null===n.version)return i("Chrome shim can not determine version, not shimming."),r;i("adapter.js shimming chrome."),r.browserShim=Nl,Ah(e,n),Oh(e),gl(e,n),Rl(e),bl(e,n),Il(e),Ol(e,n),vl(e),Cl(e),yl(e),wl(e,n),gh(e),Rh(e),Ch(e),Ih(e,n),vh(e),yh(e,n);break;case"firefox":if(!Gl||!Ll||!t.shimFirefox)return i("Firefox shim is not included in this adapter release."),r;i("adapter.js shimming firefox."),r.browserShim=Gl,Ah(e,n),Oh(e),Dl(e,n),Ll(e,n),Pl(e),Ul(e),kl(e),Ml(e),xl(e),Vl(e),Fl(e),jl(e),Bl(e),gh(e),Ch(e),Ih(e,n),vh(e);break;case"safari":if(!Zl||!t.shimSafari)return i("Safari shim is not included in this adapter release."),r;i("adapter.js shimming safari."),r.browserShim=Zl,Ah(e,n),Oh(e),Jl(e),zl(e),Kl(e),Wl(e),Hl(e),Xl(e),Yl(e),Ql(e),gh(e),Rh(e),Ih(e,n),vh(e),yh(e,n);break;default:i("Unsupported browser!")}}({window:"undefined"==typeof window?void 0:window}),function(e){e.WIN_10="Windows 10",e.WIN_81="Windows 8.1",e.WIN_8="Windows 8",e.WIN_7="Windows 7",e.WIN_VISTA="Windows Vista",e.WIN_SERVER_2003="Windows Server 2003",e.WIN_XP="Windows XP",e.WIN_2000="Windows 2000",e.ANDROID="Android",e.OPEN_BSD="Open BSD",e.SUN_OS="Sun OS",e.LINUX="Linux",e.IOS="iOS",e.MAC_OS="Mac OS",e.QNX="QNX",e.UNIX="UNIX",e.BEOS="BeOS",e.OS_2="OS/2",e.SEARCH_BOT="Search Bot"}(wh||(wh={})),function(e){e.CHROME="Chrome",e.SAFARI="Safari",e.EDGE="Edge",e.FIREFOX="Firefox",e.OPERA="OPR",e.QQ="QQBrowser",e.WECHAT="MicroMessenger"}(Nh||(Nh={}));var Dh={exports:{}};!function(e,i){!function(t,n){var r="function",o="undefined",s="object",a="string",c="major",d="model",u="name",l="type",h="vendor",p="version",_="architecture",E="console",m="mobile",f="tablet",S="smarttv",T="wearable",g="embedded",R="Amazon",I="Apple",v="ASUS",C="BlackBerry",y="Firefox",A="Google",O="Huawei",b="LG",w="Microsoft",N="Motorola",D="Opera",P="Samsung",L="Sharp",k="Sony",M="Xiaomi",U="Zebra",x="Facebook",V="Chromium OS",F="Mac OS",j=function(e){for(var t={},i=0;i<e.length;i++)t[e[i].toUpperCase()]=e[i];return t},B=function(e,t){return typeof e===a&&-1!==G(t).indexOf(G(e))},G=function(e){return e.toLowerCase()},W=function(e,t){if(typeof e===a)return e=e.replace(/^\s\s*/,""),typeof t===o?e:e.substring(0,350)},H=function(e,t){for(var i,o,a,c,d,u,l=0;l<t.length&&!d;){var h=t[l],p=t[l+1];for(i=o=0;i<h.length&&!d&&h[i];)if(d=h[i++].exec(e))for(a=0;a<p.length;a++)u=d[++o],typeof(c=p[a])===s&&c.length>0?2===c.length?typeof c[1]==r?this[c[0]]=c[1].call(this,u):this[c[0]]=c[1]:3===c.length?typeof c[1]!==r||c[1].exec&&c[1].test?this[c[0]]=u?u.replace(c[1],c[2]):n:this[c[0]]=u?c[1].call(this,u,c[2]):n:4===c.length&&(this[c[0]]=u?c[3].call(this,u.replace(c[1],c[2])):n):this[c]=u||n;l+=2}},K=function(e,t){for(var i in t)if(typeof t[i]===s&&t[i].length>0){for(var r=0;r<t[i].length;r++)if(B(t[i][r],e))return"?"===i?n:i}else if(B(t[i],e))return"?"===i?n:i;return e},Y={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},q={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[p,[u,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[p,[u,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[u,p],[/opios[\/ ]+([\w\.]+)/i],[p,[u,"Opera Mini"]],[/\bopr\/([\w\.]+)/i],[p,[u,D]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[u,p],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[p,[u,"UCBrowser"]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[p,[u,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[p,[u,"WeChat"]],[/konqueror\/([\w\.]+)/i],[p,[u,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[p,[u,"IE"]],[/yabrowser\/([\w\.]+)/i],[p,[u,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[u,/(.+)/,"$1 Secure Browser"],p],[/\bfocus\/([\w\.]+)/i],[p,[u,"Firefox Focus"]],[/\bopt\/([\w\.]+)/i],[p,[u,"Opera Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[p,[u,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[p,[u,"Dolphin"]],[/coast\/([\w\.]+)/i],[p,[u,"Opera Coast"]],[/miuibrowser\/([\w\.]+)/i],[p,[u,"MIUI Browser"]],[/fxios\/([-\w\.]+)/i],[p,[u,y]],[/\bqihu|(qi?ho?o?|360)browser/i],[[u,"360 Browser"]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[u,/(.+)/,"$1 Browser"],p],[/(comodo_dragon)\/([\w\.]+)/i],[[u,/_/g," "],p],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[u,p],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[u],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[u,x],p],[/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[u,p],[/\bgsa\/([\w\.]+) .*safari\//i],[p,[u,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[p,[u,"Chrome Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[u,"Chrome WebView"],p],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[p,[u,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[u,p],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[p,[u,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[p,u],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[u,[p,K,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[u,p],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[u,"Netscape"],p],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[p,[u,"Firefox Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[u,p],[/(cobalt)\/([\w\.]+)/i],[u,[p,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[_,"amd64"]],[/(ia32(?=;))/i],[[_,G]],[/((?:i[346]|x)86)[;\)]/i],[[_,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[_,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[_,"armhf"]],[/windows (ce|mobile); ppc;/i],[[_,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[_,/ower/,"",G]],[/(sun4\w)[;\)]/i],[[_,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[_,G]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[d,[h,P],[l,f]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[d,[h,P],[l,m]],[/\((ip(?:hone|od)[\w ]*);/i],[d,[h,I],[l,m]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[d,[h,I],[l,f]],[/(macintosh);/i],[d,[h,I]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[d,[h,L],[l,m]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[d,[h,O],[l,f]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[d,[h,O],[l,m]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[d,/_/g," "],[h,M],[l,m]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[d,/_/g," "],[h,M],[l,f]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[d,[h,"OPPO"],[l,m]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[d,[h,"Vivo"],[l,m]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[d,[h,"Realme"],[l,m]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[d,[h,N],[l,m]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[d,[h,N],[l,f]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[d,[h,b],[l,f]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[d,[h,b],[l,m]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[d,[h,"Lenovo"],[l,f]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[d,/_/g," "],[h,"Nokia"],[l,m]],[/(pixel c)\b/i],[d,[h,A],[l,f]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[d,[h,A],[l,m]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[d,[h,k],[l,m]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[d,"Xperia Tablet"],[h,k],[l,f]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[d,[h,"OnePlus"],[l,m]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[d,[h,R],[l,f]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[d,/(.+)/g,"Fire Phone $1"],[h,R],[l,m]],[/(playbook);[-\w\),; ]+(rim)/i],[d,h,[l,f]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[d,[h,C],[l,m]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[d,[h,v],[l,f]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[d,[h,v],[l,m]],[/(nexus 9)/i],[d,[h,"HTC"],[l,f]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[h,[d,/_/g," "],[l,m]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[d,[h,"Acer"],[l,f]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[d,[h,"Meizu"],[l,m]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[h,d,[l,m]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[h,d,[l,f]],[/(surface duo)/i],[d,[h,w],[l,f]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[d,[h,"Fairphone"],[l,m]],[/(u304aa)/i],[d,[h,"AT&T"],[l,m]],[/\bsie-(\w*)/i],[d,[h,"Siemens"],[l,m]],[/\b(rct\w+) b/i],[d,[h,"RCA"],[l,f]],[/\b(venue[\d ]{2,7}) b/i],[d,[h,"Dell"],[l,f]],[/\b(q(?:mv|ta)\w+) b/i],[d,[h,"Verizon"],[l,f]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[d,[h,"Barnes & Noble"],[l,f]],[/\b(tm\d{3}\w+) b/i],[d,[h,"NuVision"],[l,f]],[/\b(k88) b/i],[d,[h,"ZTE"],[l,f]],[/\b(nx\d{3}j) b/i],[d,[h,"ZTE"],[l,m]],[/\b(gen\d{3}) b.+49h/i],[d,[h,"Swiss"],[l,m]],[/\b(zur\d{3}) b/i],[d,[h,"Swiss"],[l,f]],[/\b((zeki)?tb.*\b) b/i],[d,[h,"Zeki"],[l,f]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[h,"Dragon Touch"],d,[l,f]],[/\b(ns-?\w{0,9}) b/i],[d,[h,"Insignia"],[l,f]],[/\b((nxa|next)-?\w{0,9}) b/i],[d,[h,"NextBook"],[l,f]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[h,"Voice"],d,[l,m]],[/\b(lvtel\-)?(v1[12]) b/i],[[h,"LvTel"],d,[l,m]],[/\b(ph-1) /i],[d,[h,"Essential"],[l,m]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[d,[h,"Envizen"],[l,f]],[/\b(trio[-\w\. ]+) b/i],[d,[h,"MachSpeed"],[l,f]],[/\btu_(1491) b/i],[d,[h,"Rotor"],[l,f]],[/(shield[\w ]+) b/i],[d,[h,"Nvidia"],[l,f]],[/(sprint) (\w+)/i],[h,d,[l,m]],[/(kin\.[onetw]{3})/i],[[d,/\./g," "],[h,w],[l,m]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[d,[h,U],[l,f]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[d,[h,U],[l,m]],[/smart-tv.+(samsung)/i],[h,[l,S]],[/hbbtv.+maple;(\d+)/i],[[d,/^/,"SmartTV"],[h,P],[l,S]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[h,b],[l,S]],[/(apple) ?tv/i],[h,[d,"Apple TV"],[l,S]],[/crkey/i],[[d,"Chromecast"],[h,A],[l,S]],[/droid.+aft(\w)( bui|\))/i],[d,[h,R],[l,S]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[d,[h,L],[l,S]],[/(bravia[\w ]+)( bui|\))/i],[d,[h,k],[l,S]],[/(mitv-\w{5}) bui/i],[d,[h,M],[l,S]],[/Hbbtv.*(technisat) (.*);/i],[h,d,[l,S]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[h,W],[d,W],[l,S]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[l,S]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[h,d,[l,E]],[/droid.+; (shield) bui/i],[d,[h,"Nvidia"],[l,E]],[/(playstation [345portablevi]+)/i],[d,[h,k],[l,E]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[d,[h,w],[l,E]],[/((pebble))app/i],[h,d,[l,T]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[d,[h,I],[l,T]],[/droid.+; (glass) \d/i],[d,[h,A],[l,T]],[/droid.+; (wt63?0{2,3})\)/i],[d,[h,U],[l,T]],[/(quest( 2| pro)?)/i],[d,[h,x],[l,T]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[h,[l,g]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[d,[l,m]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[d,[l,f]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[l,f]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[l,m]],[/(android[-\w\. ]{0,9});.+buil/i],[d,[h,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[p,[u,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[p,[u,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[u,p],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[p,u]],os:[[/microsoft (windows) (vista|xp)/i],[u,p],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[u,[p,K,Y]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[u,"Windows"],[p,K,Y]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[p,/_/g,"."],[u,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[u,F],[p,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[p,u],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[u,p],[/\(bb(10);/i],[p,[u,C]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[p,[u,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[p,[u,"Firefox OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[p,[u,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[p,[u,"watchOS"]],[/crkey\/([\d\.]+)/i],[p,[u,"Chromecast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[u,V],p],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[u,p],[/(sunos) ?([\w\.\d]*)/i],[[u,"Solaris"],p],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[u,p]]},J=function(e,i){if(typeof e===s&&(i=e,e=n),!(this instanceof J))return new J(e,i).getResult();var c=typeof t!==o&&t.navigator?t.navigator:n,d=e||(c&&c.userAgent?c.userAgent:""),u=c&&c.userAgentData?c.userAgentData:n,l=i?function(e,t){var i={};for(var n in e)t[n]&&t[n].length%2==0?i[n]=t[n].concat(e[n]):i[n]=e[n];return i}(q,i):q;return this.getBrowser=function(){var e={};return e.name=n,e.version=n,H.call(e,d,l.browser),e.major=function(e){return typeof e===a?e.replace(/[^\d\.]/g,"").split(".")[0]:n}(e.version),c&&c.brave&&typeof c.brave.isBrave==r&&(e.name="Brave"),e},this.getCPU=function(){var e={};return e.architecture=n,H.call(e,d,l.cpu),e},this.getDevice=function(){var e={};return e.vendor=n,e.model=n,e.type=n,H.call(e,d,l.device),!e.type&&u&&u.mobile&&(e.type=m),"Macintosh"==e.model&&c&&typeof c.standalone!==o&&c.maxTouchPoints&&c.maxTouchPoints>2&&(e.model="iPad",e.type=f),e},this.getEngine=function(){var e={};return e.name=n,e.version=n,H.call(e,d,l.engine),e},this.getOS=function(){var e={};return e.name=n,e.version=n,H.call(e,d,l.os),!e.name&&u&&"Unknown"!=u.platform&&(e.name=u.platform.replace(/chrome os/i,V).replace(/macos/i,F)),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return d},this.setUA=function(e){return d=typeof e===a&&e.length>350?W(e,350):e,this},this.setUA(d),this};J.VERSION="0.7.34",J.BROWSER=j([u,p,c]),J.CPU=j([_]),J.DEVICE=j([d,h,l,E,m,S,f,T,g]),J.ENGINE=J.OS=j([u,p]),e.exports&&(i=e.exports=J),i.UAParser=J;var X=typeof t!==o&&(t.jQuery||t.Zepto);if(X&&!X.ua){var z=new J;X.ua=z.getResult(),X.ua.get=function(){return z.getUA()},X.ua.set=function(e){z.setUA(e);var t=z.getResult();for(var i in t)X.ua[i]=t[i]}}}("object"==typeof window?window:t)}(Dh,Dh.exports);const Ph=new(0,Dh.exports);let Lh,kh=Ph.getResult();function Mh(e){return e&&Ph.setUA(e),kh=Ph.getResult(),{name:Uh(kh),version:xh(kh),os:Vh(kh),osVersion:kh.os.version}}function Uh(e){if("Blink"===e.engine.name&&"WeChat"!==e.browser.name)return Nh.CHROME;switch(e.browser.name){case"Chrome Headless":case"Chrome":case"Chromium":return Nh.CHROME;case"Safari":case"Mobile Safari":return Nh.SAFARI;case"Edge":return Nh.EDGE;case"Firefox":return Nh.FIREFOX;case"QQBrowser":return Nh.QQ;case"Opera":return Nh.OPERA;case"WeChat":return Nh.WECHAT;default:return e.browser.name||""}}function xh(e){let t;return t="Blink"===e.engine.name?e.engine.version||"":e.browser.version||"",t.split(".")[0]}function Vh(e){switch(e.os.name){case"Windows":return e.os.version?e.os.name+" "+e.os.version:e.os.name;default:return e.os.name||""}}function Fh(){const e=Mh();return!!("WebKit"===kh.engine.name&&e.os===wh.MAC_OS&&navigator.maxTouchPoints&&navigator.maxTouchPoints>0&&e.name!==Nh.SAFARI||Kh()&&e.name!==Nh.SAFARI)}function jh(){const e=Mh();if(Fh()){if(e.os===wh.MAC_OS)return!0;if(e.os===wh.IOS){const e=kh.os.version&&kh.os.version.split(".");if(e&&14===Number(e[0])&&e[1]&&Number(e[1])>=3)return!0;if(e&&Number(e[0])>14)return!0}}return!1}function Bh(){return"WebKit"===kh.engine.name}function Gh(){return Mh().name===Nh.CHROME}function Wh(){return Mh().name===Nh.SAFARI}function Hh(){return Mh().name===Nh.FIREFOX}function Kh(){return Mh().os===wh.IOS}function Yh(){const e=Mh();return!(e.name!==Nh.CHROME||!e.osVersion)&&Number(e.version)<=90}function qh(){const e=Mh();if(e.os!==wh.IOS||!e.osVersion)return!1;const t=e.osVersion.split(".");return Number(t[0])<14||14===Number(t[0])&&Number(t[1])<=6}function Jh(){const e=Mh();if(e.os!==wh.IOS||!e.osVersion)return!1;const t=e.osVersion.split(".");return 15===Number(t[0])}function Xh(){const e=Mh();if(e.os!==wh.IOS||!e.osVersion)return!1;const t=e.osVersion.split(".");return 15===Number(t[0])&&0===Number(t[1])}function zh(){const e=Mh();if(e.os!==wh.IOS||!e.osVersion)return!1;const t=e.osVersion.split(".");return 15===Number(t[0])&&Number(t[1])>=1}function Qh(){const e=Mh();if(e.os!==wh.IOS||!e.osVersion)return!1;const t=e.osVersion.split(".");return 15===Number(t[0])&&Number(t[1])>=2}function Zh(){return Wh()&&navigator.maxTouchPoints>0}function $h(){return Mh().name===Nh.WECHAT}function ep(){return window.navigator.appVersion&&null!==window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)&&window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)[1]<=35}function tp(){const e=Mh();if(e.name===Nh.EDGE||e.name===Nh.SAFARI)return!1;return!!navigator.userAgent.toLocaleLowerCase().match(/chrome\/[\d]./i)}function ip(){return Mh().os===wh.ANDROID}function np(){const e=Mh();return"Android"===e.os&&("Chrome"===e.name||e.name===Nh.WECHAT||/chrome|chromium/i.test(navigator.userAgent))}!function(e){e.CERTIFICATE="certificate",e.CODEC="codec",e.CANDIDATE_PAIR="candidate-pair",e.LOCAL_CANDIDATE="local-candidate",e.REMOTE_CANDIDATE="remote-candidate",e.INBOUND="inbound-rtp",e.TRACK="track",e.OUTBOUND="outbound-rtp",e.PC="peer-connection",e.REMOTE_INBOUND="remote-inbound-rtp",e.REMOTE_OUTBOUND="remote-outbound-rtp",e.TRANSPORT="transport",e.CSRC="csrc",e.DATA_CHANNEL="data-channel",e.STREAM="stream",e.SENDER="sender",e.RECEIVER="receiver"}(Lh||(Lh={}));var rp={exports:{}},op=Ii,sp=g,ap=Ht.f;op({target:"Object",stat:!0,forced:Object.defineProperty!==ap,sham:!sp},{defineProperty:ap});var cp=J.Object,dp=rp.exports=function(e,t,i){return cp.defineProperty(e,t,i)};cp.defineProperty.sham&&(dp.sham=!0);var up=rp.exports;function lp(e,t,i){return t in e?up(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var hp,pp={exports:{}},_p=function(e,t){return function(){for(var i=new Array(arguments.length),n=0;n<i.length;n++)i[n]=arguments[n];return e.apply(t,i)}},Ep=_p,mp=Object.prototype.toString,fp=(hp=Object.create(null),function(e){var t=mp.call(e);return hp[t]||(hp[t]=t.slice(8,-1).toLowerCase())});function Sp(e){return e=e.toLowerCase(),function(t){return fp(t)===e}}function Tp(e){return Array.isArray(e)}function gp(e){return void 0===e}var Rp=Sp("ArrayBuffer");function Ip(e){return null!==e&&"object"==typeof e}function vp(e){if("object"!==fp(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}var Cp=Sp("Date"),yp=Sp("File"),Ap=Sp("Blob"),Op=Sp("FileList");function bp(e){return"[object Function]"===mp.call(e)}var wp=Sp("URLSearchParams");function Np(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),Tp(e))for(var i=0,n=e.length;i<n;i++)t.call(null,e[i],i,e);else for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.call(null,e[r],r,e)}var Dp,Pp=(Dp="undefined"!=typeof Uint8Array&&Object.getPrototypeOf(Uint8Array),function(e){return Dp&&e instanceof Dp}),Lp={isArray:Tp,isArrayBuffer:Rp,isBuffer:function(e){return null!==e&&!gp(e)&&null!==e.constructor&&!gp(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){var t="[object FormData]";return e&&("function"==typeof FormData&&e instanceof FormData||mp.call(e)===t||bp(e.toString)&&e.toString()===t)},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&Rp(e.buffer)},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:Ip,isPlainObject:vp,isUndefined:gp,isDate:Cp,isFile:yp,isBlob:Ap,isFunction:bp,isStream:function(e){return Ip(e)&&bp(e.pipe)},isURLSearchParams:wp,isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:Np,merge:function e(){var t={};function i(i,n){vp(t[n])&&vp(i)?t[n]=e(t[n],i):vp(i)?t[n]=e({},i):Tp(i)?t[n]=i.slice():t[n]=i}for(var n=0,r=arguments.length;n<r;n++)Np(arguments[n],i);return t},extend:function(e,t,i){return Np(t,(function(t,n){e[n]=i&&"function"==typeof t?Ep(t,i):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e},inherits:function(e,t,i,n){e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,i&&Object.assign(e.prototype,i)},toFlatObject:function(e,t,i){var n,r,o,s={};t=t||{};do{for(r=(n=Object.getOwnPropertyNames(e)).length;r-- >0;)s[o=n[r]]||(t[o]=e[o],s[o]=!0);e=Object.getPrototypeOf(e)}while(e&&(!i||i(e,t))&&e!==Object.prototype);return t},kindOf:fp,kindOfTest:Sp,endsWith:function(e,t,i){e=String(e),(void 0===i||i>e.length)&&(i=e.length),i-=t.length;var n=e.indexOf(t,i);return-1!==n&&n===i},toArray:function(e){if(!e)return null;var t=e.length;if(gp(t))return null;for(var i=new Array(t);t-- >0;)i[t]=e[t];return i},isTypedArray:Pp,isFileList:Op},kp=Lp;function Mp(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var Up=function(e,t,i){if(!t)return e;var n;if(i)n=i(t);else if(kp.isURLSearchParams(t))n=t.toString();else{var r=[];kp.forEach(t,(function(e,t){null!=e&&(kp.isArray(e)?t+="[]":e=[e],kp.forEach(e,(function(e){kp.isDate(e)?e=e.toISOString():kp.isObject(e)&&(e=JSON.stringify(e)),r.push(Mp(t)+"="+Mp(e))})))})),n=r.join("&")}if(n){var o=e.indexOf("#");-1!==o&&(e=e.slice(0,o)),e+=(-1===e.indexOf("?")?"?":"&")+n}return e},xp=Lp;function Vp(){this.handlers=[]}Vp.prototype.use=function(e,t,i){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!i&&i.synchronous,runWhen:i?i.runWhen:null}),this.handlers.length-1},Vp.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},Vp.prototype.forEach=function(e){xp.forEach(this.handlers,(function(t){null!==t&&e(t)}))};var Fp=Vp,jp=Lp,Bp=Lp;function Gp(e,t,i,n,r){Error.call(this),this.message=e,this.name="AxiosError",t&&(this.code=t),i&&(this.config=i),n&&(this.request=n),r&&(this.response=r)}Bp.inherits(Gp,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var Wp=Gp.prototype,Hp={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach((function(e){Hp[e]={value:e}})),Object.defineProperties(Gp,Hp),Object.defineProperty(Wp,"isAxiosError",{value:!0}),Gp.from=function(e,t,i,n,r,o){var s=Object.create(Wp);return Bp.toFlatObject(e,s,(function(e){return e!==Error.prototype})),Gp.call(s,e.message,t,i,n,r),s.name=e.name,o&&Object.assign(s,o),s};var Kp=Gp,Yp={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},qp=Lp;var Jp=function(e,t){t=t||new FormData;var i=[];function n(e){return null===e?"":qp.isDate(e)?e.toISOString():qp.isArrayBuffer(e)||qp.isTypedArray(e)?"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}return function e(r,o){if(qp.isPlainObject(r)||qp.isArray(r)){if(-1!==i.indexOf(r))throw Error("Circular reference detected in "+o);i.push(r),qp.forEach(r,(function(i,r){if(!qp.isUndefined(i)){var s,a=o?o+"."+r:r;if(i&&!o&&"object"==typeof i)if(qp.endsWith(r,"{}"))i=JSON.stringify(i);else if(qp.endsWith(r,"[]")&&(s=qp.toArray(i)))return void s.forEach((function(e){!qp.isUndefined(e)&&t.append(a,n(e))}));e(i,a)}})),i.pop()}else t.append(o,n(r))}(e),t},Xp=Kp,zp=Lp,Qp=zp.isStandardBrowserEnv()?{write:function(e,t,i,n,r,o){var s=[];s.push(e+"="+encodeURIComponent(t)),zp.isNumber(i)&&s.push("expires="+new Date(i).toGMTString()),zp.isString(n)&&s.push("path="+n),zp.isString(r)&&s.push("domain="+r),!0===o&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},Zp=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)},$p=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e},e_=function(e,t){return e&&!Zp(t)?$p(e,t):t},t_=Lp,i_=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],n_=Lp,r_=n_.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a");function n(e){var n=e;return t&&(i.setAttribute("href",n),n=i.href),i.setAttribute("href",n),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:"/"===i.pathname.charAt(0)?i.pathname:"/"+i.pathname}}return e=n(window.location.href),function(t){var i=n_.isString(t)?n(t):t;return i.protocol===e.protocol&&i.host===e.host}}():function(){return!0},o_=Kp;function s_(e){o_.call(this,null==e?"canceled":e,o_.ERR_CANCELED),this.name="CanceledError"}Lp.inherits(s_,o_,{__CANCEL__:!0});var a_=s_,c_=Lp,d_=function(e,t,i){var n=i.config.validateStatus;i.status&&n&&!n(i.status)?t(new Xp("Request failed with status code "+i.status,[Xp.ERR_BAD_REQUEST,Xp.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i)):e(i)},u_=Qp,l_=Up,h_=e_,p_=function(e){var t,i,n,r={};return e?(t_.forEach(e.split("\n"),(function(e){if(n=e.indexOf(":"),t=t_.trim(e.substr(0,n)).toLowerCase(),i=t_.trim(e.substr(n+1)),t){if(r[t]&&i_.indexOf(t)>=0)return;r[t]="set-cookie"===t?(r[t]?r[t]:[]).concat([i]):r[t]?r[t]+", "+i:i}})),r):r},__=r_,E_=Yp,m_=Kp,f_=a_,S_=function(e){var t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""},T_=function(e){return new Promise((function(t,i){var n,r=e.data,o=e.headers,s=e.responseType;function a(){e.cancelToken&&e.cancelToken.unsubscribe(n),e.signal&&e.signal.removeEventListener("abort",n)}c_.isFormData(r)&&c_.isStandardBrowserEnv()&&delete o["Content-Type"];var c=new XMLHttpRequest;if(e.auth){var d=e.auth.username||"",u=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";o.Authorization="Basic "+btoa(d+":"+u)}var l=h_(e.baseURL,e.url);function h(){if(c){var n="getAllResponseHeaders"in c?p_(c.getAllResponseHeaders()):null,r={data:s&&"text"!==s&&"json"!==s?c.response:c.responseText,status:c.status,statusText:c.statusText,headers:n,config:e,request:c};d_((function(e){t(e),a()}),(function(e){i(e),a()}),r),c=null}}if(c.open(e.method.toUpperCase(),l_(l,e.params,e.paramsSerializer),!0),c.timeout=e.timeout,"onloadend"in c?c.onloadend=h:c.onreadystatechange=function(){c&&4===c.readyState&&(0!==c.status||c.responseURL&&0===c.responseURL.indexOf("file:"))&&setTimeout(h)},c.onabort=function(){c&&(i(new m_("Request aborted",m_.ECONNABORTED,e,c)),c=null)},c.onerror=function(){i(new m_("Network Error",m_.ERR_NETWORK,e,c,c)),c=null},c.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",n=e.transitional||E_;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),i(new m_(t,n.clarifyTimeoutError?m_.ETIMEDOUT:m_.ECONNABORTED,e,c)),c=null},c_.isStandardBrowserEnv()){var p=(e.withCredentials||__(l))&&e.xsrfCookieName?u_.read(e.xsrfCookieName):void 0;p&&(o[e.xsrfHeaderName]=p)}"setRequestHeader"in c&&c_.forEach(o,(function(e,t){void 0===r&&"content-type"===t.toLowerCase()?delete o[t]:c.setRequestHeader(t,e)})),c_.isUndefined(e.withCredentials)||(c.withCredentials=!!e.withCredentials),s&&"json"!==s&&(c.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&c.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&c.upload&&c.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(n=function(e){c&&(i(!e||e&&e.type?new f_:e),c.abort(),c=null)},e.cancelToken&&e.cancelToken.subscribe(n),e.signal&&(e.signal.aborted?n():e.signal.addEventListener("abort",n))),r||(r=null);var _=S_(l);_&&-1===["http","https","file"].indexOf(_)?i(new m_("Unsupported protocol "+_+":",m_.ERR_BAD_REQUEST,e)):c.send(r)}))},g_=Lp,R_=function(e,t){jp.forEach(e,(function(i,n){n!==t&&n.toUpperCase()===t.toUpperCase()&&(e[t]=i,delete e[n])}))},I_=Kp,v_=Jp,C_={"Content-Type":"application/x-www-form-urlencoded"};function y_(e,t){!g_.isUndefined(e)&&g_.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var A_,O_={transitional:Yp,adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(A_=T_),A_),transformRequest:[function(e,t){if(R_(t,"Accept"),R_(t,"Content-Type"),g_.isFormData(e)||g_.isArrayBuffer(e)||g_.isBuffer(e)||g_.isStream(e)||g_.isFile(e)||g_.isBlob(e))return e;if(g_.isArrayBufferView(e))return e.buffer;if(g_.isURLSearchParams(e))return y_(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString();var i,n=g_.isObject(e),r=t&&t["Content-Type"];if((i=g_.isFileList(e))||n&&"multipart/form-data"===r){var o=this.env&&this.env.FormData;return v_(i?{"files[]":e}:e,o&&new o)}return n||"application/json"===r?(y_(t,"application/json"),function(e,t,i){if(g_.isString(e))try{return(t||JSON.parse)(e),g_.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(i||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||O_.transitional,i=t&&t.silentJSONParsing,n=t&&t.forcedJSONParsing,r=!i&&"json"===this.responseType;if(r||n&&g_.isString(e)&&e.length)try{return JSON.parse(e)}catch(e){if(r){if("SyntaxError"===e.name)throw I_.from(e,I_.ERR_BAD_RESPONSE,this,null,this.response);throw e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:null},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};g_.forEach(["delete","get","head"],(function(e){O_.headers[e]={}})),g_.forEach(["post","put","patch"],(function(e){O_.headers[e]=g_.merge(C_)}));var b_=O_,w_=Lp,N_=b_,D_=function(e){return!(!e||!e.__CANCEL__)},P_=Lp,L_=function(e,t,i){var n=this||N_;return w_.forEach(i,(function(i){e=i.call(n,e,t)})),e},k_=D_,M_=b_,U_=a_;function x_(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new U_}var V_=Lp,F_=function(e,t){t=t||{};var i={};function n(e,t){return V_.isPlainObject(e)&&V_.isPlainObject(t)?V_.merge(e,t):V_.isPlainObject(t)?V_.merge({},t):V_.isArray(t)?t.slice():t}function r(i){return V_.isUndefined(t[i])?V_.isUndefined(e[i])?void 0:n(void 0,e[i]):n(e[i],t[i])}function o(e){if(!V_.isUndefined(t[e]))return n(void 0,t[e])}function s(i){return V_.isUndefined(t[i])?V_.isUndefined(e[i])?void 0:n(void 0,e[i]):n(void 0,t[i])}function a(i){return i in t?n(e[i],t[i]):i in e?n(void 0,e[i]):void 0}var c={url:o,method:o,data:o,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:a};return V_.forEach(Object.keys(e).concat(Object.keys(t)),(function(e){var t=c[e]||r,n=t(e);V_.isUndefined(n)&&t!==a||(i[e]=n)})),i},j_="0.27.2",B_=j_,G_=Kp,W_={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){W_[e]=function(i){return typeof i===e||"a"+(t<1?"n ":" ")+e}}));var H_={};W_.transitional=function(e,t,i){function n(e,t){return"[Axios v"+B_+"] Transitional option '"+e+"'"+t+(i?". "+i:"")}return function(i,r,o){if(!1===e)throw new G_(n(r," has been removed"+(t?" in "+t:"")),G_.ERR_DEPRECATED);return t&&!H_[r]&&(H_[r]=!0,console.warn(n(r," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(i,r,o)}};var K_=Lp,Y_=Up,q_=Fp,J_=function(e){return x_(e),e.headers=e.headers||{},e.data=L_.call(e,e.data,e.headers,e.transformRequest),e.headers=P_.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),P_.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||M_.adapter)(e).then((function(t){return x_(e),t.data=L_.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return k_(t)||(x_(e),t&&t.response&&(t.response.data=L_.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))},X_=F_,z_=e_,Q_={assertOptions:function(e,t,i){if("object"!=typeof e)throw new G_("options must be an object",G_.ERR_BAD_OPTION_VALUE);for(var n=Object.keys(e),r=n.length;r-- >0;){var o=n[r],s=t[o];if(s){var a=e[o],c=void 0===a||s(a,o,e);if(!0!==c)throw new G_("option "+o+" must be "+c,G_.ERR_BAD_OPTION_VALUE)}else if(!0!==i)throw new G_("Unknown option "+o,G_.ERR_BAD_OPTION)}},validators:W_},Z_=Q_.validators;function $_(e){this.defaults=e,this.interceptors={request:new q_,response:new q_}}$_.prototype.request=function(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},(t=X_(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var i=t.transitional;void 0!==i&&Q_.assertOptions(i,{silentJSONParsing:Z_.transitional(Z_.boolean),forcedJSONParsing:Z_.transitional(Z_.boolean),clarifyTimeoutError:Z_.transitional(Z_.boolean)},!1);var n=[],r=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(r=r&&e.synchronous,n.unshift(e.fulfilled,e.rejected))}));var o,s=[];if(this.interceptors.response.forEach((function(e){s.push(e.fulfilled,e.rejected)})),!r){var a=[J_,void 0];for(Array.prototype.unshift.apply(a,n),a=a.concat(s),o=Promise.resolve(t);a.length;)o=o.then(a.shift(),a.shift());return o}for(var c=t;n.length;){var d=n.shift(),u=n.shift();try{c=d(c)}catch(e){u(e);break}}try{o=J_(c)}catch(e){return Promise.reject(e)}for(;s.length;)o=o.then(s.shift(),s.shift());return o},$_.prototype.getUri=function(e){e=X_(this.defaults,e);var t=z_(e.baseURL,e.url);return Y_(t,e.params,e.paramsSerializer)},K_.forEach(["delete","get","head","options"],(function(e){$_.prototype[e]=function(t,i){return this.request(X_(i||{},{method:e,url:t,data:(i||{}).data}))}})),K_.forEach(["post","put","patch"],(function(e){function t(t){return function(i,n,r){return this.request(X_(r||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:i,data:n}))}}$_.prototype[e]=t(),$_.prototype[e+"Form"]=t(!0)}));var eE=$_,tE=a_;function iE(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var i=this;this.promise.then((function(e){if(i._listeners){var t,n=i._listeners.length;for(t=0;t<n;t++)i._listeners[t](e);i._listeners=null}})),this.promise.then=function(e){var t,n=new Promise((function(e){i.subscribe(e),t=e})).then(e);return n.cancel=function(){i.unsubscribe(t)},n},e((function(e){i.reason||(i.reason=new tE(e),t(i.reason))}))}iE.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},iE.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},iE.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},iE.source=function(){var e;return{token:new iE((function(t){e=t})),cancel:e}};var nE=iE,rE=Lp,oE=Lp,sE=_p,aE=eE,cE=F_;var dE=function e(t){var i=new aE(t),n=sE(aE.prototype.request,i);return oE.extend(n,aE.prototype,i),oE.extend(n,i),n.create=function(i){return e(cE(t,i))},n}(b_);dE.Axios=aE,dE.CanceledError=a_,dE.CancelToken=nE,dE.isCancel=D_,dE.VERSION=j_,dE.toFormData=Jp,dE.AxiosError=Kp,dE.Cancel=dE.CanceledError,dE.all=function(e){return Promise.all(e)},dE.spread=function(e){return function(t){return e.apply(null,t)}},dE.isAxiosError=function(e){return rE.isObject(e)&&!0===e.isAxiosError},pp.exports=dE,pp.exports.default=dE;var uE=pp.exports;class lE{constructor(e){lp(this,"logger",void 0),lp(this,"prefixLists",[]),this.logger=e}debug(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.logger.debug(...this.prefixLists,...t)}info(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.logger.info(...this.prefixLists,...t)}warning(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.logger.warning(...this.prefixLists,...t)}error(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.logger.error(...this.prefixLists,...t)}prefix(e){return this.prefixLists.push(e),this}popPrefix(){return this.prefixLists.pop(),this}}class hE{constructor(){lp(this,"_events",{}),lp(this,"addListener",this.on)}getListeners(e){return this._events[e]?this._events[e].map(e=>e.listener):[]}on(e,t){this._events[e]||(this._events[e]=[]);const i=this._events[e];-1===this._indexOfListener(i,t)&&i.push({listener:t,once:!1})}once(e,t){this._events[e]||(this._events[e]=[]);const i=this._events[e];-1===this._indexOfListener(i,t)&&i.push({listener:t,once:!0})}off(e,t){if(!this._events[e])return;const i=this._events[e],n=this._indexOfListener(i,t);-1!==n&&i.splice(n,1),0===this._events[e].length&&delete this._events[e]}removeAllListeners(e){e?delete this._events[e]:this._events={}}emit(e){this._events[e]||(this._events[e]=[]);const t=this._events[e].map(e=>e);for(var i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];for(let i=0;i<t.length;i+=1){const r=t[i];r.once&&this.off(e,r.listener),r.listener.apply(this,n||[])}}_indexOfListener(e,t){let i=e.length;for(;i--;)if(e[i].listener===t)return i;return-1}}const pE=new class extends hE{reportLogUploadError(e){this.emit("REPORT_LOG_UPLOAD",e)}};let _E;!function(e){e.UNEXPECTED_ERROR="UNEXPECTED_ERROR",e.UNEXPECTED_RESPONSE="UNEXPECTED_RESPONSE",e.TIMEOUT="TIMEOUT",e.INVALID_PARAMS="INVALID_PARAMS",e.NOT_READABLE="NOT_READABLE",e.NOT_SUPPORTED="NOT_SUPPORTED",e.INVALID_OPERATION="INVALID_OPERATION",e.OPERATION_ABORTED="OPERATION_ABORTED",e.WEB_SECURITY_RESTRICT="WEB_SECURITY_RESTRICT",e.EXCHANGE_SDP_FAILED="EXCHANGE_SDP_FAILED",e.NETWORK_ERROR="NETWORK_ERROR",e.NETWORK_TIMEOUT="NETWORK_TIMEOUT",e.NETWORK_RESPONSE_ERROR="NETWORK_RESPONSE_ERROR",e.API_INVOKE_TIMEOUT="API_INVOKE_TIMEOUT",e.ENUMERATE_DEVICES_FAILED="ENUMERATE_DEVICES_FAILED",e.DEVICE_NOT_FOUND="DEVICE_NOT_FOUND",e.ELECTRON_IS_NULL="ELECTRON_IS_NULL",e.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR="ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR",e.CHROME_PLUGIN_NO_RESPONSE="CHROME_PLUGIN_NO_RESPONSE",e.CHROME_PLUGIN_NOT_INSTALL="CHROME_PLUGIN_NOT_INSTALL",e.MEDIA_OPTION_INVALID="MEDIA_OPTION_INVALID",e.PERMISSION_DENIED="PERMISSION_DENIED",e.CONSTRAINT_NOT_SATISFIED="CONSTRAINT_NOT_SATISFIED",e.TRACK_IS_DISABLED="TRACK_IS_DISABLED",e.GET_VIDEO_ELEMENT_VISIBLE_ERROR="GET_VIDEO_ELEMENT_VISIBLE_ERROR",e.SHARE_AUDIO_NOT_ALLOWED="SHARE_AUDIO_NOT_ALLOWED",e.LOW_STREAM_ENCODING_ERROR="LOW_STREAM_ENCODING_ERROR",e.SET_ENCODING_PARAMETER_ERROR="SET_ENCODING_PARAMETER_ERROR",e.TRACK_STATE_UNREACHABLE="TRACK_STATE_UNREACHABLE",e.INVALID_UINT_UID_FROM_STRING_UID="INVALID_UINT_UID_FROM_STRING_UID",e.CAN_NOT_GET_PROXY_SERVER="CAN_NOT_GET_PROXY_SERVER",e.CAN_NOT_GET_GATEWAY_SERVER="CAN_NOT_GET_GATEWAY_SERVER",e.VOID_GATEWAY_ADDRESS="VOID_GATEWAY_ADDRESS",e.UID_CONFLICT="UID_CONFLICT",e.MULTI_UNILBS_RESPONSE_ERROR="MULTI_UNILBS_RESPONSE_ERROR",e.UPDATE_TICKET_FAILED="UPDATE_TICKET_FAILED",e.INVALID_LOCAL_TRACK="INVALID_LOCAL_TRACK",e.INVALID_TRACK="INVALID_TRACK",e.SENDER_NOT_FOUND="SENDER_NOT_FOUND",e.CREATE_OFFER_FAILED="CREATE_OFFER_FAILED",e.SET_ANSWER_FAILED="SET_ANSWER_FAILED",e.ICE_FAILED="ICE_FAILED",e.PC_CLOSED="PC_CLOSED",e.SENDER_REPLACE_FAILED="SENDER_REPLACE_FAILED",e.GET_LOCAL_CAPABILITIES_FAILED="GET_LOCAL_CAPABILITIES_FAILED",e.GET_LOCAL_CONNECTION_PARAMS_FAILED="GET_LOCAL_CONNECTION_PARAMS_FAILED",e.SUBSCRIBE_FAILED="SUBSCRIBE_FAILED",e.UNSUBSCRIBE_FAILED="UNSUBSCRIBE_FAILED",e.GATEWAY_P2P_LOST="GATEWAY_P2P_LOST",e.NO_ICE_CANDIDATE="NO_ICE_CANDIDATE",e.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS="CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS",e.EXIST_DISABLED_VIDEO_TRACK="EXIST_DISABLED_VIDEO_TRACK",e.INVALID_REMOTE_USER="INVALID_REMOTE_USER",e.REMOTE_USER_IS_NOT_PUBLISHED="REMOTE_USER_IS_NOT_PUBLISHED",e.CUSTOM_REPORT_SEND_FAILED="CUSTOM_REPORT_SEND_FAILED",e.CUSTOM_REPORT_FREQUENCY_TOO_HIGH="CUSTOM_REPORT_FREQUENCY_TOO_HIGH",e.FETCH_AUDIO_FILE_FAILED="FETCH_AUDIO_FILE_FAILED",e.READ_LOCAL_AUDIO_FILE_ERROR="READ_LOCAL_AUDIO_FILE_ERROR",e.DECODE_AUDIO_FILE_FAILED="DECODE_AUDIO_FILE_FAILED",e.WS_ABORT="WS_ABORT",e.WS_DISCONNECT="WS_DISCONNECT",e.WS_ERR="WS_ERR",e.LIVE_STREAMING_TASK_CONFLICT="LIVE_STREAMING_TASK_CONFLICT",e.LIVE_STREAMING_INVALID_ARGUMENT="LIVE_STREAMING_INVALID_ARGUMENT",e.LIVE_STREAMING_INTERNAL_SERVER_ERROR="LIVE_STREAMING_INTERNAL_SERVER_ERROR",e.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED="LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED",e.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED="LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED",e.LIVE_STREAMING_CDN_ERROR="LIVE_STREAMING_CDN_ERROR",e.LIVE_STREAMING_INVALID_RAW_STREAM="LIVE_STREAMING_INVALID_RAW_STREAM",e.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT="LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT",e.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE="LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE",e.LIVE_STREAMING_WARN_FREQUENT_REQUEST="LIVE_STREAMING_WARN_FREQUENT_REQUEST",e.WEBGL_INTERNAL_ERROR="WEBGL_INTERNAL_ERROR",e.BEAUTY_PROCESSOR_INTERNAL_ERROR="BEAUTY_PROCESSOR_INTERNAL_ERROR",e.CROSS_CHANNEL_WAIT_STATUS_ERROR="CROSS_CHANNEL_WAIT_STATUS_ERROR",e.CROSS_CHANNEL_FAILED_JOIN_SRC="CROSS_CHANNEL_FAILED_JOIN_SEC",e.CROSS_CHANNEL_FAILED_JOIN_DEST="CROSS_CHANNEL_FAILED_JOIN_DEST",e.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST="CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST",e.CROSS_CHANNEL_SERVER_ERROR_RESPONSE="CROSS_CHANNEL_SERVER_ERROR_RESPONSE",e.METADATA_OUT_OF_RANGE="METADATA_OUT_OF_RANGE",e.LOCAL_AEC_ERROR="LOCAL_AEC_ERROR",e.INVALID_PLUGIN="INVALID_PLUGIN",e.DISCONNECT_P2P="DISCONNECT_P2P",e.INIT_WEBSOCKET_TIMEOUT="INIT_WEBSOCKET_TIMEOUT",e.CONVERTING_IMAGEDATA_TO_BLOB_FAILED="CONVERTING_IMAGEDATA_TO_BLOB_FAILED",e.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED="CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED",e.INIT_DATACHANNEL_TIMEOUT="INIT_DATACHANNEL_TIMEOUT",e.DATACHANNEL_CONNECTION_TIMEOUT="DATACHANNEL_CONNECTION_TIMEOUT",e.PROHIBITED_OPERATION="PROHIBITED_OPERATION"}(_E||(_E={}));class EE extends Error{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2?arguments[2]:void 0;super(t),lp(this,"code",void 0),lp(this,"message",void 0),lp(this,"data",void 0),lp(this,"name","AgoraRTCException"),this.code=e,this.message="AgoraRTCError ".concat(this.code,": ").concat(t),this.data=i}toString(){return this.data?"data: ".concat(JSON.stringify(this.data),"\n").concat(this.stack):"".concat(this.stack)}print(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"error";return"error"===e&&CE.error(this.toString()),"warning"===e&&CE.warning(this.toString()),this}throw(){throw this.print(),this}}const mE={timeout:500,timeoutFactor:1.5,maxRetryCount:1/0,maxRetryTimeout:1e4};function fE(e,t){const i=Math.floor(t.timeout*Math.pow(t.timeoutFactor,e));return Math.min(t.maxRetryTimeout,i)}function SE(e,t,i,n){const r=Object.assign({},mE,n);let o=r.timeout;const s=async()=>{await function(e){return new Sl(t=>{window.setTimeout(t,e)})}(o),o*=r.timeoutFactor,o=Math.min(r.maxRetryTimeout,o)};let a=!1;const c=new Sl(async(n,o)=>{t=t||(()=>!1),i=i||(()=>!0);for(let c=0;c<r.maxRetryCount;c+=1){if(a)return o(new EE(_E.OPERATION_ABORTED));try{const i=await e();if(!t(i,c))return n(i);if(c+1===r.maxRetryCount)return n(i);await s()}catch(e){if(!i(e,c))return o(e);if(c+1===r.maxRetryCount)return o(e);await s()}}});return c.cancel=()=>a=!0,c}function TE(){const e=new Date;return e.toTimeString().split(" ")[0]+":"+e.getMilliseconds()}function gE(){const e=new Date,t=/((\d+:){2}\d+)/.exec((new Date).toUTCString());return t?(null==t?void 0:t[0])+":"+e.getUTCMilliseconds():e.toTimeString().split(" ")[0]+":"+e.getMilliseconds()}const RE={DEBUG:0,INFO:1,WARNING:2,ERROR:3,NONE:4},IE=Date.now(),vE=e=>{for(const t in RE)if(Object.prototype.hasOwnProperty.call(RE,t)&&RE[t]===e)return t;return"DEFAULT"};const CE=new class{constructor(){lp(this,"proxyServerURL",void 0),lp(this,"logLevel",RE.DEBUG),lp(this,"uploadState","collecting"),lp(this,"uploadLogWaitingList",[]),lp(this,"uploadLogUploadingList",[]),lp(this,"uploadErrorCount",0),lp(this,"currentLogID",0),lp(this,"url",void 0),lp(this,"extLog",(e,t)=>{this.appendLogToWaitingList(e,...t)})}debug(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];const n=[RE.DEBUG].concat(t);this.log.apply(this,n)}info(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];const n=[RE.INFO].concat(t);this.log.apply(this,n)}warning(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];const n=[RE.WARNING].concat(t);this.log.apply(this,n)}error(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];const n=[RE.ERROR].concat(t);this.log.apply(this,n)}upload(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];const n=[RE.DEBUG].concat(t);this.uploadLog.apply(this,n)}setLogLevel(e){e=Math.min(Math.max(0,e),4),this.logLevel=e}enableLogUpload(){VE("UPLOAD_LOG",!0)}disableLogUpload(){VE("UPLOAD_LOG",!1),this.uploadLogUploadingList=[],this.uploadLogWaitingList=[]}setProxyServer(e){this.proxyServerURL=e}prefix(e){return new lE(this).prefix(e)}log(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];if(Date.now()-IE<100)return void setTimeout(()=>{this.log(...t)},Date.now()-IE);const n=Math.max(0,Math.min(4,t[0]));if(t[0]=TE()+" Agora-SDK [".concat(vE(n),"]:"),this.appendLogToWaitingList(n,...t),n<this.logLevel)return;const r=TE()+" %cAgora-SDK [".concat(vE(n),"]:");let o=[];if(!FE("USE_NEW_LOG"))switch(n){case RE.DEBUG:o=[r,"color: #64B5F6;"].concat(t.slice(1)),console.log.apply(console,o);break;case RE.INFO:o=[r,"color: #1E88E5; font-weight: bold;"].concat(t.slice(1)),console.log.apply(console,o);break;case RE.WARNING:o=[r,"color: #FB8C00; font-weight: bold;"].concat(t.slice(1)),console.warn.apply(console,o);break;case RE.ERROR:o=[r,"color: #B00020; font-weight: bold;"].concat(t.slice(1)),console.error.apply(console,o)}}uploadLog(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];if(Date.now()-IE<100)return void setTimeout(()=>{this.uploadLog(...t)},Date.now()-IE);const n=Math.max(0,Math.min(4,t[0]));t[0]=TE()+" Agora-SDK [".concat(vE(n),"]:"),this.appendLogToWaitingList(n,...t)}appendLogToWaitingList(e){if(!FE("UPLOAD_LOG"))return;for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];Array.isArray(i[0])?i[0][0]=gE()+" Agora-SDK [".concat(vE(e),"]:"):i[0]=gE()+" Agora-SDK [".concat(vE(e),"]:");let r="";i.forEach(e=>{"object"==typeof e&&(e=JSON.stringify(e)),r+="".concat(e," ")}),this.uploadLogWaitingList.push({payload_str:r,log_level:e,log_item_id:this.currentLogID++}),"uploading"===this.uploadState&&0===this.uploadLogUploadingList.length&&this.uploadLogInterval()}startUpload(){this.uploadState="uploading",0===this.uploadLogUploadingList.length&&this.uploadLogInterval()}async uploadLogs(){const e=this.uploadLogUploadingList,t={sdk_version:AE,process_id:FE("PROCESS_ID"),payload:JSON.stringify(e)};return SE(async()=>{const e=await uE.post(this.url||(this.proxyServerURL?"https://".concat(this.proxyServerURL,"/ls/?h=").concat(FE("LOG_UPLOAD_SERVER"),"&p=443&d=upload/v1"):"https://".concat(FE("LOG_UPLOAD_SERVER"),"/upload/v1")),t,{responseType:"text"});if("OK"!==e.data){const t=new Error("unexpected upload log response");throw t.response=e,t}},()=>(this.uploadLogUploadingList=[],!1),e=>(e.response?pE.reportLogUploadError({status:e.response.status,data:e.response.data,headers:e.response.headers,message:e.message}):e.request?pE.reportLogUploadError({status:e.request.status,message:e.message}):pE.reportLogUploadError({status:-1,message:e.message}),!0),{timeout:FE("UPLOAD_LOG_REQUEST_RETRY_INTERVAL"),maxRetryTimeout:FE("UPLOAD_LOG_REQUEST_MAX_RETRY_INTERVAL")})}uploadLogInterval(){0===this.uploadLogUploadingList.length&&0===this.uploadLogWaitingList.length||(0===this.uploadLogUploadingList.length&&(this.uploadLogUploadingList=this.uploadLogWaitingList.splice(0,FE("UPLOAD_LOG_LENGTH_EACH_TIME"))),this.uploadLogs().then(()=>{this.uploadErrorCount=0,this.uploadLogWaitingList.length>0&&window.setTimeout(()=>this.uploadLogInterval(),FE("UPLOAD_LOG_INTERVAL"))}).catch(e=>{this.uploadErrorCount+=1,this.uploadErrorCount<2?window.setTimeout(()=>this.uploadLogInterval(),FE("UPLOAD_LOG_TWICE_RETRY_INTERVAL_V1")):window.setTimeout(()=>this.uploadLogInterval(),FE("UPLOAD_LOG_RETRY_INTERVAL_V1"))}))}},yE="v4.17.0-0-gf6ae6c87-dirty(3/22/2023, 2:41:22 PM)",AE=function(e){if(e.match(/[0-9]+\.[0-9]+\.[0-9]+$/))return e;const t=e.match(/([0-9]+\.[0-9]+\.[0-9]+)\-alpha\.([0-9]+)/);if(t&&t[1]&&t[2]){const e=t[1],i=t[2];return"".concat(e,".").concat(i)}const i=e.match(/([0-9]+\.[0-9]+\.[0-9]+)\-special\.([0-9]+)/);if(i&&i[1]&&i[2]){const e=i[1],t=i[2];return"".concat(e,".").concat(100*(Number(t)+1))}return"4.0.0.999"}("4.17.0"),OE=function(){try{return!0===JSON.parse("true")}catch(e){return!0}}(),bE=["CHINA","GLOBAL"],wE=function(){const e="us".concat("erna","me"),t="pa".concat("sswo","rd"),i=["t","s","t"];i.splice(1,0,"e");const n=i.join(""),r=[];for(let e=0;e<6;e++)r.push("1");const o=r.join(""),s={};return s[e]=n,s[t]=o,Object.assign(s,{turnServerURL:"",tcpport:3433,udpport:3478,forceturn:!1})}();window.DEFAULT_TURN_CONFIG=wE;const NE={"90p":WE(160,90),"90p_1":WE(160,90),"120p":WE(160,120,15,30,65),"120p_1":WE(160,120,15,30,65),"120p_3":WE(120,120,15,30,50),"120p_4":WE(212,120),"180p":WE(320,180,15,30,140),"180p_1":WE(320,180,15,30,140),"180p_3":WE(180,180,15,30,100),"180p_4":WE(240,180,15,30,120),"240p":WE(320,240,15,40,200),"240p_1":WE(320,240,15,40,200),"240p_3":WE(240,240,15,40,140),"240p_4":WE(424,240,15,40,220),"360p":WE(640,360,15,80,400),"360p_1":WE(640,360,15,80,400),"360p_3":WE(360,360,15,80,260),"360p_4":WE(640,360,30,80,600),"360p_6":WE(360,360,30,80,400),"360p_7":WE(480,360,15,80,320),"360p_8":WE(480,360,30,80,490),"360p_9":WE(640,360,15,80,800),"360p_10":WE(640,360,24,80,800),"360p_11":WE(640,360,24,80,1e3),"480p":WE(640,480,15,100,500),"480p_1":WE(640,480,15,100,500),"480p_2":WE(640,480,30,100,1e3),"480p_3":WE(480,480,15,100,400),"480p_4":WE(640,480,30,100,750),"480p_6":WE(480,480,30,100,600),"480p_8":WE(848,480,15,100,610),"480p_9":WE(848,480,30,100,930),"480p_10":WE(640,480,10,100,400),"720p":WE(1280,720,15,120,1130),"720p_1":WE(1280,720,15,120,1130),"720p_2":WE(1280,720,30,120,2e3),"720p_3":WE(1280,720,30,120,1710),"720p_5":WE(960,720,15,120,910),"720p_6":WE(960,720,30,120,1380),"1080p":WE(1920,1080,15,120,2080),"1080p_1":WE(1920,1080,15,120,2080),"1080p_2":WE(1920,1080,30,120,3e3),"1080p_3":WE(1920,1080,30,120,3150),"1080p_5":WE(1920,1080,60,120,4780),"1440p":WE(2560,1440,30,120,4850),"1440p_1":WE(2560,1440,30,120,4850),"1440p_2":WE(2560,1440,60,120,7350),"4k":WE(3840,2160,30,120,8910),"4k_1":WE(3840,2160,30,120,8910),"4k_3":WE(3840,2160,60,120,13500)},DE={"480p":HE(640,480,5),"480p_1":HE(640,480,5),"480p_2":HE(640,480,30),"480p_3":HE(640,480,15),"720p":HE(1280,720,5),"720p_1":HE(1280,720,5),"720p_2":HE(1280,720,30),"720p_3":HE(1280,720,15),"1080p":HE(1920,1080,5),"1080p_1":HE(1920,1080,5),"1080p_2":HE(1920,1080,30),"1080p_3":HE(1920,1080,15)},PE={"1SL1TL":KE(1,1),"3SL3TL":KE(3,3),"2SL3TL":KE(2,3)};function LE(e){return e||(e="480p_1"),"string"==typeof e?Object.assign({},NE[e]):e}function kE(e){return"string"==typeof e?Object.assign({},DE[e]):e}function ME(e){return"string"==typeof e?Object.assign({},PE[e]):e}const UE={speech_low_quality:GE(16e3,!1),speech_standard:GE(32e3,!1,18),music_standard:GE(48e3,!1),standard_stereo:GE(48e3,!0,56),high_quality:GE(48e3,!1,128),high_quality_stereo:GE(48e3,!0,192)};function xE(e){return"string"==typeof e?Object.assign({},UE[e]):e}function VE(e,t,i){Object.keys(jE).includes(e)&&(!i&&Object.keys(BE).includes(e)||(jE[e]=t))}function FE(e){return jE[e]}const jE={PROCESS_ID:"",ENCRYPT_AES:!0,AREAS:bE,WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io","webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io","webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-web-2.ap.sd-rtn.com","cds-ap-web-3.agora.io","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-web-2.ap.sd-rtn.com","sua-ap-web-3.agora.io","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-ap-web-1.agora.io","uap-web-2.ap.sd-rtn.com","uap-ap-web-3.agora.io","uap-web-4.ap.sd-rtn.com"],LOG_UPLOAD_SERVER:"logservice.agora.io",EVENT_REPORT_DOMAIN:"statscollector-1.agora.io",EVENT_REPORT_BACKUP_DOMAIN:"web-2.statscollector.sd-rtn.com",ENABLE_EVENT_REPORT:!0,GATEWAY_ADDRESS:[],GATEWAY_WSS_ADDRESS:"",LIVE_STREAMING_ADDRESS:"",HTTP_CONNECT_TIMEOUT:5e3,SIGNAL_REQUEST_TIMEOUT:1e4,REPORT_STATS:!0,UPLOAD_LOG:!1,NOT_REPORT_EVENT:[],SUBSCRIBE_TWCC:!1,PUBLISH_TWCC:!1,PING_PONG_TIME_OUT:10,WEBSOCKET_TIMEOUT_MIN:1e4,EVENT_REPORT_SEND_INTERVAL:3e3,CONFIG_DISTRIBUTE_INTERVAL:3e5,ENABLE_CONFIG_DISTRIBUTE:!0,CANDIDATE_TIMEOUT:5e3,SHOW_REPORT_INVOKER_LOG:!1,JOIN_EXTEND:"",PUB_EXTEND:"",SUB_EXTEND:"",FORCE_TURN:!1,TURN_ENABLE_TCP:!0,TURN_ENABLE_UDP:!0,MAX_UPLOAD_CACHE:50,UPLOAD_CACHE_INTERVAL:2e3,AJAX_REQUEST_CONCURRENT:3,REPORT_APP_SCENARIO:void 0,GATEWAY_DOMAINS:["edge.agora.io","edge.sd-rtn.com"],WORKER_DOMAIN:"edge.agora.io",TURN_DOMAIN:"edge.agora.io",EVENT_REPORT_RETRY:!0,CHROME_FORCE_PLAN_B:!1,AUDIO_SOURCE_VOLUME_UPDATE_INTERVAL:400,AUDIO_SOURCE_AVG_VOLUME_DURATION:3e3,AUDIO_VOLUME_INDICATION_INTERVAL:2e3,VOLUME_VOICE_WEIGHT:10,GET_VOLUME_OF_MUTED_AUDIO_TRACK:!1,NORMAL_EVENT_QUEUE_CAPACITY:100,CUSTOM_REPORT:!0,CUSTOM_REPORT_LIMIT:20,PROXY_SERVER_TYPE2:"webnginx-proxy.agora.io",PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.sd-rtn.com","webrtc-cloud-proxy.agora.io"],CUSTOM_PUB_ANSWER_MODIFIER:null,CUSTOM_SUB_ANSWER_MODIFIER:null,CUSTOM_PUB_OFFER_MODIFIER:null,CUSTOM_SUB_OFFER_MODIFIER:null,DSCP_TYPE:"high",REMOVE_NEW_CODECS:!0,FRAGEMENT_LENGTH:3,WEBSOCKET_COMPRESS:!1,SIMULCAST:!1,PRELOAD_MEDIA_COUNT:0,USE_RTX:!1,CHECK_VIDEO_VISIBLE_INTERVAL:3e4,ENUMERATE_DEVICES_INTERVAL:!1,ENUMERATE_DEVICES_INTERVAL_TIME:1e4,USE_NEW_TOKEN:!1,CLOSE_AFB_FOR_LOCAL_AP:!0,JOIN_WITH_FALLBACK_SIGNAL_PROXY:!0,JOIN_WITH_FALLBACK_MEDIA_PROXY:!0,JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE:!1,JOIN_WITH_FALLBACK_PROXY_PENDING_DURATION:2e3,USE_TURN_SERVER_OF_GATEWAY:!1,H264_PROFILE_LEVEL_ID:"",USE_NEW_LOG:!1,LOG_VERSION:3,MEDIA_DEVICE_CONSTRAINTS:null,ENCRYPT_PROXY_USERNAME_AND_PSW:!0,SDP_LOGGING:!1,CSP_DETECTED_HOSTNAME_LIST:["agora.io","sd-rtn.com"],REMOTE_AUDIO_TRACK_USES_WEB_AUDIO:!1,LOCAL_AUDIO_TRACK_USES_WEB_AUDIO:!0,BITRATE_ADAPTER_TYPE:"STANDARD_BITRATE",AI_DENOISER_PARAMETERS:{},ADJUST_3A_FROM_PLUGINS:!0,RAISE_H264_BASELINE_PRIORITY:!0,FILTER_SEND_H264_BASELINE:!1,ENABLE_PUBLISHED_USER_LIST:!0,MAX_SUBSCRIPTION:50,X_GOOGLE_START_BITRATE:void 0,NEW_REPORT_SERVER:!1,NEW_REPORT_SERVER_DOMAINS:["data-reporting.agora.io","data-reporting.agora.io"],VIDEO_INSPECT_WORKER_MESSAGE_LENGTH_LIMIT:3e5,VIDEO_INSPECT_INTERVAL_MINIMUM:1e3,VIDEO_INSPECT_QUALITY_RATIO:.9,VIDEO_INSPECT_WORKER_MANAGER_HOST:"edge.agora.io",VIDEO_INSPECT_WORKER_MANAGER_PORT:"",VIDEO_INSPECT_WORKER_PORT:"",SHOW_VIDEO_INSPECT_WORKER_MESSAGE:!1,STATS_COLLECTOR_PORT:443,FORCE_TURN_TCP:!1,SUBSCRIBE_AUDIO_FILTER_TOPN:void 0,ENABLE_PUBLISH_AUDIO_FILTER:void 0,WEBAUDIO_INIT_OPTIONS:void 0,FILTER_VIDEO_FEC:!0,FILTER_AUDIO_FEC:!1,CHROME_DUAL_STREAM_USE_ENCODING:!0,EXTENSION_USAGE_UPLOAD_INTERVAL:1e4,ICE_RESTART:!0,ENABLE_USER_LICENSE_CHECK:!0,SIGNAL_CHANNEL:0,TRANSMITTER_INITIAL_RTT:30,TRANSMITTER_INITIAL_RTO:30,TRANSMITTER_MAX_BATCH_ACK_COUNT:2,TRANSMITTER_MAX_RTO:500,DATACHANNEL_COMPRESS:!1,FINGERPRINT:null,DC_JOIN_WITH_FAILBACK:5e3,ENABLE_VIDEO_FRAME_CALLBACK:!0,VIDEO_FREEZE_DURATION:500,SPATIALIZER_PARAMETERS:{},UPLOAD_LOG_INTERVAL:3e3,UPLOAD_LOG_REQUEST_RETRY_INTERVAL:2e3,UPLOAD_LOG_REQUEST_MAX_RETRY_INTERVAL:2e4,UPLOAD_LOG_TRY_INTERVAL_WHILE_OFF:5e3,UPLOAD_LOG_RETRY_INTERVAL_V1:1e4,UPLOAD_LOG_TWICE_RETRY_INTERVAL_V1:200,UPLOAD_LOG_LENGTH_EACH_TIME:10,APP_TYPE:0,DISABLE_WEBAUDIO:!1,CHANNEL_MEDIA_RELAY_SERVERS:void 0,KEEP_LAST_FRAME:!0,FORWARD_P2P_CREATION:!0,AV_SYNC:!0,ACCOUNT_REGISTER_RETRY_TIMEOUT:1,ACCOUNT_REGISTER_RETRY_RATIO:2,ACCOUNT_REGISTER_RETRY_TIMEOUT_MAX:6e4,ACCOUNT_REGISTER_RETRY_COUNT_MAX:1e5,AUDIO_CONTEXT:null,WEBCS_BACKUP_CONNECT_TIMEOUT:6e3,PLAYER_STATE_DEFER:2e3,SIGNAL_REQUEST_WATCH_INTERVAL:1e3,FILEPATH_LENMAX:255,DUALSTREAM_OPERATION_CHECK:!0,MEDIA_ELEMENT_EXISTS_DEPTH:3,SHIM_CANDIDATE:!1,LEAVE_MSG_TIMEOUT:2e3,STATS_FILTER:{transportId:!0,googTrackId:!0}},BE={};function GE(e,t,i){return{sampleRate:e,stereo:t,bitrate:i}}function WE(e,t,i,n,r){return{width:e,height:t,frameRate:i,bitrateMin:n,bitrateMax:r}}function HE(e,t,i,n,r){return{width:{max:e},height:{max:t},frameRate:i,bitrateMin:n,bitrateMax:r}}function KE(e,t){return{numSpatialLayers:e,numTemporalLayers:t}}OE||(jE.WEBCS_DOMAIN=["ap-web-1-oversea.agora.io","ap-web-1-north-america.agora.io"],jE.WEBCS_DOMAIN_BACKUP_LIST=["ap-web-2-oversea.agora.io","ap-web-2-north-america.agora.io"],jE.PROXY_CS=["proxy-ap-web-oversea.agora.io","proxy-ap-web-america.agora.io"],jE.CDS_AP=["cds-ap-web-oversea.agora.io","cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],jE.ACCOUNT_REGISTER=["sua-ap-web-oversea.agora.io","sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],jE.UAP_AP=["uap-ap-web-oversea.agora.io","uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],jE.LOG_UPLOAD_SERVER="logservice-oversea.agora.io",jE.EVENT_REPORT_DOMAIN="statscollector-1-oversea.agora.io",jE.EVENT_REPORT_BACKUP_DOMAIN="statscollector-2-oversea.agora.io",jE.PROXY_SERVER_TYPE3="webrtc-cloud-proxy.agora.io",jE.AREAS=["NORTH_AMERICA","OVERSEA"]);const YE=[[0,1,2,3,4,5,5],[0,2,2,3,4,5,5],[0,3,3,3,4,5,5],[0,4,4,4,4,5,5],[0,5,5,5,5,5,5]],qE=[],JE=[];var XE=Et,zE=Ht,QE=N,ZE=function(e,t,i){var n=XE(t);n in e?zE.f(e,n,QE(0,i)):e[n]=i},$E=Un,em=wi,tm=ZE,im=h.Array,nm=Math.max,rm=function(e,t,i){for(var n=em(e),r=$E(t,n),o=$E(void 0===i?n:i,n),s=im(nm(o-r,0)),a=0;r<o;r++,a++)tm(s,a,e[r]);return s.length=a,s},om=rm,sm=Math.floor,am=function(e,t){var i=e.length,n=sm(i/2);return i<8?cm(e,t):dm(e,am(om(e,0,n),t),am(om(e,n),t),t)},cm=function(e,t){for(var i,n,r=e.length,o=1;o<r;){for(n=o,i=e[o];n&&t(e[n-1],i)>0;)e[n]=e[--n];n!==o++&&(e[n]=i)}return e},dm=function(e,t,i,n){for(var r=t.length,o=i.length,s=0,a=0;s<r||a<o;)e[s+a]=s<r&&a<o?n(t[s],i[a])<=0?t[s++]:i[a++]:s<r?t[s++]:i[a++];return e},um=am,lm=ee.match(/firefox\/(\d+)/i),hm=!!lm&&+lm[1],pm=/MSIE|Trident/.test(ee),_m=ee.match(/AppleWebKit\/(\d+)\./),Em=!!_m&&+_m[1],mm=Ii,fm=d,Sm=ve,Tm=Fe,gm=wi,Rm=No,Im=i,vm=um,Cm=Vi,ym=hm,Am=pm,Om=ae,bm=Em,wm=[],Nm=fm(wm.sort),Dm=fm(wm.push),Pm=Im((function(){wm.sort(void 0)})),Lm=Im((function(){wm.sort(null)})),km=Cm("sort"),Mm=!Im((function(){if(Om)return Om<70;if(!(ym&&ym>3)){if(Am)return!0;if(bm)return bm<603;var e,t,i,n,r="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:i=3;break;case 68:case 71:i=4;break;default:i=2}for(n=0;n<47;n++)wm.push({k:t+n,v:i})}for(wm.sort((function(e,t){return t.v-e.v})),n=0;n<wm.length;n++)t=wm[n].k.charAt(0),r.charAt(r.length-1)!==t&&(r+=t);return"DGBEFHACIJK"!==r}}));mm({target:"Array",proto:!0,forced:Pm||!Lm||!km||!Mm},{sort:function(e){void 0!==e&&Sm(e);var t=Tm(this);if(Mm)return void 0===e?Nm(t):Nm(t,e);var i,n,r=[],o=gm(t);for(n=0;n<o;n++)n in t&&Dm(r,t[n]);for(vm(r,function(e){return function(t,i){return void 0===i?-1:void 0===t?1:void 0!==e?+e(t,i)||0:Rm(t)>Rm(i)?1:-1}}(e)),i=r.length,n=0;n<i;)t[n]=r[n++];for(;n<o;)delete t[n++];return t}});var Um=Hi("Array").sort,xm=u,Vm=Um,Fm=Array.prototype,jm=function(e){var t=e.sort;return e===Fm||xm(Fm,e)&&t===Fm.sort?Vm:t};function Bm(e,t){if("boolean"!=typeof e)throw new EE(_E.INVALID_PARAMS,"Invalid ".concat(t,": The value is of the boolean type."))}function Gm(e,t,i){if(i.includes(e))return;throw new EE(_E.INVALID_PARAMS,"".concat(t," can only be set as ").concat(JSON.stringify(i)))}function Wm(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e4,r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(e<i||e>n||r&&!Qm(e)){throw new EE(_E.INVALID_PARAMS,"invalid ".concat(t,": the value range is [").concat(i,", ").concat(n,"]. integer only"))}}function Hm(e,t){if("number"!=typeof e){if(!(e.min||e.max||e.ideal||e.exact)){throw new EE(_E.INVALID_PARAMS,"".concat(t," is not a valid ConstrainLong"))}void 0!==e.min&&Wm(e.min,"".concat(t,".min"),0,1/0),void 0!==e.max&&Wm(e.max,"".concat(t,".max"),1,1/0),void 0!==e.exact&&Wm(e.exact,"".concat(t,".exact"),1,1/0),void 0!==e.ideal&&Wm(e.ideal,"".concat(t,".ideal"),1,1/0)}else Wm(e,t,1,1/0)}function Km(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:255,r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(null==e)throw new EE(_E.INVALID_PARAMS,"".concat(t||"param"," cannot be empty"));if(!zm(e,i,n,r))throw new EE(_E.INVALID_PARAMS,"Invalid ".concat(t||"string param",": Length of the string: [").concat(i,",").concat(n,"].").concat(r?" ASCII characters only.":""))}function Ym(e,t){if(!Array.isArray(e))throw new EE(_E.INVALID_PARAMS,"".concat(t," should be an array"))}function qm(e){if("string"!=typeof e||!/^[a-zA-Z0-9 \!\#\$\%\&\(\)\+\-\:\;\<\=\.\>\?\@\[\]\^\_\{\}\|\~\,]{1,64}$/.test(e))throw CE.error("Invalid Channel Name ".concat(e)),new EE(_E.INVALID_PARAMS,"The length must be within 64 bytes. The supported characters: a-z,A-Z,0-9,space,!, #, $, %, &, (, ), +, -, :, ;, <, =, ., >, ?, @, [, ], ^, _,  {, }, |, ~, ,")}function Jm(e){if(!(t=e,"number"==typeof t&&Math.floor(t)===t&&0<=t&&t<=4294967295||zm(e,1,255)))throw CE.error("Invalid UID ".concat(e," ").concat(typeof e)),new EE(_E.INVALID_PARAMS,"[String uid] Length of the string: [1,255]. ASCII characters only. [Number uid] The value range is [0,10000]");var t;"string"==typeof e&&CE.warning("You input a string as the user ID, to ensure better end-user experience, Agora highly suggests not using a string as the user ID.")}function Xm(e){return null==e}function zm(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:255,n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return"string"==typeof e&&e.length<=i&&e.length>=t&&(!n||Zm(e))}function Qm(e){return"number"==typeof e&&e%1==0}function Zm(e){if("string"!=typeof e)return!1;for(let t=0;t<e.length;t+=1){const i=e.charCodeAt(t);if(i<0||i>255)return!1}return!0}let $m,ef,tf;!function(e){e.FREE="free",e.UPLOADING="uploading"}($m||($m={})),function(e){e[e.MISC=0]="MISC",e[e.INTERNAL_EVENT=1]="INTERNAL_EVENT",e[e.PUBLIC_EVENT=2]="PUBLIC_EVENT",e[e.WEB_EVENT=3]="WEB_EVENT",e[e.INTERNAL_API=4]="INTERNAL_API",e[e.WEB_API=5]="WEB_API",e[e.PUBLIC_API=6]="PUBLIC_API"}(ef||(ef={})),function(e){e.NONE="none",e.INIT="init",e.CANPLAY="canplay",e.PLAYING="playing",e.PAUSED="paused",e.SUSPEND="suspend",e.STALLED="stalled",e.WAITING="waiting",e.ERROR="error",e.DESTROYED="destroyed",e.ABORT="abort",e.ENDED="ended",e.EMPTIED="emptied",e.LOADEDDATA="loadeddata"}(tf||(tf={}));const nf={uninit:100,none:110,init:120,loadeddata:130,canplay:200,playing:210,paused:220,suspend:300,stalled:310,waiting:320,error:330,destroyed:340,abort:350,ended:360,emptied:370};function rf(e){return Km(e.reportId,"params.reportId",0,100,!1),Km(e.category,"params.category",0,100,!1),Km(e.event,"params.event",0,100,!1),Km(e.label,"params.label",0,100,!1),Wm(e.value,"params.value",Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,!1),!0}const of={sid:"",lts:0,success:null,cname:null,uid:null,peer:null,cid:null,elapse:null,extend:null,vid:0};let sf,af,cf,df,uf,lf,hf,pf,_f,Ef,mf,ff,Sf,Tf,gf,Rf,If,vf,Cf,yf,Af,Of,bf,wf;function Nf(e){return Wm(e.timeout,"config.timeout",0,1e5),Wm(e.timeoutFactor,"config.timeoutFactor",0,100,!1),Wm(e.maxRetryCount,"config.maxRetryConfig",0,1/0),Wm(e.maxRetryTimeout,"config.maxRetryTimeout",0,1/0),!0}function Df(e){return Gm(e.codec,"config.codec",["vp8","vp9","av1","h264"]),Gm(e.mode,"config.mode",["rtc","live"]),void 0!==e.audioCodec&&Gm(e.audioCodec,"config.audioCodec",["opus","pcmu","pcma","g722"]),void 0!==e.proxyServer&&Km(e.proxyServer,"config.proxyServer",1,1e4),void 0!==e.turnServer&&Lf(e.turnServer),void 0!==e.httpRetryConfig&&Nf(e.httpRetryConfig),void 0!==e.websocketRetryConfig&&Nf(e.websocketRetryConfig),!0}function Pf(e){if(!Array.isArray(e)||e.length<1)return!1;try{e.forEach(e=>{if(!e.urls)throw Error()})}catch(e){return!1}return!0}function Lf(e){return Km(e.turnServerURL,"turnServerURL"),Km(e.username,"username"),Km(e.password,"password"),e.udpport&&Wm(e.udpport,"udpport",1,99999,!0),e.forceturn&&Bm(e.forceturn,"forceturn"),e.security&&Bm(e.security,"security"),e.tcpport&&Wm(e.tcpport,"tcpport",1,99999,!0),!0}function kf(e){return void 0!==e.level&&Gm(e.level,"level",[1,2,3]),!0}!function(e){e.PUBLISH="publish",e.SUBSCRIBE="subscribe",e.WS_COMPRESSOR_INIT="ws_compressor_init",e.SESSION_INIT="session_init",e.JOIN_CHOOSE_SERVER="join_choose_server",e.REQ_USER_ACCOUNT="req_user_account",e.JOIN_GATEWAY="join_gateway",e.REJOIN_GATEWAY="rejoin_gateway",e.STREAM_SWITCH="stream_switch",e.REQUEST_PROXY_WORKER_MANAGER="request_proxy_worker_manager",e.REQUEST_PROXY_APPCENTER="request_proxy_appcenter",e.FIRST_VIDEO_RECEIVED="first_video_received",e.FIRST_AUDIO_RECEIVED="first_audio_received",e.FIRST_VIDEO_DECODE="first_video_decode",e.FIRST_AUDIO_DECODE="first_audio_decode",e.ON_ADD_AUDIO_STREAM="on_add_audio_stream",e.ON_ADD_VIDEO_STREAM="on_add_video_stream",e.ON_UPDATE_STREAM="on_update_stream",e.ON_REMOVE_STREAM="on_remove_stream",e.USER_ANALYTICS="req_user_analytics"}(sf||(sf={})),function(e){e.SESSION="io.agora.pb.Wrtc.Session",e.JOIN_CHOOSE_SERVER="io.agora.pb.Wrtc.JoinChooseServer",e.REQ_USER_ACCOUNT="io.agora.pb.Wrtc.ReqUserAccount",e.JOIN_GATEWAY="io.agora.pb.Wrtc.JoinGateway",e.RE_JOIN_GATEWAY="io.agora.pb.Wrtc.ReJoinGateway",e.PUBLISH="io.agora.pb.Wrtc.Publish",e.SUBSCRIBE="io.agora.pb.Wrtc.Subscribe",e.WS_COMPRESSOR_INIT="io.agora.pb.Wrtc.WsCompressorInit",e.STREAM_SWITCH="io.agora.pb.Wrtc.StreamSwitch",e.AUDIO_SENDING_STOPPED="io.agora.pb.Wrtc.AudioSendingStopped",e.VIDEO_SENDING_STOPPED="io.agora.pb.Wrtc.VideoSendingStopped",e.REQUEST_PROXY_APPCENTER="io.agora.pb.Wrtc.RequestProxyAppCenter",e.REQUEST_PROXY_WORKER_MANAGER="io.agora.pb.Wrtc.RequestProxyWorkerManager",e.API_INVOKE="io.agora.pb.Wrtc.ApiInvoke",e.FIRST_VIDEO_RECEIVED="io.agora.pb.Wrtc.FirstVideoReceived",e.FIRST_AUDIO_RECEIVED="io.agora.pb.Wrtc.FirstAudioReceived",e.FIRST_VIDEO_DECODE="io.agora.pb.Wrtc.FirstVideoDecode",e.FIRST_AUDIO_DECODE="io.agora.pb.Wrtc.FirstAudioDecode",e.ON_ADD_AUDIO_STREAM="io.agora.pb.Wrtc.OnAddAudioStream",e.ON_ADD_VIDEO_STREAM="io.agora.pb.Wrtc.OnAddVideoStream",e.ON_UPDATE_STREAM="io.agora.pb.Wrtc.OnUpdateStream",e.ON_REMOVE_STREAM="io.agora.pb.Wrtc.OnRemoveStream",e.JOIN_CHANNEL_TIMEOUT="io.agora.pb.Wrtc.JoinChannelTimeout",e.PEER_PUBLISH_STATUS="io.agora.pb.Wrtc.PeerPublishStatus",e.WORKER_EVENT="io.agora.pb.Wrtc.WorkerEvent",e.AP_WORKER_EVENT="io.agora.pb.Wrtc.APWorkerEvent",e.JOIN_WEB_PROXY_AP="io.agora.pb.Wrtc.JoinWebProxyAP",e.WEBSOCKET_QUIT="io.agora.pb.Wrtc.WebSocketQuit",e.USER_ANALYTICS="io.agora.pb.Wrtc.UserAnalytics",e.AUTOPLAY_FAILED="io.agora.pb.Wrtc.AutoplayFailed"}(af||(af={})),function(e){e[e.WORKER_EVENT=156]="WORKER_EVENT",e[e.AP_WORKER_EVENT=160]="AP_WORKER_EVENT"}(cf||(cf={})),function(e){e[e.SESSION=26]="SESSION",e[e.JOIN_CHOOSE_SERVER=27]="JOIN_CHOOSE_SERVER",e[e.REQ_USER_ACCOUNT=196]="REQ_USER_ACCOUNT",e[e.JOIN_GATEWAY=28]="JOIN_GATEWAY",e[e.PUBLISH=30]="PUBLISH",e[e.SUBSCRIBE=29]="SUBSCRIBE",e[e.WS_COMPRESSOR_INIT=9430]="WS_COMPRESSOR_INIT",e[e.STREAM_SWITCH=32]="STREAM_SWITCH",e[e.AUDIO_SENDING_STOPPED=33]="AUDIO_SENDING_STOPPED",e[e.VIDEO_SENDING_STOPPED=34]="VIDEO_SENDING_STOPPED",e[e.REQUEST_PROXY_APPCENTER=35]="REQUEST_PROXY_APPCENTER",e[e.REQUEST_PROXY_WORKER_MANAGER=36]="REQUEST_PROXY_WORKER_MANAGER",e[e.API_INVOKE=41]="API_INVOKE",e[e.FIRST_VIDEO_RECEIVED=348]="FIRST_VIDEO_RECEIVED",e[e.FIRST_AUDIO_RECEIVED=349]="FIRST_AUDIO_RECEIVED",e[e.FIRST_VIDEO_DECODE=350]="FIRST_VIDEO_DECODE",e[e.FIRST_AUDIO_DECODE=351]="FIRST_AUDIO_DECODE",e[e.ON_ADD_AUDIO_STREAM=352]="ON_ADD_AUDIO_STREAM",e[e.ON_ADD_VIDEO_STREAM=353]="ON_ADD_VIDEO_STREAM",e[e.ON_UPDATE_STREAM=356]="ON_UPDATE_STREAM",e[e.ON_REMOVE_STREAM=355]="ON_REMOVE_STREAM",e[e.JOIN_CHANNEL_TIMEOUT=407]="JOIN_CHANNEL_TIMEOUT",e[e.PEER_PUBLISH_STATUS=408]="PEER_PUBLISH_STATUS",e[e.WORKER_EVENT=156]="WORKER_EVENT",e[e.AP_WORKER_EVENT=160]="AP_WORKER_EVENT",e[e.JOIN_WEB_PROXY_AP=700]="JOIN_WEB_PROXY_AP",e[e.WEBSOCKET_QUIT=671]="WEBSOCKET_QUIT",e[e.USER_ANALYTICS=1e4]="USER_ANALYTICS",e[e.AUTOPLAY_FAILED=9178]="AUTOPLAY_FAILED"}(df||(df={})),function(e){e.CREATE_CLIENT="createClient",e.CHECK_SYSTEM_REQUIREMENTS="checkSystemRequirements",e.SET_AREA="setArea",e.CHECK_VIDEO_TRACK_IS_ACTIVE="checkVideoTrackIsActive",e.CHECK_AUDIO_TRACK_IS_ACTIVE="checkAudioTrackIsActive",e.CREATE_MIC_AUDIO_TRACK="createMicrophoneAudioTrack",e.CREATE_CUSTOM_AUDIO_TRACK="createCustomAudioTrack",e.CREATE_BUFFER_AUDIO_TRACK="createBufferSourceAudioTrack",e.CREATE_CAM_VIDEO_TRACK="createCameraVideoTrack",e.CREATE_CUSTOM_VIDEO_TRACK="createCustomVideoTrack",e.CREATE_MIC_AND_CAM_TRACKS="createMicrophoneAndCameraTracks",e.CREATE_SCREEN_VIDEO_TRACK="createScreenVideoTrack",e.SET_ENCRYPTION_CONFIG="Client.setEncryptionConfig",e.START_PROXY_SERVER="Client.startProxyServer",e.STOP_PROXY_SERVER="Client.stopProxyServer",e.SET_PROXY_SERVER="Client.setProxyServer",e.SET_TURN_SERVER="Client.setTurnServer",e.SET_CLIENT_ROLE="Client.setClientRole",e.SET_LOW_STREAM_PARAMETER="Client.setLowStreamParameter",e.ENABLE_DUAL_STREAM="Client.enableDualStream",e.DISABLE_DUAL_STREAM="Client.disableDualStream",e.JOIN="Client.join",e.LEAVE="Client.leave",e.PUBLISH="Client.publish",e.UNPUBLISH="Client.unpublish",e.SUBSCRIBE="Client.subscribe",e.MASS_SUBSCRIBE="Client.massSubscribe",e.MASS_UNSUBSCRIBE="Client.massUnsubscribe",e.UNSUBSCRIBE="Client.unsubscribe",e.RENEW_TOKEN="Client.renewToken",e.SET_REMOTE_VIDEO_STREAM_TYPE="Client.setRemoteVideoStreamType",e.SET_STREAM_FALLBACK_OPTION="Client.setStreamFallbackOption",e.ENABLE_AUDIO_VOLUME_INDICATOR="Client.enableAudioVolumeIndicator",e.SEND_CUSTOM_REPORT_MESSAGE="Client.sendCustomReportMessage",e.INSPECT_VIDEO_CONTENT="Client.inspectVideoContent",e.STOP_INSPECT_VIDEO_CONTENT="Client.stopInspectVideoContent",e.JOIN_FALLBACK_TO_PROXY="Client._joinFallbackToProxy",e.DATACHANNEL_FAILBACK="Client._datachannelFailback",e.ON_LIVE_STREAM_WARNING="Client.onLiveStreamWarning",e.ON_LIVE_STREAM_ERROR="Client.onLiveStreamingError",e.START_LIVE_STREAMING="Client.startLiveStreaming",e.SET_LIVE_TRANSCODING="Client.setLiveTranscoding",e.STOP_LIVE_STREAMING="Client.stopLiveStreaming",e.ADD_INJECT_STREAM_URL="Client.addInjectStreamUrl",e.REMOVE_INJECT_STREAM_URL="Client.removeInjectStreamUrl",e.START_CHANNEL_MEDIA_RELAY="Client.startChannelMediaRelay",e.UPDATE_CHANNEL_MEDIA_RELAY="Client.updateChannelMediaRelay",e.STOP_CHANNEL_MEDIA_RELAY="Client.stopChannelMediaRelay",e.REQUEST_CONFIG_DISTRIBUTE="_config-distribute-request",e.SET_CONFIG_DISTRIBUTE="_configDistribute",e.LOCAL_TRACK_SET_MUTED="LocalTrack.setMute",e.LOCAL_AUDIO_TRACK_PLAY="LocalAudioTrack.play",e.LOCAL_AUDIO_TRACK_PLAY_IN_ELEMENT="LocalAudioTrack.playInElement",e.LOCAL_AUDIO_TRACK_STOP="LocalAudioTrack.stop",e.LOCAL_AUDIO_TRACK_SET_VOLUME="LocalAudioTrack.setVolume",e.MIC_AUDIO_TRACK_SET_DEVICE="MicrophoneAudioTrack.setDevice",e.BUFFER_AUDIO_TRACK_START="BufferSourceAudioTrack.startProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_STOP="BufferSourceAudioTrack.stopProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_PAUSE="BufferSourceAudioTrack.pauseProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_RESUME="BufferSourceAudioTrack.resumeProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_SEEK="BufferSourceAudioTrack.seekAudioBuffer",e.LOCAL_VIDEO_TRACK_PLAY="LocalVideoTrack.play",e.LOCAL_VIDEO_TRACK_STOP="LocalVideoTrack.stop",e.LOCAL_VIDEO_TRACK_GET_VIDEO_VISIBLE="LocalVideoTrack.getVideoElementVisibleStatus",e.LOCAL_VIDEO_TRACK_BEAUTY="LocalVideoTrack.setBeautyEffect",e.CAM_VIDEO_TRACK_SET_DEVICE="CameraVideoTrack.setDevice",e.CAM_VIDEO_TRACK_SET_ENCODER_CONFIG="CameraVideoTrack.setEncoderConfiguration",e.REMOTE_VIDEO_TRACK_PLAY="RemoteVideoTrack.play",e.REMOTE_VIDEO_TRACK_STOP="RemoteVideoTrack.stop",e.REMOTE_VIDEO_TRACK_GET_VIDEO_VISIBLE="RemoteVideoTrack.getVideoElementVisibleStatus",e.REMOTE_AUDIO_TRACK_PLAY="RemoteAudioTrack.play",e.REMOTE_AUDIO_TRACK_STOP="RemoteAudioTrack.stop",e.REMOTE_AUDIO_SET_VOLUME="RemoteAudioTrack.setVolume",e.REMOTE_AUDIO_SET_OUTPUT_DEVICE="RemoteAudioTrack.setOutputDevice",e.GET_MEDIA_STREAM_TRACK="Track.getMediaStreamTrack",e.STREAM_TYPE_CHANGE="streamTypeChange",e.CONNECTION_STATE_CHANGE="connectionStateChange",e.LOAD_CONFIG_FROM_LOCALSTORAGE="loadConfigFromLocalStorage"}(uf||(uf={})),function(e){e.TRACER="tracer"}(lf||(lf={})),function(e){e.IDLE="IDLE",e.INITING="INITING",e.INITEND="INITEND"}(hf||(hf={})),function(e){e.STATE_CHANGE="state_change",e.RECORDING_DEVICE_CHANGED="recordingDeviceChanged",e.PLAYOUT_DEVICE_CHANGED="playoutDeviceChanged",e.CAMERA_DEVICE_CHANGED="cameraDeviceChanged"}(pf||(pf={})),function(e){e[e.ACCESS_POINT=101]="ACCESS_POINT",e[e.UNILBS=201]="UNILBS",e[e.STRING_UID_ALLOCATOR=901]="STRING_UID_ALLOCATOR"}(_f||(_f={})),function(e){e[e.IIIEGAL_APPID=1]="IIIEGAL_APPID",e[e.IIIEGAL_UID=2]="IIIEGAL_UID",e[e.INTERNAL_ERROR=3]="INTERNAL_ERROR"}(Ef||(Ef={})),function(e){e[e.INVALID_VENDOR_KEY=5]="INVALID_VENDOR_KEY",e[e.INVALID_CHANNEL_NAME=7]="INVALID_CHANNEL_NAME",e[e.INTERNAL_ERROR=8]="INTERNAL_ERROR",e[e.NO_AUTHORIZED=9]="NO_AUTHORIZED",e[e.DYNAMIC_KEY_TIMEOUT=10]="DYNAMIC_KEY_TIMEOUT",e[e.NO_ACTIVE_STATUS=11]="NO_ACTIVE_STATUS",e[e.DYNAMIC_KEY_EXPIRED=13]="DYNAMIC_KEY_EXPIRED",e[e.STATIC_USE_DYNAMIC_KEY=14]="STATIC_USE_DYNAMIC_KEY",e[e.DYNAMIC_USE_STATIC_KEY=15]="DYNAMIC_USE_STATIC_KEY",e[e.USER_OVERLOAD=16]="USER_OVERLOAD",e[e.FORBIDDEN_REGION=18]="FORBIDDEN_REGION",e[e.CANNOT_MEET_AREA_DEMAND=19]="CANNOT_MEET_AREA_DEMAND"}(mf||(mf={})),function(e){e[e.NO_FLAG_SET=100]="NO_FLAG_SET",e[e.FLAG_SET_BUT_EMPTY=101]="FLAG_SET_BUT_EMPTY",e[e.INVALID_FALG_SET=102]="INVALID_FALG_SET",e[e.FLAG_SET_BUT_NO_RE=103]="FLAG_SET_BUT_NO_RE",e[e.INVALID_SERVICE_ID=104]="INVALID_SERVICE_ID",e[e.NO_SERVICE_AVAILABLE=200]="NO_SERVICE_AVAILABLE",e[e.NO_SERVICE_AVAILABLE_P2P=201]="NO_SERVICE_AVAILABLE_P2P",e[e.NO_SERVICE_AVAILABLE_VOICE=202]="NO_SERVICE_AVAILABLE_VOICE",e[e.NO_SERVICE_AVAILABLE_WEBRTC=203]="NO_SERVICE_AVAILABLE_WEBRTC",e[e.NO_SERVICE_AVAILABLE_CDS=204]="NO_SERVICE_AVAILABLE_CDS",e[e.NO_SERVICE_AVAILABLE_CDN=205]="NO_SERVICE_AVAILABLE_CDN",e[e.NO_SERVICE_AVAILABLE_TDS=206]="NO_SERVICE_AVAILABLE_TDS",e[e.NO_SERVICE_AVAILABLE_REPORT=207]="NO_SERVICE_AVAILABLE_REPORT",e[e.NO_SERVICE_AVAILABLE_APP_CENTER=208]="NO_SERVICE_AVAILABLE_APP_CENTER",e[e.NO_SERVICE_AVAILABLE_ENV0=209]="NO_SERVICE_AVAILABLE_ENV0",e[e.NO_SERVICE_AVAILABLE_VOET=210]="NO_SERVICE_AVAILABLE_VOET",e[e.NO_SERVICE_AVAILABLE_STRING_UID=211]="NO_SERVICE_AVAILABLE_STRING_UID",e[e.NO_SERVICE_AVAILABLE_WEBRTC_UNILBS=212]="NO_SERVICE_AVAILABLE_WEBRTC_UNILBS",e[e.NO_SERVICE_AVAILABLE_UNILBS_FLV=213]="NO_SERVICE_AVAILABLE_UNILBS_FLV"}(ff||(ff={})),function(e){e[e.K_TIMESTAMP_EXPIRED=2]="K_TIMESTAMP_EXPIRED",e[e.K_CHANNEL_PERMISSION_INVALID=3]="K_CHANNEL_PERMISSION_INVALID",e[e.K_CERTIFICATE_INVALID=4]="K_CERTIFICATE_INVALID",e[e.K_CHANNEL_NAME_EMPTY=5]="K_CHANNEL_NAME_EMPTY",e[e.K_CHANNEL_NOT_FOUND=6]="K_CHANNEL_NOT_FOUND",e[e.K_TICKET_INVALID=7]="K_TICKET_INVALID",e[e.K_CHANNEL_CONFLICTED=8]="K_CHANNEL_CONFLICTED",e[e.K_SERVICE_NOT_READY=9]="K_SERVICE_NOT_READY",e[e.K_SERVICE_TOO_HEAVY=10]="K_SERVICE_TOO_HEAVY",e[e.K_UID_BANNED=14]="K_UID_BANNED",e[e.K_IP_BANNED=15]="K_IP_BANNED",e[e.K_CHANNEL_BANNED=16]="K_CHANNEL_BANNED",e[e.WARN_NO_AVAILABLE_CHANNEL=103]="WARN_NO_AVAILABLE_CHANNEL",e[e.WARN_LOOKUP_CHANNEL_TIMEOUT=104]="WARN_LOOKUP_CHANNEL_TIMEOUT",e[e.WARN_LOOKUP_CHANNEL_REJECTED=105]="WARN_LOOKUP_CHANNEL_REJECTED",e[e.WARN_OPEN_CHANNEL_TIMEOUT=106]="WARN_OPEN_CHANNEL_TIMEOUT",e[e.WARN_OPEN_CHANNEL_REJECTED=107]="WARN_OPEN_CHANNEL_REJECTED",e[e.WARN_REQUEST_DEFERRED=108]="WARN_REQUEST_DEFERRED",e[e.ERR_DYNAMIC_KEY_TIMEOUT=109]="ERR_DYNAMIC_KEY_TIMEOUT",e[e.ERR_NO_AUTHORIZED=110]="ERR_NO_AUTHORIZED",e[e.ERR_VOM_SERVICE_UNAVAILABLE=111]="ERR_VOM_SERVICE_UNAVAILABLE",e[e.ERR_NO_CHANNEL_AVAILABLE_CODE=112]="ERR_NO_CHANNEL_AVAILABLE_CODE",e[e.ERR_MASTER_VOCS_UNAVAILABLE=114]="ERR_MASTER_VOCS_UNAVAILABLE",e[e.ERR_INTERNAL_ERROR=115]="ERR_INTERNAL_ERROR",e[e.ERR_NO_ACTIVE_STATUS=116]="ERR_NO_ACTIVE_STATUS",e[e.ERR_INVALID_UID=117]="ERR_INVALID_UID",e[e.ERR_DYNAMIC_KEY_EXPIRED=118]="ERR_DYNAMIC_KEY_EXPIRED",e[e.ERR_STATIC_USE_DYANMIC_KE=119]="ERR_STATIC_USE_DYANMIC_KE",e[e.ERR_DYNAMIC_USE_STATIC_KE=120]="ERR_DYNAMIC_USE_STATIC_KE",e[e.ERR_NO_VOCS_AVAILABLE=2e3]="ERR_NO_VOCS_AVAILABLE",e[e.ERR_NO_VOS_AVAILABLE=2001]="ERR_NO_VOS_AVAILABLE",e[e.ERR_JOIN_CHANNEL_TIMEOUT=2002]="ERR_JOIN_CHANNEL_TIMEOUT",e[e.ERR_REPEAT_JOIN_CHANNEL=2003]="ERR_REPEAT_JOIN_CHANNEL",e[e.ERR_JOIN_BY_MULTI_IP=2004]="ERR_JOIN_BY_MULTI_IP",e[e.ERR_NOT_JOINED=2011]="ERR_NOT_JOINED",e[e.ERR_REPEAT_JOIN_REQUEST=2012]="ERR_REPEAT_JOIN_REQUEST",e[e.ERR_INVALID_VENDOR_KEY=2013]="ERR_INVALID_VENDOR_KEY",e[e.ERR_INVALID_CHANNEL_NAME=2014]="ERR_INVALID_CHANNEL_NAME",e[e.ERR_INVALID_STRINGUID=2015]="ERR_INVALID_STRINGUID",e[e.ERR_TOO_MANY_USERS=2016]="ERR_TOO_MANY_USERS",e[e.ERR_SET_CLIENT_ROLE_TIMEOUT=2017]="ERR_SET_CLIENT_ROLE_TIMEOUT",e[e.ERR_SET_CLIENT_ROLE_NO_PERMISSION=2018]="ERR_SET_CLIENT_ROLE_NO_PERMISSION",e[e.ERR_SET_CLIENT_ROLE_ALREADY_IN_USE=2019]="ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",e[e.ERR_PUBLISH_REQUEST_INVALID=2020]="ERR_PUBLISH_REQUEST_INVALID",e[e.ERR_SUBSCRIBE_REQUEST_INVALID=2021]="ERR_SUBSCRIBE_REQUEST_INVALID",e[e.ERR_NOT_SUPPORTED_MESSAGE=2022]="ERR_NOT_SUPPORTED_MESSAGE",e[e.ERR_ILLEAGAL_PLUGIN=2023]="ERR_ILLEAGAL_PLUGIN",e[e.ERR_REJOIN_TOKEN_INVALID=2024]="ERR_REJOIN_TOKEN_INVALID",e[e.ERR_REJOIN_USER_NOT_JOINED=2025]="ERR_REJOIN_USER_NOT_JOINED",e[e.ERR_INVALID_OPTIONAL_INFO=2027]="ERR_INVALID_OPTIONAL_INFO",e[e.ILLEGAL_AES_PASSWORD=2028]="ILLEGAL_AES_PASSWORD",e[e.ILLEGAL_CLIENT_ROLE_LEVEL=2029]="ILLEGAL_CLIENT_ROLE_LEVEL",e[e.ERR_TOO_MANY_BROADCASTERS=2031]="ERR_TOO_MANY_BROADCASTERS",e[e.ERR_TOO_MANY_SUBSCRIBERS=2032]="ERR_TOO_MANY_SUBSCRIBERS",e[e.ERR_LICENSE_MISSING=32769]="ERR_LICENSE_MISSING",e[e.ERR_LICENSE_EXPIRED=32771]="ERR_LICENSE_EXPIRED",e[e.ERR_LICENSE_MINUTES_EXCEEDED=32773]="ERR_LICENSE_MINUTES_EXCEEDED",e[e.ERR_LICENSE_PERIOD_INVALID=32774]="ERR_LICENSE_PERIOD_INVALID",e[e.ERR_LICENSE_MULTIPLE_SDK_SERVICE=32778]="ERR_LICENSE_MULTIPLE_SDK_SERVICE",e[e.ERR_LICENSE_ILLEGAL=32783]="ERR_LICENSE_ILLEGAL",e[e.ERR_TEST_RECOVER=9e3]="ERR_TEST_RECOVER",e[e.ERR_TEST_TRYNEXT=9001]="ERR_TEST_TRYNEXT",e[e.ERR_TEST_RETRY=9002]="ERR_TEST_RETRY"}(Sf||(Sf={})),function(e){e[e.AUDIENCE_LEVEL_LOW_LATENCY=1]="AUDIENCE_LEVEL_LOW_LATENCY",e[e.AUDIENCE_LEVEL_ULTRA_LOW_LATENCY=2]="AUDIENCE_LEVEL_ULTRA_LOW_LATENCY",e[e.AUDIENCE_LEVEL_SYNC_LATENCY=3]="AUDIENCE_LEVEL_SYNC_LATENCY"}(Tf||(Tf={})),function(e){e.LEAVE="LEAVE",e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.UID_BANNED="UID_BANNED",e.IP_BANNED="IP_BANNED",e.CHANNEL_BANNED="CHANNEL_BANNED",e.FALLBACK="FALLBACK",e.LICENSE_MISSING="LICENSE_MISSING",e.LICENSE_EXPIRED="LICENSE_EXPIRED",e.LICENSE_MINUTES_EXCEEDED="LICENSE_MINUTES_EXCEEDED",e.LICENSE_PERIOD_INVALID="LICENSE_PERIOD_INVALID",e.LICENSE_MULTIPLE_SDK_SERVICE="LICENSE_MULTIPLE_SDK_SERVICE",e.LICENSE_ILLEGAL="LICENSE_ILLEGAL"}(gf||(gf={})),function(e){e.CONNECTION_STATE_CHANGE="connection-state-change",e.MEDIA_RECONNECT_START="media-reconnect-start",e.MEDIA_RECONNECT_END="media-reconnect-end",e.IS_USING_CLOUD_PROXY="is-using-cloud-proxy",e.USER_JOINED="user-joined",e.USER_LEAVED="user-left",e.USER_PUBLISHED="user-published",e.USER_UNPUBLISHED="user-unpublished",e.USER_INFO_UPDATED="user-info-updated",e.CLIENT_BANNED="client-banned",e.CHANNEL_MEDIA_RELAY_STATE="channel-media-relay-state",e.CHANNEL_MEDIA_RELAY_EVENT="channel-media-relay-event",e.VOLUME_INDICATOR="volume-indicator",e.CRYPT_ERROR="crypt-error",e.ON_TOKEN_PRIVILEGE_WILL_EXPIRE="token-privilege-will-expire",e.ON_TOKEN_PRIVILEGE_DID_EXPIRE="token-privilege-did-expire",e.NETWORK_QUALITY="network-quality",e.STREAM_TYPE_CHANGED="stream-type-changed",e.STREAM_FALLBACK="stream-fallback",e.RECEIVE_METADATA="receive-metadata",e.STREAM_MESSAGE="stream-message",e.LIVE_STREAMING_ERROR="live-streaming-error",e.LIVE_STREAMING_WARNING="live-streaming-warning",e.INJECT_STREAM_STATUS="stream-inject-status",e.EXCEPTION="exception",e.ERROR="error",e.P2P_LOST="p2p_lost",e.JOIN_FALLBACK_TO_PROXY="join-fallback-to-proxy",e.CHANNEL_FALLBACK_TO_WEBSOCKET="channel-fallback-to-websocket",e.MEDIA_CONNECTION_TYPE_CHANGE="media-connection-type-change",e.PUBLISHED_USER_LIST="published-user-list",e.CONTENT_INSPECT_CONNECTION_STATE_CHANGE="content-inspect-connection-state-change",e.CONTENT_INSPECT_ERROR="content-inspect-error",e.CONTENT_INSPECT_RESULT="content-inspect-result"}(Rf||(Rf={})),function(e){e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.MULTI_IP="MULTI_IP",e.TIMEOUT="TIMEOUT",e.OFFLINE="OFFLINE",e.LEAVE="LEAVE",e.P2P_FAILED="P2P_FAILED",e.FALLBACK="FALLBACK"}(If||(If={})),function(e){e.CONNECTING="connecting",e.CONNECTED="connected",e.RECONNECTING="reconnecting",e.CLOSED="closed"}(vf||(vf={})),function(e){e.WS_CONNECTED="ws_connected",e.WS_RECONNECTING="ws_reconnecting",e.WS_CLOSED="ws_closed",e.WS_RECONNECT_WAITTING_FINISH="ws_reconnect_waitting_finish",e.WS_RECONNECT_CREATE_CONNECTION="ws_reconnect_create_connection",e.ON_BINARY_DATA="on_binary_data",e.REQUEST_RECOVER="request_recover",e.REQUEST_JOIN_INFO="request_join_info",e.REQUEST_REJOIN_INFO="req_rejoin_info",e.IS_P2P_DISCONNECTED="is_p2p_dis",e.DISCONNECT_P2P="dis_p2p",e.ABORT_P2P_EXECUTION="abort_p2p_execution",e.NEED_RENEW_SESSION="need-sid",e.REPORT_JOIN_GATEWAY="report_join_gateway",e.REQUEST_TIMEOUT="request_timeout",e.REQUEST_SUCCESS="request_success",e.JOIN_RESPONSE="join_response",e.DATACHANNEL_PRECONNECT="datachannel_preconnect",e.DATACHANNEL_CONNECTING="datachannel_connecting",e.DATACHANNEL_FAILBACK="datachannel_failback"}(Cf||(Cf={})),function(e){e.PING="ping",e.PING_BACK="ping_back",e.JOIN="join_v3",e.REJOIN="rejoin_v3",e.LEAVE="leave",e.SET_CLIENT_ROLE="set_client_role",e.PUBLISH="publish",e.UNPUBLISH="unpublish",e.SUBSCRIBE="subscribe",e.SUBSCRIBE_STREAMS="subscribe_streams",e.UNSUBSCRIBE="unsubscribe",e.UNSUBSCRIBE_STREAMS="unsubscribe_streams",e.SUBSCRIBE_CHANGE="subscribe_change",e.TRAFFIC_STATS="traffic_stats",e.RENEW_TOKEN="renew_token",e.SWITCH_VIDEO_STREAM="switch_video_stream",e.DEFAULT_VIDEO_STREAM="default_video_stream",e.SET_FALLBACK_OPTION="set_fallback_option",e.GATEWAY_INFO="gateway_info",e.CONTROL="control",e.SEND_METADATA="send_metadata",e.DATA_STREAM="data_stream",e.PICK_SVC_LAYER="pick_svc_layer",e.RESTART_ICE="restart_ice",e.CONNECT_PC="connect_pc",e.SET_VIDEO_PROFILE="set_video_profile",e.SET_PARAMETER="set_parameter"}(yf||(yf={})),function(e){e.PUBLISH_STATS="publish_stats",e.PUBLISH_RELATED_STATS="publish_related_stats",e.SUBSCRIBE_STATS="subscribe_stats",e.SUBSCRIBE_RELATED_STATS="subscribe_related_stats",e.WS_INFLATE_DATA_LENGTH="ws_inflate_data_length",e.DENOISER_STATS="denoiser_stats",e.TRANSPORT_STATS="transport_stats",e.EXTENSION_USAGE_STATS="extension_usage_stats"}(Af||(Af={})),function(e){e.ON_USER_ONLINE="on_user_online",e.ON_USER_OFFLINE="on_user_offline",e.ON_STREAM_FALLBACK_UPDATE="on_stream_fallback_update",e.ON_PUBLISH_STREAM="on_publish_stream",e.ON_UPLINK_STATS="on_uplink_stats",e.ON_P2P_LOST="on_p2p_lost",e.ON_REMOVE_STREAM="on_remove_stream",e.ON_ADD_AUDIO_STREAM="on_add_audio_stream",e.ON_ADD_VIDEO_STREAM="on_add_video_stream",e.ON_TOKEN_PRIVILEGE_WILL_EXPIRE="on_token_privilege_will_expire",e.ON_TOKEN_PRIVILEGE_DID_EXPIRE="on_token_privilege_did_expire",e.ON_USER_BANNED="on_user_banned",e.ON_USER_LICENSE_BANNED="on_user_license_banned",e.ON_NOTIFICATION="on_notification",e.ON_CRYPT_ERROR="on_crypt_error",e.MUTE_AUDIO="mute_audio",e.MUTE_VIDEO="mute_video",e.UNMUTE_AUDIO="unmute_audio",e.UNMUTE_VIDEO="unmute_video",e.ON_P2P_OK="on_p2p_ok",e.RECEIVE_METADATA="receive_metadata",e.ON_DATA_STREAM="on_data_stream",e.ENABLE_LOCAL_VIDEO="enable_local_video",e.DISABLE_LOCAL_VIDEO="disable_local_video",e.ENABLE_LOCAL_AUDIO="enable_local_audio",e.DISABLE_LOCAL_AUDIO="disable_local_audio",e.ON_PUBLISHED_USER_LIST="on_published_user_list"}(Of||(Of={})),function(e){e.CONNECTION_STATE_CHANGE="CONNECTION_STATE_CHANGE",e.NEED_ANSWER="NEED_ANSWER",e.NEED_RENEGOTIATE="NEED_RENEGOTIATE",e.P2P_LOST="P2P_LOST",e.GATEWAY_P2P_LOST="GATEWAY_P2P_LOST",e.NEED_UNPUB="NEED_UNPUB",e.NEED_UNSUB="NEED_UNSUB",e.NEED_UPLOAD="NEED_UPLOAD",e.NEED_CONTROL="NEED_CONTROL",e.START_RECONNECT="START_RECONNECT",e.END_RECONNECT="END_RECONNECT",e.NEED_SIGNAL_RTT="NEED_SIGNAL_RTT"}(bf||(bf={})),function(e){e.AUDIO_SOURCE_STATE_CHANGE="audio_source_state_change",e.RECEIVE_TRACK_BUFFER="receive_track_buffer",e.ON_AUDIO_BUFFER="on_audio_buffer",e.UPDATE_SOURCE="update_source"}(wf||(wf={}));const Mf={sendVolumeLevel:0,sendBitrate:0,sendBytes:0,sendPackets:0,sendPacketsLost:0,currentPacketLossRate:0},Uf={sendBytes:0,sendBitrate:0,sendPackets:0,sendPacketsLost:0,sendResolutionHeight:0,sendResolutionWidth:0,captureResolutionHeight:0,captureResolutionWidth:0,targetSendBitrate:0,totalDuration:0,totalFreezeTime:0,currentPacketLossRate:0},xf={transportDelay:0,end2EndDelay:0,receiveBitrate:0,receiveLevel:0,receiveBytes:0,receiveDelay:0,receivePackets:0,receivePacketsLost:0,totalDuration:0,totalFreezeTime:0,freezeRate:0,packetLossRate:0,currentPacketLossRate:0,publishDuration:-1},Vf={uplinkNetworkQuality:0,downlinkNetworkQuality:0},Ff={transportDelay:0,end2EndDelay:0,receiveBitrate:0,receiveBytes:0,receiveDelay:0,receivePackets:0,receivePacketsLost:0,receiveResolutionHeight:0,receiveResolutionWidth:0,totalDuration:0,totalFreezeTime:0,freezeRate:0,packetLossRate:0,currentPacketLossRate:0,publishDuration:-1};let jf,Bf,Gf;!function(e){e.CONNECTED="websocket:connected",e.RECONNECTING="websocket:reconnecting",e.WILL_RECONNECT="websocket:will_reconnect",e.CLOSED="websocket:closed",e.FAILED="websocket:failed",e.ON_MESSAGE="websocket:on_message",e.REQUEST_NEW_URLS="websocket:request_new_urls",e.RECONNECT_WAITTING_FINISH="websocket:reconnect_waitting_finish",e.RECONNECT_CREATE_CONNECTION="websocket:reconnect_create_connection",e.ON_TOKEN_PRIVILEGE_DID_EXPIRE="websocket:on_token_privilege_did_expire"}(jf||(jf={})),function(e){e.TRANSCODE="mix_streaming",e.RAW="raw_streaming",e.INJECT="inject_streaming"}(Bf||(Bf={})),function(e){e[e.INJECT_STREAM_STATUS_START_SUCCESS=0]="INJECT_STREAM_STATUS_START_SUCCESS",e[e.INJECT_STREAM_STATUS_START_ALREADY_EXISTS=1]="INJECT_STREAM_STATUS_START_ALREADY_EXISTS",e[e.INJECT_STREAM_STATUS_START_UNAUTHORIZED=2]="INJECT_STREAM_STATUS_START_UNAUTHORIZED",e[e.INJECT_STREAM_STATUS_START_TIMEOUT=3]="INJECT_STREAM_STATUS_START_TIMEOUT",e[e.INJECT_STREAM_STATUS_START_FAILED=4]="INJECT_STREAM_STATUS_START_FAILED",e[e.INJECT_STREAM_STATUS_STOP_SUCCESS=5]="INJECT_STREAM_STATUS_STOP_SUCCESS",e[e.INJECT_STREAM_STATUS_STOP_NOT_FOUND=6]="INJECT_STREAM_STATUS_STOP_NOT_FOUND",e[e.INJECT_STREAM_STATUS_STOP_UNAUTHORIZED=7]="INJECT_STREAM_STATUS_STOP_UNAUTHORIZED",e[e.INJECT_STREAM_STATUS_STOP_TIMEOUT=8]="INJECT_STREAM_STATUS_STOP_TIMEOUT",e[e.INJECT_STREAM_STATUS_STOP_FAILED=9]="INJECT_STREAM_STATUS_STOP_FAILED",e[e.INJECT_STREAM_STATUS_BROKEN=10]="INJECT_STREAM_STATUS_BROKEN"}(Gf||(Gf={}));const Wf={alpha:1,height:640,width:360,x:0,y:0,zOrder:0,audioChannel:0},Hf={x:0,y:0,width:160,height:160,zOrder:255,alpha:1};function Kf(e,t){Km(e.url,"".concat(t,".url"),1,1e3,!1),Xm(e.x)||Wm(e.x,"".concat(t,".x"),0,1e4),Xm(e.y)||Wm(e.y,"".concat(t,".y"),0,1e4),Xm(e.width)||Wm(e.width,"".concat(t,".width"),0,1e4),Xm(e.height)||Wm(e.height,"".concat(t,".height"),0,1e4),Xm(e.zOrder)||Wm(e.zOrder,"".concat(t,".zOrder"),0,255),Xm(e.alpha)||Wm(e.alpha,"".concat(t,".alpha"),0,1,!1)}const Yf={audioBitrate:48,audioChannels:1,audioSampleRate:48e3,backgroundColor:0,height:360,lowLatency:!1,videoBitrate:400,videoCodecProfile:100,videoCodecType:1,videoFrameRate:15,videoGop:30,width:640,images:[],userConfigs:[],userConfigExtraInfo:""},qf={audioBitrate:48,audioChannels:2,audioVolume:100,audioSampleRate:48e3,height:0,width:0,videoBitrate:400,videoFramerate:15,videoGop:30};let Jf,Xf,zf,Qf,Zf,$f,eS,tS,iS,nS,rS,oS,sS,aS,cS,dS,uS,lS,hS;function pS(e){if(!e.channelName)throw new EE(_E.INVALID_PARAMS,"invalid channelName in info");if("number"!=typeof e.uid)throw new EE(_E.INVALID_PARAMS,"invalid uid in info, uid must be a number");return e.token&&Km(e.token,"info.token",1,2047),Jm(e.uid),qm(e.channelName),!0}function _S(e){return Gm(e,"mediaSource",["screen","window","application"]),!0}!function(e){e.WARNING="@live_uap-warning",e.ERROR="@line_uap-error",e.PUBLISH_STREAM_STATUS="@live_uap-publish-status",e.INJECT_STREAM_STATUS="@live_uap-inject-status",e.WORKER_STATUS="@live_uap-worker-status",e.REQUEST_NEW_ADDRESS="@live_uap-request-address"}(Jf||(Jf={})),function(e){e.REQUEST_WORKER_MANAGER_LIST="@live_req_worker_manager"}(Xf||(Xf={})),function(e){e[e.LIVE_STREAM_RESPONSE_SUCCEED=200]="LIVE_STREAM_RESPONSE_SUCCEED",e[e.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM=454]="LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM",e[e.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR=450]="LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR",e[e.LIVE_STREAM_RESPONSE_BAD_STREAM=451]="LIVE_STREAM_RESPONSE_BAD_STREAM",e[e.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR=400]="LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR",e[e.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST=404]="LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST",e[e.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED=456]="LIVE_STREAM_RESPONSE_NOT_AUTHORIZED",e[e.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE=457]="LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE",e[e.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN=429]="LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN",e[e.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH=452]="LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH",e[e.LIVE_STREAM_RESPONSE_NOT_SUPPORTED=453]="LIVE_STREAM_RESPONSE_NOT_SUPPORTED",e[e.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM=455]="LIVE_STREAM_RESPONSE_MAX_STREAM_NUM",e[e.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR=500]="LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR",e[e.LIVE_STREAM_RESPONSE_WORKER_LOST=501]="LIVE_STREAM_RESPONSE_WORKER_LOST",e[e.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT=502]="LIVE_STREAM_RESPONSE_RESOURCE_LIMIT",e[e.LIVE_STREAM_RESPONSE_WORKER_QUIT=503]="LIVE_STREAM_RESPONSE_WORKER_QUIT",e[e.ERROR_FAIL_SEND_MESSAGE=504]="ERROR_FAIL_SEND_MESSAGE",e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE=30]="PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE",e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT=31]="PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT",e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH=32]="PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH",e[e.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN=33]="PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN"}(zf||(zf={})),function(e){e.CONNECT_FAILED="connect failed",e.CONNECT_TIMEOUT="connect timeout",e.WS_DISCONNECTED="websocket disconnected",e.REQUEST_TIMEOUT="request timeout",e.REQUEST_FAILED="request failed",e.WAIT_STATUS_TIMEOUT="wait status timeout",e.WAIT_STATUS_ERROR="wait status error",e.BAD_STATE="bad state",e.WS_ABORT="ws abort",e.AP_REQUEST_TIMEOUT="AP request timeout",e.AP_JSON_PARSE_ERROR="AP json parse error",e.AP_REQUEST_ERROR="AP request error",e.AP_REQUEST_ABORT="AP request abort"}(Qf||(Qf={})),function(e){e[e.SetSdkProfile=0]="SetSdkProfile",e[e.SetSourceChannel=1]="SetSourceChannel",e[e.SetSourceUserId=2]="SetSourceUserId",e[e.SetDestChannel=3]="SetDestChannel",e[e.StartPacketTransfer=4]="StartPacketTransfer",e[e.StopPacketTransfer=5]="StopPacketTransfer",e[e.UpdateDestChannel=6]="UpdateDestChannel",e[e.Reconnect=7]="Reconnect",e[e.SetVideoProfile=8]="SetVideoProfile"}(Zf||(Zf={})),function(e){e.NETWORK_DISCONNECTED="NETWORK_DISCONNECTED",e.NETWORK_CONNECTED="NETWORK_CONNECTED",e.PACKET_JOINED_SRC_CHANNEL="PACKET_JOINED_SRC_CHANNEL",e.PACKET_JOINED_DEST_CHANNEL="PACKET_JOINED_DEST_CHANNEL",e.PACKET_SENT_TO_DEST_CHANNEL="PACKET_SENT_TO_DEST_CHANNEL",e.PACKET_RECEIVED_VIDEO_FROM_SRC="PACKET_RECEIVED_VIDEO_FROM_SRC",e.PACKET_RECEIVED_AUDIO_FROM_SRC="PACKET_RECEIVED_AUDIO_FROM_SRC",e.PACKET_UPDATE_DEST_CHANNEL="PACKET_UPDATE_DEST_CHANNEL",e.PACKET_UPDATE_DEST_CHANNEL_REFUSED="PACKET_UPDATE_DEST_CHANNEL_REFUSED",e.PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE="PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE"}($f||($f={})),function(e){e.RELAY_STATE_IDLE="RELAY_STATE_IDLE",e.RELAY_STATE_CONNECTING="RELAY_STATE_CONNECTING",e.RELAY_STATE_RUNNING="RELAY_STATE_RUNNING",e.RELAY_STATE_FAILURE="RELAY_STATE_FAILURE"}(eS||(eS={})),function(e){e.RELAY_OK="RELAY_OK",e.SERVER_CONNECTION_LOST="SERVER_CONNECTION_LOST",e.SRC_TOKEN_EXPIRED="SRC_TOKEN_EXPIRED",e.DEST_TOKEN_EXPIRED="DEST_TOKEN_EXPIRED"}(tS||(tS={})),function(e){e.High="high",e.Low="low",e.Audio="audio",e.Screen="screen",e.ScreenLow="screen_low"}(iS||(iS={})),function(e){e.DISCONNECT="disconnect",e.CONNECTION_STATE_CHANGE="connection-state-change",e.NETWORK_QUALITY="network-quality",e.STREAM_TYPE_CHANGE="stream-type-change",e.IS_P2P_DISCONNECTED="is-p2p-dis",e.DISCONNECT_P2P="dis-p2p",e.REQUEST_NEW_GATEWAY_LIST="req-gate-url",e.NEED_RENEW_SESSION="need-sid",e.REQUEST_P2P_CONNECTION_PARAMS="request-p2p-connection-params",e.JOIN_RESPONSE="join-response",e.REQUEST_DC_CONNECTION_PARAMS="request-dc-connection-params",e.RESET_CONNECTION_EVENTS="reset-connection-events",e.DATACHANNEL_PRECONNECT="datachannel_preconnect",e.DATACHANNEL_FAILBACK="datachannel_failback",e.RESET_SIGNAL="reset-signal"}(nS||(nS={})),function(e){e[e.Nothing=0]="Nothing",e[e.Audio=1]="Audio",e[e.LwoVideo=2]="LwoVideo",e[e.Video=4]="Video",e[e.Data=8]="Data"}(rS||(rS={})),function(e){e[e.websocket=0]="websocket",e[e.datachannel=1]="datachannel"}(oS||(oS={})),function(e){e.NEED_RENEGOTIATE="@need_renegotiate",e.NEED_REPLACE_TRACK="@need_replace_track",e.NEED_CLOSE="@need_close",e.NEED_ENABLE_TRACK="@need_enable_track",e.NEED_DISABLE_TRACK="@need_disable_track",e.NEED_SESSION_ID="@need_sid",e.SET_OPTIMIZATION_MODE="@set_optimization_mode",e.GET_STATS="@get_stats",e.GET_LOW_VIDEO_TRACK="@get_low_video_track",e.NEED_RESET_REMOTE_SDP="@need_reset_remote_sdp",e.NEED_UPDATE_VIDEO_ENCODER="@need_update_video_encoder",e.NEED_MUTE_TRACK="@need_mute_track",e.NEED_UNMUTE_TRACK="@need_unmute_track"}(sS||(sS={})),function(e){e.SCREEN_TRACK="screen_track",e.LOW_STREAM="low_stream"}(aS||(aS={})),function(e){e[e.HIGH_STREAM=0]="HIGH_STREAM",e[e.LOW_STREAM=1]="LOW_STREAM"}(cS||(cS={})),function(e){e[e.DISABLE=0]="DISABLE",e[e.LOW_STREAM=1]="LOW_STREAM",e[e.AUDIO_ONLY=2]="AUDIO_ONLY"}(dS||(dS={})),function(e){e.SOURCE_STATE_CHANGE="source-state-change",e.TRACK_ENDED="track-ended",e.BEAUTY_EFFECT_OVERLOAD="beauty-effect-overload",e.VIDEO_ELEMENT_VISIBLE_STATUS="video-element-visible-status",e.CLOSED="closed"}(uS||(uS={})),function(e){e.FIRST_FRAME_DECODED="first-frame-decoded",e.VIDEO_ELEMENT_VISIBLE_STATUS="video-element-visible-status"}(lS||(lS={})),function(e){e.CHINA="CHINA",e.ASIA="ASIA",e.NORTH_AMERICA="NORTH_AMERICA",e.EUROPE="EUROPE",e.JAPAN="JAPAN",e.INDIA="INDIA",e.KOREA="KOREA",e.HKMC="HKMC",e.US="US",e.OCEANIA="OCEANIA",e.SOUTH_AMERICA="SOUTH_AMERICA",e.AFRICA="AFRICA",e.OVERSEA="OVERSEA",e.GLOBAL="GLOBAL",e.EXTENSIONS="EXTENSIONS"}(hS||(hS={}));const ES=[hS.AFRICA,hS.ASIA,hS.CHINA,hS.EUROPE,hS.GLOBAL,hS.INDIA,hS.JAPAN,hS.NORTH_AMERICA,hS.OCEANIA,hS.OVERSEA,hS.SOUTH_AMERICA];let mS;!function(e){e.CHINA="CN",e.ASIA="AS",e.NORTH_AMERICA="NA",e.EUROPE="EU",e.JAPAN="JP",e.INDIA="IN",e.KOREA="KR",e.HKMC="HK",e.US="US",e.OCEANIA="OC",e.SOUTH_AMERICA="SA",e.AFRICA="AF",e.OVERSEA="OVERSEA",e.GLOBAL="GLOBAL",e.EXTENSIONS="GLOBAL"}(mS||(mS={}));const fS={CHINA:{},ASIA:{CODE:mS.ASIA,WEBCS_DOMAIN:["ap-web-1-asia.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-asia.agora.io"],PROXY_CS:["proxy-ap-web-asia.agora.io"],CDS_AP:["cds-ap-web-asia.agora.io","cds-ap-web-asia2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-asia.agora.io","sua-ap-web-asia2.agora.io"],UAP_AP:["uap-ap-web-asia.agora.io","uap-ap-web-asia2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-asia.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-asia.agora.io"],LOG_UPLOAD_SERVER:["logservice-asia.agora.io"],PROXY_SERVER_TYPE3:["southeast-asia.webrtc-cloud-proxy.sd-rtn.com"]},NORTH_AMERICA:{CODE:mS.NORTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-north-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-north-america.agora.io"],PROXY_CS:["proxy-ap-web-america.agora.io"],CDS_AP:["cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],UAP_AP:["uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-north-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-north-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-north-america.agora.io"],PROXY_SERVER_TYPE3:["east-usa.webrtc-cloud-proxy.sd-rtn.com"]},EUROPE:{CODE:mS.EUROPE,WEBCS_DOMAIN:["ap-web-1-europe.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-europe.agora.io"],PROXY_CS:["proxy-ap-web-europe.agora.io"],CDS_AP:["cds-ap-web-europe.agora.io","cds-ap-web-europe2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-europe.agora.io","sua-ap-web-europe.agora.io"],UAP_AP:["uap-ap-web-europe.agora.io","uap-ap-web-europe2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-europe.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-europe.agora.io"],LOG_UPLOAD_SERVER:["logservice-europe.agora.io"],PROXY_SERVER_TYPE3:["europe.webrtc-cloud-proxy.sd-rtn.com"]},JAPAN:{CODE:mS.JAPAN,WEBCS_DOMAIN:["ap-web-1-japan.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-japan.agora.io"],PROXY_CS:["proxy-ap-web-japan.agora.io"],CDS_AP:["cds-ap-web-japan.agora.io","cds-ap-web-japan2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-japan.agora.io","sua-ap-web-japan2.agora.io"],UAP_AP:["uap-ap-web-japan.agora.io","\tuap-ap-web-japan2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-japan.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-japan.agora.io"],LOG_UPLOAD_SERVER:["logservice-japan.agora.io"],PROXY_SERVER_TYPE3:["japan.webrtc-cloud-proxy.sd-rtn.com"]},INDIA:{CODE:mS.INDIA,WEBCS_DOMAIN:["ap-web-1-india.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-india.agora.io"],PROXY_CS:["proxy-ap-web-india.agora.io"],CDS_AP:["cds-ap-web-india.agora.io","cds-ap-web-india2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-india.agora.io","sua-ap-web-india2.agora.io"],UAP_AP:["uap-ap-web-india.agora.io","uap-ap-web-india2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-india.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-india.agora.io"],LOG_UPLOAD_SERVER:["logservice-india.agora.io"],PROXY_SERVER_TYPE3:["india.webrtc-cloud-proxy.sd-rtn.com"]},KOREA:{CODE:mS.KOREA,WEBCS_DOMAIN:["ap-web-1-korea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-korea.agora.io"],PROXY_CS:["proxy-ap-web-korea.agora.io"],CDS_AP:["cds-ap-web-korea.agora.io","cds-ap-web-korea2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-korea.agora.io","sua-ap-web-korea2.agora.io"],UAP_AP:["uap-ap-web-korea.agora.io","uap-ap-web-korea2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-korea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-korea.agora.io"],LOG_UPLOAD_SERVER:["logservice-korea.agora.io"],PROXY_SERVER_TYPE3:["korea.webrtc-cloud-proxy.sd-rtn.com"]},HKMC:{CODE:mS.HKMC,WEBCS_DOMAIN:["ap-web-1-hkmc.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-hkmc.agora.io"],PROXY_CS:["proxy-ap-web-hkmc.agora.io"],CDS_AP:["cds-ap-web-hkmc.agora.io","cds-ap-web-hkmc2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-hkmc.agora.io","sua-ap-web-hkmc2.agora.io"],UAP_AP:["uap-ap-web-hkmc.agora.io","uap-ap-web-hkmc2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-hkmc.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-hkmc.agora.io"],LOG_UPLOAD_SERVER:["logservice-hkmc.agora.io"],PROXY_SERVER_TYPE3:["hkmc.webrtc-cloud-proxy.sd-rtn.com"]},US:{CODE:mS.US,WEBCS_DOMAIN:["ap-web-1-us.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-us.agora.io"],PROXY_CS:["proxy-ap-web-us.agora.io"],CDS_AP:["cds-ap-web-us.agora.io","cds-ap-web-us2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-us.agora.io","sua-ap-web-us2.agora.io"],UAP_AP:["uap-ap-web-us.agora.io","uap-ap-web-us2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-us.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-us.agora.io"],LOG_UPLOAD_SERVER:["logservice-us.agora.io"],PROXY_SERVER_TYPE3:["us.webrtc-cloud-proxy.sd-rtn.com"]},OVERSEA:{CODE:mS.OVERSEA,WEBCS_DOMAIN:["ap-web-1-oversea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oversea.agora.io"],PROXY_CS:["proxy-ap-web-oversea.agora.io"],CDS_AP:["cds-ap-web-oversea.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oversea.agora.io"],UAP_AP:["uap-ap-web-oversea.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oversea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oversea.agora.io"],LOG_UPLOAD_SERVER:["logservice-oversea.agora.io"],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.agora.io"]},GLOBAL:{CODE:mS.GLOBAL,WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-ap-web-3.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-ap-web-3.agora.io"],UAP_AP:["uap-ap-web-1.agora.io","uap-ap-web-3.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2.agora.io"],LOG_UPLOAD_SERVER:["logservice.agora.io"],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.sd-rtn.com"]},OCEANIA:{CODE:mS.OCEANIA,WEBCS_DOMAIN:["ap-web-1-oceania.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oceania.agora.io"],PROXY_CS:["proxy-ap-web-oceania.agora.io"],CDS_AP:["cds-ap-web-oceania.agora.io","cds-ap-web-oceania2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oceania.agora.io","sua-ap-web-oceania2.agora.io"],UAP_AP:["uap-ap-web-oceania.agora.io","uap-ap-web-oceania2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oceania.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oceania.agora.io"],LOG_UPLOAD_SERVER:["logservice-oceania.agora.io"],PROXY_SERVER_TYPE3:["oceania.webrtc-cloud-proxy.sd-rtn.com"]},SOUTH_AMERICA:{CODE:mS.SOUTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-south-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-south-america.agora.io"],PROXY_CS:["proxy-ap-web-south-america.agora.io"],CDS_AP:["cds-ap-web-south-america.agora.io","cds-ap-web-south-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-south-america.agora.io","sua-ap-web-south-america2.agora.io"],UAP_AP:["uap-ap-web-south-america.agora.io","uap-ap-web-south-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-south-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-south-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-america.agora.io"],PROXY_SERVER_TYPE3:["south-america.webrtc-cloud-proxy.sd-rtn.com"]},AFRICA:{CODE:mS.AFRICA,WEBCS_DOMAIN:["ap-web-1-africa.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-africa.agora.io"],PROXY_CS:["proxy-ap-web-africa.agora.io"],CDS_AP:["cds-ap-web-africa.agora.io","cds-ap-web-africa2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-africa.agora.io","sua-ap-web-africa2.agora.io"],UAP_AP:["uap-ap-web-africa.agora.io","uap-ap-web-africa2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-africa.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-africa.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-africa.agora.io"],PROXY_SERVER_TYPE3:["africa.webrtc-cloud-proxy.sd-rtn.com"]},EXTENSIONS:{}};let SS,TS,gS,RS,IS,vS,CS,yS,AS,OS,bS,wS,NS,DS,PS;OE&&(fS.CHINA={CODE:mS.CHINA,WEBCS_DOMAIN:["webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["proxy-web.ap.sd-rtn.com"],CDS_AP:["cds-web-2.ap.sd-rtn.com","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-web-2.ap.sd-rtn.com","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-web-2.ap.sd-rtn.com","uap-web-4.ap.sd-rtn.com"],EVENT_REPORT_DOMAIN:["web-3.statscollector.sd-rtn.com"],EVENT_REPORT_BACKUP_DOMAIN:["web-4.statscollector.sd-rtn.com"],LOG_UPLOAD_SERVER:["logservice-china.agora.io"],PROXY_SERVER_TYPE3:["east-cn.webrtc-cloud-proxy.sd-rtn.com"]}),function(e){e.UPDATE_BITRATE_LIMIT="update_bitrate_limit"}(SS||(SS={}));class LS extends hE{constructor(e,t){super(),lp(this,"onICEConnectionStateChange",void 0),lp(this,"onConnectionStateChange",void 0),lp(this,"onDTLSTransportStateChange",void 0),lp(this,"onDTLSTransportError",void 0),lp(this,"onICETransportStateChange",void 0),lp(this,"onFirstAudioReceived",void 0),lp(this,"onFirstVideoReceived",void 0),lp(this,"onFirstAudioDecoded",void 0),lp(this,"onFirstVideoDecoded",void 0),lp(this,"onFirstVideoDecodedTimeout",void 0),lp(this,"onSelectedLocalCandidateChanged",void 0),lp(this,"onSelectedRemoteCandidateChanged",void 0),lp(this,"establishPromise",void 0)}}!function(e){e.SEND="sendonly",e.RECV="recvonly",e.SENDRECV="sendrecv",e.INACTIVE="inactive"}(TS||(TS={})),function(e){e.VIDEO="video",e.AUDIO="audio"}(gS||(gS={})),function(e){e.LocalVideoTrack="videoTrack",e.LocalAudioTrack="audioTrack",e.LocalVideoLowTrack="videoLowTrack"}(RS||(RS={})),function(e){e.New="new",e.Connected="connected",e.Reconnecting="reconnecting",e.Disconnected="disconnected"}(IS||(IS={})),function(e){e.StateChange="stateChange",e.IceConnectionStateChange="iceConnectionStateChange",e.RequestMuteLocal="requestMuteLocal",e.RequestUnmuteLocal="requestUnmuteLocal",e.RequestRePublish="requestRePublish",e.RequestReSubscribe="requestReSubscribe",e.RequestUploadStats="requestUploadStats",e.MediaReconnectStart="MediaReconnectStart",e.MediaReconnectEnd="MediaReconnectEnd",e.NeedSignalRTT="NeedSignalRTT",e.RequestRestartICE="RequestRestartIce",e.PeerConnectionStateChange="PeerConnectionStateChange",e.RequestReconnect="RequestReconnect",e.RequestReconnectPC="RequestReconnectPC",e.RequestUnpublishForReconnectPC="RequestUnpublishForReconnectPC",e.P2PLost="P2PLost",e.UpdateVideoEncoder="UpdateVideoEncoder",e.ConnectionTypeChange="ConnectionTypeChange",e.RequestLowStreamParameter="RequestLowStreamParameter",e.QueryClientConnectionState="QueryClientConnectionState"}(vS||(vS={})),function(e){e.ONLINE="ONLINE",e.OFFLINE="OFFLINE"}(CS||(CS={})),function(e){e.NETWORK_STATE_CHANGE="NETWORK_STATE_CHANGE",e.ONLINE="ONLINE",e.OFFLINE="OFFLINE"}(yS||(yS={})),function(e){e.ON_TRACK="on_track",e.ON_NODE="on_node"}(AS||(AS={})),function(e){e.REQUEST_UPDATE_CONSTRAINTS="request_update_constraints",e.REQUEST_CONSTRAINTS="request_constraints"}(OS||(OS={})),function(e){e.CONNECTING="CONNECTING",e.RECONNECTING="RECONNECTING",e.CONNECTED="CONNECTED",e.CLOSED="CLOSED"}(bS||(bS={})),function(e){e[e.CONNECT_AP=0]="CONNECT_AP",e[e.AP_CONNECTED=1]="AP_CONNECTED",e[e.CONNECT_WORKER_MANAGER=2]="CONNECT_WORKER_MANAGER",e[e.WORKER_MANAGER_CONNECTED=3]="WORKER_MANAGER_CONNECTED",e[e.GET_WORKER_MANAGER_RESPONSE=4]="GET_WORKER_MANAGER_RESPONSE",e[e.CONNECT_WORKER=5]="CONNECT_WORKER",e[e.WORKER_CONNECTED=6]="WORKER_CONNECTED",e[e.CLOSED=7]="CLOSED"}(wS||(wS={})),function(e){e.CONNECTION_STATE_CHANGE="connection-state-change",e.STATE_CHANGE="state-change",e.INSPECT_RESULT="inspect-result",e.CLIENT_LOCAL_VIDEO_TRACK="client-local-video-track",e.REQUEST_NEW_WORKER_URL="request-new-worker-url"}(NS||(NS={})),function(e){e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.MULTI_IP="MULTI_IP",e.TIMEOUT="TIMEOUT",e.OFFLINE="OFFLINE",e.LEAVE="LEAVE",e.P2P_FAILED="P2P_FAILED",e.FALLBACK="FALLBACK"}(DS||(DS={})),function(e){e.CONNECTED="transmitter:connected",e.RECONNECTING="transmitter:reconnecting",e.WILL_RECONNECT="transmitter:will_reconnect",e.CLOSED="transmitter:closed",e.FAILED="transmitter:failed",e.ON_MESSAGE="transmitter:on_message",e.REQUEST_NEW_URLS="transmitter:request_new_urls",e.RECONNECT_WAITTING_FINISH="transmitter:reconnect_waitting_finish",e.RECONNECT_CREATE_CONNECTION="transmitter:reconnect_create_connection",e.ON_TOKEN_PRIVILEGE_DID_EXPIRE="transmitter:on_token_privilege_did_expire",e.TO_CONNECT_DATACHANNEL="transmitter:to_connect_datachannel",e.FAILBACK="transmitter:failback"}(PS||(PS={}));const kS={getDisplayMedia:!1,getStreamFromExtension:!1,supportUnifiedPlan:!1,supportMinBitrate:!1,supportSetRtpSenderParameters:!1,supportDualStream:!0,webAudioMediaStreamDest:!1,supportReplaceTrack:!1,supportWebGL:!1,webAudioWithAEC:!1,supportRequestFrame:!1,supportShareAudio:!1,supportDualStreamEncoding:!1,supportDataChannel:!1,supportPCSetConfiguration:!1};function MS(){return kS}let US;!function(e){e[e.CHOOSE_SERVER=11]="CHOOSE_SERVER",e[e.CLOUD_PROXY=18]="CLOUD_PROXY",e[e.CLOUD_PROXY_5=20]="CLOUD_PROXY_5",e[e.CLOUD_PROXY_FALLBACK=26]="CLOUD_PROXY_FALLBACK"}(US||(US={}));var xS=k,VS=Array.isArray||function(e){return"Array"==xS(e)},FS=h,jS=VS,BS=oc,GS=q,WS=rt("species"),HS=FS.Array,KS=function(e){var t;return jS(e)&&(t=e.constructor,(BS(t)&&(t===HS||jS(t.prototype))||GS(t)&&null===(t=t[WS]))&&(t=void 0)),void 0===t?HS:t},YS=function(e,t){return new(KS(e))(0===t?0:t)},qS=Wt,JS=j,XS=Fe,zS=wi,QS=YS,ZS=d([].push),$S=function(e){var t=1==e,i=2==e,n=3==e,r=4==e,o=6==e,s=7==e,a=5==e||o;return function(c,d,u,l){for(var h,p,_=XS(c),E=JS(_),m=qS(d,u),f=zS(E),S=0,T=l||QS,g=t?T(c,f):i||s?T(c,0):void 0;f>S;S++)if((a||S in E)&&(p=m(h=E[S],S,_),e))if(t)g[S]=p;else if(p)switch(e){case 3:return!0;case 5:return h;case 6:return S;case 2:ZS(g,h)}else switch(e){case 4:return!1;case 7:ZS(g,h)}return o?-1:n||r?r:g}},eT={forEach:$S(0),map:$S(1),filter:$S(2),some:$S(3),every:$S(4),find:$S(5),findIndex:$S(6),filterReject:$S(7)},tT=eT.forEach,iT=Vi("forEach")?[].forEach:function(e){return tT(this,e,arguments.length>1?arguments[1]:void 0)};Ii({target:"Array",proto:!0,forced:[].forEach!=iT},{forEach:iT});var nT=Hi("Array").forEach,rT=Zr,oT=Ge,sT=u,aT=nT,cT=Array.prototype,dT={DOMTokenList:!0,NodeList:!0},uT=function(e){var t=e.forEach;return e===cT||sT(cT,e)&&t===cT.forEach||oT(dT,rT(e))?aT:t},lT=Fe,hT=hr;Ii({target:"Object",stat:!0,forced:i((function(){hT(1)}))},{keys:function(e){return hT(lT(e))}});var pT=J.Object.keys,_T=Xi,ET=Ii,mT=VS,fT=d([].reverse),ST=[1,2];ET({target:"Array",proto:!0,forced:String(ST)===String(ST.reverse())},{reverse:function(){return mT(this)&&(this.length=this.length),fT(this)}});var TT=Hi("Array").reverse,gT=u,RT=TT,IT=Array.prototype,vT=function(e){var t=e.reverse;return e===IT||gT(IT,e)&&t===IT.reverse?RT:t},CT=i,yT=ae,AT=rt("species"),OT=function(e){return yT>=51||!CT((function(){var t=[];return(t.constructor={})[AT]=function(){return{foo:1}},1!==t[e](Boolean).foo}))},bT=Ii,wT=h,NT=VS,DT=oc,PT=q,LT=Un,kT=wi,MT=K,UT=ZE,xT=rt,VT=pc,FT=OT("slice"),jT=xT("species"),BT=wT.Array,GT=Math.max;bT({target:"Array",proto:!0,forced:!FT},{slice:function(e,t){var i,n,r,o=MT(this),s=kT(o),a=LT(e,s),c=LT(void 0===t?s:t,s);if(NT(o)&&(i=o.constructor,(DT(i)&&(i===BT||NT(i.prototype))||PT(i)&&null===(i=i[jT]))&&(i=void 0),i===BT||void 0===i))return VT(o,a,c);for(n=new(void 0===i?BT:i)(GT(c-a,0)),r=0;a<c;a++,r++)a in o&&UT(n,r,o[a]);return n.length=r,n}});var WT=Hi("Array").slice,HT=u,KT=WT,YT=Array.prototype,qT=function(e){var t=e.slice;return e===YT||HT(YT,e)&&t===YT.slice?KT:t};function JT(e,t,i,n,r){var o,s,a,c={};return uT(o=pT(n)).call(o,(function(e){c[e]=n[e]})),c.enumerable=!!c.enumerable,c.configurable=!!c.configurable,("value"in c||c.initializer)&&(c.writable=!0),c=_T(s=vT(a=qT(i).call(i)).call(a)).call(s,(function(i,n){return n(e,t,i)||i}),c),r&&void 0!==c.initializer&&(c.value=c.initializer?c.initializer.call(r):void 0,c.initializer=void 0),void 0===c.initializer&&(up(e,t,c),c=null),c}var XT=Hi("Array").keys,zT=Zr,QT=Ge,ZT=u,$T=XT,eg=Array.prototype,tg={DOMTokenList:!0,NodeList:!0},ig=function(e){var t=e.keys;return e===eg||ZT(eg,e)&&t===eg.keys||QT(tg,zT(e))?$T:t};function ng(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function rg(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?ng(Object(i),!0).forEach((function(t){lp(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ng(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}let og=0,sg=0;function ag(e,t,i,n){return new Sl((r,o)=>{t.timeout=t.timeout||FE("HTTP_CONNECT_TIMEOUT"),t.responseType=t.responseType||"json",t.data&&!i?(t.data=JSON.stringify(t.data),og+=AI(t.data)):i&&(t.data.size?og+=t.data.size:t.data instanceof FormData?og+=function(e){let t=0;/DingTalk/i.test(navigator.userAgent)&&e.realFormData&&(e=e.realFormData);return e.forEach(e=>{t+="string"==typeof e?AI(e):e.size}),t+138}(t.data):og+=AI(JSON.stringify(t.data))),t.headers=t.headers||{},t.headers["Content-Type"]=t.headers["Content-Type"]||"application/json",t.method="POST",t.url=e,uE.request(t).then(e=>{"string"==typeof e.data?sg+=AI(e.data):e.data instanceof ArrayBuffer||e.data instanceof Uint8Array?sg+=e.data.byteLength:sg+=AI(JSON.stringify(e.data)),n&&r({data:e.data,headers:e.headers}),r(e.data)}).catch(e=>{uE.isCancel(e)?o(new EE(_E.OPERATION_ABORTED,"cancel token canceled")):"ECONNABORTED"===e.code?o(new EE(_E.NETWORK_TIMEOUT,e.message)):e.response?o(new EE(_E.NETWORK_RESPONSE_ERROR,e.response.status)):o(new EE(_E.NETWORK_ERROR,e.message))})})}async function cg(e,t){const i=new Blob([t.data],{type:"buffer"});return await ag(e,rg(rg({},t),{},{data:i,headers:{"Content-Type":"application/octet-stream"}}),!0)}const dg=new class extends hE{set networkState(e){CE.info("[".concat(this._moduleName,"]")+"network state changed, "+this._networkState+" -> "+e),this.emit(yS.NETWORK_STATE_CHANGE,e,this._networkState),e===CS.ONLINE?this.emit(yS.ONLINE):e===CS.OFFLINE&&(this.onlineWaiter=new Sl(e=>{this.once(yS.ONLINE,()=>{this.onlineWaiter=void 0,e(CS.ONLINE)})}),this.emit(yS.OFFLINE)),this._networkState=e}get networkState(){return this._networkState}constructor(){super(),lp(this,"_moduleName","network-indicator"),lp(this,"_networkState",CS.ONLINE),lp(this,"onlineWaiter",void 0),window.addEventListener("online",()=>{this.networkState=CS.ONLINE}),window.addEventListener("offline",()=>{this.networkState=CS.OFFLINE})}};let ug=!1;const lg=new class extends hE{constructor(){super(...arguments),lp(this,"onAutoplayFailed",void 0),lp(this,"onAudioAutoplayFailed",void 0)}};function hg(){if(Mh(),!ug){const e=t=>{t.preventDefault(),ug=!1,np()?document.body.removeEventListener("click",e,!0):(document.body.removeEventListener("touchstart",e,!0),document.body.removeEventListener("mousedown",e,!0))};ug=!0,np()?document.body.addEventListener("click",e,!0):(document.body.addEventListener("touchstart",e,!0),document.body.addEventListener("mousedown",e,!0)),CE.info("detect media autoplay failed, document: https://docs.agora.io/cn/Voice/autoplay_policy_web_ng?platform=Web"),lg.onAutoplayFailed?lg.onAutoplayFailed():lg.onAudioAutoplayFailed?CE.warning("AgoraRTC.onAudioAutoplayFailed has been deprecated in favor of AgoraRTC.onAutoplayFailed.\n\n  Please refer to the Agora document to migrate the newer API, https://docs.agora.io/en/Voice/autoplay_policy_web_ng?platform=Web ."):CE.warning("We have detected a media autoplay failed event, and found out that you haven't implemented AgoraRTC.onAutoplayFailed callback yet.\n\n  It will cause audio/video element not playing automatically on some browsers without user interaction, possibly hurting user experiences.\n\n  Please refer to the Agora document to properly handle autoplay failed event, https://docs.agora.io/en/Voice/autoplay_policy_web_ng?platform=Web ."),lg.emit("autoplay-failed")}}function pg(e){return(new TextEncoder).encode(e)}const _g=function(e,t){const i=new Uint8Array(e.byteLength+t.byteLength);return i.set(new Uint8Array(e),0),i.set(new Uint8Array(t),e.byteLength),i};const Eg=async e=>function(e,t){let i="";return new Uint8Array(e).forEach(e=>{i+=e.toString(t).padStart(2,"0")}),i}(await crypto.subtle.digest("SHA-256",pg(e)),16);function mg(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function fg(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?mg(Object(i),!0).forEach((function(t){lp(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):mg(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function Sg(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,i,n){const r=n.value;if("function"==typeof r){const o=e.className||t.__className__||("AgoraRTCClient"===t.constructor.name?"Client":t.constructor.name);n.value=function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];let a=n;if(e.argsMap)try{a=e.argsMap(this,...n)}catch(e){CE.warning(e),a=[]}try{JSON.stringify(a)}catch(e){CE.warning("arguments for method ".concat(o,".").concat(i," not serializable for apiInvoke.")),a=[]}const c=(e.report||Tg).reportApiInvoke(this._sessionId||null,{name:"".concat(o,".").concat(i),options:a,tag:lf.TRACER,reportResult:e.reportResult},e.throttleTime);try{const t=r.apply(this,n);return t instanceof Sl?t.then(t=>(c.onSuccess(e.reportResult&&t),t)).catch(e=>{throw c.onError(e),e}):(c.onSuccess(e.reportResult&&t),t)}catch(e){throw c.onError(e),e}}}return n}}const Tg=new class{constructor(){lp(this,"baseInfoMap",new Map),lp(this,"proxyServer",void 0),lp(this,"clientList",qE),lp(this,"eventUploadTimer",void 0),lp(this,"setSessionIdTimer",void 0),lp(this,"url",void 0),lp(this,"backupUrl",void 0),lp(this,"_appId",void 0),lp(this,"keyEventUploadPendingItems",[]),lp(this,"normalEventUploadPendingItems",[]),lp(this,"apiInvokeUploadPendingItems",[]),lp(this,"apiInvokeCount",0),lp(this,"ltsList",[]),lp(this,"lastSendNormalEventTime",Date.now()),lp(this,"customReportCounterTimer",void 0),lp(this,"customReportCount",0),lp(this,"extApiInvoke",async e=>{for(const t of e){const e=fg(fg({},t),{},{sid:null,invokeId:++this.apiInvokeCount,tag:lf.TRACER});this.sendApiInvoke(e)}}),this.eventUploadTimer=window.setInterval(this.doSend.bind(this),FE("EVENT_REPORT_SEND_INTERVAL")),this.setSessionIdTimer=window.setInterval(this.appendSessionId.bind(this),FE("EVENT_REPORT_SEND_INTERVAL"))}adjustSessionStartTime(e){if(!this.baseInfoMap.has(e)&&!this.baseInfoMap.get(e))return void CE.error("adjust session ".concat(e," start time, sid is not exist or info is undefined"));const t=this.baseInfoMap.get(e),i=Date.now(),n=t.startTime;t.startTime=i,CE.debug("rewrite session ".concat(e," startTime: ").concat(i," , ").concat(i-n,"ms")),this.baseInfoMap.set(e,t)}setAppId(e){this._appId=e}reportApiInvoke(e,t,i){t.timeout=t.timeout||6e4,t.reportResult=void 0===t.reportResult||t.reportResult;const n=Date.now();this.apiInvokeCount+=1;const r=this.apiInvokeCount,o=()=>({tag:t.tag,invokeId:r,sid:e,name:t.name,apiInvokeTime:n,options:t.options,states:t.states||null}),s=!!FE("SHOW_REPORT_INVOKER_LOG");s&&CE.info("".concat(t.name," start"),t.options);let a=!1;OI(t.timeout).then(()=>{a||(this.sendApiInvoke(fg(fg({},o()),{},{error:_E.API_INVOKE_TIMEOUT,success:!1})),CE.debug("".concat(t.name," timeout")))});const c=new EE(_E.UNEXPECTED_ERROR,"".concat(t.name,": this api invoke is end"));return{onSuccess:e=>{const n=()=>{if(a)throw c;return a=!0,this.sendApiInvoke(fg(fg({},o()),{},{success:!0},t.reportResult&&{result:e})),s&&CE.info("".concat(t.name," onSuccess")),e};return i?qI(n,t.name+"Success",i,()=>a=!0):n()},onError:e=>{const n=()=>{if(a)throw e;a=!0,this.sendApiInvoke(fg(fg({},o()),{},{success:!1,error:e})),s&&CE.info("".concat(t.name," onFailure"),e.toString())};return i?qI(n,t.name+"Error",i,()=>a=!0):n()}}}sessionInit(e,t){if(this.baseInfoMap.has(e))return;const i=Date.now(),n=this.createBaseInfo(e,i);n.cname=t.cname;const r=Object.assign({},{willUploadConsoleLog:FE("UPLOAD_LOG"),maxTouchPoints:navigator.maxTouchPoints,areaVersion:OE?"global":"oversea",areas:FE("AREAS")&&FE("AREAS").join(",")},t.extend),o=Date.now(),s=fg(fg({},n),{},{eventType:sf.SESSION_INIT,appid:t.appid,browser:navigator.userAgent,build:yE,lts:o,elapse:o-i,extend:JSON.stringify(r),mode:t.mode,process:FE("PROCESS_ID"),appType:FE("APP_TYPE"),success:!0,version:AE});this.send({type:af.SESSION,data:s},!0)}joinChooseServer(e,t){const i=this.baseInfoMap.get(e);if(!i)return;const n=i.info,r=Date.now(),o=fg(fg({},n),{},{eventType:sf.JOIN_CHOOSE_SERVER,lts:r,eventElapse:r-t.lts,chooseServerAddr:t.csAddr,errorCode:t.ec,elapse:r-i.startTime,success:t.succ,chooseServerAddrList:JSON.stringify(t.serverList),uid:t.uid?parseInt(t.uid):null,cid:t.cid?parseInt(t.cid):null,chooseServerIp:t.csIp||"",opid:t.opid,unilbsServerIds:t.unilbsServerIds,extend:t.extend||void 0,isHttp3:t.isHttp3});this.send({type:af.JOIN_CHOOSE_SERVER,data:o},!0)}reqUserAccount(e,t){const i=this.baseInfoMap.get(e);if(!i)return;const n=i.info,r=Date.now(),o=fg(fg({},n),{},{eventType:sf.REQ_USER_ACCOUNT,lts:r,success:t.success,serverAddress:t.serverAddr,stringUid:t.stringUid,uid:t.uid,errorCode:t.errorCode,elapse:r-i.startTime,eventElapse:r-t.lts,extend:JSON.stringify(t.extend)});this.send({type:af.REQ_USER_ACCOUNT,data:o},!0)}joinGateway(e,t){const i=this.baseInfoMap.get(e);if(!i)return;const n=i.info;t.vid&&(n.vid=t.vid),n.uid=t.uid,n.cid=t.cid;const r=Date.now(),{firstSuccess:o,avoidJoinStartTime:s,isProxy:a,addr:c}=t,d=r-(o&&s?s:i.startTime),u=fg(fg({},n),{},{eventType:sf.JOIN_GATEWAY,lts:r,gatewayAddr:t.addr,success:t.succ,errorCode:t.ec,elapse:d,eventElapse:r-t.lts,firstSuccess:o,signalChannel:t.signalChannel}),l=u.success?1:0;if(t.succ&&(i.lastJoinSuccessTime=r),o)this.send({type:af.JOIN_GATEWAY,data:u},!0);else{let e;if(c)if(a){const t=c.match(/h=(\d{1,3}-){3}\d{1,3}/g),i=c.match(/p=[0-9]{1,6}/g);e={isSuccess:l,gatewayIp:t&&t.length?t[0].split("=")[1].replace(/-/g,"."):"",port:i&&i.length?i[0].split("=")[1]:"",isProxy:a?1:0}}else{const t=c.match(/wss:\/\/(\d{1,3}-){3}\d{1,3}/g),i=c.match(/:[0-9]{1,6}/g);e={isSuccess:l,gatewayIp:t&&t.length?t[0].split("//")[1].replace(/-/g,"."):"",port:i&&i.length?i[0].split(":")[1]:"",isProxy:a?1:0}}else e={isSuccess:l,gatewayIp:"",port:"",isProxy:a?1:0};delete u.success,delete u.eventType,delete u.firstSuccess,u.vid=Number(u.vid);const t=Object.assign({},u,e,{eventType:sf.REJOIN_GATEWAY});this.send({type:af.RE_JOIN_GATEWAY,data:t},!0)}}joinChannelTimeout(e,t){const i=this.baseInfoMap.get(e);if(!i)return;const n=Date.now(),r=fg(fg({},i.info),{},{lts:n,timeout:t,elapse:n-i.startTime});this.send({type:af.JOIN_CHANNEL_TIMEOUT,data:r},!0)}publish(e,t){const i=this.baseInfoMap.get(e);if(!i)return;const n=i.info,r=Date.now(),o=fg(fg({},n),{},{eventType:sf.PUBLISH,lts:r,eventElapse:t.eventElapse,elapse:r-i.startTime,success:t.succ,errorCode:t.ec,videoName:t.videoName,audioName:t.audioName,screenName:t.screenName,screenshare:t.screenshare,audio:t.audio,video:t.video,p2pid:t.p2pid,publishRequestid:t.publishRequestid});this.send({type:af.PUBLISH,data:o},!0)}subscribe(e,t,i){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,o=Date.now(),s=fg(fg({},r),{},{eventType:sf.SUBSCRIBE,lts:o,eventElapse:t.eventElapse,elapse:o-n.startTime,success:t.succ,errorCode:t.ec,video:t.video,audio:t.audio,subscribeRequestid:t.subscribeRequestid,p2pid:t.p2pid},i&&{extend:JSON.stringify({isMassSubscribe:!0})});"string"==typeof t.peerid?s.peerSuid=t.peerid:s.peer=t.peerid,this.send({type:af.SUBSCRIBE,data:s},!0)}wsCompressorInit(e){var t;const i=[...ig(t=this.baseInfoMap).call(t)],n=i.length?i[0]:"UnableToGetSid",r=this.baseInfoMap.get(n);if(!r)return;const o=r.info,s=Date.now(),a=fg(fg({},o),{},{eventType:sf.WS_COMPRESSOR_INIT,lts:s,eventElapse:e.eventElapse,elapse:s-r.startTime,status:e.status?1:2});this.send({type:af.WS_COMPRESSOR_INIT,data:a},!0)}firstRemoteVideoDecode(e,t,i,n){const r=this.baseInfoMap.get(e);if(!r)return;const o=r.info,s=Date.now(),a=fg(fg(fg({},o),n),{},{elapse:s-r.startTime,eventType:t,lts:s,firstDecodeFrame:Math.max(s-r.startTime,0),apEnd:Math.max(n.apEnd-r.startTime,0),apStart:Math.max(n.apStart-r.startTime,0),joinGwEnd:Math.max(n.joinGwEnd-r.startTime,0),joinGwStart:Math.max(n.joinGwStart-r.startTime,0),pcEnd:Math.max(n.pcEnd-r.startTime,0),pcStart:Math.max(n.pcStart-r.startTime,0),subscriberEnd:Math.max(n.subscriberEnd-r.startTime,0),subscriberStart:Math.max(n.subscriberStart-r.startTime,0),videoAddNotify:Math.max(n.videoAddNotify-r.startTime,0)});this.send({type:i,data:a},!0)}firstRemoteFrame(e,t,i,n){const r=this.baseInfoMap.get(e);if(!r)return;const o=r.info,s=Date.now(),a=fg(fg(fg({},o),n),{},{elapse:s-r.startTime,eventType:t,lts:s});this.send({type:i,data:a},!0)}onGatewayStream(e,t,i,n){const r=this.baseInfoMap.get(e);if(!r)return;const o=r.info,s=Date.now(),a=fg(fg(fg({},o),n),{},{eventType:t,lts:s});this.send({type:i,data:a},!0)}streamSwitch(e,t){const i=this.baseInfoMap.get(e);if(!i)return;const n=i.info,r=Date.now(),o=fg(fg({},n),{},{eventType:sf.STREAM_SWITCH,lts:r,isDual:t.isdual,elapse:r-i.startTime,success:t.succ});this.send({type:af.STREAM_SWITCH,data:o},!0)}requestProxyAppCenter(e,t){const i=this.baseInfoMap.get(e);if(!i)return;const n=i.info,r=Date.now(),o=fg(fg({},n),{},{eventType:sf.REQUEST_PROXY_APPCENTER,lts:r,eventElapse:r-t.lts,elapse:r-i.startTime,APAddr:t.APAddr,workerManagerList:t.workerManagerList,response:t.response,errorCode:t.ec,success:t.succ});this.send({type:af.REQUEST_PROXY_APPCENTER,data:o},!0)}requestProxyWorkerManager(e,t){const i=this.baseInfoMap.get(e);if(!i)return;const n=i.info,r=Date.now(),o=fg(fg({},n),{},{eventType:sf.REQUEST_PROXY_WORKER_MANAGER,lts:r,eventElapse:r-t.lts,elapse:r-i.startTime,workerManagerAddr:t.workerManagerAddr,response:t.response,errorCode:t.ec,success:t.succ});this.send({type:af.REQUEST_PROXY_WORKER_MANAGER,data:o},!0)}setProxyServer(e){this.proxyServer=e,e?CE.debug("reportProxyServerurl: ".concat(e)):CE.debug("disable reportProxyServerurl: ".concat(e))}peerPublishStatus(e,t){const i=this.baseInfoMap.get(e);if(!i)return;const n=i.info,r=Date.now(),o=fg(fg({},n),{},{subscribeElapse:t.subscribeElapse,peer:t.peer,peerPublishDuration:Math.max(t.audioPublishDuration,t.videoPublishDuration),audiotag:t.audioPublishDuration>0?1:-1,videotag:t.videoPublishDuration>0?1:-1,lts:r,elapse:r-i.startTime,joinChannelSuccessElapse:r-(i.lastJoinSuccessTime||r),peerPublishDurationVideo:t.videoPublishDuration,peerPublishDurationAudio:t.audioPublishDuration});this.send({type:af.PEER_PUBLISH_STATUS,data:o},!0)}workerEvent(e,t){const i=this.baseInfoMap.get(e);if(!i)return;const n=i.info,r=Date.now();(function(e,t,i){const n=e[t];if(!n||"string"!=typeof n)return[e];e[t]="";const r=AI(JSON.stringify(e));let o=0;const s=[];let a=0;for(let c=0;c<n.length;c++)a+=n.charCodeAt(c)<=127?1:3,a<=i-r||(s[s.length]=yI(yI({},e),{},{[t]:n.substring(o,c)}),o=c,a=n.charCodeAt(c)<=127?1:3);o!==n.length-1&&(s[s.length]=yI(yI({},e),{},{[t]:n.substring(o)}));return s})(fg(fg(fg({},n),t),{},{elapse:r-i.startTime,lts:r,productType:"WebRTC"}),"payload",1300).forEach(e=>this.send({type:af.WORKER_EVENT,data:e},!0))}apworkerEvent(e,t){const i=this.baseInfoMap.get(e);if(!i)return;const n=i.info,r=Date.now(),o=fg(fg(fg({},n),t),{},{elapse:r-i.startTime,lts:r});this.send({type:af.AP_WORKER_EVENT,data:o},!0)}joinWebProxyAP(e,t){const i=this.baseInfoMap.get(e);if(!i)return;const n=i.info,r=Date.now(),o=fg(fg(fg({},n),t),{},{elapse:r-i.startTime,lts:r,extend:t.extend||void 0});this.send({type:af.JOIN_WEB_PROXY_AP,data:o},!0)}WebSocketQuit(e,t){const i=this.baseInfoMap.get(e);if(!i)return;const n=i.info,r=Date.now(),o=fg(fg(fg({},n),t),{},{elapse:r-i.startTime,lts:r});this.send({type:af.WEBSOCKET_QUIT,data:o},!0)}async sendCustomReportMessage(e,t){if(this.customReportCount+=t.length,this.customReportCount>FE("CUSTOM_REPORT_LIMIT"))throw new EE(_E.CUSTOM_REPORT_FREQUENCY_TOO_HIGH);this.customReportCounterTimer||(this.customReportCounterTimer=window.setInterval(()=>{this.customReportCount=0},5e3));const i=Date.now(),n=t.map(t=>({type:af.USER_ANALYTICS,data:fg(fg({sid:e},t),{},{lts:i})}));try{FE("NEW_REPORT_SERVER")?await this.postDataToStatsCollector2(n):await this.postDataToStatsCollector(n)}catch(e){throw CE.error("send custom report message failed",e.toString()),new EE(_E.CUSTOM_REPORT_SEND_FAILED,e.message)}}autoplayFailed(e,t,i,n){if(!e)return;const r=this.baseInfoMap.get(e);if(!r)return;const o=r.info,s=Date.now(),a=fg(fg({},o),{},{vid:void 0===o.vid?0:Number(o.vid),lts:s,elapse:s-r.startTime,cbRegistered:lg.onAutoplayFailed||lg.onAudioAutoplayFailed?1:-1,errorMsg:i,mediaType:t,trackId:n,extend:void 0});this.send({type:af.AUTOPLAY_FAILED,data:a},!0)}sendApiInvoke(e){const t=FE("NOT_REPORT_EVENT");if(e.tag&&t.includes&&t.includes(e.tag))return!1;if(null===e.sid)return this.apiInvokeUploadPendingItems.push(e),!1;const i=this.baseInfoMap.get(e.sid);if(!i)return this.apiInvokeUploadPendingItems.push(e),!1;const{cname:n,uid:r,cid:o}=i.info;e.lts=e.lts||Date.now();let s=void 0;if(e.error)if(e.error instanceof EE){const{code:t,message:i}=e.error;s=t||(i||e.error.toString())}else s=e.error.toString();const a={invokeId:e.invokeId,sid:e.sid,cname:n,cid:o,uid:r,lts:e.lts,success:e.success,elapse:e.lts-i.startTime,execElapse:e.lts-e.apiInvokeTime,apiName:e.name,options:e.options?JSON.stringify(e.options):void 0,execStates:e.states?JSON.stringify(e.states):void 0,execResult:e.result?JSON.stringify(e.result):void 0,errorCode:e.error?s:void 0,errorMsg:e.error?JSON.stringify(e.error):void 0};return this.send({type:af.API_INVOKE,data:a},!1),!0}appendSessionId(){this.clientList.forEach(e=>{if(e._sessionId){const t=this.apiInvokeUploadPendingItems.length;for(let i=0;i<t;i++){const t=this.apiInvokeUploadPendingItems.shift();t&&(t.sid=e._sessionId,this.sendApiInvoke(Object.assign({},t)))}}})}send(e,t){if(t)return this.keyEventUploadPendingItems.push(e),void this.sendItems(this.keyEventUploadPendingItems,!0);this.normalEventUploadPendingItems.push(e),this.normalEventUploadPendingItems.length>FE("NORMAL_EVENT_QUEUE_CAPACITY")&&this.normalEventUploadPendingItems.splice(0,1),this.normalEventUploadPendingItems.length>=10&&this.sendItems(this.normalEventUploadPendingItems,!1)}doSend(){this.keyEventUploadPendingItems.length>0&&this.sendItems(this.keyEventUploadPendingItems,!0),this.normalEventUploadPendingItems.length>0&&Date.now()-this.lastSendNormalEventTime>=5e3&&this.sendItems(this.normalEventUploadPendingItems,!1)}sendItems(e,t){const i=[],n=[];for(;e.length;){const t=e.shift();i.length<20?i.push(t):n.push(t)}e.push(...n);for(const e of[...i]){var r;if(-1!==this.ltsList.indexOf(e.data.lts))e.data.lts=this.ltsList[this.ltsList.length-1]+1,this.ltsList.push(e.data.lts);else this.ltsList.push(e.data.lts),jm(r=this.ltsList).call(r,(e,t)=>e-t)}t||(this.lastSendNormalEventTime=Date.now());return FE("ENABLE_EVENT_REPORT")?(i.length&&(FE("NEW_REPORT_SERVER")?this.postDataToStatsCollector2(i):this.postDataToStatsCollector(i)).catch((e=>i=>{FE("EVENT_REPORT_RETRY")&&(t?this.keyEventUploadPendingItems=this.keyEventUploadPendingItems.concat(e):(this.normalEventUploadPendingItems=this.normalEventUploadPendingItems.concat(e),this.normalEventUploadPendingItems.length>FE("NORMAL_EVENT_QUEUE_CAPACITY")&&(this.normalEventUploadPendingItems.splice(0,this.normalEventUploadPendingItems.length-FE("NORMAL_EVENT_QUEUE_CAPACITY")),CE.warning("report: drop normal events"))))})(i)),e):e}async postDataToStatsCollector2(e){dg.networkState===CS.OFFLINE&&await Sl.race([dg.onlineWaiter,OI(2*mE.maxRetryTimeout)]);const t=e=>{let t=new Uint8Array;return e.forEach(e=>{const i=pg(JSON.stringify(e.data)),n=new ArrayBuffer(5),r=(e=>{let t=0;return Object.entries(af).forEach(i=>{let[n,r]=i;r===e.type&&(t=df[n])}),t})(e),o=new DataView(n);o.setUint16(0,i.byteLength,!0),o.setUint8(2,255&r),o.setUint8(3,r>>>8&255),o.setUint8(4,r>>>16&255),t=_g(t,new Uint8Array(n)),t=_g(t,i)}),t},i="event";let n=this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(FE("NEW_REPORT_SERVER_DOMAINS")[0],"&p=443&d=").concat(i):"https://".concat(FE("NEW_REPORT_SERVER_DOMAINS")[0],"/").concat(i);for(let r=0;r<2;r+=1){1===r&&(n=this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(FE("NEW_REPORT_SERVER_DOMAINS")[1],"&p=443&d=").concat(i):"https://".concat(FE("NEW_REPORT_SERVER_DOMAINS")[1],"/").concat(i));try{await ag(n,{timeout:1e4,data:t(e),headers:fg(fg({token:"32f24ab2ddb74f508aa9286c356cec84",biz:"webrtc",sendts:Math.round(Date.now()/1e3),debug:"false"},this._appId&&{appid:this._appId}),{},{"Content-Type":"application/octet-stream"})},!0)}catch(e){if(1===r)throw e;continue}return}}async postDataToStatsCollector(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i={msgType:"EventMessages",sentTs:Math.round(Date.now()/1e3),payloads:e.map(e=>JSON.stringify(e)),vid:(e=>{const t=e&&e.data.sid&&this.baseInfoMap.get(e.data.sid);return t&&t.info.vid&&+t.info.vid||0})(e[0])};dg.networkState===CS.OFFLINE&&await Sl.race([dg.onlineWaiter,OI(2*mE.maxRetryTimeout)]);const n=t?"/events/proto-raws":"/events/messages";let r=this.url||(this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(FE("EVENT_REPORT_DOMAIN"),"&p=").concat(FE("STATS_COLLECTOR_PORT"),"&d=").concat(n):"https://".concat(FE("EVENT_REPORT_DOMAIN"),":").concat(FE("STATS_COLLECTOR_PORT")).concat(n));for(let e=0;e<2;e+=1){1===e&&(r=this.backupUrl||(this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(FE("EVENT_REPORT_BACKUP_DOMAIN"),"&p=").concat(FE("STATS_COLLECTOR_PORT"),"&d=").concat(n):"https://".concat(FE("EVENT_REPORT_BACKUP_DOMAIN"),":").concat(FE("STATS_COLLECTOR_PORT")).concat(n)));try{t?await cg(r,{timeout:1e4,data:i}):await ag(r,{timeout:1e4,data:i})}catch(t){if(1===e)throw t;continue}return}}createBaseInfo(e,t){const i=Object.assign({},of);return i.sid=e,this.baseInfoMap.set(e,{info:i,startTime:t}),i}reportResourceTiming(e,t){const i=performance.getEntriesByName(e),n=i[i.length-1];n&&this.reportApiInvoke(t,{name:"Client.resourceTiming",options:n,tag:lf.TRACER}).onSuccess()}};pE.on("REPORT_LOG_UPLOAD",e=>{e.networkState=dg.networkState,Tg.reportApiInvoke(null,{name:"logUploadError",options:e,tag:lf.TRACER})});class gg extends hE{constructor(e,t){super(),lp(this,"trackMediaType",void 0),lp(this,"_ID",void 0),lp(this,"_hints",[]),lp(this,"_isClosed",!1),lp(this,"_originMediaStreamTrack",void 0),lp(this,"_mediaStreamTrack",void 0),lp(this,"_external",{}),this._ID=t||wI(8,"track-"),this._originMediaStreamTrack=e,this._mediaStreamTrack=e,function(e){JE.includes(e)||JE.push(e)}(this)}toString(){return this._ID}getTrackId(){return this._ID}getMediaStreamTrack(e){if(!e){const e=Tg.reportApiInvoke(null,{name:uf.GET_MEDIA_STREAM_TRACK,options:[],tag:lf.TRACER});this._mediaStreamTrack&&"string"==typeof this._mediaStreamTrack.label?e.onSuccess(this._mediaStreamTrack.label):e.onSuccess("")}return this._mediaStreamTrack}getMediaStreamTrackSettings(){return this.getMediaStreamTrack(!0).getSettings()}close(){this._isClosed=!0,function(e){const t=JE.indexOf(e);-1!==t&&JE.splice(t,1)}(this),this.emit(uS.CLOSED)}}let Rg,Ig=1;class vg{constructor(e){lp(this,"lockingPromise",Sl.resolve()),lp(this,"locks",0),lp(this,"name",""),lp(this,"lockId",void 0),this.lockId=Ig++,e&&(this.name=e),CE.debug("[lock-".concat(this.name,"-").concat(this.lockId,"] is created."))}get isLocked(){return this.locks>0}lock(e){let t;this.locks+=1,CE.debug("[lock-".concat(this.name,"-").concat(this.lockId,"] is locked, current queue ").concat(this.locks,". ").concat("string"==typeof e?e:""));const i=new Sl(i=>{t=()=>{this.locks-=1,CE.debug("[lock-".concat(this.name,"-").concat(this.lockId,"] is not locked, current queue ").concat(this.locks,". ").concat("string"==typeof e?e:"")),i()}}),n=this.lockingPromise.then(()=>t);return this.lockingPromise=this.lockingPromise.then(()=>i),n}}function Cg(e,t){return function(i,n,r){const o=r.value;if("function"!=typeof o)throw new Error("Cannot use mutex on object property.");return r.value=async function(){const i=this[t];if(!i)throw new Error("mutex property key ".concat(t," doesn't exist on ").concat(e));const r=await i.lock("From ".concat(e,".").concat(n));try{for(var s=arguments.length,a=new Array(s),c=0;c<s;c++)a[c]=arguments[c];return await o.apply(this,a)}finally{r()}},r}}class yg extends gg{get isExternalTrack(){return this._isExternalTrack}get muted(){return this._muted}get enabled(){return this._enabled}constructor(e,t){super(e,t),lp(this,"_enabled",!0),lp(this,"_muted",!1),lp(this,"_isExternalTrack",!1),lp(this,"_isClosed",!1),lp(this,"_enabledMutex",void 0),lp(this,"processor",void 0),lp(this,"processorContext",void 0),lp(this,"_handleTrackEnded",()=>{this.onTrackEnded()}),this._enabledMutex=new vg("".concat(t)),e.addEventListener("ended",this._handleTrackEnded)}getTrackLabel(){var e,t;return null!==(e=null===(t=this._originMediaStreamTrack)||void 0===t?void 0:t.label)&&void 0!==e?e:""}close(){this._isClosed||(this.stop(),this._originMediaStreamTrack.stop(),this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack.stop(),this._mediaStreamTrack=null),this._originMediaStreamTrack=null,this._enabledMutex=null,CE.debug("[".concat(this.getTrackId(),"] close")),this.emit(sS.NEED_CLOSE),super.close())}async _updateOriginMediaStreamTrack(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._isExternalTrack=i,e!==this._originMediaStreamTrack&&(this._originMediaStreamTrack.removeEventListener("ended",this._handleTrackEnded),t&&this._originMediaStreamTrack.stop(),e.addEventListener("ended",this._handleTrackEnded),this._originMediaStreamTrack=e,this._muted&&(this._originMediaStreamTrack.enabled=!1),this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await MI(this,sS.NEED_REPLACE_TRACK,this),this.processor&&this.processor.updateInput({track:this._originMediaStreamTrack,context:this.processorContext}))}_getDefaultPlayerConfig(){return{}}onTrackEnded(){CE.debug("[".concat(this.getTrackId(),"] track ended")),this.emit(uS.TRACK_ENDED)}stateCheck(e,t){if(CE.debug("check track state, [muted: ".concat(this._muted,", enabled: ").concat(this._enabled,"] to [").concat(e,": ").concat(t,"]")),Bm(t,e),this._enabled&&this._muted&&"enabled"===e&&!1===t)throw new EE(_E.TRACK_STATE_UNREACHABLE,"cannot set enabled while the track is muted").print();if(!this._enabled&&!this._muted&&"muted"===e&&!0===t)throw new EE(_E.TRACK_STATE_UNREACHABLE,"cannot set muted while the track is disabled").print()}getProcessorStats(){return this.processorContext.gatherStats()}getProcessorUsage(){return this.processorContext.gatherUsage()}}function Ag(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}!function(e){e.IOS_15_INTERRUPTION_START="ios15-interruption-start",e.IOS_15_INTERRUPTION_END="ios15-interruption-end",e.IOS_INTERRUPTION_START="ios-interruption-start",e.IOS_INTERRUPTION_END="ios-interruption-end",e.STATE_CHANGE="state-change"}(Rg||(Rg={}));const Og=window.AudioContext||window.webkitAudioContext;let bg=null;const wg=new class extends hE{constructor(){super(...arguments),lp(this,"prevState",void 0),lp(this,"curState",void 0),lp(this,"currentTime",void 0),lp(this,"currentTimeStuckAt",void 0),lp(this,"interruptDetectorTrack",void 0),lp(this,"onLocalAudioTrackMute",()=>{CE.info("ios15-interruption-start"),this.emit(Rg.IOS_15_INTERRUPTION_START)}),lp(this,"onLocalAudioTrackUnmute",async()=>{CE.info("ios15-interruption-end"),"running"!==this.curState||this.duringInterruption?CE.info("ios15-interruption-end-canceled"):(bg&&await bg.suspend(),this.emit(Rg.IOS_15_INTERRUPTION_END))})}get duringInterruption(){return"running"===this.prevState&&"interrupted"===this.curState}bindInterruptDetectorTrack(e){CE.debug("webaudio bindInterruptDetectorTrack ".concat(e.getTrackId())),this.interruptDetectorTrack||(this.interruptDetectorTrack=e,this.interruptDetectorTrack._mediaStreamTrack.onmute=this.onLocalAudioTrackMute,this.interruptDetectorTrack._mediaStreamTrack.onunmute=this.onLocalAudioTrackUnmute)}unbindInterruptDetectorTrack(e){CE.debug("webaudio unbindInterruptDetectorTrack ".concat(e.getTrackId())),this.interruptDetectorTrack&&this.interruptDetectorTrack===e&&(this.interruptDetectorTrack._mediaStreamTrack&&(this.interruptDetectorTrack._mediaStreamTrack.onmute=null,this.interruptDetectorTrack._mediaStreamTrack.onunmute=null),this.interruptDetectorTrack=void 0)}};function Ng(){if(!Og)return void CE.error("your browser is not support web audio");CE.info("create audio context");const e=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Ag(Object(i),!0).forEach((function(t){lp(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Ag(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},FE("WEBAUDIO_INIT_OPTIONS"));CE.debug("audio context init option:",JSON.stringify(e)),bg=new Og(e),wg.curState=bg.state,bg.onstatechange=()=>{wg.prevState=wg.curState,wg.curState=bg?bg.state:void 0,(Kh()||Zh())&&"running"===wg.prevState&&"interrupted"===wg.curState&&(CE.info("ios-interruption-start"),wg.emit(Rg.IOS_INTERRUPTION_START)),(Kh()||Zh())&&"interrupted"===wg.prevState&&"running"===wg.curState&&(CE.info("ios-interruption-end"),wg.emit(Rg.IOS_INTERRUPTION_END)),wg.prevState!==wg.curState&&(CE.debug("AudioContext State Change","".concat(wg.prevState,"=>").concat(wg.curState)),wg.emit(Rg.STATE_CHANGE))},setInterval(()=>{var e;const t=null===(e=bg)||void 0===e?void 0:e.currentTime;if(wg.currentTime!==t)wg.currentTimeStuckAt&&(CE.debug("AudioContext current time resume at ".concat(t)),wg.currentTimeStuckAt=void 0),wg.currentTime=t;else{if(t!==wg.currentTimeStuckAt){Tg.reportApiInvoke(null,{name:"WEB_AUDIO_CURRENT_TIME_STUCK",options:{currentTime:t},tag:lf.TRACER}).onSuccess(),CE.warning("AudioContext current time stuck at ".concat(t))}wg.currentTimeStuckAt=t}},5e3),async function(e){const t=["click","contextmenu","auxclick","dblclick","mousedown","mouseup","touchend","keydown","keyup"];let i,n=!1,r=!1,o=!1;function s(t){"running"===e.state?a(!1):Kh()||Zh()?"suspended"===e.state&&(a(!0),t&&e.resume().then(d,d)):"closed"!==e.state&&(a(!0),t&&e.resume().then(d,d))}function a(e){if(n!==e){n=e;for(let i=0,n=t;i<n.length;i+=1){const t=n[i];e?window.addEventListener(t,u,{capture:!0,passive:!0}):window.removeEventListener(t,u,{capture:!0,passive:!0})}}}function c(){s(!0)}function d(){s(!1)}function u(){s(!0)}function l(e){if(!o)if(i.paused)if(e){h(!1),o=!0;let e=void 0;try{e=i.play(),e?e.then(p,p):(i.addEventListener("playing",p),i.addEventListener("abort",p),i.addEventListener("error",p))}catch(e){p()}}else h(!0);else h(!1)}function h(e){if(r!==e){r=e;for(let i=0,n=t;i<n.length;i++){const t=n[i];e?window.addEventListener(t,_,{capture:!0,passive:!0}):window.removeEventListener(t,_,{capture:!0,passive:!0})}}}function p(){i.removeEventListener("playing",p),i.removeEventListener("abort",p),i.removeEventListener("error",p),o=!1,l(!1)}function _(){l(!0)}if(Kh()){const t=e.createMediaStreamDestination(),n=document.createElement("div");n.innerHTML="<audio x-webkit-airplay='deny'></audio>",i=n.children.item(0),i.controls=!1,i.disableRemotePlayback=!0,i.preload="auto",i.srcObject=t.stream,l(!0)}wg.on(Rg.STATE_CHANGE,c),s(!1)}(bg)}function Dg(){if(!bg){if(Ng(),!bg)throw new EE(_E.NOT_SUPPORTED,"can not create audio context");return bg}return bg}function Pg(e){if(function(){if(null!==Lg)return Lg;const e=Dg(),t=e.createBufferSource(),i=e.createGain(),n=e.createGain();t.connect(i),t.connect(n),t.disconnect(i);let r=!1;try{t.disconnect(i)}catch(e){r=!0}return t.disconnect(),Lg=r,r}())return;const t=e.connect,i=e.disconnect;e.connect=(i,n,r)=>(e._inputNodes||(e._inputNodes=[]),e._inputNodes.includes(i)||(i instanceof AudioNode?(e._inputNodes.push(i),t.call(e,i,n,r)):t.call(e,i,n)),e),e.disconnect=(n,r,o)=>{i.call(e),n?VI(e._inputNodes,n):e._inputNodes=[];for(const i of e._inputNodes)t.call(e,i)}}let Lg=null;function kg(e,t){let i=!1;const n=1/t;if(FE("DISABLE_WEBAUDIO")){const t=window.setInterval(()=>{i?window.clearInterval(t):e(performance.now()/1e3)},1e3*n)}else{const t=Dg();let r=t.createGain();r.gain.value=0,r.connect(t.destination);const o=()=>{if(i)return void(r=null);const s=t.createOscillator();s.onended=o,s.connect(r),s.start(0),s.stop(t.currentTime+n),e(t.currentTime)};o()}return()=>{i=!0}}class Mg{constructor(){lp(this,"context",void 0),lp(this,"analyserNode",void 0),lp(this,"sourceNode",void 0),this.context=Dg(),this.analyserNode=this.context.createAnalyser(),this.analyserNode.fftSize=2048,this.analyserNode.smoothingTimeConstant=.4}updateSource(e){if(e!==this.sourceNode){if(this.sourceNode)try{this.sourceNode.disconnect(this.analyserNode)}catch(e){}this.sourceNode=e,null==e||e.connect(this.analyserNode)}}getVolumeLevel(){if(!this.sourceNode)return 0;if(!this.context||Kh()||Zh()||"running"!==this.context.state&&this.context.resume(),!this.analyserNode)return 0;const e=new Float32Array(this.analyserNode.fftSize);if(this.analyserNode.getFloatTimeDomainData)this.analyserNode.getFloatTimeDomainData(e);else{const t=new Uint8Array(this.analyserNode.fftSize);this.analyserNode.getByteTimeDomainData(t);for(let i=0;i<e.length;++i)e[i]=t[i]/128-1}const t=zi(e).call(e,(e,t)=>e+t*t,0)/e.length;return Math.max(10*Math.log10(t)+100,0)/100}getAnalyserNode(){return this.analyserNode}rebuildAnalyser(){try{var e,t;null===(e=this.sourceNode)||void 0===e||e.disconnect(this.analyserNode),this.analyserNode=this.context.createAnalyser(),this.analyserNode.fftSize=2048,this.analyserNode.smoothingTimeConstant=.4,null===(t=this.sourceNode)||void 0===t||t.connect(this.analyserNode)}catch(e){CE.warning("rebuild analyser node failed.")}}destroy(){this.updateSource(void 0)}}class Ug extends hE{get processSourceNode(){return this.sourceNode}set processedNode(e){var t;if(!this.isDestroyed&&this._processedNode!==e){try{var i;null===(i=this.sourceNode)||void 0===i||i.disconnect(this.outputNode)}catch(e){}null===(t=this._processedNode)||void 0===t||t.disconnect(),this._processedNode=e,this.connect()}}get processedNode(){return this._processedNode}constructor(){super(),lp(this,"outputNode",void 0),lp(this,"outputTrack",void 0),lp(this,"isPlayed",!1),lp(this,"sourceNode",void 0),lp(this,"context",void 0),lp(this,"audioBufferNode",void 0),lp(this,"destNode",void 0),lp(this,"audioOutputLevel",0),lp(this,"volumeLevelAnalyser",void 0),lp(this,"_processedNode",void 0),lp(this,"playNode",void 0),lp(this,"isDestroyed",!1),lp(this,"onNoAudioInput",void 0),lp(this,"isNoAudioInput",!1),lp(this,"_noAudioInputCount",0),this.context=Dg(),this.playNode=this.context.destination,this.outputNode=this.context.createGain(),Pg(this.outputNode),this.volumeLevelAnalyser=new Mg}startGetAudioBuffer(e){this.audioBufferNode||(this.audioBufferNode=this.context.createScriptProcessor(e),this.outputNode.connect(this.audioBufferNode),this.audioBufferNode.connect(this.context.destination),this.audioBufferNode.onaudioprocess=e=>{this.emit(wf.ON_AUDIO_BUFFER,function(e){for(let t=0;t<e.outputBuffer.numberOfChannels;t+=1){const i=e.outputBuffer.getChannelData(t);for(let e=0;e<i.length;e+=1)i[e]=0}return e.inputBuffer}(e))})}stopGetAudioBuffer(){this.audioBufferNode&&(this.audioBufferNode.onaudioprocess=null,this.outputNode.disconnect(this.audioBufferNode),this.audioBufferNode=void 0)}createOutputTrack(){if(!MS().webAudioMediaStreamDest)throw new EE(_E.NOT_SUPPORTED,"your browser is not support audio processor");return this.destNode&&this.outputTrack||(this.destNode=this.context.createMediaStreamDestination(),this.outputNode.connect(this.destNode),this.outputTrack=this.destNode.stream.getAudioTracks()[0]),this.outputTrack}play(e){"running"!==this.context.state&&jI(()=>{wg.emit("autoplay-failed")}),this.isPlayed=!0,this.playNode=e||this.context.destination,this.outputNode.connect(this.playNode)}stop(){if(this.isPlayed)try{this.outputNode.disconnect(this.playNode)}catch(e){}this.isPlayed=!1}getAccurateVolumeLevel(){return this.volumeLevelAnalyser.getVolumeLevel()}async checkHasAudioInput(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(e>5)return this.isNoAudioInput=!0,this.onNoAudioInput&&this.onNoAudioInput(),!1;Kh()||Zh()?"suspended"===this.context.state&&this.context.resume():"running"!==this.context.state&&this.context.resume();const t=this.volumeLevelAnalyser.getAnalyserNode();let i;t.getFloatTimeDomainData?(i=new Float32Array(t.fftSize),t.getFloatTimeDomainData(i)):(i=new Uint8Array(t.fftSize),t.getByteTimeDomainData(i));let n=!1;for(let e=0;e<i.length;e++)0!==i[e]&&(n=!0);return n?(this.isNoAudioInput=!1,!0):(await OI(200),await this.checkHasAudioInput(e?e+1:1)&&n)}getAudioVolume(){return this.outputNode.gain.value}setVolume(e){this.outputNode.gain.setValueAtTime(e,this.context.currentTime)}destroy(){this.disconnect(),this.stop(),this.isDestroyed=!0,this.onNoAudioInput=void 0}disconnect(){var e,t;null===(e=this.processedNode)||void 0===e||e.disconnect(),null===(t=this.sourceNode)||void 0===t||t.disconnect(),this.outputNode&&this.outputNode.disconnect()}connect(){var e;this.processedNode?null===(e=this.processedNode)||void 0===e||e.connect(this.outputNode):this.sourceNode&&this.sourceNode.connect(this.outputNode);this.volumeLevelAnalyser.updateSource(this.outputNode)}}class xg extends Ug{get isFreeze(){return!1}constructor(e,t,i){var n;if(super(),lp(this,"sourceNode",void 0),lp(this,"track",void 0),lp(this,"clonedTrack",void 0),lp(this,"audioElement",void 0),lp(this,"isCurrentTrackCloned",!1),lp(this,"isRemoteTrack",!1),lp(this,"originVolumeLevelAnalyser",void 0),lp(this,"rebuildWebAudio",async()=>{if(CE.debug("ready to rebuild web audio, state:",this.context.state),this.isNoAudioInput&&await this.checkHasAudioInput(),!this.isNoAudioInput||this.isDestroyed)return document.body.removeEventListener("click",this.rebuildWebAudio,!0),void CE.debug("rebuild web audio success, current volume status",this.getAccurateVolumeLevel());this.context.resume().then(()=>CE.info("resume success")),CE.debug("rebuild web audio because of ios 12 bugs"),this.disconnect();const e=this.track;this.track=this.track.clone(),this.isCurrentTrackCloned?e.stop():this.isCurrentTrackCloned=!0;const t=new MediaStream([this.track]);this.sourceNode=this.context.createMediaStreamSource(t),Pg(this.sourceNode),this.volumeLevelAnalyser.rebuildAnalyser();const i=this.outputNode.gain.value;this.outputNode=this.context.createGain(),this.outputNode.gain.setValueAtTime(i,this.context.currentTime),Pg(this.outputNode),this.emit(wf.UPDATE_SOURCE),this.connect(),this.audioElement.srcObject=t,this.isPlayed&&this.play(this.playNode),this.checkHasAudioInput()}),"audio"!==e.kind)throw new EE(_E.UNEXPECTED_ERROR);this.track=e;const r=new MediaStream([this.track]);if(this.isRemoteTrack=!!t,this.sourceNode=this.context.createMediaStreamSource(r),Pg(this.sourceNode),i){const e=i.clone();e.enabled=!0,this.clonedTrack=e,CE.debug("create an unmuted track ".concat(e.id," from the original track ").concat(i.id," to get the volume"));const t=this.context.createMediaStreamSource(new MediaStream([e]));Pg(t),this.originVolumeLevelAnalyser=new Mg,this.originVolumeLevelAnalyser.updateSource(t)}this.connect(),this.audioElement=document.createElement("audio"),this.audioElement.srcObject=r;const o=Mh();t&&o.os===wh.IOS&&Number(null===(n=o.osVersion)||void 0===n?void 0:n.split(".")[0])<15&&(wg.on(Rg.STATE_CHANGE,()=>{"suspended"===this.context.state?document.body.addEventListener("click",this.rebuildWebAudio,!0):"running"===this.context.state&&this.rebuildWebAudio()}),this.checkHasAudioInput().then(e=>{e||document.body.addEventListener("click",this.rebuildWebAudio,!0)}))}updateTrack(e){this.sourceNode.disconnect(),this.track=e,this.isCurrentTrackCloned=!1;const t=new MediaStream([e]);this.sourceNode=this.context.createMediaStreamSource(t),Pg(this.sourceNode),this.processedNode||this.sourceNode.connect(this.outputNode),this.emit(wf.UPDATE_SOURCE),this.audioElement.srcObject=t}destroy(){var e;this.audioElement.srcObject=null,this.audioElement.remove(),wg.off("state-change",this.rebuildWebAudio),null===(e=this.originVolumeLevelAnalyser)||void 0===e||e.destroy(),this.clonedTrack=void 0,super.destroy()}createMediaStreamSourceNode(e){return this.context.createMediaStreamSource(new MediaStream([e]))}updateOriginTrack(e){const t=e.clone();t.enabled=!0,this.clonedTrack&&(this.clonedTrack.stop(),this.clonedTrack=t),CE.debug("create an unmuted track ".concat(t.id," from the original track ").concat(e.id," to get the volume"));const i=this.context.createMediaStreamSource(new MediaStream([t]));Pg(i),this.originVolumeLevelAnalyser&&this.originVolumeLevelAnalyser.updateSource(i)}getOriginVolumeLevel(){return this.originVolumeLevelAnalyser?this.originVolumeLevelAnalyser.getVolumeLevel():this.getAccurateVolumeLevel()}}async function Vg(e,t){const i=(e,t)=>e?"number"!=typeof e?e.max||e.exact||e.ideal||e.min||t:e:t,n={audio:!1,video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:e,maxHeight:i(t.height,1080),maxWidth:i(t.width,1920)}}};return t.frameRate&&"number"!=typeof t.frameRate?(n.video.mandatory.maxFrameRate=t.frameRate.max,n.video.mandatory.minFrameRate=t.frameRate.min):"number"==typeof t.frameRate&&(n.video.mandatory.maxFrameRate=t.frameRate),await navigator.mediaDevices.getUserMedia(n)}async function Fg(e){const t=await jg(e.mediaSource),i=await function(e){return new Sl((t,i)=>{const n=document.createElement("div");n.innerText="share screen",n.setAttribute("style","text-align: center; height: 25px; line-height: 25px; border-radius: 4px 4px 0 0; background: #D4D2D4; border-bottom:  solid 1px #B9B8B9;");const r=document.createElement("div");r.setAttribute("style","width: 100%; height: 500px; padding: 15px 25px ; box-sizing: border-box;");const o=document.createElement("div");o.innerText="Agora Web Screensharing wants to share the contents of your screen with webdemo.agorabeckon.com. Choose what you'd like to share.",o.setAttribute("style","height: 12%;");const s=document.createElement("div");s.setAttribute("style","width: 100%; height: 80%; background: #FFF; border:  solid 1px #CBCBCB; display: flex; flex-wrap: wrap; justify-content: space-around; overflow-y: scroll; padding: 0 15px; box-sizing: border-box;");const a=document.createElement("div");a.setAttribute("style","text-align: right; padding: 16px 0;");const c=document.createElement("button");c.innerHTML="cancel",c.setAttribute("style","width: 85px;"),c.onclick=()=>{document.body.removeChild(d);const e=new Error("NotAllowedError");e.name="NotAllowedError",i(e)},a.appendChild(c),r.appendChild(o),r.appendChild(s),r.appendChild(a);const d=document.createElement("div");d.setAttribute("style","position: fixed; z-index: 99999999; top: 50%; left: 50%; width: 620px; height: 525px; background: #ECECEC; border-radius: 4px; -webkit-transform: translate(-50%,-50%); transform: translate(-50%,-50%);"),d.appendChild(n),d.appendChild(r),document.body.appendChild(d),e.map(e=>{if(e.id){const i=document.createElement("div");i.setAttribute("style","width: 30%; height: 160px; padding: 20px 0; text-align: center;box-sizing: content-box;");let n=e.thumbnail;const{width:r}=n.getSize();r>1920&&(n=n.resize({width:1920})),i.innerHTML='<div style="height: 120px; display: table-cell; vertical-align: middle;"><img style="width: 100%; background: #333333; box-shadow: 1px 1px 1px 1px rgba(0, 0, 0, 0.2);" src='+n.toDataURL()+' /></div><span style="\theight: 40px; line-height: 40px; display: inline-block; width: 70%; word-break: keep-all; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">'+(e.name.replace(/[\u00A0-\u9999<>\&]/g,(function(e){return"&#"+e.charCodeAt(0)+";"}))+"</span>"),i.onclick=()=>{document.body.removeChild(d),t(e.id)},s.appendChild(i)}})})}(t);return await Vg(i,e)}async function jg(e){let t=["window","screen"];"application"!==e&&"window"!==e||(t=["window"]),"screen"===e&&(t=["screen"]);const i=Gg();if(!i)throw new EE(_E.ELECTRON_IS_NULL);let n=null;try{var r;n=(null===(r=i.desktopCapturer)||void 0===r?void 0:r.getSources({types:t}))||i.ipcRenderer.invoke("DESKTOP_CAPTURER_GET_SOURCES",{types:t})}catch(e){n=null}n&&n.then||(n=new Sl((e,n)=>{i.desktopCapturer.getSources({types:t},(t,i)=>{t?n(t):e(i)})}));try{return await n}catch(e){throw new EE(_E.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR,e.toString())}}let Bg=null;function Gg(){if(Bg)return Bg;try{return Bg=window.require("electron"),Bg}catch(e){return null}}const Wg=new vg("safari");let Hg=!1,Kg=!1;async function Yg(e,t){let i=0,n=null;for(;i<2;)try{n=await qg(e,t,i>0);break}catch(e){if(e instanceof EE)throw CE.error("[".concat(t,"] ").concat(e.toString())),e;const n=Jg(e.name||e.code||e,e.message);if(n.code===_E.MEDIA_OPTION_INVALID){CE.debug("[".concat(t,"] detect media option invalid, retry")),i+=1,await OI(500);continue}throw CE.error("[".concat(t,"] ").concat(n.toString())),n}if(!n)throw new EE(_E.UNEXPECTED_ERROR,"can not find stream after getUserMedia");return n}async function qg(e,t,i){if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new EE(_E.NOT_SUPPORTED,"can not find getUserMedia");i&&(e.video&&(delete e.video.width,delete e.video.height),e.screen&&(delete e.screen.width,delete e.screen.height));const n=MS(),r=new MediaStream;if(e.audioSource&&r.addTrack(e.audioSource),e.videoSource&&r.addTrack(e.videoSource),!e.audio&&!e.video&&!e.screen)return CE.debug("Using Video Source/ Audio Source"),r;if(e.screen)if(Gg())if(e.screen.sourceId){Xg(r,await Vg(e.screen.sourceId,e.screen))}else{Xg(r,await Fg(e.screen))}else if(Gh()&&e.screen.extensionId&&e.screen.mandatory){if(!n.getStreamFromExtension)throw new EE(_E.NOT_SUPPORTED,"This browser does not support screen sharing");CE.debug("[".concat(t,'] Screen access on chrome stable, looking for extension"'));const i=await(o=e.screen.extensionId,s=t,new Sl((e,t)=>{try{chrome.runtime.sendMessage(o,{getStream:!0},i=>{if(!i||!i.streamId)return CE.error("[".concat(s,"] No response from Chrome Plugin. Plugin not installed properly"),i),void t(new EE(_E.CHROME_PLUGIN_NO_RESPONSE,"No response from Chrome Plugin. Plugin not installed properly"));e(i.streamId)})}catch(e){CE.error("[".concat(s,"] AgoraRTC screensharing plugin is not accessible(").concat(o,")"),e.toString()),t(new EE(_E.CHROME_PLUGIN_NOT_INSTALL))}}));e.screen.mandatory.chromeMediaSourceId=i;Xg(r,await navigator.mediaDevices.getUserMedia({video:{mandatory:e.screen.mandatory}}))}else if(n.getDisplayMedia){e.screen.mediaSource&&_S(e.screen.mediaSource);const i={width:e.screen.width,height:e.screen.height,frameRate:e.screen.frameRate,displaySurface:"screen"===e.screen.mediaSource?"monitor":e.screen.mediaSource};CE.debug("[".concat(t,"] getDisplayMedia:"),JSON.stringify({video:i,audio:!!e.screenAudio}));Xg(r,await navigator.mediaDevices.getDisplayMedia({video:i,audio:!!e.screenAudio}))}else{if(!Hh())throw CE.error("[".concat(t,"] This browser does not support screenSharing")),new EE(_E.NOT_SUPPORTED,"This browser does not support screen sharing");{e.screen.mediaSource&&_S(e.screen.mediaSource);const i={video:{mediaSource:e.screen.mediaSource,width:e.screen.width,height:e.screen.height,frameRate:e.screen.frameRate}};CE.debug("[".concat(t,"] getUserMedia: ").concat(JSON.stringify(i)));Xg(r,await navigator.mediaDevices.getUserMedia(i))}}var o,s;if(!e.video&&!e.audio)return r;let a={video:e.video,audio:e.audio},c=FE("MEDIA_DEVICE_CONSTRAINTS");if(c)try{"string"==typeof c&&(c=JSON.parse(c)),a=function e(t,i){if(!XI(t)||!XI(i))return i;if(Array.isArray(t)&&!Array.isArray(i)||!Array.isArray(t)&&Array.isArray(i))return i;if(Array.isArray(i)&&Array.isArray(t)){const n=[...t];for(let r=0;r<i.length;r++)n[r]=e(t[r],i[r]);return n}{const n=yI({},t);for(const r in i)Object.prototype.hasOwnProperty.call(i,r)&&(Object.prototype.hasOwnProperty.call(t,r)?n[r]=e(t[r],i[r]):n[r]=i[r]);return n}}(a,c)}catch(e){}CE.debug("[".concat(t,"] GetUserMedia"),JSON.stringify(a)),Mh();let d,u=null;(Wh()||Kh()||Fh())&&(u=await Wg.lock());try{d=await navigator.mediaDevices.getUserMedia(a)}catch(e){throw u&&u(),e}return a.audio&&(Hg=!0),a.video&&(Kg=!0),Xg(r,d),u&&u(),r}function Jg(e,t){switch(e){case"Starting video failed":case"OverconstrainedError":case"TrackStartError":return new EE(_E.MEDIA_OPTION_INVALID,"".concat(e,": ").concat(t));case"NotFoundError":case"DevicesNotFoundError":return new EE(_E.DEVICE_NOT_FOUND,"".concat(e,": ").concat(t));case"NotSupportedError":return new EE(_E.NOT_SUPPORTED,"".concat(e,": ").concat(t));case"NotReadableError":return new EE(_E.NOT_READABLE,"".concat(e,": ").concat(t));case"InvalidStateError":case"NotAllowedError":case"PERMISSION_DENIED":case"PermissionDeniedError":return new EE(_E.PERMISSION_DENIED,"".concat(e,": ").concat(t));case"ConstraintNotSatisfiedError":return new EE(_E.CONSTRAINT_NOT_SATISFIED,"".concat(e,": ").concat(t));default:return CE.error("getUserMedia unexpected error",e),new EE(_E.UNEXPECTED_ERROR,"".concat(e,": ").concat(t))}}function Xg(e,t){const i=e.getVideoTracks()[0],n=e.getAudioTracks()[0],r=t.getVideoTracks()[0],o=t.getAudioTracks()[0];o&&(n&&e.removeTrack(n),e.addTrack(o)),r&&(i&&e.removeTrack(i),e.addTrack(r))}const zg=new class extends hE{get state(){return this._state}set state(e){e!==this._state&&(this.emit(pf.STATE_CHANGE,e),this._state=e)}constructor(){super(),lp(this,"_state",hf.IDLE),lp(this,"isAccessMicrophonePermission",!1),lp(this,"isAccessCameraPermission",!1),lp(this,"lastAccessMicrophonePermission",!1),lp(this,"lastAccessCameraPermission",!1),lp(this,"checkdeviceMatched",!1),lp(this,"deviceInfoMap",new Map),this.init().then(()=>{navigator.mediaDevices.addEventListener&&navigator.mediaDevices.addEventListener("devicechange",this.updateDevicesInfo.bind(this)),window.setInterval(()=>{(FE("ENUMERATE_DEVICES_INTERVAL")||ip()&&tp())&&this.updateDevicesInfo()},FE("ENUMERATE_DEVICES_INTERVAL_TIME"))}).catch(e=>CE.error(e.toString()))}async enumerateDevices(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices){return new EE(_E.NOT_SUPPORTED,"enumerateDevices() not supported.").throw()}const n=await navigator.mediaDevices.enumerateDevices(),r=this.checkMediaDeviceInfoIsOk(n);let o=!this.isAccessMicrophonePermission&&e,s=!this.isAccessCameraPermission&&t;r.audio&&(o=!1),r.video&&(s=!1);let a=null,c=null,d=null;if(!i&&(o||s)){if(Wg.isLocked){CE.debug("[device manager] wait GUM lock");(await Wg.lock())(),CE.debug("[device manager] GUM unlock")}if(Hg&&(o=!1,this.isAccessMicrophonePermission=!0),Kg&&(s=!1,this.isAccessCameraPermission=!0),CE.debug("[device manager] check media device permissions",e,t,o,s),o&&s){try{d=await navigator.mediaDevices.getUserMedia({audio:!0,video:!0})}catch(e){const t=Jg(e.name||e.code||e,e.message);if(t.code===_E.PERMISSION_DENIED)throw t;CE.warning("getUserMedia failed in getDevices",t)}this.isAccessCameraPermission=!0,this.isAccessMicrophonePermission=!0}else if(o){try{a=await navigator.mediaDevices.getUserMedia({audio:e})}catch(e){const t=Jg(e.name||e.code||e,e.message);if(t.code===_E.PERMISSION_DENIED)throw t;CE.warning("getUserMedia failed in getDevices",t)}this.isAccessMicrophonePermission=!0}else if(s){try{c=await navigator.mediaDevices.getUserMedia({video:t})}catch(e){const t=Jg(e.name||e.code||e,e.message);if(t.code===_E.PERMISSION_DENIED)throw t;CE.warning("getUserMedia failed in getDevices",t)}this.isAccessCameraPermission=!0}CE.debug("[device manager] mic permission",e,"cam permission",t)}try{const e=await navigator.mediaDevices.enumerateDevices();return a&&a.getTracks().forEach(e=>e.stop()),c&&c.getTracks().forEach(e=>e.stop()),d&&d.getTracks().forEach(e=>e.stop()),a=null,c=null,d=null,e}catch(e){a&&a.getTracks().forEach(e=>e.stop()),c&&c.getTracks().forEach(e=>e.stop()),d&&d.getTracks().forEach(e=>e.stop()),a=null,c=null,d=null;return new EE(_E.ENUMERATE_DEVICES_FAILED,e.toString()).throw()}}async getRecordingDevices(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(await this.enumerateDevices(!0,!1,e)).filter(e=>"audioinput"===e.kind)}async getCamerasDevices(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(await this.enumerateDevices(!1,!0,e)).filter(e=>"videoinput"===e.kind)}async getSpeakers(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(await this.enumerateDevices(!0,!1,e)).filter(e=>"audiooutput"===e.kind)}searchDeviceIdByName(e){let t=null;return this.deviceInfoMap.forEach(i=>{i.device.label===e&&(t=i.device.deviceId)}),t}async getDeviceById(e){const t=(await this.enumerateDevices(!0,!0,!0)).find(t=>t.deviceId===e);if(!t)throw new EE(_E.DEVICE_NOT_FOUND,"deviceId: ".concat(e));return t}async init(){this.state=hf.INITING;try{await this.updateDevicesInfo(),this.state=hf.INITEND}catch(e){if(CE.warning("Device Detection functionality cannot start properly.",e.toString()),this.state=hf.IDLE,!function(){if("boolean"==typeof isSecureContext)return isSecureContext;return"https:"===location.protocol||"file:"===location.protocol||"localhost"===location.hostname||"127.0.0.1"===location.hostname||"::1"===location.hostname}()){new EE(_E.WEB_SECURITY_RESTRICT,"Your context is limited by web security, please try using https protocol or localhost.").throw()}throw e}}async updateDevicesInfo(){const e=await this.enumerateDevices(!0,!0,!0),t=Date.now(),i=[];if(e[0]&&e[0].label&&!1===this.checkdeviceMatched){this.checkdeviceMatched=!0;const t=e.find(e=>"audioinput"===e.kind&&"default"===e.deviceId),i=e.find(e=>"audiooutput"===e.kind&&"default"===e.deviceId);t&&i?i.groupId===t.groupId?CE.debug("[device-check] default input ".concat(t.label," and output ").concat(i.label," is the same group")):CE.warning("[device-check] default input ".concat(t.label," and output ").concat(i.label," is not the same group")):CE.debug("[device-check] default input or output not found")}const n=this.checkMediaDeviceInfoIsOk(e);if(e.forEach(e=>{if(!e.deviceId)return;const n=this.deviceInfoMap.get("".concat(e.kind,"_").concat(e.deviceId));if("ACTIVE"!==(n?n.state:"INACTIVE")){const n={initAt:t,updateAt:t,device:e,state:"ACTIVE"};this.deviceInfoMap.set("".concat(e.kind,"_").concat(e.deviceId),n),i.push(n)}n&&(n.updateAt=t)}),this.deviceInfoMap.forEach((e,n)=>{"ACTIVE"===e.state&&e.updateAt!==t&&(e.state="INACTIVE",i.push(e))}),this.state!==hf.INITEND)return n.audio&&(this.lastAccessMicrophonePermission=!0,this.isAccessMicrophonePermission=!0),void(n.video&&(this.lastAccessCameraPermission=!0,this.isAccessCameraPermission=!0));i.forEach(e=>{switch(e.device.kind){case"audioinput":this.lastAccessMicrophonePermission&&this.isAccessMicrophonePermission&&this.emit(pf.RECORDING_DEVICE_CHANGED,e);break;case"videoinput":this.lastAccessCameraPermission&&this.isAccessCameraPermission&&this.emit(pf.CAMERA_DEVICE_CHANGED,e);break;case"audiooutput":this.lastAccessMicrophonePermission&&this.isAccessMicrophonePermission&&this.emit(pf.PLAYOUT_DEVICE_CHANGED,e)}}),n.audio&&(this.lastAccessMicrophonePermission=!0,this.isAccessMicrophonePermission=!0),n.video&&(this.lastAccessCameraPermission=!0,this.isAccessCameraPermission=!0)}checkMediaDeviceInfoIsOk(e){const t=e.filter(e=>"audioinput"===e.kind),i=e.filter(e=>"videoinput"===e.kind),n={audio:!1,video:!1};for(const e of t)if(e.label&&e.deviceId){n.audio=!0;break}for(const e of i)if(e.label&&e.deviceId){n.video=!0;break}return n}};const Qg=["play","playing","loadeddata","canplay","pause","stalled","suspend","waiting","abort","emptied","ended","error"],Zg=new class{constructor(){lp(this,"onAutoplayFailed",void 0),lp(this,"elementMap",new Map),lp(this,"elementStateMap",new Map),lp(this,"elementsNeedToResume",[]),lp(this,"sinkIdMap",new Map),lp(this,"autoResumeAfterInterruption",()=>{Array.from(this.elementMap.entries()).forEach(e=>{let[t,i]=e;const n=this.elementStateMap.get(t),r=i.srcObject.getAudioTracks()[0];Jh()?r&&"live"===r.readyState&&"running"===wg.curState&&(CE.debug("auto resume after interruption for iOS 15"),i.pause(),i.play()):n&&"paused"===n&&r&&"live"===r.readyState&&"running"===wg.curState&&(CE.debug("auto resume after interruption for iOS"),i.play())})}),lp(this,"autoResumeAfterInterruptionOnIOS15",()=>{Array.from(this.elementMap.entries()).forEach(e=>{let[t,i]=e;const n=i.srcObject.getAudioTracks()[0];n&&"live"===n.readyState&&(CE.debug("auto resume after interruption inside autoResumeAfterInterruptionOnIOS15"),i.pause(),i.play())})}),this.autoResumeAudioElement(),wg.on(Rg.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),wg.on(Rg.IOS_15_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15),wg.on(Rg.STATE_CHANGE,()=>{Kh()&&"suspended"===wg.prevState&&"running"===wg.curState&&this.autoResumeAfterInterruption()})}async setSinkID(e,t){const i=this.elementMap.get(e);if(this.sinkIdMap.set(e,t),i)try{await i.setSinkId(t)}catch(e){throw new EE(_E.PERMISSION_DENIED,"can not set sink id: "+e.toString())}}play(e,t,i,n){if(this.elementMap.has(t))return;const r=document.createElement("audio");r.autoplay=!0,r.srcObject=new MediaStream([e]),this.bindAudioElementEvents(t,r),this.elementMap.set(t,r),this.elementStateMap.set(t,tf.INIT),this.setVolume(t,i);const o=this.sinkIdMap.get(t);if(o)try{r.setSinkId(o).catch(e=>{CE.warning("[".concat(t,"] set sink id failed"),e.toString())})}catch(e){CE.warning("[".concat(t,"] set sink id failed"),e.toString())}const s=r.play();s&&s.then&&s.catch(e=>{n&&Tg.autoplayFailed(n,"audio",e.message,t),CE.warning("audio element play warning",e.toString()),this.elementMap.has(t)&&"NotAllowedError"===e.name&&(CE.warning("detected audio element autoplay failed"),this.elementsNeedToResume.push(r),jI(()=>{this.onAutoplayFailed&&this.onAutoplayFailed(),hg()}))})}updateTrack(e,t){const i=this.elementMap.get(e);i&&(i.srcObject=new MediaStream([t]))}isPlaying(e){return this.elementMap.has(e)}setVolume(e,t){const i=this.elementMap.get(e);i&&(t=Math.max(0,Math.min(100,t)),i.volume=t/100)}stop(e){const t=this.elementMap.get(e);if(this.sinkIdMap.delete(e),!t)return;const i=this.elementsNeedToResume.indexOf(t);this.elementsNeedToResume.splice(i,1),t.srcObject=null,t.remove(),this.elementMap.delete(e),this.elementStateMap.delete(e)}bindAudioElementEvents(e,t){Qg.forEach(i=>{t.addEventListener(i,i=>{const n=this.elementStateMap.get(e),r="pause"===i.type?"paused":i.type;if(CE.debug("[".concat(e,"] audio-element-status change ").concat(n," => ").concat(r)),"error"===i.type){const i=null==t?void 0:t.error;i&&CE.error("[".concat(e,"] media error, code: ").concat(i.code,", message: ").concat(i.message))}this.elementStateMap.set(e,r)})})}getPlayerState(e){return this.elementStateMap.get(e)||"uninit"}autoResumeAudioElement(){const e=()=>{this.elementsNeedToResume.forEach(e=>{e.play().then(e=>{CE.debug("Auto resume audio element success")}).catch(e=>{CE.warning("Auto resume audio element failed!",e)})}),this.elementsNeedToResume=[]};new Sl(e=>{document.body?e():window.addEventListener("load",()=>e())}).then(()=>{np()?document.body.addEventListener("click",e,!0):(document.body.addEventListener("touchstart",e,!0),document.body.addEventListener("mousedown",e,!0))})}};function $g(){return function(e,t,i){const n=i.value;return"function"==typeof n&&(i.value=function(){this._isClosed&&new EE(_E.INVALID_OPERATION,"[".concat(this.getTrackId(),"] cannot operate a closed track")).print("warning");for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];const r=n.apply(this,t);return r instanceof Sl?new Sl((e,t)=>{r.then(e).catch(t)}):r}),i}}var eR,tR,iR,nR,rR,oR,sR,aR,cR,dR,uR,lR,hR,pR,_R,ER,mR,fR,SR,TR,gR,RR,IR,vR,CR,yR,AR,OR,bR,wR,NR,DR,PR,LR,kR,MR,UR,xR=Hi("Array").values,VR=Zr,FR=Ge,jR=u,BR=xR,GR=Array.prototype,WR={DOMTokenList:!0,NodeList:!0},HR=function(e){var t=e.values;return e===GR||jR(GR,e)&&t===GR.values||FR(WR,VR(e))?BR:t};function KR(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function YR(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?KR(Object(i),!0).forEach((function(t){lp(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):KR(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}class qR extends hE{constructor(e){super(),lp(this,"name","VideoProcessorDestination"),lp(this,"ID","0"),lp(this,"_source",void 0),lp(this,"videoContext",void 0),lp(this,"inputTrack",void 0),this.videoContext=e}get kind(){return"video"}get enabled(){return!0}pipe(){throw new EE(_E.NOT_SUPPORTED,"VideoProcessor cannot pipe to any other Processor")}unpipe(){throw new EE(_E.NOT_SUPPORTED,"VideoProcessor cannot unpipe to any other Processor")}enable(){}disable(){}updateInput(e){if(e.context!==this.videoContext)throw new Error("ProcessorContext passed to VideoTrack.processorDestination doesn't match it's belonging VideoTrack's context.\nProbably you are making pipeline like this:\nvideoTrack1.pipe(processor).pipe(videoTrack2.processorDestination).");e.track&&e.track!==this.inputTrack&&(this.videoContext.chained=!0,this.inputTrack=e.track,this.emit(AS.ON_TRACK,e.track))}reset(){this.inputTrack=void 0,this.videoContext.chained=!1,this.emit(AS.ON_TRACK,void 0)}}class JR extends hE{set chained(e){this._chained=e}get chained(){return this._chained}constructor(e,t){super(),lp(this,"constraintsMap",new Map),lp(this,"statsRegistry",[]),lp(this,"usageRegistry",[]),lp(this,"trackId",void 0),lp(this,"direction",void 0),lp(this,"_chained",!1),this.trackId=e,this.direction=t}async getConstraints(){return await kI(this,OS.REQUEST_CONSTRAINTS)}async requestApplyConstraints(e,t){var i;return CE.info("processor ".concat(t.name," requestApplyConstraints for ").concat(this.trackId)),e&&this.constraintsMap.set(t,e),MI(this,OS.REQUEST_UPDATE_CONSTRAINTS,Array.from(HR(i=this.constraintsMap).call(i)))}async requestRevertConstraints(e){var t;if(this.constraintsMap.has(e))return CE.info("processor ".concat(e.name," requestRevertConstraints for ").concat(this.trackId)),this.constraintsMap.delete(e),MI(this,OS.REQUEST_UPDATE_CONSTRAINTS,Array.from(HR(t=this.constraintsMap).call(t)))}registerStats(e,t,i){this.statsRegistry.find(i=>i.processorID===e.ID&&i.processorName===e.name&&i.type===t)||this.statsRegistry.push({processorName:e.name,processorID:e.ID,type:t,cb:i})}unregisterStats(e,t){const i=this.statsRegistry.findIndex(i=>i.processorID===e.ID&&i.processorName===e.name&&i.type===t);-1!==i&&this.statsRegistry.splice(i,1)}gatherStats(){const e=[];for(const{processorID:t,processorName:i,type:n,cb:r}of this.statsRegistry)try{const o=r();e.push({processorID:t,processorName:i,type:n,stats:o})}catch(e){CE.error(new EE(_E.UNEXPECTED_ERROR,e.message))}return e}registerUsage(e,t){this.usageRegistry.find(t=>t.processorID===e.ID&&t.processorName===e.name)||this.usageRegistry.push({processorID:e.ID,processorName:e.name,cb:t})}unregisterUsage(e){const t=this.usageRegistry.findIndex(t=>t.processorID===e.ID&&t.processorName===e.name);-1!==t&&this.usageRegistry.splice(t,1)}async gatherUsage(){const e=[];if(!this.chained)return[];for(const{cb:t}of this.usageRegistry)try{let i=t();i instanceof Sl&&(i=await i),e.push(YR(YR({},i),{},{direction:this.direction}))}catch(e){CE.error("gather extension usage error",e)}return e}getDirection(){return this.direction}}class XR extends hE{constructor(e){super(),lp(this,"name","AudioProcessorDestination"),lp(this,"ID","0"),lp(this,"inputTrack",void 0),lp(this,"inputNode",void 0),lp(this,"audioProcessorContext",void 0),lp(this,"_source",void 0),this.audioProcessorContext=e}get kind(){return"audio"}get enabled(){return!0}pipe(){throw new EE(_E.NOT_SUPPORTED,"AudioProcessorDestination cannot pipe to any other Processor")}unpipe(){throw new EE(_E.NOT_SUPPORTED,"AudioProcessor cannot unpipe to any other Processor")}enable(){}disable(){}reset(){this.inputTrack=void 0,this.inputNode=void 0,this.audioProcessorContext.chained=!1,this.emit(AS.ON_TRACK,void 0),this.emit(AS.ON_NODE,void 0)}updateInput(e){if(e.context!==this.audioProcessorContext)throw new Error("ProcessorContext passed to AudioTrack.processorDestination doesn't match it's belonging AudioTrack's context.\n        Probably you are making pipeline like this: audioTrack1.pipe(processor).pipe(audioTrack2.processorDestination).");e.track&&this.inputTrack!==e.track&&(this.audioProcessorContext.chained=!0,this.inputTrack=e.track,this.emit(AS.ON_TRACK,this.inputTrack)),e.node&&this.inputNode!==e.node&&(this.audioProcessorContext.chained=!0,this.inputNode=e.node,this.emit(AS.ON_NODE,this.inputNode))}}class zR extends hE{set chained(e){this._chained=e}get chained(){return this._chained}constructor(e,t,i){super(),lp(this,"constraintsMap",new Map),lp(this,"statsRegistry",[]),lp(this,"audioContext",void 0),lp(this,"trackId",void 0),lp(this,"direction",void 0),lp(this,"usageRegistry",[]),lp(this,"_chained",!1),this.audioContext=e,this.trackId=t,this.direction=i}async getConstraints(){return kI(this,OS.REQUEST_CONSTRAINTS)}getAudioContext(){return this.audioContext}async requestApplyConstraints(e,t){var i;return CE.info("processor ".concat(t.name," requestApplyConstraints for ").concat(this.trackId)),e&&this.constraintsMap.set(t,e),MI(this,OS.REQUEST_UPDATE_CONSTRAINTS,Array.from(HR(i=this.constraintsMap).call(i)))}async requestRevertConstraints(e){var t;if(this.constraintsMap.has(e))return this.constraintsMap.delete(e),MI(this,OS.REQUEST_UPDATE_CONSTRAINTS,Array.from(HR(t=this.constraintsMap).call(t)))}registerStats(e,t,i){this.statsRegistry.find(i=>i.processorID===e.ID&&i.processorName===e.name&&i.type===t)||this.statsRegistry.push({processorName:e.name,processorID:e.ID,type:t,cb:i})}unregisterStats(e,t){const i=this.statsRegistry.findIndex(i=>i.processorID===e.ID&&i.processorName===e.name&&i.type===t);-1!==i&&this.statsRegistry.splice(i,1)}gatherStats(){const e=[];for(const{processorID:t,processorName:i,type:n,cb:r}of this.statsRegistry)try{const o=r();e.push({processorID:t,processorName:i,type:n,stats:o})}catch(e){CE.error(new EE(_E.UNEXPECTED_ERROR,e.message))}return e}registerUsage(e,t){this.usageRegistry.find(t=>t.processorID===e.ID&&t.processorName===e.name)||this.usageRegistry.push({processorID:e.ID,processorName:e.name,cb:t})}unregisterUsage(e){const t=this.usageRegistry.findIndex(t=>t.processorID===e.ID&&t.processorName===e.name);-1!==t&&this.usageRegistry.splice(t,1)}async gatherUsage(){const e=[];if(!this.chained)return[];for(const{cb:t}of this.usageRegistry)try{let i=t();i instanceof Sl&&(i=await i),e.push(YR(YR({},i),{},{direction:this.direction}))}catch(e){CE.error("gather extension usage error",e)}return e}getDirection(){return this.direction}}class QR extends hE{get isPlayed(){return!0}get isFreeze(){return!1}constructor(){super(),lp(this,"context",void 0),lp(this,"processSourceNode",void 0),lp(this,"outputTrack",void 0),lp(this,"processedNode",void 0),lp(this,"clonedTrack",void 0),lp(this,"outputNode",void 0),this.outputNode=new ZR}setVolume(){}createOutputTrack(){throw new EE(_E.NOT_SUPPORTED,"can not create output MediaStreamTrack when WebAudio disabled")}getOriginVolumeLevel(){return 0}getAccurateVolumeLevel(){return 0}stopGetAudioBuffer(){}startGetAudioBuffer(){}play(){}stop(){}destroy(){}updateTrack(){}updateOriginTrack(){}createMediaStreamSourceNode(){}}class ZR{disconnect(){}connect(){}}function $R(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function eI(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?$R(Object(i),!0).forEach((function(t){lp(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):$R(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}let tI=(eR=Sg({argsMap:(e,t)=>[e.getTrackId(),t],throttleTime:300}),tR=Sg({argsMap:(e,t)=>[e.getTrackId(),t]}),iR=$g(),nR=Cg("LocalAudioTrack","_enabledMutex"),rR=Sg({argsMap:(e,t)=>[e.getTrackId(),t]}),oR=$g(),sR=Cg("LocalAudioTrack","_enabledMutex"),aR=Sg({argsMap:(e,t)=>[e.getTrackId(),t]}),cR=$g(),dR=$g(),uR=$g(),lR=Sg({argsMap:e=>[e.getTrackId()]}),hR=$g(),pR=Sg({argsMap:e=>[e.getTrackId()]}),_R=$g(),ER=Sg({argsMap:e=>[e.getTrackId()]}),mR=Sg({argsMap:(e,t)=>[e.getTrackId(),t.name]}),fR=Sg({argsMap:e=>[e.getTrackId()]}),JT((SR=class extends yg{get isPlaying(){return this._useAudioElement?Zg.isPlaying(this.getTrackId()):this._source.isPlayed}get __className__(){return"LocalAudioTrack"}constructor(e,t,i,n){super(e,i),lp(this,"trackMediaType","audio"),lp(this,"_encoderConfig",void 0),lp(this,"_source",void 0),lp(this,"_enabled",!0),lp(this,"_volume",100),lp(this,"_useAudioElement",!1),lp(this,"_bypassWebAudio",!1),lp(this,"processor",void 0),lp(this,"processorContext",void 0),lp(this,"processorDestination",void 0),lp(this,"_getOriginVolumeLevel",void 0),this._encoderConfig=t,this._getOriginVolumeLevel=!!n,FE("DISABLE_WEBAUDIO")?(this._source=new QR,this._useAudioElement=!0,this._bypassWebAudio=!0):(this._source=new xg(e,!1,this._getOriginVolumeLevel?e:void 0),FE("LOCAL_AUDIO_TRACK_USES_WEB_AUDIO")||(this._useAudioElement=!0)),this.processorContext=new zR(this._source.context,this.getTrackId(),"local"),this.processorDestination=new XR(this.processorContext),this.bindProcessorDestinationEvents(),this._source.on(wf.UPDATE_SOURCE,()=>{this.processor&&this.processor.updateInput({node:this._source.processSourceNode,context:this.processorContext})})}setVolume(e){Wm(e,"volume",0,1e3),this._volume=e,this._source.setVolume(e/100),this._useAudioElement&&Zg.setVolume(this.getTrackId(),e);try{if(this._bypassWebAudio)return void CE.debug("[".concat(this.getTrackId(),"] setVolume returned because no pass through WebAudio."));const e=this._source.createOutputTrack();this._mediaStreamTrack!==e&&(this._mediaStreamTrack=e,MI(this,sS.NEED_REPLACE_TRACK,this).then(()=>{CE.debug("[".concat(this.getTrackId(),"] replace web audio track success"))}).catch(e=>{CE.warning("[".concat(this.getTrackId(),"] replace web audio track failed"),e)}))}catch(e){}}getVolumeLevel(){return this._muted&&this.enabled&&this._getOriginVolumeLevel?this._source.getOriginVolumeLevel():this._source.getAccurateVolumeLevel()}async setPlaybackDevice(e){if(!this._useAudioElement)throw new EE(_E.NOT_SUPPORTED,"your browser does not support setting the audio output device");await Zg.setSinkID(this.getTrackId(),e)}async setEnabled(e,t,i){return this._setEnabled(e,t,i)}async _setEnabled(e,t,i){if(!i){if(e===this._enabled)return;this.stateCheck("enabled",e)}if(CE.info("[".concat(this.getTrackId(),"] start setEnabled"),e),e){this._originMediaStreamTrack.enabled=!0;try{i||(this._enabled=!0),await MI(this,sS.NEED_ENABLE_TRACK,this),CE.info("[".concat(this.getTrackId(),"] setEnabled to ").concat(e," success"))}catch(e){throw i||(this._enabled=!1),CE.error("[".concat(this.getTrackId(),"] setEnabled to true error"),e.toString()),e}}else{this._originMediaStreamTrack.enabled=!1,i||(this._enabled=!1);try{await MI(this,sS.NEED_DISABLE_TRACK,this)}catch(e){throw i||(this._enabled=!0),CE.error("[".concat(this.getTrackId(),"] setEnabled to false error"),e.toString()),e}}}async setMuted(e){e!==this._muted&&(this.stateCheck("muted",e),this._muted=e,this._originMediaStreamTrack.enabled=!e,CE.debug("[".concat(this.getTrackId(),"] start set muted: ").concat(e)),e?await MI(this,sS.NEED_MUTE_TRACK,this):await MI(this,sS.NEED_UNMUTE_TRACK,this))}getStats(){WI(()=>{CE.warning("[deprecated] LocalAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalAudioStats instead")},"localAudioTrackGetStatsWarning");const e=UI(this,sS.GET_STATS);return e||eI({},Mf)}setAudioFrameCallback(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4096;if(!e)return this._source.removeAllListeners(wf.ON_AUDIO_BUFFER),void this._source.stopGetAudioBuffer();this._source.startGetAudioBuffer(t),this._source.removeAllListeners(wf.ON_AUDIO_BUFFER),this._source.on(wf.ON_AUDIO_BUFFER,t=>e(t))}play(){CE.debug("[".concat(this.getTrackId(),"] start audio playback")),this._useAudioElement?(CE.debug("[".concat(this.getTrackId(),"] start audio playback in element")),Zg.play(this._mediaStreamTrack,this.getTrackId(),this._volume)):this._source.play()}stop(){CE.debug("[".concat(this.getTrackId(),"] stop audio playback")),this._useAudioElement?Zg.stop(this.getTrackId()):this._source.stop()}close(){super.close(),this.unbindProcessorDestinationEvents(),this.unbindProcessorContextEvents(),this.unpipe(),this.processorDestination._source&&this.processorDestination._source.unpipe(),this._source.destroy()}_updatePlayerSource(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];CE.debug("[".concat(this.getTrackId(),"] update player source track")),e&&this._source.updateTrack(this._mediaStreamTrack),this._useAudioElement&&Zg.updateTrack(this.getTrackId(),this._mediaStreamTrack)}async _updateOriginMediaStreamTrack(e,t){this._originMediaStreamTrack!==e&&(this._originMediaStreamTrack.removeEventListener("ended",this._handleTrackEnded),e.addEventListener("ended",this._handleTrackEnded),t&&this._originMediaStreamTrack.stop(),this._originMediaStreamTrack=e,this._muted&&(this._originMediaStreamTrack.enabled=!1),this.processor&&this.processor.updateInput({track:e,context:this.processorContext}),this._mediaStreamTrack!==this._source.outputTrack?(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await MI(this,sS.NEED_REPLACE_TRACK,this)):this._source.updateTrack(this._originMediaStreamTrack),this._getOriginVolumeLevel&&this._source.updateOriginTrack(e))}renewMediaStreamTrack(e){return Sl.resolve(void 0)}pipe(e){if(this._bypassWebAudio)throw new EE(_E.INVALID_OPERATION,"Can not process AudioTrack when bypassWebAudio set to true.");if(this.processor===e)return e;if(e._source)throw new EE(_E.INVALID_OPERATION,"Processor ".concat(e.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=e,this.processor._source=this,e.updateInput({track:this._originMediaStreamTrack,node:this._source.processSourceNode,context:this.processorContext}),e}unpipe(){var e;if(!this.processor)return;const t=this.processor;null===(e=this._source.processSourceNode)||void 0===e||e.disconnect(),this.processor._source=!1,this.processor=void 0,t.reset()}bindProcessorDestinationEvents(){this.processorDestination.on(AS.ON_TRACK,async e=>{e?e!==this._mediaStreamTrack&&(this._mediaStreamTrack=e,this._updatePlayerSource(!1),this._source.processedNode=this._source.createMediaStreamSourceNode(e),await MI(this,sS.NEED_REPLACE_TRACK,this)):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await MI(this,sS.NEED_REPLACE_TRACK,this))}),this.processorDestination.on(AS.ON_NODE,e=>{this._source.processedNode=e})}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(AS.ON_TRACK),this.processorDestination.removeAllListeners(AS.ON_NODE)}unbindProcessorContextEvents(){this.processorContext.removeAllListeners(OS.REQUEST_UPDATE_CONSTRAINTS),this.processorContext.removeAllListeners(OS.REQUEST_CONSTRAINTS)}}).prototype,"setVolume",[eR],Object.getOwnPropertyDescriptor(SR.prototype,"setVolume"),SR.prototype),JT(SR.prototype,"setPlaybackDevice",[tR,iR],Object.getOwnPropertyDescriptor(SR.prototype,"setPlaybackDevice"),SR.prototype),JT(SR.prototype,"setEnabled",[nR,rR,oR],Object.getOwnPropertyDescriptor(SR.prototype,"setEnabled"),SR.prototype),JT(SR.prototype,"setMuted",[sR,aR,cR],Object.getOwnPropertyDescriptor(SR.prototype,"setMuted"),SR.prototype),JT(SR.prototype,"getStats",[dR],Object.getOwnPropertyDescriptor(SR.prototype,"getStats"),SR.prototype),JT(SR.prototype,"setAudioFrameCallback",[uR],Object.getOwnPropertyDescriptor(SR.prototype,"setAudioFrameCallback"),SR.prototype),JT(SR.prototype,"play",[lR,hR],Object.getOwnPropertyDescriptor(SR.prototype,"play"),SR.prototype),JT(SR.prototype,"stop",[pR,_R],Object.getOwnPropertyDescriptor(SR.prototype,"stop"),SR.prototype),JT(SR.prototype,"close",[ER],Object.getOwnPropertyDescriptor(SR.prototype,"close"),SR.prototype),JT(SR.prototype,"pipe",[mR],Object.getOwnPropertyDescriptor(SR.prototype,"pipe"),SR.prototype),JT(SR.prototype,"unpipe",[fR],Object.getOwnPropertyDescriptor(SR.prototype,"unpipe"),SR.prototype),SR),iI=(TR=Sg({argsMap:(e,t)=>[e.getTrackId(),t]}),gR=$g(),RR=Cg("MicrophoneAudioTrack","_enabledMutex"),IR=Sg({argsMap:(e,t,i)=>[e.getTrackId(),t,i]}),vR=$g(),CR=Sg({argsMap:e=>[e.getTrackId()]}),JT((yR=class extends tI{get __className__(){return"MicrophoneAudioTrack"}constructor(e,t,i,n){super(e,t.encoderConfig?xE(t.encoderConfig):{},n,FE("GET_VOLUME_OF_MUTED_AUDIO_TRACK")),lp(this,"_config",void 0),lp(this,"_deviceName","default"),lp(this,"_constraints",void 0),lp(this,"_originalConstraints",void 0),lp(this,"_enabled",!0),this._config=t,this._constraints=i,this._originalConstraints=i,this._deviceName=e.label,"boolean"==typeof t.bypassWebAudio&&(this._bypassWebAudio=t.bypassWebAudio),Jh()&&wg.bindInterruptDetectorTrack(this),this.bindProcessorContextEvents()}async setDevice(e){if(CE.info("[".concat(this.getTrackId(),"] start set device to ").concat(e)),this._enabled)try{const t=await zg.getDeviceById(e),i={};i.audio=eI({},this._constraints),i.audio.deviceId={exact:e},this._originMediaStreamTrack.stop();let n=null;try{n=await Yg(i,this.getTrackId())}catch(e){throw CE.error("[".concat(this.getTrackId(),"] setDevice failed"),e.toString()),n=await Yg({video:this._constraints},this.getTrackId()),await this._updateOriginMediaStreamTrack(n.getAudioTracks()[0],!1),e}await this._updateOriginMediaStreamTrack(n.getAudioTracks()[0],!1),this._deviceName=t.label,this._config.microphoneId=e,this._constraints.deviceId={exact:e}}catch(e){throw CE.error("[".concat(this.getTrackId(),"] setDevice error"),e.toString()),e}else try{const t=await zg.getDeviceById(e);this._deviceName=t.label,this._config.microphoneId=e,this._constraints.deviceId={exact:e}}catch(e){throw CE.error("[".concat(this.getTrackId(),"] setDevice error"),e.toString()),e}CE.info("[".concat(this.getTrackId(),"] set device to ").concat(e," success"))}async setEnabled(e,t,i){if(t)return CE.debug("[".concat(this.getTrackId(),"] setEnabled false (do not close microphone)")),await super._setEnabled(e);if(!i){if(e===this._enabled)return;this.stateCheck("enabled",e)}if(CE.info("[".concat(this.getTrackId(),"] start setEnabled"),e),!e){var n;this._originMediaStreamTrack.onended=null,this._originMediaStreamTrack.stop(),null===(n=this._source.clonedTrack)||void 0===n||n.stop(),i||(this._enabled=!1);try{await MI(this,sS.NEED_DISABLE_TRACK,this)}catch(e){throw CE.error("[".concat(this.getTrackId(),"] setEnabled false failed"),e.toString()),e}return}const r=eI({},this._constraints),o=zg.searchDeviceIdByName(this._deviceName);o&&!r.deviceId&&(r.deviceId=o);try{i||(this._enabled=!0);const e=await Yg({audio:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(e.getAudioTracks()[0],!1),await MI(this,sS.NEED_ENABLE_TRACK,this)}catch(e){throw i||(this._enabled=!1),CE.error("[".concat(this.getTrackId(),"] setEnabled true failed"),e.toString()),e}CE.info("[".concat(this.getTrackId(),"] setEnabled success"))}close(){super.close(),Jh()&&wg.unbindInterruptDetectorTrack(this)}onTrackEnded(){if((Kh()||Zh())&&this._enabled&&!this._isClosed&&wg.duringInterruption){const e=async()=>{wg.off(Rg.IOS_INTERRUPTION_END,e),this._enabled&&!this._isClosed&&(CE.debug("[".concat(this.getTrackId(),"] try capture microphone media device for interrupted iOS device.")),await this.setEnabled(!1),await this.setEnabled(!0))};wg.on(Rg.IOS_INTERRUPTION_END,e)}else CE.debug("[".concat(this.getTrackId(),"] track ended")),this.emit(uS.TRACK_ENDED)}async renewMediaStreamTrack(e){const t=e||this._constraints,i=zg.searchDeviceIdByName(this._deviceName);if(i&&!t.deviceId&&(t.deviceId=i),this._constraints=t,this._enabled){this._originMediaStreamTrack.stop();const e=await Yg({audio:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(e.getAudioTracks()[0],!0)}}bindProcessorContextEvents(){this.processorContext.on(OS.REQUEST_UPDATE_CONSTRAINTS,async(e,t,i)=>{try{const i=Object.assign({},this._originalConstraints,...e);await this.renewMediaStreamTrack(i),t()}catch(e){i(e)}}),this.processorContext.on(OS.REQUEST_CONSTRAINTS,async e=>{e(this._originMediaStreamTrack.getSettings())})}}).prototype,"setDevice",[TR,gR],Object.getOwnPropertyDescriptor(yR.prototype,"setDevice"),yR.prototype),JT(yR.prototype,"setEnabled",[RR,IR,vR],Object.getOwnPropertyDescriptor(yR.prototype,"setEnabled"),yR.prototype),JT(yR.prototype,"close",[CR],Object.getOwnPropertyDescriptor(yR.prototype,"close"),yR.prototype),yR),nI=(AR=Sg({argsMap:(e,t)=>[e.getTrackId(),t,e.duration]}),OR=$g(),bR=Sg({argsMap:e=>[e.getTrackId()]}),wR=$g(),NR=Sg({argsMap:e=>[e.getTrackId()]}),DR=$g(),PR=Sg({argsMap:e=>[e.getTrackId()]}),LR=$g(),kR=Sg({argsMap:e=>[e.getTrackId()]}),MR=$g(),JT((UR=class extends tI{get __className__(){return"BufferSourceAudioTrack"}constructor(e,t,i,n){super(t.createOutputTrack(),i,n),lp(this,"source",void 0),lp(this,"_bufferSource",void 0),this.source=e,this._bufferSource=t,this._bufferSource.on(wf.AUDIO_SOURCE_STATE_CHANGE,e=>{this.emit(uS.SOURCE_STATE_CHANGE,e)});try{this._mediaStreamTrack=this._source.createOutputTrack()}catch(e){}}get currentState(){return this._bufferSource.currentState}get duration(){return this._bufferSource.duration}getCurrentTime(){return this._bufferSource.currentTime}startProcessAudioBuffer(e){e&&this._bufferSource.updateOptions(e),this._bufferSource.startProcessAudioBuffer()}pauseProcessAudioBuffer(){this._bufferSource.pauseProcessAudioBuffer()}seekAudioBuffer(e){this._bufferSource.seekAudioBuffer(e)}resumeProcessAudioBuffer(){this._bufferSource.resumeProcessAudioBuffer()}stopProcessAudioBuffer(){this._bufferSource.stopProcessAudioBuffer()}}).prototype,"startProcessAudioBuffer",[AR,OR],Object.getOwnPropertyDescriptor(UR.prototype,"startProcessAudioBuffer"),UR.prototype),JT(UR.prototype,"pauseProcessAudioBuffer",[bR,wR],Object.getOwnPropertyDescriptor(UR.prototype,"pauseProcessAudioBuffer"),UR.prototype),JT(UR.prototype,"seekAudioBuffer",[NR,DR],Object.getOwnPropertyDescriptor(UR.prototype,"seekAudioBuffer"),UR.prototype),JT(UR.prototype,"resumeProcessAudioBuffer",[PR,LR],Object.getOwnPropertyDescriptor(UR.prototype,"resumeProcessAudioBuffer"),UR.prototype),JT(UR.prototype,"stopProcessAudioBuffer",[kR,MR],Object.getOwnPropertyDescriptor(UR.prototype,"stopProcessAudioBuffer"),UR.prototype),UR);class rI extends tI{get __className__(){return"MixingAudioTrack"}get isActive(){for(const e of this.trackList)if(e._enabled&&!e._isClosed&&!e.muted)return!0;return!1}constructor(){const e=Dg().createMediaStreamDestination();super(e.stream.getAudioTracks()[0],void 0,wI(8,"track-mix-")),lp(this,"trackList",void 0),lp(this,"destNode",void 0);try{this._mediaStreamTrack=this._source.createOutputTrack()}catch(e){}this.destNode=e,this.trackList=[]}hasAudioTrack(e){return-1!==this.trackList.indexOf(e)}addAudioTrack(e){-1===this.trackList.indexOf(e)?(CE.debug("add ".concat(e.getTrackId()," to mixing track")),e._source.outputNode.connect(this.destNode),this.trackList.push(e),this.updateEncoderConfig()):CE.debug("track ".concat(e.getTrackId()," is already added"))}removeAudioTrack(e){if(-1!==this.trackList.indexOf(e)){CE.debug("remove ".concat(e.getTrackId()," from mixing track"));try{e._source.outputNode.disconnect(this.destNode)}catch(e){}VI(this.trackList,e),this.updateEncoderConfig()}}updateEncoderConfig(){const e={};this.trackList.forEach(t=>{t._encoderConfig&&((t._encoderConfig.bitrate||0)>(e.bitrate||0)&&(e.bitrate=t._encoderConfig.bitrate),(t._encoderConfig.sampleRate||0)>(e.sampleRate||0)&&(e.sampleRate=t._encoderConfig.sampleRate),(t._encoderConfig.sampleSize||0)>(e.sampleSize||0)&&(e.sampleSize=t._encoderConfig.sampleSize),t._encoderConfig.stereo&&(e.stereo=!0))}),this._encoderConfig=e}}class oI extends hE{constructor(){super(...arguments),lp(this,"resultStorage",new Map)}setLocalAudioStats(e,t,i){this.record("AUDIO_INPUT_LEVEL_TOO_LOW",e,this.checkAudioInputLevel(i,t)),this.record("SEND_AUDIO_BITRATE_TOO_LOW",e,this.checkSendAudioBitrate(i,t))}setLocalVideoStats(e,t,i){this.record("SEND_VIDEO_BITRATE_TOO_LOW",e,this.checkSendVideoBitrate(i,t)),this.record("FRAMERATE_INPUT_TOO_LOW",e,this.checkFramerateInput(i,t)),this.record("FRAMERATE_SENT_TOO_LOW",e,this.checkFramerateSent(i))}setRemoteAudioStats(e,t){const i=e.getUserId();this.record("AUDIO_OUTPUT_LEVEL_TOO_LOW",i,this.checkAudioOutputLevel(t))}setRemoteVideoStats(e,t){const i=e.getUserId();this.record("RECV_VIDEO_DECODE_FAILED",i,this.checkVideoDecode(t))}record(e,t,i){this.resultStorage.has(e)||this.resultStorage.set(e,{result:[],isPrevNormal:!0});const n=this.resultStorage.get(e);if(n&&(n.result.push(i),n.result.length>=5)){const i=n.result.includes(!0);n.isPrevNormal&&!i&&this.emit("exception",sI[e],e,t),!n.isPrevNormal&&i&&this.emit("exception",sI[e]+2e3,e+"_RECOVER",t),n.isPrevNormal=i,n.result=[]}}checkAudioOutputLevel(e){return!(e.receiveBitrate>0&&0===e.receiveLevel)}checkAudioInputLevel(e,t){return t instanceof rI&&!t.isActive||(!!t.muted||0!==e.sendVolumeLevel)}checkFramerateInput(e,t){let i=null;t._encoderConfig&&t._encoderConfig.frameRate&&(i=mI(t._encoderConfig.frameRate));const n=e.captureFrameRate;return!i||!n||!(i>10&&n<5||i<10&&i>=5&&n<=1)}checkFramerateSent(e){return!(e.captureFrameRate&&e.sendFrameRate&&e.captureFrameRate>5&&e.sendFrameRate<=1)}checkSendVideoBitrate(e,t){return!!t.muted||0!==e.sendBitrate}checkSendAudioBitrate(e,t){return t instanceof rI&&!t.isActive||(!!t.muted||0!==e.sendBitrate)}checkVideoDecode(e){return 0===e.receiveBitrate||0!==e.decodeFrameRate}}const sI={FRAMERATE_INPUT_TOO_LOW:1001,FRAMERATE_SENT_TOO_LOW:1002,SEND_VIDEO_BITRATE_TOO_LOW:1003,RECV_VIDEO_DECODE_FAILED:1005,AUDIO_INPUT_LEVEL_TOO_LOW:2001,AUDIO_OUTPUT_LEVEL_TOO_LOW:2002,SEND_AUDIO_BITRATE_TOO_LOW:2003};const aI=new class{markSubscribeStart(e,t){performance.mark("agora-web-sdk/".concat(e,"/subscribe-").concat(t))}markPublishStart(e,t){performance.mark("agora-web-sdk/".concat(e,"/publish-").concat(t))}measureFromSubscribeStart(e,t){const i=performance.getEntriesByName("agora-web-sdk/".concat(e,"/subscribe-").concat(t));if(i.length>0){const e=i[i.length-1];return Math.round(performance.now()-e.startTime)}return 0}measureFromPublishStart(e,t){const i=performance.getEntriesByName("agora-web-sdk/".concat(e,"/publish-").concat(t));if(i.length>0){const e=i[i.length-1];return Math.round(performance.now()-e.startTime)}return 0}};function cI(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function dI(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?cI(Object(i),!0).forEach((function(t){lp(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):cI(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}class uI{constructor(e){lp(this,"store",void 0),lp(this,"onStatsException",void 0),lp(this,"onUploadPublishDuration",void 0),lp(this,"localStats",new Map),lp(this,"remoteStats",new Map),lp(this,"updateStatsInterval",void 0),lp(this,"trafficStats",void 0),lp(this,"trafficStatsPeerList",[]),lp(this,"uplinkStats",void 0),lp(this,"exceptionMonitor",void 0),lp(this,"p2pChannel",void 0),lp(this,"updateStats",()=>{this.p2pChannel&&(this.updateRemoteStats(this.p2pChannel),this.updateLocalStats(this.p2pChannel))}),this.store=e,this.updateStatsInterval=window.setInterval(this.updateStats,1e3),this.exceptionMonitor=new oI,this.exceptionMonitor.on("exception",(e,t,i)=>{this.onStatsException&&this.onStatsException(e,t,i)})}reset(){this.localStats=new Map,this.remoteStats=new Map,this.trafficStats=void 0,this.trafficStatsPeerList=[],this.uplinkStats=void 0}getLocalAudioTrackStats(){return this.localStats.get(RS.LocalAudioTrack)||dI({},Mf)}getLocalVideoTrackStats(){return this.localStats.get(RS.LocalVideoTrack)||dI({},Uf)}getRemoteAudioTrackStats(e){const t=(e,t)=>{if(!this.trafficStats)return t;const i=this.trafficStats.peer_delay.find(t=>t.peer_uid===e);return i&&(t.publishDuration=i.B_ppad+(Date.now()-this.trafficStats.timestamp)),t},i={};if(e){var n;const r=null===(n=this.remoteStats.get(e))||void 0===n?void 0:n.audioStats;r&&(i[e]=t(e,r))}else Array.from(this.remoteStats.entries()).forEach(e=>{let[n,{audioStats:r}]=e;r&&(i[n]=t(n,r))});return i}getRemoteNetworkQualityStats(e){const t={};if(e){var i;const n=null===(i=this.remoteStats.get(e))||void 0===i?void 0:i.networkStats;n&&(t[e]=n)}else Array.from(this.remoteStats.entries()).forEach(e=>{let[i,{networkStats:n}]=e;n&&(t[i]=n)});return t}getRemoteVideoTrackStats(e){const t=(e,t)=>{if(!this.trafficStats)return t;const i=this.trafficStats.peer_delay.find(t=>t.peer_uid===e);return i&&(t.publishDuration=i.B_ppvd+(Date.now()-this.trafficStats.timestamp)),t},i={};if(e){var n;const r=null===(n=this.remoteStats.get(e))||void 0===n?void 0:n.videoStats;r&&(i[e]=t(e,r))}else Array.from(this.remoteStats.entries()).forEach(e=>{let[n,{videoStats:r}]=e;r&&(i[n]=t(n,r))});return i}getRTCStats(){let e=0,t=0,i=0,n=0;const r=this.localStats.get(RS.LocalAudioTrack);r&&(e+=r.sendBytes,t+=r.sendBitrate);const o=this.localStats.get(RS.LocalVideoTrack);o&&(e+=o.sendBytes,t+=o.sendBitrate);const s=this.localStats.get(RS.LocalVideoLowTrack);s&&(e+=s.sendBytes,t+=s.sendBitrate),this.remoteStats.forEach(e=>{let{audioStats:t,videoStats:r}=e;t&&(i+=t.receiveBytes,n+=t.receiveBitrate),r&&(i+=r.receiveBytes,n+=r.receiveBitrate)});let a=1;return this.trafficStats&&(a+=this.trafficStats.peer_delay.length),{Duration:0,UserCount:a,SendBitrate:t,SendBytes:e,RecvBytes:i,RecvBitrate:n,OutgoingAvailableBandwidth:this.uplinkStats?this.uplinkStats.B_uab/1e3:0,RTT:this.trafficStats?2*this.trafficStats.B_acd:0}}addLocalStats(e){this.localStats.set(e,void 0)}removeLocalStats(e){e?this.localStats.delete(e):this.localStats.clear()}addRemoteStats(e){this.remoteStats.set(e,{})}removeRemoteStats(e){e?this.remoteStats.delete(e):this.remoteStats.clear()}addP2PChannel(e){this.p2pChannel=e}updateTrafficStats(e){e.peer_delay=e.peer_delay.filter(e=>void 0!==e.B_ppad||void 0!==e.B_ppvd);e.peer_delay.filter(e=>-1===this.trafficStatsPeerList.indexOf(e.peer_uid)).forEach(e=>{var t;const i=null===(t=this.p2pChannel)||void 0===t?void 0:t.getRemoteMedia(e.peer_uid),n=null!=i&&i.videoSSRC?aI.measureFromSubscribeStart(this.store.clientId,i.videoSSRC):0,r=null!=i&&i.audioSSRC?aI.measureFromSubscribeStart(this.store.clientId,i.audioSSRC):0;void 0!==e.B_ppad&&void 0!==e.B_ppvd&&(this.onUploadPublishDuration&&this.onUploadPublishDuration(e.peer_uid,e.B_ppad,e.B_ppvd,n>r?n:r),this.trafficStatsPeerList.push(e.peer_uid))}),this.trafficStats=e}updateUplinkStats(e){this.uplinkStats&&this.uplinkStats.B_fir!==e.B_fir&&CE.debug("[".concat(this.store.clientId,"]: Period fir changes to ").concat(e.B_fir)),this.uplinkStats=e}static isRemoteVideoFreeze(e,t,i){if(!e)return!1;const n=!!i&&t.framesDecodeFreezeTime>i.framesDecodeFreezeTime,r=!i||t.framesDecodeCount>i.framesDecodeCount;return n||!r}static isRemoteAudioFreeze(e){return!!e&&e._isFreeze()}isLocalVideoFreeze(e){return!(!e.inputFrame||!e.sentFrame)&&(e.inputFrame.frameRate>5&&e.sentFrame.frameRate<3)}updateLocalStats(e){Array.from(this.localStats.entries()).forEach(t=>{let[i,n]=t;switch(i){case RS.LocalVideoTrack:case RS.LocalVideoLowTrack:{const t=n,r=dI({},Uf),o=e.getStats(),s=e.getLocalMedia(i);if(o){const i=o.videoSend.find(e=>e.ssrc===(null==s?void 0:s.ssrcs[0].ssrcId));if(i){const n=e.getLocalVideoSize(),o=e.getEncoderConfig(RS.LocalVideoTrack);"H264"!==i.codec&&"VP8"!==i.codec&&"VP9"!==i.codec&&"AV1X"!==i.codec&&"AV1"!==i.codec||(r.codecType=i.codec),r.sendBytes=i.bytes,r.sendBitrate=t?8*Math.max(0,r.sendBytes-t.sendBytes):0,i.inputFrame?(r.captureFrameRate=i.inputFrame.frameRate,r.captureResolutionHeight=i.inputFrame.height,r.captureResolutionWidth=i.inputFrame.width):n&&(r.captureResolutionWidth=n.width,r.captureResolutionHeight=n.height),i.sentFrame?(r.sendFrameRate=i.sentFrame.frameRate,r.sendResolutionHeight=i.sentFrame.height,r.sendResolutionWidth=i.sentFrame.width):n&&(r.sendResolutionWidth=n.width,r.sendResolutionHeight=n.height),i.avgEncodeMs&&(r.encodeDelay=i.avgEncodeMs),o&&o.bitrateMax&&(r.targetSendBitrate=1e3*o.bitrateMax),r.sendPackets=i.packets,r.sendPacketsLost=i.packetsLost,r.totalDuration=t?t.totalDuration+1:1,r.totalFreezeTime=t?t.totalFreezeTime:0,this.isLocalVideoFreeze(i)&&(r.totalFreezeTime+=1)}this.trafficStats&&(r.sendPacketsLost=this.trafficStats.B_pvlr4/100)}this.localStats.set(i,r),r&&s&&this.exceptionMonitor.setLocalVideoStats(this.store.uid,s.track,r);break}case RS.LocalAudioTrack:{const t=n,r=dI({},Mf),o=e.getStats(),s=e.getLocalMedia(i);if(o){const i=o.audioSend.find(e=>e.ssrc===(null==s?void 0:s.ssrcs[0].ssrcId));if(i){if("opus"!==i.codec&&"aac"!==i.codec&&"PCMU"!==i.codec&&"PCMA"!==i.codec&&"G722"!==i.codec||(r.codecType=i.codec),i.inputLevel)r.sendVolumeLevel=Math.round(32767*i.inputLevel);else{const t=e.getLocalAudioVolume();t&&(r.sendVolumeLevel=Math.round(32767*t))}r.sendBytes=i.bytes,r.sendPackets=i.packets,r.sendPacketsLost=i.packetsLost,r.sendBitrate=t?8*Math.max(0,r.sendBytes-t.sendBytes):0}}this.trafficStats&&(r.sendPacketsLost=this.trafficStats.B_pvlr4/100),this.localStats.set(RS.LocalAudioTrack,r),r&&s&&this.exceptionMonitor.setLocalAudioStats(this.store.uid,s.track,r);break}}})}updateRemoteStats(e){Array.from(this.remoteStats.entries()).forEach(t=>{let[i,{videoStats:n,audioStats:r,videoPcStats:o}]=t;const s=r,a=n,c=o,d=dI({},xf),u=dI({},Ff),l=dI({},Vf),{audioTrack:h,videoTrack:p,audioSSRC:_,videoSSRC:E}=e.getRemoteMedia(i),m=e.getStats(),f=null==m?void 0:m.audioRecv.find(e=>e.ssrc===_),S=null==m?void 0:m.videoRecv.find(e=>e.ssrc===E),T=this.trafficStats&&this.trafficStats.peer_delay.find(e=>e.peer_uid===i);if(f&&("opus"!==f.codec&&"aac"!==f.codec&&"PCMU"!==f.codec&&"PCMA"!==f.codec&&"G722"!==f.codec||(d.codecType=f.codec),f.outputLevel?d.receiveLevel=Math.round(32767*f.outputLevel):h&&(d.receiveLevel=Math.round(32767*h.getVolumeLevel())),d.receiveBytes=f.bytes,d.receivePackets=f.packets,d.receivePacketsLost=f.packetsLost,d.packetLossRate=d.receivePacketsLost/(d.receivePackets+d.receivePacketsLost),d.receiveBitrate=s?8*Math.max(0,d.receiveBytes-s.receiveBytes):0,d.totalDuration=s?s.totalDuration+1:1,d.totalFreezeTime=s?s.totalFreezeTime:0,d.freezeRate=d.totalFreezeTime/d.totalDuration,d.receiveDelay=f.jitterBufferMs,d.totalDuration>10&&uI.isRemoteAudioFreeze(h)&&(d.totalFreezeTime+=1)),S){"H264"!==S.codec&&"VP8"!==S.codec&&"VP9"!==S.codec&&"AV1X"!==S.codec&&"AV1"!==S.codec||(u.codecType=S.codec),u.receiveBytes=S.bytes,u.receiveBitrate=a?8*Math.max(0,u.receiveBytes-a.receiveBytes):0,u.decodeFrameRate=S.decodeFrameRate<0?0:S.decodeFrameRate,u.renderFrameRate=S.decodeFrameRate<0?0:S.decodeFrameRate,S.outputFrame&&(u.renderFrameRate=S.outputFrame.frameRate),S.receivedFrame?(u.receiveFrameRate=S.receivedFrame.frameRate,u.receiveResolutionHeight=S.receivedFrame.height,u.receiveResolutionWidth=S.receivedFrame.width):p&&(u.receiveResolutionHeight=p._videoHeight||0,u.receiveResolutionWidth=p._videoWidth||0),void 0!==S.framesRateFirefox&&(u.receiveFrameRate=Math.round(S.framesRateFirefox)),u.receivePackets=S.packets,u.receivePacketsLost=S.packetsLost,u.packetLossRate=u.receivePacketsLost/(u.receivePackets+u.receivePacketsLost),u.totalDuration=a?a.totalDuration+1:1,u.totalFreezeTime=a?a.totalFreezeTime:0,u.receiveDelay=S.jitterBufferMs||0;const t=!!E&&e.getRemoteVideoIsReady(E);p&&t&&uI.isRemoteVideoFreeze(p,S,c)&&(u.totalFreezeTime+=1),u.freezeRate=u.totalFreezeTime/u.totalDuration}T&&(d.end2EndDelay=T.B_ad,u.end2EndDelay=T.B_vd,d.transportDelay=T.B_ed,u.transportDelay=T.B_ed,d.currentPacketLossRate=T.B_ealr4/100,u.currentPacketLossRate=T.B_evlr4/100,l.uplinkNetworkQuality=T.B_punq?T.B_punq:0,l.downlinkNetworkQuality=T.B_pdnq?T.B_pdnq:0),this.remoteStats.set(i,{audioStats:d,videoStats:u,videoPcStats:S,networkStats:l}),h&&this.exceptionMonitor.setRemoteAudioStats(h,d),p&&this.exceptionMonitor.setRemoteVideoStats(p,u)})}}const lI=new class extends hE{get visibility(){return document.visibilityState}get lastHiddenTime(){return this._lastHiddenTime}get lastVisibleTime(){return this._lastVisibleTime}constructor(){super(),lp(this,"_lastHiddenTime",0),lp(this,"_lastVisibleTime",0),document.addEventListener("visibilitychange",()=>{"hidden"===document.visibilityState?this._lastHiddenTime=performance.now():this._lastVisibleTime=performance.now(),CE.debug("document visibility went ".concat(document.visibilityState)),this.emit("VISIBILITY_CHANGE",document.visibilityState)})}};function hI(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function pI(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?hI(Object(i),!0).forEach((function(t){lp(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):hI(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function _I(e){return e.match(/^[\.\:\d]+$/)?"".concat(e.replace(/[^\d]/g,"-"),".").concat(FE("TURN_DOMAIN")):(CE.info("Cannot recognized as IP address ".concat(e,". Used As Host instead")),e)}function EI(e,t){var i,n;const r=FE("GATEWAY_DOMAINS");let o=r[1]&&-1!==t.indexOf(r[1])?1:0;e.addresses=e.addresses||[];const s=e.addresses.map(e=>e.domain_prefix?{address:"".concat(e.domain_prefix,".").concat(r[o++%r.length],":").concat(e.port)}:e.ip.match(/^[\.\:\d]+$/)?{ip:e.ip,port:e.port,address:"".concat(e.ip.replace(/[^\d]/g,"-"),".").concat(r[o++%r.length],":").concat(e.port)}:(CE.info("Cannot recognized as IP address ".concat(e.ip,". Used As Host instead")),{ip:e.ip,port:e.port,address:"".concat(e.ip,":").concat(e.port)}));if(null!==(i=e.detail)&&void 0!==i&&i[18]&&"string"==typeof(null===(n=e.detail)||void 0===n?void 0:n[18])){const t=e.detail[18],i=null==t?void 0:t.split(";");for(let e=0;e<i.length;e++){var a;const t=mh(a=i[e]).call(a);s[e]&&t&&(s[e].ip6=t)}}return{gatewayAddrs:s,uid:e.uid,cid:e.cid,cert:e.cert,vid:e.detail&&e.detail[8],uni_lbs_ip:e.detail&&e.detail[1],res:e,csIp:e.detail&&e.detail[502]}}function mI(e){return"number"==typeof e?e:e.exact||e.ideal||e.max||e.min||0}function fI(e){const t=e._encoderConfig;if(!t)return{};const i={resolution:t.width&&t.height?"".concat(mI(t.width),"x").concat(mI(t.height)):void 0,maxVideoBW:t.bitrateMax,minVideoBW:t.bitrateMin};return"number"==typeof t.frameRate?(i.maxFrameRate=t.frameRate,i.minFrameRate=t.frameRate):t.frameRate&&(i.maxFrameRate=t.frameRate.max||t.frameRate.ideal||t.frameRate.exact||t.frameRate.min,i.minFrameRate=t.frameRate.min||t.frameRate.ideal||t.frameRate.exact||t.frameRate.max),i}function SI(e,t,i){var n,r,o,s,a,c,d,u;const l=t.videoSend.find(t=>t.ssrc===e);if(!l)return null;const h={id:wI(10,""),timestamp:new Date(t.timestamp).toISOString(),mediaType:"video",type:"ssrc",ssrc:l.ssrc.toString()},p=null!==(n=null!==(r=null===(o=l.inputFrame)||void 0===o?void 0:o.height)&&void 0!==r?r:null==i?void 0:i._videoHeight)&&void 0!==n?n:0,_=null!==(s=null!==(a=null===(c=l.inputFrame)||void 0===c?void 0:c.width)&&void 0!==a?a:null==i?void 0:i._videoWidth)&&void 0!==s?s:0,E=null!==(d=null===(u=l.inputFrame)||void 0===u?void 0:u.frameRate)&&void 0!==d?d:0;return p&&(h.A_fhi=p+""),_&&(h.A_fwi=_+""),E&&(h.A_fri=E+""),h}function TI(e){return e>=0&&e<.17?1:e>=.17&&e<.36?2:e>=.36&&e<.59?3:e>=.59&&e<=1?4:e>1?5:0}function gI(e,t){let i,n,r=void 0;switch(t){case US.CHOOSE_SERVER:i=4096,n="choose server";break;case US.CLOUD_PROXY:i=1048576,n="proxy";break;case US.CLOUD_PROXY_5:i=4194304,n="proxy5";break;case US.CLOUD_PROXY_FALLBACK:i=4194310,n="proxy fallback";break;default:throw new EE(_E.UNEXPECTED_ERROR,"multi unlibs response transformer get unknown service id",{csIp:e.detail&&e.detail[502],retry:!1})}if(e.response_body.forEach(t=>{t.buffer&&t.buffer.flag===i&&(r={code:t.buffer.code,addresses:(t.buffer.edges_services||[]).map(e=>pI(pI({},e),{},{ticket:t.buffer.cert})),server_ts:e.enter_ts,uid:t.buffer.uid,cid:t.buffer.cid,cname:t.buffer.cname,detail:pI(pI({},t.buffer.detail),e.detail),flag:t.buffer.flag,opid:e.opid,cert:t.buffer.cert})}),!r)throw new EE(_E.MULTI_UNILBS_RESPONSE_ERROR,"cannot parse response ".concat(n," from multi unilbs response"),{csIp:e.detail&&e.detail[502]});return r}async function RI(e,t){return await Sl.all(e.addresses.map(async e=>({address:_I(e.ip),tcpport:e.port,udpport:e.port,username:t&&FE("ENCRYPT_PROXY_USERNAME_AND_PSW")&&window.isSecureContext?t.toString():wE.username,password:t&&FE("ENCRYPT_PROXY_USERNAME_AND_PSW")&&window.isSecureContext?await Eg(t.toString()):wE.password})))}function II(e,t){const i=t._videoWidth||t.getMediaStreamTrack(!0).getSettings().width;return i||CE.warning("cannot get original video track's width, default scale down 4 times for low stream"),i?i/mI(e.width):4}function vI(e){let{candidateType:t,relayProtocol:i,type:n,address:r,port:o,protocol:s}=e;return"local-candidate"===n?{candidateType:t,relayProtocol:i,protocol:s}:{candidateType:t,relayProtocol:i,address:r,port:o,protocol:s}}function CI(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function yI(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?CI(Object(i),!0).forEach((function(t){lp(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):CI(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function AI(e){return window.TextEncoder?(new TextEncoder).encode(e).length:e.length}function OI(e){return new Sl(t=>{window.setTimeout(t,e)})}function bI(e){const t=new EE(_E.TIMEOUT,"timeout");return new Sl((i,n)=>{window.setTimeout(()=>n(t),e)})}function wI(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7,t=arguments.length>1?arguments[1]:void 0;const i=Math.random().toString(16).substr(2,e).toLowerCase();return i.length===e?"".concat(t).concat(i):"".concat(t).concat(i)+wI(e-i.length,"")}function NI(){return wI(32,"").toUpperCase()}const DI=()=>{};function PI(e){return new Sl((t,i)=>{let n=!1;const r=document.createElement("video");r.setAttribute("autoplay",""),r.setAttribute("muted",""),r.muted=!0,r.autoplay=!0,r.setAttribute("playsinline",""),r.setAttribute("style","position: fixed; top: 0; left: 0; width: 1px; height: 1px"),document.body.appendChild(r);const o=Kh()?"canplay":"playing";r.addEventListener(o,()=>{const e=r.videoWidth,i=r.videoHeight;!e&&Hh()||(n=!0,r.srcObject=null,r.remove(),t([e,i]))}),r.srcObject=new MediaStream([e]),r.play().catch(DI),setTimeout(()=>{n||(r.srcObject=null,r.remove(),t([r.videoWidth,r.videoHeight]))},4e3)})}function LI(e){return Sl.all(e.map(e=>e.then(e=>{throw e},e=>e))).then(e=>{throw e},e=>e)}function kI(e,t){for(var i=arguments.length,n=new Array(i>2?i-2:0),r=2;r<i;r++)n[r-2]=arguments[r];return 0===e.getListeners(t).length?Sl.reject(new EE(_E.UNEXPECTED_ERROR,"can not emit promise")):new Sl((i,r)=>{e.emit(t,...n,i,r)})}function MI(e,t){if(0===e.getListeners(t).length)return Sl.resolve();for(var i=arguments.length,n=new Array(i>2?i-2:0),r=2;r<i;r++)n[r-2]=arguments[r];return kI(e,t,...n)}function UI(e,t){if(0===e.getListeners(t).length)return null;for(var i=arguments.length,n=new Array(i>2?i-2:0),r=2;r<i;r++)n[r-2]=arguments[r];return xI(e,t,...n)}function xI(e,t){let i=null,n=null;for(var r=arguments.length,o=new Array(r>2?r-2:0),s=2;s<r;s++)o[s-2]=arguments[s];if(e.emit(t,...o,e=>{i=e},e=>{n=e}),null!==n)throw n;if(null===i)throw new EE(_E.UNEXPECTED_ERROR,"handler is not sync");return i}function VI(e,t){const i=e.indexOf(t);-1!==i&&e.splice(i,1)}function FI(e){const t=[];return e.forEach(e=>{-1===t.indexOf(e)&&t.push(e)}),t}function jI(e){Sl.resolve().then(e)}function BI(e){return JSON.parse(JSON.stringify(e))}const GI={};function WI(e,t){GI[t]||(GI[t]=!0,e())}function HI(e){const t=window.atob(e),i=new Uint8Array(new ArrayBuffer(t.length));for(let e=0;e<t.length;e+=1)i[e]=t.charCodeAt(e);return i}function KI(e){let t="";for(let i=0;i<e.length;i+=1)t+=String.fromCharCode(e[i]);return window.btoa(t)}const YI=new class{constructor(){lp(this,"fnMap",new Map)}throttleByKey(e,t,i,n){for(var r=arguments.length,o=new Array(r>4?r-4:0),s=4;s<r;s++)o[s-4]=arguments[s];if(this.fnMap.has(t)){const r=this.fnMap.get(t);if(r.threshold!==i){r.fn(...r.args),clearTimeout(r.timer);const s=window.setTimeout(()=>{const e=this.fnMap.get(t);e&&e.fn(...e.args),this.fnMap.delete(t)},i);this.fnMap.set(t,{fn:e,threshold:i,timer:s,args:o,skipFn:n})}else r.skipFn&&r.skipFn(...r.args),this.fnMap.set(t,yI(yI({},r),{},{fn:e,args:o,skipFn:n}))}else{const r=window.setTimeout(()=>{const e=this.fnMap.get(t);e&&e.fn(...e.args),this.fnMap.delete(t)},i);this.fnMap.set(t,{fn:e,threshold:i,timer:r,args:o,skipFn:n})}}},qI=YI.throttleByKey.bind(YI),JI=async e=>{let{fragementLength:t,referenceList:i,asyncMapHandler:n,allFailedhandler:r,promisesCollector:o}=e,s=0;const a=t;let c,d=0;const u=async()=>{const e=(()=>{const e=s*a,t=e+a;return i.slice(e,t).map(n)})();o&&o.push(...e);try{c=await LI(e)}catch(e){if(d+=a,s++,!(d>=i.length))return void await u();r(e)}e.forEach(e=>e.cancel())};return await u(),c};function XI(e){return"object"==typeof e&&null!==e&&!(e instanceof RegExp)}const zI={[_f.ACCESS_POINT]:{[ff.NO_FLAG_SET]:{desc:"flag is zero",retry:!1},[ff.FLAG_SET_BUT_EMPTY]:{desc:"flag is empty",retry:!1},[ff.INVALID_FALG_SET]:{desc:"invalid flag",retry:!1},[ff.FLAG_SET_BUT_NO_RE]:{desc:"flag set unilbs but no request",retry:!1},[ff.INVALID_SERVICE_ID]:{desc:"invalid service id",retry:!1},[ff.NO_SERVICE_AVAILABLE]:{desc:"no service available",retry:!0},[ff.NO_SERVICE_AVAILABLE_P2P]:{desc:"no unilbs p2p service available",retry:!0},[ff.NO_SERVICE_AVAILABLE_VOET]:{desc:"no unilbs voice service available",retry:!0},[ff.NO_SERVICE_AVAILABLE_WEBRTC]:{desc:"no unilbs webrtc service available",retry:!0},[ff.NO_SERVICE_AVAILABLE_CDS]:{desc:"no cds service available",retry:!0},[ff.NO_SERVICE_AVAILABLE_CDN]:{desc:"no cdn dispatcher service available",retry:!0},[ff.NO_SERVICE_AVAILABLE_TDS]:{desc:"no tds service available",retry:!0},[ff.NO_SERVICE_AVAILABLE_REPORT]:{desc:"no unilbs report service available",retry:!0},[ff.NO_SERVICE_AVAILABLE_APP_CENTER]:{desc:"no app center service available",retry:!0},[ff.NO_SERVICE_AVAILABLE_ENV0]:{desc:"no unilbs sig env0 service available",retry:!0},[ff.NO_SERVICE_AVAILABLE_VOET]:{desc:"no unilbs voet service available",retry:!0},[ff.NO_SERVICE_AVAILABLE_STRING_UID]:{desc:"no string uid service available",retry:!0},[ff.NO_SERVICE_AVAILABLE_WEBRTC_UNILBS]:{desc:"no webrtc unilbs service available",retry:!0}},[_f.UNILBS]:{[mf.INVALID_VENDOR_KEY]:{desc:"invalid vendor key, can not find appid",retry:!1},[mf.INVALID_CHANNEL_NAME]:{desc:"invalid channel name",retry:!1},[mf.INTERNAL_ERROR]:{desc:"unilbs internal error",retry:!1},[mf.NO_AUTHORIZED]:{desc:"invalid token, authorized failed",retry:!1},[mf.DYNAMIC_KEY_TIMEOUT]:{desc:"dynamic key or token timeout",retry:!1},[mf.NO_ACTIVE_STATUS]:{desc:"no active status",retry:!1},[mf.DYNAMIC_KEY_EXPIRED]:{desc:"dynamic key expired",retry:!1},[mf.STATIC_USE_DYNAMIC_KEY]:{desc:"static use dynamic key",retry:!1},[mf.DYNAMIC_USE_STATIC_KEY]:{desc:"dynamic use static key",retry:!1},[mf.USER_OVERLOAD]:{desc:"amount of users over load",retry:!1},[mf.FORBIDDEN_REGION]:{desc:"the request is forbidden in this area",retry:!1},[mf.CANNOT_MEET_AREA_DEMAND]:{desc:"unable to allocate services in this area",retry:!1}},[_f.STRING_UID_ALLOCATOR]:{[Ef.IIIEGAL_APPID]:{desc:"invalid appid",retry:!1},[Ef.IIIEGAL_UID]:{desc:"invalid string uid",retry:!1},[Ef.INTERNAL_ERROR]:{desc:"string uid allocator internal error",retry:!0}}};function QI(e){const t=zI[Math.floor(e/1e4)];if(!t)return{desc:"unkonw error",retry:!1};const i=t[e%1e4];if(!i){if(Math.floor(e/1e4)===_f.ACCESS_POINT){const t=e%1e4;if("1"===t.toString()[0])return{desc:e.toString(),retry:!1};if("2"===t.toString()[0])return{desc:e.toString(),retry:!0}}return{desc:"unkonw error",retry:!1}}return i}const ZI={[Sf.K_TIMESTAMP_EXPIRED]:{desc:"K_TIMESTAMP_EXPIRED",action:"failed"},[Sf.K_CHANNEL_PERMISSION_INVALID]:{desc:"K_CHANNEL_PERMISSION_INVALID",action:"failed"},[Sf.K_CERTIFICATE_INVALID]:{desc:"K_CERTIFICATE_INVALID",action:"failed"},[Sf.K_CHANNEL_NAME_EMPTY]:{desc:"K_CHANNEL_NAME_EMPTY",action:"failed"},[Sf.K_CHANNEL_NOT_FOUND]:{desc:"K_CHANNEL_NOT_FOUND",action:"failed"},[Sf.K_TICKET_INVALID]:{desc:"K_TICKET_INVALID",action:"failed"},[Sf.K_CHANNEL_CONFLICTED]:{desc:"K_CHANNEL_CONFLICTED",action:"failed"},[Sf.K_SERVICE_NOT_READY]:{desc:"K_SERVICE_NOT_READY",action:"tryNext"},[Sf.K_SERVICE_TOO_HEAVY]:{desc:"K_SERVICE_TOO_HEAVY",action:"tryNext"},[Sf.K_UID_BANNED]:{desc:"K_UID_BANNED",action:"failed"},[Sf.K_IP_BANNED]:{desc:"K_IP_BANNED",action:"failed"},[Sf.ERR_INVALID_VENDOR_KEY]:{desc:"ERR_INVALID_VENDOR_KEY",action:"failed"},[Sf.ERR_INVALID_CHANNEL_NAME]:{desc:"ERR_INVALID_CHANNEL_NAME",action:"failed"},[Sf.WARN_NO_AVAILABLE_CHANNEL]:{desc:"WARN_NO_AVAILABLE_CHANNEL",action:"failed"},[Sf.WARN_LOOKUP_CHANNEL_TIMEOUT]:{desc:"WARN_LOOKUP_CHANNEL_TIMEOUT",action:"tryNext"},[Sf.WARN_LOOKUP_CHANNEL_REJECTED]:{desc:"WARN_LOOKUP_CHANNEL_REJECTED",action:"failed"},[Sf.WARN_OPEN_CHANNEL_TIMEOUT]:{desc:"WARN_OPEN_CHANNEL_TIMEOUT",action:"tryNext"},[Sf.WARN_OPEN_CHANNEL_REJECTED]:{desc:"WARN_OPEN_CHANNEL_REJECTED",action:"failed"},[Sf.WARN_REQUEST_DEFERRED]:{desc:"WARN_REQUEST_DEFERRED",action:"failed"},[Sf.ERR_DYNAMIC_KEY_TIMEOUT]:{desc:"ERR_DYNAMIC_KEY_TIMEOUT",action:"failed"},[Sf.ERR_NO_AUTHORIZED]:{desc:"ERR_NO_AUTHORIZED",action:"failed"},[Sf.ERR_VOM_SERVICE_UNAVAILABLE]:{desc:"ERR_VOM_SERVICE_UNAVAILABLE",action:"tryNext"},[Sf.ERR_NO_CHANNEL_AVAILABLE_CODE]:{desc:"ERR_NO_CHANNEL_AVAILABLE_CODE",action:"failed"},[Sf.ERR_MASTER_VOCS_UNAVAILABLE]:{desc:"ERR_MASTER_VOCS_UNAVAILABLE",action:"tryNext"},[Sf.ERR_INTERNAL_ERROR]:{desc:"ERR_INTERNAL_ERROR",action:"tryNext"},[Sf.ERR_NO_ACTIVE_STATUS]:{desc:"ERR_NO_ACTIVE_STATUS",action:"failed"},[Sf.ERR_INVALID_UID]:{desc:"ERR_INVALID_UID",action:"failed"},[Sf.ERR_DYNAMIC_KEY_EXPIRED]:{desc:"ERR_DYNAMIC_KEY_EXPIRED",action:"failed"},[Sf.ERR_STATIC_USE_DYANMIC_KE]:{desc:"ERR_STATIC_USE_DYANMIC_KE",action:"failed"},[Sf.ERR_DYNAMIC_USE_STATIC_KE]:{desc:"ERR_DYNAMIC_USE_STATIC_KE",action:"failed"},[Sf.ERR_NO_VOCS_AVAILABLE]:{desc:"ERR_NO_VOCS_AVAILABLE",action:"tryNext"},[Sf.ERR_NO_VOS_AVAILABLE]:{desc:"ERR_NO_VOS_AVAILABLE",action:"tryNext"},[Sf.ERR_JOIN_CHANNEL_TIMEOUT]:{desc:"ERR_JOIN_CHANNEL_TIMEOUT",action:"tryNext"},[Sf.ERR_JOIN_BY_MULTI_IP]:{desc:"ERR_JOIN_BY_MULTI_IP",action:"recover"},[Sf.ERR_NOT_JOINED]:{desc:"ERR_NOT_JOINED",action:"failed"},[Sf.ERR_REPEAT_JOIN_REQUEST]:{desc:"ERR_REPEAT_JOIN_REQUEST",action:"quit"},[Sf.ERR_REPEAT_JOIN_CHANNEL]:{desc:"ERR_REPEAT_JOIN_CHANNEL",action:"quit"},[Sf.ERR_INVALID_VENDOR_KEY]:{desc:"ERR_INVALID_VENDOR_KEY",action:"failed"},[Sf.ERR_INVALID_CHANNEL_NAME]:{desc:"ERR_INVALID_CHANNEL_NAME",action:"failed"},[Sf.ERR_INVALID_STRINGUID]:{desc:"ERR_INVALID_STRINGUID",action:"failed"},[Sf.ERR_TOO_MANY_USERS]:{desc:"ERR_TOO_MANY_USERS",action:"tryNext"},[Sf.ERR_SET_CLIENT_ROLE_TIMEOUT]:{desc:"ERR_SET_CLIENT_ROLE_TIMEOUT",action:"failed"},[Sf.ERR_SET_CLIENT_ROLE_NO_PERMISSION]:{desc:"ERR_SET_CLIENT_ROLE_TIMEOUT",action:"failed"},[Sf.ERR_SET_CLIENT_ROLE_ALREADY_IN_USE]:{desc:"ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",action:"success"},[Sf.ERR_PUBLISH_REQUEST_INVALID]:{desc:"ERR_PUBLISH_REQUEST_INVALID",action:"failed"},[Sf.ERR_SUBSCRIBE_REQUEST_INVALID]:{desc:"ERR_SUBSCRIBE_REQUEST_INVALID",action:"failed"},[Sf.ERR_NOT_SUPPORTED_MESSAGE]:{desc:"ERR_NOT_SUPPORTED_MESSAGE",action:"failed"},[Sf.ERR_ILLEAGAL_PLUGIN]:{desc:"ERR_ILLEAGAL_PLUGIN",action:"failed"},[Sf.ILLEGAL_CLIENT_ROLE_LEVEL]:{desc:"ILLEGAL_CLIENT_ROLE_LEVEL",action:"failed"},[Sf.ERR_REJOIN_TOKEN_INVALID]:{desc:"ERR_REJOIN_TOKEN_INVALID",action:"failed"},[Sf.ERR_REJOIN_USER_NOT_JOINED]:{desc:"ERR_REJOIN_NOT_JOINED",action:"failed"},[Sf.ERR_INVALID_OPTIONAL_INFO]:{desc:"ERR_INVALID_OPTIONAL_INFO",action:"quit"},[Sf.ERR_TEST_RECOVER]:{desc:"ERR_TEST_RECOVER",action:"recover"},[Sf.ERR_TEST_TRYNEXT]:{desc:"ERR_TEST_TRYNEXT",action:"recover"},[Sf.ERR_TEST_RETRY]:{desc:"ERR_TEST_RETRY",action:"recover"},[Sf.ILLEGAL_AES_PASSWORD]:{desc:"ERR_TEST_RETRY",action:"failed"},[Sf.ERR_TOO_MANY_BROADCASTERS]:{desc:"ERR_TOO_MANY_BROADCASTERS",action:"failed"},[Sf.ERR_TOO_MANY_SUBSCRIBERS]:{desc:"ERR_TOO_MANY_SUBSCRIBERS",action:"failed"},[Sf.ERR_LICENSE_ILLEGAL]:{desc:"ERR_LICENSE_ILLEGAL",action:"quit"},[Sf.ERR_LICENSE_MISSING]:{desc:"ERR_LICENSE_MISSING",action:"quit"},[Sf.ERR_LICENSE_EXPIRED]:{desc:"ERR_LICENSE_EXPIRED",action:"quit"},[Sf.ERR_LICENSE_MINUTES_EXCEEDED]:{desc:"ERR_LICENSE_MINUTES_EXCEEDED",action:"quit"},[Sf.ERR_LICENSE_PERIOD_INVALID]:{desc:"ERR_LICENSE_PERIOD_INVALID",action:"quit"},[Sf.ERR_LICENSE_MULTIPLE_SDK_SERVICE]:{desc:"ERR_LICENSE_MULTIPLE_SDK_SERVICE",action:"quit"}};function $I(e){const t=ZI[e];return t||{desc:"UNKNOW_ERROR_".concat(e),action:"failed"}}function ev(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}class tv extends hE{get url(){return this.websocket?this.websocket.url:null}get reconnectMode(){return this._reconnectMode}set reconnectMode(e){["tryNext","recover"].includes(e)&&this.resetReconnectCount(e),this._reconnectMode=e}get state(){return this._state}set state(e){e!==this._state&&(this._state=e,"reconnecting"===this._state?this.emit(jf.RECONNECTING,this.reconnectReason):"connected"===this._state?this.emit(jf.CONNECTED):"closed"===this._state?this.emit(jf.CLOSED):"failed"===this._state&&this.emit(jf.FAILED))}resetReconnectCount(e){CE.debug("websocket reset reconnect count, reason: "+e),this.reconnectCount=0}constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4?arguments[4]:void 0;super(),lp(this,"connectionID",0),lp(this,"currentURLIndex",0),lp(this,"urls",void 0),lp(this,"_reconnectMode","tryNext"),lp(this,"reconnectReason",void 0),lp(this,"_initMutex",new vg("websocket")),lp(this,"name",void 0),lp(this,"_state","closed"),lp(this,"reconnectInterrupter",void 0),lp(this,"websocket",void 0),lp(this,"retryConfig",void 0),lp(this,"reconnectCount",0),lp(this,"forceCloseTimeout",5e3),lp(this,"onlineReconnectListener",void 0),lp(this,"useCompress",void 0),lp(this,"tryDoubleDomain",!1),lp(this,"wsInflateLength",0),lp(this,"wsDeflateLength",0),lp(this,"closeEstablishingWs",()=>{}),lp(this,"store",void 0),lp(this,"joinChannelServiceRecordIndex",void 0),this.store=r,this.name=e,this.retryConfig=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?ev(Object(i),!0).forEach((function(t){lp(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ev(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},t),this.useCompress=i,this.tryDoubleDomain=n;const{timeout:o,timeoutFactor:s}=t,a=Math.max(300,Math.floor(3*o/5)),c=Math.max(1.2,Math.floor(8*s)/10);CS.ONLINE&&(this.retryConfig.timeout=a,this.retryConfig.timeoutFactor=c),dg.on(yS.NETWORK_STATE_CHANGE,(e,t)=>{e!==t&&(this.resetReconnectCount("network state change: ".concat(t," -> ").concat(e)),e===CS.ONLINE?(this.retryConfig.timeout=a,this.retryConfig.timeoutFactor=c):(this.retryConfig.timeout=o,this.retryConfig.timeoutFactor=s))})}getConnection(){return this.websocket||void 0}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;this.forceCloseTimeout=t;const i=(t,i)=>{this.urls=e;const n=this.urls[this.currentURLIndex];this.state="connecting",this.createWebSocketConnection(n).then(t).catch(i),this.once(jf.CLOSED,()=>i(new EE(_E.WS_DISCONNECT))),this.once(jf.CONNECTED,()=>t())};return this._initMutex.lock().then(e=>new Sl((e,t)=>{i(e,t)}).then(()=>{e()}).catch(()=>{e()}))}close(e,t){if(this.currentURLIndex=0,this.resetReconnectCount("close"),this.reconnectInterrupter&&this.reconnectInterrupter(),this.websocket){this.websocket.onclose=null,this.websocket.onopen=null,this.websocket.onmessage=null;const e=this.websocket;t?setTimeout(()=>e.close(),500):e.close(),this.websocket=void 0}this.state=e?"failed":"closed",this.closeEstablishingWs&&this.closeEstablishingWs()}reconnect(e,t){if(!this.websocket)return void CE.warning("[".concat(this.name,"] can not reconnect, no websocket"));var i;(void 0!==e&&(this.reconnectMode=e),CE.debug("[".concat(this.name,"] reconnect is triggered initiative")),"number"==typeof this.joinChannelServiceRecordIndex)&&(null===(i=this.store)||void 0===i||i.recordJoinChannelService({status:"error",errors:[new Error(t)]},this.joinChannelServiceRecordIndex));const n=this.websocket.onclose;this.websocket.onclose=null,this.websocket.close(),n&&n.bind(this.websocket)({code:9999,reason:t})}sendMessage(e){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this.websocket||this.websocket.readyState!==WebSocket.OPEN)throw new EE(_E.WS_ABORT,"websocket is not ready");try{t||(e=JSON.stringify(e)),this.websocket.send(e)}catch(e){throw new EE(_E.WS_ERR,"send websocket message error"+e.toString())}}setWsInflateData(e){this.wsDeflateLength=this.wsDeflateLength+e.originLength,this.wsInflateLength=this.wsInflateLength+e.compressedLength}getWsInflateData(){const e=this.wsInflateLength,t=this.wsDeflateLength;return this.clearWsInflateData(),{wsInflateLength:e,wsDeflateLength:t}}clearWsInflateData(){this.wsInflateLength=0,this.wsDeflateLength=0}async createWebSocketConnection(e,t){return this.connectionID+=1,this.connectionID,this.joinChannelServiceRecordIndex=void 0,new Sl((i,n)=>{var r;const o=e=>{var t;null===(t=this.store)||void 0===t||t.signalChannelOpen(),CE.debug("[".concat(this.name,"] websocket opened:"),e),this.reconnectMode="retry",this.state="connected",this.resetReconnectCount("opened"),i()},s=async e=>{if(CE.debug("[".concat(this.name,"] websocket close ").concat(this.websocket&&this.websocket.url,", code: ").concat(e.code,", reason: ").concat(e.reason,", current mode: ").concat(this.reconnectMode)),this.reconnectCount<this.retryConfig.maxRetryCount){"connected"===this.state&&(this.reconnectReason=e.reason,this.state="reconnecting");const t=UI(this,jf.WILL_RECONNECT,this.reconnectMode)||this.reconnectMode,r=await this.reconnectWithAction(t);if("closed"===this.state)return void CE.debug("[".concat(this.connectionID,"] ws is closed, no need to reconnect"));if(!r)return n(new EE(_E.WS_DISCONNECT,"websocket reconnect failed: ".concat(e.code))),void this.close(!0);i()}else n(new EE(_E.WS_DISCONNECT,"websocket close: ".concat(e.code))),this.close()},a=e=>{this.emit(jf.ON_MESSAGE,e)};this.websocket&&(this.websocket.onclose=null,this.websocket.close()),FE("GATEWAY_WSS_ADDRESS")&&this.name.startsWith("gateway")&&(e=FE("GATEWAY_WSS_ADDRESS")),CE.debug("[".concat(this.name,"] start connect, url: ").concat(e));const c=null===(r=this.store)||void 0===r?void 0:r.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"gateway"});this.chooseBestWebsocketConnection(e,!!t,c).then(e=>{var t;this.websocket=e,o&&o(e.url),e.onclose=s,e.onmessage=a,null===(t=this.store)||void 0===t||t.recordJoinChannelService({endTs:Date.now(),status:"success"},c),this.joinChannelServiceRecordIndex=c}).catch(e=>{var t;if(null===(t=this.store)||void 0===t||t.recordJoinChannelService({endTs:Date.now(),status:e instanceof EE&&e.code===_E.WS_ABORT?"aborted":"error",errors:[e]},c),"closed"!==this.state){if(e instanceof EE&&e.code===_E.WS_ERR){const t=new EE(_E.WS_ERR,"init websocket failed! Error: ".concat(e.toString()));return CE.error("[".concat(this.name,"]").concat(t)),void n(t)}s&&s(e)}else n(new EE(_E.WS_DISCONNECT,"websocket is closed: ".concat(e.toString())))})})}async reconnectWithAction(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.reconnectCount>=this.retryConfig.maxRetryCount)return!1;if(!this.urls)return!1;if("closed"===this.state)return!1;this.onlineReconnectListener||dg.networkState!==CS.OFFLINE||(this.onlineReconnectListener=dg.onlineWaiter&&dg.onlineWaiter.then(()=>{this.onlineReconnectListener=void 0}));let i=!0;if(this.reconnectInterrupter=()=>{i=!1},t){const t=fE(this.reconnectCount,this.retryConfig);CE.debug("[".concat(this.name,"] wait ").concat(t,"ms to reconnect websocket, mode: ").concat(e)),await Sl.race([OI(t),this.onlineReconnectListener||new Sl(()=>{})])}if("closed"===this.state||!i)return!1;this.reconnectCount+=1;const n=async(e,t)=>{this.emit(jf.RECONNECT_CREATE_CONNECTION,t),await this.createWebSocketConnection(e)};try{if("retry"===e){const t=this.urls[this.currentURLIndex];this.emit(jf.RECONNECT_WAITTING_FINISH,e),await n(t,e)}else if("tryNext"===e){if(this.currentURLIndex+=1,this.currentURLIndex>=this.urls.length)return await this.reconnectWithAction("recover",!1);CE.debug("[".concat(this.name,"] websocket url length: ").concat(this.urls.length," current index: ").concat(this.currentURLIndex));const t=this.urls[this.currentURLIndex];this.emit(jf.RECONNECT_WAITTING_FINISH,e),await n(t,e)}else if("recover"===e){CE.debug("[".concat(this.name,"] request new urls")),this.resetReconnectCount("recover mode"),this.emit(jf.RECONNECT_WAITTING_FINISH,e),this.urls=await kI(this,jf.REQUEST_NEW_URLS),this.currentURLIndex=0;const t=this.urls[this.currentURLIndex];await n(t,e)}return!0}catch(i){var r;return CE.error("[".concat(this.name,"] reconnect failed"),i.toString()),null!=i&&null!==(r=i.data)&&void 0!==r&&r.desc&&Array.isArray(i.data.desc)&&i.data.desc.length&&i.data.desc.includes("dynamic key expired")?(this.emit(jf.ON_TOKEN_PRIVILEGE_DID_EXPIRE),!1):await this.reconnectWithAction(e,t)}}async chooseBestWebsocketConnection(e,t,i){return new Sl((n,r)=>{let o=!1;const s=[];this.closeEstablishingWs=()=>{CE.debug("[choose-best-ws] close establishing websockets"),s.forEach(e=>{e.onclose=null,e.onopen=null,e.onmessage=null,e.close()}),r(new EE(_E.WS_ABORT,"choose best websocket aborted"))};const a=FE("GATEWAY_DOMAINS");let c;const d=e.indexOf("?h="),u=a.find(t=>-1!==d?e.includes(t,d):e.includes(t));CE.debug("[choose-best-ws] currentDomain: ",u,", domains: ",a);let l=!this.tryDoubleDomain||t||!u;if(!l&&u){var h;const t=Date.now();try{a.forEach(t=>{const i=-1===d?e.replace(u,t):e.substr(0,d)+e.substr(d).replace(u,t),n=new WebSocket(i);n.binaryType="arraybuffer",s.push(n),CE.debug("[choose-best-ws] ws is connecting:",n.url)})}catch(e){for(CE.debug("[choose-best-ws] ws create failed, fallback to single url"),s.forEach(e=>e.close());s.length;)s.pop();l=!0}null===(h=this.store)||void 0===h||h.recordJoinChannelService({urls:s.map(e=>e.url),service:"gateway"},i),s.forEach(e=>{e.onopen=()=>{if(o)return;const i=Date.now()-t;CE.debug("[choose-best-ws] ws open cost ".concat(i,"ms")),s.filter(t=>t!==e).forEach(e=>{CE.debug("[choose-best-ws]close backup websocket: ".concat(e.url)),e.close()}),o=!0,n(e)},e.onclose=e=>{if(c=e,o)return;s.find(e=>!(e.readyState===WebSocket.CLOSED||e.readyState===WebSocket.CLOSING))||(CE.debug("[choose-best-ws] all websocket is closed"),o=!0,r(c))},e.onmessage=t=>{CE.debug("[choose-best-ws]".concat(e.url," onmessage: ").concat(t.data))}}),OI(this.forceCloseTimeout).then(()=>{s.forEach(e=>{e.readyState!==WebSocket.OPEN&&e.close()})})}if(l){var p;let t;CE.debug("[choose-best-ws] use single url: ",e),null===(p=this.store)||void 0===p||p.recordJoinChannelService({urls:[e],service:"gateway"},i);try{t=new WebSocket(e),s.push(t),t.binaryType="arraybuffer"}catch(e){const t=new EE(_E.WS_ERR,"init websocket failed! Error: ".concat(e.toString()));return CE.error("[".concat(this.name,"]").concat(t)),void r(t)}t.onopen=()=>{n(t)},t.onclose=e=>{r(e)},t.onmessage=e=>{CE.debug("[choose-best-ws]".concat(t.url," onmessage: ").concat(e.data))},OI(this.forceCloseTimeout).then(()=>{t&&t.readyState!==WebSocket.OPEN&&t.close()})}}).then(e=>(this.closeEstablishingWs=void 0,e)).catch(e=>{throw this.closeEstablishingWs=void 0,e})}}class iv{constructor(e){lp(this,"input",[]),lp(this,"size",void 0),this.size=e}add(e){this.input.push(e),this.input.length>this.size&&this.input.splice(0,1)}mean(){var e;return 0===this.input.length?0:zi(e=this.input).call(e,(e,t)=>e+t)/this.input.length}}class nv extends hE{get connectionState(){return this._connectionState}set connectionState(e){e!==this._connectionState&&(this._connectionState=e,e===vf.CONNECTED?this.emit(Cf.WS_CONNECTED):e===vf.RECONNECTING?this.emit(Cf.WS_RECONNECTING,this._websocketReconnectReason):e===vf.CLOSED&&this.emit(Cf.WS_CLOSED,this._disconnectedReason))}get currentURLIndex(){return this.websocket.currentURLIndex}get url(){return this.websocket?this.websocket.url:null}get rtt(){return this.rttRolling.mean()}constructor(e,t){super(),lp(this,"_disconnectedReason",void 0),lp(this,"_websocketReconnectReason",void 0),lp(this,"_connectionState",vf.CLOSED),lp(this,"reconnectToken",void 0),lp(this,"websocket",void 0),lp(this,"openConnectionTime",void 0),lp(this,"clientId",void 0),lp(this,"lastMsgTime",Date.now()),lp(this,"uploadCache",[]),lp(this,"uploadCacheInterval",void 0),lp(this,"rttRolling",new iv(5)),lp(this,"pingpongTimer",void 0),lp(this,"wsInflateDataTimer",void 0),lp(this,"pingpongTimeoutCount",0),lp(this,"joinResponse",void 0),lp(this,"multiIpOption",void 0),lp(this,"initError",void 0),lp(this,"spec",void 0),lp(this,"store",void 0),lp(this,"onWebsocketMessage",e=>{if(e.data instanceof ArrayBuffer)return void this.emit(Cf.ON_BINARY_DATA,e.data);const t=JSON.parse(e.data);if(this.lastMsgTime=Date.now(),Object.prototype.hasOwnProperty.call(t,"_id")){const e="res-@".concat(t._id);this.emit(e,t._result,t._message)}else if(Object.prototype.hasOwnProperty.call(t,"_type")){if(this.emit(t._type,t._message),t._type===Of.ON_NOTIFICATION&&this.handleNotification(t._message),t._type===Of.ON_USER_BANNED)switch(t._message.error_code){case 14:this.close(gf.UID_BANNED);break;case 15:this.close(gf.IP_BANNED);break;case 16:this.close(gf.CHANNEL_BANNED)}if(t._type===Of.ON_USER_LICENSE_BANNED)switch(t._message.error_code){case Sf.ERR_LICENSE_MISSING:this.close(gf.LICENSE_MISSING);break;case Sf.ERR_LICENSE_EXPIRED:this.close(gf.LICENSE_EXPIRED);break;case Sf.ERR_LICENSE_MINUTES_EXCEEDED:this.close(gf.LICENSE_MINUTES_EXCEEDED);break;case Sf.ERR_LICENSE_PERIOD_INVALID:this.close(gf.LICENSE_PERIOD_INVALID);break;case Sf.ERR_LICENSE_MULTIPLE_SDK_SERVICE:this.close(gf.LICENSE_MULTIPLE_SDK_SERVICE);break;case Sf.ERR_LICENSE_ILLEGAL:this.close(gf.LICENSE_ILLEGAL);break;default:this.close()}}}),this.clientId=e.clientId,this.spec=e,this.store=t,this.websocket=new tv("gateway-".concat(this.clientId),this.spec.retryConfig,!0,!0,t),this.handleWebsocketEvents(),window.addEventListener("offline",()=>{this.connectionState===vf.CONNECTED&&this.reconnect("retry",If.OFFLINE)})}async request(e,t,i,n){const r=wI(6,""),o={_id:r,_type:e,_message:t},s=this.websocket.connectionID,a=()=>new Sl((t,i)=>{if(this.connectionState===vf.CONNECTED)return t();const n=()=>{this.off(Cf.WS_CLOSED,r),t()},r=()=>{this.off(Cf.WS_CONNECTED,n),i(new EE(_E.WS_ABORT))};this.once(Cf.WS_CONNECTED,n),this.once(Cf.WS_CLOSED,r),e!==yf.PUBLISH&&e!==yf.SUBSCRIBE&&e!==yf.UNSUBSCRIBE&&e!==yf.UNPUBLISH&&e!==yf.CONTROL&&e!==yf.RESTART_ICE||this.once(Cf.DISCONNECT_P2P,()=>{i(new EE(_E.DISCONNECT_P2P))}),e!==yf.PUBLISH&&e!==yf.RESTART_ICE||this.once(Cf.ABORT_P2P_EXECUTION,()=>{i(new EE(_E.DISCONNECT_P2P))})});if(this.connectionState!==vf.CONNECTING&&this.connectionState!==vf.RECONNECTING||e===yf.JOIN||e===yf.REJOIN||await a(),this.websocket.sendMessage(o,!0),n)return;const c=new Sl((i,n)=>{let o=!1;const a=(n,r)=>{o=!0,i({isSuccess:"success"===n,message:r||{}}),this.off(Cf.WS_CLOSED,c),this.off(Cf.WS_RECONNECTING,c),this.emit(Cf.REQUEST_SUCCESS,e,t)};this.once("res-@".concat(r),a);const c=()=>{n(new EE(_E.WS_ABORT,"type: ".concat(e))),this.off(Cf.WS_CLOSED,c),this.off(Cf.WS_RECONNECTING,c),this.off("res-@".concat(r),a)};this.once(Cf.WS_CLOSED,c),this.once(Cf.WS_RECONNECTING,c),OI(FE("SIGNAL_REQUEST_TIMEOUT")).then(()=>{this.websocket.connectionID!==s||o||(CE.warning("ws request timeout, type: ".concat(e)),this.emit(Cf.REQUEST_TIMEOUT,e,t))})});let d=null;try{d=await c}catch(n){if(this.connectionState===vf.CLOSED||e===yf.LEAVE)throw new EE(_E.WS_ABORT);return!this.spec.forceWaitGatewayResponse||i?n.throw():e===yf.JOIN||e===yf.REJOIN?null:(await a(),await this.request(e,t))}if(d.isSuccess)return d.message;const u=Number(d.message.error_code||d.message.code),l=$I(u),h=new EE(_E.UNEXPECTED_RESPONSE,"".concat(l.desc,": ").concat(d.message.error_str),{code:u,data:d.message});return"success"===l.action?d.message:(CE.warning("[".concat(this.websocket.connectionID,"] unexpected response from type ").concat(e,", error_code: ").concat(u,", message: ").concat(l.desc,", action: ").concat(l.action)),u===Sf.ERR_TOO_MANY_BROADCASTERS?e===yf.JOIN||e===yf.REJOIN?(this.initError=h,this.close(),h.throw()):h.throw():"failed"===l.action?h.throw():"quit"===l.action?(this.initError=h,this.close(),h.throw()):(u===Sf.ERR_JOIN_BY_MULTI_IP?(this.multiIpOption=d.message.option,CE.warning("[".concat(this.clientId,"] detect multi ip, recover")),this.reconnect("recover",If.MULTI_IP)):this.reconnect(l.action,If.SERVER_ERROR),e===yf.JOIN||e===yf.REJOIN?null:await this.request(e,t)))}waitMessage(e,t){return new Sl(i=>{const n=r=>{(!t||t(r))&&(this.off(e,n),i(r))};this.on(e,n)})}upload(e,t){const i={_type:e,_message:t};try{this.websocket.sendMessage(i)}catch(e){const t=FE("MAX_UPLOAD_CACHE")||50;this.uploadCache.push(i),this.uploadCache.length>t&&this.uploadCache.splice(0,1),this.uploadCache.length>0&&!this.uploadCacheInterval&&(this.uploadCacheInterval=window.setInterval(()=>{if(this.connectionState!==vf.CONNECTED)return;const e=this.uploadCache.splice(0,1)[0];0===this.uploadCache.length&&(window.clearInterval(this.uploadCacheInterval),this.uploadCacheInterval=void 0),this.upload(e._type,e._message)},FE("UPLOAD_CACHE_INTERVAL")||2e3))}}send(e,t){const i={_type:e,_message:t};this.websocket.sendMessage(i)}init(e,t){return this.initError=void 0,this.multiIpOption=void 0,this.joinResponse=void 0,this.reconnectToken=void 0,this.openConnectionTime=void 0,new Sl((i,n)=>{this.once(Cf.WS_CONNECTED,()=>i(this.joinResponse)),this.once(Cf.WS_CLOSED,()=>n(this.initError||new EE(_E.WS_ABORT))),this.connectionState=vf.CONNECTING,this.websocket.init(e).catch(n),this.wsInflateDataTimer&&window.clearInterval(this.wsInflateDataTimer),this.wsInflateDataTimer=window.setInterval(()=>{this.handleWsInflateData()},2e4),setTimeout(()=>{t&&void 0===this.openConnectionTime&&(CE.debug("[".concat(this.clientId,"] init websocket timeout while join with fallback to proxy")),n(new EE(_E.INIT_WEBSOCKET_TIMEOUT)))},FE("JOIN_WITH_FALLBACK_PROXY_PENDING_DURATION"))})}close(e){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.wsInflateDataTimer&&(this.handleWsInflateData(),window.clearInterval(this.wsInflateDataTimer),this.wsInflateDataTimer=void 0),this.reconnectToken=void 0,this.joinResponse=void 0,this._disconnectedReason=e||gf.LEAVE,this.connectionState=vf.CLOSED,CE.debug("[".concat(this.clientId,"] ")+"will close websocket in signal"),this.websocket.close(),e===gf.FALLBACK&&(this.websocket.removeAllListeners(),this.websocket=new tv("gateway-".concat(this.clientId),this.spec.retryConfig,!0,!0,this.store),this.handleWebsocketEvents())}async join(){if(!this.joinResponse){this.emit(Cf.ABORT_P2P_EXECUTION);const e=await kI(this,Cf.REQUEST_JOIN_INFO),t=await this.request(yf.JOIN,e);if(!t)return this.emit(Cf.REPORT_JOIN_GATEWAY,_E.TIMEOUT,this.url||""),!1;this.joinResponse=t,this.emit(Cf.JOIN_RESPONSE,this.joinResponse),this.reconnectToken=this.joinResponse.rejoin_token}return this.connectionState=vf.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),!0}async rejoin(){if(!this.reconnectToken)throw new EE(_E.UNEXPECTED_ERROR,"can not rejoin, no rejoin token");const e=xI(this,Cf.REQUEST_REJOIN_INFO);e.token=this.reconnectToken;const t=await this.request(yf.REJOIN,e);return!!t&&(this.connectionState=vf.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),t.peers&&t.peers.forEach(e=>{this.emit(Of.ON_USER_ONLINE,{uid:e.uid}),e.audio&&this.emit(Of.ON_ADD_AUDIO_STREAM,{uid:e.uid,uint_id:e.uint_id,audio:!0,ssrcId:e.audio_ssrc}),e.video&&this.emit(Of.ON_ADD_VIDEO_STREAM,{uid:e.uid,uint_id:e.uint_id,video:!0,ssrcId:e.video_ssrc}),e.audio_mute?this.emit(Of.MUTE_AUDIO,{uid:e.uid}):this.emit(Of.UNMUTE_AUDIO,{uid:e.uid}),e.video_mute?this.emit(Of.MUTE_VIDEO,{uid:e.uid}):this.emit(Of.UNMUTE_VIDEO,{uid:e.uid}),e.audio_enable_local?this.emit(Of.ENABLE_LOCAL_AUDIO,{uid:e.uid}):this.emit(Of.DISABLE_LOCAL_AUDIO,{uid:e.uid}),e.video_enable_local?this.emit(Of.ENABLE_LOCAL_VIDEO,{uid:e.uid}):this.emit(Of.DISABLE_LOCAL_VIDEO,{uid:e.uid}),e.audio||e.video||this.emit(Of.ON_REMOVE_STREAM,{uid:e.uid,uint_id:e.uint_id})}),!0)}reconnect(e,t){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.websocket.reconnect(e,t)}handleNotification(e){CE.debug("[".concat(this.clientId,"] receive notification: "),e);const t=$I(e.code);if("success"!==t.action){if("failed"!==t.action)return"quit"===t.action?("ERR_REPEAT_JOIN_CHANNEL"===t.desc&&this.close(gf.UID_BANNED),void this.close()):void this.reconnect(t.action,If.SERVER_ERROR);CE.error("[".concat(this.clientId,"] ignore error: "),t.desc)}}handlePingPong(){if(!this.websocket||"connected"!==this.websocket.state)return;this.pingpongTimeoutCount>0&&this.rttRolling.add(3e3),this.pingpongTimeoutCount+=1;const e=FE("PING_PONG_TIME_OUT"),t=Date.now();this.pingpongTimeoutCount>=e&&(CE.warning("PINGPONG Timeout. Last Socket Message: ".concat(t-this.lastMsgTime,"ms")),t-this.lastMsgTime>FE("WEBSOCKET_TIMEOUT_MIN"))?this.reconnect("retry",If.TIMEOUT):this.request(yf.PING,void 0,!0).then(()=>{this.pingpongTimeoutCount=0;const e=Date.now()-t;this.rttRolling.add(e),FE("REPORT_STATS")&&this.send(yf.PING_BACK,{pingpongElapse:e})}).catch(e=>{})}handleWsInflateData(){const{wsInflateLength:e,wsDeflateLength:t}=this.websocket.getWsInflateData();0!==e&&0!==t&&this.upload(Af.WS_INFLATE_DATA_LENGTH,{ws_deflate_length:t,ws_inflate_length:e})}handleWebsocketEvents(){this.websocket.on(jf.RECONNECT_WAITTING_FINISH,e=>{this.emit(Cf.WS_RECONNECT_WAITTING_FINISH,e)}),this.websocket.on(jf.RECONNECT_CREATE_CONNECTION,e=>{this.emit(Cf.WS_RECONNECT_CREATE_CONNECTION,e)}),this.websocket.on(jf.ON_MESSAGE,this.onWebsocketMessage),this.websocket.on(jf.CLOSED,()=>{this.connectionState=vf.CLOSED}),this.websocket.on(jf.FAILED,()=>{this._disconnectedReason=gf.NETWORK_ERROR,this.connectionState=vf.CLOSED}),this.websocket.on(jf.RECONNECTING,e=>{this._websocketReconnectReason=e,this.joinResponse=void 0,this.connectionState===vf.CONNECTED?this.connectionState=vf.RECONNECTING:this.connectionState=vf.CONNECTING}),this.websocket.on(jf.WILL_RECONNECT,(e,t)=>{if(xI(this,Cf.IS_P2P_DISCONNECTED)&&"retry"===e)return CE.debug("".concat(this.clientId," reconnect mode is retry, but p2p lost, change to tryNext")),this.reconnectToken=void 0,this.emit(Cf.NEED_RENEW_SESSION),this.emit(Cf.DISCONNECT_P2P),t("tryNext");"retry"!==e&&(CE.debug("".concat(this.clientId," websockt will_connect event, renewSession reconnectMode is ").concat(e)),this.reconnectToken=void 0,this.emit(Cf.NEED_RENEW_SESSION),this.emit(Cf.DISCONNECT_P2P)),t(e)}),this.websocket.on(jf.CONNECTED,()=>{this.openConnectionTime=Date.now(),this.reconnectToken?this.rejoin().catch(e=>{CE.warning("[".concat(this.clientId,"] rejoin failed ").concat(e)),this.reconnect("tryNext",If.SERVER_ERROR)}):this.join().catch(e=>{if(this.emit(Cf.REPORT_JOIN_GATEWAY,e.message||e.code,this.url||""),e instanceof EE&&e.code===_E.UNEXPECTED_RESPONSE&&e.data.code===Sf.ERR_NO_AUTHORIZED)return CE.warning("[".concat(this.clientId,"] reconnect no authorized, recover")),void this.reconnect("recover",If.SERVER_ERROR);CE.error("[".concat(this.clientId,"] join gateway request failed"),e.toString()),this.spec.forceWaitGatewayResponse?this.reconnect("tryNext",If.SERVER_ERROR):(this.initError=e,this.close())})}),this.websocket.on(jf.REQUEST_NEW_URLS,(e,t)=>{kI(this,Cf.REQUEST_RECOVER,this.multiIpOption).then(e).catch(t)}),this.websocket.on(jf.ON_TOKEN_PRIVILEGE_DID_EXPIRE,()=>{this.emit(Of.ON_TOKEN_PRIVILEGE_DID_EXPIRE)})}}function rv(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}class ov extends hE{get url(){return this._url?this._url:null}get reconnectMode(){return this._reconnectMode}set reconnectMode(e){["tryNext","recover"].includes(e)&&this.resetReconnectCount(e),this._reconnectMode=e}get state(){return this._state}set state(e){e!==this._state&&(this._state=e,"reconnecting"===this._state?this.emit(PS.RECONNECTING,this.reconnectReason):"connected"===this._state?this.emit(PS.CONNECTED):"closed"===this._state?this.emit(PS.CLOSED):"failed"===this._state&&this.emit(PS.FAILED))}constructor(e,t,i,n){super(),lp(this,"connectionID",0),lp(this,"currentURLIndex",0),lp(this,"reconnectReason",void 0),lp(this,"_reconnectMode","tryNext"),lp(this,"_initMutex",void 0),lp(this,"_name",void 0),lp(this,"_state","closed"),lp(this,"_reconnectInterrupter",void 0),lp(this,"_url",void 0),lp(this,"_retryConfig",void 0),lp(this,"_reconnectCount",0),lp(this,"_forceCloseTimeout",5e3),lp(this,"_onlineReconnectListener",void 0),lp(this,"_closeEstablishingTransmitter",()=>{}),lp(this,"_store",void 0),lp(this,"_joinChannelServiceRecordIndex",void 0),lp(this,"_transmitter",void 0),lp(this,"_useCompress",void 0),lp(this,"_inflateLength",0),lp(this,"_deflateLength",0),this._store=n,this._name=e,this._retryConfig=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?rv(Object(i),!0).forEach((function(t){lp(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):rv(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},t),this._useCompress=i}resetReconnectCount(e){CE.debug("".concat(this._name," reset reconnect count, reason: ").concat(e)),this._reconnectCount=0}close(e,t){if(this.currentURLIndex=0,this.resetReconnectCount("close"),this._reconnectInterrupter&&this._reconnectInterrupter(),this._transmitter){this._transmitter.onclose=null,this._transmitter.onopen=null,this._transmitter.onmessage=null;const e=this._transmitter;t?setTimeout(()=>e.close(),500):e.close(),this._transmitter=void 0}this.state=e?"failed":"closed",this._closeEstablishingTransmitter&&this._closeEstablishingTransmitter()}reconnect(e,t){if(!this._transmitter)return void CE.warning("[".concat(this._name,"] can not reconnect, no websocket"));var i;(void 0!==e&&(this.reconnectMode=e),CE.debug("[".concat(this._name,"] reconnect is triggered initiative")),"number"==typeof this._joinChannelServiceRecordIndex)&&(null===(i=this._store)||void 0===i||i.recordJoinChannelService({status:"error",errors:[new Error(t)]},this._joinChannelServiceRecordIndex));const n=this._transmitter.onclose;this._transmitter.onclose=null,this._transmitter.close(),n&&n.bind(this._transmitter)({code:9999,reason:t})}getInflateData(){const e=this._inflateLength,t=this._deflateLength;return this.clearInflateData(),{inflateLength:e,deflateLength:t}}setInflateData(e){this._deflateLength=this._deflateLength+e.originLength,this._inflateLength=this._inflateLength+e.compressedLength}clearInflateData(){this._inflateLength=0,this._deflateLength=0}}function sv(e,t,i){if("getBigUint64"in DataView.prototype)return e.getBigUint64(t,i);const n=e.getUint32(t,i),r=e.getUint32(t+4,i),o=Number(!!i),s=Number(!i);return BigInt(n*s+r*o)<<BigInt(32)|BigInt(n*o+r*s)}function av(e,t,i,n){if("setBigUint64"in DataView.prototype)return e.setBigUint64(t,i,n);const r=Number(i>>BigInt(32)),o=Number(i&BigInt(4294967295));n?(e.setUint32(t+4,r,n),e.setUint32(t,o,n)):(e.setUint32(t,r,n),e.setUint32(t+4,o,n))}let cv;!function(e){e[e.Default=0]="Default",e[e.Ack=1]="Ack"}(cv||(cv={}));class dv{constructor(e,t,i){lp(this,"version",1),lp(this,"initialRTO",void 0),lp(this,"maxBatchAckCount",void 0),lp(this,"maxRTO",void 0),lp(this,"initialRTT",void 0),lp(this,"ID",void 0),lp(this,"rtt",void 0),lp(this,"packetNumber",1),lp(this,"rtoRatioMap",new Map),lp(this,"timeoutMap",new Map),lp(this,"unorderedPacketQueue",[]),lp(this,"batchAckPacketQueue",[]),lp(this,"lastOrderedPacketNumber",0),lp(this,"batchAckTimer",void 0),lp(this,"sendImpl",void 0),lp(this,"receiveImpl",void 0),this.sendImpl=e,this.receiveImpl=t,this.ID=wI(7,"transmitter-"),this.initialRTO=void 0!==(null==i?void 0:i.initialRTO)?i.initialRTO:FE("TRANSMITTER_INITIAL_RTO"),this.initialRTT=void 0!==(null==i?void 0:i.initialRTT)?i.initialRTT:FE("TRANSMITTER_INITIAL_RTT"),this.rtt=void 0!==(null==i?void 0:i.initialRTT)?i.initialRTT:FE("TRANSMITTER_INITIAL_RTT"),this.maxBatchAckCount=void 0!==(null==i?void 0:i.maxBatchAckCount)?i.maxBatchAckCount:FE("TRANSMITTER_MAX_BATCH_ACK_COUNT"),this.maxRTO=void 0!==(null==i?void 0:i.maxRTO)?i.maxRTO:FE("TRANSMITTER_MAX_RTO")}packetize(e,t){return{type:cv.Default,version:this.version,packetNumber:t,payload:e}}serialize(e){switch(e.type){case cv.Default:{let t;if("string"==typeof e.payload){t=(new TextEncoder).encode(e.payload)}else t=e.payload;const i=new ArrayBuffer(t.length+15),n=new DataView(i);n.setUint16(0,e.version),n.setUint8(2,e.type),n.setUint32(3,e.packetNumber),av(n,7,BigInt(e.sendTs));return new Uint8Array(n.buffer).set(t,15),i}case cv.Ack:{const t=new ArrayBuffer(16),i=new DataView(t);return i.setUint16(0,e.version),i.setUint8(2,e.type),i.setUint32(3,e.maxAckPacketNumber),i.setUint8(7,e.shift),av(i,8,BigInt(e.ackSendTs)),t}}}deserialize(e){const t=new DataView(e),i=t.getUint16(0),n=t.getUint8(2);switch(n){case cv.Default:{const r=t.getUint32(3),o=sv(t,7),s=e.slice(15),a=(new TextDecoder).decode(s);return{version:i,type:n,packetNumber:r,sendTs:Number(o),payload:a}}case cv.Ack:{const e=t.getUint32(3),r=t.getUint8(7),o=sv(t,8);return{version:i,type:n,maxAckPacketNumber:e,shift:r,ackSendTs:Number(o)}}default:throw CE.error("[".concat(this.ID,"] Unrecognized packet type ").concat(n)),new Error("Unrecognized packet type ".concat(n))}}sendMessage(e){const t=this.packetize(e,this.packetNumber);this.packetNumber=4294967295===this.packetNumber?1:this.packetNumber+1;const i=this.calculateRTO(t),n=window.setTimeout(()=>{this.resendMessage(t)},i);this.timeoutMap.set(t.packetNumber,n),this.sendPacket(t)}onData(e){const t=this.deserialize(e);t.type===cv.Default?this.ack(t):t.type===cv.Ack&&(this.updateRTT(t,Math.round(performance.now())),this.clearRTO(t))}close(){this.rtt=this.initialRTT,this.packetNumber=1,Array.from(this.timeoutMap.entries()).forEach(e=>{let[t,i]=e;window.clearTimeout(i)}),this.timeoutMap=new Map,this.rtoRatioMap=new Map,this.unorderedPacketQueue=[],this.batchAckPacketQueue=[],this.lastOrderedPacketNumber=0,void 0!==this.batchAckTimer&&window.clearTimeout(this.batchAckTimer)}resendMessage(e){const t=this.calculateRTO(e),i=window.setTimeout(()=>{this.resendMessage(e)},t);this.timeoutMap.set(e.packetNumber,i),this.sendPacket(e)}calculateRTO(e){const t=this.rtoRatioMap.get(e.packetNumber);if(void 0===t)return this.rtoRatioMap.set(e.packetNumber,1),this.initialRTO;{const i=9*this.rtt/8*t;return this.rtoRatioMap.set(e.packetNumber,t+1),i>this.maxRTO?this.maxRTO:i}}updateRTT(e,t){const i=e.ackSendTs;this.rtt=this.rtt*(7/8)+(t-i-this.rtt)/8}ack(e){if(e.packetNumber===this.lastOrderedPacketNumber+1)for(this.batchAckPacketQueue.length>=this.maxBatchAckCount&&this.batchAck(),this.batchAckTimer?this.batchAckPacketQueue.push(e):(this.batchAckPacketQueue.push(e),this.batchAckTimer=window.setTimeout(()=>{this.batchAck()},this.rtt/8)),this.lastOrderedPacketNumber+=1,this.receiveImpl(e.payload);;){const e=this.unorderedPacketQueue[0];if(!e){this.unorderedPacketQueue.shift();break}this.batchAckTimer&&this.batchAck(),this.receiveImpl(e.payload),this.unorderedPacketQueue.shift(),this.lastOrderedPacketNumber+=1}else if(e.packetNumber<=this.lastOrderedPacketNumber){const t={ackSendTs:e.sendTs,maxAckPacketNumber:e.packetNumber,shift:0,type:cv.Ack,version:this.version};this.sendPacket(t)}else if(e.packetNumber>this.lastOrderedPacketNumber){this.unorderedPacketQueue[e.packetNumber-this.lastOrderedPacketNumber-2]=e;const t={ackSendTs:e.sendTs,maxAckPacketNumber:e.packetNumber,shift:0,type:cv.Ack,version:this.version};this.sendPacket(t)}}batchAck(){window.clearTimeout(this.batchAckTimer),this.batchAckTimer=void 0;const e={ackSendTs:this.batchAckPacketQueue[this.batchAckPacketQueue.length-1].sendTs,maxAckPacketNumber:this.batchAckPacketQueue[this.batchAckPacketQueue.length-1].packetNumber,shift:this.batchAckPacketQueue.length-1,type:cv.Ack,version:this.version};this.sendPacket(e),this.batchAckPacketQueue=[]}sendPacket(e){e.type===cv.Default&&(e.sendTs=Math.round(performance.now()));const t=this.serialize(e);this.sendImpl(t)}clearRTO(e){for(let t=e.maxAckPacketNumber-e.shift;t<=e.maxAckPacketNumber;t++){const e=this.timeoutMap.get(t);void 0!==e&&window.clearTimeout(e),this.timeoutMap.delete(t),this.rtoRatioMap.delete(t)}}}class uv extends ov{constructor(e,t){super(e,t,arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3?arguments[3]:void 0),lp(this,"_initMutex",void 0),lp(this,"_reconnectInterrupter",void 0),lp(this,"_url",void 0),lp(this,"_transmitter",void 0),lp(this,"_addresses",void 0),lp(this,"_reliableTransmission",void 0),this._initMutex=new vg("datachannel");const{timeout:i,timeoutFactor:n}=t,r=Math.max(300,Math.floor(3*i/5)),o=Math.max(1.2,Math.floor(8*n)/10);CS.ONLINE&&(this._retryConfig.timeout=r,this._retryConfig.timeoutFactor=o),dg.on(yS.NETWORK_STATE_CHANGE,(e,t)=>{e!==t&&(this.resetReconnectCount("network state change: ".concat(t," -> ").concat(e)),e===CS.ONLINE?(this._retryConfig.timeout=r,this._retryConfig.timeoutFactor=o):(this._retryConfig.timeout=i,this._retryConfig.timeoutFactor=n))})}getConnection(){if(this._reliableTransmission)return this._reliableTransmission}async init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;this._forceCloseTimeout=t;const i=(t,i)=>{this._addresses=e,this.currentURLIndex=this._addresses.findIndex(e=>e.fingerprint||FE("FINGERPRINT"));const n=this._addresses[this.currentURLIndex];this.state="connecting",this.createTransmitterConnection(n).then(t).catch(i),this.once(PS.CLOSED,()=>i(new EE(_E.WS_DISCONNECT))),this.once(PS.CONNECTED,()=>t())};return this._initMutex.lock().then(e=>new Sl((e,t)=>{i(e,t)}).then(()=>{e()}).catch(()=>{e()}))}sendMessage(e){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this._transmitter||!this._reliableTransmission)throw new EE(_E.WS_ABORT,"datachannel is not ready");try{t||(e=JSON.stringify(e)),this._reliableTransmission.sendMessage(e)}catch(e){throw new EE(_E.WS_ERR,"send datachannel signal message error"+e.toString())}}unbindDcCloseEventListener(){this._transmitter&&(this._transmitter.onclose=null)}sendMessageWithJSON(e){const t=JSON.stringify(e);return{compressed:t,compressedLength:t.length,origin:e}}sendMessageWithUint8Array(e){return{compressed:e,compressedLength:e.byteLength,origin:e}}createTransmitterConnection(e){return this.connectionID+=1,this._joinChannelServiceRecordIndex=void 0,this._url="dc://".concat(e.ip,":").concat(e.port),new Sl((t,i)=>{var n;const r=()=>{CE.debug("[".concat(this._name,"] datachannel opened:"),this._url),this.reconnectMode="retry",this.state="connected",this.resetReconnectCount("opened"),t()},o=async e=>{var n;if(null===(n=this._closeEstablishingTransmitter)||void 0===n||n.call(this),CE.debug("[".concat(this._name,"] datachannel close ").concat(this._url,", code: ").concat(e.code,", reason: ").concat(e.reason,", current mode: ").concat(this.reconnectMode)),this._reconnectCount<this._retryConfig.maxRetryCount){"connected"===this.state&&(this.reconnectReason=e.reason,this.state="reconnecting");const n=UI(this,PS.WILL_RECONNECT,this.reconnectMode)||this.reconnectMode,r=await this.reconnectWithAction(n);if("closed"===this.state)return void CE.debug("[".concat(this.connectionID,"] dc is closed, no need to reconnect"));if(!r)return i(new EE(_E.WS_DISCONNECT,"datachannel reconnect failed: ".concat(e.code))),void this.close(!0);t()}else i(new EE(_E.WS_DISCONNECT,"datachannel close: ".concat(e.code))),this.close()},s=e=>{var t;null===(t=this._reliableTransmission)||void 0===t||t.onData(e.data)};this._transmitter&&(this._transmitter.onclose=null,this._transmitter.close()),this._reliableTransmission&&(this._reliableTransmission.close(),this._reliableTransmission=void 0),CE.debug("[".concat(this._name,"] start connect, address: ").concat(JSON.stringify(e)));const a=null===(n=this._store)||void 0===n?void 0:n.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"gateway"}),c=Date.now();kI(this,PS.TO_CONNECT_DATACHANNEL,e).then(e=>{var t,i;if(!e)throw new Error("transmissonInfo not exist yet");const{transmitter:n,close:d}=e;this._transmitter=n,null===(t=this._store)||void 0===t||t.signalChannelOpen();const u=Date.now()-c;CE.debug("[choose dc] dc open cost ".concat(u,"ms"));this._reliableTransmission=new dv(e=>{var t;this._transmitter&&"open"===this._transmitter.readyState&&(null===(t=this._transmitter)||void 0===t||t.send(e))},e=>{"string"==typeof e&&this.emit(PS.ON_MESSAGE,e)}),this._closeEstablishingTransmitter=()=>{var e;null===(e=this._reliableTransmission)||void 0===e||e.close(),this._reliableTransmission=void 0,d()},r&&r(),n.onclose=o,n.onmessage=s,null===(i=this._store)||void 0===i||i.recordJoinChannelService({endTs:Date.now(),status:"success"},a),this._joinChannelServiceRecordIndex=a}).catch(e=>{var t;if(null===(t=this._store)||void 0===t||t.recordJoinChannelService({endTs:Date.now(),status:e instanceof EE&&e.code===_E.WS_ABORT?"aborted":"error",errors:[e]},a),"closed"!==this.state){if(e instanceof EE&&e.code===_E.WS_ERR){const t=new EE(_E.WS_ERR,"init datachannel failed! Error: ".concat(e.toString()));return CE.error("[".concat(this._name,"]").concat(t)),void i(t)}o&&o(e)}else i(new EE(_E.WS_DISCONNECT,"datachannel is closed: ".concat(e.toString())))})})}async reconnectWithAction(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this._reconnectCount>=this._retryConfig.maxRetryCount)return!1;if(!this._addresses)return!1;if("closed"===this.state)return!1;this._onlineReconnectListener||dg.networkState!==CS.OFFLINE||(this._onlineReconnectListener=dg.onlineWaiter&&dg.onlineWaiter.then(()=>{this._onlineReconnectListener=void 0}));let i=!0;if(this._reconnectInterrupter=()=>{i=!1},t){const t=fE(this._reconnectCount,this._retryConfig);CE.debug("[".concat(this._name,"] wait ").concat(t,"ms to reconnect datachannel, mode: ").concat(e)),await Sl.race([OI(t),this._onlineReconnectListener||new Sl(()=>{})])}if("closed"===this.state||!i)return!1;this._reconnectCount+=1;const n=async(e,t)=>{this.emit(PS.RECONNECT_CREATE_CONNECTION,t),await this.createTransmitterConnection(e)};try{if("retry"===e){const t=this._addresses[this.currentURLIndex];this.emit(PS.RECONNECT_WAITTING_FINISH,e),await n(t,e)}else if("tryNext"===e){this.currentURLIndex+=1;for(let e=this.currentURLIndex;e<this._addresses.length;e++){if(this._addresses[e].fingerprint||FE("FINGERPRINT")){this.currentURLIndex=e;break}this.currentURLIndex+=1}if(this.currentURLIndex>=this._addresses.length)return CE.debug("[".concat(this._name,"] the available addresses are exhausted, change to recover")),await this.reconnectWithAction("recover",!1);CE.debug("[".concat(this._name,"] datachannel url length: ").concat(this._addresses.length," current index: ").concat(this.currentURLIndex));const t=this._addresses[this.currentURLIndex];this.emit(PS.RECONNECT_WAITTING_FINISH,e),await n(t,e)}else"recover"===e&&(CE.debug("[".concat(this._name,"] start to failback to websocket")),this.resetReconnectCount("recover mode"),this.emit(PS.RECONNECT_WAITTING_FINISH,e),this.emit(PS.FAILBACK));return!0}catch(i){var r;return CE.error("[".concat(this._name,"] reconnect failed"),i.toString()),null!=i&&null!==(r=i.data)&&void 0!==r&&r.desc&&Array.isArray(i.data.desc)&&i.data.desc.length&&i.data.desc.includes("dynamic key expired")?(this.emit(PS.ON_TOKEN_PRIVILEGE_DID_EXPIRE),!1):await this.reconnectWithAction(e,t)}}}class lv extends hE{get connectionState(){return this._connectionState}set connectionState(e){e!==this._connectionState&&(this._connectionState=e,e===vf.CONNECTED?this.emit(Cf.WS_CONNECTED):e===vf.RECONNECTING?this.emit(Cf.WS_RECONNECTING,this._websocketReconnectReason):e===vf.CLOSED&&this.emit(Cf.WS_CLOSED,this._disconnectedReason))}get currentURLIndex(){return this.websocket.currentURLIndex}get url(){return this.websocket?this.websocket.url:null}get rtt(){return this.rttRolling.mean()}constructor(e,t){super(),lp(this,"_disconnectedReason",void 0),lp(this,"_websocketReconnectReason",void 0),lp(this,"_connectionState",vf.CLOSED),lp(this,"reconnectToken",void 0),lp(this,"websocket",void 0),lp(this,"openConnectionTime",void 0),lp(this,"clientId",void 0),lp(this,"lastMsgTime",Date.now()),lp(this,"uploadCache",[]),lp(this,"uploadCacheInterval",void 0),lp(this,"rttRolling",new iv(5)),lp(this,"pingpongTimer",void 0),lp(this,"inflateDataTimer",void 0),lp(this,"pingpongTimeoutCount",0),lp(this,"joinResponse",void 0),lp(this,"multiIpOption",void 0),lp(this,"initError",void 0),lp(this,"spec",void 0),lp(this,"store",void 0),lp(this,"onWebsocketMessage",e=>{if(e instanceof ArrayBuffer)return void this.emit(Cf.ON_BINARY_DATA,e);const t=JSON.parse(e);if(this.lastMsgTime=Date.now(),Object.prototype.hasOwnProperty.call(t,"_id")){const e="res-@".concat(t._id);this.emit(e,t._result,t._message)}else if(Object.prototype.hasOwnProperty.call(t,"_type")&&(this.emit(t._type,t._message),t._type===Of.ON_NOTIFICATION&&this.handleNotification(t._message),t._type===Of.ON_USER_BANNED))switch(t._message.error_code){case 14:this.close(gf.UID_BANNED);break;case 15:this.close(gf.IP_BANNED);break;case 16:this.close(gf.CHANNEL_BANNED)}}),this.clientId=e.clientId,this.spec=e,this.store=t,this.websocket=new uv("gateway-".concat(this.clientId),this.spec.retryConfig,!0,t),this.handleWebsocketEvents(),window.addEventListener("offline",()=>{this.connectionState===vf.CONNECTED&&this.reconnect("retry",DS.OFFLINE)})}async request(e,t,i,n){const r=wI(6,""),o={_id:r,_type:e,_message:t},s=this.websocket.connectionID,a=()=>new Sl((t,i)=>{if(this.connectionState===vf.CONNECTED)return t();const n=()=>{this.off(Cf.WS_CLOSED,r),t()},r=()=>{this.off(Cf.WS_CONNECTED,n),i(new EE(_E.WS_ABORT))};this.once(Cf.WS_CONNECTED,n),this.once(Cf.WS_CLOSED,r),e!==yf.PUBLISH&&e!==yf.SUBSCRIBE&&e!==yf.UNSUBSCRIBE&&e!==yf.UNPUBLISH&&e!==yf.CONTROL&&e!==yf.RESTART_ICE||this.once(Cf.DISCONNECT_P2P,()=>{i(new EE(_E.DISCONNECT_P2P))}),e!==yf.PUBLISH&&e!==yf.RESTART_ICE||this.once(Cf.ABORT_P2P_EXECUTION,()=>{i(new EE(_E.DISCONNECT_P2P))})});if(this.connectionState!==vf.CONNECTING&&this.connectionState!==vf.RECONNECTING||e===yf.JOIN||e===yf.REJOIN||await a(),e===yf.LEAVE&&(this.websocket.unbindDcCloseEventListener(),n=!0),this.websocket.sendMessage(o,!0,!1),n)return;const c=new Sl((i,n)=>{let o=!1;const a=(n,r)=>{o=!0,i({isSuccess:"success"===n,message:r||{}}),this.off(Cf.WS_CLOSED,c),this.off(Cf.WS_RECONNECTING,c),this.emit(Cf.REQUEST_SUCCESS,e,t)};this.once("res-@".concat(r),a);const c=()=>{n(new EE(_E.WS_ABORT,"type: ".concat(e))),this.off(Cf.WS_CLOSED,c),this.off(Cf.WS_RECONNECTING,c),this.off("res-@".concat(r),a)};this.once(Cf.WS_CLOSED,c),this.once(Cf.WS_RECONNECTING,c),OI(FE("SIGNAL_REQUEST_TIMEOUT")).then(()=>{this.websocket.connectionID!==s||o||(CE.warning("dc request timeout, type: ".concat(e)),this.emit(Cf.REQUEST_TIMEOUT,e,t))})});let d=null;try{d=await c}catch(n){if(this.connectionState===vf.CLOSED||e===yf.LEAVE)throw new EE(_E.WS_ABORT);return!this.spec.forceWaitGatewayResponse||i?n.throw():e===yf.JOIN||e===yf.REJOIN?null:(await a(),await this.request(e,t))}if(d.isSuccess)return d.message;const u=Number(d.message.error_code||d.message.code),l=$I(u),h=new EE(_E.UNEXPECTED_RESPONSE,"".concat(l.desc,": ").concat(d.message.error_str),{code:u,data:d.message});return"success"===l.action?d.message:(CE.warning("[".concat(this.websocket.connectionID,"] unexpected response from type ").concat(e,", error_code: ").concat(u,", message: ").concat(l.desc,", action: ").concat(l.action)),u===Sf.ERR_TOO_MANY_BROADCASTERS?e===yf.JOIN||e===yf.REJOIN?(this.initError=h,this.close(),h.throw()):h.throw():"failed"===l.action?h.throw():"quit"===l.action?(this.initError=h,this.close(),h.throw()):(u===Sf.ERR_JOIN_BY_MULTI_IP?(this.multiIpOption=d.message.option,CE.warning("[".concat(this.clientId,"] detect multi ip, recover")),this.reconnect("recover",DS.MULTI_IP)):this.reconnect(l.action,DS.SERVER_ERROR),e===yf.JOIN||e===yf.REJOIN?null:await this.request(e,t)))}waitMessage(e,t){return new Sl(i=>{const n=r=>{(!t||t(r))&&(this.off(e,n),i(r))};this.on(e,n)})}upload(e,t){const i={_type:e,_message:t};try{this.websocket.sendMessage(i)}catch(e){const t=FE("MAX_UPLOAD_CACHE")||50;this.uploadCache.push(i),this.uploadCache.length>t&&this.uploadCache.splice(0,1),this.uploadCache.length>0&&!this.uploadCacheInterval&&(this.uploadCacheInterval=window.setInterval(()=>{if(this.connectionState!==vf.CONNECTED)return;const e=this.uploadCache.splice(0,1)[0];0===this.uploadCache.length&&(window.clearInterval(this.uploadCacheInterval),this.uploadCacheInterval=void 0),this.upload(e._type,e._message)},FE("UPLOAD_CACHE_INTERVAL")||2e3))}}send(e,t){const i={_type:e,_message:t};this.websocket.sendMessage(i)}init(e,t){return this.initError=void 0,this.multiIpOption=void 0,this.joinResponse=void 0,this.reconnectToken=void 0,this.openConnectionTime=void 0,new Sl((i,n)=>{this.once(Cf.WS_CONNECTED,()=>i(this.joinResponse)),this.once(Cf.WS_CLOSED,()=>n(this.initError||new EE(_E.WS_ABORT))),this.connectionState=vf.CONNECTING,this.websocket.init(e).catch(n),this.websocket.once(PS.FAILBACK,()=>{void 0===this.openConnectionTime&&n(new EE(_E.INIT_DATACHANNEL_TIMEOUT))}),this.inflateDataTimer&&window.clearInterval(this.inflateDataTimer),this.inflateDataTimer=window.setInterval(()=>{this.handleInflateData()},2e4),setTimeout(()=>{t&&void 0===this.openConnectionTime&&(CE.debug("[".concat(this.clientId,"] init datachannel timeout while join with failback to websocket")),n(new EE(_E.INIT_DATACHANNEL_TIMEOUT)))},FE("DC_JOIN_WITH_FAILBACK"))})}close(e){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.inflateDataTimer&&(this.handleInflateData(),window.clearInterval(this.inflateDataTimer),this.inflateDataTimer=void 0),this.reconnectToken=void 0,this.joinResponse=void 0,this._disconnectedReason=e||gf.LEAVE,this.connectionState=vf.CLOSED,CE.debug("[".concat(this.clientId,"] ")+"will close datachannel in signal"),this.websocket.close(),e===gf.FALLBACK&&(this.websocket.removeAllListeners(),this.websocket=new uv("gateway-".concat(this.clientId),this.spec.retryConfig,!0,this.store),this.handleWebsocketEvents())}async join(){if(!this.joinResponse){this.emit(Cf.ABORT_P2P_EXECUTION);const e=await kI(this,Cf.DATACHANNEL_CONNECTING),t=await this.request(yf.JOIN,e);if(!t)return this.emit(Cf.REPORT_JOIN_GATEWAY,_E.TIMEOUT,this.url||""),!1;this.joinResponse=t,this.emit(Cf.JOIN_RESPONSE,this.joinResponse),this.reconnectToken=this.joinResponse.rejoin_token}return this.connectionState=vf.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),!0}async rejoin(){if(!this.reconnectToken)throw new EE(_E.UNEXPECTED_ERROR,"can not rejoin, no rejoin token");const e=xI(this,Cf.REQUEST_REJOIN_INFO);e.token=this.reconnectToken;const t=await this.request(yf.REJOIN,e);return!!t&&(this.connectionState=vf.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),t.peers&&t.peers.forEach(e=>{this.emit(Of.ON_USER_ONLINE,{uid:e.uid}),e.audio&&this.emit(Of.ON_ADD_AUDIO_STREAM,{uid:e.uid,uint_id:e.uint_id,audio:!0,ssrcId:e.audio_ssrc}),e.video&&this.emit(Of.ON_ADD_VIDEO_STREAM,{uid:e.uid,uint_id:e.uint_id,video:!0,ssrcId:e.video_ssrc}),e.audio_mute?this.emit(Of.MUTE_AUDIO,{uid:e.uid}):this.emit(Of.UNMUTE_AUDIO,{uid:e.uid}),e.video_mute?this.emit(Of.MUTE_VIDEO,{uid:e.uid}):this.emit(Of.UNMUTE_VIDEO,{uid:e.uid}),e.audio_enable_local?this.emit(Of.ENABLE_LOCAL_AUDIO,{uid:e.uid}):this.emit(Of.DISABLE_LOCAL_AUDIO,{uid:e.uid}),e.video_enable_local?this.emit(Of.ENABLE_LOCAL_VIDEO,{uid:e.uid}):this.emit(Of.DISABLE_LOCAL_VIDEO,{uid:e.uid}),e.audio||e.video||this.emit(Of.ON_REMOVE_STREAM,{uid:e.uid,uint_id:e.uint_id})}),!0)}reconnect(e,t){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.websocket.reconnect(e,t)}handleNotification(e){CE.debug("[".concat(this.clientId,"] receive notification: "),e);const t=$I(e.code);if("success"!==t.action){if("failed"!==t.action)return"quit"===t.action?("ERR_REPEAT_JOIN_CHANNEL"===t.desc&&this.close(gf.UID_BANNED),void this.close()):void this.reconnect(t.action,DS.SERVER_ERROR);CE.error("[".concat(this.clientId,"] ignore error: "),t.desc)}}handlePingPong(){if(!this.websocket||"connected"!==this.websocket.state)return;this.pingpongTimeoutCount>0&&this.rttRolling.add(3e3),this.pingpongTimeoutCount+=1;const e=FE("PING_PONG_TIME_OUT"),t=Date.now();this.pingpongTimeoutCount>=e&&(CE.warning("PINGPONG Timeout. Last Socket Message: ".concat(t-this.lastMsgTime,"ms")),t-this.lastMsgTime>FE("WEBSOCKET_TIMEOUT_MIN"))?this.reconnect("retry",DS.TIMEOUT):this.request(yf.PING,void 0,!0).then(()=>{this.pingpongTimeoutCount=0;const e=Date.now()-t;this.rttRolling.add(e),FE("REPORT_STATS")&&this.send(yf.PING_BACK,{pingpongElapse:e})}).catch(e=>{})}handleInflateData(){const{inflateLength:e,deflateLength:t}=this.websocket.getInflateData();0!==e&&0!==t&&this.upload(Af.WS_INFLATE_DATA_LENGTH,{ws_deflate_length:t,ws_inflate_length:e})}handleWebsocketEvents(){this.websocket.on(PS.RECONNECT_WAITTING_FINISH,e=>{this.emit(Cf.WS_RECONNECT_WAITTING_FINISH,e)}),this.websocket.on(PS.RECONNECT_CREATE_CONNECTION,e=>{this.emit(Cf.WS_RECONNECT_CREATE_CONNECTION,e)}),this.websocket.on(PS.ON_MESSAGE,this.onWebsocketMessage),this.websocket.on(PS.CLOSED,()=>{this.connectionState=vf.CLOSED}),this.websocket.on(PS.FAILED,()=>{this._disconnectedReason=gf.NETWORK_ERROR,this.connectionState=vf.CLOSED}),this.websocket.on(PS.RECONNECTING,e=>{this._websocketReconnectReason=e,this.joinResponse=void 0,this.connectionState===vf.CONNECTED?this.connectionState=vf.RECONNECTING:this.connectionState=vf.CONNECTING}),this.websocket.on(PS.WILL_RECONNECT,(e,t)=>{if(xI(this,Cf.IS_P2P_DISCONNECTED)&&"retry"===e)return CE.debug("".concat(this.clientId," reconnect mode is retry, but p2p lost, change to tryNext")),this.reconnectToken=void 0,this.emit(Cf.NEED_RENEW_SESSION),this.emit(Cf.DISCONNECT_P2P),t("tryNext");"retry"!==e&&(CE.debug("".concat(this.clientId," websockt will_connect event, renewSession reconnectMode is ").concat(e)),this.reconnectToken=void 0,this.emit(Cf.NEED_RENEW_SESSION),this.emit(Cf.DISCONNECT_P2P)),t(e)}),this.websocket.on(PS.CONNECTED,()=>{this.openConnectionTime=Date.now(),this.reconnectToken?this.rejoin().catch(e=>{CE.warning("[".concat(this.clientId,"] rejoin failed ").concat(e)),this.reconnect("tryNext",DS.SERVER_ERROR)}):this.join().catch(e=>{if(this.emit(Cf.REPORT_JOIN_GATEWAY,e.message||e.code,this.url||""),e instanceof EE&&e.code===_E.UNEXPECTED_RESPONSE&&e.data.code===Sf.ERR_NO_AUTHORIZED)return CE.warning("[".concat(this.clientId,"] reconnect no authorized, recover")),void this.reconnect("recover",DS.SERVER_ERROR);CE.error("[".concat(this.clientId,"] join gateway request failed"),e.toString()),this.spec.forceWaitGatewayResponse?this.reconnect("tryNext",DS.SERVER_ERROR):(this.initError=e,this.close())})}),this.websocket.on(PS.REQUEST_NEW_URLS,(e,t)=>{kI(this,Cf.REQUEST_RECOVER,this.multiIpOption).then(e).catch(t)}),this.websocket.on(PS.ON_TOKEN_PRIVILEGE_DID_EXPIRE,()=>{this.emit(Of.ON_TOKEN_PRIVILEGE_DID_EXPIRE)}),this.websocket.on(PS.TO_CONNECT_DATACHANNEL,async(e,t,i)=>kI(this,Cf.DATACHANNEL_PRECONNECT,e).then(t).catch(i)),this.websocket.on(PS.FAILBACK,()=>{void 0!==this.openConnectionTime&&this.emit(Cf.DATACHANNEL_FAILBACK)})}}function hv(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function pv(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?hv(Object(i),!0).forEach((function(t){lp(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):hv(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}const _v=new Map;class Ev extends hE{get state(){return this._state}set state(e){if(e===this._state)return;const t=this._state;this._state=e,"DISCONNECTED"===e&&this._disconnectedReason?this.emit(nS.CONNECTION_STATE_CHANGE,e,t,this._disconnectedReason):this.emit(nS.CONNECTION_STATE_CHANGE,e,t)}get joinGatewayStartTime(){return this._joinGatewayStartTime}set joinGatewayStartTime(e){CE.debug("[".concat(this.store.clientId,"] set joinGatewayStartTime at ").concat(e)),this._joinGatewayStartTime=e}constructor(e,t){super(),lp(this,"store",void 0),lp(this,"joinInfo",void 0),lp(this,"key",void 0),lp(this,"signal",void 0),lp(this,"role",void 0),lp(this,"inChannelInfo",{joinAt:null,duration:0}),lp(this,"spec",void 0),lp(this,"_state","DISCONNECTED"),lp(this,"_statsCollector",void 0),lp(this,"_disconnectedReason",void 0),lp(this,"isSignalRecover",!1),lp(this,"hasChangeBGPAddress",!1),lp(this,"trafficStatsInterval",void 0),lp(this,"networkQualityInterval",void 0),lp(this,"_joinGatewayStartTime",0),lp(this,"_signalTimeout",!1),lp(this,"_clientRoleOptions",void 0),lp(this,"_isProactiveJoin",!1),this.store=e,this.spec=t,this.signal=this.store.useDataChannel?new lv(pv(pv({},t),{},{retryConfig:t.websocketRetryConfig}),e):new nv(pv(pv({},t),{},{retryConfig:t.websocketRetryConfig}),e),this._statsCollector=t.statsCollector,this.role=t.role||"audience",this._clientRoleOptions=t.clientRoleOptions,this.handleSignalEvents()}async join(e,t,i){if(this.signal instanceof lv){let t=!1;"disabled"!==e.cloudProxyServer?(CE.debug("[".concat(this.store.clientId,"] Dc is not supported, because cloudProxyServer are not supported (").concat(e.cloudProxyServer,")")),t=!0):"".concat(e.apResponse.cid,"_").concat(e.apResponse.cert).length>255||"".concat(e.apResponse.cid,"_").concat(e.apResponse.cert).length<22?(CE.debug("[".concat(this.store.clientId,"] Dc is not supported, because ticket length is incorrect, it has to be between 22 and 255")),t=!0):e.apResponse.addresses.some(e=>e.fingerprint)||FE("FINGERPRINT")||(CE.debug("[".concat(this.store.clientId,"] Dc is not supported, because fingerprint does not exist")),t=!0),t&&this.resetSignal()}this.store.joinGatewayStart(),"disabled"!==e.cloudProxyServer&&(this.hasChangeBGPAddress=!0);const n=Date.now();let r=_v.get(e.cname);if(r||(r=new Map,_v.set(e.cname,r)),this._isProactiveJoin=!0,r.has(e.uid)){const t=new EE(_E.UID_CONFLICT);throw Tg.joinGateway(e.sid,{lts:n,succ:!1,ec:t.message,addr:null,uid:e.uid,cid:e.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!e.proxyServer,signalChannel:this.signal instanceof lv?"1":"0"}),this._isProactiveJoin=!1,t}r.set(e.uid,!0),this.joinInfo=e,this.key=t;let o=0;this.joinGatewayStartTime=n;const s=e.proxyServer;try{let t;if(CE.debug("[".concat(this.store.clientId,"] use ").concat(this.signal instanceof lv?"datachannel":"websocket"," join uid ").concat(o)),this.signal instanceof lv)t=await this.signal.init(e.apResponse.addresses,i);else{const n=e.proxyServer,r=n?e.gatewayAddrs.map(e=>{const t=e.address.split(":");return"wss://".concat(n,"/ws/?h=").concat(t[0],"&p=").concat(t[1])}):e.gatewayAddrs.map(e=>"wss://".concat(e.address));t=await this.signal.init(r,i)}o=t.uid,CE.debug("[".concat(this.store.clientId,"] ").concat(this.signal instanceof lv?"datachannel":"websocket"," join uid ").concat(o," cost ").concat(Date.now()-this.joinGatewayStartTime))}catch(t){if(t&&t.code===_E.INIT_WEBSOCKET_TIMEOUT)throw CE.warning("[".concat(this.store.clientId,"] User join failed"),t.toString()),t;if(t&&t.code===_E.INIT_DATACHANNEL_TIMEOUT)throw CE.warning("[".concat(this.store.clientId,"] User join datachannel failed"),t.toString()),this.resetSignal(),t;throw CE.error("[".concat(this.store.clientId,"] User join failed"),t.toString()),Tg.joinGateway(e.sid,{lts:n,succ:!1,ec:t.message,addr:this.signal.url,uid:e.uid,cid:e.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!s,signalChannel:this.signal instanceof lv?"1":"0"}),this._isProactiveJoin=!1,r.delete(e.uid),this.signal.close(),t}return this.state="CONNECTED",this.inChannelInfo.joinAt=Date.now(),CE.debug("[".concat(this.store.clientId,"] Connected to gateway server")),this.trafficStatsInterval=window.setInterval(()=>{this.updateTrafficStats().catch(e=>{CE.warning("[".concat(this.store.clientId,"] get traffic stats error"),e.toString())})},3e3),this.networkQualityInterval=window.setInterval(()=>{navigator&&void 0!==navigator.onLine&&!navigator.onLine?this.emit(nS.NETWORK_QUALITY,{downlinkNetworkQuality:6,uplinkNetworkQuality:6}):this._signalTimeout?this.emit(nS.NETWORK_QUALITY,{downlinkNetworkQuality:5,uplinkNetworkQuality:5}):"CONNECTED"===this.state&&this._statsCollector.trafficStats?this.emit(nS.NETWORK_QUALITY,{uplinkNetworkQuality:TI(this._statsCollector.trafficStats.B_unq),downlinkNetworkQuality:TI(this._statsCollector.trafficStats.B_dnq)}):this.emit(nS.NETWORK_QUALITY,{uplinkNetworkQuality:0,downlinkNetworkQuality:0})},2e3),this.store.joinGatewayEnd(),o}async leave(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;if("DISCONNECTED"!==this.state){t!==gf.FALLBACK&&(this.state="DISCONNECTING");try{e||this.signal.connectionState!==vf.CONNECTED||await function(e,t){return t===1/0?e:Sl.race([e,bI(t)])}(this.signal.request(yf.LEAVE,void 0,!0),3e3)}catch(e){CE.warning("[".concat(this.store.clientId,"] leave request failed, ignore"),e)}this.signal.close(t),t!==gf.FALLBACK&&(this.state="DISCONNECTED"),this.reset()}}async publish(e,t,i){if("CONNECTED"!==this.state&&"RECONNECTING"!==this.state)throw new EE(_E.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));const n={state:"offer",p2p_id:this.store.p2pId,ortc:t,mode:this.spec.mode,extend:FE("PUB_EXTEND"),twcc:!!FE("PUBLISH_TWCC")};try{return(await this.signal.request(yf.PUBLISH,n,!0))._message}catch(n){if(i&&n.data&&n.data.code===Sf.ERR_PUBLISH_REQUEST_INVALID)return CE.warning("[".concat(this.store.clientId,"] receive publish error code, retry"),n.toString()),await this.tryUnpubBeforeRepub(e,t),this.publish(e,t,!1);throw n}}async unpublish(e,t){try{if("CONNECTED"!==this.state&&"RECONNECTING"!==this.state)throw new EE(_E.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));await this.signal.request(yf.UNPUBLISH,{stream_id:t,ortc:e},!0)}catch(e){CE.warning("unpublish warning: ",e)}}async subscribe(e,t,i){if("CONNECTED"!==this.state&&"RECONNECTING"!==this.state)throw new EE(_E.INVALID_OPERATION,"can not subscribe when connection state is ".concat(this.state));const n={stream_id:e,stream_type:t.stream_type,mode:this.spec.mode,codec:this.spec.codec,p2p_id:this.store.p2pId,twcc:!!FE("SUBSCRIBE_TWCC"),extend:FE("SUB_EXTEND"),ssrcId:t.ssrcId};try{return(await this.signal.request(yf.SUBSCRIBE,n,!0))._message}catch(n){if(i&&n.data&&n.data.code===Sf.ERR_SUBSCRIBE_REQUEST_INVALID)return CE.warning("[".concat(this.store.clientId,"] receiver subscribe error code, retry"),n.toString()),await this.tryUnsubBeforeResub(e,t),await this.subscribe(e,t,!1);throw n}}async subscribeAll(e,t){if("CONNECTED"!==this.state&&"RECONNECTING"!==this.state)throw new EE(_E.INVALID_OPERATION,"can not massSubscribe when connection state is ".concat(this.state));const i={p2p_id:this.store.p2pId,users:e,dtx:!1};try{return await this.signal.request(yf.SUBSCRIBE_STREAMS,i,!0)}catch(i){if(t&&i.data&&i.data.code===Sf.ERR_SUBSCRIBE_REQUEST_INVALID)return CE.warning("[".concat(this.store.clientId,"] receiver massSubscribe error code, retry"),i.toString()),await this.tryMassUnsubBeforeResub(e),await this.subscribeAll(e,!1);throw i}}async setVideoProfile(e){const t=function(e){if(!(e.bitrateMax&&e.bitrateMin&&e.frameRate&&e.height&&e.width))return;let t=e.frameRate,i=e.width,n=e.height,r=!0;return"number"!=typeof t&&(t=t.exact||t.ideal||t.max||t.min||0,t||(r=!1)),"number"!=typeof i&&(i=i.exact||i.ideal||i.max||i.min||0,i||(r=!1)),"number"!=typeof n&&(n=n.exact||n.ideal||n.max||n.min||0,t||(r=!1)),r?{stream_type:0,width:i,height:n,fps:t,start_bps:1e3*e.bitrateMax,min_bps:1e3*e.bitrateMin,target_bps:1e3*e.bitrateMax}:void 0}(e);if(t)return this.signal.request(yf.SET_VIDEO_PROFILE,t);CE.debug("[".concat(this.store.clientId,"] encoder config is not complete, do not report to gateway"))}async unsubscribe(e,t){try{await this.signal.request(yf.UNSUBSCRIBE,{p2p_id:this.store.p2pId,ortc:e,stream_id:t},!0)}catch(e){CE.warning("unsubscribe warning: ",e)}}async massUnsubscribe(e){try{await this.signal.request(yf.UNSUBSCRIBE_STREAMS,e,!0)}catch(e){CE.warning("unsubscribeAll warning: ",e)}}async reconnectPC(e){const{iceParameters:t,dtlsParameters:i,rtpCapabilities:n}=e;return{gatewayEstablishParams:await this.signal.request(yf.CONNECT_PC,{p2p_id:this.store.p2pId,stream_id:this.store.uid,ortc:{iceParameters:t,dtlsParameters:i,rtpCapabilities:n}},!0),gatewayAddress:this.getCurrentGatewayAddress()}}getGatewayInfo(){return this.signal.request(yf.GATEWAY_INFO)}renewToken(e){return this.signal.request(yf.RENEW_TOKEN,e)}async setClientRole(e,t){if(t&&(this._clientRoleOptions=Object.assign({},t)),"CONNECTED"!==this.state)return void(this.role=e);let i=void 0;i="audience"===e?this._clientRoleOptions&&this._clientRoleOptions.level?this._clientRoleOptions.level:2:0,await this.signal.request(yf.SET_CLIENT_ROLE,{role:e,level:i,client_ts:Date.now()}),this.role=e}async setRemoteVideoStreamType(e,t){await this.signal.request(yf.SWITCH_VIDEO_STREAM,{stream_id:e,stream_type:t})}async setDefaultRemoteVideoStreamType(e){await this.signal.request(yf.DEFAULT_VIDEO_STREAM,{stream_type:e})}async setStreamFallbackOption(e,t){await this.signal.request(yf.SET_FALLBACK_OPTION,{stream_id:e,fallback_type:t})}async pickSVCLayer(e,t){await this.signal.request(yf.PICK_SVC_LAYER,{stream_id:e,spatial_layer:t.spatialLayer,temporal_layer:t.temporalLayer})}getInChannelInfo(){return this.inChannelInfo.joinAt&&(this.inChannelInfo.duration=Date.now()-this.inChannelInfo.joinAt),pv({},this.inChannelInfo)}async getGatewayVersion(){return(await this.signal.request(yf.GATEWAY_INFO)).version}reset(){if(this.inChannelInfo.joinAt&&(this.inChannelInfo.duration=Date.now()-this.inChannelInfo.joinAt,this.inChannelInfo.joinAt=null),this.trafficStatsInterval&&(window.clearInterval(this.trafficStatsInterval),this.trafficStatsInterval=void 0),this.joinInfo){const e=_v.get(this.joinInfo.cname);e&&e.delete(this.joinInfo.uid)}this.joinInfo=void 0,this.key=void 0,this.networkQualityInterval&&(window.clearInterval(this.networkQualityInterval),this.networkQualityInterval=void 0)}updateTurnConfigFromSignal(){if(!this.joinInfo)return;const e=function(e){let t;return t=e.startsWith("dc")?e.match(/(dc\:\/\/)?([^:]+):(\d+)/):e.match(/(wss\:\/\/)?([^:]+):(\d+)/),t?{username:wE.username,password:wE.password,turnServerURL:t[2],tcpport:parseInt(t[3])+30,udpport:parseInt(t[3])+30,forceturn:!1}:null}(("disabled"===this.joinInfo.cloudProxyServer?this.signal.url:this.joinInfo.gatewayAddrs[this.signal.currentURLIndex].address)||"");this.joinInfo.turnServer.serversFromGateway=[],e&&"off"!==this.joinInfo.turnServer.mode&&"disabled"===this.joinInfo.cloudProxyServer&&this.joinInfo.turnServer.serversFromGateway.push(pv(pv({},wE),{},{turnServerURL:e.turnServerURL,tcpport:e.tcpport,udpport:e.udpport,username:this.joinInfo.uid.toString(),password:this.joinInfo.token}))}async updateTrafficStats(){if("CONNECTED"!==this.state)return;const e=await this.signal.request(yf.TRAFFIC_STATS,void 0,!0);e.timestamp=Date.now(),e.peer_delay.forEach(e=>{const t=this._statsCollector.trafficStats&&this._statsCollector.trafficStats.peer_delay.find(t=>t.peer_uid===e.peer_uid);t&&t.B_st!==e.B_st&&jI(()=>{this.emit(nS.STREAM_TYPE_CHANGE,e.peer_uid,e.B_st)})}),this._statsCollector.updateTrafficStats(e)}getJoinMessage(e){if(!this.joinInfo||!this.key)throw new EE(_E.UNEXPECTED_ERROR,"can not generate join message, no join info");const t=Object.assign({},this.joinInfo.apResponse);let i=FE("REPORT_APP_SCENARIO");if("string"!=typeof i)try{i=JSON.stringify(i)}catch(e){i=void 0}i&&i.length>128&&(i=void 0);const n=pv({license:this.joinInfo.license,p2p_id:this.store.p2pId,session_id:this.joinInfo.sid,app_id:this.joinInfo.appId,channel_key:this.key,channel_name:this.joinInfo.cname,sdk_version:AE,browser:navigator.userAgent,process_id:FE("PROCESS_ID"),mode:this.spec.mode,codec:this.spec.codec,role:this.role,has_changed_gateway:this.hasChangeBGPAddress,ap_response:t,extend:FE("JOIN_EXTEND"),details:{6:this.joinInfo.stringUid,cservice_map:"proxy3"===this.joinInfo.cloudProxyServer?"1":"proxy5"===this.joinInfo.cloudProxyServer?"2":void 0},features:{rejoin:!0},optionalInfo:this.joinInfo.optionalInfo,appScenario:i,attributes:{userAttributes:{enablePublishedUserList:FE("ENABLE_PUBLISHED_USER_LIST"),maxSubscription:FE("MAX_SUBSCRIPTION"),subscribeAudioFilterTopN:"number"==typeof FE("SUBSCRIBE_AUDIO_FILTER_TOPN")?FE("SUBSCRIBE_AUDIO_FILTER_TOPN"):void 0,enablePublishAudioFilter:"boolean"==typeof FE("ENABLE_PUBLISH_AUDIO_FILTER")?FE("ENABLE_PUBLISH_AUDIO_FILTER"):void 0,enableUserLicenseCheck:"boolean"==typeof FE("ENABLE_USER_LICENSE_CHECK")?FE("ENABLE_USER_LICENSE_CHECK"):void 0}},join_ts:this.joinGatewayStartTime},e);return this.joinInfo.stringUid&&(n.string_uid=this.joinInfo.stringUid),this.joinInfo.aesmode&&this.joinInfo.aespassword&&(n.aes_mode=this.joinInfo.aesmode,FE("ENCRYPT_AES")?(n.aes_secret=this.joinInfo.aespassword,n.aes_encrypt=!0):n.aes_secret=this.joinInfo.aespassword,this.joinInfo.aessalt&&(n.aes_salt=this.joinInfo.aessalt)),t.addresses[this.signal.websocket.currentURLIndex]&&(n.ap_response.ticket=t.addresses[this.signal.websocket.currentURLIndex].ticket,delete t.addresses),void 0!==this.joinInfo.defaultVideoStream&&(n.default_video_stream=this.joinInfo.defaultVideoStream),n}getRejoinMessage(){if(!this.joinInfo)throw new EE(_E.UNEXPECTED_ERROR,"can not generate rejoin message, no join info");return{session_id:this.joinInfo.sid,channel_name:this.joinInfo.cname,cid:this.joinInfo.cid,uid:this.joinInfo.uid,vid:Number(this.joinInfo.vid)}}handleSignalEvents(){this.signal.on(Cf.WS_RECONNECT_WAITTING_FINISH,e=>{["tryNext","recover"].includes(e)&&this.joinInfo&&Tg.adjustSessionStartTime(this.joinInfo.sid)}),this.signal.on(Cf.WS_RECONNECT_CREATE_CONNECTION,e=>{this.joinGatewayStartTime=Date.now()}),this.signal.on(Cf.WS_RECONNECTING,e=>{this.joinInfo&&Tg.WebSocketQuit(this.joinInfo.sid,{lts:Date.now(),succ:-1,cname:this.joinInfo.cname,uid:this.joinInfo.uid,cid:this.joinInfo.cid,errorCode:e||If.NETWORK_ERROR}),this.joinInfo&&(this.state="RECONNECTING",Tg.sessionInit(this.joinInfo.sid,{lts:(new Date).getTime(),extend:this.isSignalRecover?{recover:!0}:{rejoin:!0},cname:this.joinInfo.cname,appid:this.joinInfo.appId,mode:this.spec.mode}),this.isSignalRecover=!1,this.joinGatewayStartTime=Date.now())}),this.signal.on(Cf.WS_CLOSED,e=>{let t;switch(e){case gf.LEAVE:t=If.LEAVE;break;case gf.UID_BANNED:case gf.IP_BANNED:case gf.CHANNEL_BANNED:case gf.SERVER_ERROR:t=If.SERVER_ERROR;break;case gf.FALLBACK:t=If.FALLBACK;break;case gf.LICENSE_MISSING:case gf.LICENSE_EXPIRED:case gf.LICENSE_MINUTES_EXCEEDED:case gf.LICENSE_PERIOD_INVALID:case gf.LICENSE_MULTIPLE_SDK_SERVICE:case gf.LICENSE_ILLEGAL:t=e;break;default:t=If.NETWORK_ERROR}CE.debug("[signal] websocket closed, reason: ".concat(t||"undefined -> "+If.NETWORK_ERROR)),this.joinInfo&&Tg.WebSocketQuit(this.joinInfo.sid,{lts:Date.now(),succ:e===gf.LEAVE?1:-1,cname:this.joinInfo.cname,uid:this.joinInfo.uid,cid:this.joinInfo.cid,errorCode:t}),this._disconnectedReason=e,e!==gf.FALLBACK&&(this.state="DISCONNECTED"),this.reset()}),this.signal.on(Cf.WS_CONNECTED,()=>{if(this.updateTurnConfigFromSignal(),this.state="CONNECTED",this.joinInfo&&("audience"===this.role&&this._clientRoleOptions&&this._clientRoleOptions.level&&(CE.debug("[".concat(this.store.clientId,"] patch to send set client role, role: ").concat(this.role,", mode: ").concat(this.spec.mode,", level: ").concat(this._clientRoleOptions&&this._clientRoleOptions.level)),this.setClientRole(this.role,this._clientRoleOptions)),Tg.joinGateway(this.joinInfo.sid,{lts:this.joinGatewayStartTime,succ:!0,ec:null,vid:this.joinInfo.vid,addr:this.signal.url,uid:this.joinInfo.uid,cid:this.joinInfo.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!this.joinInfo.proxyServer,signalChannel:this.signal instanceof lv?"1":"0"}),this._isProactiveJoin=!1,this.joinInfo.useLocalAccessPoint&&1===this.joinInfo.setLocalAPVersion)){const e=this.signal.url&&this.signal.url.match(/wss\:\/\/([^:]+):(\d+)/);if(!e)return void CE.error("[".concat(this.store.clientId,"] set local access point after joined failed: ").concat(e));VE("EVENT_REPORT_DOMAIN",e[1]),VE("EVENT_REPORT_BACKUP_DOMAIN",e[1]),VE("LOG_UPLOAD_SERVER","".concat(e[1],":6444"))}}),this.signal.on(Of.ON_UPLINK_STATS,e=>{this._statsCollector.updateUplinkStats(e)}),this.signal.on(Cf.REQUEST_RECOVER,(e,t,i)=>{if(!this.joinInfo)return i(new EE(_E.UNEXPECTED_ERROR,"gateway: can not recover, no join info"));e&&(this.joinInfo.multiIP=e,this.hasChangeBGPAddress=!0),this.isSignalRecover=!0,kI(this,nS.REQUEST_NEW_GATEWAY_LIST).then(t).catch(i)}),this.signal.on(Cf.REQUEST_JOIN_INFO,async e=>{var t;this.updateTurnConfigFromSignal();const{iceParameters:i,dtlsParameters:n,rtpCapabilities:r}=await kI(this,nS.REQUEST_P2P_CONNECTION_PARAMS,{turnServer:null===(t=this.joinInfo)||void 0===t?void 0:t.turnServer});e(this.getJoinMessage({ortc:{iceParameters:i,dtlsParameters:n,rtpCapabilities:r,version:"2"}}))}),this.signal.on(Cf.REQUEST_REJOIN_INFO,e=>{e(this.getRejoinMessage())}),this.signal.on(Cf.REPORT_JOIN_GATEWAY,(e,t)=>{this.joinInfo&&(Tg.joinGateway(this.joinInfo.sid,{lts:this.joinGatewayStartTime,succ:!1,ec:e,addr:t,uid:this.joinInfo.uid,cid:this.joinInfo.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!this.joinInfo.proxyServer,signalChannel:this.signal instanceof lv?"1":"0"}),this._isProactiveJoin=!1)}),this.signal.on(Cf.IS_P2P_DISCONNECTED,e=>{e(xI(this,nS.IS_P2P_DISCONNECTED))}),this.signal.on(Cf.DISCONNECT_P2P,()=>{this.emit(nS.DISCONNECT_P2P)}),this.signal.on(Cf.NEED_RENEW_SESSION,()=>{this.emit(nS.NEED_RENEW_SESSION)}),this.signal.on(Cf.REQUEST_SUCCESS,()=>{this._signalTimeout=!1}),this.signal.on(Cf.REQUEST_TIMEOUT,()=>{this._signalTimeout=!0}),this.signal.on(Cf.JOIN_RESPONSE,e=>{const t=this.getCurrentGatewayAddress();this.emit(nS.JOIN_RESPONSE,e,t)}),this.signal.on(Cf.DATACHANNEL_PRECONNECT,async(e,t,i)=>{this.updateTurnConfigFromSignal();const n=this.getCurrentGatewayAddress();return kI(this,nS.DATACHANNEL_PRECONNECT,e,n).then(t).catch(i)}),this.signal.on(Cf.DATACHANNEL_CONNECTING,async e=>{const{iceParameters:t,dtlsParameters:i,rtpCapabilities:n}=await kI(this,nS.REQUEST_DC_CONNECTION_PARAMS);e(this.getJoinMessage({ortc:{iceParameters:t,dtlsParameters:i,rtpCapabilities:n,version:"2"}}))}),this.signal.on(Cf.DATACHANNEL_FAILBACK,()=>{CE.warning("[".concat(this.store.clientId,"] User join datachannel failed")),this.reset(),this.resetSignal(),this.emit(nS.DATACHANNEL_FAILBACK)})}async tryUnsubBeforeResub(e,t){try{await this.signal.request(yf.UNSUBSCRIBE,{p2p_id:this.store.p2pId,stream_id:e,ortc:[t]},!0)}catch(e){throw CE.warning("unsubscribe warning",e),e}}async tryUnpubBeforeRepub(e,t){try{await this.signal.request(yf.UNPUBLISH,{stream_id:e,ortc:t},!0)}catch(e){throw CE.warning("unpublish warning: ",e),e}}async tryMassUnsubBeforeResub(e){const t={users:e.map(e=>({stream_id:e.stream_id,stream_type:e.stream_type}))};try{await this.signal.request(yf.UNSUBSCRIBE_STREAMS,t,!0)}catch(e){throw CE.warning("massUnsubscribe warning",e),e}}async muteLocal(e,t){const i={action:e.find(e=>e.stream_type===iS.Audio)?"mute_local_audio":"mute_local_video",p2p_id:this.store.p2pId,ortc:e,stream_id:t};try{await this.signal.request(yf.CONTROL,i,!0,!0)}catch(e){throw CE.warning("gateway unmuteLocal warning: ",e),e}}async unmuteLocal(e,t){const i={action:e.find(e=>e.stream_type===iS.Audio)?"unmute_local_audio":"unmute_local_video",p2p_id:this.store.p2pId,ortc:e,stream_id:t};try{await this.signal.request(yf.CONTROL,i,!0,!0)}catch(e){throw CE.warning("gateway muteLocal warning: ",e),e}}uploadStats(e,t){this.signal.upload(e,t)}getSignalRTT(){return this.signal.rtt}async restartICE(e){const t={p2p_id:this.store.p2pId,stream_id:this.store.uid,ortc:e};try{return await this.signal.request(yf.RESTART_ICE,t,!0)}catch(e){throw CE.warning("P2PChannel.restartICE warning: ",e),e}}reconnect(){"CONNECTED"===this.state&&this.signal.reconnect(void 0,If.P2P_FAILED)}getCurrentGatewayAddress(){var e;if(!FE("GATEWAY_WSS_ADDRESS"))return null!==(e=this.joinInfo)&&void 0!==e&&e.gatewayAddrs?this.joinInfo.gatewayAddrs[this.signal.currentURLIndex]:void 0}async setPublishAudioFilterEnabled(e){await this.signal.request(yf.SET_PARAMETER,{enablePublishAudioFilter:e})}resetSignal(){this.signal&&(this.signal.removeAllListeners(),this.signal.close(gf.FALLBACK)),this.store.useDataChannel=!1,this.signal=new nv(pv(pv({},this.spec),{},{retryConfig:this.spec.websocketRetryConfig}),this.store),this.handleSignalEvents(),this.emit(nS.RESET_SIGNAL,oS.websocket)}}
/*! formdata-polyfill. MIT License. Jimmy W?rting <https://jimmy.warting.se/opensource> */!function(){var e;function i(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var n="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,i){return e==Array.prototype||e==Object.prototype||(e[t]=i.value),e};var r,o=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof t&&t];for(var i=0;i<e.length;++i){var n=e[i];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);function s(e,t){if(t)e:{var i=o;e=e.split(".");for(var r=0;r<e.length-1;r++){var s=e[r];if(!(s in i))break e;i=i[s]}(t=t(r=i[e=e[e.length-1]]))!=r&&null!=t&&n(i,e,{configurable:!0,writable:!0,value:t})}}function a(e){return(e={next:e})[Symbol.iterator]=function(){return this},e}function c(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):{next:i(e)}}if(s("Symbol",(function(e){function t(e,t){this.A=e,n(this,"description",{configurable:!0,writable:!0,value:t})}if(e)return e;t.prototype.toString=function(){return this.A};var i="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",r=0;return function e(n){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new t(i+(n||"")+"_"+r++,n)}})),s("Symbol.iterator",(function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var t="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),r=0;r<t.length;r++){var s=o[t[r]];"function"==typeof s&&"function"!=typeof s.prototype[e]&&n(s.prototype,e,{configurable:!0,writable:!0,value:function(){return a(i(this))}})}return e})),"function"==typeof Object.setPrototypeOf)r=Object.setPrototypeOf;else{var d;e:{var u={};try{u.__proto__={a:!0},d=u.a;break e}catch(e){}d=!1}r=d?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var l=r;function h(){this.m=!1,this.j=null,this.v=void 0,this.h=1,this.u=this.C=0,this.l=null}function p(e){if(e.m)throw new TypeError("Generator is already running");e.m=!0}function _(e,t){return e.h=3,{value:t}}function E(e){this.g=new h,this.G=e}function m(e,t,i,n){try{var r=t.call(e.g.j,i);if(!(r instanceof Object))throw new TypeError("Iterator result "+r+" is not an object");if(!r.done)return e.g.m=!1,r;var o=r.value}catch(t){return e.g.j=null,e.g.s(t),f(e)}return e.g.j=null,n.call(e.g,o),f(e)}function f(e){for(;e.g.h;)try{var t=e.G(e.g);if(t)return e.g.m=!1,{value:t.value,done:!1}}catch(t){e.g.v=void 0,e.g.s(t)}if(e.g.m=!1,e.g.l){if(t=e.g.l,e.g.l=null,t.F)throw t.D;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function S(e){this.next=function(t){return e.o(t)},this.throw=function(t){return e.s(t)},this.return=function(t){return function(e,t){p(e.g);var i=e.g.j;return i?m(e,"return"in i?i.return:function(e){return{value:e,done:!0}},t,e.g.return):(e.g.return(t),f(e))}(e,t)},this[Symbol.iterator]=function(){return this}}function T(e,t){return t=new S(new E(t)),l&&e.prototype&&l(t,e.prototype),t}if(h.prototype.o=function(e){this.v=e},h.prototype.s=function(e){this.l={D:e,F:!0},this.h=this.C||this.u},h.prototype.return=function(e){this.l={return:e},this.h=this.u},E.prototype.o=function(e){return p(this.g),this.g.j?m(this,this.g.j.next,e,this.g.o):(this.g.o(e),f(this))},E.prototype.s=function(e){return p(this.g),this.g.j?m(this,this.g.j.throw,e,this.g.o):(this.g.s(e),f(this))},s("Array.prototype.entries",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var i=0,n=!1,r={next:function(){if(!n&&i<e.length){var r=i++;return{value:t(r,e[r]),done:!1}}return n=!0,{done:!0,value:void 0}}};return r[Symbol.iterator]=function(){return r},r}(this,(function(e,t){return[e,t]}))}})),"undefined"!=typeof Blob&&("undefined"==typeof FormData||!FormData.prototype.keys)){var g=function(e,t){for(var i=0;i<e.length;i++)t(e[i])},R=function(e){return e.replace(/\r?\n|\r/g,"\r\n")},I=function(e,t,i){return t instanceof Blob?(i=void 0!==i?String(i+""):"string"==typeof t.name?t.name:"blob",t.name===i&&"[object Blob]"!==Object.prototype.toString.call(t)||(t=new File([t],i)),[String(e),t]):[String(e),String(t)]},v=function(e,t){if(e.length<t)throw new TypeError(t+" argument required, but only "+e.length+" present.")},C="object"==typeof globalThis?globalThis:"object"==typeof window?window:"object"==typeof self?self:this,y=C.FormData,A=C.XMLHttpRequest&&C.XMLHttpRequest.prototype.send,O=C.Request&&C.fetch,b=C.navigator&&C.navigator.sendBeacon,w=C.Element&&C.Element.prototype,N=C.Symbol&&Symbol.toStringTag;N&&(Blob.prototype[N]||(Blob.prototype[N]="Blob"),"File"in C&&!File.prototype[N]&&(File.prototype[N]="File"));try{new File([],"")}catch(e){C.File=function(e,t,i){return e=new Blob(e,i||{}),Object.defineProperties(e,{name:{value:t},lastModified:{value:+(i&&void 0!==i.lastModified?new Date(i.lastModified):new Date)},toString:{value:function(){return"[object File]"}}}),N&&Object.defineProperty(e,N,{value:"File"}),e}}var D=function(e){return e.replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22")},P=function(e){this.i=[];var t=this;e&&g(e.elements,(function(e){if(e.name&&!e.disabled&&"submit"!==e.type&&"button"!==e.type&&!e.matches("form fieldset[disabled] *"))if("file"===e.type){var i=e.files&&e.files.length?e.files:[new File([],"",{type:"application/octet-stream"})];g(i,(function(i){t.append(e.name,i)}))}else"select-multiple"===e.type||"select-one"===e.type?g(e.options,(function(i){!i.disabled&&i.selected&&t.append(e.name,i.value)})):"checkbox"===e.type||"radio"===e.type?e.checked&&t.append(e.name,e.value):(i="textarea"===e.type?R(e.value):e.value,t.append(e.name,i))}))};if((e=P.prototype).append=function(e,t,i){v(arguments,2),this.i.push(I(e,t,i))},e.delete=function(e){v(arguments,1);var t=[];e=String(e),g(this.i,(function(i){i[0]!==e&&t.push(i)})),this.i=t},e.entries=function e(){var t,i=this;return T(e,(function(e){if(1==e.h&&(t=0),3!=e.h)return t<i.i.length?e=_(e,i.i[t]):(e.h=0,e=void 0),e;t++,e.h=2}))},e.forEach=function(e,t){v(arguments,1);for(var i=c(this),n=i.next();!n.done;n=i.next()){var r=c(n.value);n=r.next().value,r=r.next().value,e.call(t,r,n,this)}},e.get=function(e){v(arguments,1);var t=this.i;e=String(e);for(var i=0;i<t.length;i++)if(t[i][0]===e)return t[i][1];return null},e.getAll=function(e){v(arguments,1);var t=[];return e=String(e),g(this.i,(function(i){i[0]===e&&t.push(i[1])})),t},e.has=function(e){v(arguments,1),e=String(e);for(var t=0;t<this.i.length;t++)if(this.i[t][0]===e)return!0;return!1},e.keys=function e(){var t,i,n,r,o=this;return T(e,(function(e){if(1==e.h&&(t=c(o),i=t.next()),3!=e.h)return i.done?void(e.h=0):(n=i.value,r=c(n),_(e,r.next().value));i=t.next(),e.h=2}))},e.set=function(e,t,i){v(arguments,2),e=String(e);var n=[],r=I(e,t,i),o=!0;g(this.i,(function(t){t[0]===e?o&&(o=!n.push(r)):n.push(t)})),o&&n.push(r),this.i=n},e.values=function e(){var t,i,n,r,o=this;return T(e,(function(e){if(1==e.h&&(t=c(o),i=t.next()),3!=e.h)return i.done?void(e.h=0):(n=i.value,(r=c(n)).next(),_(e,r.next().value));i=t.next(),e.h=2}))},P.prototype._asNative=function(){for(var e=new y,t=c(this),i=t.next();!i.done;i=t.next()){var n=c(i.value);i=n.next().value,n=n.next().value,e.append(i,n)}return e},P.prototype._blob=function(){var e="----formdata-polyfill-"+Math.random(),t=[],i="--"+e+'\r\nContent-Disposition: form-data; name="';return this.forEach((function(e,n){return"string"==typeof e?t.push(i+D(R(n))+'"\r\n\r\n'+R(e)+"\r\n"):t.push(i+D(R(n))+'"; filename="'+D(e.name)+'"\r\nContent-Type: '+(e.type||"application/octet-stream")+"\r\n\r\n",e,"\r\n")})),t.push("--"+e+"--"),new Blob(t,{type:"multipart/form-data; boundary="+e})},P.prototype[Symbol.iterator]=function(){return this.entries()},P.prototype.toString=function(){return"[object FormData]"},w&&!w.matches&&(w.matches=w.matchesSelector||w.mozMatchesSelector||w.msMatchesSelector||w.oMatchesSelector||w.webkitMatchesSelector||function(e){for(var t=(e=(this.document||this.ownerDocument).querySelectorAll(e)).length;0<=--t&&e.item(t)!==this;);return-1<t}),N&&(P.prototype[N]="FormData"),A){var L=C.XMLHttpRequest.prototype.setRequestHeader;C.XMLHttpRequest.prototype.setRequestHeader=function(e,t){L.call(this,e,t),"content-type"===e.toLowerCase()&&(this.B=!0)},C.XMLHttpRequest.prototype.send=function(e){e instanceof P?(e=e._blob(),this.B||this.setRequestHeader("Content-Type",e.type),A.call(this,e)):A.call(this,e)}}O&&(C.fetch=function(e,t){return t&&t.body&&t.body instanceof P&&(t.body=t.body._blob()),O.call(this,e,t)}),b&&(C.navigator.sendBeacon=function(e,t){return t instanceof P&&(t=t._asNative()),b.call(this,e,t)}),C.FormData=P}}();const mv=()=>{const e=FE("AREAS");0===e.length&&e.push(hS.GLOBAL);return zi(e).call(e,(e,t,i)=>{const n=fv(t);return n?0===i?n:"".concat(e,",").concat(n):e},"")},fv=e=>e===hS.OVERSEA?"".concat(mS.ASIA,",").concat(mS.EUROPE,",").concat(mS.AFRICA,",").concat(mS.NORTH_AMERICA,",").concat(mS.SOUTH_AMERICA,",").concat(mS.OCEANIA):mS[e],Sv=e=>{const t={CODE:"",WEBCS_DOMAIN:[],WEBCS_DOMAIN_BACKUP_LIST:[],PROXY_CS:[],CDS_AP:[],ACCOUNT_REGISTER:[],UAP_AP:[],EVENT_REPORT_DOMAIN:[],EVENT_REPORT_BACKUP_DOMAIN:[],LOG_UPLOAD_SERVER:[],PROXY_SERVER_TYPE3:[]};return e.map(e=>{const i=fS[e],n=Object.keys(i);n&&n.map(e=>{"CODE"!==e&&(t[e]=t[e].concat(i[e]))})}),t},Tv={GLOBAL:{ASIA:[hS.CHINA,hS.JAPAN,hS.INDIA,hS.KOREA,hS.HKMC],EUROPE:[],NORTH_AMERICA:[hS.US],SOUTH_AMERICA:[],OCEANIA:[],AFRICA:[]}},gv=Object.keys(Tv[hS.GLOBAL]),Rv=[hS.CHINA,hS.NORTH_AMERICA,hS.EUROPE,hS.ASIA,hS.JAPAN,hS.INDIA,hS.OCEANIA,hS.SOUTH_AMERICA,hS.AFRICA,hS.KOREA,hS.HKMC,hS.US],Iv=function(e,t){let i=[];if(e.includes(hS.GLOBAL)){const o=[hS.GLOBAL,hS.OVERSEA],s=Object.keys(fS);if(t===hS.GLOBAL)throw new EE(_E.INVALID_PARAMS,"GLOBAL is an invalid excludedArea value");if(t===hS.CHINA)i=[hS.OVERSEA];else if(r=t,gv.includes(r)){const e=(n=t,Tv[hS.GLOBAL][n]||[]),r=[...o,t,...e];i=s.filter(e=>!r.includes(e))}else if(function(e){let t=!1;return gv.forEach(i=>{Tv[hS.GLOBAL][i].includes(e)&&(t=!0)}),t}(t)){const e=function(e){let t;return gv.forEach(i=>{Tv[hS.GLOBAL][i].includes(e)&&(t=i)}),t}(t),n=[...o,e,t];i=s.filter(e=>!n.includes(e))}else i=e;i=function(e){const t=[];return Rv.forEach(i=>{e.includes(i)&&t.push(i)}),t.concat(e.filter(e=>!Rv.includes(e)))}(i)}else i=e;var n,r;return i};function vv(e){if(!e&&FE("AREAS").includes(hS.EXTENSIONS))return CE.debug("update area from ap : reset"),void Cv(bE,!0);if(!FE("AREAS").includes(hS.GLOBAL)||!e)return;let t=fS.EXTENSIONS;t&&(t={CODE:fv(hS.EXTENSIONS),WEBCS_DOMAIN:["ap-web-1-".concat(e,".agora.io")],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-".concat(e,".ap.sd-rtn.com")],PROXY_CS:["proxy-ap-web-".concat(e,".agora.io")],CDS_AP:["cds-ap-web-1-".concat(e,".agora.io"),"cds-ap-web-2-".concat(e,".ap.sd-rtn.com")],ACCOUNT_REGISTER:["sua-ap-web-1-".concat(e,".agora.io"),"sua-ap-web-2-".concat(e,".ap.sd-rtn.com")],UAP_AP:["uap-ap-web-1-".concat(e,".agora.io"),"uap-ap-web-2-".concat(e,".ap.sd-rtn.com")],EVENT_REPORT_DOMAIN:["statscollector-1-".concat(e,".agora.io")],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-".concat(e,".agora.io")],LOG_UPLOAD_SERVER:["logservice-".concat(e,".agora.io")],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy-".concat(e,".agora.io")]},CE.debug("update area from ap success: ".concat(e,",config is "),t),VE("AREAS",[hS.EXTENSIONS],!0),Object.keys(t).map(e=>{if("LOG_UPLOAD_SERVER"===e||"EVENT_REPORT_DOMAIN"===e||"EVENT_REPORT_BACKUP_DOMAIN"===e||"PROXY_SERVER_TYPE3"===e){VE(e,t[e][0])}else VE(e,t[e])}))}function Cv(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=Tg.reportApiInvoke(null,{name:uf.SET_AREA,options:e,tag:lf.TRACER});try{let n=[];if("string"==typeof e&&(n=[e]),Array.isArray(e)&&(e.forEach(e=>{if(!ES.includes(e))throw new EE(_E.INVALID_PARAMS,"invalid area code")}),n=e),"[object Object]"===Object.prototype.toString.call(e)){const{areaCode:t,excludedArea:i}=e;if(!t)throw new EE(_E.INVALID_PARAMS,"area code is needed");let r=t;"string"==typeof t&&(r=[t]),n=i?Iv(r,i):r}if(!t){if(BE.AREAS){const e=new EE(_E.PROHIBITED_OPERATION,"setArea is prohibited because of config-distribute");return i.onError(e),void CE.warning("setArea is prohibited because of config-distribute")}if(n.includes(hS.GLOBAL)&&FE("AREAS")===hS.EXTENSIONS){const e=new EE(_E.PROHIBITED_OPERATION,"setArea is prohibited because of ap extensions");return i.onError(e),void CE.warning("setArea is prohibited because of ap extensions")}}VE("AREAS",n,t);const r=Sv(n);Object.keys(r).map(e=>{if("LOG_UPLOAD_SERVER"===e||"EVENT_REPORT_DOMAIN"===e||"EVENT_REPORT_BACKUP_DOMAIN"===e||"PROXY_SERVER_TYPE3"===e){VE(e,r[e][0])}else VE(e,r[e])}),CE.debug("set area success:",n.join(","))}catch(e){throw i.onError(e),e}i.onSuccess()}function yv(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function Av(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?yv(Object(i),!0).forEach((function(t){lp(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):yv(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}let Ov=1;function bv(e,t,i,n,r){Ov+=1;const o={sid:i.sid,command:"convergeAllocateEdge",uid:"666",appId:i.appId,ts:Math.floor(Date.now()/1e3),seq:Ov,requestId:Ov,version:AE,cname:i.cname},s={service_name:t,json_body:JSON.stringify(o)};let a,c,d=e[0];return SE(async()=>{a=Date.now();const e=await ag(d,{data:s,cancelToken:n,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"}});if(c=Date.now()-a,0!==e.code){const t=new EE(_E.UNEXPECTED_RESPONSE,"live streaming ap error, code"+e.code,{retry:!0,responseTime:c});throw CE.error(t.toString()),t}const i=JSON.parse(e.json_body);if(200!==i.code){const e=new EE(_E.UNEXPECTED_RESPONSE,"live streaming app center error, code: ".concat(i.code,", reason: ").concat(i.reason),{code:i.code,responseTime:c});throw CE.error(e.toString()),e}if(!i.servers||0===i.servers.length){const e=new EE(_E.UNEXPECTED_RESPONSE,"live streaming app center empty server",{code:i.code,responseTime:c});throw CE.error(e.toString()),e}const r=function(e,t){return{addressList:e.servers.map(e=>"wss://".concat(e.address.replace(/\./g,"-"),".").concat(FE("WORKER_DOMAIN"),":").concat(e.wss,"?serviceName=").concat(encodeURIComponent(t))),workerToken:e.workerToken,vid:e.vid}}(i,t);return FE("LIVE_STREAMING_ADDRESS")&&(r.addressList=FE("LIVE_STREAMING_ADDRESS")instanceof Array?FE("LIVE_STREAMING_ADDRESS"):[FE("LIVE_STREAMING_ADDRESS")]),Av(Av({},r),{},{responseTime:c})},(n,r)=>(Tg.apworkerEvent(i.sid,{success:!0,sc:200,serviceName:t,responseDetail:JSON.stringify(n.addressList),firstSuccess:0===r,responseTime:c,serverIp:e[r%e.length]}),!1),(n,r)=>(Tg.apworkerEvent(i.sid,{success:!1,sc:n.data&&n.data.code||200,serviceName:t,responseTime:c,serverIp:e[r%e.length]}),!!(n.code!==_E.OPERATION_ABORTED&&n.code!==_E.UNEXPECTED_RESPONSE||n.data&&n.data.retry)&&(d=e[(r+1)%e.length],!0)),r)}let wv=1;function Nv(e,t,i,n){let{url:r,areaCode:o}=e;const s=Date.now();let a;const[c,d]=Mv(t,o,[US.CHOOSE_SERVER]);let u=dg.networkState;return SE(async()=>{u&&dg.networkState===CS.OFFLINE&&dg.onlineWaiter&&await Sl.race([dg.onlineWaiter,OI(n&&n.maxRetryTimeout||mE.maxRetryTimeout)]),u=dg.networkState;const{data:e,headers:o}=await ag(r,{data:c,cancelToken:i,headers:{"Content-Type":"multipart/form-data;"}},!0,!0);a="1"===o.http3?1:-1,Tg.reportResourceTiming(r,t.sid),Pv(e,r,t,s,[US.CHOOSE_SERVER],a);const d=gI(e,US.CHOOSE_SERVER);return Lv(d),EI(d,r)},e=>(e&&Tg.joinChooseServer(t.sid,{lts:s,succ:!0,csAddr:r,opid:d,serverList:e.gatewayAddrs.map(e=>e.address),ec:null,cid:e.cid.toString(),uid:e.uid.toString(),csIp:e.csIp,unilbsServerIds:[US.CHOOSE_SERVER].toString(),isHttp3:a}),!1),e=>e.code!==_E.OPERATION_ABORTED&&(e.code===_E.CAN_NOT_GET_GATEWAY_SERVER?e.data.retry:(Tg.joinChooseServer(t.sid,{lts:s,succ:!1,csAddr:r,serverList:null,opid:d,ec:e.code,csIp:e.data&&e.data.csIp,unilbsServerIds:[US.CHOOSE_SERVER].toString(),extend:JSON.stringify({networkState:u}),isHttp3:a}),CE.warning("[".concat(t.clientId,"] Choose server network error, retry"),e),!0)),n)}function Dv(e,t,i,n){let r,{url:o,areaCode:s,serviceIds:a}=e;const c=Date.now(),[d,u]=Mv(t,s,a);let l=void 0;return SE(async()=>{l&&dg.networkState===CS.OFFLINE&&dg.onlineWaiter&&await Sl.race([dg.onlineWaiter,OI(n&&n.maxRetryTimeout||mE.maxRetryTimeout)]),l=dg.networkState;const{data:e,headers:s}=await ag(o,{data:d,cancelToken:i,headers:{"Content-Type":"multipart/form-data;"}},!0,!0);r="1"===s.http3?1:-1,Tg.reportResourceTiming(o,t.sid),Pv(e,o,t,c,a,r);const u=gI(e,US.CHOOSE_SERVER),h=gI(e,"proxy5"===t.cloudProxyServer?US.CLOUD_PROXY_5:"proxy3"===t.cloudProxyServer||"proxy4"===t.cloudProxyServer?US.CLOUD_PROXY:US.CLOUD_PROXY_FALLBACK);return Lv(u),{gatewayInfo:EI(u,o),proxyInfo:h,url:o}},e=>(e.gatewayInfo&&Tg.joinChooseServer(t.sid,{lts:c,succ:!0,csAddr:o,serverList:e.gatewayInfo.gatewayAddrs.map(e=>e.address),ec:null,opid:u,cid:e.gatewayInfo.cid.toString(),uid:e.gatewayInfo.uid.toString(),csIp:e.gatewayInfo.csIp,unilbsServerIds:a.toString(),isHttp3:r}),e.proxyInfo&&Tg.joinWebProxyAP(t.sid,{lts:c,sucess:1,apServerAddr:o,turnServerAddrList:e.proxyInfo.addresses.map(e=>e.ip).join(","),errorCode:null,eventType:t.cloudProxyServer,unilbsServerIds:a.toString()}),!1),e=>e.code!==_E.OPERATION_ABORTED&&(e.code===_E.CAN_NOT_GET_GATEWAY_SERVER?e.data.retry:(Tg.joinWebProxyAP(t.sid,{lts:c,sucess:0,apServerAddr:o,turnServerAddrList:null,errorCode:e.code,eventType:t.cloudProxyServer,unilbsServerIds:a.toString(),extend:JSON.stringify({networkState:l})}),CE.warning("[".concat(t.clientId,"] multi unilbs network error, retry"),e),!0)),n)}const Pv=(e,t,i,n,r,o)=>{const s=[],a=s=>{4096===s.flag?Tg.joinChooseServer(i.sid,{lts:n,succ:!1,csAddr:t,opid:e.opid,serverList:null,ec:s.error.message,csIp:s.error.data&&s.error.data.csIp,unilbsServerIds:r.toString(),isHttp3:o}):1048576!==s.flag&&4194304!==s.flag&&4194310!==s.flag||Tg.joinWebProxyAP(i.sid,{lts:n,sucess:0,apServerAddr:t,turnServerAddrList:null,errorCode:s.error.code,eventType:i.cloudProxyServer,unilbsServerIds:r.toString()})};if(e.response_body.forEach(t=>{const i=t.buffer.code;if(23===t.uri&&0===i&&!t.buffer.edges_services)if(4194310===t.buffer.flag)CE.warning("no edge services in ap response of proxy fallback, will not set proxy in iceServers"),t.buffer.edges_services=[];else{const i={error:new EE(_E.CAN_NOT_GET_GATEWAY_SERVER,"no edge services in ap response",{retry:!0,csIp:e.detail[502]}),flag:t.buffer.flag};s.push(i),a(i)}if(0!==i){const n=QI(i),r={error:new EE(_E.CAN_NOT_GET_GATEWAY_SERVER,n.desc,{desc:n.desc,retry:n.retry,csIp:e.detail[502]}),flag:t.buffer.flag};4194310===t.buffer.flag?CE.warning(r.error.toString()):s.push(r),a(r)}}),s.length)throw CE.warning("[".concat(i.clientId,"] multi unilbs ").concat(t," failed, ").concat(s.map(e=>"flag: ".concat(e.flag,", message: ").concat(e.error.message,", retry: ").concat(e.error.data.retry)).join(" | "))),new EE(_E.CAN_NOT_GET_GATEWAY_SERVER,s.map(e=>"flag: ".concat(e.flag,", message: ").concat(e.error.message)).join(" | "),{retry:!!s.find(e=>e.error.data.retry),csIp:e.detail[502],desc:[...new Set(s.map(e=>{var t,i;return null==e||null===(t=e.error)||void 0===t||null===(i=t.data)||void 0===i?void 0:i.desc}).filter(e=>!!e))]})},Lv=e=>{var t,i,n,r;if(e.addresses&&0===e.addresses.length&&0===e.code)throw new EE(_E.CAN_NOT_GET_GATEWAY_SERVER,"void gateway address",{retry:!0,csIp:e.detail&&e.detail[502]});if(null!==(t=e.detail)&&void 0!==t&&t[23]&&"string"==typeof(null===(i=e.detail)||void 0===i?void 0:i[23])?vv(e.detail[23].toLowerCase()):vv(),null!==(n=e.detail)&&void 0!==n&&n[19]&&"string"==typeof(null===(r=e.detail)||void 0===r?void 0:r[19])){const t=e.detail[19],i=null==t?void 0:t.split(";");for(let t=0;t<i.length;t++){var o;const n=mh(o=i[t]).call(o);e.addresses[t]&&i&&(e.addresses[t].fingerprint=n)}}if(FE("GATEWAY_ADDRESS")&&FE("GATEWAY_ADDRESS").length>0){CE.debug("assign gateway address to",FE("GATEWAY_ADDRESS"));const t=FE("GATEWAY_ADDRESS").map(t=>{var i,n;const r=null!==(i=null===(n=e.addresses.find(e=>e.ip===t.ip&&e.port===t.port))||void 0===n?void 0:n.fingerprint)&&void 0!==i?i:"";return{ip:t.ip,port:t.port,ticket:e.addresses[0]&&e.addresses[0].ticket,fingerprint:r}});e.addresses=t}},kv=(e,t)=>{if(e.response_body&&e.response_body.length){const t=e.response_body[0];if(0!==t.buffer.code){const e=QI(t.buffer.code);throw new EE(_E.UPDATE_TICKET_FAILED,"[".concat(t.buffer.code,"]: ").concat(e.desc),{retry:e.retry})}return t.buffer.ticket}throw CE.debug("update ticket request received ap response without response body:",t),new EE(_E.UPDATE_TICKET_FAILED,"cannot find response body from ap response",{retry:!1})},Mv=(e,t,i)=>{const n=Math.floor(Math.random()*10**12),r={appid:e.appId,client_ts:Date.now(),opid:n,sid:e.sid,request_bodies:[{uri:22,buffer:{cname:e.cname,detail:{6:e.stringUid,11:t,12:FE("USE_NEW_TOKEN")?"1":void 0,22:t},key:e.token,service_ids:i,uid:e.uid||0}}]};r.request_bodies.forEach(t=>{e.multiIP&&e.multiIP.gateway_ip&&(t.buffer.detail[5]=JSON.stringify({vocs_ip:[e.multiIP.uni_lbs_ip],vos_ip:[e.multiIP.gateway_ip]}))});const o=new FormData;return o.append("request",JSON.stringify(r)),[o,n]},Uv=(e,t)=>{const i=Math.floor(Math.random()*10**12),n={appid:e.appId,client_ts:Date.now(),opid:i,sid:e.sid,request_bodies:[{uri:28,buffer:{cname:e.cname,detail:{1:"",6:e.stringUid,12:"1"},token:e.token,service_ids:t,uid:e.uid||0,edges_services:e.apResponse.addresses.map(e=>({ip:e.ip,port:e.port}))}}]},r=new FormData;return r.append("request",JSON.stringify(n)),[r,i]};let xv=0;async function Vv(e,t,i,n){const r=async function(e,t,i,n){let r=null;const o=[],s=async()=>{const r=FE("WEBCS_DOMAIN").slice(0,FE("AJAX_REQUEST_CONCURRENT")).map(t=>({url:e.proxyServer?"https://".concat(e.proxyServer,"/ap/?url=").concat(t+"/api/v2/transpond/webrtc?v=2"):"https://".concat(t,"/api/v2/transpond/webrtc?v=2"),areaCode:mv()})),s=n.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:r.map(e=>e.url)}),a=await JI({fragementLength:FE("FRAGEMENT_LENGTH"),referenceList:r,asyncMapHandler:n=>(CE.debug("[".concat(e.clientId,"] Connect to choose_server:"),n.url),Nv(n,e,t,i)),allFailedhandler:e=>{throw n.recordJoinChannelService({endTs:Date.now(),status:"error",errors:e},s),e[0]},promisesCollector:o});return n.recordJoinChannelService({endTs:Date.now(),status:"success"},s),a},a=async()=>{if(await OI(1e3),null!==r)return r;const s=FE("WEBCS_DOMAIN_BACKUP_LIST").map(t=>({url:e.proxyServer?"https://".concat(e.proxyServer,"/ap/?url=").concat(t+"/api/v2/transpond/webrtc?v=2"):"https://".concat(t,"/api/v2/transpond/webrtc?v=2"),areaCode:mv()})),a=n.recordJoinChannelService({endTs:void 0,startTs:Date.now(),status:"pending",service:"chooseServer",urls:s.map(e=>e.url)}),c=await JI({fragementLength:FE("FRAGEMENT_LENGTH"),referenceList:s,asyncMapHandler:n=>(CE.debug("[".concat(e.clientId,"] Connect to backup choose_server:"),n.url),Nv(n,e,t,i)),allFailedhandler:e=>{throw n.recordJoinChannelService({endTs:Date.now(),status:"error",errors:e},a),e[0]},promisesCollector:o});return n.recordJoinChannelService({endTs:Date.now(),status:"success"},a),c};try{return r=await LI([s(),a()]),o.length&&o.forEach(e=>e.cancel&&"function"==typeof e.cancel&&e.cancel()),r}catch(e){throw e[0]}}(e,t,i,n);return{gatewayInfo:await r}}async function Fv(e,t,i,n,r){const o=e.cloudProxyServer;if("disabled"===o){if(!n)return;if(e.useLocalAccessPoint)return await Vv(e,t,i,r);if(FE("JOIN_WITH_FALLBACK_MEDIA_PROXY")){const{gatewayInfo:n,proxyInfo:o}=await Gv(e,t,i,r);return e.turnServer&&"auto"!==e.turnServer.mode||(e.turnServer={mode:"manual",servers:o.map(e=>({turnServerURL:e.address,tcpport:e.tcpport||wE.tcpport,udpport:e.udpport||wE.udpport,username:e.username||wE.username,password:e.password||wE.password,forceturn:FE("JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE"),security:!0}))}),{gatewayInfo:n}}return await Vv(e,t,i,r)}const{proxyInfo:s,gatewayInfo:a}=await Gv(e,t,i,r),c={gatewayInfo:a};return e.turnServer={mode:"manual",servers:s.map(e=>({turnServerURL:e.address,tcpport:"proxy3"===o?void 0:e.tcpport?e.tcpport:wE.tcpport,udpport:"proxy4"===o?void 0:e.udpport?e.udpport:wE.udpport,username:e.username||wE.username,password:e.password||wE.password,forceturn:"proxy4"!==o,security:"proxy5"===o}))},CE.debug("[".concat(e.clientId,"] set proxy server: ").concat(e.proxyServer,", mode: ").concat(o)),c}async function jv(e,t,i,n,r){const o=FE("ACCOUNT_REGISTER").slice(0,FE("AJAX_REQUEST_CONCURRENT"));let s=[];s=t.proxyServer?o.map(e=>"https://".concat(t.proxyServer,"/ap/?url=").concat(e+"/api/v1")):o.map(e=>"https://".concat(e,"/api/v1"));const a=null==r?void 0:r.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"stringUID",urls:s});try{const o=await async function(e,t,i,n,r){const o=Date.now(),s={sid:i.sid,opid:10,appid:i.appId,string_uid:t};let a=e[0];const c=await SE(()=>ag(a+"".concat(-1===a.indexOf("?")?"?":"&","action=stringuid"),{data:s,cancelToken:n,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":72}}),(i,n)=>{if(0===i.code){if(i.uid<=0||i.uid>=Math.pow(2,32))throw CE.error("Invalid Uint Uid ".concat(t," => ").concat(i.uid),i),Tg.reqUserAccount(s.sid,{lts:o,success:!1,serverAddr:a,stringUid:s.string_uid,uid:i.uid,errorCode:_E.INVALID_UINT_UID_FROM_STRING_UID,extend:s}),new EE(_E.INVALID_UINT_UID_FROM_STRING_UID);return Tg.reqUserAccount(s.sid,{lts:o,success:!0,serverAddr:a,stringUid:s.string_uid,uid:i.uid,errorCode:null,extend:s}),!1}const r=QI(i.code);return r.retry&&(a=e[(n+1)%e.length]),Tg.reqUserAccount(s.sid,{lts:o,success:!1,serverAddr:a,stringUid:s.string_uid,uid:i.uid,errorCode:r.desc,extend:s}),r.retry},(t,i)=>t.code!==_E.OPERATION_ABORTED&&(Tg.reqUserAccount(s.sid,{lts:o,success:!1,serverAddr:a,stringUid:s.string_uid,uid:null,errorCode:t.code,extend:s}),a=e[(i+1)%e.length],!0),r);if(0!==c.code){const e=QI(c.code);throw new EE(_E.UNEXPECTED_RESPONSE,e.desc)}return c}(s,e,t,i,n);return null==r||r.recordJoinChannelService({status:"success",endTs:Date.now()},a),o.uid}catch(e){throw null==r||r.recordJoinChannelService({status:"error",endTs:Date.now(),errors:[e]},a),e}}async function Bv(e,t,i){const n=FE("CDS_AP").slice(0,FE("AJAX_REQUEST_CONCURRENT")).map(t=>e.proxyServer?"https://".concat(e.proxyServer,"/ap/?url=").concat(t+"/api/v1"):"https://".concat(t,"/api/v1?action=config")).map(n=>function(e,t,i,n){const r=Mh(),o={flag:64,cipher_method:0,features:{device:r.name,system:r.os,system_general:navigator.userAgent,vendor:t.appId,version:AE,cname:t.cname,sid:t.sid,session_id:t.sid,detail:"",proxyServer:t.proxyServer}};return SE(()=>ag(e,{data:o,timeout:1e3,cancelToken:i,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":54}}),void 0,e=>e.code!==_E.OPERATION_ABORTED,n)}(n,e,t,i));let r=null,o=null,s={};try{r=await LI(n)}catch(e){if(e.code===_E.OPERATION_ABORTED)throw e;o=e}n.forEach(e=>e.cancel());if(Tg.reportApiInvoke(e.sid,{name:uf.REQUEST_CONFIG_DISTRIBUTE,options:{error:o,res:r}}).onSuccess(),r&&r.test_tags)try{s=function(e){if(!e.test_tags)return{};const t=e.test_tags,i=Object.keys(t),n={};return i.forEach(e=>{var i;const r=mh(i=e.slice(4)).call(i),o=JSON.parse(t[e])[1];n[r]=o}),n}(r)}catch(e){}return s}async function Gv(e,t,i,n){const r=FE("PROXY_SERVER_TYPE3"),o=(e,t,i)=>{let n=i||r;return Array.isArray(n)&&(n=t%2==0?r[1]:r[0]),"https://".concat(n,"/ap/?url=").concat(e)};let s=null;const a=[],c=async()=>{const r=FE("WEBCS_DOMAIN").slice(0,FE("AJAX_REQUEST_CONCURRENT")).map((t,i)=>{let n;return n="disabled"===e.cloudProxyServer&&e.proxyServer?o("".concat(t,"/api/v2/transpond/webrtc?v=2"),i,e.proxyServer):"disabled"===e.cloudProxyServer||"fallback"===e.cloudProxyServer?"https://".concat(t,"/api/v2/transpond/webrtc?v=2"):o("".concat(t,"/api/v2/transpond/webrtc?v=2"),i),{url:n,areaCode:mv(),serviceIds:[US.CHOOSE_SERVER,"proxy5"===e.cloudProxyServer?US.CLOUD_PROXY_5:"proxy3"===e.cloudProxyServer||"proxy4"===e.cloudProxyServer?US.CLOUD_PROXY:US.CLOUD_PROXY_FALLBACK]}}),s=n.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:r.map(e=>e.url)}),c=await JI({fragementLength:FE("FRAGEMENT_LENGTH"),referenceList:r,asyncMapHandler:n=>(CE.debug("[".concat(e.clientId,"] Connect to choose_server:"),n.url),Dv(n,e,t,i)),allFailedhandler:e=>{throw n.recordJoinChannelService({endTs:Date.now(),status:"error",errors:e},s),e[0]},promisesCollector:a});return n.recordJoinChannelService({endTs:Date.now(),status:"success"},s),c},d=async()=>{if(await OI(1e3),null!==s)return s;const r=FE("WEBCS_DOMAIN_BACKUP_LIST").map((t,i)=>{let n;return n="disabled"===e.cloudProxyServer&&e.proxyServer?o("".concat(t,"/api/v2/transpond/webrtc?v=2"),i,e.proxyServer):"disabled"===e.cloudProxyServer||"fallback"===e.cloudProxyServer?"https://".concat(t,"/api/v2/transpond/webrtc?v=2"):o("".concat(t,"/api/v2/transpond/webrtc?v=2"),i),{url:n,areaCode:mv(),serviceIds:[US.CHOOSE_SERVER,"proxy5"===e.cloudProxyServer?US.CLOUD_PROXY_5:"proxy3"===e.cloudProxyServer||"proxy4"===e.cloudProxyServer?US.CLOUD_PROXY:US.CLOUD_PROXY_FALLBACK]}}),c=n.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:r.map(e=>e.url)}),d=await JI({fragementLength:FE("FRAGEMENT_LENGTH"),referenceList:r,asyncMapHandler:n=>(CE.debug("[".concat(e.clientId,"] Connect to backup choose_server:"),n.url),Dv(n,e,t,i)),allFailedhandler:e=>{throw n.recordJoinChannelService({endTs:Date.now(),status:"error",errors:e},c),e[0]},promisesCollector:a});return n.recordJoinChannelService({endTs:Date.now(),status:"success"},c),d};let u,l,h;try{({gatewayInfo:u,proxyInfo:l,url:h}=await LI([c(),d()]))}catch(e){throw e[0]}if(a.length&&a.forEach(e=>e.cancel&&"function"==typeof e.cancel&&e.cancel()),!u||!l)throw new EE(_E.UNEXPECTED_ERROR,"missing gateway or proxy response").print();if(e.apUrl=h,"disabled"!==e.cloudProxyServer&&Array.isArray(r)&&h){const t=/^https?:\/\/(.+?)(\/.*)?$/.exec(h)[1];r.includes(t)&&(e.proxyServer=t,CE.setProxyServer(t),Tg.setProxyServer(t))}return s={gatewayInfo:u,proxyInfo:await RI(l,u.uid)},s}async function Wv(e,t,i,n){const r=FE("UAP_AP").slice(0,FE("AJAX_REQUEST_CONCURRENT")).map(e=>t.proxyServer?"https://".concat(t.proxyServer,"/ap/?url=").concat(e+"/api/v1?action=uap"):"https://".concat(e,"/api/v1?action=uap"));return await bv(r,e,t,i,n)}async function Hv(e,t,i){const n=FE("UAP_AP").slice(0,FE("AJAX_REQUEST_CONCURRENT")).map(t=>e.proxyServer?"https://".concat(e.proxyServer,"/ap/?url=").concat(t+"/api/v1?action=uap"):"https://".concat(t,"/api/v1?action=uap")).map(n=>function(e,t,i,n){const r={command:"convergeAllocateEdge",sid:t.sid,appId:t.appId,token:t.token,ts:Date.now(),version:AE,cname:t.cname,uid:t.uid.toString(),requestId:wv,seq:wv};wv+=1;const o={service_name:"tele_channel",json_body:JSON.stringify(r)};return SE(async()=>{const t=await ag(e,{data:o,cancelToken:i,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":61}});if(0!==t.code){const e=new EE(_E.UNEXPECTED_RESPONSE,"cross channel ap error, code"+t.code,{retry:!0});throw CE.error(e.toString()),e}const n=JSON.parse(t.json_body);if(200!==n.code){const e=new EE(_E.UNEXPECTED_RESPONSE,"cross channel app center error, code: ".concat(n.code,", reason: ").concat(n.reason));throw CE.error(e.toString()),e}if(!n.servers||0===n.servers.length){const e=new EE(_E.UNEXPECTED_RESPONSE,"cross channel app center empty server");throw CE.error(e.toString()),e}return{vid:n.vid,workerToken:n.workerToken,addressList:(FE("CHANNEL_MEDIA_RELAY_SERVERS")||n.servers).map(e=>"wss://".concat(e.address.replace(/\./g,"-"),".").concat(FE("WORKER_DOMAIN"),":").concat(e.wss))}},void 0,e=>!!(e.code!==_E.OPERATION_ABORTED&&e.code!==_E.UNEXPECTED_RESPONSE||e.data&&e.data.retry),n)}(n,e,t,i));try{const e=await LI(n);return n.forEach(e=>e.cancel()),e}catch(e){throw e[0]}}async function Kv(e,t,i){let n=null;const r=[],o=async o=>{const s=FE(o?"WEBCS_DOMAIN_BACKUP_LIST":"WEBCS_DOMAIN").map(t=>e.proxyServer?"https://".concat(e.proxyServer,"/ap/?url=").concat(t+"/api/v2/transpond/webrtc?v=2"):"https://".concat(t,"/api/v2/transpond/webrtc?v=2"));return o&&(await OI(1e3),null!==n)?n:await JI({fragementLength:FE("FRAGEMENT_LENGTH"),referenceList:s,asyncMapHandler:n=>(CE.debug("[".concat(e.clientId,"] update ticket, Connect to ").concat(o?"backup":""," choose_server:"),n),function(e,t,i,n){const[r]=Uv(t,[US.CHOOSE_SERVER]);let o=dg.networkState;return SE(async()=>{o&&dg.networkState===CS.OFFLINE&&dg.onlineWaiter&&await Sl.race([dg.onlineWaiter,OI(n&&n.maxRetryTimeout||mE.maxRetryTimeout)]),o=dg.networkState;const t=await ag(e,{data:r,cancelToken:i,headers:{"Content-Type":"multipart/form-data;"}},!0);return kv(t,e)},()=>!1,e=>e.code!==_E.OPERATION_ABORTED&&(e.code===_E.UPDATE_TICKET_FAILED?e.data.retry:(CE.warning("[".concat(t.clientId,"] update ticket network error, retry"),e),!0)),n)}(n,e,t,i)),allFailedhandler:e=>{throw e[0]},promisesCollector:r})};try{return n=await LI([o(!1),o(!0)]),r.length&&r.forEach(e=>e.cancel&&"function"==typeof e.cancel&&e.cancel()),n}catch(e){throw e[0]}}function Yv(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function qv(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Yv(Object(i),!0).forEach((function(t){lp(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Yv(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}class Jv extends hE{constructor(){super(),lp(this,"configs",void 0),lp(this,"joinInfo",void 0),lp(this,"cancelToken",void 0),lp(this,"retryConfig",{timeout:3e3,timeoutFactor:1.5,maxRetryCount:1,maxRetryTimeout:1e4}),lp(this,"interval",void 0),lp(this,"mutex",new vg("config-distribute")),lp(this,"mutableParamsRead",!1)}startGetConfigDistribute(e,t){this.joinInfo=e,this.cancelToken=t,this.interval&&this.stopGetConfigDistribute(),FE("ENABLE_CONFIG_DISTRIBUTE")&&(this.updateConfigDistribute(),this.interval=window.setInterval(()=>{this.updateConfigDistribute()},FE("CONFIG_DISTRIBUTE_INTERVAL")))}stopGetConfigDistribute(){this.interval&&clearInterval(this.interval),this.interval=void 0,this.joinInfo=void 0,this.cancelToken=void 0}async awaitConfigDistributeComplete(){if(!this.mutex.isLocked)return;(await this.mutex.lock())()}async updateConfigDistribute(){if(!this.mutableParamsRead){this.mutableParamsRead=!0;Tg.reportApiInvoke(null,{options:void 0,name:uf.LOAD_CONFIG_FROM_LOCALSTORAGE,tag:lf.TRACER}).onSuccess(JSON.stringify(BE))}if(!this.joinInfo||!this.cancelToken||!this.retryConfig)return void CE.debug("[config-distribute] get config distribute interrupted have no joininfo");let e;const t=await this.mutex.lock();try{e=await Bv(this.joinInfo,this.cancelToken,this.retryConfig),CE.debug("[config-distribute] get config distribute",JSON.stringify(e)),e.limit_bitrate&&this.handleBitrateLimit(e.limit_bitrate),this.cacheGlobalParameterConfig(e),this.configs=e}catch(e){const t=new EE(_E.NETWORK_RESPONSE_ERROR,e);CE.warning("[config-distribute] ".concat(t.toString()))}finally{t()}}getBitrateLimit(){return this.configs?this.configs.limit_bitrate:void 0}handleBitrateLimit(e){var t;(t=e)&&t.uplink&&t.id&&void 0!==t.uplink.max_bitrate&&void 0!==t.uplink.min_bitrate&&(this.configs&&this.configs.limit_bitrate?this.configs&&this.configs.limit_bitrate&&this.configs.limit_bitrate.id!==e.id&&this.emit(SS.UPDATE_BITRATE_LIMIT,e):this.emit(SS.UPDATE_BITRATE_LIMIT,e))}getLowStreamConfigDistribute(){return this.configs&&this.configs.limit_bitrate&&qv({},this.configs.limit_bitrate.low_stream_uplink)}cacheGlobalParameterConfig(e){var t;const i=jm(t=Object.keys(e).filter(e=>/^webrtc_ng_global_parameter/.test(e))).call(t);for(let t=0;t<i.length;t++)for(let n=i.length-1;n>t;n--){const t=i[n];if("number"==typeof e[t].__priority){const r=e[t].__priority,o=i[n-1];if("number"==typeof e[o].__priority){if(!(r>e[o].__priority))continue;{const e=t;i[n]=i[n-1],i[n-1]=e}}else{const e=t;i[n]=i[n-1],i[n-1]=e}}}const n={};i.forEach(t=>{const i=e[t],r=i.__expires;Object.keys(i).forEach(e=>{"__priority"===e||"__expires"===e||Object.prototype.hasOwnProperty.call(n,e)||(n[e]=qv({value:i[e]},r&&{expires:r}))})});try{const e=JSON.stringify(n),t=window.btoa(e);window.localStorage.setItem("websdk_ng_global_parameter",t),CE.debug("Caching global parameters ".concat(e))}catch(e){CE.error("Error caching global parameters:",e.message)}}}function Xv(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function zv(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Xv(Object(i),!0).forEach((function(t){lp(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Xv(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}class Qv extends hE{constructor(e,t,i,n){super(),lp(this,"spec",void 0),lp(this,"token",void 0),lp(this,"websocket",void 0),lp(this,"pingpongTimer",void 0),lp(this,"reconnectMode","retry"),lp(this,"serviceMode",void 0),lp(this,"reqId",0),lp(this,"commandReqId",0),lp(this,"handleWebSocketOpen",()=>{this.reconnectMode="retry",this.startPingPong()}),lp(this,"handleWebSocketMessage",e=>{if(!e.data)return;const t=JSON.parse(e.data);t.requestId?this.emit("@".concat(t.requestId,"-").concat(t.sid),t):this.serviceMode===Bf.INJECT?this.emit(Jf.INJECT_STREAM_STATUS,t):(Tg.workerEvent(this.spec.sid,{actionType:"status",serverCode:t.code,workerType:this.serviceMode===Bf.TRANSCODE?1:2}),this.emit(Jf.PUBLISH_STREAM_STATUS,t))}),this.spec=t,this.token=e,this.serviceMode=n,this.websocket=new tv("live-streaming",i),this.websocket.on(jf.CONNECTED,this.handleWebSocketOpen),this.websocket.on(jf.ON_MESSAGE,this.handleWebSocketMessage),this.websocket.on(jf.REQUEST_NEW_URLS,(e,t)=>{kI(this,Jf.REQUEST_NEW_ADDRESS).then(e).catch(t)}),this.websocket.on(jf.RECONNECTING,()=>{this.websocket.reconnectMode=this.reconnectMode})}init(e){return this.websocket.init(e)}async request(e,t,i,n){this.reqId+=1,"request"===e&&(this.commandReqId+=1);const r=this.commandReqId,o=this.reqId;if(!o||!this.websocket)throw new EE(_E.UNEXPECTED_ERROR);const s=zv({command:e,sdkVersion:"4.17.0"===AE?"0.0.1":AE,seq:o,requestId:o,allocate:i,cname:this.spec.cname,appId:this.spec.appId,sid:this.spec.sid,uid:this.spec.uid.toString(),ts:Math.floor(Date.now()/1e3)},t);if("closed"===this.websocket.state)throw new EE(_E.WS_DISCONNECT);const a=()=>new Sl((e,t)=>{this.websocket.once(jf.CLOSED,()=>t(new EE(_E.WS_ABORT))),this.websocket.once(jf.CONNECTED,e)});"connected"!==this.websocket.state&&await a(),s.clientRequest&&(s.clientRequest.workerToken=this.token);const c=new Sl((e,t)=>{const i=()=>{t(new EE(_E.WS_ABORT))};this.websocket.once(jf.RECONNECTING,i),this.websocket.once(jf.CLOSED,i),this.once("@".concat(o,"-").concat(this.spec.sid),t=>{e(t)})});n&&Tg.workerEvent(this.spec.sid,zv(zv({},n),{},{requestId:r,actionType:"request",payload:JSON.stringify(t.clientRequest),serverCode:0,code:0}));const d=Date.now();this.websocket.sendMessage(s);let u=null;try{u=await c}catch(n){if("closed"===this.websocket.state)throw n;return await a(),await this.request(e,t,i)}return n&&Tg.workerEvent(this.spec.sid,zv(zv({},n),{},{requestId:r,actionType:"response",payload:JSON.stringify(u.serverResponse),serverCode:u.code,success:200===u.code,responseTime:Date.now()-d})),200!==u.code&&this.handleResponseError(u),u}tryNextAddress(){this.reconnectMode="tryNext",this.websocket.reconnect("tryNext")}close(){const e="4.17.0"===AE?"0.0.1":AE;this.reqId+=1,"connected"===this.websocket.state?(this.websocket.sendMessage({command:"request",appId:this.spec.appId,cname:this.spec.cname,uid:this.spec.uid.toString(),sdkVersion:e,sid:this.spec.sid,seq:this.reqId,ts:Math.floor(Date.now()/1e3),requestId:this.reqId,clientRequest:{command:"DestroyWorker"}}),this.websocket.close(!1,!0)):this.websocket.close(!1),this.pingpongTimer&&(window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0)}handleResponseError(e){switch(e.code){case zf.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM:return void CE.warning("live stream response already exists stream");case zf.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR:case zf.LIVE_STREAM_RESPONSE_BAD_STREAM:case zf.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR:return new EE(_E.LIVE_STREAMING_INVALID_ARGUMENT,"",{code:e.code}).throw();case zf.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST:if("UnpublishStream"===e.serverResponse.command||"UninjectStream"===e.serverResponse.command)return;throw new EE(_E.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case zf.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED:return new EE(_E.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED,"",{code:e.code}).throw();case zf.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:{const t=new EE(_E.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE);return this.emit(Jf.WARNING,t,e.serverResponse.url)}case zf.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN:{const t=new EE(_E.LIVE_STREAMING_WARN_FREQUENT_REQUEST);return this.emit(Jf.WARNING,t,e.serverResponse.url)}case zf.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH:throw new EE(_E.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case zf.LIVE_STREAM_RESPONSE_NOT_SUPPORTED:return new EE(_E.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED,"",{code:e.code}).throw();case zf.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM:{const t=new EE(_E.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT);return this.emit(Jf.WARNING,t,e.serverResponse.url)}case zf.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR:return new EE(_E.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:e.code}).throw();case zf.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT:throw new EE(_E.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream resource limit",{retry:!0,changeAddress:!0});case zf.LIVE_STREAM_RESPONSE_WORKER_LOST:case zf.LIVE_STREAM_RESPONSE_WORKER_QUIT:if("UnpublishStream"===e.serverResponse.command||"UninjectStream"===e.serverResponse.command)return;throw new EE(_E.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case zf.ERROR_FAIL_SEND_MESSAGE:if("UnpublishStream"===e.serverResponse.command||"UninjectStream"===e.serverResponse.command)return;if("UpdateTranscoding"===e.serverResponse.command||"ControlStream"===e.serverResponse.command)return new EE(_E.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{code:e.code}).throw();throw new EE(_E.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case zf.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case zf.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case zf.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case zf.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:return new EE(_E.LIVE_STREAMING_CDN_ERROR,"",{code:e.code}).throw()}}startPingPong(){this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(()=>{"connected"===this.websocket.state&&this.request("ping",{}).catch(DI)},6e3)}}function Zv(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function $v(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Zv(Object(i),!0).forEach((function(t){lp(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Zv(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}class eC extends hE{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:mE,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:mE;super(),lp(this,"onLiveStreamWarning",void 0),lp(this,"onLiveStreamError",void 0),lp(this,"onInjectStatusChange",void 0),lp(this,"spec",void 0),lp(this,"retryTimeout",1e4),lp(this,"connection",void 0),lp(this,"httpRetryConfig",void 0),lp(this,"wsRetryConfig",void 0),lp(this,"streamingTasks",new Map),lp(this,"isStartingStreamingTask",!1),lp(this,"taskMutex",new vg("live-streaming")),lp(this,"cancelToken",uE.CancelToken.source()),lp(this,"transcodingConfig",void 0),lp(this,"injectConfig",$v({},qf)),lp(this,"injectLoopTimes",0),lp(this,"uapResponse",void 0),lp(this,"lastTaskId",1),lp(this,"statusError",new Map),this.spec=e,this.httpRetryConfig=i,this.wsRetryConfig=t}async setTranscodingConfig(e){const t=$v($v({},Yf),e);66!==t.videoCodecProfile&&77!==t.videoCodecProfile&&100!==t.videoCodecProfile&&(CE.debug("[".concat(this.spec.clientId,"] set transcoding config, fix video codec profile: ").concat(t.videoCodecProfile," -> 100")),t.videoCodecProfile=100),t.transcodingUsers||(t.transcodingUsers=t.userConfigs),t.transcodingUsers&&(t.transcodingUsers=t.transcodingUsers.map(e=>$v($v($v({},Wf),e),{},{zOrder:e.zOrder?e.zOrder+1:1}))),function(e){Xm(e.width)||Wm(e.width,"config.width",0,1e4),Xm(e.height)||Wm(e.height,"config.height",0,1e4),Xm(e.videoBitrate)||Wm(e.videoBitrate,"config.videoBitrate",1,1e6),Xm(e.videoFrameRate)||Wm(e.videoFrameRate,"config.videoFrameRate"),Xm(e.lowLatency)||Bm(e.lowLatency,"config.lowLatency"),Xm(e.audioSampleRate)||Gm(e.audioSampleRate,"config.audioSampleRate",[32e3,44100,48e3]),Xm(e.audioBitrate)||Wm(e.audioBitrate,"config.audioBitrate",1,128),Xm(e.audioChannels)||Gm(e.audioChannels,"config.audioChannels",[1,2,3,4,5]),Xm(e.videoGop)||Wm(e.videoGop,"config.videoGop"),Xm(e.videoCodecProfile)||Gm(e.videoCodecProfile,"config.videoCodecProfile",[66,77,100]),Xm(e.userCount)||Wm(e.userCount,"config.userCount",0,17),Xm(e.backgroundColor)||Wm(e.backgroundColor,"config.backgroundColor",0,16777215),Xm(e.userConfigExtraInfo)||Km(e.userConfigExtraInfo,"config.userConfigExtraInfo",0,4096,!1),e.transcodingUsers&&!Xm(e.transcodingUsers)&&(Ym(e.transcodingUsers,"config.transcodingUsers"),e.transcodingUsers.forEach((e,t)=>{Jm(e.uid),Xm(e.x)||Wm(e.x,"transcodingUser[".concat(t,"].x"),0,1e4),Xm(e.y)||Wm(e.y,"transcodingUser[".concat(t,"].y"),0,1e4),Xm(e.width)||Wm(e.width,"transcodingUser[".concat(t,"].width"),0,1e4),Xm(e.height)||Wm(e.height,"transcodingUser[".concat(t,"].height"),0,1e4),Xm(e.zOrder)||Wm(e.zOrder-1,"transcodingUser[".concat(t,"].zOrder"),0,100),Xm(e.alpha)||Wm(e.alpha,"transcodingUser[".concat(t,"].alpha"),0,1,!1)})),Xm(e.watermark)||Kf(e.watermark,"watermark"),Xm(e.backgroundImage)||Kf(e.backgroundImage,"backgroundImage"),e.images&&!Xm(e.images)&&(Ym(e.images,"config.images"),e.images.forEach((e,t)=>{Kf(e,"images[".concat(t,"]"))}))}(t);const i=[];t.images&&i.push(...t.images.map(e=>$v($v($v({},Hf),e),{},{zOrder:255}))),t.backgroundImage&&(i.push($v($v($v({},Hf),t.backgroundImage),{},{zOrder:0})),delete t.backgroundImage),t.watermark&&(i.push($v($v($v({},Hf),t.watermark),{},{zOrder:255})),delete t.watermark),t.images=i,t.transcodingUsers&&(t.userConfigs=t.transcodingUsers.map(e=>$v({},e)),t.userCount=t.transcodingUsers.length,delete t.transcodingUsers);const n=(t.userConfigs||[]).map(e=>"number"==typeof e.uid?Sl.resolve(e.uid):jv(e.uid,this.spec,this.cancelToken.token,this.httpRetryConfig));if((await Sl.all(n)).forEach((e,i)=>{t.userConfigs&&t.userConfigs[i]&&(t.userConfigs[i].uid=e)}),this.transcodingConfig=t,this.connection)try{var r;const e=await this.connection.request("request",{clientRequest:{command:"UpdateTranscoding",transcodingConfig:this.transcodingConfig}},!1,{command:"UpdateTranscoding",workerType:1,requestByUser:!0,tid:Array.from(HR(r=this.streamingTasks).call(r)).map(e=>e.taskId).join("#")});CE.debug("[".concat(this.spec.clientId,"] update live transcoding config success, code: ").concat(e.code,", config:"),JSON.stringify(this.transcodingConfig))}catch(e){if(!e.data||!e.data.retry)throw e;e.data.changeAddress&&this.connection.tryNextAddress(),this.streamingTasks.forEach(t=>{CE.warning("[".concat(this.spec.clientId,"] live streaming receive error"),e.toString(),"try to republish",t.url),this.startLiveStreamingTask(t.url,t.mode,e).then(()=>{CE.debug("[".concat(this.spec.clientId,"] live streaming republish ").concat(t.url," success"))}).catch(e=>{CE.error("[".concat(this.spec.clientId,"] live streaming republish failed"),t.url,e.toString()),this.onLiveStreamError&&this.onLiveStreamError(t.url,e)})})}}setInjectStreamConfig(e,t){this.injectConfig=Object.assign({},this.injectConfig,e),this.injectLoopTimes=t}async startLiveStreamingTask(e,t,i){var n;if(Array.from(HR(n=this.streamingTasks).call(n)).find(e=>e.mode===Bf.INJECT)&&t===Bf.INJECT)return new EE(_E.LIVE_STREAMING_TASK_CONFLICT,"inject stream over limit").throw();if(!this.transcodingConfig&&t===Bf.TRANSCODE)throw new EE(_E.INVALID_OPERATION,"[LiveStreaming] no transcoding config found, can not start transcoding streaming task");let r={command:"PublishStream",ts:Date.now(),url:e,uid:this.spec.uid.toString(),autoDestroyTime:100,acceptImageTimeout:!0};CE.debug("[".concat(this.spec.clientId,"] start live streaming ").concat(e,", mode: ").concat(t));const o=await this.taskMutex.lock();if(!this.connection&&i)return void o();if(this.streamingTasks.get(e)&&!i)return o(),new EE(_E.LIVE_STREAMING_TASK_CONFLICT).throw();try{this.connection||(this.connection=await this.connect(t))}catch(e){throw o(),e}switch(t){case Bf.TRANSCODE:r.transcodingConfig=$v({},this.transcodingConfig);break;case Bf.RAW:break;case Bf.INJECT:r={cname:this.spec.cname,command:"InjectStream",sid:this.spec.sid,transcodingConfig:this.injectConfig,ts:Date.now(),url:e,loopTimes:this.injectLoopTimes}}this.uapResponse&&this.uapResponse.vid&&(r.vid=this.uapResponse.vid),this.isStartingStreamingTask=!0;const s=this.lastTaskId++;try{const n=new Sl((t,n)=>{OI(this.retryTimeout).then(()=>{if(i)return n(i);const t=this.statusError.get(e);return t?(this.statusError.delete(e),n(t)):void 0})}),a=await Sl.race([this.connection.request("request",{clientRequest:r},!0,{url:e,command:"PublishStream",workerType:t===Bf.TRANSCODE?1:2,requestByUser:!i,tid:s.toString()}),n]);this.isStartingStreamingTask=!1,CE.debug("[".concat(this.spec.clientId,"] live streaming started, code: ").concat(a.code)),this.streamingTasks.set(e,{clientRequest:r,mode:t,url:e,taskId:s}),o()}catch(n){if(o(),this.isStartingStreamingTask=!1,!n.data||!n.data.retry||i)throw n;return n.data.changeAddress?(this.connection.tryNextAddress(),await this.startLiveStreamingTask(e,t,n)):await this.startLiveStreamingTask(e,t,n)}}stopLiveStreamingTask(e){return new Sl((t,i)=>{const n=this.streamingTasks.get(e);if(!n||!this.connection)return new EE(_E.UNEXPECTED_ERROR,"can not find streaming task to stop").throw();const r=n.mode;n.abortTask=()=>{CE.debug("[".concat(this.spec.clientId,"] stop live streaming success(worker exception)")),this.streamingTasks.delete(e),t()},this.connection.request("request",{clientRequest:{command:r===Bf.INJECT?"UninjectStream":"UnpublishStream",url:n.url}},!1,{url:e,command:"UnPublishStream",workerType:r===Bf.TRANSCODE?1:2,requestByUser:!0,tid:(this.lastTaskId++).toString()}).then(i=>{CE.debug("[".concat(this.spec.clientId,"] stop live streaming success, code: ").concat(i.code)),this.streamingTasks.delete(e),0===this.streamingTasks.size&&r!==Bf.INJECT&&(this.connection&&this.connection.close(),this.connection=void 0),t(),r===Bf.INJECT&&this.onInjectStatusChange&&this.onInjectStatusChange(Gf.INJECT_STREAM_STATUS_STOP_SUCCESS,this.spec.uid,e)}).catch(i)})}async controlInjectStream(e,t,i,n){const r=this.streamingTasks.get(e);if(!r||!this.connection||r.mode!==Bf.INJECT)throw new EE(_E.INVALID_OPERATION,"can not find inject stream task to control");return(await this.connection.request("request",{clientRequest:{command:"ControlStream",url:e,control:t,audioVolume:i,position:n}})).serverResponse}resetAllTask(){var e;const t=Array.from(HR(e=this.streamingTasks).call(e));this.terminate();for(const e of t)this.startLiveStreamingTask(e.url,e.mode).catch(t=>{this.onLiveStreamError&&this.onLiveStreamError(e.url,t)})}terminate(){this.cancelToken&&this.cancelToken.cancel(),this.streamingTasks=new Map,this.isStartingStreamingTask=!1,this.statusError=new Map,this.cancelToken=uE.CancelToken.source(),this.uapResponse=void 0,this.connection&&this.connection.close(),this.connection=void 0}async connect(e){if(this.connection)throw new EE(_E.UNEXPECTED_ERROR,"live streaming connection has already connected");const t=await kI(this,Xf.REQUEST_WORKER_MANAGER_LIST,e);return this.uapResponse=t,this.connection=new Qv(t.workerToken,this.spec,this.wsRetryConfig,e),this.connection.on(Jf.WARNING,(e,t)=>this.onLiveStreamWarning&&this.onLiveStreamWarning(t,e)),this.connection.on(Jf.PUBLISH_STREAM_STATUS,e=>this.handlePublishStreamServer(e)),this.connection.on(Jf.INJECT_STREAM_STATUS,e=>this.handleInjectStreamServerStatus(e)),this.connection.on(Jf.REQUEST_NEW_ADDRESS,(t,i)=>{if(!this.connection)return i(new EE(_E.UNEXPECTED_ERROR,"can not get new live streaming address list"));kI(this,Xf.REQUEST_WORKER_MANAGER_LIST,e).then(e=>{this.uapResponse=e,t(e.addressList)}).catch(i)}),await this.connection.init(t.addressList),this.connection}handlePublishStreamServer(e){const t=e.serverStatus&&e.serverStatus.url||"empty_url",i=this.streamingTasks.get(t),n=e.reason;switch(e.code){case zf.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case zf.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case zf.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case zf.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:{const n=new EE(_E.LIVE_STREAMING_CDN_ERROR,"",{code:e.code});if(i)return CE.error(n.toString()),this.onLiveStreamError&&this.onLiveStreamError(t,n);if(!this.isStartingStreamingTask)return;this.statusError.set(t,n)}case zf.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:{const e=new EE(_E.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE,n);return this.onLiveStreamWarning&&this.onLiveStreamWarning(t,e)}case zf.LIVE_STREAM_RESPONSE_WORKER_LOST:case zf.LIVE_STREAM_RESPONSE_WORKER_QUIT:{var r;if(!this.connection)return;this.connection.tryNextAddress();const t=Array.from(HR(r=this.streamingTasks).call(r));for(const i of t)i.abortTask?i.abortTask():(CE.warning("[".concat(this.spec.clientId,"] publish stream status code"),e.code,"try to republish",i.url),this.startLiveStreamingTask(i.url,i.mode,new EE(_E.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:e.code})).then(()=>{CE.debug("[".concat(this.spec.clientId,"] republish live stream success"),i.url)}).catch(e=>{CE.error(e.toString()),this.onLiveStreamError&&this.onLiveStreamError(i.url,e)}));return}}}handleInjectStreamServerStatus(e){const t=Number(e.uid),i=e.serverStatus&&e.serverStatus.url;switch(e.code){case 200:return void(this.onInjectStatusChange&&this.onInjectStatusChange(Gf.INJECT_STREAM_STATUS_START_SUCCESS,t,i));case 451:return this.onInjectStatusChange&&this.onInjectStatusChange(Gf.INJECT_STREAM_STATUS_START_ALREADY_EXISTS,t,i),void this.streamingTasks.delete(i);case 453:return this.onInjectStatusChange&&this.onInjectStatusChange(Gf.INJECT_STREAM_STATUS_START_UNAUTHORIZED,t,i),void this.streamingTasks.delete(i);case 470:return this.onInjectStatusChange&&this.onInjectStatusChange(Gf.INJECT_STREAM_STATUS_BROKEN,t,i),void this.streamingTasks.delete(i);case 499:return this.onInjectStatusChange&&this.onInjectStatusChange(Gf.INJECT_STREAM_STATUS_START_TIMEOUT,t,i),void this.streamingTasks.delete(i);default:return void CE.debug("inject stream server status",e)}}hasUrl(e){return this.streamingTasks.has(e)}}class tC{constructor(){lp(this,"destChannelMediaInfos",new Map),lp(this,"srcChannelMediaInfo",void 0)}setSrcChannelInfo(e){pS(e),this.srcChannelMediaInfo=e}addDestChannelInfo(e){pS(e),this.destChannelMediaInfos.set(e.channelName,e)}removeDestChannelInfo(e){qm(e),this.destChannelMediaInfos.delete(e)}getSrcChannelMediaInfo(){return this.srcChannelMediaInfo}getDestChannelMediaInfo(){return this.destChannelMediaInfos}}function iC(e){if(!(e instanceof tC)){return new EE(_E.INVALID_PARAMS,"Config should be instance of [ChannelMediaRelayConfiguration]").throw()}const t=e.getSrcChannelMediaInfo(),i=e.getDestChannelMediaInfo();if(!t){return new EE(_E.INVALID_PARAMS,"srcChannelMediaInfo should not be empty").throw()}if(0===i.size){return new EE(_E.INVALID_PARAMS,"destChannelMediaInfo should not be empty").throw()}}class nC extends hE{constructor(e,t,i){super(),lp(this,"ws",void 0),lp(this,"requestId",1),lp(this,"heartBeatTimer",void 0),lp(this,"joinInfo",void 0),lp(this,"clientId",void 0),lp(this,"onOpen",()=>{this.emit("open"),this.startHeartBeatCheck()}),lp(this,"onClose",e=>{this.emit("close"),this.dispose()}),lp(this,"onMessage",e=>{const t=JSON.parse(e.data);if(!t||"serverResponse"!==t.command||!t.requestId)return t&&"serverStatus"===t.command&&t.serverStatus&&t.serverStatus.command?(this.emit("status",t.serverStatus),void this.emit(t.serverStatus.command,t.serverStatus)):void 0;this.emit("req_".concat(t.requestId),t)}),this.joinInfo=e,this.clientId=t,this.ws=new tv("cross-channel-".concat(this.clientId),i),this.ws.on(jf.RECONNECTING,()=>{this.ws.reconnectMode="retry",this.emit("reconnecting")}),this.ws.on(jf.CONNECTED,this.onOpen),this.ws.on(jf.ON_MESSAGE,this.onMessage),this.ws.on(jf.CLOSED,this.onClose)}isConnect(){return"connected"===this.ws.state}sendMessage(e){const t=this.requestId++;return e.requestId=t,e.seq=t,this.ws.sendMessage(e),t}waitStatus(e){return new Sl((t,i)=>{const n=window.setTimeout(()=>{i(new EE(_E.TIMEOUT,"wait status timeout, status: ".concat(e)))},5e3);this.once(e,r=>{window.clearTimeout(n),r.state&&0!==r.state?i(new EE(_E.CROSS_CHANNEL_WAIT_STATUS_ERROR,"wait status error, status: ".concat(e))):t(void 0)}),this.once("dispose",()=>{window.clearTimeout(n),i(new EE(_E.WS_ABORT))})})}async request(e){if("closed"===this.ws.state)throw new EE(_E.WS_DISCONNECT);const t=()=>new Sl((e,t)=>{this.ws.once(jf.CLOSED,()=>t(new EE(_E.WS_ABORT))),this.ws.once(jf.CONNECTED,e)});"connected"!==this.ws.state&&await t();const i=this.sendMessage(e),n=new Sl((e,t)=>{const n=()=>{t(new EE(_E.WS_ABORT))};this.ws.once(jf.RECONNECTING,n),this.ws.once(jf.CLOSED,n),this.once("req_".concat(i),e),OI(3e3).then(()=>{this.removeAllListeners("req_".concat(i)),this.ws.off(jf.RECONNECTING,n),this.ws.off(jf.CLOSED,n),t(new EE(_E.TIMEOUT,"cross channel ws request timeout"))})}),r=await n;if(!r||200!==r.code)throw new EE(_E.CROSS_CHANNEL_SERVER_ERROR_RESPONSE,"response: ".concat(JSON.stringify(r)));return r}async connect(e){this.ws.removeAllListeners(jf.REQUEST_NEW_URLS),this.ws.on(jf.REQUEST_NEW_URLS,t=>{t(e)}),await this.ws.init(e)}dispose(){this.clearHeartBeatCheck(),this.emit("dispose"),this.removeAllListeners(),this.ws.close()}sendPing(e){const t=this.requestId++;return e.requestId=t,this.ws.sendMessage(e),t}startHeartBeatCheck(){this.heartBeatTimer&&window.clearInterval(this.heartBeatTimer),this.heartBeatTimer=window.setInterval(()=>{this.sendPing({command:"ping",appId:this.joinInfo.appId,cname:this.joinInfo.cname,uid:this.joinInfo.uid.toString(),sid:this.joinInfo.sid,ts:+new Date,requestId:0})},3e3)}clearHeartBeatCheck(){window.clearInterval(this.heartBeatTimer),this.heartBeatTimer=void 0}}class rC extends hE{set state(e){e!==this._state&&(e!==eS.RELAY_STATE_FAILURE&&(this.errorCode=tS.RELAY_OK),this.emit("state",e,this.errorCode),this._state=e)}get state(){return this._state}constructor(e,t,i,n){super(),lp(this,"joinInfo",void 0),lp(this,"sid",void 0),lp(this,"clientId",void 0),lp(this,"cancelToken",uE.CancelToken.source()),lp(this,"workerToken",void 0),lp(this,"requestId",0),lp(this,"signal",void 0),lp(this,"prevChannelMediaConfig",void 0),lp(this,"httpRetryConfig",void 0),lp(this,"_state",eS.RELAY_STATE_IDLE),lp(this,"errorCode",tS.RELAY_OK),lp(this,"onStatus",e=>{CE.debug("[".concat(this.clientId,"] ChannelMediaStatus: ").concat(JSON.stringify(e))),e&&e.command&&("onAudioPacketReceived"===e.command&&this.emit("event",$f.PACKET_RECEIVED_AUDIO_FROM_SRC),"onVideoPacketReceived"===e.command&&this.emit("event",$f.PACKET_RECEIVED_VIDEO_FROM_SRC),"onSrcTokenPrivilegeDidExpire"===e.command&&(this.errorCode=tS.SRC_TOKEN_EXPIRED,this.state=eS.RELAY_STATE_FAILURE),"onDestTokenPrivilegeDidExpire"===e.command&&(this.errorCode=tS.DEST_TOKEN_EXPIRED,this.state=eS.RELAY_STATE_FAILURE))}),lp(this,"onReconnect",async()=>{CE.debug("[".concat(this.clientId,"] ChannelMediaSocket disconnect, reconnecting")),this.emit("event",$f.NETWORK_DISCONNECTED),this.state=eS.RELAY_STATE_IDLE,this.prevChannelMediaConfig&&this.sendStartRelayMessage(this.prevChannelMediaConfig).catch(e=>{this.state!==eS.RELAY_STATE_IDLE&&(CE.error("auto restart channel media relay failed",e.toString()),this.errorCode=tS.SERVER_CONNECTION_LOST,this.state=eS.RELAY_STATE_FAILURE)})}),this.joinInfo=e,this.clientId=t,this.sid=NI(),this.signal=new nC(this.joinInfo,this.clientId,i),this.httpRetryConfig=n}async startChannelMediaRelay(e){if(this.state!==eS.RELAY_STATE_IDLE)throw new EE(_E.INVALID_OPERATION);this.state=eS.RELAY_STATE_CONNECTING,await this.connect(),CE.debug("[".concat(this.clientId,"] startChannelMediaRelay: connect success"));try{await this.sendStartRelayMessage(e)}catch(e){if(e.data&&e.data.serverResponse&&"SetSourceChannel"===e.data.serverResponse.command)throw new EE(_E.CROSS_CHANNEL_FAILED_JOIN_SRC);if(e.data&&e.data.serverResponse&&"SetDestChannelStatus"===e.serverResponse.command)throw new EE(_E.CROSS_CHANNEL_FAILED_JOIN_DEST);if(e.data&&e.data.serverResponse&&"StartPacketTransfer"===e.serverResponse.command)throw new EE(_E.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST);throw e}this.prevChannelMediaConfig=e}async updateChannelMediaRelay(e){if(this.state!==eS.RELAY_STATE_RUNNING)throw new EE(_E.INVALID_OPERATION);await this.sendUpdateMessage(e),this.prevChannelMediaConfig=e}async stopChannelMediaRelay(){await this.sendStopRelayMessage(),CE.debug("[".concat(this.clientId,"] stopChannelMediaRelay: send stop message success")),this.state=eS.RELAY_STATE_IDLE,this.dispose()}dispose(){CE.debug("[".concat(this.clientId,"] disposeChannelMediaRelay")),this.cancelToken.cancel(),this.cancelToken=uE.CancelToken.source(),this.state=eS.RELAY_STATE_IDLE,this.emit("dispose"),this.signal.dispose(),this.prevChannelMediaConfig=void 0}async connect(){const e=await Hv(this.joinInfo,this.cancelToken.token,this.httpRetryConfig);this.workerToken=e.workerToken,await this.signal.connect(e.addressList),this.emit("event",$f.NETWORK_CONNECTED),this.signal.on("status",this.onStatus),this.signal.on("reconnecting",this.onReconnect)}async sendStartRelayMessage(e){const t=this.genMessage(Zf.StopPacketTransfer);await this.signal.request(t),await this.signal.waitStatus("Normal Quit"),CE.debug("[".concat(this.clientId,"] startChannelMediaRelay: StopPacketTransfer success"));const i=this.genMessage(Zf.SetSdkProfile,e);await this.signal.request(i),CE.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSdkProfile success"));const n=this.genMessage(Zf.SetSourceChannel,e);await this.signal.request(n),await this.signal.waitStatus("SetSourceChannelStatus"),this.emit("event",$f.PACKET_JOINED_SRC_CHANNEL),CE.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSourceChannel success"));const r=this.genMessage(Zf.SetSourceUserId,e);await this.signal.request(r),CE.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSourceUserId success"));const o=this.genMessage(Zf.SetDestChannel,e);await this.signal.request(o),await this.signal.waitStatus("SetDestChannelStatus"),this.emit("event",$f.PACKET_JOINED_DEST_CHANNEL),CE.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetDestChannel success"));const s=this.genMessage(Zf.StartPacketTransfer,e);await this.signal.request(s),this.emit("event",$f.PACKET_SENT_TO_DEST_CHANNEL),this.state=eS.RELAY_STATE_RUNNING,CE.debug("[".concat(this.clientId,"] startChannelMediaRelay: StartPacketTransfer success"))}async sendUpdateMessage(e){const t=this.genMessage(Zf.UpdateDestChannel,e);await this.signal.request(t),this.emit("event",$f.PACKET_UPDATE_DEST_CHANNEL),CE.debug("[".concat(this.clientId,"] sendUpdateMessage: UpdateDestChannel success"))}async sendStopRelayMessage(){const e=this.genMessage(Zf.StopPacketTransfer);await this.signal.request(e),CE.debug("[".concat(this.clientId,"] sendStopRelayMessage: StopPacketTransfer success"))}genMessage(e,t){const i=[],n=[],r=[];this.requestId+=1;const o={appId:this.joinInfo.appId,cname:this.joinInfo.cname,uid:this.joinInfo.uid.toString(),sdkVersion:AE,sid:this.sid,ts:Date.now(),requestId:this.requestId,seq:this.requestId,allocate:!0,clientRequest:{}};"4.17.0"===o.sdkVersion&&(o.sdkVersion="0.0.1");let s=null,a=null;switch(e){case Zf.SetSdkProfile:return o.clientRequest={command:"SetSdkProfile",type:"multi_channel"},o;case Zf.SetSourceChannel:if(a=t&&t.getSrcChannelMediaInfo(),!a)throw new EE(_E.UNEXPECTED_ERROR,"can not find source config");return o.clientRequest={command:"SetSourceChannel",uid:"0",channelName:a.channelName,token:a.token||this.joinInfo.appId},o;case Zf.SetSourceUserId:if(a=t&&t.getSrcChannelMediaInfo(),!a)throw new EE(_E.UNEXPECTED_ERROR,"can not find source config");return o.clientRequest={command:"SetSourceUserId",uid:a.uid+""},o;case Zf.SetDestChannel:if(s=t&&t.getDestChannelMediaInfo(),!s)throw new EE(_E.UNEXPECTED_ERROR,"can not find dest config");return s.forEach(e=>{i.push(e.channelName),n.push(e.uid+""),r.push(e.token||this.joinInfo.appId)}),o.clientRequest={command:"SetDestChannel",channelName:i,uid:n,token:r},o;case Zf.StartPacketTransfer:return o.clientRequest={command:"StartPacketTransfer"},o;case Zf.Reconnect:return o.clientRequest={command:"Reconnect"},o;case Zf.StopPacketTransfer:return o.clientRequest={command:"StopPacketTransfer"},o;case Zf.UpdateDestChannel:if(s=t&&t.getDestChannelMediaInfo(),!s)throw new EE(_E.UNEXPECTED_ERROR,"can not find dest config");return s.forEach(e=>{i.push(e.channelName),n.push(e.uid+""),r.push(e.token||this.joinInfo.appId)}),o.clientRequest={command:"UpdateDestChannel",channelName:i,uid:n,token:r},o}return o}}const oC=e=>{const t=document.createElement("canvas");return t.width=2,t.height=2,new Sl((i,n)=>{t.toBlob(async e=>{if(t.remove(),e){const n=await sC(e);i({buffer:n,width:t.width,height:t.height})}else n(new EE(_E.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED))},e,1)})},sC=async e=>{const t=await e.arrayBuffer();return new Uint8Array(t)};function aC(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function cC(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?aC(Object(i),!0).forEach((function(t){lp(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):aC(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}class dC{get videoElementStatus(){return this._videoElementStatus}set videoElementStatus(e){e!==this._videoElementStatus&&(CE.debug("[".concat(this.trackId,"] video-element-status change ").concat(this._videoElementStatus," => ").concat(e)),this._videoElementStatus=e)}constructor(e){lp(this,"trackId",void 0),lp(this,"config",void 0),lp(this,"onFirstVideoFrameDecoded",void 0),lp(this,"freezeTimeCounterList",[]),lp(this,"renderFreezeAccTime",0),lp(this,"timeUpdatedCount",0),lp(this,"freezeTime",0),lp(this,"playbackTime",0),lp(this,"lastTimeUpdatedTime",0),lp(this,"autoplayFailed",!1),lp(this,"videoTrack",void 0),lp(this,"container",void 0),lp(this,"videoElement",void 0),lp(this,"cacheVideoElement",void 0),lp(this,"videoElementCheckInterval",void 0),lp(this,"_videoElementStatus",tf.NONE),lp(this,"slot",void 0),lp(this,"isGettingVideoDimensions",!1),lp(this,"handleVideoEvents",e=>{switch(e.type){case"play":case"playing":this.startGetVideoDimensions(),this.videoElementStatus=tf.PLAYING;break;case"loadeddata":if(this.onFirstVideoFrameDecoded&&this.onFirstVideoFrameDecoded(),this.cacheVideoElement){try{this.container&&this.container.removeChild(this.cacheVideoElement)}catch(e){}this.cacheVideoElement=void 0}break;case"canplay":this.videoElementStatus=tf.CANPLAY;break;case"stalled":this.videoElementStatus=tf.STALLED;break;case"suspend":this.videoElementStatus=tf.SUSPEND;break;case"pause":this.videoElementStatus=tf.PAUSED,Kh()||Zh()||Wh()&&this.autoplayFailed||!this.videoElement||!this.videoTrack||"live"!==this.videoTrack.readyState||(CE.debug("[track-".concat(this.trackId,"] video element paused, auto resume")),this.videoElement.play());break;case"waiting":this.videoElementStatus=tf.WAITING;break;case"abort":this.videoElementStatus=tf.ABORT;break;case"ended":this.videoElementStatus=tf.ENDED;break;case"emptied":this.videoElementStatus=tf.EMPTIED;break;case"error":{var t;this.videoElementStatus=tf.ERROR;const e=null===(t=this.videoElement)||void 0===t?void 0:t.error;e&&CE.error("[".concat(this.trackId,"] media error, code: ").concat(e.code,", message: ").concat(e.message));break}case"timeupdate":{const e=performance.now();if(this.timeUpdatedCount+=1,this.timeUpdatedCount<10)return void(this.lastTimeUpdatedTime=e);const t=e-this.lastTimeUpdatedTime,i=this.lastTimeUpdatedTime;if(this.lastTimeUpdatedTime=e,lI.lastVisibleTime<lI.lastHiddenTime||i<lI.lastHiddenTime||i<lI.lastVisibleTime)return;for(t>FE("VIDEO_FREEZE_DURATION")&&(this.freezeTime+=t),this.playbackTime+=t;this.playbackTime>=6e3;){this.playbackTime-=6e3;const e=Math.min(6e3,this.freezeTime);this.freezeTimeCounterList.push(e),this.freezeTime=Math.max(0,this.freezeTime-6e3)}break}}}),lp(this,"startGetVideoDimensions",()=>{const e=()=>{if(this.isGettingVideoDimensions=!0,this.videoElement&&this.videoElement.videoWidth*this.videoElement.videoHeight>4)return CE.debug("[".concat(this.trackId,"] current video dimensions:"),this.videoElement.videoWidth,this.videoElement.videoHeight),void(this.isGettingVideoDimensions=!1);setTimeout(e,500)};!this.isGettingVideoDimensions&&e()}),lp(this,"autoResumeAfterInterruption",()=>{this.videoElement&&this.videoTrack&&"live"===this.videoTrack.readyState&&"running"===wg.curState&&(Qh()?(CE.debug("[track-".concat(this.trackId,"] video element paused, auto resume for iOS 15.2")),this.videoElement.srcObject=null,this.videoElement.srcObject=new MediaStream([this.videoTrack]),this.videoElement.play()):zh()?(CE.debug("[track-".concat(this.trackId,"] video element paused, auto resume for iOS 15.1")),this.videoElement.srcObject=null,this.videoElement.srcObject=new MediaStream([this.videoTrack]),this.videoElement.play()):Xh()&&(CE.debug("[track-".concat(this.trackId,"] video element paused, auto resume for iOS 15.0")),this.videoElement.pause(),this.videoElement.play()))}),lp(this,"autoResumeAfterInterruptionOnIOS15",()=>{this.videoElement&&this.videoTrack&&"live"===this.videoTrack.readyState&&(Qh()?(CE.debug("[track-".concat(this.trackId,"] video element paused, auto resume for iOS 15.2")),this.videoElement.srcObject=null,this.videoElement.srcObject=new MediaStream([this.videoTrack]),this.videoElement.play()):zh()?(CE.debug("[track-".concat(this.trackId,"] video element paused, auto resume for iOS 15.1")),this.videoElement.srcObject=null,this.videoElement.srcObject=new MediaStream([this.videoTrack]),this.videoElement.play()):Xh()&&(CE.debug("[track-".concat(this.trackId,"] video element paused, auto resume for iOS 15.0")),this.videoElement.pause(),this.videoElement.play()))}),this.slot=e.element,this.trackId=e.trackId,this.updateConfig(e),wg.on(Rg.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),wg.on(Rg.IOS_15_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15)}updateConfig(e){this.config=e,this.trackId=e.trackId;const t=e.element;t!==this.slot&&(this.destroy(),this.slot=t),this.createElements()}updateVideoTrack(e){this.videoTrack!==e&&(this.videoTrack=e,this.createElements())}play(e){if(this.videoElement){const t=this.videoElement.play();t&&t.catch&&t.catch(t=>{e&&Tg.autoplayFailed(e,"video",t.message,this.trackId),"NotAllowedError"===t.name?(CE.warning("detected video element autoplay failed",t),this.autoplayFailed=!0,this.handleAutoPlayFailed()):CE.warning("[".concat(this.trackId,"] play warning: "),t)});const i=Mh();if(("Safari"===i.name&&15===Number(i.version)||Jh())&&t&&t.then&&t.catch){const e=()=>{this.config.mirror&&this.videoElement&&(this.videoElement.style.transform="rotateY(180deg)")};t.then(e).catch(e)}}}getCurrentFrame(){if(!this.videoElement)return new ImageData(2,2);const e=document.createElement("canvas");e.width=this.videoElement.videoWidth,e.height=this.videoElement.videoHeight;const t=e.getContext("2d");if(!t)return CE.error("create canvas context failed!"),new ImageData(2,2);t.drawImage(this.videoElement,0,0,e.width,e.height);const i=t.getImageData(0,0,e.width,e.height);return e.remove(),i}async getCurrentFrameToUint8Array(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(!this.videoElement)return await oC(e);const i=document.createElement("canvas");i.width=this.videoElement.videoWidth,i.height=this.videoElement.videoHeight;const n=i.getContext("2d");return n?(n.drawImage(this.videoElement,0,0,i.width,i.height),new Sl((n,r)=>{i.toBlob(async e=>{if(i.remove(),e){const t=await sC(e);n({buffer:t,width:i.width,height:i.height})}else r(new EE(_E.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED))},e,t<0?.1:t>1?1:t)})):await oC(e)}destroy(){if(wg.off(Rg.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),wg.off(Rg.IOS_15_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15),this.videoElement&&(this.videoElement.srcObject=null,this.videoElement.remove(),this.videoElement=void 0),this.container){try{this.container.remove(),this.slot.removeChild(this.container)}catch(e){}this.container=void 0}this.freezeTimeCounterList=[]}createElements(){this.container||(this.container=document.createElement("div")),this.container.id="agora-video-player-".concat(this.trackId),this.container.style.width="100%",this.container.style.height="100%",this.container.style.position="relative",this.container.style.overflow="hidden",this.videoTrack?(this.container.style.backgroundColor="black",FE("KEEP_LAST_FRAME")&&this.resetVideoElement(),this.createVideoElement(),this.container.appendChild(this.videoElement)):this.removeVideoElement(),this.slot.appendChild(this.container)}createVideoElement(){if(!this.videoElement&&(this.videoElementStatus=tf.INIT,this.videoElement=document.createElement("video"),this.container&&this.container.appendChild(this.videoElement),uC.forEach(e=>{this.videoElement&&this.videoElement.addEventListener(e,this.handleVideoEvents)}),this.videoElementCheckInterval=window.setInterval(()=>{!document.getElementById("video_".concat(this.trackId))&&this.videoElement&&(this.videoElementStatus=tf.DESTROYED)},1e3),FE("ENABLE_VIDEO_FRAME_CALLBACK"))){var e,t;let i;const n=(e,t)=>{if(this.videoElementStatus===tf.PLAYING){if(i){const e=t.presentationTime-i.presentationTime;e>FE("VIDEO_FREEZE_DURATION")&&lI.lastVisibleTime>=lI.lastHiddenTime&&i.timestamp>lI.lastVisibleTime&&i.timestamp>lI.lastHiddenTime&&(this.renderFreezeAccTime+=e)}i=cC(cC({},t),{},{timestamp:e})}var r,o;FE("ENABLE_VIDEO_FRAME_CALLBACK")&&(null===(r=this.videoElement)||void 0===r||null===(o=r.requestVideoFrameCallback)||void 0===o||o.call(r,n))};null===(e=(t=this.videoElement).requestVideoFrameCallback)||void 0===e||e.call(t,n)}this.videoElement.id="video_".concat(this.trackId),this.videoElement.className="agora_video_player",this.videoElement.style.width="100%",this.videoElement.style.height="100%",this.videoElement.style.position="absolute",this.videoElement.controls=!1,this.videoElement.setAttribute("playsinline",""),this.videoElement.style.left="0",this.videoElement.style.top="0",ip()&&(this.videoElement.poster="noposter");const i=Mh();if("Safari"===i.name&&15===Number(i.version)||Jh()||!this.config.mirror||(this.videoElement.style.transform="rotateY(180deg)"),this.config.fit?this.videoElement.style.objectFit=this.config.fit:this.videoElement.style.objectFit="cover",this.videoElement.setAttribute("muted",""),this.videoElement.muted=!0,this.videoElement.srcObject&&this.videoElement.srcObject instanceof MediaStream){this.videoElement.srcObject.getVideoTracks()[0]!==this.videoTrack&&(this.videoElement.srcObject=this.videoTrack?new MediaStream([this.videoTrack]):null,Hh()&&this.videoElement.load())}else this.videoElement.srcObject=this.videoTrack?new MediaStream([this.videoTrack]):null,Hh()&&this.videoElement.load();const n=this.videoElement.play();void 0!==n&&n.catch(e=>{CE.debug("[".concat(this.trackId,"] playback interrupted"),e.toString())})}removeVideoElement(){if(this.videoElement){uC.forEach(e=>{this.videoElement&&this.videoElement.removeEventListener(e,this.handleVideoEvents)}),this.videoElementCheckInterval&&(window.clearInterval(this.videoElementCheckInterval),this.videoElementCheckInterval=void 0);try{this.container&&this.container.removeChild(this.videoElement)}catch(e){}this.videoElement=void 0,this.videoElementStatus=tf.NONE}}resetVideoElement(){this.videoElement&&(uC.forEach(e=>{this.videoElement&&this.videoElement.removeEventListener(e,this.handleVideoEvents)}),this.videoElementCheckInterval&&(window.clearInterval(this.videoElementCheckInterval),this.videoElementCheckInterval=void 0),this.cacheVideoElement=this.videoElement,this.videoElement=void 0,this.videoElementStatus=tf.NONE)}handleAutoPlayFailed(){if(this.videoElement){const e=t=>{t.preventDefault(),this.videoElement&&(this.videoElement.play().then(()=>{CE.debug("[".concat(this.trackId,"] Video element for trackId:").concat(this.trackId," autoplay resumed."))}).catch(e=>{CE.error(e)}),this.autoplayFailed=!1,np()?document.body.removeEventListener("click",e,!0):(document.body.removeEventListener("touchstart",e,!0),document.body.removeEventListener("mousedown",e,!0)))};np()?document.body.addEventListener("click",e,!0):(document.body.addEventListener("touchstart",e,!0),document.body.addEventListener("mousedown",e,!0)),hg()}}getVideoElement(){return this.videoElement}getContainerElement(){return this.container}}const uC=["play","playing","loadeddata","canplay","pause","stalled","suspend","waiting","abort","emptied","ended","timeupdate","error"];function lC(e){const t={};e.facingMode&&(t.facingMode=e.facingMode),e.cameraId&&(t.deviceId={exact:e.cameraId});const i=LE(e.encoderConfig);return t.width=i.width,t.height=i.height,!ep()&&i.frameRate&&(t.frameRate=i.frameRate),Mh().name===Nh.EDGE&&"object"==typeof t.frameRate&&(t.frameRate.max=60),Hh()&&(t.frameRate={ideal:30,max:30}),t}function hC(e){const t={};e.screenSourceType&&(t.mediaSource=e.screenSourceType),e.extensionId&&Gh()&&(t.extensionId=e.extensionId),e.electronScreenSourceId&&(t.sourceId=e.electronScreenSourceId);const i=e.encoderConfig?kE(e.encoderConfig):null;return t.mandatory={chromeMediaSource:"desktop",maxWidth:i?i.width:void 0,maxHeight:i?i.height:void 0},i&&i.frameRate&&("number"==typeof i.frameRate?(t.mandatory.maxFrameRate=i.frameRate,t.mandatory.minFrameRate=i.frameRate):(t.mandatory.maxFrameRate=i.frameRate.max||i.frameRate.ideal||i.frameRate.exact||void 0,t.mandatory.minFrameRate=i.frameRate.min||i.frameRate.ideal||i.frameRate.exact||void 0),t.frameRate=i.frameRate),i&&i.width&&(t.width=i.width),i&&i.height&&(t.height=i.height),t}function pC(e){const t={};if(ep()||(void 0!==e.AGC&&(t.autoGainControl=e.AGC),void 0!==e.AEC&&(t.echoCancellation=e.AEC),void 0!==e.ANS&&(t.noiseSuppression=e.ANS,Gh()&&e.ANS&&(t.googHighpassFilter=e.ANS))),e.encoderConfig){const i=xE(e.encoderConfig);t.channelCount=i.stereo?2:1,t.sampleRate=i.sampleRate,t.sampleSize=i.sampleSize}return e.microphoneId&&(t.deviceId={exact:e.microphoneId}),ip()&&(t.sampleRate=void 0),t}var _C,EC;!function(e){e.COVERED="COVERED",e.POSITION="POSITION",e.SIZE="SIZE",e.STYLE="STYLE"}(_C||(_C={})),function(e){e.UNMOUNTED="UNMOUNTED",e.INVALID_HTML_ELEMENT="INVALID_HTML_ELEMENT"}(EC||(EC={}));var mC,fC,SC,TC,gC,RC,IC,vC,CC,yC,AC,OC,bC,wC,NC,DC,PC,LC,kC,MC,UC,xC,VC,FC,jC,BC,GC,WC,HC,KC,YC,qC,JC=new class{constructor(){lp(this,"_clientSize",null),lp(this,"getClientWidth",()=>document.documentElement?document.documentElement.clientWidth:document.body.clientWidth),lp(this,"getClientHeight",()=>document.documentElement?document.documentElement.clientHeight:document.body.clientHeight),lp(this,"getStyle",e=>window.getComputedStyle(e,null)),lp(this,"checkCssVisibleProperty",e=>{let t=!0;const i=this.getStyle(e),{display:n,visibility:r,opacity:o,filter:s}=i;if(("none"===n||["hidden","collapse"].includes(r)||Number(o)<.1)&&(t=!1),!t)return!1;if(s){s.split(" ").filter(e=>{const t=e.split("(")[0];return["brightness","blur","opacity"].includes(t)}).map(e=>{const[t,i]=e.split(/\(|\)/);return[t,Number(i.match(/^[0-9\.]+/))]}).forEach(e=>{const[i,n]=e;switch(i){case"brightness":(n<.1||n>3)&&(t=!1);break;case"blur":n>3&&(t=!1);break;case"opacity":n<.1&&(t=!1)}})}return t}),lp(this,"checkPropertyUpToAllParentNodes",(e,t)=>{let i=!0,n=!0;const r=e=>t(e);let o=e;for(;o&&n;){r(o)||(i=!1,n=!1),o=o.parentElement,o||(n=!1)}return i}),lp(this,"checkActualCssVisibleIncludeInherit",e=>this.checkPropertyUpToAllParentNodes(e,this.checkCssVisibleProperty)),lp(this,"getSizeAboutClient",e=>{const{width:t,height:i,left:n,right:r,top:o,bottom:s}=e.getBoundingClientRect(),a=this.getClientWidth(),c=this.getClientHeight();return{width:t,height:i,left:n,right:r,top:o,bottom:s,clientWidth:a,clientHeight:c,clientMin:Math.min(a,c)}}),lp(this,"checkActualSize",()=>{const{width:e,height:t,clientMin:i}=this._clientSize;return this.checkSizeIsVisible(e,t,i)}),lp(this,"elementFromPoint",(e,t)=>document.elementFromPoint?document.elementFromPoint(e,t):null),lp(this,"checkCoverForAPoint",(e,t,i)=>{const n=this.elementFromPoint(e,t);return null!==n&&n!==i}),lp(this,"getPointPositionList",()=>{const{width:e,height:t,left:i,top:n}=this._clientSize,r=e/6,o=t/6,s=[],a=10**6;for(let e=0;e<5;e++)for(let t=0;t<5;t++){const c=(i*a+(0===e?.1:4===e?(r*e*a-1e5)/a:r*e)*a)/a,d=(n*a+(0===t?.1:4===t?(o*t*a-1e5)/a:o*t)*a)/a;s.push({x:c,y:d})}return[...s]}),lp(this,"checkElementCover",e=>this.getPointPositionList().map(t=>this.checkCoverForAPoint(t.x,t.y,e)).filter(e=>!!e).length>6),lp(this,"checkSizeIsVisible",(e,t,i)=>(e>50||i/e<=10)&&(t>50||i/t<=10)),lp(this,"checkSizeOfPartInClient",()=>{const{left:e,right:t,top:i,bottom:n,clientHeight:r,clientWidth:o,clientMin:s}=this._clientSize;let a,c,d,u;if(e<0)a=0;else{if(!(e<o))return!1;a=e}if(t<0)return!1;if(c=t<o?t:o,i<0)d=0;else{if(!(i<r))return!1;d=i}if(n<0)return!1;u=n<r?n:r;const l=c-a,h=u-d;return this.checkSizeIsVisible(l,h,s)}),lp(this,"returnHiddenResult",e=>(this._clientSize=null,{visible:!1,reason:e})),lp(this,"checkOneElementVisible",e=>{if(e instanceof HTMLElement){if(this.checkElementIsMountedOnDom(e)){if(this.checkActualCssVisibleIncludeInherit(e)){if(this._clientSize=this.getSizeAboutClient(e),this.checkElementCover(e))return this.returnHiddenResult(_C.COVERED);{const e=this.checkActualSize(),t=this.checkSizeOfPartInClient();return e&&!t?this.returnHiddenResult(_C.POSITION):e?(this._clientSize=null,{visible:!0}):this.returnHiddenResult(_C.SIZE)}}return this.returnHiddenResult(_C.STYLE)}return this.returnHiddenResult(EC.UNMOUNTED)}return this.returnHiddenResult(EC.INVALID_HTML_ELEMENT)}),lp(this,"checkElementIsMountedOnDom",e=>this.checkPropertyUpToAllParentNodes(e,e=>"HTML"!==e.nodeName.toUpperCase()?null!==e.parentElement:!!document.documentElement))}};function XC(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function zC(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?XC(Object(i),!0).forEach((function(t){lp(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):XC(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}let QC=(mC=Sg({argsMap:(e,t,i)=>[e.getTrackId(),"string"==typeof t?t:"HTMLElement",i]}),fC=$g(),SC=Sg({argsMap:e=>[e.getTrackId()]}),TC=Cg("LocalVideoTrack","_enabledMutex"),gC=Sg({argsMap:(e,t)=>[e.getTrackId(),t]}),RC=$g(),IC=Cg("LocalVideoTrack","_enabledMutex"),vC=Sg({argsMap:(e,t)=>[e.getTrackId(),t]}),CC=$g(),yC=$g(),AC=Sg({argsMap:(e,t,i)=>[e.getTrackId(),t,i]}),OC=$g(),bC=$g(),wC=$g(),NC=$g(),DC=$g(),PC=$g(),LC=$g(),kC=Sg({argsMap:(e,t)=>[e.getTrackId(),t.name]}),MC=Sg({argsMap:e=>[e.getTrackId()]}),UC=Sg({argsMap:e=>[e.getTrackId()]}),xC=Sg({argsMap:(e,t,i)=>[e.getTrackId(),t.label,i]}),JT((VC=class e extends yg{get isPlaying(){return!(!this._player||this._player.videoElementStatus!==tf.PLAYING)}get __className__(){return"LocalVideoTrack"}constructor(e,t,i,n,r,o){super(e,r),lp(this,"trackMediaType","video"),lp(this,"_player",void 0),lp(this,"_videoVisibleTimer",null),lp(this,"_previousVideoVisibleStatus",void 0),lp(this,"_clearPreviousVideoVisibleStatus",()=>this._previousVideoVisibleStatus=void 0),lp(this,"_encoderConfig",void 0),lp(this,"_scalabiltyMode",{numSpatialLayers:1,numTemporalLayers:1}),lp(this,"_optimizationMode",void 0),lp(this,"_videoHeight",void 0),lp(this,"_videoWidth",void 0),lp(this,"_forceBitrateLimit",void 0),lp(this,"_enabled",!0),lp(this,"processorDestination",void 0),lp(this,"processorContext",void 0),this.updateMediaStreamTrackResolution(),this._encoderConfig=t,this._scalabiltyMode=i,this._optimizationMode=n,this._hints=o||[],-1===this._hints.indexOf(aS.SCREEN_TRACK)&&this.updateBitrateFromProfile(),this.processorContext=new JR(this.getTrackId(),"local"),this.processorDestination=new qR(this.processorContext),this.bindProcessorDestinationEvents()}play(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"==typeof e){const t=document.getElementById(e);t?e=t:(CE.warning("[".concat(this.getTrackId(),'] can not find "#').concat(e,'" element, use document.body')),e=document.body)}CE.debug("[".concat(this.getTrackId(),"] start video playback"),JSON.stringify(t));const i=zC(zC(zC({},this._getDefaultPlayerConfig()),t),{},{trackId:this.getTrackId(),element:e});this._player?this._player.updateConfig(i):(this._player=new dC(i),this._player.updateVideoTrack(this._mediaStreamTrack)),this._player.play(),this._videoVisibleTimer&&window.clearInterval(this._videoVisibleTimer),this._clearPreviousVideoVisibleStatus(),this._videoVisibleTimer=window.setInterval(()=>{try{const e=this.getVideoElementVisibleStatus();this.emit(uS.VIDEO_ELEMENT_VISIBLE_STATUS,e)}catch(e){}},FE("CHECK_VIDEO_VISIBLE_INTERVAL"))}stop(){this._player&&(this._videoVisibleTimer&&(window.clearInterval(this._videoVisibleTimer),this._videoVisibleTimer=null),this._clearPreviousVideoVisibleStatus(),this._player.destroy(),this._player=void 0,CE.debug("[".concat(this.getTrackId(),"] stop video playback")))}async setEnabled(e,t){if(!t){if(e===this._enabled)return;this.stateCheck("enabled",e)}if(CE.info("[".concat(this.getTrackId(),"] start setEnabled"),e),!e){this._originMediaStreamTrack.enabled=!1;try{await MI(this,sS.NEED_DISABLE_TRACK,this)}catch(e){throw CE.error("[".concat(this.getTrackId(),"] setEnabled to false error"),e.toString()),e}return t||(this._enabled=!1),void CE.info("[".concat(this.getTrackId(),"] setEnabled to false success"))}this._originMediaStreamTrack.enabled=!0;try{await MI(this,sS.NEED_ENABLE_TRACK,this)}catch(e){throw CE.error("[".concat(this.getTrackId(),"] setEnabled to true error"),e.toString()),e}CE.info("[".concat(this.getTrackId(),"] setEnabled to true success")),t||(this._enabled=!0)}async setMuted(e){e!==this._muted&&(this.stateCheck("muted",e),this._muted=e,this._originMediaStreamTrack.enabled=!e,CE.debug("[".concat(this.getTrackId(),"] start set muted: ").concat(e)),e?await MI(this,sS.NEED_MUTE_TRACK,this):await MI(this,sS.NEED_UNMUTE_TRACK,this))}getStats(){WI(()=>{CE.warning("[deprecated] LocalVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalVideoStats instead")},"localVideoTrackGetStatsWarning");const e=UI(this,sS.GET_STATS);return e||zC({},Uf)}async setBeautyEffect(e){CE.error("LocalVideoTrack.setBeautyEffect was deprecated, please migrate to agora-extension-beauty-effect https://docs-beta.agora.io/en/video-calling/develop/image-enhancement?platform=web ")}getCurrentFrameData(){return this._player?this._player.getCurrentFrame():new ImageData(2,2)}async getCurrentFrameImage(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this._player?this._player.getCurrentFrameToUint8Array(e,t):await oC(e)}clone(t,i,n,r){const o=this._mediaStreamTrack.clone();return new e(o,t,i,n,r)}async setBitrateLimit(e){if(CE.debug("[".concat(this.getTrackId(),"] set bitrate limit, ").concat(JSON.stringify(e))),e){this._forceBitrateLimit=e,this._encoderConfig&&(this._encoderConfig.bitrateMax?this._encoderConfig.bitrateMax=this._encoderConfig.bitrateMax<e.max_bitrate?this._encoderConfig.bitrateMax:e.max_bitrate:this._encoderConfig.bitrateMax=e.max_bitrate,this._encoderConfig.bitrateMin,this._encoderConfig.bitrateMin=e.min_bitrate);try{await MI(this,sS.NEED_UPDATE_VIDEO_ENCODER,this)}catch(e){return e.throw()}}}async setOptimizationMode(e){if("motion"!==e&&"detail"!==e&&"balanced"!==e)return void CE.error(_E.INVALID_PARAMS,"optimization mode must be motion, detail or balanced");const t=this._optimizationMode;try{this._optimizationMode=e,await MI(this,sS.SET_OPTIMIZATION_MODE,this)}catch(e){throw this._optimizationMode=t,CE.error("[".concat(this.getTrackId(),"] set optimization mode failed"),e.toString()),e}CE.info("[".concat(this.getTrackId(),"] set optimization mode success (").concat(e,")"))}setScalabiltyMode(e){if(1===e.numSpatialLayers&&1!==e.numTemporalLayers)return CE.error(_E.INVALID_PARAMS,"scalability mode currently not supported, no SVC."),void(this._scalabiltyMode={numSpatialLayers:1,numTemporalLayers:1});this._scalabiltyMode=e,CE.info("[".concat(this.getTrackId(),"] set scalability mode success (").concat(e,")"))}updateMediaStreamTrackResolution(){PI(this._originMediaStreamTrack).then(e=>{let[t,i]=e;this._videoHeight=i,this._videoWidth=t}).catch(DI)}_updatePlayerSource(){this._player&&this._player.updateVideoTrack(this._mediaStreamTrack)}_getDefaultPlayerConfig(){return{fit:"contain"}}updateBitrateFromProfile(){if(!this._encoderConfig)return;const{width:e,height:t,frameRate:i}=this.getMediaStreamTrackSettings();if(!e||!t||!i)return;const[n,r]=function(e,t,i){const n=FE("BITRATE_ADAPTER_TYPE");let r;const o=200*Math.pow(i/15,.6)*Math.pow(e*t/640/360,.75),s=o;if("STANDARD_BITRATE"===n)r=4*o;else{if("COMPATIABLE_BITRATE"!==n)return;r=2*o}return[Math.floor(r),Math.floor(s)]}(e,t,i)||[void 0,void 0];this._encoderConfig.bitrateMin||this._encoderConfig.bitrateMax||(this._encoderConfig.bitrateMin=r,this._encoderConfig.bitrateMax=n,CE.debug("[".concat(this.getTrackId(),"] update bitrate from profile, [w: ").concat(e,", h: ").concat(t,", fps: ").concat(i,"] => [brMax: ").concat(n,", brMin: ").concat(r,"]")))}getVideoElementVisibleStatus(){try{var e,t;const i=null==this||null===(e=this._player)||void 0===e?void 0:e.getContainerElement(),n={track:this,element:null==this||null===(t=this._player)||void 0===t?void 0:t.getVideoElement(),slot:null==i?void 0:i.parentElement},{element:r,slot:o}=n;if(this.isPlaying&&r instanceof HTMLVideoElement&&o instanceof HTMLElement){const e=JC.checkOneElementVisible(r),t=Object.assign({},e);if(t.visible!==this._previousVideoVisibleStatus){this._previousVideoVisibleStatus=t.visible;const e=Tg.reportApiInvoke(null,{tag:lf.TRACER,name:uf.LOCAL_VIDEO_TRACK_GET_VIDEO_VISIBLE,options:[this.getTrackId()]});t.visible?e.onSuccess("Video is visible"):e.onSuccess("Invisible because of ".concat(t.reason))}return t}return}catch(e){throw new EE(_E.GET_VIDEO_ELEMENT_VISIBLE_ERROR,e.message)}}async renewMediaStreamTrack(e){}pipe(e){if(this.processor===e)return e;if(e._source)throw new EE(_E.INVALID_OPERATION,"Processor ".concat(e.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=e,this.processor._source=this,e.updateInput({track:this._originMediaStreamTrack,context:this.processorContext}),e}unpipe(){if(!this.processor)return;const e=this.processor;this.processor._source=void 0,this.processor=void 0,e.reset()}close(){super.close(),this.unbindProcessorDestinationEvents(),this.unbindProcessorContextEvents(),this.unpipe(),this.processorDestination._source&&this.processorDestination._source.unpipe()}async replaceTrack(e,t){if(!(e instanceof MediaStreamTrack))throw new EE(_E.INVALID_PARAMS,"track should be an instance of MediaStreamTrack");if("video"!==e.kind)throw new EE(_E.INVALID_PARAMS,"track should be a video MediaStreamTrack");await this._updateOriginMediaStreamTrack(e,t,!0),this.updateMediaStreamTrackResolution()}bindProcessorDestinationEvents(){this.processorDestination.on(AS.ON_TRACK,async e=>{e?e!==this._mediaStreamTrack&&(this._mediaStreamTrack=e,this._updatePlayerSource(),await MI(this,sS.NEED_REPLACE_TRACK,this)):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await MI(this,sS.NEED_REPLACE_TRACK,this))})}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(AS.ON_TRACK)}unbindProcessorContextEvents(){this.processorContext.removeAllListeners(OS.REQUEST_UPDATE_CONSTRAINTS),this.processorContext.removeAllListeners(OS.REQUEST_CONSTRAINTS)}}).prototype,"play",[mC,fC],Object.getOwnPropertyDescriptor(VC.prototype,"play"),VC.prototype),JT(VC.prototype,"stop",[SC],Object.getOwnPropertyDescriptor(VC.prototype,"stop"),VC.prototype),JT(VC.prototype,"setEnabled",[TC,gC,RC],Object.getOwnPropertyDescriptor(VC.prototype,"setEnabled"),VC.prototype),JT(VC.prototype,"setMuted",[IC,vC,CC],Object.getOwnPropertyDescriptor(VC.prototype,"setMuted"),VC.prototype),JT(VC.prototype,"getStats",[yC],Object.getOwnPropertyDescriptor(VC.prototype,"getStats"),VC.prototype),JT(VC.prototype,"setBeautyEffect",[AC,OC],Object.getOwnPropertyDescriptor(VC.prototype,"setBeautyEffect"),VC.prototype),JT(VC.prototype,"getCurrentFrameData",[bC],Object.getOwnPropertyDescriptor(VC.prototype,"getCurrentFrameData"),VC.prototype),JT(VC.prototype,"getCurrentFrameImage",[wC],Object.getOwnPropertyDescriptor(VC.prototype,"getCurrentFrameImage"),VC.prototype),JT(VC.prototype,"setBitrateLimit",[NC],Object.getOwnPropertyDescriptor(VC.prototype,"setBitrateLimit"),VC.prototype),JT(VC.prototype,"setOptimizationMode",[DC],Object.getOwnPropertyDescriptor(VC.prototype,"setOptimizationMode"),VC.prototype),JT(VC.prototype,"setScalabiltyMode",[PC],Object.getOwnPropertyDescriptor(VC.prototype,"setScalabiltyMode"),VC.prototype),JT(VC.prototype,"updateMediaStreamTrackResolution",[LC],Object.getOwnPropertyDescriptor(VC.prototype,"updateMediaStreamTrackResolution"),VC.prototype),JT(VC.prototype,"pipe",[kC],Object.getOwnPropertyDescriptor(VC.prototype,"pipe"),VC.prototype),JT(VC.prototype,"unpipe",[MC],Object.getOwnPropertyDescriptor(VC.prototype,"unpipe"),VC.prototype),JT(VC.prototype,"close",[UC],Object.getOwnPropertyDescriptor(VC.prototype,"close"),VC.prototype),JT(VC.prototype,"replaceTrack",[xC],Object.getOwnPropertyDescriptor(VC.prototype,"replaceTrack"),VC.prototype),VC),ZC=(FC=Sg({argsMap:(e,t)=>[e.getTrackId(),t]}),jC=$g(),BC=Cg("CameraVideoTrack","_enabledMutex"),GC=Sg({argsMap:(e,t)=>[e.getTrackId(),t]}),WC=$g(),HC=Sg({argsMap:(e,t)=>[e.getTrackId(),t]}),KC=$g(),YC=Sg({argsMap:e=>[e.getTrackId()]}),JT((qC=class extends QC{get __className__(){return"CameraVideoTrack"}constructor(e,t,i,n,r,o){super(e,LE(t.encoderConfig),n,r,o),lp(this,"_config",void 0),lp(this,"_originalConstraints",void 0),lp(this,"_constraints",void 0),lp(this,"_enabled",!0),lp(this,"_deviceName","default"),lp(this,"tryResumeVideoForIOS15WeChat",async()=>{Jh()&&!Qh()&&$h()&&this._enabled&&!this._isClosed&&(CE.debug("[".concat(this.getTrackId(),"] try capture camera media device for interrupted iOS 15 device on WeChat.")),await this.renewMediaStreamTrack())}),this._config=t,this._originalConstraints=i,this._constraints=i,this._deviceName=e.label,this._encoderConfig=LE(this._config.encoderConfig),wg.on(Rg.IOS_15_INTERRUPTION_END,this.tryResumeVideoForIOS15WeChat),wg.on(Rg.IOS_INTERRUPTION_END,this.tryResumeVideoForIOS15WeChat),this.bindProcessorContextEvents()}async setDevice(e){if(CE.info("[".concat(this.getTrackId(),"] set device to ").concat(e)),this._enabled)try{const t=await zg.getDeviceById(e),i={};i.video=zC({},this._constraints),i.video.deviceId={exact:e},i.video.facingMode=void 0,this._originMediaStreamTrack.stop();let n=null;try{n=await Yg(i,this.getTrackId())}catch(e){throw CE.error("[".concat(this.getTrackId(),"] setDevice failed"),e.toString()),n=await Yg({video:this._constraints},this.getTrackId()),await this._updateOriginMediaStreamTrack(n.getVideoTracks()[0],!1),e}await this._updateOriginMediaStreamTrack(n.getVideoTracks()[0],!1),this.updateMediaStreamTrackResolution(),this._deviceName=t.label,this._config.cameraId=e,this._constraints.deviceId={exact:e}}catch(e){throw CE.error("[".concat(this.getTrackId(),"] setDevice error"),e.toString()),e}else try{const t=await zg.getDeviceById(e);this._deviceName=t.label,this._config.cameraId=e,this._constraints.deviceId={exact:e}}catch(e){throw CE.error("[".concat(this.getTrackId(),"] setDevice error"),e.toString()),e}CE.info("[".concat(this.getTrackId(),"] setDevice success"))}async setEnabled(e,t){if(!t){if(e===this._enabled)return;this.stateCheck("enabled",e)}if(CE.info("[".concat(this.getTrackId(),"] start setEnabled"),e),e){try{if(this.isExternalTrack)this._originMediaStreamTrack.enabled=!0;else{const e=await Yg({video:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(e.getVideoTracks()[0],!1)}await MI(this,sS.NEED_ENABLE_TRACK,this)}catch(e){throw CE.error("[".concat(this.getTrackId(),"] setEnabled true error"),e.toString()),e}this.updateMediaStreamTrackResolution(),CE.info("[".concat(this.getTrackId(),"] setEnabled to true success")),t||(this._enabled=!0)}else{this.isExternalTrack?this._originMediaStreamTrack.enabled=!1:(this._originMediaStreamTrack.onended=null,this._originMediaStreamTrack.stop()),t||(this._enabled=!1);try{await MI(this,sS.NEED_DISABLE_TRACK,this)}catch(e){throw CE.error("[".concat(this.getTrackId(),"] setEnabled to false error"),e.toString()),e}CE.info("[".concat(this.getTrackId(),"] setEnabled to false success"))}}async setEncoderConfiguration(e,t){if(!this._enabled)throw new EE(_E.TRACK_IS_DISABLED,"can not set encoder configuration when track is disabled");e=LE(e),this._forceBitrateLimit&&(e.bitrateMax=this._forceBitrateLimit.max_bitrate?this._forceBitrateLimit.max_bitrate:e.bitrateMax,e.bitrateMin=this._forceBitrateLimit.min_bitrate?this._forceBitrateLimit.min_bitrate:e.bitrateMin);const i=BI(this._config);i.encoderConfig=e;const n=lC(i);(Wh()||Kh()||Zh())&&(n.deviceId=void 0),CE.debug("[".concat(this.getTrackId(),"] setEncoderConfiguration applyConstraints"),JSON.stringify(e),JSON.stringify(n));try{await this._originMediaStreamTrack.applyConstraints(n),this.updateMediaStreamTrackResolution()}catch(e){const t=new EE(_E.UNEXPECTED_ERROR,e.toString());throw CE.error("[".concat(this.getTrackId(),"] applyConstraints error"),t.toString()),t}this._config=i,this._constraints=n,this._originalConstraints=n,this._encoderConfig=e,-1===this._hints.indexOf(aS.SCREEN_TRACK)&&this.updateBitrateFromProfile();try{await MI(this,sS.NEED_UPDATE_VIDEO_ENCODER,this)}catch(e){return e.throw()}}_getDefaultPlayerConfig(){return{mirror:!0,fit:"cover"}}onTrackEnded(){if((Kh()||Zh())&&this._enabled&&!this._isClosed&&wg.duringInterruption){const e=async()=>{wg.off(Rg.IOS_INTERRUPTION_END,e),this._enabled&&!this._isClosed&&(CE.debug("[".concat(this.getTrackId(),"] try capture camera media device for interrupted iOS device.")),await this.setEnabled(!1),await this.setEnabled(!0))};wg.on(Rg.IOS_INTERRUPTION_END,e)}else CE.debug("[".concat(this.getTrackId(),"] track ended")),this.emit(uS.TRACK_ENDED)}async renewMediaStreamTrack(e){const t=e||this._constraints,i=zg.searchDeviceIdByName(this._deviceName);if(i&&!t.deviceId&&(t.deviceId={exact:i}),this._enabled){const e=await Yg({video:t},this.getTrackId());this._constraints=t,await this._updateOriginMediaStreamTrack(e.getVideoTracks()[0],!0),this.updateMediaStreamTrackResolution()}}close(){super.close(),wg.off(Rg.IOS_15_INTERRUPTION_END,this.tryResumeVideoForIOS15WeChat),wg.off(Rg.IOS_INTERRUPTION_END,this.tryResumeVideoForIOS15WeChat)}bindProcessorContextEvents(){this.processorContext.on(OS.REQUEST_UPDATE_CONSTRAINTS,async(e,t,i)=>{try{const i=Object.assign({},this._originalConstraints,...e);await this.renewMediaStreamTrack(i),t()}catch(e){i(e)}}),this.processorContext.on(OS.REQUEST_CONSTRAINTS,async e=>{e(this._originMediaStreamTrack.getSettings())})}}).prototype,"setDevice",[FC,jC],Object.getOwnPropertyDescriptor(qC.prototype,"setDevice"),qC.prototype),JT(qC.prototype,"setEnabled",[BC,GC,WC],Object.getOwnPropertyDescriptor(qC.prototype,"setEnabled"),qC.prototype),JT(qC.prototype,"setEncoderConfiguration",[HC,KC],Object.getOwnPropertyDescriptor(qC.prototype,"setEncoderConfiguration"),qC.prototype),JT(qC.prototype,"close",[YC],Object.getOwnPropertyDescriptor(qC.prototype,"close"),qC.prototype),qC);class $C{get hasVideo(){return this._video_enabled_&&!this._video_muted_&&this._video_added_}get hasAudio(){return this._audio_enabled_&&!this._audio_muted_&&this._audio_added_}get audioTrack(){if(this.hasAudio)return this._audioTrack}get videoTrack(){if(this.hasVideo)return this._videoTrack}constructor(e,t){lp(this,"uid",void 0),lp(this,"_uintid",void 0),lp(this,"_trust_in_room_",!0),lp(this,"_trust_audio_enabled_state_",!0),lp(this,"_trust_video_enabled_state_",!0),lp(this,"_trust_audio_mute_state_",!0),lp(this,"_trust_video_mute_state_",!0),lp(this,"_audio_muted_",!1),lp(this,"_video_muted_",!1),lp(this,"_audio_enabled_",!0),lp(this,"_video_enabled_",!0),lp(this,"_audio_added_",!1),lp(this,"_video_added_",!1),lp(this,"_trust_video_stream_added_state_",!0),lp(this,"_trust_audio_stream_added_state_",!0),lp(this,"_audioTrack",void 0),lp(this,"_videoTrack",void 0),lp(this,"_audioSSRC",void 0),lp(this,"_videoSSRC",void 0),lp(this,"_audioOrtc",void 0),lp(this,"_videoOrtc",void 0),lp(this,"_cname",void 0),lp(this,"_rtxSsrcId",void 0),this.uid=e,this._uintid=t}}var ey=fl,ty=pd,iy=Rd;Ii({target:"Promise",stat:!0},{try:function(e){var t=ty.f(this),i=iy(e);return(i.error?t.reject:t.resolve)(i.value),t.promise}});var ny=ey,ry=Ii,oy=h,sy=i,ay=VS,cy=q,dy=Fe,uy=wi,ly=ZE,hy=YS,py=OT,_y=ae,Ey=rt("isConcatSpreadable"),my=9007199254740991,fy="Maximum allowed index exceeded",Sy=oy.TypeError,Ty=_y>=51||!sy((function(){var e=[];return e[Ey]=!1,e.concat()[0]!==e})),gy=py("concat"),Ry=function(e){if(!cy(e))return!1;var t=e[Ey];return void 0!==t?!!t:ay(e)};ry({target:"Array",proto:!0,forced:!Ty||!gy},{concat:function(e){var t,i,n,r,o,s=dy(this),a=hy(s,0),c=0;for(t=-1,n=arguments.length;t<n;t++)if(Ry(o=-1===t?s:arguments[t])){if(c+(r=uy(o))>my)throw Sy(fy);for(i=0;i<r;i++,c++)i in o&&ly(a,c,o[i])}else{if(c>=my)throw Sy(fy);ly(a,c++,o)}return a.length=c,a}});var Iy={},vy=k,Cy=K,yy=Pn.f,Ay=rm,Oy="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];Iy.f=function(e){return Oy&&"Window"==vy(e)?function(e){try{return yy(e)}catch(e){return Ay(Oy)}}(e):yy(Cy(e))};var by={},wy=rt;by.f=wy;var Ny=J,Dy=Ge,Py=by,Ly=Ht.f,ky=function(e){var t=Ny.Symbol||(Ny.Symbol={});Dy(t,e)||Ly(t,e,{value:Py.f(e)})},My=Ii,Uy=h,xy=$,Vy=f,Fy=v,jy=d,By=g,Gy=ue,Wy=i,Hy=Ge,Ky=VS,Yy=S,qy=q,Jy=u,Xy=fe,zy=zt,Qy=Fe,Zy=K,$y=Et,eA=No,tA=N,iA=Pr,nA=hr,rA=Pn,oA=Iy,sA=Zn,aA=T,cA=Ht,dA=dr,uA=C,lA=pc,hA=xs,pA=Ne.exports,_A=Gn,EA=qe,mA=rt,fA=by,SA=ky,TA=ta,gA=ws,RA=eT.forEach,IA=pn("hidden"),vA="Symbol",CA=mA("toPrimitive"),yA=gA.set,AA=gA.getterFor(vA),OA=Object.prototype,bA=Uy.Symbol,wA=bA&&bA.prototype,NA=Uy.TypeError,DA=Uy.QObject,PA=xy("JSON","stringify"),LA=aA.f,kA=cA.f,MA=oA.f,UA=uA.f,xA=jy([].push),VA=pA("symbols"),FA=pA("op-symbols"),jA=pA("string-to-symbol-registry"),BA=pA("symbol-to-string-registry"),GA=pA("wks"),WA=!DA||!DA.prototype||!DA.prototype.findChild,HA=By&&Wy((function(){return 7!=iA(kA({},"a",{get:function(){return kA(this,"a",{value:7}).a}})).a}))?function(e,t,i){var n=LA(OA,t);n&&delete OA[t],kA(e,t,i),n&&e!==OA&&kA(OA,t,n)}:kA,KA=function(e,t){var i=VA[e]=iA(wA);return yA(i,{type:vA,tag:e,description:t}),By||(i.description=t),i},YA=function(e,t,i){e===OA&&YA(FA,t,i),zy(e);var n=$y(t);return zy(i),Hy(VA,n)?(i.enumerable?(Hy(e,IA)&&e[IA][n]&&(e[IA][n]=!1),i=iA(i,{enumerable:tA(0,!1)})):(Hy(e,IA)||kA(e,IA,tA(1,{})),e[IA][n]=!0),HA(e,n,i)):kA(e,n,i)},qA=function(e,t){zy(e);var i=Zy(t),n=nA(i).concat(QA(i));return RA(n,(function(t){By&&!Fy(JA,i,t)||YA(e,t,i[t])})),e},JA=function(e){var t=$y(e),i=Fy(UA,this,t);return!(this===OA&&Hy(VA,t)&&!Hy(FA,t))&&(!(i||!Hy(this,t)||!Hy(VA,t)||Hy(this,IA)&&this[IA][t])||i)},XA=function(e,t){var i=Zy(e),n=$y(t);if(i!==OA||!Hy(VA,n)||Hy(FA,n)){var r=LA(i,n);return!r||!Hy(VA,n)||Hy(i,IA)&&i[IA][n]||(r.enumerable=!0),r}},zA=function(e){var t=MA(Zy(e)),i=[];return RA(t,(function(e){Hy(VA,e)||Hy(_A,e)||xA(i,e)})),i},QA=function(e){var t=e===OA,i=MA(t?FA:Zy(e)),n=[];return RA(i,(function(e){!Hy(VA,e)||t&&!Hy(OA,e)||xA(n,VA[e])})),n};(Gy||(hA(wA=(bA=function(){if(Jy(wA,this))throw NA("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?eA(arguments[0]):void 0,t=EA(e),i=function(e){this===OA&&Fy(i,FA,e),Hy(this,IA)&&Hy(this[IA],t)&&(this[IA][t]=!1),HA(this,t,tA(1,e))};return By&&WA&&HA(OA,t,{configurable:!0,set:i}),KA(t,e)}).prototype,"toString",(function(){return AA(this).tag})),hA(bA,"withoutSetter",(function(e){return KA(EA(e),e)})),uA.f=JA,cA.f=YA,dA.f=qA,aA.f=XA,rA.f=oA.f=zA,sA.f=QA,fA.f=function(e){return KA(mA(e),e)},By&&kA(wA,"description",{configurable:!0,get:function(){return AA(this).description}})),My({global:!0,wrap:!0,forced:!Gy,sham:!Gy},{Symbol:bA}),RA(nA(GA),(function(e){SA(e)})),My({target:vA,stat:!0,forced:!Gy},{for:function(e){var t=eA(e);if(Hy(jA,t))return jA[t];var i=bA(t);return jA[t]=i,BA[i]=t,i},keyFor:function(e){if(!Xy(e))throw NA(e+" is not a symbol");if(Hy(BA,e))return BA[e]},useSetter:function(){WA=!0},useSimple:function(){WA=!1}}),My({target:"Object",stat:!0,forced:!Gy,sham:!By},{create:function(e,t){return void 0===t?iA(e):qA(iA(e),t)},defineProperty:YA,defineProperties:qA,getOwnPropertyDescriptor:XA}),My({target:"Object",stat:!0,forced:!Gy},{getOwnPropertyNames:zA,getOwnPropertySymbols:QA}),My({target:"Object",stat:!0,forced:Wy((function(){sA.f(1)}))},{getOwnPropertySymbols:function(e){return sA.f(Qy(e))}}),PA)&&My({target:"JSON",stat:!0,forced:!Gy||Wy((function(){var e=bA();return"[null]"!=PA([e])||"{}"!=PA({a:e})||"{}"!=PA(Object(e))}))},{stringify:function(e,t,i){var n=lA(arguments),r=t;if((qy(t)||void 0!==e)&&!Xy(e))return Ky(t)||(t=function(e,t){if(Yy(r)&&(t=Fy(r,this,e,t)),!Xy(t))return t}),n[1]=t,Vy(PA,null,n)}});if(!wA[CA]){var ZA=wA.valueOf;hA(wA,CA,(function(e){return Fy(ZA,this)}))}TA(bA,vA),_A[IA]=!0,ky("asyncIterator"),ky("hasInstance"),ky("isConcatSpreadable"),ky("iterator"),ky("match"),ky("matchAll"),ky("replace"),ky("search"),ky("species"),ky("split"),ky("toPrimitive"),ky("toStringTag"),ky("unscopables"),ta(h.JSON,"JSON",!0);var $A=J.Symbol;ky("asyncDispose"),ky("dispose"),ky("matcher"),ky("metadata"),ky("observable"),ky("patternMatch"),ky("replaceAll");var eO=$A,tO=by.f("asyncIterator"),iO=tO;function nO(e){this.wrapped=e}function rO(e){var t,i;function n(t,i){try{var o=e[t](i),s=o.value,a=s instanceof nO;ny.resolve(a?s.wrapped:s).then((function(e){a?n("return"===t?"return":"next",e):r(o.done?"return":"normal",e)}),(function(e){n("throw",e)}))}catch(e){r("throw",e)}}function r(e,r){switch(e){case"return":t.resolve({value:r,done:!0});break;case"throw":t.reject(r);break;default:t.resolve({value:r,done:!1})}(t=t.next)?n(t.key,t.arg):i=null}this._invoke=function(e,r){return new ny((function(o,s){var a={key:e,arg:r,resolve:o,reject:s,next:null};i?i=i.next=a:(t=i=a,n(e,r))}))},"function"!=typeof e.return&&(this.return=void 0)}function oO(e){return function(){return new rO(e.apply(this,arguments))}}function sO(e){return new nO(e)}rO.prototype["function"==typeof eO&&iO||"@@asyncIterator"]=function(){return this},rO.prototype.next=function(e){return this._invoke("next",e)},rO.prototype.throw=function(e){return this._invoke("throw",e)},rO.prototype.return=function(e){return this._invoke("return",e)};var aO=by.f("iterator");function cO(e,t){var i={},n=!1;function r(i,r){return n=!0,r=new ny((function(t){t(e[i](r))})),{done:!1,value:t(r)}}return i[void 0!==eO&&aO||"@@iterator"]=function(){return this},i.next=function(e){return n?(n=!1,e):r("next",e)},"function"==typeof e.throw&&(i.throw=function(e){if(n)throw n=!1,e;return r("throw",e)}),"function"==typeof e.return&&(i.return=function(e){return n?(n=!1,e):r("return",e)}),i}var dO=tO,uO={exports:{}};function lO(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function hO(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?lO(Object(i),!0).forEach((function(t){lp(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):lO(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function pO(e,t,i,n,r,o,s){let a=[],c=[],d=[],u=[],l=!1,h=!1;if(uO.exports.parse(e).mediaDescriptions.forEach(e=>{s&&s!==e.attributes.direction||("video"!==e.media.mediaType||l||(c=e.attributes.payloads,u=e.attributes.extmaps,l=!0),"audio"!==e.media.mediaType||h||(a=e.attributes.payloads,d=e.attributes.extmaps,h=!0))}),!u||0===c.length)throw new Error("Cannot get video capabilities from SDP.");if(!d||0===a.length)throw new Error("Cannot get audio capabilities from SDP.");return c.forEach(e=>{var t;null!==(t=e.rtpMap)&&void 0!==t&&t.clockRate&&(e.rtpMap.clockRate=parseInt(e.rtpMap.clockRate))}),a.forEach(e=>{var t;null!==(t=e.rtpMap)&&void 0!==t&&t.clockRate&&(e.rtpMap.clockRate=parseInt(e.rtpMap.clockRate))}),t&&(a=a.filter(e=>{var t;return"rtx"!==(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())}),c=c.filter(e=>{var t;return"rtx"!==(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())})),i&&(c=c.filter(e=>{var t;return!/(red)|(ulpfec)|(flexfec)/i.test((null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName)||"")})),n&&(a=a.filter(e=>{var t;return!/(red)|(ulpfec)|(flexfec)/i.test((null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName)||"")})),r&&(null==r?void 0:r.length)>0&&(a=a.filter(e=>{var t;return r.includes((null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())||"")})),o&&(null==o?void 0:o.length)>0&&(c=c.filter(e=>{var t;return o.includes((null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())||"")})),{audioCodecs:a,videoCodecs:c,audioExtensions:d,videoExtensions:u}}function _O(e){const t=uO.exports.parse(e);let i,n;for(const e of t.mediaDescriptions){if(!i){const t=e.attributes.iceUfrag,n=e.attributes.icePwd;if(!t||!n)throw new Error("Cannot get iceUfrag or icePwd from SDP.");i={iceUfrag:t,icePwd:n}}if(!n){const t=e.attributes.fingerprints;t.length>0&&(n={fingerprints:t})}}if(!n&&t.attributes.fingerprints.length>0&&(n={fingerprints:t.attributes.fingerprints}),!n||!i)throw new Error("Cannot get iceParameters or dtlsParameters from SDP.");return{iceParameters:i,dtlsParameters:n}}function EO(e,t){const i=[],n=e.attributes.ssrcGroups.filter(e=>"FID"===e.semantic),r=e.attributes.ssrcGroups.find(e=>"SIM"===e.semantic),o=e.attributes.ssrcs;if(r)r.ssrcIds.forEach(e=>{var r;const o=null===(r=n.find(t=>t.ssrcIds[0]===e))||void 0===r?void 0:r.ssrcIds[1];i.push({ssrcId:e,rtx:t?o:void 0})});else if(n.length>0){const e=n[0].ssrcIds[0],r=n[0].ssrcIds[1];i.push({ssrcId:e,rtx:t?r:void 0})}else{if(0===o.length)throw new Error("No ssrcs found on local media description.");i.push({ssrcId:o[0].ssrcId})}return i}function mO(e,t){const{cname:i}=e;let n;t&&t.ip&&"number"==typeof t.port?(n=[{foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:t.ip,port:t.port.toString(),type:"host",extension:{}}],CE.debug("Using remote candidate from AP ".concat(t.ip,":").concat(t.port)),t.ip6&&(n.push({foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:t.ip6,port:t.port.toString(),type:"host",extension:{}}),CE.debug("Using IPV6 remote candidate from AP ".concat(t.ip6,":").concat(t.port)))):n=e.iceParameters.candidates.map(e=>({foundation:e.foundation,componentId:"1",transport:e.protocol,priority:e.priority.toString(),connectionAddress:e.ip,port:e.port.toString(),type:e.type,extension:{}}));const r={fingerprints:e.dtlsParameters.fingerprints.map(e=>({hashFunction:e.algorithm,fingerprint:e.fingerprint}))},o={iceUfrag:e.iceParameters.iceUfrag,icePwd:e.iceParameters.icePwd};let s;switch(e.dtlsParameters.role){case"server":s="passive";break;case"client":s="active";break;case"auto":s="actpass"}return{dtlsParameters:r,iceParameters:o,candidates:n,rtpCapabilities:AO(e.rtpCapabilities),setup:s,cname:i}}function fO(e,t,i){const n=[],r=[];return e.forEach(e=>{let{ssrcId:o,rtx:s}=e;const a=wI(8,"track-"),c={ssrcId:o,attributes:hO({label:a,mslabel:i=i||wI(10,""),msid:"".concat(i," ").concat(a)},t&&{cname:t})};if(n.push(c),void 0!==s){const e={ssrcId:s,attributes:hO({label:a,mslabel:i,msid:"".concat(i," ").concat(a)},t&&{cname:t})};n.push(e),r.push({semantic:"FID",ssrcIds:[o,s]})}}),e.length>1&&r.push({semantic:"SIM",ssrcIds:e.map(e=>{let{ssrcId:t}=e;return t})}),{ssrcs:n,ssrcGroups:r}}function SO(e,t){t instanceof tI&&e.attributes.payloads.forEach(e=>{var i;const n=null===(i=e.rtpMap)||void 0===i?void 0:i.encodingName.toLowerCase();if(!n||-1===["opus","pcmu","pcma","g722"].indexOf(n))return;e.fmtp||(e.fmtp={parameters:{}}),e.fmtp.parameters.minptime="10",e.fmtp.parameters.useinbandfec="1";const r=t._encoderConfig;r&&"pcmu"!==n&&"pcma"!==n&&"g722"!==n&&(r.bitrate&&!Hh()&&(e.fmtp.parameters.maxaveragebitrate="".concat(Math.floor(1e3*r.bitrate))),r.sampleRate&&(e.fmtp.parameters.maxplaybackrate="".concat(r.sampleRate),e.fmtp.parameters["sprop-maxcapturerate"]="".concat(r.sampleRate)),r.stereo&&(e.fmtp.parameters.stereo="1",e.fmtp.parameters["sprop-stereo"]="1"))})}function TO(e){const t=e.attributes.unrecognized.findIndex(e=>"x-google-flag"===e.attField&&"conference"===e.attValue);-1!==t&&e.attributes.unrecognized.splice(t,1)}function gO(e,t){if(!(t instanceof QC&&t._encoderConfig&&-1===t._hints.indexOf(aS.SCREEN_TRACK)))return;const i=t._encoderConfig;MS().supportMinBitrate&&i.bitrateMin&&e.attributes.payloads.forEach(e=>{var t;["h264","vp8","vp9","av1"].includes((null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())||"")&&(e.fmtp||(e.fmtp={parameters:{}}),e.fmtp.parameters["x-google-min-bitrate"]="".concat(i.bitrateMin))}),MS().supportMinBitrate&&!t._hints.includes(aS.LOW_STREAM)&&i.bitrateMax&&e.attributes.payloads.forEach(e=>{var t;["h264","vp8","vp9","av1"].includes((null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())||"")&&(e.fmtp||(e.fmtp={parameters:{}}),e.fmtp.parameters["x-google-start-bitrate"]="".concat(FE("X_GOOGLE_START_BITRATE")||Math.floor(i.bitrateMax)))})}function RO(e){if("video"!==e.media.mediaType)return;const t=Mh();if(t.name!==Nh.SAFARI&&t.os!==wh.IOS)return;const i=e.attributes.extmaps.findIndex(e=>/video-orientation/g.test(e.extensionName));-1!==i&&e.attributes.extmaps.splice(i,1)}function IO(e,t,i){if(!t)return;let n,r;if("video"===e.media.mediaType?(n=i.videoExtensions,r=i.videoCodecs):(n=i.audioExtensions,r=i.audioCodecs),!0===t.twcc){const t=n.find(e=>"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"===e.extensionName);if(t){e.attributes.extmaps.find(e=>"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"===e.extensionName)||e.attributes.extmaps.push({entry:t.entry,extensionName:"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"});(function(e,t){return t.filter(t=>!!e.find(e=>e.payloadType===t.payloadType&&!!e.rtcpFeedbacks.find(e=>"transport-cc"===e.type)))})(r,e.attributes.payloads).forEach(e=>{e.rtcpFeedbacks.find(e=>"transport-cc"===e.type)||e.rtcpFeedbacks.push({type:"transport-cc"})})}}else if(!1===t.twcc){const t=e.attributes.extmaps.findIndex(e=>"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"===e.extensionName);-1!==t&&e.attributes.extmaps.splice(t,1),e.attributes.payloads.forEach(e=>{const t=e.rtcpFeedbacks.findIndex(e=>"transport-cc"===e.type);-1!==t&&e.rtcpFeedbacks.splice(t,1)})}if(!0===t.remb){const t=n.find(e=>"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"===e.extensionName);if(t){e.attributes.extmaps.find(e=>"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"===e.extensionName)||e.attributes.extmaps.push({entry:t.entry,extensionName:"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"});(function(e,t){return t.filter(t=>!!e.find(e=>e.payloadType===t.payloadType&&!!e.rtcpFeedbacks.find(e=>"goog-remb"===e.type)))})(r,e.attributes.payloads).forEach(e=>{e.rtcpFeedbacks.find(e=>"goog-remb"===e.type)||e.rtcpFeedbacks.push({type:"goog-remb"})})}}else if(!1===t.remb){const t=e.attributes.extmaps.findIndex(e=>"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"===e.extensionName);-1!==t&&e.attributes.extmaps.splice(t,1),e.attributes.payloads.forEach(e=>{const t=e.rtcpFeedbacks.findIndex(e=>"goog-remb"===e.type);-1!==t&&e.rtcpFeedbacks.splice(t,1)})}}function vO(e,t,i){if(Hh())return;if("video"!==e.media.mediaType)return;if(!(t instanceof QC))return;if("vp9"!==i&&"vp8"!==i)return;if("vp8"===i&&!FE("SIMULCAST"))return;if(void 0===t._scalabiltyMode||t._scalabiltyMode.numSpatialLayers<=1)return;const n="vp8"===i?2:t._scalabiltyMode.numSpatialLayers,r=e.attributes.ssrcs[0],o=e.attributes.ssrcGroups.find(e=>"FID"===e.semantic&&e.ssrcIds[0]===r.ssrcId),s={semantic:"SIM",ssrcIds:[r.ssrcId]};for(let t=1;t<n;t++)e.attributes.ssrcs.push({ssrcId:r.ssrcId+t,attributes:BI(r.attributes)}),s.ssrcIds.push(r.ssrcId+t),o&&(e.attributes.ssrcs.push({ssrcId:o.ssrcIds[1]+t,attributes:BI(r.attributes)}),e.attributes.ssrcGroups.push({semantic:"FID",ssrcIds:[r.ssrcId+t,o.ssrcIds[1]+t]}));e.attributes.ssrcGroups.unshift(s)}async function CO(e,t,i,n,r){const o=new RTCPeerConnection;o.addTransceiver("video",{direction:"sendonly"}),o.addTransceiver("audio",{direction:"sendonly"}),o.addTransceiver("video",{direction:"recvonly"}),o.addTransceiver("audio",{direction:"recvonly"});const s=(await o.createOffer()).sdp,a=pO(s,e,t,i,n,r,"sendonly"),c=pO(s,e,t,i,n,r,"recvonly"),d={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},u={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},l={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]};if(yO(a,c,"videoExtensions",d,u,l),yO(a,c,"videoCodecs",d,u,l),yO(a,c,"audioExtensions",d,u,l),yO(a,c,"audioCodecs",d,u,l),FE("RAISE_H264_BASELINE_PRIORITY")){const e=l.videoCodecs.findIndex(e=>{var t,i;return"h264"===(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLocaleLowerCase())&&"42001f"===(null===(i=e.fmtp)||void 0===i?void 0:i.parameters["profile-level-id"])});if(-1!==e){const t=l.videoCodecs.findIndex(e=>{var t;return"h264"===(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLocaleLowerCase())});if(t<e){CE.debug("raising H264 baseline profile priority");const i=l.videoCodecs[e];l.videoCodecs.splice(e,1),l.videoCodecs.splice(t,0,i)}-1!==t&&(u.videoCodecs=u.videoCodecs.filter(e=>{var t,i;return!("h264"===(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLocaleLowerCase())&&"42001f"!==(null===(i=e.fmtp)||void 0===i?void 0:i.parameters["profile-level-id"]))})),-1!==t&&FE("FILTER_SEND_H264_BASELINE")&&(d.videoCodecs=d.videoCodecs.filter(e=>{var t,i;return!("h264"===(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLocaleLowerCase())&&"42001f"!==(null===(i=e.fmtp)||void 0===i?void 0:i.parameters["profile-level-id"]))}))}}try{o.close()}catch(e){}return{send:d,recv:u,sendrecv:l}}function yO(e,t,i,n,r,o){if("videoExtensions"===i||"audioExtensions"===i){const s=[];return e[i].forEach(e=>{t[i].some((t,i)=>{if(e.entry===t.entry&&e.extensionName===t.extensionName)return s.push(i),!0})?o[i].push(e):n[i].push(e)}),void t[i].forEach((e,t)=>{-1===s.indexOf(t)&&r[i].push(e)})}if("videoCodecs"===i||"audioCodecs"===i){const s=[];return e[i].forEach(e=>{t[i].some((t,i)=>{if(e.payloadType===t.payloadType&&JSON.stringify(e)===JSON.stringify(t))return s.push(i),!0})?o[i].push(e):n[i].push(e)}),void t[i].forEach((e,t)=>{-1===s.indexOf(t)&&r[i].push(e)})}}function AO(e){const{send:t,recv:i,sendrecv:n}=e;if(!n){if(!t||!i)throw new Error("cannot merge rtp capabilities because one of send or recv is empty!");return{send:t,recv:i}}let r,o;return t?(r={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},r.audioCodecs=[...t.audioCodecs,...n.audioCodecs],r.videoCodecs=[...t.videoCodecs,...n.videoCodecs],r.audioExtensions=[...t.audioExtensions,...n.audioExtensions],r.videoExtensions=[...t.videoExtensions,...n.videoExtensions]):r=n,i?(o={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},o.audioCodecs=[...i.audioCodecs,...n.audioCodecs],o.videoCodecs=[...i.videoCodecs,...n.videoCodecs],o.audioExtensions=[...i.audioExtensions,...n.audioExtensions],o.videoExtensions=[...i.videoExtensions,...n.videoExtensions]):o=n,{send:r,recv:o}}function OO(e){if("audio"!==e.media.mediaType)return;e.attributes.payloads.filter(e=>{var t;return"opus"===(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())}).forEach(e=>{e.fmtp||(e.fmtp={parameters:{}}),e.fmtp.parameters.stereo="1",e.fmtp.parameters["sprop-stereo"]="1"})}!function(e,t){e.exports=(()=>{var e={8:(e,t,i)=>{i.r(t),i.d(t,{Parser:()=>I,Printer:()=>O,parse:()=>D,print:()=>P});const n="\n",r="".concat("\r").concat(n),o=" ";let s;function a(e){return e>="0"&&e<="9"}function c(e){return e>="!"&&e<="~"}function d(e){return c(e)||e>=""&&e<="ÿ"}function u(e){return"!"===e||e>="#"&&e<="'"||e>="*"&&e<="+"||e>="-"&&e<="."||e>="0"&&e<="9"||e>="A"&&e<="Z"||e>="^"&&e<="~"}function l(e){return e>="1"&&e<="9"}function h(e){return e>="A"&&e<="Z"||e>="a"&&e<="z"}function p(e){return"d"===e||"h"===e||"m"===e||"s"===e}function _(e){return e>""&&e<"\t"||e>"\v"&&e<"\f"||e>""&&e<"ÿ"}function E(e){return h(e)||a(e)||"+"===e||"/"===e}function m(e){return a(e)||h(e)||"+"===e||"/"===e||"-"===e||"_"===e}function f(e){return h(e)||a(e)||"+"===e||"/"===e}function S(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function T(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?S(Object(i),!0).forEach((function(t){g(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):S(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function g(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}!function(e){e.VERSION="v",e.ORIGIN="o",e.SESSION_NAME="s",e.INFORMATION="i",e.URI="u",e.EMAIL="e",e.PHONE="p",e.CONNECTION="c",e.BANDWIDTH="b",e.TIME="t",e.REPEAT="r",e.ZONE_ADJUSTMENTS="z",e.KEY="k",e.ATTRIBUTE="a",e.MEDIA="m"}(s||(s={}));class R{consumeText(e,t){let i=t;for(;i<e.length;){const t=e[i];if("\0"===t||"\r"===t||t===n)break;i+=1}if(i-t==0)throw new Error("Invalid text, at ".concat(e));return i}consumeUnicastAddress(e,t,i){return this.consumeTill(e,t,o)}consumeOneOrMore(e,t,i){let n=t;for(;i(e[n]);)n++;if(n-t==0)throw new Error("Invalid rule at ".concat(t,"."));return n}consumeSpace(e,t){if(e[t]===o)return t+1;throw new Error("Invalid space at ".concat(t,"."))}consumeIP4Address(e,t){let i=t;for(let t=0;t<4;t++)if(i=this.consumeDecimalUChar(e,i),3!==t){if("."!==e[i])throw new Error("Invalid IP4 address.");i++}return i}consumeDecimalUChar(e,t){let i=t;for(let t=0;t<3&&a(e[i]);t++,i++);if(i-t==0)throw new Error("Invalid decimal uchar.");const n=parseInt(e.slice(t,i));if(n>=0&&n<=255)return i;throw new Error("Invalid decimal uchar")}consumeIP6Address(e,t){let i=this.consumeHexpart(e,t);return":"===e[i]?(i+=1,i=this.consumeIP4Address(e,i),i):i}consumeHexpart(e,t){let i=t;if(":"===e[i]&&":"===e[i+1]){i+=2;try{i=this.consumeHexseq(e,i)}catch(e){}return i}if(i=this.consumeHexseq(e,i),":"===e[i]&&":"===e[i+1]){i+=2;try{i=this.consumeHexseq(e,i)}catch(e){}return i}return i}consumeHexseq(e,t){let i=t;for(;i=this.consumeHex4(e,i),":"===e[i]&&":"!==e[i+1];)i+=1;return i}consumeHex4(e,t){let i=0;for(;i<4;i++)if(!((n=e[t+i])>="0"&&n<="9"||n>="a"&&n<="f"||n>="A"&&n<="F")){if(0===i)throw new Error("Invalid hex 4");break}var n;return t+i}consumeFQDN(e,t){let i=t;for(;a(e[i])||h(e[i])||"-"===e[i]||"."===e[i];)i+=1;if(i-t<4)throw new Error("Invalid FQDN");return i}consumeExtnAddr(e,t){return this.consumeOneOrMore(e,t,d)}consumeMulticastAddress(e,t,i){switch(i){case"IP4":case"ip4":return this.consumeIP4MulticastAddress(e,t);case"IP6":case"ip6":return this.consumeIP6MulticastAddress(e,t);default:try{return this.consumeFQDN(e,t)}catch(i){return this.consumeExtnAddr(e,t)}}}consumeIP6MulticastAddress(e,t){const i=this.consumeHexpart(e,t);return"/"===e[i]?this.consumeInteger(e,i+1):i}consumeIP4MulticastAddress(e,t){let i=t+3;const n=e.slice(t,i),r=parseInt(n);if(r<224||r>239)throw new Error("Invalid IP4 multicast address, IPv4 multicast addresses may be in the range 224.0.0.0 to 239.255.255.255.");for(let t=0;t<3;t++){if("."!==e[i])throw new Error("Invalid IP4 multicast address.");i+=1,i=this.consumeDecimalUChar(e,i)}return"/"===e[i]&&(i+=1),i=this.consumeTTL(e,i),"/"===e[i]&&(i=this.consumeInteger(e,i)),i}consumeInteger(e,t){if(!l(e[t]))throw new Error("Invalid integer.");for(t+=1;a(e[t]);)t+=1;return t}consumeTTL(e,t){if("0"===e[t])return t+1;if(!l(e[t]))throw new Error("Invalid TTL.");t+=1;for(let i=0;i<2&&a(e[t]);i++)t+=1;return t}consumeToken(e,t){return this.consumeOneOrMore(e,t,u)}consumeTime(e,t){let i=t;if("0"===e[i])return i+1;for(l(e[i])&&(i+=1);a(e[i]);)i++;if(i-t<10)throw new Error("Invalid time");return i}consumeAddress(e,t){return this.consumeTill(e,t,o)}consumeTypedTime(e,t){let i=t;return i=this.consumeOneOrMore(e,i,a),p(e[i])?i+1:i}consumeRepeatInterval(e,t){if(!l(e[t]))throw new Error("Invalid repeat interval");for(t+=1;a(e[t]);)t+=1;return p(e[t])&&(t+=1),t}consumePort(e,t){return this.consumeOneOrMore(e,t,a)}consume(e,t,i){for(let n=0;n<i.length;n++){if(t+n>=e.length)throw new Error("consume exceeding value length");if(e[t+n]!==i[n])throw new Error("consume ".concat(i," failed at ").concat(n))}return t+i.length}consumeTill(e,t,i){let n=t;for(;n<e.length&&("string"!=typeof i||e[n]!==i)&&("function"!=typeof i||!i(e[n]));)n++;return n}}class I extends R{constructor(){super(),g(this,"records",[]),g(this,"currentLine",0)}parse(e){const t=this.probeEOL(e);this.records=e.split(t).filter(e=>!!e.trim()).map(this.parseLine),this.currentLine=0;const i=this.parseVersion(),n=this.parseOrigin(),r=this.parseSessionName(),o=this.parseInformation(),s=this.parseUri(),a=this.parseEmail(),c=this.parsePhone(),d=this.parseConnection(),u=this.parseBandWidth(),l=this.parseTimeFields(),h=this.parseKey(),p=this.parseSessionAttribute(),_=this.parseMediaDescription();if(this.currentLine!==this.records.length)throw new Error("parsing failed, non exhaustive sdp lines.");return{version:i,origin:n,sessionName:r,information:o,uri:s,emails:a,phones:c,connection:d,bandwidths:u,timeFields:l,key:h,attributes:p,mediaDescriptions:_}}getCurrentRecord(){const e=this.records[this.currentLine];if(!e)throw new Error("Record doesn't exit.");return e}probeEOL(e){for(let t=0;t<e.length;t++)if(e[t]===n)return"\r"===e[t-1]?r:n;throw new Error("Invalid newline character.")}parseLine(e,t){if(e.length<2)throw new Error("Invalid sdp line, sdp line should be of form <type>=<value>.");const i=e[0];if("="!==e[1])throw new Error('Invalid sdp line, <type> should be a single character followed by an "=" sign.');return{type:i,value:e.slice(2),line:t,cur:0}}parseSessionAttribute(){const e=new C;for(;this.currentLine<this.records.length;){const t=this.getCurrentRecord();if(t.type!==s.ATTRIBUTE)break;const i={attField:this.extractOneOrMore(t,e=>u(e)&&":"!==e),_cur:0};":"===t.value[t.cur]&&(t.cur+=1,i.attValue=this.extractOneOrMore(t,_)),e.parse(i),this.currentLine++}return e.digest()}parseMediaAttributes(e){const t=new y(e);for(;this.currentLine<this.records.length;){const e=this.getCurrentRecord();if(e.type!==s.ATTRIBUTE)break;const i={attField:this.extractOneOrMore(e,e=>u(e)&&":"!==e),_cur:0};":"===e.value[e.cur]&&(e.cur+=1,i.attValue=this.extractOneOrMore(e,_)),t.parse(i),this.currentLine++}return t.digest()}parseKey(){const e=this.getCurrentRecord();if(e.type===s.KEY){if("prompt"===e.value||"clear:"===e.value||"base64:"===e.value||"uri:"===e.value)return e.value;throw this.currentLine++,new Error("Invalid key.")}}parseZone(){const e=this.getCurrentRecord();if(e.type===s.ZONE_ADJUSTMENTS){const t=[];for(;;)try{const i=this.extract(e,this.consumeTime);this.consumeSpaceForRecord(e);let n=!1;"-"===e.value[e.cur]&&(n=!0,e.cur+=1);const r=this.extract(e,this.consumeTypedTime);t.push({time:i,typedTime:r,back:n})}catch(e){break}if(0===t.length)throw new Error("Invalid zone adjustments");return this.currentLine++,t}return[]}parseRepeat(){const e=[];for(;;){const t=this.getCurrentRecord();if(t.type!==s.REPEAT)break;{const i=this.extract(t,this.consumeRepeatInterval),n=this.parseTypedTime(t);e.push({repeatInterval:i,typedTimes:n}),this.currentLine++}}return e}parseTypedTime(e){const t=[];for(;;)try{this.consumeSpaceForRecord(e),t.push(this.extract(e,this.consumeTypedTime))}catch(e){break}if(0===t.length)throw new Error("Invalid typed time.");return t}parseTime(){const e=this.getCurrentRecord(),t=this.extract(e,this.consumeTime);this.consumeSpaceForRecord(e);const i=this.extract(e,this.consumeTime);return this.currentLine++,{startTime:t,stopTime:i}}parseBandWidth(){const e=[];for(;this.currentLine<this.records.length;){const t=this.getCurrentRecord();if(t.type!==s.BANDWIDTH)break;{const i=this.extractOneOrMore(t,u);if(":"!==t.value[t.cur])throw new Error("Invalid bandwidth field.");t.cur++;const n=this.extractOneOrMore(t,a);e.push({bwtype:i,bandwidth:n}),this.currentLine++}}return e}parseVersion(){const e=this.getCurrentRecord();if(e.type!==s.VERSION)throw new Error("first sdp record must be version");const t=e.value.slice(0,this.consumeOneOrMore(e.value,0,a));if(t.length!==e.value.length)throw new Error('invalid proto version, "v='.concat(e.value,'"'));return this.currentLine++,t}parseOrigin(){const e=this.getCurrentRecord();if(e.type!==s.ORIGIN)throw new Error("second line of sdp must be origin");const t=this.extractOneOrMore(e,d);this.consumeSpaceForRecord(e);const i=this.extractOneOrMore(e,a);this.consumeSpaceForRecord(e);const n=this.extractOneOrMore(e,a);this.consumeSpaceForRecord(e);const r=this.extractOneOrMore(e,u);this.consumeSpaceForRecord(e);const o=this.extractOneOrMore(e,u);this.consumeSpaceForRecord(e);const c=this.extract(e,this.consumeUnicastAddress);return this.currentLine++,{username:t,sessId:i,sessVersion:n,nettype:r,addrtype:o,unicastAddress:c}}parseSessionName(){const e=this.getCurrentRecord();if(e.type===s.SESSION_NAME){const t=this.extract(e,this.consumeText);return this.currentLine++,t}}parseInformation(){const e=this.getCurrentRecord();if(e.type!==s.INFORMATION)return;const t=this.extract(e,this.consumeText);return this.currentLine++,t}parseUri(){const e=this.getCurrentRecord();if(e.type===s.URI)return this.currentLine++,e.value}parseEmail(){const e=[];for(;;){const t=this.getCurrentRecord();if(t.type!==s.EMAIL)break;e.push(t.value),this.currentLine++}return e}parsePhone(){const e=[];for(;;){const t=this.getCurrentRecord();if(t.type!==s.PHONE)break;e.push(t.value),this.currentLine++}return e}parseConnection(){const e=this.getCurrentRecord();if(e.type===s.CONNECTION){const t=this.extractOneOrMore(e,u);this.consumeSpaceForRecord(e);const i=this.extractOneOrMore(e,u);this.consumeSpaceForRecord(e);const n=this.extract(e,this.consumeAddress);return this.currentLine++,{nettype:t,addrtype:i,address:n}}}parseMedia(){const e=this.getCurrentRecord(),t=this.extract(e,this.consumeToken);this.consumeSpaceForRecord(e);let i=this.extract(e,this.consumePort);"/"===e.value[e.cur]&&(e.cur+=1,i+=this.extract(e,this.consumeInteger)),this.consumeSpaceForRecord(e);const n=[];for(n.push(this.extract(e,this.consumeToken));"/"===e.value[e.cur];)e.cur+=1,n.push(this.extract(e,this.consumeToken));if(0===n.length)throw new Error("Invalid proto");const r=this.parseFmt(e);return this.currentLine++,{mediaType:t,port:i,protos:n,fmts:r}}parseTimeFields(){const e=[];for(;this.getCurrentRecord().type===s.TIME;){const t=this.parseTime(),i=this.parseRepeat(),n=this.parseZone();e.push({time:t,repeats:i,zones:n})}return e}parseMediaDescription(){const e=[];for(;this.currentLine<this.records.length&&this.getCurrentRecord().type===s.MEDIA;){const t=this.parseMedia(),i=this.parseInformation(),n=this.parseConnections(),r=this.parseBandWidth(),o=this.parseKey(),s=this.parseMediaAttributes(t);e.push({media:t,information:i,connections:n,bandwidths:r,key:o,attributes:s})}return e}parseConnections(){const e=[];for(;this.currentLine<this.records.length&&this.getCurrentRecord().type===s.CONNECTION;)e.push(this.parseConnection());return e}parseFmt(e){const t=[];for(;;)try{this.consumeSpaceForRecord(e),t.push(this.extract(e,this.consumeToken))}catch(e){break}if(0===t.length)throw new Error("Invalid fmts");return t}extract(e,t,...i){const n=t.call(this,e.value,e.cur,...i),r=e.value.slice(e.cur,n);return e.cur=n,r}extractOneOrMore(e,t){const i=this.consumeOneOrMore(e.value,e.cur,t),n=e.value.slice(e.cur,i);return e.cur=i,n}consumeSpaceForRecord(e){if(e.value[e.cur]!==o)throw new Error("Invalid space at ".concat(e.cur,"."));e.cur+=1}}class v extends R{constructor(...e){super(...e),g(this,"attributes",void 0),g(this,"digested",!1)}extractOneOrMore(e,t,i){const n=this.consumeOneOrMore(e.attValue,e._cur,t),r=e.attValue.slice(e._cur,n),[o,s]=i||[];if("number"==typeof o&&r.length<o)throw new Error("error in length, should be more or equal than ".concat(o," characters."));if("number"==typeof s&&r.length>s)throw new Error("error in length, should be less or equal than ".concat(s," characters."));return e._cur=n,r}consumeAttributeSpace(e){if(e.attValue[e._cur]!==o)throw new Error("Invalid space at ".concat(e._cur,"."));e._cur+=1}extract(e,t,...i){if(!e.attValue)throw new Error("Nothing to extract from attValue.");const n=t.call(this,e.attValue,e._cur,...i),r=e.attValue.slice(e._cur,n);return e._cur=n,r}atEnd(e){if(!e.attValue)throw new Error;return e._cur>=e.attValue.length}peekChar(e){if(!e.attValue)throw new Error;return e.attValue[e._cur]}peek(e,t){if(!e.attValue)throw new Error;for(let i=0;i<t.length;i++)if(t[i]!==e.attValue[e._cur+i])return!1;return!0}parseIceUfrag(e){if(this.attributes.iceUfrag)throw new Error("Invalid ice-ufrag, should be only a single line if 'a=ice-ufrag'");this.attributes.iceUfrag=this.extractOneOrMore(e,E,[4,256])}parseIcePwd(e){if(this.attributes.icePwd)throw new Error("Invalid ice-pwd, should be only a single line if 'a=ice-pwd'");this.attributes.icePwd=this.extractOneOrMore(e,E,[22,256])}parseIceOptions(e){if(this.attributes.iceOptions)throw new Error("Invalid ice-options, should be only one 'ice-options' line");const t=[];for(;!this.atEnd(e);){t.push(this.extractOneOrMore(e,E));try{this.consumeAttributeSpace(e)}catch(t){if(this.atEnd(e))break;throw t}}this.attributes.iceOptions=t}parseFingerprint(e){const t=this.extract(e,this.consumeToken);this.consumeAttributeSpace(e);const i=this.extract(e,this.consumeTill);this.attributes.fingerprints.push({hashFunction:t,fingerprint:i})}parseExtmap(e){const t=this.extractOneOrMore(e,a);let i;"/"===this.peekChar(e)&&(this.extract(e,this.consume,"/"),i=this.extract(e,this.consumeToken)),this.consumeAttributeSpace(e);const n=this.extract(e,this.consumeTill,o),r=T(T({entry:parseInt(t,10)},i&&{direction:i}),{},{extensionName:n});this.peekChar(e)===o&&(this.consumeAttributeSpace(e),r.extensionAttributes=this.extract(e,this.consumeTill)),this.attributes.extmaps.push(r)}parseSetup(e){if(this.attributes.setup)throw new Error("must only be one single 'a=setup' line.");const t=this.extract(e,this.consumeTill);if("active"!==t&&"passive"!==t&&"actpass"!==t&&"holdconn"!==t)throw new Error("role must be one of 'active', 'passive', 'actpass', 'holdconn'.");this.attributes.setup=t}}class C extends v{constructor(...e){super(...e),g(this,"attributes",{unrecognized:[],groups:[],extmaps:[],fingerprints:[],identities:[]})}parse(e){if(this.digested)throw new Error("already digested");try{switch(e.attField){case"group":this.parseGroup(e);break;case"ice-lite":this.parseIceLite();break;case"ice-ufrag":this.parseIceUfrag(e);break;case"ice-pwd":this.parseIcePwd(e);break;case"ice-options":this.parseIceOptions(e);break;case"fingerprint":this.parseFingerprint(e);break;case"setup":this.parseSetup(e);break;case"tls-id":this.parseTlsId(e);break;case"identity":this.parseIdentity(e);break;case"extmap":this.parseExtmap(e);break;case"msid-semantic":this.parseMsidSemantic(e);break;default:e.ignored=!0,this.attributes.unrecognized.push(e)}}catch(t){throw console.error("parsing session attribute ".concat(e.attField,' error, "a=').concat(e.attField,":").concat(e.attValue,'"')),t}if(!e.ignored&&e.attValue&&!this.atEnd(e))throw new Error("attribute parsing error")}digest(){return this.digested=!0,this.attributes}parseGroup(e){const t=this.extract(e,this.consumeToken),i=[];for(;!this.atEnd(e)&&this.peekChar(e)===o;)this.consumeAttributeSpace(e),i.push(this.extract(e,this.consumeToken));this.attributes.groups.push({semantic:t,identificationTag:i})}parseIceLite(){if(this.attributes.iceLite)throw new Error("Invalid ice-lite, should be only a single line of 'a=ice-lite'");this.attributes.iceLite=!0}parseTlsId(e){if(this.attributes.tlsId)throw new Error("must be only one tld-id line");this.attributes.tlsId=this.extractOneOrMore(e,m)}parseIdentity(e){const t=this.extractOneOrMore(e,f),i=[];for(;!this.atEnd(e)&&this.peekChar(e)===o;){this.consumeAttributeSpace(e);const t=this.extract(e,this.consumeToken);this.extract(e,this.consume,"=");const n=this.extractOneOrMore(e,e=>e!==o&&_(e));i.push({name:t,value:n})}this.attributes.identities.push({assertionValue:t,extensions:i})}parseMsidSemantic(e){this.peekChar(e)===o&&this.consumeAttributeSpace(e);const t={semantic:this.extract(e,this.consumeToken),identifierList:[]};for(;;){try{this.consumeAttributeSpace(e)}catch(e){break}if("*"===this.peekChar(e)){this.extract(e,this.consume,"*"),t.applyForAll=!0;break}{const i=this.extract(e,this.consumeTill,o);t.identifierList.push(i)}}this.attributes.msidSemantic=t}}class y extends v{constructor(e){super(),g(this,"attributes",void 0),-1!==e.protos.indexOf("RTP")||e.protos.indexOf("rtp"),this.attributes={unrecognized:[],candidates:[],extmaps:[],fingerprints:[],imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:[],ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:[]}}parse(e){if(this.digested)throw new Error("already digested");try{switch(e.attField){case"extmap":this.parseExtmap(e);break;case"setup":this.parseSetup(e);break;case"ice-ufrag":this.parseIceUfrag(e);break;case"ice-pwd":this.parseIcePwd(e);break;case"ice-options":this.parseIceOptions(e);break;case"candidate":this.parseCandidate(e);break;case"remote-candidate":this.parseRemoteCandidate(e);break;case"end-of-candidates":this.parseEndOfCandidates();break;case"fingerprint":this.parseFingerprint(e);break;case"rtpmap":this.parseRtpmap(e);break;case"ptime":this.parsePtime(e);break;case"maxptime":this.parseMaxPtime(e);break;case"sendrecv":case"recvonly":case"sendonly":case"inactive":this.parseDirection(e);break;case"ssrc":this.parseSSRC(e);break;case"fmtp":this.parseFmtp(e);break;case"rtcp-fb":this.parseRtcpFb(e);break;case"rtcp-mux":this.parseRTCPMux();break;case"rtcp-mux-only":this.parseRTCPMuxOnly();break;case"rtcp-rsize":this.parseRTCPRsize();break;case"rtcp":this.parseRTCP(e);break;case"mid":this.parseMid(e);break;case"msid":this.parseMsid(e);break;case"imageattr":this.parseImageAttr(e);break;case"rid":this.parseRid(e);break;case"simulcast":this.parseSimulcast(e);break;case"sctp-port":this.parseSctpPort(e);break;case"max-message-size":this.parseMaxMessageSize(e);break;case"ssrc-group":this.parseSSRCGroup(e);break;default:e.ignored=!0,this.attributes.unrecognized.push(e)}}catch(t){throw console.error("parsing media attribute ".concat(e.attField,' error, "a=').concat(e.attField,":").concat(e.attValue,'"')),t}if(!e.ignored&&e.attValue&&!this.atEnd(e))throw new Error("attribute parsing error")}parseCandidate(e){const t=this.extractOneOrMore(e,E,[1,32]);this.consumeAttributeSpace(e);const i=this.extractOneOrMore(e,a,[1,5]);this.consumeAttributeSpace(e);const n=this.extract(e,this.consumeToken);this.consumeAttributeSpace(e);const r=this.extractOneOrMore(e,a,[1,10]);this.consumeAttributeSpace(e);const s=this.extract(e,this.consumeAddress);this.consumeAttributeSpace(e);const d=this.extract(e,this.consumePort);this.consumeAttributeSpace(e),this.extract(e,this.consume,"typ"),this.consumeAttributeSpace(e);const u={foundation:t,componentId:i,transport:n,priority:r,connectionAddress:s,port:d,type:this.extract(e,this.consumeToken),extension:{}};for(this.peek(e," raddr")&&(this.extract(e,this.consume," raddr"),this.consumeAttributeSpace(e),u.relAddr=this.extract(e,this.consumeAddress)),this.peek(e," rport")&&(this.extract(e,this.consume," rport"),this.consumeAttributeSpace(e),u.relPort=this.extract(e,this.consumePort));this.peekChar(e)===o;){this.consumeAttributeSpace(e);const t=this.extract(e,this.consumeToken);this.consumeAttributeSpace(e),u.extension[t]=this.extractOneOrMore(e,c)}this.attributes.candidates.push(u)}parseRemoteCandidate(e){const t=[];for(;;){const i=this.extractOneOrMore(e,a,[1,5]);this.consumeAttributeSpace(e);const n=this.extract(e,this.consumeAddress);this.consumeAttributeSpace(e);const r=this.extract(e,this.consumePort);t.push({componentId:i,connectionAddress:n,port:r});try{this.consumeAttributeSpace(e)}catch(e){break}}this.attributes.remoteCandidatesList.push(t)}parseEndOfCandidates(){if(this.attributes.endOfCandidates)throw new Error("must be only one line of end-of-candidates");this.attributes.endOfCandidates=!0}parseRtpmap(e){const t=this.extract(e,this.consumeToken);this.consumeAttributeSpace(e);const i=this.extract(e,this.consumeTill,"/");this.extract(e,this.consume,"/");const n={encodingName:i,clockRate:this.extractOneOrMore(e,a)};this.atEnd(e)||"/"!==this.peekChar(e)||(this.extract(e,this.consume,"/"),n.encodingParameters=parseInt(this.extract(e,this.consumeTill),10));const r=this.attributes.payloads.find(e=>e.payloadType===parseInt(t,10));r?r.rtpMap=n:this.attributes.payloads.push({payloadType:parseInt(t,10),rtpMap:n,rtcpFeedbacks:[]})}parsePtime(e){if(this.attributes.ptime)throw new Error("must be only one line of ptime");this.attributes.ptime=this.extract(e,this.consumeTill)}parseMaxPtime(e){if(this.attributes.maxPtime)throw new Error("must be only one line of ptime");this.attributes.maxPtime=this.extract(e,this.consumeTill)}parseDirection(e){if(this.attributes.direction)throw new Error("must be only one line of direction info");this.attributes.direction=e.attField}parseSSRC(e){const t=this.extractOneOrMore(e,a);this.consumeAttributeSpace(e);const i=this.extract(e,this.consumeTill,":");let n;":"===this.peekChar(e)&&(this.extract(e,this.consume,":"),n=this.extract(e,this.consumeTill));const r=this.attributes.ssrcs.find(e=>e.ssrcId===parseInt(t,10));r?r.attributes[i]=n:this.attributes.ssrcs.push({ssrcId:parseInt(t,10),attributes:{[i]:n}})}parseFmtp(e){const t=this.extract(e,this.consumeTill,o);this.consumeAttributeSpace(e);const i=this.extract(e,this.consumeTill),n={};i.split(";").forEach(e=>{let[t,i]=e.split("=");t=t.trim();const r="string"==typeof i?i.trim():null;"string"==typeof t&&t.length>0&&(n[t]=r)});const r=this.attributes.payloads.find(e=>e.payloadType===parseInt(t,10));r?r.fmtp={parameters:n}:this.attributes.payloads.push({payloadType:parseInt(t,10),rtcpFeedbacks:[],fmtp:{parameters:n}})}parseFmtParameters(e){const t={},i=this.extract(e,this.consumeTill,"=");e._cur++;const n=this.extract(e,this.consumeTill,";");for(t[i]=n;";"===e.attValue[e._cur];){const i=this.extract(e,this.consumeTill,"=");e._cur++;const n=this.extract(e,this.consumeTill,";");t[i]=n}return t}parseRtcpFb(e){let t="";t="*"===this.peekChar(e)?this.extract(e,this.consume,"*"):this.extract(e,this.consumeTill,o),this.consumeAttributeSpace(e);const i=this.extract(e,this.consumeTill,o);let n;switch(i){case"trr-int":n={type:i,interval:this.extract(e,this.consumeTill)};break;case"ack":case"nack":default:{const t={type:i};this.peekChar(e)===o&&(this.consumeAttributeSpace(e),t.parameter=this.extract(e,this.consumeToken),this.peekChar(e)===o&&(t.additional=this.extract(e,this.consumeTill))),n=t}}if("*"===t)this.attributes.rtcpFeedbackWildcards.push(n);else{const e=this.attributes.payloads.find(e=>e.payloadType===parseInt(t,10));e?e.rtcpFeedbacks.push(n):this.attributes.payloads.push({payloadType:parseInt(t,10),rtcpFeedbacks:[n]})}}parseRTCPMux(){if(this.attributes.rtcpMux)throw new Error("must be single line of rtcp-mux");this.attributes.rtcpMux=!0}parseRTCPMuxOnly(){if(this.attributes.rtcpMuxOnly)throw new Error("must be single line of rtcp-only");this.attributes.rtcpMuxOnly=!0}parseRTCPRsize(){if(this.attributes.rtcpRsize)throw new Error("must be single line of rtcp-rsize");this.attributes.rtcpRsize=!0}parseRTCP(e){if(this.attributes.rtcp)throw new Error("must be single line of rtcp");const t={port:this.extract(e,this.consumePort)};this.peekChar(e)===o&&(this.consumeAttributeSpace(e),t.netType=this.extractOneOrMore(e,u),this.consumeAttributeSpace(e),t.addressType=this.extractOneOrMore(e,u),this.consumeAttributeSpace(e),t.address=this.extract(e,this.consumeAddress)),this.attributes.rtcp=t}parseMsid(e){const t={id:this.extractOneOrMore(e,u,[1,64])};this.peekChar(e)===o&&(this.consumeAttributeSpace(e),t.appdata=this.extractOneOrMore(e,u,[1,64])),this.attributes.msids.push(t)}parseImageAttr(e){this.attributes.imageattr.push(e.attValue)}parseRid(e){const t=this.extractOneOrMore(e,e=>h(e)||a(e)||"_"===e||"-"===e);this.consumeAttributeSpace(e);const i={id:t,direction:this.extract(e,this.consumeToken),params:[]};if(this.peekChar(e)===o){if(this.consumeAttributeSpace(e),this.peek(e,"pt=")){this.extract(e,this.consume,"pt=");const t=[];for(;;){const i=this.extract(e,this.consumeToken);t.push(i);try{this.extract(e,this.consume,",")}catch(e){break}}i.payloads=t,this.peekChar(e)===o&&this.extract(e,this.consume,o)}for(;;){const t=this.extract(e,this.consumeToken);switch(t){case"depend":{const n={type:t,rids:this.extract(e,this.consume,"=").split(",")};i.params.push(n);break}case"max-width":case"height-width":case"max-fps":case"max-fs":case"max-br":case"max-pps":case"max-bpp":default:{const n={type:t};"="===this.peekChar(e)&&(this.extract(e,this.consume,"="),n.val=this.extract(e,this.consumeTill,";")),i.params.push(n)}}try{this.extract(e,this.consume,";")}catch(e){break}}}this.attributes.rids.push(i)}parseSimulcast(e){if(this.attributes.simulcast)throw new Error("must be single line of simulcast");this.attributes.simulcast=e.attValue,this.extract(e,this.consumeTill)}parseSctpPort(e){this.attributes.sctpPort=this.extractOneOrMore(e,a,[1,5])}parseMaxMessageSize(e){this.attributes.maxMessageSize=this.extractOneOrMore(e,a,[1,void 0])}digest(){return this.digested=!0,this.attributes}parseMid(e){this.attributes.mid=this.extract(e,this.consumeToken)}parseSSRCGroup(e){const t=this.extract(e,this.consumeToken),i=[];for(;;)try{this.consumeAttributeSpace(e);const t=this.extract(e,this.consumeInteger);i.push(parseInt(t,10))}catch(e){break}this.attributes.ssrcGroups.push({semantic:t,ssrcIds:i})}}function A(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class O{constructor(){A(this,"eol",r)}print(e,t){let i="";return t&&(this.eol=t),i+=this.printVersion(e.version),i+=this.printOrigin(e.origin),i+=this.printSessionName(e.sessionName),i+=this.printInformation(e.information),i+=this.printUri(e.uri),i+=this.printEmail(e.emails),i+=this.printPhone(e.phones),i+=this.printConnection(e.connection),i+=this.printBandwidth(e.bandwidths),i+=this.printTimeFields(e.timeFields),i+=this.printKey(e.key),i+=this.printSessionAttributes(e.attributes),i+=this.printMediaDescription(e.mediaDescriptions),i}printVersion(e){return"v=".concat(e).concat(this.eol)}printOrigin(e){return"o=".concat(e.username," ").concat(e.sessId," ").concat(e.sessVersion," ").concat(e.nettype," ").concat(e.addrtype," ").concat(e.unicastAddress).concat(this.eol)}printSessionName(e){return e?"s=".concat(e).concat(this.eol):""}printInformation(e){return e?"i=".concat(e).concat(this.eol):""}printUri(e){return e?"u=".concat(e).concat(this.eol):""}printEmail(e){let t="";for(const i of e)t+="e=".concat(i).concat(this.eol);return t}printPhone(e){let t="";for(const i of e)t+="e=".concat(i).concat(this.eol);return t}printConnection(e){return e?"c=".concat(e.nettype," ").concat(e.addrtype," ").concat(e.address).concat(this.eol):""}printBandwidth(e){let t="";for(const i of e)t+="b=".concat(i.bwtype,":").concat(i.bandwidth).concat(this.eol);return t}printTimeFields(e){let t="";for(const i of e){t+="t=".concat(i.time.startTime," ").concat(i.time.startTime).concat(this.eol);for(const e of i.repeats)t+="r=".concat(e.repeatInterval," ").concat(e.typedTimes.join(" ")).concat(this.eol);i.zoneAdjustments&&(t+="z=",t+="z=".concat(i.zoneAdjustments.map(e=>"".concat(e.time," ").concat(e.back?"-":""," ").concat(e.typedTime)).join(" ")).concat(this.eol),t+=this.eol)}return t}printKey(e){return e?"k=".concat(e).concat(this.eol):""}printAttributes(e){let t="";for(const i of e)t+="a=".concat(i.attField).concat(i.attValue?":".concat(i.attValue):"").concat(this.eol);return t}printMediaDescription(e){let t="";for(const i of e)t+=this.printMedia(i.media),t+=this.printInformation(i.information),t+=this.printConnections(i.connections),t+=this.printBandwidth(i.bandwidths),t+=this.printKey(i.key),t+=this.printMediaAttributes(i);return t}printConnections(e){let t="";for(const i of e)t+=this.printConnection(i);return t}printMedia(e){return"m=".concat(e.mediaType," ").concat(e.port," ").concat(e.protos.join("/")," ").concat(e.fmts.join(" ")).concat(this.eol)}printSessionAttributes(e){return new w(this.eol).print(e)}printMediaAttributes(e){return new N(this.eol).print(e)}}class b{constructor(e){A(this,"eol",void 0),this.eol=e}printIceUfrag(e){return void 0===e?"":"a=ice-ufrag:".concat(e).concat(this.eol)}printIcePwd(e){return void 0===e?"":"a=ice-pwd:".concat(e).concat(this.eol)}printIceOptions(e){return void 0===e?"":"a=ice-options:".concat(e.join(o)).concat(this.eol)}printFingerprints(e){return e.length>0?e.map(e=>"a=fingerprint:".concat(e.hashFunction).concat(o).concat(e.fingerprint)).join(this.eol)+this.eol:""}printExtmap(e){return e.map(e=>"a=extmap:".concat(e.entry).concat(e.direction?"/".concat(e.direction):"").concat(o).concat(e.extensionName).concat(e.extensionAttributes?"".concat(o).concat(e.extensionAttributes):"").concat(this.eol)).join("")}printSetup(e){return void 0===e?"":"a=setup:".concat(e).concat(this.eol)}printUnrecognized(e){return e.map(e=>"a=".concat(e.attField).concat(e.attValue?":".concat(e.attValue):"").concat(this.eol)).join("")}}class w extends b{print(e){let t="";return t+=this.printGroups(e.groups),t+=this.printMsidSemantic(e.msidSemantic),t+=this.printIceLite(e.iceLite),t+=this.printIceUfrag(e.iceUfrag),t+=this.printIcePwd(e.icePwd),t+=this.printIceOptions(e.iceOptions),t+=this.printFingerprints(e.fingerprints),t+=this.printSetup(e.setup),t+=this.printTlsId(e.tlsId),t+=this.printIdentity(e.identities),t+=this.printExtmap(e.extmaps),t+=this.printUnrecognized(e.unrecognized),t}printGroups(e){let t="";return e.length>0&&(t+=e.map(e=>"a=group:".concat(e.semantic).concat(e.identificationTag.map(e=>"".concat(o).concat(e)).join("")).concat(this.eol)).join("")),t}printIceLite(e){return void 0===e?"":"a=ice-lite"+this.eol}printTlsId(e){return e?"a=tls-id:".concat(e).concat(this.eol):""}printIdentity(e){return 0===e.length?"":e.map(e=>"a=identity:".concat(e.assertionValue).concat(e.extensions.map(e=>"".concat(o).concat(e.name).concat(e.value?"=".concat(e.value):"")))).join(this.eol)+this.eol}printMsidSemantic(e){if(!e)return"";let t="a=msid-semantic:".concat(e.semantic);return e.applyForAll?t+="".concat(o,"*"):e.identifierList.length>0&&(t+=e.identifierList.map(e=>"".concat(o).concat(e))),t+this.eol}}class N extends b{print(e){const t=e.attributes;let i="";return i+=this.printRTCP(t.rtcp),i+=this.printIceUfrag(t.iceUfrag),i+=this.printIcePwd(t.icePwd),i+=this.printIceOptions(t.iceOptions),i+=this.printCandidates(t.candidates),i+=this.printRemoteCandidatesList(t.remoteCandidatesList),i+=this.printEndOfCandidates(t.endOfCandidates),i+=this.printFingerprints(t.fingerprints),i+=this.printSetup(t.setup),i+=this.printMid(t.mid),i+=this.printExtmap(t.extmaps),i+=this.printRTPRelated(t),i+=this.printPtime(t.ptime),i+=this.printMaxPtime(t.maxPtime),i+=this.printDirection(t.direction),i+=this.printSSRCGroups(t.ssrcGroups),i+=this.printSSRC(t.ssrcs),i+=this.printRTCPMux(t.rtcpMux),i+=this.printRTCPMuxOnly(t.rtcpMuxOnly),i+=this.printRTCPRsize(t.rtcpRsize),i+=this.printMSId(t.msids),i+=this.printImageattr(t.imageattr),i+=this.printRid(t.rids),i+=this.printSimulcast(t.simulcast),i+=this.printSCTPPort(t.sctpPort),i+=this.printMaxMessageSize(t.maxMessageSize),i+=this.printUnrecognized(t.unrecognized),i}printCandidates(e){return e.map(e=>"a=candidate:".concat(e.foundation).concat(o).concat(e.componentId).concat(o).concat(e.transport).concat(o).concat(e.priority).concat(o).concat(e.connectionAddress).concat(o).concat(e.port).concat(o,"typ").concat(o).concat(e.type).concat(e.relAddr?"".concat(o,"raddr").concat(o).concat(e.relAddr):"").concat(e.relPort?"".concat(o,"rport").concat(o).concat(e.relPort):"").concat(Object.keys(e.extension).map(t=>"".concat(o).concat(t).concat(o).concat(e.extension[t])).join("")).concat(this.eol)).join("")}printRemoteCandidatesList(e){return e.map(e=>"a=remote-candidates:".concat(e.join(o)).concat(this.eol)).join("")}printEndOfCandidates(e){return void 0===e?"":"a=end-of-candidates"+this.eol}printRTPRelated(e){if(!e.payloads)return"";const t=e.payloads;let i="";i+=e.rtcpFeedbackWildcards.map(e=>this.printRTCPFeedback("*",e)).join("");for(const e of t)i+=this.printRtpMap(e.payloadType,e.rtpMap),i+=this.printFmtp(e.payloadType,e.fmtp),i+=e.rtcpFeedbacks.map(t=>this.printRTCPFeedback(e.payloadType,t)).join("");return i}printFmtp(e,t){if(!t)return"";const i=Object.keys(t.parameters);return 1===i.length&&null===t.parameters[i[0]]?"a=fmtp:".concat(e).concat(o).concat(i[0]).concat(this.eol):"a=fmtp:".concat(e).concat(o).concat(Object.keys(t.parameters).map(e=>"".concat(e,"=").concat(t.parameters[e])).join(";")).concat(this.eol)}printRtpMap(e,t){return t?"a=rtpmap:".concat(e).concat(o).concat(t.encodingName,"/").concat(t.clockRate).concat(t.encodingParameters?"/".concat(t.encodingParameters):"").concat(this.eol):""}printRTCPFeedback(e,t){let i="a=rtcp-fb:".concat(e).concat(o),n=t;switch(n.type){case"trr-int":i+="ttr-int".concat(o).concat(n.interval);break;case"ack":case"nack":default:n=n,i+="".concat(n.type),n.parameter&&(i+="".concat(o).concat(n.parameter),n.additional&&(i+="".concat(o).concat(n.additional)))}return i+this.eol}printPtime(e){return void 0===e?"":"a=ptime:".concat(e).concat(this.eol)}printMaxPtime(e){return void 0===e?"":"a=maxptime:".concat(e).concat(this.eol)}printDirection(e){return void 0===e?"":"a=".concat(e).concat(this.eol)}printSSRC(e){return e.map(e=>Object.keys(e.attributes).map(t=>"a=ssrc:".concat(e.ssrcId.toString(10)).concat(o).concat(t).concat(e.attributes[t]?":".concat(e.attributes[t]):"").concat(this.eol)).join("")).join("")}printRTCPMux(e){return void 0===e?"":"a=rtcp-mux".concat(this.eol)}printRTCPMuxOnly(e){return void 0===e?"":"a=rtcp-mux-only".concat(this.eol)}printRTCPRsize(e){return void 0===e?"":"a=rtcp-rsize".concat(this.eol)}printRTCP(e){if(void 0===e)return"";let t="a=rtcp:".concat(e.port);return e.netType&&(t+="".concat(o).concat(e.netType)),e.addressType&&(t+="".concat(o).concat(e.addressType)),e.address&&(t+="".concat(o).concat(e.address)),t+this.eol}printMSId(e){return e.map(e=>"a=msid:".concat(e.id).concat(e.appdata?"".concat(o).concat(e.appdata):"").concat(this.eol)).join("")}printImageattr(e){return e.map(e=>"a=imageattr:".concat(e).concat(this.eol)).join("")}printRid(e){return e.map(e=>{let t="a=rid:".concat(e.id).concat(o).concat(e.direction);return e.payloads&&(t+="".concat(o,"pt=").concat(e.payloads.join(","))),e.params.length>0&&(t+="".concat(o).concat(e.params.map(e=>"depend"===e.type?"depend=".concat(e.rids.join(",")):"".concat(e.type,"=").concat(e.val)).join(";"))),t+this.eol}).join("")}printSimulcast(e){return void 0===e?"":"a=simulcast:".concat(e).concat(this.eol)}printSCTPPort(e){return void 0===e?"":"a=sctp-port:".concat(e).concat(this.eol)}printMaxMessageSize(e){return void 0===e?"":"a=max-message-size:".concat(e).concat(this.eol)}printMid(e){return void 0===e?"":"a=mid:".concat(e).concat(this.eol)}printSSRCGroups(e){return e.map(e=>"a=ssrc-group:".concat(e.semantic).concat(e.ssrcIds.map(e=>"".concat(o).concat(e.toString(10))).join("")).concat(this.eol)).join("")}}function D(e){return(new I).parse(e)}function P(e,t){return(new O).print(e,t)}}},t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={exports:{}};return e[n](r,r.exports,i),r.exports}return i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i(8)})()}(uO);class bO{constructor(e){lp(this,"sessionDesc",void 0),lp(this,"localCapabilities",void 0),lp(this,"rtpCapabilities",void 0),lp(this,"candidates",void 0),lp(this,"iceParameters",void 0),lp(this,"dtlsParameters",void 0),lp(this,"setup",void 0),lp(this,"currentMidIndex",void 0),lp(this,"cname",void 0),e=BI(e);const{remoteIceParameters:t,remoteDtlsParameters:i,candidates:n,remoteRTPCapabilities:r,remoteSetup:o,localCapabilities:s,sdkCodec:a,cname:c}=e,d=uO.exports.parse("v=0\no=- 0 0 IN IP4 127.0.0.1\ns=AgoraGateway\nt=0 0\na=group:BUNDLE audio video\na=msid-semantic: WMS\na=ice-lite\nm=audio 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendrecv\na=rtcp-mux\na=rtcp-rsize\na=mid:audio\nm=video 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendrecv\na=rtcp-mux\na=rtcp-rsize\na=mid:video\n");this.rtpCapabilities=r,this.candidates=n,this.iceParameters=t,this.dtlsParameters=i,this.setup=o,this.localCapabilities=s,this.cname=c;for(let e=0;e<d.mediaDescriptions.length;e++){const s=d.mediaDescriptions[e];if(s.attributes.iceUfrag=t.iceUfrag,s.attributes.icePwd=t.icePwd,s.attributes.fingerprints=i.fingerprints,s.attributes.candidates=n,s.attributes.setup=o,"video"===s.media.mediaType){s.media.fmts=r.videoCodecs.map(e=>e.payloadType.toString(10));const e=r.videoCodecs.filter(e=>{var t;return null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase().includes(a)});if(0===e.length)throw new Error("Codec ".concat(a," not supported by remote SDP."));s.attributes.payloads=e,s.attributes.extmaps=r.videoExtensions}"audio"===s.media.mediaType&&(s.media.fmts=r.audioCodecs.map(e=>e.payloadType.toString(10)),s.attributes.payloads=r.audioCodecs,s.attributes.extmaps=r.audioExtensions),d.mediaDescriptions[e]=this.mungMediaDesc(s)}this.sessionDesc=d,this.currentMidIndex=d.mediaDescriptions.length-1}toString(){return uO.exports.print(this.sessionDesc)}send(e,t,i){const{ssrcs:n,ssrcGroups:r}=fO(t,this.cname),o=this.sessionDesc.mediaDescriptions.find(t=>e===gS.VIDEO?"video"===t.media.mediaType:"audio"===t.media.mediaType),s=n[0].attributes.label,a=n[0].attributes.mslabel;return o.attributes.ssrcs=o.attributes.ssrcs.concat(n),o.attributes.ssrcGroups=o.attributes.ssrcGroups.concat(r),{id:s,mslabel:a}}batchSend(e){return e.map(e=>{let{kind:t,ssrcMsg:i}=e;return this.send(t,i,void 0)})}stopSending(e){this.sessionDesc.mediaDescriptions.forEach(t=>{const i=[],n=[],r=[];t.attributes.ssrcs.forEach(t=>{e.includes(t.attributes.label||"")?r.push(t):i.push(t)}),t.attributes.ssrcGroups.forEach(e=>{r.map(e=>e.ssrcId).includes(e.ssrcIds[0])||n.push(e)}),t.attributes.ssrcs=i,t.attributes.ssrcGroups=n})}mute(e){const t=this.sessionDesc.mediaDescriptions.find(t=>t.attributes.mid===e);if(!t)throw new Error("mediaDescription not found with ".concat(e," in remote SDP when calling RemoteSDP.mute."));t.attributes.direction="inactive"}unmute(e){const t=this.sessionDesc.mediaDescriptions.find(t=>t.attributes.mid===e);if(!t)throw new Error("mediaDescription not found with ".concat(e," in remote SDP when calling RemoteSDP.unmute."));t.attributes.direction="sendonly"}receive(e,t,i){e.forEach((e,t)=>{const i=e._mediaStreamTrack,n=this.sessionDesc.mediaDescriptions.findIndex(e=>e.attributes.mid===i.kind),r=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[n],e);this.sessionDesc.mediaDescriptions[n]=r})}stopReceiving(e){}restartICE(e){e=BI(e),this.iceParameters=e,this.sessionDesc.mediaDescriptions.forEach(t=>{t.attributes.iceUfrag=e.iceUfrag,t.attributes.icePwd=e.icePwd})}predictReceivingMids(e){const t=[];for(let i=0;i<e;i++)t.push((this.currentMidIndex+i+1).toString(10));return t}mungRecvMediaDsec(e,t){const i=BI(e);return SO(i,t),gO(i,t),i}updateRecvMedia(e,t){const i=this.sessionDesc.mediaDescriptions.findIndex(t=>t.attributes.mid===e);if(-1!==i){const e=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[i],t);this.sessionDesc.mediaDescriptions[i]=e}}bumpMid(e){this.currentMidIndex+=e}updateTrackLabel(e,t,i){const n=this.sessionDesc.mediaDescriptions.find(t=>e===gS.VIDEO?"video"===t.attributes.mid:"audio"===t.attributes.mid);if(n){const e=n.attributes.ssrcs.find(e=>e.attributes.label===t);var r;if(e)e.attributes.label=i,null===(r=e.attributes.msid)||void 0===r||r.replace(t,i)}}mungMediaDesc(e){const t=BI(e);return TO(t),function(e){const t=e.attributes.extmaps.find(e=>"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"===e.extensionName);t&&e.attributes.extmaps.splice(e.attributes.extmaps.indexOf(t),1),e.attributes.payloads.forEach(e=>{const t=e.rtcpFeedbacks.findIndex(e=>"transport-cc"===e.type);-1!==t&&e.rtcpFeedbacks.splice(t,1)})}(t),t}getSSRC(e){for(const t of this.sessionDesc.mediaDescriptions)for(const i of t.attributes.ssrcs)if(i.attributes.label===e)return[i]}}function wO(e){if(Array.isArray(e))return e.map(e=>e);if(!NO(e))return e;const t={};for(const i in e)NO(e[i])||Array.isArray(e[i])?t[i]=wO(e[i]):t[i]=e[i];return t}function NO(e){return!("object"!=typeof e||Array.isArray(e)||!e)}function DO(){const e=navigator.userAgent.toLocaleLowerCase().match(/chrome\/[\d]*/i);return e&&e[0]?Number(e[0].split("/")[1]):null}function PO(e){if(!window.RTCStatsReport)return!1;return e.getStats()instanceof Sl}class LO{constructor(e){lp(this,"input",[]),lp(this,"size",void 0),this.size=e}add(e){this.input.push(e),this.input.length>this.size&&this.input.splice(0,1)}diffMean(){return 0===this.input.length?0:(this.input[this.input.length-1]-this.input[0])/this.input.length}}const kO={address:"unknown",candidateType:"unknown",id:"unknown",port:0,priority:0,protocol:"unknown",type:"unknown"},MO={timestamp:0,bitrate:{actualEncoded:0,transmit:0},sendPacketLossRate:0,recvPacketLossRate:0,videoRecv:[],videoSend:[],audioRecv:[],audioSend:[],selectedCandidatePair:{id:"unknown",localCandidate:kO,remoteCandidate:kO}},UO={firsCount:0,nacksCount:0,plisCount:0,framesDecodeCount:0,framesDecodeInterval:0,framesDecodeFreezeTime:0,decodeFrameRate:0,bytes:0,packetsLost:0,packetLostRate:0,packets:0,ssrc:0,qpSumPerFrame:0},xO={firsCount:0,nacksCount:0,plisCount:0,frameCount:0,bytes:0,packets:0,packetsLost:0,packetLostRate:0,ssrc:0,rttMs:0,qpSumPerFrame:0},VO={bytes:0,packets:0,packetsLost:0,packetLostRate:0,ssrc:0,rttMs:0},FO={jitterBufferMs:0,jitterMs:0,bytes:0,packetsLost:0,packetLostRate:0,packets:0,ssrc:0,receivedFrames:0,droppedFrames:0,concealedSamples:0};class jO{constructor(e,t){lp(this,"onFirstVideoReceived",void 0),lp(this,"onFirstVideoDecoded",void 0),lp(this,"onFirstAudioReceived",void 0),lp(this,"onFirstVideoDecodedTimeout",void 0),lp(this,"onFirstAudioDecoded",void 0),lp(this,"onSelectedLocalCandidateChanged",void 0),lp(this,"onSelectedRemoteCandidateChanged",void 0),lp(this,"videoIsReady",!1),lp(this,"videoIsReady2",{}),lp(this,"pc",void 0),lp(this,"options",void 0),lp(this,"intervalTimer",void 0),lp(this,"stats",wO(MO)),lp(this,"isFirstVideoReceived",{}),lp(this,"isFirstVideoDecoded",{}),lp(this,"isFirstAudioReceived",{}),lp(this,"isFirstAudioDecoded",{}),lp(this,"isFirstVideoDecodedTimeout",{}),lp(this,"lossRateWindowStats",[]),this.pc=e,this.options=t,this.intervalTimer=window.setInterval(async()=>{this.updateStats()},this.options.updateInterval)}getStats(){return this.stats}setVideoIsReady(e){this.videoIsReady=e}setVideoIsReady2(e,t){this.videoIsReady2[e]=t}getVideoIsReady(e){return this.videoIsReady2[e]||!1}setIsFirstAudioDecoded(e){}destroy(){window.clearInterval(this.intervalTimer),this.pc=void 0}calcLossRate(e){this.lossRateWindowStats.push(e),this.lossRateWindowStats.length>this.options.lossRateInterval&&this.lossRateWindowStats.splice(0,1);const t=this.lossRateWindowStats.length,i=["videoSend","audioSend","videoRecv","audioRecv"];let n=0,r=0,o=0,s=0;for(const a of i)e[a].forEach((e,i)=>{if(!this.lossRateWindowStats[t-1][a][i]||!this.lossRateWindowStats[0][a][i])return;const c=this.lossRateWindowStats[t-1][a][i].packets-this.lossRateWindowStats[0][a][i].packets,d=this.lossRateWindowStats[t-1][a][i].packetsLost-this.lossRateWindowStats[0][a][i].packetsLost;"videoSend"===a||"audioSend"===a?(n+=c,o+=d):(r+=c,s+=d),Number.isNaN(c)||Number.isNaN(c)?e.packetLostRate=0:e.packetLostRate=c<=0||d<=0?0:d/(c+d)});e.sendPacketLossRate=n<=0||o<=0?0:o/(n+o),e.recvPacketLossRate=r<=0||s<=0?0:s/(r+s)}}function BO(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function GO(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?BO(Object(i),!0).forEach((function(t){lp(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):BO(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}class WO extends jO{constructor(){super(...arguments),lp(this,"_stats",MO),lp(this,"lastDecodeVideoReceiverStats",new Map)}async updateStats(){const e=await this._getStats(),t=this.statsResponsesToObjects(e);this._stats=wO(MO);const i=t.filter(e=>"ssrc"===e.type);this.processSSRCStats(i);const n=t.find(e=>"VideoBwe"===e.type);n&&this.processBandwidthStats(n),this._stats.timestamp=Date.now(),this.calcLossRate(this._stats),this.stats=this._stats}processBandwidthStats(e){this._stats.bitrate={actualEncoded:Number(e.googActualEncBitrate),targetEncoded:Number(e.googTargetEncBitrate),retransmit:Number(e.googRetransmitBitrate),transmit:Number(e.googTransmitBitrate)},this._stats.sendBandwidth=Number(e.googAvailableSendBandwidth)}processSSRCStats(e){e.forEach(e=>{const t=e.id.includes("send");switch("".concat(e.mediaType,"_").concat(t?"send":"recv")){case"video_send":{const t=wO(xO);t.codec=e.googCodecName,t.adaptionChangeReason="none",e.googCpuLimitedResolution&&(t.adaptionChangeReason="cpu"),e.googBandwidthLimitedResolution&&(t.adaptionChangeReason="bandwidth"),t.avgEncodeMs=Number(e.googAvgEncodeMs),t.inputFrame={width:Number(e.googFrameWidthInput)||Number(e.googFrameWidthSent),height:Number(e.googFrameHeightInput)||Number(e.googFrameHeightSent),frameRate:Number(e.googFrameRateInput)},t.sentFrame={width:Number(e.googFrameWidthSent),height:Number(e.googFrameHeightSent),frameRate:Number(e.googFrameRateInput)},t.firsCount=Number(e.googFirReceived),t.nacksCount=Number(e.googNacksReceived),t.plisCount=Number(e.googPlisReceived),t.frameCount=Number(e.framesEncoded),t.bytes=Number(e.bytesSent),t.packets=Number(e.packetsSent),t.packetsLost=Number(e.packetsLost),t.ssrc=Number(e.ssrc),t.rttMs=Number(e.googRtt||0),this._stats.videoSend.push(t),this._stats.rtt=t.rttMs;break}case"video_recv":{const t=wO(UO),i=this.lastDecodeVideoReceiverStats.get(Number(e.ssrc));if(t.codec=e.googCodecName,t.targetDelayMs=Number(e.googTargetDelayMs),t.renderDelayMs=Number(e.googRenderDelayMs),t.currentDelayMs=Number(e.googCurrentDelayMs),t.minPlayoutDelayMs=Number(e.googMinPlayoutDelayMs),t.decodeMs=Number(e.googDecodeMs),t.maxDecodeMs=Number(e.googMaxDecodeMs),t.receivedFrame={width:Number(e.googFrameWidthReceived),height:Number(e.googFrameHeightReceived),frameRate:Number(e.googFrameRateReceived)},t.decodedFrame={width:Number(e.googFrameWidthReceived),height:Number(e.googFrameHeightReceived),frameRate:Number(e.googFrameRateDecoded)},t.decodeFrameRate=Number(e.googFrameRateDecoded),t.outputFrame={width:Number(e.googFrameWidthReceived),height:Number(e.googFrameHeightReceived),frameRate:Number(e.googFrameRateOutput)},t.jitterBufferMs=Number(e.googJitterBufferMs),t.firsCount=Number(e.googFirsSent),t.nacksCount=Number(e.googNacksSent),t.plisCount=Number(e.googPlisSent),t.framesDecodeCount=Number(e.framesDecoded),t.bytes=Number(e.bytesReceived),t.packets=Number(e.packetsReceived),t.packetsLost=Number(e.packetsLost),t.ssrc=Number(e.ssrc),t.packets>0&&!this.isFirstVideoReceived[t.ssrc]&&(this.onFirstVideoReceived&&this.onFirstVideoReceived(t.ssrc),this.isFirstVideoReceived[t.ssrc]=!0),t.framesDecodeCount>0&&!this.isFirstVideoDecoded[t.ssrc]&&(this.onFirstVideoDecoded&&this.onFirstVideoDecoded(t.ssrc,t.decodedFrame.width,t.decodedFrame.height),this.isFirstVideoDecoded[t.ssrc]=!0),i){const n=i.stats,r=Date.now()-i.lts;t.framesDecodeFreezeTime=n.framesDecodeFreezeTime,t.framesDecodeInterval=n.framesDecodeInterval,t.framesDecodeCount>n.framesDecodeCount&&this.isFirstVideoDecoded[t.ssrc]?(i.lts=Date.now(),t.framesDecodeInterval=r,t.framesDecodeInterval>=this.options.freezeRateLimit&&(this.getVideoIsReady(parseInt(e.ssrc,10))?t.framesDecodeFreezeTime+=t.framesDecodeInterval:this.setVideoIsReady2(parseInt(e.ssrc,10),!0))):t.framesDecodeCount<i.stats.framesDecodeCount&&(t.framesDecodeInterval=0)}this.lastDecodeVideoReceiverStats.set(t.ssrc,{stats:GO({},t),lts:Date.now()}),this._stats.videoRecv.push(t);break}case"audio_recv":{const t=wO(FO);t.codec=e.googCodecName,t.outputLevel=Math.abs(Number(e.audioOutputLevel))/32767,t.decodingCNG=Number(e.googDecodingCNG),t.decodingCTN=Number(e.googDecodingCTN),t.decodingCTSG=Number(e.googDecodingCTSG),t.decodingNormal=Number(e.googDecodingNormal),t.decodingPLC=Number(e.googDecodingPLC),t.decodingPLCCNG=Number(e.googDecodingPLCCNG),t.expandRate=Number(e.googExpandRate),t.accelerateRate=Number(e.googAccelerateRate),t.preemptiveExpandRate=Number(e.googPreemptiveExpandRate),t.secondaryDecodedRate=Number(e.googSecondaryDecodedRate),t.speechExpandRate=Number(e.googSpeechExpandRate),t.preferredJitterBufferMs=Number(e.googPreferredJitterBufferMs),t.jitterBufferMs=Number(e.googJitterBufferMs),t.jitterMs=Number(e.googJitterReceived),t.bytes=Number(e.bytesReceived),t.packets=Number(e.packetsReceived),t.packetsLost=Number(e.packetsLost),t.ssrc=Number(e.ssrc),t.receivedFrames=Number(e.googDecodingCTN)||Number(e.packetsReceived),t.droppedFrames=Number(e.googDecodingPLC)+Number(e.googDecodingPLCCNG)||Number(e.packetsLost),t.receivedFrames>0&&!this.isFirstAudioReceived[t.ssrc]&&(this.onFirstAudioReceived&&this.onFirstAudioReceived(t.ssrc),this.isFirstAudioReceived[t.ssrc]=!0),t.decodingNormal>0&&!this.isFirstAudioDecoded[t.ssrc]&&(this.onFirstAudioDecoded&&this.onFirstAudioDecoded(t.ssrc),this.isFirstAudioDecoded[t.ssrc]=!0),this._stats.audioRecv.push(t);break}case"audio_send":{const t=wO(VO);t.codec=e.googCodecName,t.inputLevel=Math.abs(Number(e.audioInputLevel))/32767,t.aecReturnLoss=Number(e.googEchoCancellationReturnLoss||0),t.aecReturnLossEnhancement=Number(e.googEchoCancellationReturnLossEnhancement||0),t.residualEchoLikelihood=Number(e.googResidualEchoLikelihood||0),t.residualEchoLikelihoodRecentMax=Number(e.googResidualEchoLikelihoodRecentMax||0),t.bytes=Number(e.bytesSent),t.packets=Number(e.packetsSent),t.packetsLost=Number(e.packetsLost),t.ssrc=Number(e.ssrc),t.rttMs=Number(e.googRtt||0),this._stats.rtt=t.rttMs,this._stats.audioSend.push(t);break}}})}_getStats(){return new Sl((e,t)=>{this.pc.getStats(e,t)})}statsResponsesToObjects(e){const t=[];return e.result().forEach(e=>{const i={id:e.id,timestamp:e.timestamp.valueOf().toString(),type:e.type};e.names().forEach(t=>{i[t]=e.stat(t)}),t.push(i)}),t}}function HO(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function KO(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?HO(Object(i),!0).forEach((function(t){lp(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):HO(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}class YO extends jO{constructor(){super(...arguments),lp(this,"_stats",MO),lp(this,"report",void 0),lp(this,"lastDecodeVideoReceiverStats",new Map),lp(this,"lastVideoFramesRecv",new Map),lp(this,"lastVideoFramesSent",new Map),lp(this,"lastVideoFramesDecode",new Map),lp(this,"lastVideoJBDelay",new Map),lp(this,"lastAudioJBDelay",new Map),lp(this,"mediaBytesSent",new Map),lp(this,"mediaBytesRetransmit",new Map),lp(this,"mediaBytesTargetEncode",new Map),lp(this,"lastEncoderMs",new Map)}async updateStats(){this.report=await this.pc.getStats(),this._stats=wO(MO),this.report.forEach(e=>{switch(e.type){case Lh.OUTBOUND:"audio"===e.mediaType?this.processAudioOutboundStats(e):"video"===e.mediaType&&this.processVideoOutboundStats(e);break;case Lh.INBOUND:"audio"===e.mediaType?this.processAudioInboundStats(e):"video"===e.mediaType&&this.processVideoInboundStats(e);break;case Lh.TRANSPORT:{const t=this.report.get(e.selectedCandidatePairId);t&&this.processCandidatePairStats(t);break}case Lh.CANDIDATE_PAIR:e.selected&&this.processCandidatePairStats(e)}}),this.updateSendBitrate(),this._stats.timestamp=Date.now(),this.calcLossRate(this._stats),this.stats=this._stats}processCandidatePairStats(e){if(this._stats.sendBandwidth=e.availableOutgoingBitrate||0,e.currentRoundTripTime&&(this._stats.rtt=1e3*e.currentRoundTripTime),this._stats.videoSend.forEach(t=>{!t.rttMs&&e.currentRoundTripTime&&(t.rttMs=1e3*e.currentRoundTripTime)}),this._stats.audioSend.forEach(t=>{!t.rttMs&&e.currentRoundTripTime&&(t.rttMs=1e3*e.currentRoundTripTime)}),this._stats.selectedCandidatePair.id=e.id,e.localCandidateId){const t=this.report.get(e.localCandidateId);t&&this.processCandidateStats(t)}if(e.remoteCandidateId){const t=this.report.get(e.remoteCandidateId);t&&this.processCandidateStats(t)}}processCandidateStats(e){let t;e.type===Lh.LOCAL_CANDIDATE&&(t=this._stats.selectedCandidatePair.localCandidate),e.type===Lh.REMOTE_CANDIDATE&&(t=this._stats.selectedCandidatePair.remoteCandidate),t&&(t.type=e.type,t.id=e.id,e.address&&(t.address=e.address),e.candidateType&&(t.candidateType=e.candidateType),e.port&&(t.port=e.port),e.priority&&(t.priority=e.priority),e.protocol&&(t.protocol=e.protocol),e.relayProtocol&&(t.relayProtocol=e.relayProtocol),e.type===Lh.LOCAL_CANDIDATE&&this.stats.selectedCandidatePair.localCandidate.id!==t.id&&this.onSelectedLocalCandidateChanged&&this.onSelectedLocalCandidateChanged(KO({},t),KO({},this.stats.selectedCandidatePair.localCandidate)),e.type===Lh.REMOTE_CANDIDATE&&this.stats.selectedCandidatePair.remoteCandidate.id!==t.id&&this.onSelectedRemoteCandidateChanged&&this.onSelectedRemoteCandidateChanged(KO({},t),KO({},this.stats.selectedCandidatePair.remoteCandidate)))}processAudioInboundStats(e){let t=this._stats.audioRecv.find(t=>t.ssrc===e.ssrc);t||(t=wO(FO),this._stats.audioRecv.push(t)),t.ssrc=e.ssrc,t.packets=e.packetsReceived,t.packetsLost=e.packetsLost,t.bytes=e.bytesReceived,t.jitterMs=1e3*e.jitter,this.processAudioTrackReceiverStats(e,e.trackId,t),e.codecId&&(t.codec=this.getCodecFromCodecStats(e.codecId)),t.receivedFrames||(t.receivedFrames=e.packetsReceived),t.droppedFrames||(t.droppedFrames=e.packetsLost),t.receivedFrames>0&&!this.isFirstAudioReceived[t.ssrc]&&(this.onFirstAudioReceived&&this.onFirstAudioReceived(t.ssrc),this.isFirstAudioReceived[t.ssrc]=!0),t.outputLevel&&t.outputLevel>0&&!this.isFirstAudioDecoded[t.ssrc]&&(this.onFirstAudioDecoded&&this.onFirstAudioDecoded(t.ssrc),this.isFirstAudioDecoded[t.ssrc]=!0),"number"==typeof e.concealedSamples&&(t.concealedSamples=e.concealedSamples)}processVideoInboundStats(e){let t=this._stats.videoRecv.find(t=>t.ssrc===e.ssrc);t||(t=wO(UO),this._stats.videoRecv.push(t)),t.ssrc=e.ssrc,t.packets=e.packetsReceived,t.packetsLost=e.packetsLost,t.bytes=e.bytesReceived,t.firsCount=e.firCount,t.nacksCount=e.nackCount,t.plisCount=e.pliCount,t.framesDecodeCount=e.framesDecoded,t.totalInterFrameDelay=e.totalInterFrameDelay,t.totalSquaredInterFrameDelay=e.totalSquaredInterFrameDelay;const i=this.lastDecodeVideoReceiverStats.get(t.ssrc),n=this.lastVideoFramesDecode.get(t.ssrc),r=Date.now();if(t.framesDecodeCount>0&&!this.isFirstVideoDecoded[t.ssrc]){const e=t.decodedFrame?t.decodedFrame.width:0,i=t.decodedFrame?t.decodedFrame.height:0;this.onFirstVideoDecoded&&this.onFirstVideoDecoded(t.ssrc,e,i),this.isFirstVideoDecoded[t.ssrc]=!0}if(i){const n=i.stats,o=r-i.lts;t.framesDecodeFreezeTime=n.framesDecodeFreezeTime,t.framesDecodeInterval=n.framesDecodeInterval,!this.isFirstVideoDecoded[t.ssrc]&&o>this.options.firstVideoDecodedTimeout&&!this.isFirstVideoDecodedTimeout[t.ssrc]&&(this.onFirstVideoDecodedTimeout&&this.onFirstVideoDecodedTimeout(t.ssrc),this.isFirstVideoDecodedTimeout[t.ssrc]=!0),t.framesDecodeCount>n.framesDecodeCount&&this.isFirstVideoDecoded[t.ssrc]?(i.lts=Date.now(),t.framesDecodeInterval=o,t.framesDecodeInterval>=this.options.freezeRateLimit&&(this.getVideoIsReady(parseInt(e.ssrc))?t.framesDecodeFreezeTime+=t.framesDecodeInterval:this.setVideoIsReady2(parseInt(e.ssrc,10),!0))):t.framesDecodeCount<n.framesDecodeCount&&(t.framesDecodeInterval=0),e.framesDecoded&&e.qpSum&&(i.stats.framesDecodeCount>e.framesDecoded?t.qpSumPerFrame=e.qpSum/e.framesDecoded:t.qpSumPerFrame=(e.qpSum-i.qpSum)/(e.framesDecoded-i.stats.framesDecodeCount))}n&&r-n.lts>=800?(t.decodeFrameRate=Math.round((t.framesDecodeCount-n.count)/((r-n.lts)/1e3)),this.lastVideoFramesDecode.set(t.ssrc,{count:t.framesDecodeCount,lts:r,rate:t.decodeFrameRate})):n?t.decodeFrameRate=n.rate:this.lastVideoFramesDecode.set(t.ssrc,{count:t.framesDecodeCount,lts:r,rate:0}),e.totalDecodeTime&&(t.decodeMs=1e3*e.totalDecodeTime),this.processVideoTrackReceiverStats(e,e.trackId,t),e.codecId&&(t.codec=this.getCodecFromCodecStats(e.codecId)),e.framerateMean&&(t.framesRateFirefox=e.framerateMean),t.packets>0&&!this.isFirstVideoReceived[t.ssrc]&&(this.onFirstVideoReceived&&this.onFirstVideoReceived(t.ssrc),this.isFirstVideoReceived[t.ssrc]=!0),this.lastDecodeVideoReceiverStats.set(t.ssrc,{stats:KO({},t),lts:i?i.lts:Date.now(),qpSum:e.qpSum})}processVideoOutboundStats(e){let t=this._stats.videoSend.find(t=>t.ssrc===e.ssrc);t||(t=wO(xO),this._stats.videoSend.push(t));const i=this.mediaBytesSent.get(e.ssrc);if(i)i.add(e.bytesSent);else{const t=new LO(10);t.add(e.bytesSent),this.mediaBytesSent.set(e.ssrc,t)}if(void 0!==e.retransmittedBytesSent){const t=this.mediaBytesRetransmit.get(e.ssrc);if(t)t.add(e.retransmittedBytesSent);else{const t=new LO(10);t.add(e.retransmittedBytesSent),this.mediaBytesRetransmit.set(e.ssrc,t)}}if(e.totalEncodedBytesTarget){const t=this.mediaBytesTargetEncode.get(e.ssrc);if(t)t.add(e.totalEncodedBytesTarget);else{const t=new LO(10);t.add(e.totalEncodedBytesTarget),this.mediaBytesTargetEncode.set(e.ssrc,t)}}if(t.ssrc=e.ssrc,t.bytes=e.bytesSent,t.packets=e.packetsSent,t.firsCount=e.firCount,t.nacksCount=e.nackCount,t.plisCount=e.pliCount,t.frameCount=e.framesEncoded,t.adaptionChangeReason=e.qualityLimitationReason,e.totalEncodeTime&&e.framesEncoded){const i=this.lastEncoderMs.get(e.ssrc);if(!i||i.lastFrameCount>e.framesEncoded)t.avgEncodeMs=1e3*e.totalEncodeTime/e.framesEncoded;else{const n=e.framesEncoded-i.lastFrameCount,r=e.totalEncodeTime-i.lastEncoderTime;t.avgEncodeMs=1e3*r/n}}if(e.framesEncoded&&e.qpSum){const i=this.lastEncoderMs.get(e.ssrc);!i||i.lastFrameCount>e.framesEncoded?t.qpSumPerFrame=e.qpSum/e.framesEncoded:t.qpSumPerFrame=(e.qpSum-i.lastQpSum)/(e.framesEncoded-i.lastFrameCount)}if(this.lastEncoderMs.set(e.ssrc,{lastFrameCount:e.framesEncoded,lastEncoderTime:e.totalEncodeTime,lastQpSum:e.qpSum,lts:Date.now()}),e.codecId&&(t.codec=this.getCodecFromCodecStats(e.codecId)),e.mediaSourceId&&this.processVideoMediaSource(e.mediaSourceId,t),this.processVideoTrackSenderStats(e,e.trackId,t),e.remoteId)this.processRemoteInboundStats(e.remoteId,t);else{const i=this.findRemoteStatsId(e.ssrc,Lh.REMOTE_INBOUND);i&&this.processRemoteInboundStats(i,t)}}processAudioOutboundStats(e){let t=this._stats.audioSend.find(t=>t.ssrc===e.ssrc);if(t||(t=wO(VO),this._stats.audioSend.push(t)),t.ssrc=e.ssrc,t.packets=e.packetsSent,t.bytes=e.bytesSent,e.mediaSourceId&&this.processAudioMediaSource(e.mediaSourceId,t),e.codecId&&(t.codec=this.getCodecFromCodecStats(e.codecId)),this.processAudioTrackSenderStats(e,e.trackId,t),e.remoteId)this.processRemoteInboundStats(e.remoteId,t);else{const i=this.findRemoteStatsId(e.ssrc,Lh.REMOTE_INBOUND);i&&this.processRemoteInboundStats(i,t)}}findRemoteStatsId(e,t){var i;const n=Array.from(HR(i=this.report).call(i)).find(i=>i.type===t&&i.ssrc===e);return n?n.id:null}processVideoMediaSource(e,t){const i=this.report.get(e);i&&i.width&&i.height&&i.framesPerSecond&&(t.inputFrame={width:i.width,height:i.height,frameRate:i.framesPerSecond})}processAudioMediaSource(e,t){const i=this.report.get(e);i&&(t.inputLevel=i.audioLevel)}processVideoTrackSenderStats(e,t,i){var n,r,o;const s=t?this.report.get(t):void 0,a=null!==(n=null==s?void 0:s.framesSent)&&void 0!==n?n:e.framesSent;let c=null!==(r=null==s?void 0:s.frameWidth)&&void 0!==r?r:e.frameWidth,d=null!==(o=null==s?void 0:s.frameHeight)&&void 0!==o?o:e.frameHeight;if("number"!=typeof a)return;0!==a||"number"==typeof c&&"number"==typeof d||(c=0,d=0);let u=0;const l=Date.now(),h=this.lastVideoFramesSent.get(i.ssrc);h&&l-h.lts>=800?(u=Math.round((a-h.count)/((l-h.lts)/1e3)),this.lastVideoFramesSent.set(i.ssrc,{count:a,lts:l,rate:u})):h?u=h.rate:this.lastVideoFramesSent.set(i.ssrc,{count:a,lts:l,rate:0}),i.sentFrame={width:c,height:d,frameRate:Math.max(0,u)}}processVideoTrackReceiverStats(e,t,i){var n,r,o,s,a;const c=t?this.report.get(t):void 0,d=null!==(n=null==c?void 0:c.framesReceived)&&void 0!==n?n:e.framesReceived,u=null!==(r=null==c?void 0:c.frameWidth)&&void 0!==r?r:e.frameWidth,l=null!==(o=null==c?void 0:c.frameHeight)&&void 0!==o?o:e.frameHeight,h=null!==(s=null==c?void 0:c.jitterBufferDelay)&&void 0!==s?s:e.jitterBufferDelay,p=null!==(a=null==c?void 0:c.jitterBufferEmittedCount)&&void 0!==a?a:e.jitterBufferEmittedCount;if("number"==typeof d){const e=this.lastVideoFramesRecv.get(i.ssrc),t=Date.now();i.framesReceivedCount=d;let n=0;e&&t-e.lts>=800?(n=Math.round((d-e.count)/((t-e.lts)/1e3)),this.lastVideoFramesRecv.set(i.ssrc,{count:d,lts:t,rate:n})):e?n=e.rate:this.lastVideoFramesRecv.set(i.ssrc,{count:d,lts:t,rate:0}),i.receivedFrame={width:u||0,height:l||0,frameRate:n||0},i.decodedFrame={width:u||0,height:l||0,frameRate:i.decodeFrameRate||0},i.outputFrame={width:u||0,height:l||0,frameRate:i.decodeFrameRate||0}}if(h&&p){let e=this.lastVideoJBDelay.get(i.ssrc);this.lastVideoJBDelay.set(i.ssrc,{jitterBufferDelay:h,jitterBufferEmittedCount:p}),e||(e={jitterBufferDelay:0,jitterBufferEmittedCount:0});const t=1e3*(h-e.jitterBufferDelay)/(p-e.jitterBufferEmittedCount);i.jitterBufferMs=t,i.currentDelayMs=Math.round(t)}}processAudioTrackSenderStats(e,t,i){var n,r,o,s;const a=t?this.report.get(t):void 0,c=null!==(n=null!==(r=null==a?void 0:a.echoReturnLoss)&&void 0!==r?r:e.echoReturnLoss)&&void 0!==n?n:0,d=null!==(o=null!==(s=null==a?void 0:a.echoReturnLossEnhancement)&&void 0!==s?s:e.echoReturnLossEnhancement)&&void 0!==o?o:0;i.aecReturnLoss=c,i.aecReturnLossEnhancement=d}processAudioTrackReceiverStats(e,t,i){var n,r,o,s,a,c,d;const u=t?this.report.get(t):void 0,l=null!==(n=null==u?void 0:u.removedSamplesForAcceleration)&&void 0!==n?n:e.removedSamplesForAcceleration,h=null!==(r=null==u?void 0:u.totalSamplesReceived)&&void 0!==r?r:e.totalSamplesReceived,p=null!==(o=null==u?void 0:u.jitterBufferDelay)&&void 0!==o?o:e.jitterBufferDelay,_=null!==(s=null==u?void 0:u.jitterBufferEmittedCount)&&void 0!==s?s:e.jitterBufferEmittedCount,E=null!==(a=null==u?void 0:u.audioLevel)&&void 0!==a?a:null==e?void 0:e.audioLevel,m=null!==(c=null==u?void 0:u.totalSamplesDuration)&&void 0!==c?c:null==e?void 0:e.totalSamplesDuration,f=null!==(d=null==u?void 0:u.concealedSamples)&&void 0!==d?d:e.concealedSamples;if(l&&h&&(i.accelerateRate=l/h),p&&_){let e=this.lastAudioJBDelay.get(i.ssrc);this.lastAudioJBDelay.set(i.ssrc,{jitterBufferDelay:p,jitterBufferEmittedCount:_}),e||(e={jitterBufferDelay:0,jitterBufferEmittedCount:0});const t=1e3*(p-e.jitterBufferDelay)/(_-e.jitterBufferEmittedCount);i.jitterBufferMs=Math.round(t)}i.outputLevel=E;let S=1920;m&&h&&(S=h/m/50,i.receivedFrames=Math.round(h/S)),f&&(i.droppedFrames=Math.round(f/S))}processRemoteInboundStats(e,t){const i=this.report.get(e);i&&(t.packetsLost=i.packetsLost,i.roundTripTime&&(t.rttMs=1e3*i.roundTripTime))}getCodecFromCodecStats(e){const t=this.report.get(e);if(!t)return"";const i=t.mimeType.match(/\/(.*)$/);return i&&i[1]?i[1]:""}updateSendBitrate(){let e=0,t=null,i=null;this.mediaBytesSent.forEach(t=>{e+=t.diffMean()}),this.mediaBytesRetransmit.forEach(e=>{t=null===t?e.diffMean():t+e.diffMean()}),this.mediaBytesTargetEncode.forEach(e=>{i=null===i?e.diffMean():i+e.diffMean()});const n=null!==t?e-t:e;this._stats.bitrate={actualEncoded:8*n/(this.options.updateInterval/1e3),transmit:8*e/(this.options.updateInterval/1e3)},null!==t&&(this._stats.bitrate.retransmit=8*t/(this.options.updateInterval/1e3)),null!==i&&(this._stats.bitrate.targetEncoded=8*i/(this.options.updateInterval/1e3))}}class qO extends jO{updateStats(){return Sl.resolve()}}function JO(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1e4;const o=DO();return o?o<76?new WO(e,{updateInterval:t,lossRateInterval:i,freezeRateLimit:n,firstVideoDecodedTimeout:r}):new YO(e,{updateInterval:t,lossRateInterval:i,freezeRateLimit:n,firstVideoDecodedTimeout:r}):PO(e)?new YO(e,{updateInterval:t,lossRateInterval:i,freezeRateLimit:n,firstVideoDecodedTimeout:r}):new qO(e,{updateInterval:t,lossRateInterval:i,freezeRateLimit:n,firstVideoDecodedTimeout:r})}var XO;function zO(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function QO(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?zO(Object(i),!0).forEach((function(t){lp(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):zO(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}let ZO=(JT((XO=class e extends LS{get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}constructor(t,i){super(t,i),lp(this,"store",void 0),lp(this,"peerConnection",void 0),lp(this,"remoteSDP",void 0),lp(this,"initialOffer",void 0),lp(this,"statsFilter",void 0),lp(this,"useRTX",!1),lp(this,"localCapabilities",void 0),lp(this,"localCandidateCount",0),lp(this,"allCandidatesReceived",!1),lp(this,"establishPromise",void 0),lp(this,"mutex",new vg("P2PConnection-mutex")),this.store=i,this.peerConnection=new RTCPeerConnection(e.resolvePCConfiguration(t),{optional:[{googDscp:!0}]}),this.statsFilter=JO(this.peerConnection,void 0,void 0,Hh()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1,this.establishPromise=this.establish()}async establish(){try{const e=await this.peerConnection.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});if(!e.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");const t=_O(e.sdp),i=pO(e.sdp,!this.useRTX,FE("FILTER_VIDEO_FEC"),FE("FILTER_AUDIO_FEC"),["opus"]);return this.localCapabilities=i,this.initialOffer=e,QO(QO({},t),{},{rtpCapabilities:{send:{audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},recv:{audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},sendrecv:i},offerSDP:e.sdp})}catch(e){throw new EE(_E.GET_LOCAL_CONNECTION_PARAMS_FAILED,e.toString())}}async connect(e,t,i,n,r,o){try{if(!this.initialOffer)throw new Error("Cannot establish P2PConnection without initial offer.");this.remoteSDP=new bO({remoteIceParameters:e,remoteDtlsParameters:t,candidates:i,remoteRTPCapabilities:n.send,remoteSetup:r,localCapabilities:this.localCapabilities,sdkCodec:this.store.codec,cname:o});const s=this.remoteSDP.toString();await this.peerConnection.setLocalDescription(this.initialOffer),await this.peerConnection.setRemoteDescription({type:"answer",sdp:s})}catch(e){throw new EE(_E.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(e.toString()))}}send(e,t){var i=this;return oO((function*(){const n=yield sO(i.mutex.lock());try{if(!i.remoteSDP)throw new Error("Cannot call P2PConnection.send before remote SDP created");const r=e.map(e=>i.peerConnection.addTrack(e._mediaStreamTrack)),o=yield sO(i.peerConnection.createOffer()),s=uO.exports.parse(o.sdp),a=e.map(e=>{const t=e._mediaStreamTrack,n=s.mediaDescriptions.find(e=>e.attributes.mid===t.kind);if(!n)throw new Error("Cannot extract ssrc from mediaDescription.");return function(e,t,i){const n=e.attributes.ssrcs.filter(e=>e.attributes.label===t),r=e.attributes.ssrcGroups;if(0===n.length)throw new Error("Cannot extract ssrc from plan-b SDP.");if(r&&n.length>1){const e=r.find(e=>-1!==e.ssrcIds.indexOf(n[0].ssrcId));return e?[{ssrcId:e.ssrcIds[0],rtx:i?e.ssrcIds[1]:void 0}]:[{ssrcId:n[0].ssrcId}]}return[{ssrcId:n[0].ssrcId}]}(n,t.id,i.useRTX)});let c;try{c=yield a}catch(e){throw r.forEach(e=>{Wh()&&e.replaceTrack(null),i.peerConnection.removeTrack(e)}),e}const d=i.mungSendOfferSDP(o.sdp,e);i.remoteSDP.receive(e,t,c);const u=i.remoteSDP.toString();return yield sO(i.peerConnection.setLocalDescription({type:"offer",sdp:d})),yield sO(i.applySendEncodings(r,e)),yield sO(i.peerConnection.setRemoteDescription({type:"answer",sdp:u})),e.map((e,t)=>{const i=e._mediaStreamTrack.id;return{localSSRC:a[t],id:i}})}catch(e){throw new EE(_E.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(e.toString()))}finally{n()}}))()}async stopSending(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");const t=this.peerConnection.getSenders().filter(t=>{var i;return-1!==e.indexOf((null===(i=t.track)||void 0===i?void 0:i.id)||"")});if(t.length!==e.length)throw new Error("Transceivers' length doesn't match mids' length when trying to call P2PConnection.stopSending.");t.map(e=>{Wh()&&e.replaceTrack(null),this.peerConnection.removeTrack(e)});const i=await this.peerConnection.createOffer();await this.peerConnection.setLocalDescription(i),this.remoteSDP.stopReceiving(e);const n=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"answer",sdp:n})}catch(e){throw new EE(_E.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(e.toString()))}}async receive(e,t,i,n){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(e," before remoteSDP created."));const{id:i,mslabel:r}=this.remoteSDP.send(e,t,n),o=new Sl((t,n)=>{const o=setTimeout(()=>{n(new Error("Cannot receive track, id: ".concat(i)))},1e4),s=n=>{const a=Mh();if(("Safari"===a.name&&11===Number(a.version)||Kh())&&n.track.id!==i&&n.streams[0].id===r){var c;const r=n.streams[0].getTracks()[0];return null===(c=this.remoteSDP)||void 0===c||c.updateTrackLabel(e,i,n.track.id),this.peerConnection.removeEventListener("track",s),clearTimeout(o),void t(r)}if(n.track.id===i)return this.peerConnection.removeEventListener("track",s),clearTimeout(o),void t(n.track)};this.peerConnection.addEventListener("track",s)}),s=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:s});const a=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(a);return{track:await o,id:i}}catch(e){throw new EE(_E.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(e.toString()))}}async stopReceiving(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");this.remoteSDP.stopSending(e);const t=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:t});const i=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(i)}catch(e){throw new EE(_E.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(e.toString()))}}async muteRemote(e){}async unmuteRemote(e){}async muteLocal(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");const t=this.peerConnection.getSenders().filter(t=>{var i;return-1!==e.indexOf((null===(i=t.track)||void 0===i?void 0:i.id)||"")});if(t.length!==e.length)throw new Error("sender' length doesn't match mids' length.");t.map(e=>{if(Wh()&&e.track)e.track.enabled=!1;else{const t=e.getParameters();t.encodings.forEach(e=>e.active=!1),e.setParameters(t)}})}catch(e){throw new EE(_E.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat(e.toString()))}}async unmuteLocal(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");const t=this.peerConnection.getSenders().filter(t=>{var i;return-1!==e.indexOf((null===(i=t.track)||void 0===i?void 0:i.id)||"")});if(t.length!==e.length)throw new Error("Senders' length doesn't match mids' length.");t.map(async e=>{if(Wh()&&e.track)e.track.enabled=!0;else{const t=e.getParameters();t.encodings.forEach(e=>e.active=!0),await e.setParameters(t)}});const i=await this.peerConnection.createOffer();await this.peerConnection.setLocalDescription(i);const n=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"answer",sdp:n})}catch(e){throw new EE(_E.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat(e.toString()))}}restartICE(){var e=this;return oO((function*(){const t=yield sO(e.mutex.lock("From P2PConnection.restartICE"));try{const i=yield sO(e.peerConnection.createOffer({iceRestart:!0}));if(!i.sdp)throw new Error("Cannot restartICE because restart offer SDP does not exist.");const n=_O(i.sdp),{remoteIceParameters:r}=yield n.iceParameters;if(!e.remoteSDP)throw new Error("Cannot restartICE before remoteSDP created.");e.remoteSDP.restartICE(r);const o=e.remoteSDP.toString();yield sO(e.peerConnection.setLocalDescription(i)),yield sO(e.peerConnection.setRemoteDescription({type:"answer",sdp:o}))}catch(e){CE.warning("restart ICE failed, abort operation",e)}finally{t()}}))()}close(){var e;this.peerConnection.close(),null===(e=this.onConnectionStateChange)||void 0===e||e.call(this,"closed"),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.statsFilter.destroy()}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(e){return this.statsFilter.getVideoIsReady(e)}async updateEncoderConfig(e,t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");const e=await this.peerConnection.createOffer(),i=this.mungSendOfferSDP(e.sdp,[t]);this.remoteSDP.updateRecvMedia(t._mediaStreamTrack.kind,t);const n=this.remoteSDP.toString();await this.peerConnection.setLocalDescription({type:"offer",sdp:i}),await this.peerConnection.setRemoteDescription({type:"answer",sdp:n})}catch(e){throw new EE(_E.EXCHANGE_SDP_FAILED,e.toString())}}async updateSendParameters(e,t){const i=this.peerConnection.getSenders().filter(t=>{var i;return(null===(i=t.track)||void 0===i?void 0:i.id)===e});1===i.length&&await this.applySendEncodings(i,[t])}setStatsRemoteVideoIsReady(e,t){this.statsFilter.setVideoIsReady2(e,t)}async replaceTrack(e,t){const i=this.peerConnection.getSenders().find(e=>{var i;return(null===(i=e.track)||void 0===i?void 0:i.id)===t});i&&await i.replaceTrack(e._mediaStreamTrack)}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var e;null===(e=this.onICEConnectionStateChange)||void 0===e||e.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var e;null===(e=this.onConnectionStateChange)||void 0===e||e.call(this,this.peerConnection.connectionState)},this.peerConnection.onicecandidate=e=>{e.candidate?this.localCandidateCount+=1:(this.peerConnection.onicecandidate=null,this.allCandidatesReceived=!0,CE.debug("[pc-".concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount))},setTimeout(()=>{this.allCandidatesReceived||(this.allCandidatesReceived=!0,CE.debug("[pc-".concat(this.store.p2pId,"] onicecandidate timeout, local candidate count"),this.localCandidateCount))},FE("CANDIDATE_TIMEOUT"))}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(t){const i={iceServers:[],sdpSemantics:"plan-b"};return t.iceServers?i.iceServers=t.iceServers:t.turnServer&&"off"!==t.turnServer.mode&&(Pf(t.turnServer.servers)?i.iceServers=t.turnServer.servers:(i.iceServers&&i.iceServers.push(...e.turnServerConfigToIceServers(t.turnServer.servers)),FE("USE_TURN_SERVER_OF_GATEWAY")&&i.iceServers&&t.turnServer.serversFromGateway&&i.iceServers.push(...e.turnServerConfigToIceServers(t.turnServer.serversFromGateway)),t.turnServer.servers.concat(t.turnServer.serversFromGateway||[]).forEach(e=>{e.forceturn&&(i.iceTransportPolicy="relay")}))),i}static turnServerConfigToIceServers(e){const t=[];return e.forEach(e=>{e.security?e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turns:".concat(e.turnServerURL,":").concat(e.tcpport,"?transport=tcp")}):(e.udpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turn:".concat(e.turnServerURL,":").concat(e.udpport,"?transport=udp")}),e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turn:".concat(e.turnServerURL,":").concat(e.tcpport,"?transport=tcp")}))}),t}async applySendEncodings(e,t){try{if(!MS().supportSetRtpSenderParameters)return;if(e.length!==t.length)return;for(let n=0;n<e.length;n++){var i;const r=e[n],o=t[n];if(!o)continue;const s={},a={};if(o instanceof QC)switch(o._optimizationMode){case"motion":s.degradationPreference="maintain-framerate";break;case"detail":s.degradationPreference="maintain-resolution";break;default:s.degradationPreference="balanced"}if(FE("DSCP_TYPE")&&tp()){const e=FE("DSCP_TYPE");["very-low","low","medium","high"].includes(e)&&(a.networkPriority=e)}const c=r.getParameters(),d=null===(i=c.encodings)||void 0===i?void 0:i[0];d&&Object.assign(d,a),Object.assign(c,s),await r.setParameters(c)}}catch(e){CE.debug("Apply RTPSendEncodings failed.")}}mungSendOfferSDP(e,t){const i=uO.exports.parse(e);return t.forEach((e,t)=>{const n=e._mediaStreamTrack,r=i.mediaDescriptions.find(e=>e.attributes.mid===n.kind);r&&SO(r,e)}),uO.exports.print(i)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=e=>{var t;null===(t=this.onFirstAudioReceived)||void 0===t||t.call(this,e)},this.statsFilter.onFirstVideoReceived=e=>{var t;null===(t=this.onFirstVideoReceived)||void 0===t||t.call(this,e)},this.statsFilter.onFirstAudioDecoded=e=>{var t;null===(t=this.onFirstAudioDecoded)||void 0===t||t.call(this,e)},this.statsFilter.onFirstVideoDecoded=(e,t,i)=>{var n;null===(n=this.onFirstVideoDecoded)||void 0===n||n.call(this,e,t,i)},this.statsFilter.onSelectedLocalCandidateChanged=(e,t)=>{var i;null===(i=this.onSelectedLocalCandidateChanged)||void 0===i||i.call(this,e,t)},this.statsFilter.onSelectedRemoteCandidateChanged=(e,t)=>{var i;null===(i=this.onSelectedRemoteCandidateChanged)||void 0===i||i.call(this,e,t)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0}async batchReceive(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.batchReceive before remoteSDP created.");const t=this.remoteSDP.batchSend(e).map((t,i)=>{let{id:n,mslabel:r}=t;const{kind:o}=e[i];return new Sl((e,t)=>{const i=setTimeout(()=>{t(new Error("Cannot receive track, id: ".concat(n)))},1e4),s=t=>{const a=Mh();if("Safari"===a.name&&11===Number(a.version)&&t.track.id!==n&&t.streams[0].id===r){var c;const r=t.streams[0].getTracks()[0];return null===(c=this.remoteSDP)||void 0===c||c.updateTrackLabel(o,n,t.track.id),this.peerConnection.removeEventListener("track",s),clearTimeout(i),void e({track:r,id:n})}if(t.track.id===n)return this.peerConnection.removeEventListener("track",s),clearTimeout(i),void e({track:t.track,id:n})};this.peerConnection.addEventListener("track",s)})}),i=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:i});const n=await this.peerConnection.createAnswer();return await this.peerConnection.setLocalDescription(n),await Sl.all(t)}catch(e){throw new EE(_E.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(e.toString()))}}async getRemoteSSRC(e){if(!this.remoteSDP)return;const t=this.remoteSDP.getSSRC(e);return null==t?void 0:t[0].ssrcId}setConfiguration(t){if(MS().supportPCSetConfiguration){const i=e.resolvePCConfiguration(t);this.peerConnection.setConfiguration(i)}}}).prototype,"connect",[$O],Object.getOwnPropertyDescriptor(XO.prototype,"connect"),XO.prototype),JT(XO.prototype,"stopSending",[$O],Object.getOwnPropertyDescriptor(XO.prototype,"stopSending"),XO.prototype),JT(XO.prototype,"receive",[$O],Object.getOwnPropertyDescriptor(XO.prototype,"receive"),XO.prototype),JT(XO.prototype,"stopReceiving",[$O],Object.getOwnPropertyDescriptor(XO.prototype,"stopReceiving"),XO.prototype),JT(XO.prototype,"muteRemote",[$O],Object.getOwnPropertyDescriptor(XO.prototype,"muteRemote"),XO.prototype),JT(XO.prototype,"unmuteRemote",[$O],Object.getOwnPropertyDescriptor(XO.prototype,"unmuteRemote"),XO.prototype),JT(XO.prototype,"muteLocal",[$O],Object.getOwnPropertyDescriptor(XO.prototype,"muteLocal"),XO.prototype),JT(XO.prototype,"unmuteLocal",[$O],Object.getOwnPropertyDescriptor(XO.prototype,"unmuteLocal"),XO.prototype),JT(XO.prototype,"close",[$O],Object.getOwnPropertyDescriptor(XO.prototype,"close"),XO.prototype),JT(XO.prototype,"updateEncoderConfig",[$O],Object.getOwnPropertyDescriptor(XO.prototype,"updateEncoderConfig"),XO.prototype),JT(XO.prototype,"updateSendParameters",[$O],Object.getOwnPropertyDescriptor(XO.prototype,"updateSendParameters"),XO.prototype),JT(XO.prototype,"replaceTrack",[$O],Object.getOwnPropertyDescriptor(XO.prototype,"replaceTrack"),XO.prototype),JT(XO.prototype,"getRemoteSSRC",[$O],Object.getOwnPropertyDescriptor(XO.prototype,"getRemoteSSRC"),XO.prototype),XO);function $O(e,t,i){const n=e[t];if("function"!=typeof n)throw new Error("Cannot use mutex on object property.");return i.value=async function(){const e=this.mutex,i=await e.lock("Locking from P2PConnection.".concat(t));try{for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return await n.apply(this,o)}finally{i()}},i}const eb="9",tb=4e4;class ib{get localCapabilities(){return BI(this._localCapabilities)}get rtpCapabilities(){return BI(this._rtpCapabilities)}get candidates(){return BI(this._candidates)}get iceParameters(){return BI(this._iceParameters)}get dtlsParameters(){return BI(this._dtlsParameters)}constructor(e){lp(this,"sessionDesc",void 0),lp(this,"_localCapabilities",void 0),lp(this,"_rtpCapabilities",void 0),lp(this,"_candidates",void 0),lp(this,"_iceParameters",void 0),lp(this,"_dtlsParameters",void 0),lp(this,"setup",void 0),lp(this,"currentMidIndex",void 0),lp(this,"cname",void 0),lp(this,"firefoxSsrcMidMap",new Map),e=BI(e);const{remoteIceParameters:t,remoteDtlsParameters:i,candidates:n,remoteRTPCapabilities:r,remoteSetup:o,localCapabilities:s,cname:a}=e,c=uO.exports.parse("v=0\no=- 0 0 IN IP4 127.0.0.1\ns=AgoraGateway\nt=0 0\na=group:BUNDLE 0 1\na=msid-semantic: WMS\na=ice-lite\nm=video 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendonly\na=rtcp-mux\na=rtcp-rsize\na=mid:0\nm=audio 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendonly\na=rtcp-mux\na=rtcp-rsize\na=mid:1\n");this._rtpCapabilities=r,this._candidates=n,this._iceParameters=t,this._dtlsParameters=i,this._localCapabilities=s,this.setup=o,this.cname=a;const d=this.rtpCapabilities.send;for(const e of c.mediaDescriptions){if(e.attributes.iceUfrag=t.iceUfrag,e.attributes.icePwd=t.icePwd,e.attributes.fingerprints=i.fingerprints,e.attributes.candidates=n,e.attributes.setup=o,"video"===e.media.mediaType&&(e.media.fmts=d.videoCodecs.map(e=>e.payloadType.toString(10)),e.attributes.payloads=d.videoCodecs,e.attributes.extmaps=d.videoExtensions,FE("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:t,ssrcGroups:i}=fO([{ssrcId:tb,rtx:FE("USE_RTX")?40001:void 0}],this.cname);e.attributes.ssrcs=t,e.attributes.ssrcGroups=i}if("audio"===e.media.mediaType&&(e.media.fmts=d.audioCodecs.map(e=>e.payloadType.toString(10)),e.attributes.payloads=d.audioCodecs,e.attributes.extmaps=d.audioExtensions,OO(e),FE("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:t,ssrcGroups:i}=fO([{ssrcId:2e4}],this.cname);e.attributes.ssrcs=t,e.attributes.ssrcGroups=i}}this.sessionDesc=c,this.currentMidIndex=c.mediaDescriptions.length-1}preloadRemoteMedia(){const e=FE("PRELOAD_MEDIA_COUNT");this.rtpCapabilities;const t=this.candidates,i=this.dtlsParameters,n=this.iceParameters,r=this.rtpCapabilities.send;for(let o=1;o<e;o++){const e=2*o+2e4,s=2*o+tb,{ssrcs:a,ssrcGroups:c}=fO([{ssrcId:e}],this.cname),{ssrcs:d,ssrcGroups:u}=fO([{ssrcId:s,rtx:FE("USE_RTX")?s+1:void 0}],this.cname);this.sessionDesc.mediaDescriptions.push({media:{mediaType:"video",port:eb,protos:["UDP","TLS","RTP","SAVPF"],fmts:r.videoCodecs.map(e=>e.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:n.iceUfrag,icePwd:n.icePwd,unrecognized:[],candidates:t,extmaps:r.videoExtensions,fingerprints:i.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:d,ssrcGroups:u,rtcpFeedbackWildcards:[],payloads:r.videoCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(2*o)}}),this.sessionDesc.mediaDescriptions.push({media:{mediaType:"audio",port:eb,protos:["UDP","TLS","RTP","SAVPF"],fmts:r.audioCodecs.map(e=>e.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:n.iceUfrag,icePwd:n.icePwd,unrecognized:[],candidates:t,extmaps:r.audioExtensions,fingerprints:i.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:a,ssrcGroups:c,rtcpFeedbackWildcards:[],payloads:r.audioCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(2*o+1)}}),this.currentMidIndex+=2}this.updateBundleMids()}toString(){return uO.exports.print(this.sessionDesc)}send(e,t,i,n){const{ssrcs:r,ssrcGroups:o}=fO(t,this.cname,FE("AV_SYNC")?i:void 0),s=this.findPreloadMediaDesc(r);if(s){if(Hh()&&this.firefoxSsrcMidMap.set(r[0].ssrcId,s.attributes.mid),n&&(n.twcc||n.remb)){const e=this.sessionDesc.mediaDescriptions.indexOf(s);return this.sessionDesc.mediaDescriptions[e]=this.mungSendMediaDesc(s,n),{mid:s.attributes.mid,needExchangeSDP:!0}}return{mid:s.attributes.mid,needExchangeSDP:!1}}{const t=this.findAvailableMediaIndex(e,r);let i;return-1===t||1===t&&(Wh()||Yh())||qh()?(i=this.createOrRecycleSendMedia(e,r,o,"sendonly",n),this.updateBundleMids()):(i=BI(this.sessionDesc.mediaDescriptions[t]),i.attributes.direction="sendonly",i.attributes.ssrcs=r,i.attributes.ssrcGroups=o,this.sessionDesc.mediaDescriptions[t]=this.mungSendMediaDesc(i,n)),Hh()&&this.firefoxSsrcMidMap.set(r[0].ssrcId,i.attributes.mid),{mid:i.attributes.mid,needExchangeSDP:!0}}}batchSend(e){const t=e.map(e=>{let{kind:t,ssrcMsg:i,mslabel:n}=e;return this.send(t,i,n)}),i=[];let n=!1;return t.forEach(e=>{let{mid:t,needExchangeSDP:r}=e;r&&(n=!0),i.push(t)}),{mids:i,needExchangeSDP:n}}stopSending(e){const t=this.sessionDesc.mediaDescriptions.filter(t=>t.attributes.mid&&-1!==e.indexOf(t.attributes.mid));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.stopSending.");t.forEach(e=>{"0"===e.attributes.mid||Hh()||qh()?e.attributes.ssrcs=[]:(e.attributes.ssrcs=[],e.attributes.direction="inactive",e.media.port="0")}),this.updateBundleMids()}mute(e){const t=this.sessionDesc.mediaDescriptions.find(t=>t.attributes.mid===e);if(!t)throw new Error("mediaDescription not found with ".concat(e," in remote SDP when calling RemoteSDP.mute."));t.attributes.direction="inactive"}unmute(e){const t=this.sessionDesc.mediaDescriptions.find(t=>t.attributes.mid===e);if(!t)throw new Error("mediaDescription not found with ".concat(e," in remote SDP when calling RemoteSDP.unmute."));t.attributes.direction="sendonly"}muteRemote(e){const t=this.sessionDesc.mediaDescriptions.filter(t=>e.includes(t.attributes.mid||""));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");t.forEach(e=>{e.attributes.direction="inactive"})}unmuteRemote(e){const t=this.sessionDesc.mediaDescriptions.filter(t=>e.includes(t.attributes.mid||""));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");t.forEach(e=>{e.attributes.direction="recvonly"})}receive(e,t,i,n){e.forEach((e,r)=>{this.createOrRecycleRecvMedia(e,[],"recvonly",t,i,n[r])}),this.updateBundleMids()}stopReceiving(e){const t=this.sessionDesc.mediaDescriptions.filter(t=>-1!==e.indexOf(t.attributes.mid));if(t.length!==e.length)throw new Error("MediaDescriptions' length doesn't match mids's length when calling RemoteSDP.receive.");t.forEach(e=>{e.media.port="0",e.attributes.direction="inactive"}),this.updateBundleMids()}restartICE(e){e=BI(e),this._iceParameters=e,this.sessionDesc.mediaDescriptions.forEach(t=>{t.attributes.iceUfrag=e.iceUfrag,t.attributes.icePwd=e.icePwd})}predictReceivingMids(e){const t=[];for(let i=0;i<e;i++)t.push((this.currentMidIndex+i+1).toString(10));return t}findAvailableMediaIndex(e,t){return this.sessionDesc.mediaDescriptions.findIndex(i=>{const n=i.media.mediaType===e&&"0"!==i.media.port&&("sendonly"===i.attributes.direction||"sendrecv"===i.attributes.direction)&&0===i.attributes.ssrcs.length;if(Hh()){if(n){const e=this.firefoxSsrcMidMap.get(t[0].ssrcId);return!(e||"0"!==i.attributes.mid&&"1"!==i.attributes.mid)||!(!e||e!==i.attributes.mid)}return!1}return n})}createOrRecycleRecvMedia(e,t,i,n,r,o){const s=e._mediaStreamTrack.kind,a=this.rtpCapabilities.recv,c=this.localCapabilities.send;let d=[];if(s===gS.VIDEO){var u,l;if(FE("H264_PROFILE_LEVEL_ID")&&"h264"===n&&(d=a.videoCodecs.filter(e=>{var t,i;return((null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())||"").includes(n)&&(null==e||null===(i=e.fmtp)||void 0===i?void 0:i.parameters["profile-level-id"])===FE("H264_PROFILE_LEVEL_ID")})),!d||0===(null===(u=d)||void 0===u?void 0:u.length)){const e=c.videoCodecs.filter(e=>{var t;return((null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())||"").includes(n)});0!==e.length&&(d=a.videoCodecs.filter(t=>e.some(e=>e.payloadType===t.payloadType)))}if(FE("USE_RTX")){const e=d.map(e=>e.payloadType.toString()),t=a.videoCodecs.filter(t=>{var i,n;return"rtx"===(null===(i=t.rtpMap)||void 0===i?void 0:i.encodingName)&&e.includes((null===(n=t.fmtp)||void 0===n?void 0:n.parameters.apt)||"")});d=[...d,...t]}if(0===d.length)CE.warning("codec ".concat(n," not included in rtpCapabilities, fallback to default payloads: ").concat(null===(l=a.videoCodecs[0].rtpMap)||void 0===l?void 0:l.encodingName)),d=a.videoCodecs}else d=a.audioCodecs.filter(e=>{var t;return((null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())||"").includes(r)}),0===d.length&&(CE.warning("codec ".concat(r," not included in rtpCapabilities, fallback to opus")),d=a.audioCodecs.filter(e=>{var t;return((null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())||"").includes("opus")}));const h=s===gS.VIDEO?a.videoExtensions:a.audioExtensions;this.currentMidIndex+=1;const p="".concat(this.currentMidIndex);let _={media:{mediaType:s,port:eb,protos:["UDP","TLS","RTP","SAVPF"],fmts:d.map(e=>e.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:h,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:t,ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:d,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:i,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(p)}};_=this.mungRecvMediaDsec(_,e,o);const E=this.findFirstClosedMedia(s);if(E){const e=this.sessionDesc.mediaDescriptions.indexOf(E);this.sessionDesc.mediaDescriptions[e]=_}else this.sessionDesc.mediaDescriptions.push(_);return _}createOrRecycleSendMedia(e,t,i,n,r){const o=this.rtpCapabilities.send,s=e===gS.VIDEO?o.videoCodecs:o.audioCodecs,a=e===gS.VIDEO?o.videoExtensions:o.audioExtensions;this.currentMidIndex+=1;const c="".concat(this.currentMidIndex);let d={media:{mediaType:e,port:eb,protos:["UDP","TLS","RTP","SAVPF"],fmts:s.map(e=>e.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:a,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:t,ssrcGroups:i,rtcpFeedbackWildcards:[],payloads:s,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:n,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(c)}};d=this.mungSendMediaDesc(d,r);const u=this.findFirstClosedMedia(e);if(u){const e=this.sessionDesc.mediaDescriptions.indexOf(u);this.sessionDesc.mediaDescriptions[e]=d}else this.sessionDesc.mediaDescriptions.push(d);return d}updateBundleMids(){this.sessionDesc.attributes.groups[0].identificationTag=this.sessionDesc.mediaDescriptions.filter(e=>"0"!==e.media.port).map(e=>e.attributes.mid)}mungRecvMediaDsec(e,t,i){const n=BI(e);return TO(n),SO(n,t),gO(n,t),RO(n),IO(n,i,this.localCapabilities.send),n}mungSendMediaDesc(e,t){const i=BI(e);return IO(i,t,this.localCapabilities.recv),OO(i),i}updateRecvMedia(e,t){const i=this.sessionDesc.mediaDescriptions.findIndex(t=>t.attributes.mid===e);if(-1!==i){const e=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[i],t);this.sessionDesc.mediaDescriptions[i]=e}}bumpMid(e){this.currentMidIndex+=e}findFirstClosedMedia(e){return this.sessionDesc.mediaDescriptions.find(t=>Hh()?"0"===t.media.port&&t.media.mediaType===e:"0"===t.media.port)}findPreloadMediaDesc(e){return this.sessionDesc.mediaDescriptions.find(t=>{var i,n;return(null===(i=t.attributes)||void 0===i||null===(n=i.ssrcs[0])||void 0===n?void 0:n.ssrcId)===e[0].ssrcId})}getSSRC(e){var t;return null===(t=this.sessionDesc.mediaDescriptions.find(t=>t.attributes.mid===e))||void 0===t?void 0:t.attributes.ssrcs}}var nb;function rb(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function ob(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?rb(Object(i),!0).forEach((function(t){lp(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):rb(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}let sb=(JT((nb=class e extends LS{get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}constructor(t,i){super(t,i),lp(this,"store",void 0),lp(this,"peerConnection",void 0),lp(this,"remoteSDP",void 0),lp(this,"initialOffer",void 0),lp(this,"transportEventReceiver",void 0),lp(this,"statsFilter",void 0),lp(this,"useRTX",FE("USE_RTX")),lp(this,"localCapabilities",void 0),lp(this,"localCandidateCount",0),lp(this,"allCandidatesReceived",!1),lp(this,"establishPromise",void 0),lp(this,"mutex",new vg("P2PConnection-mutex")),this.store=i,this.peerConnection=new RTCPeerConnection(e.resolvePCConfiguration(t),{optional:[{googDscp:!0}]}),this.statsFilter=JO(this.peerConnection,void 0,void 0,Hh()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1,this.establishPromise=this.establish()}async establish(){try{this.peerConnection.addTransceiver("video",{direction:"recvonly"}),this.peerConnection.addTransceiver("audio",{direction:"recvonly"});const e=await this.peerConnection.createOffer();if(!e.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");const t=_O(e.sdp),i=await CO(!this.useRTX,FE("FILTER_VIDEO_FEC"),FE("FILTER_AUDIO_FEC"));return this.localCapabilities=AO(i),this.initialOffer=e,ob(ob({},t),{},{rtpCapabilities:i,offerSDP:e.sdp})}catch(e){throw new EE(_E.GET_LOCAL_CONNECTION_PARAMS_FAILED,e.toString())}}async connect(e,t,i,n,r,o){try{if(!this.initialOffer)throw new Error("Cannot establish P2PConnection without initial offer.");this.remoteSDP=new ib({remoteIceParameters:e,remoteDtlsParameters:t,candidates:i,remoteRTPCapabilities:n,remoteSetup:r,localCapabilities:this.localCapabilities,cname:o});const s=this.remoteSDP.toString(),a=uO.exports.parse(this.initialOffer.sdp),c=a.mediaDescriptions.find(e=>"audio"===e.media.mediaType);c&&OO(c);const d=uO.exports.print(a),u=this.logSDPExchange(d||"","offer","local","connect");await this.peerConnection.setLocalDescription({type:"offer",sdp:d}),null==u||u(s),await this.peerConnection.setRemoteDescription({type:"answer",sdp:s});const l=this.peerConnection.getTransceivers()[0];if(null!=l&&l.receiver&&this.tryBindTransportEvents(l.receiver),FE("PRELOAD_MEDIA_COUNT")>0){this.remoteSDP.preloadRemoteMedia();const e=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:e});const t=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(t)}}catch(e){throw new EE(_E.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(e.toString()))}}send(e,t,i){var n=this;return oO((function*(){const r=yield sO(n.mutex.lock("From P2PConnection.send"));try{if(!n.remoteSDP)throw new Error("Cannot call P2PConnection.send before remote SDP created");const o=[];e.forEach(e=>{const t=n.peerConnection.addTransceiver(e._mediaStreamTrack,{direction:"sendonly"});o.push(t)}),Hh()&&!0===FE("SIMULCAST")&&(yield sO(n.applySimulcastForFirefox(o,e)));const s=yield sO(n.peerConnection.createOffer()),a=n.remoteSDP.predictReceivingMids(e.length),c=n.mungSendOfferSDP(s.sdp,e,a),d=uO.exports.parse(c),u=a.map(e=>{const t=d.mediaDescriptions.find(t=>t.attributes.mid===e);if(!t)throw new Error("Cannot extract ssrc from mediaDescription.");return EO(t,n.useRTX)});let l;try{l=yield u}catch(r){l=[],n.remoteSDP.receive(e,t,i,l);const o=n.remoteSDP.toString();throw yield sO(n.peerConnection.setLocalDescription({type:"offer",sdp:c})),yield sO(n.peerConnection.setRemoteDescription({type:"answer",sdp:o})),yield sO(n.stopSending(a,!0)),r}n.remoteSDP.receive(e,t,i,l);const h=n.remoteSDP.toString(),p=n.logSDPExchange(c,"offer","local","send");return yield sO(n.peerConnection.setLocalDescription({type:"offer",sdp:c})),yield sO(n.applySimulcastEncodings(o,e)),yield sO(n.applySendEncodings(o,e)),null==p||p(h),yield sO(n.peerConnection.setRemoteDescription({type:"answer",sdp:h})),o.map((e,t)=>{const i=a[t];return{localSSRC:u[t],id:i,transceiver:e}})}catch(e){throw e instanceof EE?e:new EE(_E.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(e.toString()))}finally{r()}}))()}async stopSending(e,t){const i=t?void 0:await this.mutex.lock("From P2PConnection.stopSending");try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");const t=this.peerConnection.getTransceivers().filter(t=>-1!==e.indexOf(t.mid));if(t.length!==e.length)throw new Error("Transceivers' length doesn't match mids' length when trying to call P2PConnection.stopSending.");t.map(e=>{var t;e.direction="inactive",null===(t=e.stop)||void 0===t||t.call(e)});const n=await this.peerConnection.createOffer(),r=this.logSDPExchange(n.sdp||"","offer","local","stopSending");await this.peerConnection.setLocalDescription(n),this.remoteSDP.stopReceiving(e);const o=this.remoteSDP.toString();null==r||r(o),await this.peerConnection.setRemoteDescription({type:"answer",sdp:o})}catch(e){throw new EE(_E.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(e.toString()))}finally{i&&i()}}async receive(e,t,i,n){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(e," before remoteSDP created."));const{mid:r,needExchangeSDP:o}=this.remoteSDP.send(e,t,i,n);if(o){const t=this.remoteSDP.toString(),i=this.logSDPExchange(t,"offer","remote","receive");await this.peerConnection.setRemoteDescription({type:"offer",sdp:t});const n=await this.peerConnection.createAnswer(),o=this.mungReceiveAnswerSDP(n.sdp,r,e);null==i||i(o||""),await this.peerConnection.setLocalDescription({type:"answer",sdp:o}),CE.debug("[P2PConnection] receive ".concat(e," by exchanging SDP."))}else CE.debug("[P2PConnection] receive ".concat(e," no need to exchange SDP."));const s=this.peerConnection.getTransceivers().find(e=>e.mid===r);if(!s)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:s.receiver.track,id:r}}catch(e){throw new EE(_E.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(e.toString()))}}async batchReceive(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.batchReceive before remoteSDP created.");const{mids:t,needExchangeSDP:i}=this.remoteSDP.batchSend(e);if(i){const e=this.remoteSDP.toString(),t=this.logSDPExchange(e,"offer","remote","receive");await this.peerConnection.setRemoteDescription({type:"offer",sdp:e});const i=await this.peerConnection.createAnswer();null==t||t(i.sdp||""),await this.peerConnection.setLocalDescription(i),CE.debug("[P2PConnection] batchReceive by exchanging SDP.")}else CE.debug("[P2PConnection] batchReceive no need to exchange SDP.");return t.map(e=>{const t=this.peerConnection.getTransceivers().find(t=>t.mid===e);if(!t)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:t.receiver.track,id:e}})}catch(e){throw new EE(_E.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(e.toString()))}}async stopReceiving(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");this.remoteSDP.stopSending(e);const t=this.remoteSDP.toString(),i=this.logSDPExchange(t,"offer","remote","stopReceiving");await this.peerConnection.setRemoteDescription({type:"offer",sdp:t});const n=await this.peerConnection.createAnswer();null==i||i(n.sdp||""),await this.peerConnection.setLocalDescription(n)}catch(e){throw new EE(_E.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(e.toString()))}}async muteRemote(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteRemote mid=".concat(e," before remote SDP created."));this.remoteSDP.mute(e);const t=this.remoteSDP.toString(),i=this.logSDPExchange(t,"offer","remote","muteRemote");await this.peerConnection.setRemoteDescription({type:"offer",sdp:t});const n=await this.peerConnection.createAnswer();null==i||i(n.sdp||""),await this.peerConnection.setLocalDescription(n)}catch(e){throw new EE(_E.EXCHANGE_SDP_FAILED,"P2PConnection.muteRemote failed; ".concat(e.toString()))}}async unmuteRemote(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteRemote mid=".concat(e," before remote SDP created."));this.remoteSDP.unmute(e);const t=this.remoteSDP.toString(),i=this.logSDPExchange(t,"offer","remote","unmuteRemote");await this.peerConnection.setRemoteDescription({type:"offer",sdp:t});const n=await this.peerConnection.createAnswer();null==i||i(n.sdp||""),await this.peerConnection.setLocalDescription(n)}catch(e){throw new EE(_E.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteRemote failed; ".concat(e.toString()))}}async muteLocal(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");const t=this.peerConnection.getTransceivers().filter(t=>t.mid&&-1!==e.indexOf(t.mid));if(t.length!==e.length)throw new Error("Transceivers' length doesn't match mids' length.");t.map(e=>{e.direction="inactive"});const i=await this.peerConnection.createOffer(),n=this.logSDPExchange(i.sdp||"","offer","local","muteLocal");await this.peerConnection.setLocalDescription(i),this.remoteSDP.muteRemote(e);const r=this.remoteSDP.toString();null==n||n(r),await this.peerConnection.setRemoteDescription({type:"answer",sdp:r})}catch(e){throw new EE(_E.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat(e.toString()))}}async unmuteLocal(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");const t=this.peerConnection.getTransceivers().filter(t=>t.mid&&-1!==e.indexOf(t.mid));if(t.length!==e.length)throw new Error("Transceivers' length doesn't match mids' length.");t.map(async(e,t)=>{e.direction="sendonly"});const i=await this.peerConnection.createOffer(),n=this.logSDPExchange(i.sdp||"","offer","local","unmuteLocal");await this.peerConnection.setLocalDescription(i),this.remoteSDP.unmuteRemote(e);const r=this.remoteSDP.toString();null==n||n(r),await this.peerConnection.setRemoteDescription({type:"answer",sdp:r})}catch(e){throw new EE(_E.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat(e.toString()))}}restartICE(){var e=this;return oO((function*(){const t=yield sO(e.mutex.lock("From P2PConnection.restartICE"));try{const i=yield sO(e.peerConnection.createOffer({iceRestart:!0}));if(!i.sdp)throw new Error("Cannot restartICE because restart offer SDP does not exist.");const n=_O(i.sdp),{remoteIceParameters:r}=yield n.iceParameters;if(!e.remoteSDP)throw new Error("Cannot restartICE before remoteSDP created.");e.remoteSDP.restartICE(r);const o=e.remoteSDP.toString(),s=e.logSDPExchange(i.sdp||"","offer","local","restartICE");yield sO(e.peerConnection.setLocalDescription(i)),null==s||s(o),yield sO(e.peerConnection.setRemoteDescription({type:"answer",sdp:o}))}catch(e){CE.warning("restart ICE failed, abort operation",e)}finally{t()}}))()}close(){var e;this.peerConnection.close(),null===(e=this.onConnectionStateChange)||void 0===e||e.call(this,"closed"),this.tryUnbindTransportEvents(),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.transportEventReceiver=void 0,this.statsFilter.destroy()}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(e){return this.statsFilter.getVideoIsReady(e)}async updateEncoderConfig(e,t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");const i=await this.peerConnection.createOffer(),n=this.mungSendOfferSDP(i.sdp,[t],[e]);this.remoteSDP.updateRecvMedia(e,t);const r=this.remoteSDP.toString(),o=this.logSDPExchange(n,"offer","local","updateEncoderConfig");await this.peerConnection.setLocalDescription({type:"offer",sdp:n}),null==o||o(r),await this.peerConnection.setRemoteDescription({type:"answer",sdp:r})}catch(e){throw new EE(_E.EXCHANGE_SDP_FAILED,e.toString())}}async updateSendParameters(e,t){const i=this.peerConnection.getTransceivers().filter(t=>t.mid===e);1===i.length&&(this.isVP8Simulcast(t)?Hh()||await this.applySimulcastEncodings(i,[t]):await this.applySendEncodings(i,[t]))}setStatsRemoteVideoIsReady(e,t){this.statsFilter.setVideoIsReady2(e,t)}async replaceTrack(e,t){const i=this.peerConnection.getTransceivers().find(e=>e.mid===t);i&&await i.sender.replaceTrack(e._mediaStreamTrack)}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var e;null===(e=this.onICEConnectionStateChange)||void 0===e||e.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var e;null===(e=this.onConnectionStateChange)||void 0===e||e.call(this,this.peerConnection.connectionState)},this.peerConnection.onicecandidate=e=>{e.candidate?this.localCandidateCount+=1:(this.peerConnection.onicecandidate=null,this.allCandidatesReceived=!0,CE.debug("[pc-".concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount))},setTimeout(()=>{this.allCandidatesReceived||(this.allCandidatesReceived=!0,CE.debug("[pc-".concat(this.store.p2pId,"] onicecandidate timeout, local candidate count"),this.localCandidateCount))},FE("CANDIDATE_TIMEOUT"))}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(t){const i={iceServers:[]};return t.iceServers?i.iceServers=t.iceServers:t.turnServer&&"off"!==t.turnServer.mode&&(Pf(t.turnServer.servers)?i.iceServers=t.turnServer.servers:(i.iceServers&&i.iceServers.push(...e.turnServerConfigToIceServers(t.turnServer.servers)),FE("USE_TURN_SERVER_OF_GATEWAY")&&i.iceServers&&t.turnServer.serversFromGateway&&i.iceServers.push(...e.turnServerConfigToIceServers(t.turnServer.serversFromGateway)),FE("FORCE_TURN_TCP")?i.iceTransportPolicy="relay":t.turnServer.servers.concat(t.turnServer.serversFromGateway||[]).forEach(e=>{e.forceturn&&(i.iceTransportPolicy="relay")}))),i}static turnServerConfigToIceServers(e){const t=[];return e.forEach(e=>{e.security?e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turns:".concat(_I(e.turnServerURL),":").concat(e.tcpport,"?transport=tcp")}):(e.udpport&&!FE("FORCE_TURN_TCP")&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turn:".concat(e.turnServerURL,":").concat(e.udpport,"?transport=udp")}),e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turn:".concat(e.turnServerURL,":").concat(e.tcpport,"?transport=tcp")}))}),t}tryBindTransportEvents(e){e.transport&&(this.transportEventReceiver=e,e.transport.onstatechange=()=>{var t,i;null!==(t=e.transport)&&void 0!==t&&t.state&&(null===(i=this.onDTLSTransportStateChange)||void 0===i||i.call(this,e.transport.state))},e.transport.onerror=e=>{var t;null===(t=this.onDTLSTransportError)||void 0===t||t.call(this,e.error)},e.transport.iceTransport&&(e.transport.iceTransport.onstatechange=()=>{var t,i,n;null!==(t=e.transport)&&void 0!==t&&t.iceTransport.state&&(null===(i=this.onICETransportStateChange)||void 0===i||i.call(this,null===(n=e.transport)||void 0===n?void 0:n.iceTransport.state))}))}tryUnbindTransportEvents(){this.transportEventReceiver&&this.transportEventReceiver.transport&&(this.transportEventReceiver.transport.onstatechange=null,this.transportEventReceiver.transport.onerror=null,this.transportEventReceiver.transport.iceTransport&&(this.transportEventReceiver.transport.iceTransport.onstatechange=null))}async applySendEncodings(e,t){try{if(!MS().supportSetRtpSenderParameters)return;if(e.length!==t.length)return;for(let c=0;c<e.length;c++){const d=e[c],u=t[c];if(u&&u instanceof QC){var i,n;if(this.isVP8Simulcast(u))continue;const e={},t={};switch(u._optimizationMode){case"motion":e.degradationPreference="maintain-framerate";break;case"detail":e.degradationPreference="maintain-resolution";break;default:e.degradationPreference="balanced"}var r,o,s,a;if(null!==(i=u._encoderConfig)&&void 0!==i&&i.bitrateMax)t.maxBitrate=1e3*(null===(r=u._encoderConfig)||void 0===r?void 0:r.bitrateMax);if(u._hints.includes(aS.LOW_STREAM))null!==(o=u._encoderConfig)&&void 0!==o&&o.frameRate&&(t.maxFramerate=mI(u._encoderConfig.frameRate)),null!==(s=u._encoderConfig)&&void 0!==s&&s.scaleResolutionDownBy&&(null===(a=u._encoderConfig)||void 0===a?void 0:a.scaleResolutionDownBy)>1&&(t.scaleResolutionDownBy=u._encoderConfig.scaleResolutionDownBy);if(FE("DSCP_TYPE")&&tp()){const e=FE("DSCP_TYPE");["very-low","low","medium","high"].includes(e)&&(t.networkPriority=e)}const c=d.sender.getParameters(),l=null===(n=c.encodings)||void 0===n?void 0:n[0];Hh()&&!l&&(e.encodings=[t]),l&&Object.assign(l,t),Object.assign(c,e),await d.sender.setParameters(c)}}}catch(e){CE.debug("Apply RTPSendEncodings failed.")}}mungSendOfferSDP(e,t,i){const n=uO.exports.parse(e);return t.forEach((e,t)=>{const r=i[t],o=n.mediaDescriptions.find(e=>e.attributes.mid===r);o&&(SO(o,e),vO(o,e,this.store.codec))}),uO.exports.print(n)}mungReceiveAnswerSDP(e,t,i){const n=uO.exports.parse(e),r=n.mediaDescriptions.find(e=>e.attributes.mid===t);return r&&i===gS.AUDIO&&"audio"===r.media.mediaType&&OO(r),uO.exports.print(n)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=e=>{var t;null===(t=this.onFirstAudioReceived)||void 0===t||t.call(this,e)},this.statsFilter.onFirstVideoReceived=e=>{var t;null===(t=this.onFirstVideoReceived)||void 0===t||t.call(this,e)},this.statsFilter.onFirstAudioDecoded=e=>{var t;null===(t=this.onFirstAudioDecoded)||void 0===t||t.call(this,e)},this.statsFilter.onFirstVideoDecoded=(e,t,i)=>{var n;null===(n=this.onFirstVideoDecoded)||void 0===n||n.call(this,e,t,i)},this.statsFilter.onSelectedLocalCandidateChanged=(e,t)=>{var i;null===(i=this.onSelectedLocalCandidateChanged)||void 0===i||i.call(this,e,t)},this.statsFilter.onSelectedRemoteCandidateChanged=(e,t)=>{var i;null===(i=this.onSelectedRemoteCandidateChanged)||void 0===i||i.call(this,e,t)},this.statsFilter.onFirstVideoDecodedTimeout=e=>{var t;null===(t=this.onFirstVideoDecodedTimeout)||void 0===t||t.call(this,e)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0,this.statsFilter.onFirstVideoDecodedTimeout=void 0}async applySimulcastForFirefox(e,t){if(e.length===t.length)for(let s=0;s<e.length;s++){var i,n,r,o;const a=e[s],c=t[s];if(c instanceof QC&&!c._hints.includes(aS.LOW_STREAM)&&null!==(i=c._encoderConfig)&&void 0!==i&&i.bitrateMax&&(null===(n=c._encoderConfig)||void 0===n?void 0:n.bitrateMax)>200&&null!==(r=c._scalabiltyMode)&&void 0!==r&&r.numSpatialLayers&&(null===(o=c._scalabiltyMode)||void 0===o?void 0:o.numSpatialLayers)>1&&"vp8"===this.store.codec){const e={},t={high:1e3*(c._encoderConfig.bitrateMax-50),medium:5e4};e.encodings=[{rid:"m",active:!0,maxBitrate:t.medium,scaleResolutionDownBy:4},{rid:"h",active:!0,maxBitrate:t.high}];const i=a.sender.getParameters();await a.sender.setParameters(Object.assign(i,e))}}}async applySimulcastEncodings(e,t){if(!Hh()&&e.length===t.length)for(let i=0;i<e.length;i++){const n=t[i];if(n instanceof QC&&this.isVP8Simulcast(n)){const t=e[i],r={},o={high:1e3*(n._encoderConfig.bitrateMax-50),medium:5e4};r.encodings=[{active:!0,adaptivePtime:!1,networkPriority:"high",priority:"high",maxBitrate:o.high},{active:!0,adaptivePtime:!1,networkPriority:"low",priority:"low",maxBitrate:o.medium,scaleResolutionDownBy:4}];const s=t.sender.getParameters();await t.sender.setParameters(Object.assign(s,r))}}}isVP8Simulcast(e){var t,i,n,r;return!!(e instanceof QC&&FE("SIMULCAST")&&"vp8"===this.store.codec&&!e._hints.includes(aS.LOW_STREAM)&&null!==(t=e._encoderConfig)&&void 0!==t&&t.bitrateMax&&(null===(i=e._encoderConfig)||void 0===i?void 0:i.bitrateMax)>200&&null!==(n=e._scalabiltyMode)&&void 0!==n&&n.numSpatialLayers&&(null===(r=e._scalabiltyMode)||void 0===r?void 0:r.numSpatialLayers)>1)}logSDPExchange(e,t,i,n){if(FE("SDP_LOGGING"))return CE.upload("exchanging ".concat(i," ").concat(t," SDP during P2PConnection.").concat(n,"\n"),e),"offer"===t?e=>{this.logSDPExchange(e,"answer","local"===i?"remote":"local",n)}:void 0}async getRemoteSSRC(e){if(!this.remoteSDP)return;const t=this.remoteSDP.getSSRC(e);return null==t?void 0:t[0].ssrcId}setConfiguration(t){if(MS().supportPCSetConfiguration){const i=e.resolvePCConfiguration(t);this.peerConnection.setConfiguration(i)}}}).prototype,"connect",[ab],Object.getOwnPropertyDescriptor(nb.prototype,"connect"),nb.prototype),JT(nb.prototype,"receive",[ab],Object.getOwnPropertyDescriptor(nb.prototype,"receive"),nb.prototype),JT(nb.prototype,"batchReceive",[ab],Object.getOwnPropertyDescriptor(nb.prototype,"batchReceive"),nb.prototype),JT(nb.prototype,"stopReceiving",[ab],Object.getOwnPropertyDescriptor(nb.prototype,"stopReceiving"),nb.prototype),JT(nb.prototype,"muteRemote",[ab],Object.getOwnPropertyDescriptor(nb.prototype,"muteRemote"),nb.prototype),JT(nb.prototype,"unmuteRemote",[ab],Object.getOwnPropertyDescriptor(nb.prototype,"unmuteRemote"),nb.prototype),JT(nb.prototype,"muteLocal",[ab],Object.getOwnPropertyDescriptor(nb.prototype,"muteLocal"),nb.prototype),JT(nb.prototype,"unmuteLocal",[ab],Object.getOwnPropertyDescriptor(nb.prototype,"unmuteLocal"),nb.prototype),JT(nb.prototype,"close",[ab],Object.getOwnPropertyDescriptor(nb.prototype,"close"),nb.prototype),JT(nb.prototype,"updateEncoderConfig",[ab],Object.getOwnPropertyDescriptor(nb.prototype,"updateEncoderConfig"),nb.prototype),JT(nb.prototype,"updateSendParameters",[ab],Object.getOwnPropertyDescriptor(nb.prototype,"updateSendParameters"),nb.prototype),JT(nb.prototype,"replaceTrack",[ab],Object.getOwnPropertyDescriptor(nb.prototype,"replaceTrack"),nb.prototype),JT(nb.prototype,"getRemoteSSRC",[ab],Object.getOwnPropertyDescriptor(nb.prototype,"getRemoteSSRC"),nb.prototype),nb);function ab(e,t,i){const n=e[t];if("function"!=typeof n)throw new Error("Cannot use mutex on object property.");return i.value=async function(){const e=this.mutex,i=await e.lock("From P2PConnection.".concat(t));try{for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return await n.apply(this,o)}finally{i()}},i}function cb(e,t){let i=document.createElement("video"),n=document.createElement("canvas");i.setAttribute("style","display:none"),n.setAttribute("style","display:none"),i.setAttribute("muted",""),i.muted=!0,i.setAttribute("autoplay",""),i.autoplay=!0,i.setAttribute("playsinline",""),n.width=mI(t.width),n.height=mI(t.height);const r=mI(t.framerate||15);document.body.append(i),document.body.append(n);let o=e._mediaStreamTrack;i.srcObject=new MediaStream([o]),i.play();const s=n.getContext("2d");if(!s)throw new EE(_E.UNEXPECTED_ERROR,"can not get canvas context");const a=MS(),c=n.captureStream(a.supportRequestFrame?0:r).getVideoTracks()[0],d=kg(()=>(()=>{if(i.paused&&i.play(),i.videoHeight>2&&i.videoWidth>2){const e=i.videoWidth,t=i.videoHeight/e,r=n.width*t;Math.abs(r-n.height)>=2&&(CE.debug("adjust low stream resolution","".concat(n.width,"x").concat(n.height," -> ").concat(n.width,"x").concat(r)),n.height=r)}s.drawImage(i,0,0,n.width,n.height),c.requestFrame&&c.requestFrame(),o!==e._mediaStreamTrack&&(o=e._mediaStreamTrack,i.srcObject=new MediaStream([o]))})(),r),u=c.stop;return c.stop=()=>{u.call(c),d(),i&&(i.remove(),i=null),n&&(n.width=0,n.remove(),n=null),CE.debug("clean low stream renderer")},c}var db,ub,lb,hb,pb,_b,Eb,mb,fb,Sb,Tb,gb;function Rb(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function Ib(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Rb(Object(i),!0).forEach((function(t){lp(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Rb(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}class vb extends gg{getUserId(){return this._userId}constructor(e,t,i,n){super(e,"track-".concat(e.kind,"-").concat(t,"-").concat(n.clientId,"_").concat(wI(5,""))),lp(this,"_userId",void 0),lp(this,"_uintId",void 0),lp(this,"_isDestroyed",!1),lp(this,"store",void 0),lp(this,"processor",void 0),lp(this,"processorContext",void 0),this._userId=t,this._uintId=i,this.store=n}_updateOriginMediaStreamTrack(e){this._originMediaStreamTrack=e,this._mediaStreamTrack=e,this._updatePlayerSource(),this.processor&&this.processor.updateInput({track:this._originMediaStreamTrack,context:this.processorContext})}_destroy(){this._isDestroyed=!0,CE.info("[".concat(this.getTrackId(),"] is destroyed")),this.stop(),super.close()}getProcessorStats(){return this.processorContext.gatherStats()}getProcessorUsage(){return this.processorContext.gatherUsage()}}let Cb=(db=Sg({argsMap:(e,t,i)=>[e.getTrackId(),"string"==typeof t?t:"HTMLElement",i]}),ub=Sg({argsMap:e=>[e.getTrackId()]}),lb=Sg({argsMap:(e,t)=>[e.getTrackId(),t.name]}),hb=Sg({argsMap:e=>[e.getTrackId()]}),JT((pb=class extends vb{get isPlaying(){return!(!this._player||this._player.videoElementStatus!==tf.PLAYING)}get __className__(){return"RemoteVideoTrack"}constructor(e,t,i,n){super(e,t,i,n),lp(this,"_videoVisibleTimer",null),lp(this,"_previousVideoVisibleStatus",void 0),lp(this,"_clearPreviousVideoVisibleStatus",()=>this._previousVideoVisibleStatus=void 0),lp(this,"trackMediaType","video"),lp(this,"_videoWidth",void 0),lp(this,"_videoHeight",void 0),lp(this,"_player",void 0),lp(this,"processorDestination",void 0),lp(this,"processorContext",void 0),this.updateMediaStreamTrackResolution(),this.processorContext=new JR(this.getTrackId(),"remote"),this.processorDestination=new qR(this.processorContext),this.bindProcessorDestinationEvents()}getStats(){WI(()=>{CE.warning("[deprecated] RemoteVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteVideoStats instead")},"remoteVideoTrackGetStatsWarning");return UI(this,sS.GET_STATS)||Ib({},Ff)}play(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"==typeof e){const t=document.getElementById(e);t?e=t:(CE.warning("[".concat(this.getTrackId(),'] can not find "#').concat(e,'" element, use document.body')),e=document.body)}CE.debug("[".concat(this.getTrackId(),"] start video playback"),JSON.stringify(t));const i=Ib(Ib({fit:"cover"},t),{},{trackId:this.getTrackId(),element:e});this._player?this._player.updateConfig(i):(this._player=new dC(i),this._player.updateVideoTrack(this._mediaStreamTrack),this._player.onFirstVideoFrameDecoded=()=>{this.store.subscribe(this.getUserId(),"video",void 0,void 0,Date.now()),this.emit(lS.FIRST_FRAME_DECODED)}),this._player.play(this.store.sessionId||void 0),this._videoVisibleTimer&&window.clearInterval(this._videoVisibleTimer),this._clearPreviousVideoVisibleStatus(),this._videoVisibleTimer=window.setInterval(()=>{try{const e=this.getVideoElementVisibleStatus();this.emit(lS.VIDEO_ELEMENT_VISIBLE_STATUS,e)}catch(e){}},FE("CHECK_VIDEO_VISIBLE_INTERVAL"))}stop(){this._player&&(this._videoVisibleTimer&&(window.clearInterval(this._videoVisibleTimer),this._videoVisibleTimer=null),this._clearPreviousVideoVisibleStatus(),this._player.destroy(),this._player=void 0,CE.debug("[".concat(this.getTrackId(),"] stop video playback")))}getCurrentFrameData(){return this._player?this._player.getCurrentFrame():new ImageData(2,2)}updateMediaStreamTrackResolution(){PI(this._originMediaStreamTrack).then(e=>{let[t,i]=e;this._videoHeight=i,this._videoWidth=t}).catch(DI)}_updatePlayerSource(){CE.debug("[".concat(this.getTrackId(),"] update player source track")),this._player&&this._player.updateVideoTrack(this._mediaStreamTrack)}getVideoElementVisibleStatus(){try{var e,t;const i=null==this||null===(e=this._player)||void 0===e?void 0:e.getContainerElement(),n={track:this,element:null==this||null===(t=this._player)||void 0===t?void 0:t.getVideoElement(),slot:null==i?void 0:i.parentElement},{element:r,slot:o}=n;if(this.isPlaying&&r instanceof HTMLVideoElement&&o instanceof HTMLElement){const e=JC.checkOneElementVisible(r),t=Object.assign({},e);if(t.visible!==this._previousVideoVisibleStatus){this._previousVideoVisibleStatus=t.visible;const e=Tg.reportApiInvoke(null,{tag:lf.TRACER,name:uf.REMOTE_VIDEO_TRACK_GET_VIDEO_VISIBLE,options:[this.getTrackId()]});t.visible?e.onSuccess("Video is visible"):e.onSuccess("Invisible because of ".concat(t.reason))}return t}return}catch(e){throw new EE(_E.GET_VIDEO_ELEMENT_VISIBLE_ERROR,e.message)}}pipe(e){if(this.processor===e)return e;if(e._source)throw new EE(_E.INVALID_OPERATION,"Processor ".concat(e.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=e,this.processor._source=this,e.updateInput({track:this._originMediaStreamTrack,context:this.processorContext}),e}unpipe(){if(!this.processor)return;const e=this.processor;this.processor._source=void 0,this.processor=void 0,e.reset()}bindProcessorDestinationEvents(){this.processorDestination.on(AS.ON_TRACK,async e=>{e?e!==this._mediaStreamTrack&&(this._mediaStreamTrack=e,this._updatePlayerSource()):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource())})}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(AS.ON_TRACK)}_destroy(){super._destroy(),this.unbindProcessorDestinationEvents()}}).prototype,"play",[db],Object.getOwnPropertyDescriptor(pb.prototype,"play"),pb.prototype),JT(pb.prototype,"stop",[ub],Object.getOwnPropertyDescriptor(pb.prototype,"stop"),pb.prototype),JT(pb.prototype,"pipe",[lb],Object.getOwnPropertyDescriptor(pb.prototype,"pipe"),pb.prototype),JT(pb.prototype,"unpipe",[hb],Object.getOwnPropertyDescriptor(pb.prototype,"unpipe"),pb.prototype),pb),yb=(_b=Sg({argsMap:(e,t)=>[e.getTrackId(),t],throttleTime:300}),Eb=Sg({argsMap:(e,t)=>[e.getTrackId(),t]}),mb=Sg({argsMap:e=>[e.getTrackId()]}),fb=Sg({argsMap:e=>[e.getTrackId()]}),Sb=Sg({argsMap:(e,t)=>[e.getTrackId(),t.name]}),Tb=Sg({argsMap:e=>[e.getTrackId()]}),JT((gb=class extends vb{get isPlaying(){return this._useAudioElement?Zg.isPlaying(this.getTrackId()):this._source.isPlayed}get __className__(){return"RemoteAudioTrack"}constructor(e,t,i,n){super(e,t,i,n),lp(this,"trackMediaType","audio"),lp(this,"_source",void 0),lp(this,"_useAudioElement",!0),lp(this,"_volume",100),lp(this,"processorContext",void 0),lp(this,"processorDestination",void 0),lp(this,"_played",!1),lp(this,"_bypassWebAudio",!1),FE("DISABLE_WEBAUDIO")?(this._source=new QR,this._bypassWebAudio=!0,this._useAudioElement=!0):(this._source=new xg(e,!0),FE("REMOTE_AUDIO_TRACK_USES_WEB_AUDIO")&&(this._useAudioElement=!1)),this._source.once(wf.RECEIVE_TRACK_BUFFER,()=>{this.emit(lS.FIRST_FRAME_DECODED)}),this.processorContext=new zR(this._source.context,this.getTrackId(),"remote"),this.processorDestination=new XR(this.processorContext),this.bindProcessorDestinationEvents(),this._source.on(wf.UPDATE_SOURCE,()=>{this.processor&&this.processor.updateInput({node:this._source.processSourceNode,context:this.processorContext})})}setAudioFrameCallback(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4096;if(!e)return this._source.removeAllListeners(wf.ON_AUDIO_BUFFER),void this._source.stopGetAudioBuffer();this._source.startGetAudioBuffer(t),this._source.removeAllListeners(wf.ON_AUDIO_BUFFER),this._source.on(wf.ON_AUDIO_BUFFER,t=>e(t))}setVolume(e){this._volume=e,this._useAudioElement?Zg.setVolume(this.getTrackId(),e):this._source.setVolume(e/100)}async setPlaybackDevice(e){if(!this._useAudioElement)throw new EE(_E.NOT_SUPPORTED,"your browser does not support setting the audio output device");await Zg.setSinkID(this.getTrackId(),e)}getVolumeLevel(){return this._source.getAccurateVolumeLevel()}getStats(){WI(()=>{CE.warning("[deprecated] RemoteAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteAudioStats instead")},"remoteAudioTrackGetStatsWarning");return UI(this,sS.GET_STATS)||Ib({},xf)}play(){CE.debug("[".concat(this.getTrackId(),"] start audio playback")),this._played=!0,this._useAudioElement?(CE.debug("[".concat(this.getTrackId(),"] use audio element to play")),Zg.play(this._mediaStreamTrack,this.getTrackId(),this._volume,this.store.sessionId||void 0)):this._source.play()}stop(){CE.debug("[".concat(this.getTrackId(),"] stop audio playback")),this._played=!1,this._useAudioElement?Zg.stop(this.getTrackId()):this._source.stop()}_destroy(){super._destroy(),this._played=!1,this.unbindProcessorDestinationEvents(),this._source.destroy()}_isFreeze(){return this._source.isFreeze}_updatePlayerSource(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];CE.debug("[".concat(this.getTrackId(),"] update player source track")),e&&this._source.updateTrack(this._mediaStreamTrack),this._useAudioElement&&Zg.updateTrack(this.getTrackId(),this._mediaStreamTrack)}pipe(e){if(this._bypassWebAudio)throw new EE(_E.NOT_SUPPORTED,"can not pipe extension when WebAudio disabled");if(this.processor===e)return e;if(e._source)throw new EE(_E.INVALID_OPERATION,"Processor ".concat(e.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=e,this.processor._source=this,e.updateInput({track:this._originMediaStreamTrack,node:this._source.processSourceNode,context:this.processorContext}),e}unpipe(){var e;if(this._bypassWebAudio)throw new EE(_E.NOT_SUPPORTED,"can not unpipe extension when WebAudio disabled");if(!this.processor)return;const t=this.processor;null===(e=this._source.processSourceNode)||void 0===e||e.disconnect(),this.processor._source=!1,this.processor=void 0,t.reset()}bindProcessorDestinationEvents(){this.processorDestination.on(AS.ON_TRACK,async e=>{e?e!==this._mediaStreamTrack&&(this._mediaStreamTrack=e,this._updatePlayerSource(!1),this._source.processedNode=this._source.createMediaStreamSourceNode(e)):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource())}),this.processorDestination.on(AS.ON_NODE,e=>{this._source.processedNode=e;const t=!e;this._useAudioElement!==t&&(this._played?(this.stop(),this._useAudioElement=t,this.play()):this._useAudioElement=t)})}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(AS.ON_TRACK),this.processorDestination.removeAllListeners(AS.ON_NODE)}}).prototype,"setVolume",[_b],Object.getOwnPropertyDescriptor(gb.prototype,"setVolume"),gb.prototype),JT(gb.prototype,"setPlaybackDevice",[Eb],Object.getOwnPropertyDescriptor(gb.prototype,"setPlaybackDevice"),gb.prototype),JT(gb.prototype,"play",[mb],Object.getOwnPropertyDescriptor(gb.prototype,"play"),gb.prototype),JT(gb.prototype,"stop",[fb],Object.getOwnPropertyDescriptor(gb.prototype,"stop"),gb.prototype),JT(gb.prototype,"pipe",[Sb],Object.getOwnPropertyDescriptor(gb.prototype,"pipe"),gb.prototype),JT(gb.prototype,"unpipe",[Tb],Object.getOwnPropertyDescriptor(gb.prototype,"unpipe"),gb.prototype),gb);function Ab(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function Ob(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Ab(Object(i),!0).forEach((function(t){lp(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Ab(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}class bb extends hE{constructor(){super(),lp(this,"uplinkStatsUploadInterval",void 0),lp(this,"uplinkStatsUploadSlowInterval",void 0),lp(this,"uplinkRelatedStatsUploadInterval",void 0),lp(this,"uplinkDenoiserStatsUploadInterval",void 0),lp(this,"transportStatsUploadInterval",void 0),lp(this,"uplinkExtensionStatsUploadInterval",void 0),lp(this,"downlinkExtensionStatsUploadInterval",void 0),lp(this,"extensionUsageStatsUploadInterval",void 0),lp(this,"downlinkStatsUploadInterval",void 0),lp(this,"downlinkStatsUploadSlowInterval",void 0),lp(this,"downlinkRelatedStatsUploadInterval",void 0),lp(this,"lastStats",void 0),lp(this,"uploadUnplinkStarted",!1),lp(this,"uploadDownlinkStarted",!1),lp(this,"uploadTransportStarted",!1),lp(this,"uploadExtensionUsageStarted",!1),lp(this,"requestStats",void 0),lp(this,"requestLocalMedia",void 0),lp(this,"requestRemoteMedia",void 0),lp(this,"requestAllTracks",void 0),lp(this,"requestVideoIsReady",void 0),lp(this,"requestUpload",void 0)}startUploadTransportStats(){this.uploadTransportStarted||(this.uploadTransportStarted=!0,this.transportStatsUploadInterval&&window.clearInterval(this.transportStatsUploadInterval),this.transportStatsUploadInterval=window.setInterval(()=>{var e;const t=null===(e=this.requestStats)||void 0===e?void 0:e.call(this);t&&this.uploadTransportStats(t)},6e3))}startUploadExtensionUsageStats(){if(this.uploadExtensionUsageStarted)return;this.uploadExtensionUsageStarted=!0,this.extensionUsageStatsUploadInterval&&window.clearInterval(this.extensionUsageStatsUploadInterval);const e=new Map;this.extensionUsageStatsUploadInterval=window.setInterval(async()=>{var t,i,n;const r=Date.now(),o={connectionInterval:FE("EXTENSION_USAGE_UPLOAD_INTERVAL")/1e3,details:[],lts:r};let s=[];const a=(null===(t=this.requestAllTracks)||void 0===t?void 0:t.call(this))||[];for(const e of a)!e.muted&&e.enabled&&(s=s.concat(await e.getProcessorUsage()));const c=(null===(i=this.requestRemoteMedia)||void 0===i?void 0:i.call(this))||[];for(const[e,t]of c)t.has(gS.VIDEO)&&e.videoTrack&&(s=s.concat(await e.videoTrack.getProcessorUsage())),t.has(gS.AUDIO)&&e.audioTrack&&(s=s.concat(await e.audioTrack.getProcessorUsage()));if(0===s.length)return;o.details=function(e,t){const i={};for(const{id:s,value:a,level:c,direction:d}of e){var n;const e=null!==(n=t.get(s))&&void 0!==n?n:0,u=2===a?e+FE("EXTENSION_USAGE_UPLOAD_INTERVAL")/1e3:e;var r,o;t.set(s,u),i[s]?(2===a&&(i[s].value=a),c>i[s].level&&(i[s].level=c),"remote"===d&&(i[s].remoteUidCount+=1),i[s].totalTs=null!==(r=t.get(s))&&void 0!==r?r:0):i[s]={value:a,level:c,remoteUidCount:"local"===d?0:1,totalTs:null!==(o=t.get(s))&&void 0!==o?o:0}}return Object.keys(i).map(e=>{const{level:t,value:n,totalTs:r}=i[e];return{id:e,level:t,value:n,totalTs:r}})}(s,e);const d=Date.now(),u=d>r?d:r+1;null===(n=this.requestUpload)||void 0===n||n.call(this,Af.EXTENSION_USAGE_STATS,{usageStats:o,sendTs:u})},FE("EXTENSION_USAGE_UPLOAD_INTERVAL"))}startUploadUplinkStats(){this.uploadUnplinkStarted||(this.uploadUnplinkStarted=!0,this.uplinkStatsUploadInterval&&window.clearInterval(this.uplinkStatsUploadInterval),this.uplinkStatsUploadInterval=window.setInterval(()=>{var e;const t=null===(e=this.requestStats)||void 0===e?void 0:e.call(this);t&&(this.uploadUplinkStats(t),this.lastStats=t)},3e3),this.uplinkStatsUploadSlowInterval&&window.clearInterval(this.uplinkStatsUploadSlowInterval),this.uplinkStatsUploadSlowInterval=window.setInterval(()=>{var e;const t=null===(e=this.requestStats)||void 0===e?void 0:e.call(this);t&&this.uploadSlowUplinkStats(t)},6e4),this.uplinkRelatedStatsUploadInterval&&window.clearInterval(this.uplinkRelatedStatsUploadInterval),this.uplinkRelatedStatsUploadInterval=window.setInterval(()=>{var e;const t=null===(e=this.requestStats)||void 0===e?void 0:e.call(this);t&&this.uploadRelatedUplinkStats(t,this.lastStats),this.lastStats=t},1e3),this.uplinkDenoiserStatsUploadInterval&&window.clearInterval(this.uplinkDenoiserStatsUploadInterval),this.uplinkDenoiserStatsUploadInterval=window.setInterval(()=>{var e;const t=null===(e=this.requestAllTracks)||void 0===e?void 0:e.call(this);t&&this.uploadDenoiserStats(t)},2e3),this.uplinkExtensionStatsUploadInterval&&window.clearInterval(this.uplinkExtensionStatsUploadInterval),this.uplinkExtensionStatsUploadInterval=window.setInterval(()=>{var e;const t=null===(e=this.requestAllTracks)||void 0===e?void 0:e.call(this);t&&this.uploadExtensionStats(t)},2e3))}uploadTransportStats(e){jI(()=>{var t;null===(t=this.requestUpload)||void 0===t||t.call(this,Af.TRANSPORT_STATS,function(e){const t={connectionType:100};if("relay"===e.selectedCandidatePair.localCandidate.candidateType){const i=e.selectedCandidatePair.localCandidate.relayProtocol;"udp"===i&&(t.connectionType=101),"tcp"===i&&(t.connectionType=103),"tls"===i&&(t.connectionType=104)}return t}(e))})}uploadUplinkStats(e){var t;((null===(t=this.requestLocalMedia)||void 0===t?void 0:t.call(this))||[]).forEach(t=>{let[i,{track:n,ssrcs:r}]=t;switch(i){case RS.LocalVideoLowTrack:case RS.LocalVideoTrack:{const t=function(e,t,i){var n;const r=t.videoSend.find(t=>t.ssrc===e);if(!r)return null;const o={id:wI(10,""),timestamp:new Date(t.timestamp).toISOString(),mediaType:"video",type:"ssrc",ssrc:r.ssrc.toString()};switch(o.A_vstd=i._originMediaStreamTrack&&!i._originMediaStreamTrack.enabled||i._mediaStreamTrack&&!i._mediaStreamTrack.enabled?"1":"0",r.sentFrame&&(o.A_fhs=r.sentFrame.height.toString(),o.A_frs=r.sentFrame.frameRate.toString(),o.A_fws=r.sentFrame.width.toString()),r.adaptionChangeReason){case"none":o.A_ac="0";break;case"cpu":o.A_ac="1";break;case"bandwidth":o.A_ac="2";break;case"other":o.A_ac="3"}return o.A_lvps=nf[i._player?i._player.videoElementStatus:"uninit"].toString(),o.A_nr=null===(n=r.nacksCount)||void 0===n?void 0:n.toString(),r.avgEncodeMs&&(o.A_aem=r.avgEncodeMs.toFixed(0).toString()),o}(r[0].ssrcId,e,n),o=i===RS.LocalVideoTrack?SI(r[0].ssrcId,e,n):null;t&&jI(()=>{var e;return null===(e=this.requestUpload)||void 0===e?void 0:e.call(this,Af.PUBLISH_STATS,{stream_type:i===RS.LocalVideoLowTrack?"low":"high",stats:Ob(Ob({},t),o)})});const s=function(e){const t={id:"bweforvideo",timestamp:new Date(e.timestamp).toISOString(),type:"VideoBwe"};return e.bitrate.retransmit&&(t.A_rb=e.bitrate.retransmit.toString()),e.bitrate.targetEncoded&&(t.A_teb=e.bitrate.targetEncoded.toString()),t.A_aeb=e.bitrate.actualEncoded.toString(),t.A_tb=e.bitrate.transmit.toString(),void 0!==e.sendBandwidth&&(t.A_asb=e.sendBandwidth.toString()),t}(e);s&&setTimeout(()=>{var e;return null===(e=this.requestUpload)||void 0===e?void 0:e.call(this,Af.PUBLISH_STATS,{stream_type:i===RS.LocalVideoLowTrack?"low":"high",stats:s})},1e3);break}case RS.LocalAudioTrack:{const t=function(e,t,i){const n=t.audioSend.find(t=>t.ssrc===e);if(!n)return null;const r={id:wI(10,""),timestamp:new Date(t.timestamp).toISOString(),mediaType:"audio",type:"ssrc",ssrc:n.ssrc.toString()};return r.A_astd=i._originMediaStreamTrack.enabled&&i._mediaStreamTrack.enabled?"0":"1",n.inputLevel?r.A_ail=Math.round(100*n.inputLevel).toString():r.A_ail=Math.round(100*i._source.getAccurateVolumeLevel()).toString(),r.A_apil=Math.round(100*i._source.getAccurateVolumeLevel()).toString(),n.aecReturnLoss&&(r.A_ecrl=Math.round(n.aecReturnLoss).toString()),n.aecReturnLossEnhancement&&(r.A_ecrle=Math.round(n.aecReturnLossEnhancement).toString()),r}(r[0].ssrcId,e,n);t&&jI(()=>{var e;return null===(e=this.requestUpload)||void 0===e?void 0:e.call(this,Af.PUBLISH_STATS,{stream_type:"high",stats:t})});break}}})}uploadSlowUplinkStats(e){var t;((null===(t=this.requestLocalMedia)||void 0===t?void 0:t.call(this))||[]).filter(e=>{let[t]=e;return t===RS.LocalVideoLowTrack||t===RS.LocalVideoTrack}).forEach(t=>{let[i,{ssrcs:n}]=t;const r=SI(n[0].ssrcId,e);r&&jI(()=>{var e;return null===(e=this.requestUpload)||void 0===e?void 0:e.call(this,Af.PUBLISH_STATS,{stream_type:i===RS.LocalVideoLowTrack?"low":"high",stats:r})})})}uploadRelatedUplinkStats(e,t){var i;((null===(i=this.requestLocalMedia)||void 0===i?void 0:i.call(this))||[]).filter(e=>{let[t]=e;return t===RS.LocalVideoLowTrack||t===RS.LocalVideoTrack}).forEach(t=>{let[i,{ssrcs:n}]=t;const r=function(e,t){const i=t.videoSend.find(t=>t.ssrc===e);return i?{mediaType:"video",isVideoMute:!1,frameRateInput:i.inputFrame&&i.inputFrame.frameRate.toString(),frameRateSent:i.sentFrame&&i.sentFrame.frameRate.toString(),googRtt:i.rttMs.toString(),qpSumPerFrame:Math.floor(i.qpSumPerFrame).toString()}:null}(n[0].ssrcId,e);r&&jI(()=>{var e;null===(e=this.requestUpload)||void 0===e||e.call(this,Af.PUBLISH_RELATED_STATS,{stream_type:i===RS.LocalVideoLowTrack?"low":"high",stats:r})})})}uploadDenoiserStats(e){for(let r=0;r<e.length;r++){const o=e[r];if(o instanceof iI){var t,i,n;const e=null===(t=(i=o._external).getDenoiserStats)||void 0===t?void 0:t.call(i);return void(e&&(null===(n=this.requestUpload)||void 0===n||n.call(this,Af.DENOISER_STATS,e)))}}}uploadExtensionStats(e){for(let t=0;t<e.length;t++){e[t].getProcessorStats().forEach(e=>{var t;null===(t=this.requestUpload)||void 0===t||t.call(this,e.type,e.stats)})}}stopUploadUplinkStats(){this.uploadUnplinkStarted&&(this.uploadUnplinkStarted=!1,this.uplinkStatsUploadInterval&&window.clearInterval(this.uplinkStatsUploadInterval),this.uplinkRelatedStatsUploadInterval&&window.clearInterval(this.uplinkRelatedStatsUploadInterval),this.uplinkDenoiserStatsUploadInterval&&window.clearInterval(this.uplinkDenoiserStatsUploadInterval),this.uplinkStatsUploadInterval=void 0,this.uplinkRelatedStatsUploadInterval=void 0,this.uplinkDenoiserStatsUploadInterval=void 0)}startUploadDownlinkStats(){if(this.uploadDownlinkStarted)return;let e;this.uploadDownlinkStarted=!0,this.downlinkStatsUploadInterval&&window.clearInterval(this.downlinkStatsUploadInterval);let t=!1;this.downlinkStatsUploadInterval=window.setInterval(()=>{var i;const n=null===(i=this.requestStats)||void 0===i?void 0:i.call(this);n&&(this.uploadDownlinkStats(n,t,e),e=n),t=!t},3e3),this.downlinkStatsUploadSlowInterval&&window.clearInterval(this.downlinkStatsUploadSlowInterval),this.downlinkStatsUploadSlowInterval=window.setInterval(()=>{var e;const t=null===(e=this.requestStats)||void 0===e?void 0:e.call(this);t&&this.uploadSlowDownlinkStats(t)},6e4),this.downlinkRelatedStatsUploadInterval&&window.clearInterval(this.downlinkRelatedStatsUploadInterval),this.downlinkRelatedStatsUploadInterval=window.setInterval(()=>{var e;const t=null===(e=this.requestStats)||void 0===e?void 0:e.call(this);t&&(this.uploadRelatedDownlinkStats(t,this.lastStats),this.lastStats=t)},1e3),this.downlinkExtensionStatsUploadInterval&&window.clearInterval(this.downlinkExtensionStatsUploadInterval),this.downlinkExtensionStatsUploadInterval=window.setInterval(()=>{var e;const t=null===(e=this.requestRemoteMedia)||void 0===e?void 0:e.call(this);t&&this.uploadDownlinkExtensionStats(t)},2e3)}uploadDownlinkStats(e,t,i){var n;((null===(n=this.requestRemoteMedia)||void 0===n?void 0:n.call(this))||[]).forEach(n=>{let[r,o]=n;if(o.has(gS.VIDEO)&&r.videoTrack){const n=r.videoTrack?function(e,t,i,n,r){const o=t.videoRecv.find(t=>t.ssrc===e);if(!o)return null;const s={id:wI(10,""),timestamp:new Date(t.timestamp).toISOString(),mediaType:"video",type:"ssrc",ssrc:o.ssrc.toString()};var a,c;if(s.bytesReceived=o.bytes.toString(),s.packetsLost=o.packetsLost.toString(),s.packetsReceived=o.packets.toString(),o.framesRateFirefox&&(s.A_frr=o.framesRateFirefox.toString()),o.receivedFrame?(s.A_frr=o.receivedFrame.frameRate.toString(),s.A_fhr=o.receivedFrame.height.toString(),s.A_fwr=o.receivedFrame.width.toString()):(s.A_fhr=null===(a=n._videoHeight)||void 0===a?void 0:a.toString(),s.A_fwr=null===(c=n._videoWidth)||void 0===c?void 0:c.toString()),s.A_frd=o.decodeFrameRate.toString(),o.outputFrame&&(s.A_fro=o.outputFrame.frameRate.toString()),void 0!==o.jitterBufferMs&&(s.A_jbm=Math.floor(o.jitterBufferMs).toString()),void 0!==o.currentDelayMs&&(s.A_cdm=Math.floor(o.currentDelayMs).toString()),s.A_fs=o.firsCount.toString(),s.A_ns=o.nacksCount.toString(),s.A_ps=o.plisCount.toString(),n&&(s.A_vrtd=n._originMediaStreamTrack.enabled&&n._mediaStreamTrack.enabled?"0":"1"),n._player&&n._player.freezeTimeCounterList.length>0&&(s.A_vrft=Math.round(n._player.freezeTimeCounterList.splice(0,1)[0]).toString()),r&&n._player&&"visible"===lI.visibility){const e=Math.min(6e3,n._player.renderFreezeAccTime);s.A_vrrft=Math.round(e).toString(),n._player.renderFreezeAccTime=Math.max(0,n._player.renderFreezeAccTime-e)}if(s.A_rvps=nf[n._player?n._player.videoElementStatus:"uninit"].toString(),i){const t=i.videoRecv.find(t=>t.ssrc===e);if(t&&void 0!==o.totalInterFrameDelay&&void 0!==o.totalSquaredInterFrameDelay&&void 0!==t.totalInterFrameDelay&&void 0!==t.totalSquaredInterFrameDelay){const e=o.totalInterFrameDelay-t.totalInterFrameDelay,i=o.totalSquaredInterFrameDelay-t.totalSquaredInterFrameDelay,n=o.framesDecodeCount-t.framesDecodeCount,r=e/n*1e3,a=Math.round(1e3*Math.sqrt((i-Math.pow(e,2)/n)/n));!isNaN(a)&&r+a>Math.max(3*r,r+150)&&(s.A_ifdsd=a.toString())}}return s}(r._videoSSRC,e,i,r.videoTrack,t):void 0;n&&jI(()=>{var e;return null===(e=this.requestUpload)||void 0===e?void 0:e.call(this,Af.SUBSCRIBE_STATS,{stream_id:r.uid,stats:n})})}if(o.has(gS.AUDIO)&&r.audioTrack){const t=r.audioTrack?function(e,t,i,n){const r=t.audioRecv.find(t=>t.ssrc===e);if(!r)return null;const o={id:wI(10,""),timestamp:new Date(t.timestamp).toISOString(),mediaType:"audio",type:"ssrc",ssrc:r.ssrc.toString()};if(o.bytesReceived=r.bytes.toString(),o.packetsLost=r.packetsLost.toString(),o.packetsReceived=r.packets.toString(),r.outputLevel?o.A_aol=Math.round(100*r.outputLevel).toString():o.A_aol=Math.round(100*n._source.getAccurateVolumeLevel()).toString(),o.A_apol=Math.round(100*n._source.getAccurateVolumeLevel()).toString(),n&&(o.A_artd=n._originMediaStreamTrack.enabled&&n._mediaStreamTrack.enabled?"0":"1"),o.A_jr=r.jitterMs.toString(),o.A_jbm=Math.floor(r.jitterBufferMs).toString(),o.A_cdm=Math.floor(r.jitterBufferMs).toString(),o.A_raps=nf[Zg.getPlayerState(n.getTrackId())].toString(),i){const t=i.audioRecv.find(t=>t.ssrc===e);if(t){const e=r.concealedSamples-t.concealedSamples;e>0&&(o.A_cs=Math.round(e).toString())}}return o}(r._audioSSRC,e,i,r.audioTrack):void 0;t&&jI(()=>{var e;return null===(e=this.requestUpload)||void 0===e?void 0:e.call(this,Af.SUBSCRIBE_STATS,{stream_id:r.uid,stats:t})})}})}uploadSlowDownlinkStats(e){}uploadRelatedDownlinkStats(e,t){var i;((null===(i=this.requestRemoteMedia)||void 0===i?void 0:i.call(this))||[]).forEach(i=>{let[n,r]=i;if(r.has(gS.VIDEO)&&n.videoTrack){var o;const i=!0===(n._videoSSRC&&(null===(o=this.requestVideoIsReady)||void 0===o?void 0:o.call(this,n._videoSSRC))||!1),r=function(e,t,i,n,r,o){const s=i.videoRecv.find(t=>t.ssrc===e),a=r?r.videoRecv.find(t=>t.ssrc===e):void 0;if(!s)return null;const c=uI.isRemoteVideoFreeze(o,s,a)&&t,d={mediaType:"video",isVideoMute:!1,peerId:n,frameRateReceived:s.receivedFrame&&s.receivedFrame.frameRate.toString(),frameRateDecoded:s.decodedFrame&&s.decodedFrame.frameRate.toString(),isFreeze:c,bytesReceived:s.bytes.toString(),packetsReceived:s.packets.toString(),packetsLost:s.packetsLost.toString(),qpSumPerFrame:Math.floor(s.qpSumPerFrame).toString()};return s.framesRateFirefox&&(d.frameRateDecoded=s.framesRateFirefox.toString(),d.frameRateReceived=s.framesRateFirefox.toString()),d}(n._videoSSRC,i,e,n.uid,t,n.videoTrack);r&&jI(()=>{var e;null===(e=this.requestUpload)||void 0===e||e.call(this,Af.SUBSCRIBE_RELATED_STATS,{stream_id:n.uid,stats:r})})}if(r.has(gS.AUDIO)&&n.audioTrack){const t=function(e,t,i,n){const r=t.audioRecv.find(t=>t.ssrc===e);if(!r)return null;const o=uI.isRemoteAudioFreeze(n);return{mediaType:"audio",isAudioMute:!1,peerId:i,googJitterReceived:r.jitterMs.toString(),isFreeze:o,bytesReceived:r.bytes.toString(),packetsReceived:r.packets.toString(),packetsLost:r.packetsLost.toString(),frameReceived:r.receivedFrames.toString(),frameDropped:r.droppedFrames.toString()}}(n._audioSSRC,e,n.uid,n.audioTrack);t&&jI(()=>{var e;null===(e=this.requestUpload)||void 0===e||e.call(this,Af.SUBSCRIBE_RELATED_STATS,{stream_id:n.uid,stats:t})})}})}stopUploadDownlinkStats(){this.uploadDownlinkStarted&&(this.uploadDownlinkStarted=!1,this.downlinkStatsUploadInterval&&window.clearInterval(this.downlinkStatsUploadInterval),this.downlinkRelatedStatsUploadInterval&&window.clearInterval(this.downlinkRelatedStatsUploadInterval),this.downlinkStatsUploadInterval=void 0,this.downlinkRelatedStatsUploadInterval=void 0)}stopUploadTransportStats(){this.uploadTransportStarted&&(this.uploadTransportStarted=!1,this.transportStatsUploadInterval&&window.clearInterval(this.transportStatsUploadInterval),this.transportStatsUploadInterval=void 0)}stopUploadExtensionUsageStats(){this.uploadExtensionUsageStarted&&(this.uploadExtensionUsageStarted=!1,this.extensionUsageStatsUploadInterval&&window.clearInterval(this.extensionUsageStatsUploadInterval),this.extensionUsageStatsUploadInterval=void 0)}uploadDownlinkExtensionStats(e){e.forEach(e=>{let[t,i]=e;if(i.has(gS.VIDEO)&&t.videoTrack){t.videoTrack.getProcessorStats().forEach(e=>{var t;null===(t=this.requestUpload)||void 0===t||t.call(this,e.type,e.stats)})}if(i.has(gS.AUDIO)&&t.audioTrack){t.audioTrack.getProcessorStats().forEach(e=>{var t;null===(t=this.requestUpload)||void 0===t||t.call(this,e.type,e.stats)})}})}}const wb="v=0\no=- 0 0 IN IP4 127.0.0.1\ns=AgoraGateway\nt=0 0\na=group:BUNDLE 0\na=msid-semantic: WMS\na=ice-lite\nm=application 9 UDP/DTLS/SCTP webrtc-datachannel\nc=IN IP4 127.0.0.1\na=mid:0\n",Nb="9",Db=2e4,Pb=4e4;class Lb{get localCapabilities(){return BI(this._localCapabilities)}get rtpCapabilities(){return BI(this._rtpCapabilities)}get candidates(){return BI(this._candidates)}get iceParameters(){return BI(this._iceParameters)}get dtlsParameters(){return BI(this._dtlsParameters)}constructor(e){lp(this,"sessionDesc",void 0),lp(this,"_localCapabilities",void 0),lp(this,"_rtpCapabilities",void 0),lp(this,"_candidates",void 0),lp(this,"_iceParameters",void 0),lp(this,"_dtlsParameters",void 0),lp(this,"setup",void 0),lp(this,"currentMidIndex",void 0),lp(this,"cname",void 0),lp(this,"firefoxSsrcMidMap",new Map),e=BI(e);const{remoteIceParameters:t,remoteDtlsParameters:i,candidates:n,remoteRTPCapabilities:r,remoteSetup:o,localCapabilities:s,cname:a}=e,c=uO.exports.parse(wb);this._rtpCapabilities=r,this._candidates=n,this._iceParameters=t,this._dtlsParameters=i,this._localCapabilities=s,this.setup=o,this.cname=a;const d=this.rtpCapabilities.send;for(const e of c.mediaDescriptions){if(e.attributes.iceUfrag=t.iceUfrag,e.attributes.icePwd=t.icePwd,e.attributes.fingerprints=i.fingerprints,e.attributes.candidates=n,e.attributes.setup=o,"application"===e.media.mediaType&&(e.attributes.sctpPort="5000"),"video"===e.media.mediaType&&(e.media.fmts=d.videoCodecs.map(e=>e.payloadType.toString(10)),e.attributes.payloads=d.videoCodecs,e.attributes.extmaps=d.videoExtensions,FE("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:t,ssrcGroups:i}=fO([{ssrcId:Pb,rtx:FE("USE_RTX")?40001:void 0}],this.cname);e.attributes.ssrcs=t,e.attributes.ssrcGroups=i}if("audio"===e.media.mediaType&&(e.media.fmts=d.audioCodecs.map(e=>e.payloadType.toString(10)),e.attributes.payloads=d.audioCodecs,e.attributes.extmaps=d.audioExtensions,OO(e),FE("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:t,ssrcGroups:i}=fO([{ssrcId:Db}],this.cname);e.attributes.ssrcs=t,e.attributes.ssrcGroups=i}}this.sessionDesc=c,this.currentMidIndex=c.mediaDescriptions.length-1}updateRemoteRTPCapabilities(e){const t=uO.exports.parse(wb);this._rtpCapabilities=e;const i=this.rtpCapabilities.send;for(const e of t.mediaDescriptions){if(e.attributes.iceUfrag=this._iceParameters.iceUfrag,e.attributes.icePwd=this._iceParameters.icePwd,e.attributes.fingerprints=this._dtlsParameters.fingerprints,e.attributes.candidates=this._candidates,e.attributes.setup=this.setup,"application"===e.media.mediaType&&(e.attributes.sctpPort="5000"),"video"===e.media.mediaType&&(e.media.fmts=i.videoCodecs.map(e=>e.payloadType.toString(10)),e.attributes.payloads=i.videoCodecs,e.attributes.extmaps=i.videoExtensions,FE("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:t,ssrcGroups:i}=fO([{ssrcId:Pb,rtx:FE("USE_RTX")?40001:void 0}],this.cname);e.attributes.ssrcs=t,e.attributes.ssrcGroups=i}if("audio"===e.media.mediaType&&(e.media.fmts=i.audioCodecs.map(e=>e.payloadType.toString(10)),e.attributes.payloads=i.audioCodecs,e.attributes.extmaps=i.audioExtensions,FE("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:t,ssrcGroups:i}=fO([{ssrcId:Db}],this.cname);e.attributes.ssrcs=t,e.attributes.ssrcGroups=i}}this.sessionDesc=t,this.currentMidIndex=t.mediaDescriptions.length-1}preloadRemoteMedia(e){this.rtpCapabilities;const t=this.candidates,i=this.dtlsParameters,n=this.iceParameters,r=this.rtpCapabilities.send;for(let o=1;o<e;o++){const e=2*o+Db,s=2*o+Pb,{ssrcs:a,ssrcGroups:c}=fO([{ssrcId:e}],this.cname),{ssrcs:d,ssrcGroups:u}=fO([{ssrcId:s,rtx:FE("USE_RTX")?s+1:void 0}],this.cname);this.sessionDesc.mediaDescriptions.push({media:{mediaType:"video",port:Nb,protos:["UDP","TLS","RTP","SAVPF"],fmts:r.videoCodecs.map(e=>e.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:n.iceUfrag,icePwd:n.icePwd,unrecognized:[],candidates:t,extmaps:r.videoExtensions,fingerprints:i.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:d,ssrcGroups:u,rtcpFeedbackWildcards:[],payloads:r.videoCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(2*o-1)}}),this.sessionDesc.mediaDescriptions.push({media:{mediaType:"audio",port:Nb,protos:["UDP","TLS","RTP","SAVPF"],fmts:r.audioCodecs.map(e=>e.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:n.iceUfrag,icePwd:n.icePwd,unrecognized:[],candidates:t,extmaps:r.audioExtensions,fingerprints:i.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:a,ssrcGroups:c,rtcpFeedbackWildcards:[],payloads:r.audioCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(2*o)}}),this.currentMidIndex+=2}this.updateBundleMids()}toString(){return uO.exports.print(this.sessionDesc)}send(e,t,i,n){const{ssrcs:r,ssrcGroups:o}=fO(t,this.cname,FE("AV_SYNC")?i:void 0),s=this.findPreloadMediaDesc(r);if(s){if(Hh()&&this.firefoxSsrcMidMap.set(r[0].ssrcId,s.attributes.mid),n&&(n.twcc||n.remb)){const e=this.sessionDesc.mediaDescriptions.indexOf(s);return this.sessionDesc.mediaDescriptions[e]=this.mungSendMediaDesc(s,n),{mid:s.attributes.mid,needExchangeSDP:!0}}return{mid:s.attributes.mid,needExchangeSDP:!1}}{const t=this.findAvailableMediaIndex(e,r);let i;return-1===t||Wh()||Kh()||Yh()?(i=this.createOrRecycleSendMedia(e,r,o,"sendonly",n),this.updateBundleMids()):(i=BI(this.sessionDesc.mediaDescriptions[t]),i.attributes.direction="sendonly",i.attributes.ssrcs=r,i.attributes.ssrcGroups=o,this.sessionDesc.mediaDescriptions[t]=this.mungSendMediaDesc(i,n)),Hh()&&this.firefoxSsrcMidMap.set(r[0].ssrcId,i.attributes.mid),{mid:i.attributes.mid,needExchangeSDP:!0}}}batchSend(e){const t=e.map(e=>{let{kind:t,ssrcMsg:i,mslabel:n}=e;return this.send(t,i,n)}),i=[];let n=!1;return t.forEach(e=>{let{mid:t,needExchangeSDP:r}=e;r&&(n=!0),i.push(t)}),{mids:i,needExchangeSDP:n}}stopSending(e){const t=this.sessionDesc.mediaDescriptions.filter(t=>t.attributes.mid&&-1!==e.indexOf(t.attributes.mid));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.stopSending.");t.forEach(e=>{"0"===e.attributes.mid||Hh()||Wh()||Kh()?e.attributes.ssrcs=[]:(e.attributes.ssrcs=[],e.attributes.direction="inactive",e.media.port="0")}),this.updateBundleMids()}mute(e){const t=this.sessionDesc.mediaDescriptions.find(t=>t.attributes.mid===e);if(!t)throw new Error("mediaDescription not found with ".concat(e," in remote SDP when calling RemoteSDP.mute."));t.attributes.direction="inactive"}unmute(e){const t=this.sessionDesc.mediaDescriptions.find(t=>t.attributes.mid===e);if(!t)throw new Error("mediaDescription not found with ".concat(e," in remote SDP when calling RemoteSDP.unmute."));t.attributes.direction="sendonly"}muteRemote(e){const t=this.sessionDesc.mediaDescriptions.filter(t=>e.includes(t.attributes.mid||""));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");t.forEach(e=>{e.attributes.direction="inactive"})}unmuteRemote(e){const t=this.sessionDesc.mediaDescriptions.filter(t=>e.includes(t.attributes.mid||""));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");t.forEach(e=>{e.attributes.direction="recvonly"})}receive(e,t,i,n){e.forEach((e,r)=>{this.createOrRecycleRecvMedia(e,[],"recvonly",t,i,n[r])}),this.updateBundleMids()}stopReceiving(e){const t=this.sessionDesc.mediaDescriptions.filter(t=>-1!==e.indexOf(t.attributes.mid));if(t.length!==e.length)throw new Error("MediaDescriptions' length doesn't match mids's length when calling RemoteSDP.receive.");t.forEach(e=>{e.media.port="0",e.attributes.direction="inactive"}),this.updateBundleMids()}restartICE(e){e=BI(e),this._iceParameters=e,this.sessionDesc.mediaDescriptions.forEach(t=>{t.attributes.iceUfrag=e.iceUfrag,t.attributes.icePwd=e.icePwd})}predictReceivingMids(e){const t=[];for(let i=0;i<e;i++)t.push((this.currentMidIndex+i+1).toString(10));return t}findAvailableMediaIndex(e,t){return this.sessionDesc.mediaDescriptions.findIndex(i=>{const n=i.media.mediaType===e&&"0"!==i.media.port&&("sendonly"===i.attributes.direction||"sendrecv"===i.attributes.direction)&&0===i.attributes.ssrcs.length;if(Hh()){if(n){const e=this.firefoxSsrcMidMap.get(t[0].ssrcId);return!(e||"0"!==i.attributes.mid&&"1"!==i.attributes.mid)||!(!e||e!==i.attributes.mid)}return!1}return n})}createOrRecycleRecvMedia(e,t,i,n,r,o){const s=e._mediaStreamTrack.kind,a=this.rtpCapabilities.recv,c=this.localCapabilities.send;let d=[];if(s===gS.VIDEO){var u,l;if(FE("H264_PROFILE_LEVEL_ID")&&"h264"===n&&(d=a.videoCodecs.filter(e=>{var t,i;return((null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())||"").includes(n)&&(null==e||null===(i=e.fmtp)||void 0===i?void 0:i.parameters["profile-level-id"])===FE("H264_PROFILE_LEVEL_ID")})),!d||0===(null===(u=d)||void 0===u?void 0:u.length)){const e=c.videoCodecs.filter(e=>{var t;return((null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())||"").includes(n)});0!==e.length&&(d=a.videoCodecs.filter(t=>e.some(e=>e.payloadType===t.payloadType)))}if(FE("USE_RTX")){const e=d.map(e=>e.payloadType.toString()),t=a.videoCodecs.filter(t=>{var i,n;return"rtx"===(null===(i=t.rtpMap)||void 0===i?void 0:i.encodingName)&&e.includes((null===(n=t.fmtp)||void 0===n?void 0:n.parameters.apt)||"")});d=[...d,...t]}if(0===d.length)CE.warning("codec ".concat(n," not included in rtpCapabilities, fallback to default payloads: ").concat(null===(l=a.videoCodecs[0].rtpMap)||void 0===l?void 0:l.encodingName)),d=a.videoCodecs}else d=a.audioCodecs.filter(e=>{var t;return((null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())||"").includes(r)}),0===d.length&&(CE.warning("codec ".concat(r," not included in rtpCapabilities, fallback to opus")),d=a.audioCodecs.filter(e=>{var t;return((null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())||"").includes("opus")}));const h=s===gS.VIDEO?a.videoExtensions:a.audioExtensions;this.currentMidIndex+=1;const p="".concat(this.currentMidIndex);let _={media:{mediaType:s,port:Nb,protos:["UDP","TLS","RTP","SAVPF"],fmts:d.map(e=>e.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:h,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:t,ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:d,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:i,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(p)}};_=this.mungRecvMediaDsec(_,e,o);const E=this.findFirstClosedMedia(s);if(E){const e=this.sessionDesc.mediaDescriptions.indexOf(E);this.sessionDesc.mediaDescriptions[e]=_}else this.sessionDesc.mediaDescriptions.push(_);return _}createOrRecycleSendMedia(e,t,i,n,r){const o=this.rtpCapabilities.send,s=e===gS.VIDEO?o.videoCodecs:o.audioCodecs,a=e===gS.VIDEO?o.videoExtensions:o.audioExtensions;this.currentMidIndex+=1;const c="".concat(this.currentMidIndex);let d={media:{mediaType:e,port:Nb,protos:["UDP","TLS","RTP","SAVPF"],fmts:s.map(e=>e.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:a,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:t,ssrcGroups:i,rtcpFeedbackWildcards:[],payloads:s,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:n,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(c)}};d=this.mungSendMediaDesc(d,r);const u=this.findFirstClosedMedia(e);if(u){const e=this.sessionDesc.mediaDescriptions.indexOf(u);this.sessionDesc.mediaDescriptions[e]=d}else this.sessionDesc.mediaDescriptions.push(d);return d}updateBundleMids(){this.sessionDesc.attributes.groups[0].identificationTag=this.sessionDesc.mediaDescriptions.filter(e=>"0"!==e.media.port).map(e=>e.attributes.mid)}mungRecvMediaDsec(e,t,i){const n=BI(e);return TO(n),SO(n,t),gO(n,t),RO(n),IO(n,i,this.localCapabilities.send),n}mungSendMediaDesc(e,t){const i=BI(e);return IO(i,t,this.localCapabilities.recv),OO(i),i}updateRecvMedia(e,t){const i=this.sessionDesc.mediaDescriptions.findIndex(t=>t.attributes.mid===e);if(-1!==i){const e=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[i],t);this.sessionDesc.mediaDescriptions[i]=e}}bumpMid(e){this.currentMidIndex+=e}findFirstClosedMedia(e){return this.sessionDesc.mediaDescriptions.find(t=>Hh()?"0"===t.media.port&&t.media.mediaType===e:"0"===t.media.port)}findPreloadMediaDesc(e){return this.sessionDesc.mediaDescriptions.find(t=>{var i,n;return(null===(i=t.attributes)||void 0===i||null===(n=i.ssrcs[0])||void 0===n?void 0:n.ssrcId)===e[0].ssrcId})}getSSRC(e){var t;return null===(t=this.sessionDesc.mediaDescriptions.find(t=>t.attributes.mid===e))||void 0===t?void 0:t.attributes.ssrcs}}var kb;function Mb(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function Ub(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Mb(Object(i),!0).forEach((function(t){lp(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Mb(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}let xb=(JT((kb=class e extends LS{get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}constructor(e,t,i){super(e,t),lp(this,"store",void 0),lp(this,"peerConnection",void 0),lp(this,"remoteSDP",void 0),lp(this,"initialOffer",void 0),lp(this,"transportEventReceiver",void 0),lp(this,"statsFilter",void 0),lp(this,"useRTX",FE("USE_RTX")),lp(this,"localCapabilities",void 0),lp(this,"localCandidateCount",0),lp(this,"allCandidatesReceived",!1),lp(this,"establishPromise",void 0),lp(this,"mutex",new vg("NVExtentionsConnection-mutex")),lp(this,"rtcMedia",void 0),this.store=t,this.peerConnection=i,this.statsFilter=JO(this.peerConnection,void 0,void 0,Hh()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1,this.establishPromise=this.establish()}async establish(e){try{const e=await this.peerConnection.createOffer();if(!e.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");const t=_O(e.sdp),i=await CO(!this.useRTX,FE("FILTER_VIDEO_FEC"),FE("FILTER_AUDIO_FEC"));return this.localCapabilities=i,this.initialOffer=e,Ub(Ub({},t),{},{rtpCapabilities:i,offerSDP:e.sdp})}catch(e){throw new EE(_E.GET_LOCAL_CONNECTION_PARAMS_FAILED,e.toString())}}async connect(e,t,i,n,r,o){try{if(!this.initialOffer)throw new Error("Cannot establish NVConnection without initial offer.");this.remoteSDP=new Lb({remoteIceParameters:e,remoteDtlsParameters:t,candidates:i,remoteRTPCapabilities:n,remoteSetup:r,localCapabilities:AO(this.localCapabilities),cname:o});const s=this.remoteSDP.toString(),a=uO.exports.parse(this.initialOffer.sdp),c=a.mediaDescriptions.find(e=>"audio"===e.media.mediaType);c&&OO(c);const d=uO.exports.print(a),u=this.logSDPExchange(d||"","offer","local","connect");await this.peerConnection.setLocalDescription({type:"offer",sdp:d}),null==u||u(s),await this.peerConnection.setRemoteDescription({type:"answer",sdp:s})}catch(e){throw new EE(_E.EXCHANGE_SDP_FAILED,"NV.connect failed; ".concat(e.toString()))}}async updateRemoteConnect(e){var t,i,n;null===(t=this.remoteSDP)||void 0===t||t.updateRemoteRTPCapabilities(e),null===(i=this.remoteSDP)||void 0===i||i.preloadRemoteMedia(2);const r=null===(n=this.remoteSDP)||void 0===n?void 0:n.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:r});const o=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(o),CE.debug("[NVExtentionsConnection] updateRemoteRTPCapabilities by exchanging SDP.")}send(e,t,i){var n=this;return oO((function*(){const r=yield sO(n.mutex.lock("From NVExtentionsConnection.send"));try{if(!n.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.send before remote SDP created");const o=[];e.forEach(e=>{const t=n.peerConnection.addTransceiver(e._mediaStreamTrack,{direction:"sendonly"});o.push(t)}),Hh()&&!0===FE("SIMULCAST")&&(yield sO(n.applySimulcastForFirefox(o,e)));const s=yield sO(n.peerConnection.createOffer()),a=n.remoteSDP.predictReceivingMids(e.length),c=n.mungSendOfferSDP(s.sdp,e,a),d=uO.exports.parse(c),u=a.map(e=>{const t=d.mediaDescriptions.find(t=>t.attributes.mid===e);if(!t)throw new Error("Cannot extract ssrc from mediaDescription.");return EO(t,n.useRTX)});let l;try{l=yield u}catch(r){l=[],n.remoteSDP.receive(e,t,i,l);const o=n.remoteSDP.toString();throw yield sO(n.peerConnection.setLocalDescription({type:"offer",sdp:c})),yield sO(n.peerConnection.setRemoteDescription({type:"answer",sdp:o})),yield sO(n.stopSending(a,!0)),r}n.remoteSDP.receive(e,t,i,l);const h=n.remoteSDP.toString(),p=n.logSDPExchange(c,"offer","local","send");return yield sO(n.peerConnection.setLocalDescription({type:"offer",sdp:c})),yield sO(n.applySimulcastEncodings(o,e)),yield sO(n.applySendEncodings(o,e)),null==p||p(h),yield sO(n.peerConnection.setRemoteDescription({type:"answer",sdp:h})),o.map((e,t)=>{const i=a[t];return{localSSRC:u[t],id:i,transceiver:e}})}catch(e){throw e instanceof EE?e:new EE(_E.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.send failed; ".concat(e.toString()))}finally{r()}}))()}async stopSending(e,t){const i=t?void 0:await this.mutex.lock("From NVExtentionsConnection.stopSending");try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.stopSending before remote SDP created");const t=this.peerConnection.getTransceivers().filter(t=>-1!==e.indexOf(t.mid));if(t.length!==e.length)throw new Error("Transceivers' length doesn't match mids' length when trying to call NVExtentionsConnection.stopSending.");t.map(e=>{var t;e.direction="inactive",null===(t=e.stop)||void 0===t||t.call(e)});const n=await this.peerConnection.createOffer(),r=this.logSDPExchange(n.sdp||"","offer","local","stopSending");await this.peerConnection.setLocalDescription(n),this.remoteSDP.stopReceiving(e);const o=this.remoteSDP.toString();null==r||r(o),await this.peerConnection.setRemoteDescription({type:"answer",sdp:o})}catch(e){throw new EE(_E.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.stopSending failed; ".concat(e.toString()))}finally{i&&i()}}async receive(e,t,i,n){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.receive ".concat(e," before remoteSDP created."));const{mid:r,needExchangeSDP:o}=this.remoteSDP.send(e,t,i,n);if(o){const t=this.remoteSDP.toString(),i=this.logSDPExchange(t,"offer","remote","receive");await this.peerConnection.setRemoteDescription({type:"offer",sdp:t});const n=await this.peerConnection.createAnswer(),o=this.mungReceiveAnswerSDP(n.sdp,r,e);null==i||i(o||""),await this.peerConnection.setLocalDescription({type:"answer",sdp:o}),CE.debug("[NVExtentionsConnection] receive ".concat(e," by exchanging SDP."))}else CE.debug("[NVExtentionsConnection] receive ".concat(e," no need to exchange SDP."));const s=this.peerConnection.getTransceivers().find(e=>e.mid===r);if(!s)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:s.receiver.track,id:r}}catch(e){throw new EE(_E.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.receive failed; ".concat(e.toString()))}}async batchReceive(e){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.batchReceive before remoteSDP created.");const{mids:t,needExchangeSDP:i}=this.remoteSDP.batchSend(e);if(i){const e=this.remoteSDP.toString(),t=this.logSDPExchange(e,"offer","remote","receive");await this.peerConnection.setRemoteDescription({type:"offer",sdp:e});const i=await this.peerConnection.createAnswer();null==t||t(i.sdp||""),await this.peerConnection.setLocalDescription(i),CE.debug("[NVExtentionsConnection] batchReceive by exchanging SDP.")}else CE.debug("[NVExtentionsConnection] batchReceive no need to exchange SDP.");return t.map(e=>{const t=this.peerConnection.getTransceivers().find(t=>t.mid===e);if(!t)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:t.receiver.track,id:e}})}catch(e){throw new EE(_E.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.receive failed; ".concat(e.toString()))}}async stopReceiving(e){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.stopReceiving before remote SDP created.");this.remoteSDP.stopSending(e);const t=this.remoteSDP.toString(),i=this.logSDPExchange(t,"offer","remote","stopReceiving");await this.peerConnection.setRemoteDescription({type:"offer",sdp:t});const n=await this.peerConnection.createAnswer();null==i||i(n.sdp||""),await this.peerConnection.setLocalDescription(n)}catch(e){throw new EE(_E.EXCHANGE_SDP_FAILED,"NVExtentionsConnection stopReceiving failed; ".concat(e.toString()))}}async muteRemote(e){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.muteRemote mid=".concat(e," before remote SDP created."));this.remoteSDP.mute(e);const t=this.remoteSDP.toString(),i=this.logSDPExchange(t,"offer","remote","muteRemote");await this.peerConnection.setRemoteDescription({type:"offer",sdp:t});const n=await this.peerConnection.createAnswer();null==i||i(n.sdp||""),await this.peerConnection.setLocalDescription(n)}catch(e){throw new EE(_E.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.muteRemote failed; ".concat(e.toString()))}}async unmuteRemote(e){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.unmuteRemote mid=".concat(e," before remote SDP created."));this.remoteSDP.unmute(e);const t=this.remoteSDP.toString(),i=this.logSDPExchange(t,"offer","remote","unmuteRemote");await this.peerConnection.setRemoteDescription({type:"offer",sdp:t});const n=await this.peerConnection.createAnswer();null==i||i(n.sdp||""),await this.peerConnection.setLocalDescription(n)}catch(e){throw new EE(_E.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.unmuteRemote failed; ".concat(e.toString()))}}async muteLocal(e){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.muteLocal before remote SDP created.");const t=this.peerConnection.getTransceivers().filter(t=>t.mid&&-1!==e.indexOf(t.mid));if(t.length!==e.length)throw new Error("Transceivers' length doesn't match mids' length.");t.map(e=>{e.direction="inactive"});const i=await this.peerConnection.createOffer(),n=this.logSDPExchange(i.sdp||"","offer","local","muteLocal");await this.peerConnection.setLocalDescription(i),this.remoteSDP.muteRemote(e);const r=this.remoteSDP.toString();null==n||n(r),await this.peerConnection.setRemoteDescription({type:"answer",sdp:r})}catch(e){throw new EE(_E.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.muteLocal failed; ".concat(e.toString()))}}async unmuteLocal(e){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.unmuteLocal before remote SDP created.");const t=this.peerConnection.getTransceivers().filter(t=>t.mid&&-1!==e.indexOf(t.mid));if(t.length!==e.length)throw new Error("Transceivers' length doesn't match mids' length.");t.map(async(e,t)=>{e.direction="sendonly"});const i=await this.peerConnection.createOffer(),n=this.logSDPExchange(i.sdp||"","offer","local","unmuteLocal");await this.peerConnection.setLocalDescription(i),this.remoteSDP.unmuteRemote(e);const r=this.remoteSDP.toString();null==n||n(r),await this.peerConnection.setRemoteDescription({type:"answer",sdp:r})}catch(e){throw new EE(_E.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.unmuteLocal failed; ".concat(e.toString()))}}restartICE(){var e=this;return oO((function*(){const t=yield sO(e.mutex.lock("From NVExtentionsConnection.restartICE"));try{const i=yield sO(e.peerConnection.createOffer({iceRestart:!0}));if(!i.sdp)throw new Error("Cannot restartICE because restart offer SDP does not exist.");const n=_O(i.sdp),{remoteIceParameters:r}=yield n.iceParameters;if(!e.remoteSDP)throw new Error("Cannot restartICE before remoteSDP created.");e.remoteSDP.restartICE(r);const o=e.remoteSDP.toString(),s=e.logSDPExchange(i.sdp||"","offer","local","restartICE");yield sO(e.peerConnection.setLocalDescription(i)),null==s||s(o),yield sO(e.peerConnection.setRemoteDescription({type:"answer",sdp:o}))}catch(e){CE.warning("restart ICE failed, abort operation",e)}finally{t()}}))()}close(){var e;null===(e=this.onConnectionStateChange)||void 0===e||e.call(this,"closed"),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.transportEventReceiver=void 0,this.statsFilter.destroy()}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(e){return this.statsFilter.getVideoIsReady(e)}async updateEncoderConfig(e,t){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.updateEncoderConfig before remote SDP created.");const i=await this.peerConnection.createOffer(),n=this.mungSendOfferSDP(i.sdp,[t],[e]);this.remoteSDP.updateRecvMedia(e,t);const r=this.remoteSDP.toString(),o=this.logSDPExchange(n,"offer","local","updateEncoderConfig");await this.peerConnection.setLocalDescription({type:"offer",sdp:n}),null==o||o(r),await this.peerConnection.setRemoteDescription({type:"answer",sdp:r})}catch(e){throw new EE(_E.EXCHANGE_SDP_FAILED,e.toString())}}async updateSendParameters(e,t){const i=this.peerConnection.getTransceivers().filter(t=>t.mid===e);1===i.length&&(this.isVP8Simulcast(t)?Hh()||await this.applySimulcastEncodings(i,[t]):await this.applySendEncodings(i,[t]))}setStatsRemoteVideoIsReady(e,t){this.statsFilter.setVideoIsReady2(e,t)}async replaceTrack(e,t){const i=this.peerConnection.getTransceivers().find(e=>e.mid===t);i&&await i.sender.replaceTrack(e._mediaStreamTrack)}getP2PConnectionParams(){var e;if(null===(e=this.peerConnection.currentLocalDescription)||void 0===e||!e.sdp||!this.localCapabilities)throw new Error;return Ub(Ub({},_O(this.peerConnection.currentLocalDescription.sdp)),{},{rtpCapabilities:this.localCapabilities})}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var e;null===(e=this.onICEConnectionStateChange)||void 0===e||e.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var e;null===(e=this.onConnectionStateChange)||void 0===e||e.call(this,this.peerConnection.connectionState)},this.peerConnection.onicecandidate=e=>{e.candidate?this.localCandidateCount+=1:(this.peerConnection.onicecandidate=null,this.allCandidatesReceived=!0,CE.debug("[pc-".concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount))},setTimeout(()=>{this.allCandidatesReceived||(this.allCandidatesReceived=!0,CE.debug("[pc-".concat(this.store.p2pId,"] onicecandidate timeout, local candidate count"),this.localCandidateCount))},FE("CANDIDATE_TIMEOUT"))}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(t){const i={iceServers:[]};return t.iceServers?i.iceServers=t.iceServers:t.turnServer&&"off"!==t.turnServer.mode&&(Pf(t.turnServer.servers)?i.iceServers=t.turnServer.servers:(i.iceServers&&i.iceServers.push(...e.turnServerConfigToIceServers(t.turnServer.servers)),FE("USE_TURN_SERVER_OF_GATEWAY")&&i.iceServers&&t.turnServer.serversFromGateway&&i.iceServers.push(...e.turnServerConfigToIceServers(t.turnServer.serversFromGateway)),FE("FORCE_TURN_TCP")?i.iceTransportPolicy="relay":t.turnServer.servers.concat(t.turnServer.serversFromGateway||[]).forEach(e=>{e.forceturn&&(i.iceTransportPolicy="relay")}))),i}static turnServerConfigToIceServers(e){const t=[];return e.forEach(e=>{e.security?e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turns:".concat(_I(e.turnServerURL),":").concat(e.tcpport,"?transport=tcp")}):(e.udpport&&!FE("FORCE_TURN_TCP")&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turn:".concat(e.turnServerURL,":").concat(e.udpport,"?transport=udp")}),e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turn:".concat(e.turnServerURL,":").concat(e.tcpport,"?transport=tcp")}))}),t}async applySendEncodings(e,t){try{if(!MS().supportSetRtpSenderParameters)return;if(e.length!==t.length)return;for(let c=0;c<e.length;c++){const d=e[c],u=t[c];if(u&&u instanceof QC){var i,n;if(this.isVP8Simulcast(u))continue;const e={},t={};switch(u._optimizationMode){case"motion":e.degradationPreference="maintain-framerate";break;case"detail":e.degradationPreference="maintain-resolution";break;default:e.degradationPreference="balanced"}var r,o,s,a;if(null!==(i=u._encoderConfig)&&void 0!==i&&i.bitrateMax)t.maxBitrate=1e3*(null===(r=u._encoderConfig)||void 0===r?void 0:r.bitrateMax);if(u._hints.includes(aS.LOW_STREAM))null!==(o=u._encoderConfig)&&void 0!==o&&o.frameRate&&(t.maxFramerate=mI(u._encoderConfig.frameRate)),null!==(s=u._encoderConfig)&&void 0!==s&&s.scaleResolutionDownBy&&(null===(a=u._encoderConfig)||void 0===a?void 0:a.scaleResolutionDownBy)>1&&(t.scaleResolutionDownBy=u._encoderConfig.scaleResolutionDownBy);if(FE("DSCP_TYPE")&&tp()){const e=FE("DSCP_TYPE");["very-low","low","medium","high"].includes(e)&&(t.networkPriority=e)}const c=d.sender.getParameters(),l=null===(n=c.encodings)||void 0===n?void 0:n[0];Hh()&&!l&&(e.encodings=[t]),l&&Object.assign(l,t),Object.assign(c,e),await d.sender.setParameters(c)}}}catch(e){CE.debug("Apply RTPSendEncodings failed.")}}mungSendOfferSDP(e,t,i){const n=uO.exports.parse(e);return t.forEach((e,t)=>{const r=i[t],o=n.mediaDescriptions.find(e=>e.attributes.mid===r);o&&(SO(o,e),vO(o,e,this.store.codec))}),uO.exports.print(n)}mungReceiveAnswerSDP(e,t,i){const n=uO.exports.parse(e),r=n.mediaDescriptions.find(e=>e.attributes.mid===t);return r&&i===gS.AUDIO&&"audio"===r.media.mediaType&&OO(r),uO.exports.print(n)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=e=>{var t;null===(t=this.onFirstAudioReceived)||void 0===t||t.call(this,e)},this.statsFilter.onFirstVideoReceived=e=>{var t;null===(t=this.onFirstVideoReceived)||void 0===t||t.call(this,e)},this.statsFilter.onFirstAudioDecoded=e=>{var t;null===(t=this.onFirstAudioDecoded)||void 0===t||t.call(this,e)},this.statsFilter.onFirstVideoDecoded=(e,t,i)=>{var n;null===(n=this.onFirstVideoDecoded)||void 0===n||n.call(this,e,t,i)},this.statsFilter.onSelectedLocalCandidateChanged=(e,t)=>{var i;null===(i=this.onSelectedLocalCandidateChanged)||void 0===i||i.call(this,e,t)},this.statsFilter.onSelectedRemoteCandidateChanged=(e,t)=>{var i;null===(i=this.onSelectedRemoteCandidateChanged)||void 0===i||i.call(this,e,t)},this.statsFilter.onFirstVideoDecodedTimeout=e=>{var t;null===(t=this.onFirstVideoDecodedTimeout)||void 0===t||t.call(this,e)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0,this.statsFilter.onFirstVideoDecodedTimeout=void 0}async applySimulcastForFirefox(e,t){if(e.length===t.length)for(let s=0;s<e.length;s++){var i,n,r,o;const a=e[s],c=t[s];if(c instanceof QC&&!c._hints.includes(aS.LOW_STREAM)&&null!==(i=c._encoderConfig)&&void 0!==i&&i.bitrateMax&&(null===(n=c._encoderConfig)||void 0===n?void 0:n.bitrateMax)>200&&null!==(r=c._scalabiltyMode)&&void 0!==r&&r.numSpatialLayers&&(null===(o=c._scalabiltyMode)||void 0===o?void 0:o.numSpatialLayers)>1&&"vp8"===this.store.codec){const e={},t={high:1e3*(c._encoderConfig.bitrateMax-50),medium:5e4};e.encodings=[{rid:"m",active:!0,maxBitrate:t.medium,scaleResolutionDownBy:4},{rid:"h",active:!0,maxBitrate:t.high}];const i=a.sender.getParameters();await a.sender.setParameters(Object.assign(i,e))}}}async applySimulcastEncodings(e,t){if(!Hh()&&e.length===t.length)for(let i=0;i<e.length;i++){const n=t[i];if(n instanceof QC&&this.isVP8Simulcast(n)){const t=e[i],r={},o={high:1e3*(n._encoderConfig.bitrateMax-50),medium:5e4};r.encodings=[{active:!0,adaptivePtime:!1,networkPriority:"high",priority:"high",maxBitrate:o.high},{active:!0,adaptivePtime:!1,networkPriority:"low",priority:"low",maxBitrate:o.medium,scaleResolutionDownBy:4}];const s=t.sender.getParameters();await t.sender.setParameters(Object.assign(s,r))}}}isVP8Simulcast(e){var t,i,n,r;return!!(e instanceof QC&&FE("SIMULCAST")&&"vp8"===this.store.codec&&!e._hints.includes(aS.LOW_STREAM)&&null!==(t=e._encoderConfig)&&void 0!==t&&t.bitrateMax&&(null===(i=e._encoderConfig)||void 0===i?void 0:i.bitrateMax)>200&&null!==(n=e._scalabiltyMode)&&void 0!==n&&n.numSpatialLayers&&(null===(r=e._scalabiltyMode)||void 0===r?void 0:r.numSpatialLayers)>1)}logSDPExchange(e,t,i,n){if(FE("SDP_LOGGING"))return CE.upload("exchanging ".concat(i," ").concat(t," SDP during NVExtentionsConnection.").concat(n,"\n"),e),"offer"===t?e=>{this.logSDPExchange(e,"answer","local"===i?"remote":"local",n)}:void 0}async getRemoteSSRC(e){if(!this.remoteSDP)return;const t=this.remoteSDP.getSSRC(e);return null==t?void 0:t[0].ssrcId}setConfiguration(t){if(MS().supportPCSetConfiguration){const i=e.resolvePCConfiguration(t);this.peerConnection.setConfiguration(i)}}}).prototype,"connect",[Vb],Object.getOwnPropertyDescriptor(kb.prototype,"connect"),kb.prototype),JT(kb.prototype,"updateRemoteConnect",[Vb],Object.getOwnPropertyDescriptor(kb.prototype,"updateRemoteConnect"),kb.prototype),JT(kb.prototype,"receive",[Vb],Object.getOwnPropertyDescriptor(kb.prototype,"receive"),kb.prototype),JT(kb.prototype,"batchReceive",[Vb],Object.getOwnPropertyDescriptor(kb.prototype,"batchReceive"),kb.prototype),JT(kb.prototype,"stopReceiving",[Vb],Object.getOwnPropertyDescriptor(kb.prototype,"stopReceiving"),kb.prototype),JT(kb.prototype,"muteRemote",[Vb],Object.getOwnPropertyDescriptor(kb.prototype,"muteRemote"),kb.prototype),JT(kb.prototype,"unmuteRemote",[Vb],Object.getOwnPropertyDescriptor(kb.prototype,"unmuteRemote"),kb.prototype),JT(kb.prototype,"muteLocal",[Vb],Object.getOwnPropertyDescriptor(kb.prototype,"muteLocal"),kb.prototype),JT(kb.prototype,"unmuteLocal",[Vb],Object.getOwnPropertyDescriptor(kb.prototype,"unmuteLocal"),kb.prototype),JT(kb.prototype,"close",[Vb],Object.getOwnPropertyDescriptor(kb.prototype,"close"),kb.prototype),JT(kb.prototype,"updateEncoderConfig",[Vb],Object.getOwnPropertyDescriptor(kb.prototype,"updateEncoderConfig"),kb.prototype),JT(kb.prototype,"updateSendParameters",[Vb],Object.getOwnPropertyDescriptor(kb.prototype,"updateSendParameters"),kb.prototype),JT(kb.prototype,"replaceTrack",[Vb],Object.getOwnPropertyDescriptor(kb.prototype,"replaceTrack"),kb.prototype),JT(kb.prototype,"getRemoteSSRC",[Vb],Object.getOwnPropertyDescriptor(kb.prototype,"getRemoteSSRC"),kb.prototype),kb);function Vb(e,t,i){const n=e[t];if("function"!=typeof n)throw new Error("Cannot use mutex on object property.");return i.value=async function(){const e=this.mutex,i=await e.lock("From NVExtentionsConnection.".concat(t));try{for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return await n.apply(this,o)}finally{i()}},i}var Fb;function jb(e){var t,i,n,r=2;for("undefined"!=typeof Symbol&&(i=dO,n=Symbol.iterator);r--;){if(i&&null!=(t=e[i]))return t.call(e);if(n&&null!=(t=e[n]))return new Bb(t.call(e));i="@@asyncIterator",n="@@iterator"}throw new TypeError("Object is not async iterable")}function Bb(e){function t(e){if(Object(e)!==e)return Sl.reject(new TypeError(e+" is not an object."));var t=e.done;return Sl.resolve(e.value).then((function(e){return{value:e,done:t}}))}return(Bb=function(e){this.s=e,this.n=e.next}).prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var i=this.s.return;return void 0===i?Sl.resolve({value:e,done:!0}):t(i.apply(this.s,arguments))},throw:function(e){var i=this.s.return;return void 0===i?Sl.reject(e):t(i.apply(this.s,arguments))}},new Bb(e)}let Gb=(JT((Fb=class e extends LS{get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}constructor(t,i){super(t,i),lp(this,"store",void 0),lp(this,"peerConnection",void 0),lp(this,"cname",void 0),lp(this,"mutex",new vg("DataChannelConnection-mutex")),lp(this,"dataChannel",void 0),lp(this,"_p2pConnection",void 0),lp(this,"establishPromise",void 0),lp(this,"_nvMedia",void 0),this.store=i,this.store.dcId=this.store.dcId+1,this.peerConnection=new RTCPeerConnection(e.resolvePCConfiguration(t),{optional:[{googDscp:!0}]}),this.dataChannel=this.peerConnection.createDataChannel("agora-signal",{ordered:!1,maxPacketLifeTime:50}),this.dataChannel.binaryType="arraybuffer",this._p2pConnection=new xb(t,i,this.peerConnection),this.bindPCEvents(),this.establishPromise=this._p2pConnection.establishPromise}async establish(){var e;const t=null===(e=this._nvMedia)||void 0===e?void 0:e.getLocalRtpCapabilities();return await this._p2pConnection.establish(t)}getP2PConnectionParams(){return this._p2pConnection.getP2PConnectionParams()}async connect(e,t,i,n,r,o){return this.cname=o,await this._p2pConnection.connect(e,t,i,n,r,o),await new Sl((e,t)=>{const n=setTimeout(()=>{this.closeSignal(),t(new EE(_E.DATACHANNEL_CONNECTION_TIMEOUT,"Datachannel connection timed out, candidates: ".concat(JSON.stringify(i))))},2e3);this.dataChannel.onopen=()=>{if("open"===this.dataChannel.readyState)return clearTimeout(n),void e()},this.dataChannel.onerror=e=>{this.closeSignal(),t(e)}}),{transmitter:this.dataChannel,close:this.closeSignal.bind(this)}}send(e,t,i){var n=this;return oO((function*(){const r=yield sO(n.mutex.lock("From DataChannelConnection.send"));try{return yield*cO(jb(n._p2pConnection.send(e,t,i)),sO)}finally{r()}}))()}async stopSending(e,t){return this._p2pConnection.stopSending(e,t)}async receive(e,t,i,n){return this._nvMedia?(CE.debug("[DataChannelConnection] receive ".concat(e," by DataChannel.")),await this._nvMedia.reveiveByRTCMedia(e,t,this.cname)):(CE.debug("[DataChannelConnection] receive ".concat(e," by WebRTC.")),await this._p2pConnection.receive(e,t,i,n))}async batchReceive(e){return[...await this._p2pConnection.batchReceive(e)]}async stopReceiving(e){return await this._p2pConnection.stopReceiving(e)}async muteRemote(e){return await this._p2pConnection.muteRemote(e)}async unmuteRemote(e){return await this._p2pConnection.unmuteRemote(e)}async muteLocal(e){return await this._p2pConnection.muteLocal(e)}async unmuteLocal(e){return await this._p2pConnection.unmuteLocal(e)}restartICE(){var e=this;return oO((function*(){return yield*cO(jb(e._p2pConnection.restartICE()),sO)}))()}close(){var e;null===(e=this._nvMedia)||void 0===e||e.close(),this._p2pConnection.close(),this.unbindConnectionEvents(this._p2pConnection)}getStats(){return this._p2pConnection.getStats()}getRemoteVideoIsReady(e){return this._p2pConnection.getRemoteVideoIsReady(e)}updateRemoteConnect(e){var t;null===(t=this._nvMedia)||void 0===t||t.setRemoteRtpCapabilities(e),this._p2pConnection.updateRemoteConnect(e)}async updateEncoderConfig(e,t){return await this._p2pConnection.updateEncoderConfig(e,t)}async updateSendParameters(e,t){return await this._p2pConnection.updateSendParameters(e,t)}setStatsRemoteVideoIsReady(e,t){this._p2pConnection.setStatsRemoteVideoIsReady(e,t)}async replaceTrack(e,t){return await this._p2pConnection.replaceTrack(e,t)}async getRemoteSSRC(e){return this._p2pConnection.getRemoteSSRC(e)}logSDPExchange(e,t,i,n){if(FE("SDP_LOGGING"))return CE.upload("exchanging ".concat(i," ").concat(t," SDP during DataChannelConnection.").concat(n,"\n"),e),"offer"===t?e=>{this.logSDPExchange(e,"answer","local"===i?"remote":"local",n)}:void 0}static resolvePCConfiguration(t){const i={iceServers:[]};return t.iceServers?i.iceServers=t.iceServers:t.turnServer&&"off"!==t.turnServer.mode&&(Pf(t.turnServer.servers)?i.iceServers=t.turnServer.servers:(i.iceServers&&i.iceServers.push(...e.turnServerConfigToIceServers(t.turnServer.servers)),FE("USE_TURN_SERVER_OF_GATEWAY")&&i.iceServers&&t.turnServer.serversFromGateway&&i.iceServers.push(...e.turnServerConfigToIceServers(t.turnServer.serversFromGateway)),FE("FORCE_TURN_TCP")?i.iceTransportPolicy="relay":t.turnServer.servers.concat(t.turnServer.serversFromGateway||[]).forEach(e=>{e.forceturn&&(i.iceTransportPolicy="relay")}))),i}static turnServerConfigToIceServers(e){const t=[];return e.forEach(e=>{e.security?e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turns:".concat(_I(e.turnServerURL),":").concat(e.tcpport,"?transport=tcp")}):(e.udpport&&!FE("FORCE_TURN_TCP")&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turn:".concat(e.turnServerURL,":").concat(e.udpport,"?transport=udp")}),e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turn:".concat(e.turnServerURL,":").concat(e.tcpport,"?transport=tcp")}))}),t}bindPCEvents(){this._p2pConnection.onICEConnectionStateChange=e=>{var t;return null===(t=this.onICEConnectionStateChange)||void 0===t?void 0:t.call(this,e)},this._p2pConnection.onConnectionStateChange=e=>{var t;return null===(t=this.onConnectionStateChange)||void 0===t?void 0:t.call(this,e)},this._p2pConnection.onDTLSTransportStateChange=e=>{var t;return null===(t=this.onDTLSTransportStateChange)||void 0===t?void 0:t.call(this,e)},this._p2pConnection.onDTLSTransportError=e=>{var t;return null===(t=this.onDTLSTransportError)||void 0===t?void 0:t.call(this,e)},this._p2pConnection.onICETransportStateChange=e=>{var t;return null===(t=this.onICETransportStateChange)||void 0===t?void 0:t.call(this,e)},this._p2pConnection.onFirstAudioReceived=e=>{var t;return null===(t=this.onFirstAudioReceived)||void 0===t?void 0:t.call(this,e)},this._p2pConnection.onFirstVideoReceived=e=>{var t;return null===(t=this.onFirstVideoReceived)||void 0===t?void 0:t.call(this,e)},this._p2pConnection.onFirstAudioDecoded=e=>{var t;return null===(t=this.onFirstAudioDecoded)||void 0===t?void 0:t.call(this,e)},this._p2pConnection.onFirstVideoDecoded=(e,t,i)=>{var n;return null===(n=this.onFirstVideoDecoded)||void 0===n?void 0:n.call(this,e,t,i)},this._p2pConnection.onFirstVideoDecodedTimeout=e=>{var t;return null===(t=this.onFirstVideoDecodedTimeout)||void 0===t?void 0:t.call(this,e)},this._p2pConnection.onSelectedLocalCandidateChanged=(e,t)=>{var i;return null===(i=this.onSelectedLocalCandidateChanged)||void 0===i?void 0:i.call(this,e,t)},this._p2pConnection.onSelectedRemoteCandidateChanged=(e,t)=>{var i;return null===(i=this.onSelectedRemoteCandidateChanged)||void 0===i?void 0:i.call(this,e,t)}}closeSignal(){this.dataChannel.close(),this.peerConnection.close()}unbindConnectionEvents(e){e.onConnectionStateChange=void 0,e.onICEConnectionStateChange=void 0,e.onICETransportStateChange=void 0,e.onDTLSTransportStateChange=void 0,e.onDTLSTransportError=void 0,e.onFirstAudioDecoded=void 0,e.onFirstAudioReceived=void 0,e.onFirstVideoDecoded=void 0,e.onFirstVideoReceived=void 0,e.onSelectedLocalCandidateChanged=void 0,e.onSelectedRemoteCandidateChanged=void 0,e.onFirstVideoDecodedTimeout=void 0}setConfiguration(e){this._p2pConnection.setConfiguration(e)}}).prototype,"connect",[Wb],Object.getOwnPropertyDescriptor(Fb.prototype,"connect"),Fb.prototype),JT(Fb.prototype,"receive",[Wb],Object.getOwnPropertyDescriptor(Fb.prototype,"receive"),Fb.prototype),JT(Fb.prototype,"stopReceiving",[Wb],Object.getOwnPropertyDescriptor(Fb.prototype,"stopReceiving"),Fb.prototype),JT(Fb.prototype,"muteRemote",[Wb],Object.getOwnPropertyDescriptor(Fb.prototype,"muteRemote"),Fb.prototype),JT(Fb.prototype,"unmuteRemote",[Wb],Object.getOwnPropertyDescriptor(Fb.prototype,"unmuteRemote"),Fb.prototype),JT(Fb.prototype,"muteLocal",[Wb],Object.getOwnPropertyDescriptor(Fb.prototype,"muteLocal"),Fb.prototype),JT(Fb.prototype,"unmuteLocal",[Wb],Object.getOwnPropertyDescriptor(Fb.prototype,"unmuteLocal"),Fb.prototype),JT(Fb.prototype,"close",[Wb],Object.getOwnPropertyDescriptor(Fb.prototype,"close"),Fb.prototype),JT(Fb.prototype,"updateEncoderConfig",[Wb],Object.getOwnPropertyDescriptor(Fb.prototype,"updateEncoderConfig"),Fb.prototype),JT(Fb.prototype,"updateSendParameters",[Wb],Object.getOwnPropertyDescriptor(Fb.prototype,"updateSendParameters"),Fb.prototype),JT(Fb.prototype,"replaceTrack",[Wb],Object.getOwnPropertyDescriptor(Fb.prototype,"replaceTrack"),Fb.prototype),JT(Fb.prototype,"getRemoteSSRC",[Wb],Object.getOwnPropertyDescriptor(Fb.prototype,"getRemoteSSRC"),Fb.prototype),Fb);function Wb(e,t,i){const n=e[t];if("function"!=typeof n)throw new Error("Cannot use mutex on object property.");return i.value=async function(){const e=this.mutex,i=await e.lock("From DataChannelConnection.".concat(t));try{for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return await n.apply(this,o)}finally{i()}},i}var Hb;function Kb(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function Yb(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Kb(Object(i),!0).forEach((function(t){lp(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Kb(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function qb(e){var t,i,n,r=2;for("undefined"!=typeof Symbol&&(i=dO,n=Symbol.iterator);r--;){if(i&&null!=(t=e[i]))return t.call(e);if(n&&null!=(t=e[n]))return new Jb(t.call(e));i="@@asyncIterator",n="@@iterator"}throw new TypeError("Object is not async iterable")}function Jb(e){function t(e){if(Object(e)!==e)return Sl.reject(new TypeError(e+" is not an object."));var t=e.done;return Sl.resolve(e.value).then((function(e){return{value:e,done:t}}))}return(Jb=function(e){this.s=e,this.n=e.next}).prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var i=this.s.return;return void 0===i?Sl.resolve({value:e,done:!0}):t(i.apply(this.s,arguments))},throw:function(e){var i=this.s.return;return void 0===i?Sl.reject(e):t(i.apply(this.s,arguments))}},new Jb(e)}let Xb=(JT((Hb=class extends hE{get state(){return this._state}set state(e){const t=this._state;this._state=e,this.emit(vS.StateChange,t,this._state)}constructor(e,t){super(),lp(this,"store",void 0),lp(this,"statsUploader",void 0),lp(this,"connection",void 0),lp(this,"localTrackMap",new Map),lp(this,"remoteUserMap",new Map),lp(this,"pendingLocalTracks",[]),lp(this,"pendingRemoteTracks",[]),lp(this,"statsCollector",void 0),lp(this,"isPlanB",!1),lp(this,"shouldForwardP2PCreation",void 0),lp(this,"iceFailedCount",0),lp(this,"dtlsFailedCount",0),lp(this,"mutex",new vg("P2PChannel-mutex")),lp(this,"_state",IS.Disconnected),lp(this,"handleMuteLocalTrack",async(e,t,i)=>{const n=await this.mutex.lock("Locking from P2PChannel.handleMuteLocalTrack");try{if(!this.connection||this.state!==IS.Connected)return void i(new EE(_E.INVALID_OPERATION,"Cannot call P2PChannel.handleMuteLocalTrack before connection established."));const r=this.filterTobeMutedTracks(e);if(0===r.length)return void t();const o=r.find(e=>"videoLowTrack"===e[0]);if(o){o[1].track._originMediaStreamTrack.stop()}await this.connection.muteLocal(r.map(e=>{let[,{id:t}]=e;return t}));const s=this.createMuteMessage(r);await MI(this,vS.RequestMuteLocal,s),t()}catch(e){i(e)}finally{n()}}),lp(this,"handleUnmuteLocalTrack",async(e,t,i)=>{const n=await this.mutex.lock("Locking from P2PChannel.handleUnmuteLocalTrack");try{if(!this.connection||this.state!==IS.Connected)return void i(new EE(_E.INVALID_OPERATION,"Cannot call P2PChannel.handleUnmuteLocalTrack before connection established."));const r=this.filterTobeUnmutedTracks(e);if(0===r.length)return void t();const o=r.find(e=>"videoLowTrack"===e[0]);if(o){const t=o[1];if(t.track._originMediaStreamTrack.stop(),MS().supportDualStreamEncoding){const i=e._mediaStreamTrack.clone();t.track._mediaStreamTrack=i,t.track._originMediaStreamTrack=i}else{const i=cb(e,xI(this,vS.RequestLowStreamParameter));t.track._mediaStreamTrack=i,t.track._originMediaStreamTrack=i}await new Sl((e,i)=>{this.handleReplaceTrack(t.track,e,i,!0)})}await this.connection.unmuteLocal(r.map(e=>{let[,{id:t}]=e;return t}));const s=this.createUnmuteMessage(r);await MI(this,vS.RequestUnmuteLocal,s),t()}catch(e){i(e)}finally{n()}}),lp(this,"handleUpdateVideoEncoder",async(e,t,i)=>{const n=await this.mutex.lock("Locking from P2PChannel.handleSetVideoEncoder");try{const i=this.localTrackMap.get(RS.LocalVideoTrack);if(!this.connection||!i||i.track!==e||this.state!==IS.Connected)return void t();const{id:r,track:o}=i;await this.connection.updateSendParameters(r,o),await this.connection.updateEncoderConfig(r,o),this.emit(vS.UpdateVideoEncoder,o),t()}catch(e){i(e)}finally{n()}}),lp(this,"handleSetOptimizationMode",async(e,t,i)=>{const n=await this.mutex.lock("Locking from P2PChannel.handleSetOptimizationMode");try{const i=this.localTrackMap.get(RS.LocalVideoTrack);if(!this.connection||!i||i.track!==e||this.state!==IS.Connected)return;const{id:r,track:o}=i;await this.connection.updateSendParameters(r,o),t()}catch(e){i(e)}finally{n()}}),lp(this,"handleReplaceTrack",async(e,t,i,n)=>{let r;CE.debug("P2PChannel handleReplaceTrack for [track-id-".concat(e.getTrackId(),"]")),"boolean"==typeof n&&n||(r=await this.mutex.lock("From P2PChannel.handleReplaceTrack"));try{var o;const i=Array.from(this.localTrackMap.entries()).find(t=>{let[,{track:i}]=t;return e===i});if(!this.connection||!i||this.state!==IS.Connected)return void t();if(await(null===(o=this.connection)||void 0===o?void 0:o.replaceTrack(e,i[1].id)),this.isPlanB){const t=i[1];t.id=e._mediaStreamTrack.id,this.localTrackMap.set(i[0],t)}if(i[0]===RS.LocalVideoTrack&&MS().supportDualStreamEncoding){const t=this.localTrackMap.get(RS.LocalVideoLowTrack);if(t){const i=e._mediaStreamTrack.clone();t.track._originMediaStreamTrack.stop(),t.track._mediaStreamTrack=i,t.track._originMediaStreamTrack=i,await new Sl((e,i)=>{this.handleReplaceTrack(t.track,e,i,!0)})}}t()}catch(e){i(e)}finally{var s;null===(s=r)||void 0===s||s()}}),lp(this,"handleGetLocalVideoStats",e=>{e(this.statsCollector.getLocalVideoTrackStats())}),lp(this,"handleGetLocalAudioStats",e=>{e(this.statsCollector.getLocalAudioTrackStats())}),lp(this,"handleGetRemoteVideoStats",e=>this.statsCollector.getRemoteVideoTrackStats(e.uid)[e.uid]),lp(this,"handleGetRemoteAudioStats",e=>this.statsCollector.getRemoteAudioTrackStats(e.uid)[e.uid]),this.store=e,this.statsCollector=t,this.statsCollector.addP2PChannel(this),this.statsUploader=new bb,this.bindStatsUploaderEvents(),this.isPlanB=!MS().supportUnifiedPlan||FE("CHROME_FORCE_PLAN_B")&&tp(),this.shouldForwardP2PCreation=FE("FORWARD_P2P_CREATION")&&MS().supportPCSetConfiguration,this.shouldForwardP2PCreation&&(this.connection=this.store.useDataChannel?new Gb({},this.store):this.isPlanB?new ZO({},this.store):new sb({},this.store),this.bindConnectionEvents(this.connection))}async startP2PConnection(e,t){if(this.state=IS.New,this.shouldForwardP2PCreation||(this.connection=this.store.useDataChannel?new Gb(e,this.store):this.isPlanB?new ZO(e,this.store):new sb(e,this.store),this.bindConnectionEvents(this.connection)),!this.connection)throw new EE(_E.UNEXPECTED_ERROR,"Cannot P2PChannel.startConnection before P2PConnection initialization .");return this.connection.setConfiguration(e),this.connection.establishPromise}async connect(e,t,i,n,r,o){if(!this.connection)throw new EE(_E.UNEXPECTED_ERROR,"Cannot P2PChannel.connect before P2PChannel.startP2PConnection .");this.connection instanceof Gb?this.connection.updateRemoteConnect(n):(this.store.peerConnectionStart(),await this.connection.connect(e,t,i,n,r,o),this.statsUploader.startUploadTransportStats(),this.statsUploader.startUploadExtensionUsageStats(),this.state=IS.Connected)}async preConnect(e,t,i,n,r,o){if(!this.connection)throw new EE(_E.UNEXPECTED_ERROR,"Cannot P2PChannel.connect before P2PChannel.startP2PConnection .");this.store.peerConnectionStart();const s=await this.connection.connect(e,t,i,n,r,o);return this.statsUploader.startUploadTransportStats(),this.statsUploader.startUploadExtensionUsageStats(),this.state=IS.Connected,s}getEstablishParams(){if(this.connection instanceof Gb)return this.connection.getP2PConnectionParams();throw new Error("Only DataChannelConnection needs to obtain establishParams")}publish(e,t,i){var n=this;return oO((function*(){const r=yield sO(n.mutex.lock("From P2PChannel.publish"));try{if(!n.connection||n.state!==IS.Connected){if(n.state===IS.Disconnected)throw new EE(_E.UNEXPECTED_ERROR,"PeerConnection already disconnected.");n.throwIfTrackTypeNotMatch(e);const t=e.filter(e=>-1===n.pendingLocalTracks.indexOf(e));return void(n.pendingLocalTracks=n.pendingLocalTracks.concat(t))}n.store.pubId=n.store.pubId+1,aI.markPublishStart(n.store.clientId,n.store.pubId);const o=n.filterTobePublishedTracks(e,t,i);if(0===o.length)return void(yield sO(n.tryToUnmuteAudio(e)));yield*cO(qb(n.doPublish(n.connection,o)),sO)}finally{r()}}))()}doPublish(e,t){var i=this;return oO((function*(){t.forEach(e=>{let{track:t,type:n}=e;const r=Date.now();i.store.publish(t.getTrackId(),n===RS.LocalAudioTrack?"audio":"video",r)}),i.bindLocalTrackEvents(t);const n=yield sO(e.send(t.map(e=>{let{track:t}=e;return t}),i.store.codec,i.store.audioCodec)),r=(yield sO(n.next())).value,o=i.createGatewayPublishMessage(t,r);let s;try{s=yield o}catch(e){throw n.throw(e),(null==e?void 0:e.code)===_E.WS_ABORT&&t.forEach(e=>{let{track:t}=e;-1===i.pendingLocalTracks.indexOf(t)&&i.pendingLocalTracks.push(t)}),i.unbindLocalTrackEvents(t),e}const a=i.mapPubResToRemoteConfig(o,s),c=(yield sO(n.next(a))).value;t.forEach(e=>{let{type:t}=e;i.statsCollector.addLocalStats(t)}),i.assignLocalTracks(t,c),i.statsUploader.startUploadUplinkStats(),t.forEach(e=>{let{track:t,type:n}=e;const r=Date.now();i.store.publish(t.getTrackId(),n===RS.LocalAudioTrack?"audio":"video",void 0,r)})}))()}publishLowStream(e){var t=this;return oO((function*(){if(!t.connection||t.state!==IS.Connected)return;const i=yield sO(t.mutex.lock("Locking from P2PChannel.publishLowStream"));try{const r=t.localTrackMap.get(RS.LocalVideoTrack);if(!r)throw new EE(_E.UNEXPECTED_ERROR,"Could not find high stream");if(t.localTrackMap.has(RS.LocalVideoLowTrack))throw new EE(_E.UNEXPECTED_ERROR,"[".concat(t.store.clientId,"] Can't publish low stream when stream already publish"));const o=[{track:t.getLowVideoTrack(r.track,e),type:RS.LocalVideoLowTrack}];if(yield*cO(qb(t.doPublish(t.connection,o)),sO),r.track.muted||!r.track.enabled){var n;const e=null===(n=t.localTrackMap.get(RS.LocalVideoLowTrack))||void 0===n?void 0:n.id;void 0!==e&&(yield sO(t.connection.muteLocal([e])))}}finally{i()}}))()}async republish(){this.pendingLocalTracks.length>0&&(CE.debug("Emit P2PChannelEvents.RequestRePublish to republish tracks."),await kI(this,vS.RequestRePublish,this.pendingLocalTracks),this.emit(vS.MediaReconnectEnd,this.store.uid),this.pendingLocalTracks=[])}async reSubscribe(e){for(let e=this.pendingRemoteTracks.length-1;e>=0;e--){const{user:t,kind:i}=this.pendingRemoteTracks[e];(i!==gS.AUDIO||t._audio_added_&&t._audioSSRC)&&(i!==gS.VIDEO||t._video_added_&&t._videoSSRC)||this.pendingRemoteTracks.splice(e,1)}if(e)await kI(this,vS.RequestReSubscribe,this.pendingRemoteTracks);else for(const{user:e,kind:t}of this.pendingRemoteTracks)await this.subscribe(e,t,t===gS.VIDEO?e._videoSSRC:e._audioSSRC);this.pendingRemoteTracks.forEach(e=>{let{user:t}=e;this.emit(vS.MediaReconnectEnd,t.uid)}),this.pendingRemoteTracks=[]}async unpublish(e){if(!this.connection||this.state!==IS.Connected)return void e.forEach(e=>{const t=this.pendingLocalTracks.indexOf(e);-1!==t&&this.pendingLocalTracks.splice(t,1)});const t=this.filterTobeUnpublishedTracks(e);if(0===t.length)return;const i=t.find(e=>"videoLowTrack"===e[0]);if(i){i[1].track.close()}return this.doUnpublish(this.connection,t)}async unpublishLowStream(){if(!this.connection||this.state!==IS.Connected)return;const e=this.localTrackMap.get(RS.LocalVideoLowTrack);if(!e)return;e.track.close();const t=[[RS.LocalVideoLowTrack,e]];return this.doUnpublish(this.connection,t)}async doUnpublish(e,t){const i=this.createGatewayUnpublishMessage(t);return await e.stopSending(t.map(e=>{let[,{id:t}]=e;return t})),this.withdrawLocalTracks(t),this.unbindLocalTrackEvents(t.map(e=>{let[t,{track:i}]=e;return{type:t,track:i}})),t.forEach(e=>{let[t]=e;this.statsCollector.removeLocalStats(t)}),0===this.localTrackMap.size&&this.statsUploader.stopUploadUplinkStats(),i}async subscribe(e,t,i,n,r){var o;if(!this.connection||this.state!==IS.Connected)throw new EE(_E.INVALID_OPERATION,"Cannot subscribe remote user when peerConnection disconnected.");if(null!==(o=this.remoteUserMap.get(e))&&void 0!==o&&o.has(t))return;let s,a;if(r){const i=r.find(e=>{let{stream_type:i}=e;return i===t});if(!i)throw new EE(_E.UNEXPECTED_ERROR,"Cannot subscribe to remote ".concat(t," for user: ").concat(e.uid," because subscribe answer from gateway does not contain stream_type: ").concat(t,"."));const n=await this.connection.receive(t,i.ssrcs,String(e._uintid),i.attributes);s=n.track,a=n.id}else{const r=await this.connection.receive(t,[{ssrcId:i,rtx:n}],String(e._uintid),void 0);s=r.track,a=r.id}t===gS.AUDIO?(e._audioTrack?e._audioTrack._updateOriginMediaStreamTrack(s):(e._audioTrack=new yb(s,e.uid,e._uintid,this.store),CE.info("[".concat(this.store.p2pId,"] create remote audio track: ").concat(e._audioTrack.getTrackId()))),this.bindRemoteTrackEvents(e,e._audioTrack)):(e._videoTrack?e._videoTrack._updateOriginMediaStreamTrack(s):(e._videoTrack=new Cb(s,e.uid,e._uintid,this.store),CE.info("[".concat(this.store.p2pId,"] create remote video track: ").concat(e._videoTrack.getTrackId()))),this.bindRemoteTrackEvents(e,e._videoTrack));const c=this.remoteUserMap.get(e);c?c.set(t,a):this.remoteUserMap.set(e,new Map([[t,a]])),this.statsCollector.addRemoteStats(e.uid),this.statsUploader.startUploadDownlinkStats();const d=this.pendingRemoteTracks.findIndex(i=>{let{user:n,kind:r}=i;return n.uid===e.uid&&t===r});-1!==d&&(this.pendingRemoteTracks.splice(d,1),this.emit(vS.MediaReconnectEnd,e.uid))}async massSubscribe(e){return this.massSubscribeNoLock(e)}async massSubscribeNoLock(e){if(!this.connection||this.state!==IS.Connected)throw new EE(_E.INVALID_OPERATION,"Cannot subscribeAll remote users when peerConnection disconnected.");e=e.filter(e=>{var t;let{user:i,mediaType:n}=e;return!(null!==(t=this.remoteUserMap.get(i))&&void 0!==t&&t.has(n))});const t=await this.connection.batchReceive(e.map(e=>{let{user:t,mediaType:i,ssrcId:n,rtxSsrcId:r}=e;return{kind:i,ssrcMsg:[{ssrcId:n,rtx:r}],mslabel:String(t._uintid)}}));e.forEach((e,i)=>{let{user:n,mediaType:r}=e;const{track:o,id:s}=t[i];r===gS.AUDIO?(n._audioTrack?n._audioTrack._updateOriginMediaStreamTrack(o):(n._audioTrack=new yb(o,n.uid,n._uintid,this.store),CE.info("[".concat(this.store.p2pId,"] create remote audio track: ").concat(n._audioTrack.getTrackId()))),this.bindRemoteTrackEvents(n,n._audioTrack)):(n._videoTrack?n._videoTrack._updateOriginMediaStreamTrack(o):(n._videoTrack=new Cb(o,n.uid,n._uintid,this.store),CE.info("[".concat(this.store.p2pId,"] create remote video track: ").concat(n._videoTrack.getTrackId()))),this.bindRemoteTrackEvents(n,n._videoTrack));const a=this.remoteUserMap.get(n);a?a.set(r,s):this.remoteUserMap.set(n,new Map([[r,s]])),this.statsCollector.addRemoteStats(n.uid),this.statsUploader.startUploadDownlinkStats();const c=this.pendingRemoteTracks.findIndex(e=>{let{user:t,kind:i}=e;return t.uid===n.uid&&r===i});-1!==c&&(this.pendingRemoteTracks.splice(c,1),this.emit(vS.MediaReconnectEnd,n.uid))})}async unsubscribe(e,t,i){const n=this.pendingRemoteTracks.filter(i=>{let{user:n,kind:r}=i;return void 0!==t?n.uid===e.uid&&t===r:n.uid===e.uid});if(n.forEach(e=>{const t=this.pendingRemoteTracks.indexOf(e);this.pendingRemoteTracks.splice(t,1)}),this.connection&&this.state===IS.Connected||i||n.forEach(t=>{let{kind:i}=t;var n;if(i===gS.AUDIO)null===(n=e._audioTrack)||void 0===n||n._destroy(),e._audioTrack=void 0;else if(i===gS.VIDEO){var r;null===(r=e._videoTrack)||void 0===r||r._destroy(),e._videoTrack=void 0}}),!this.connection||this.state!==IS.Connected)return;const r=this.filterTobeUnSubscribedTracks(e,t);if(0===r.length)return;await this.connection.stopReceiving(r.map(e=>{let[,{id:t}]=e;return t}));const o=this.createUnsubscribeMessage(r);return this.withdrawRemoteTracks(r),0===this.remoteUserMap.size&&this.statsUploader.stopUploadDownlinkStats(),r.forEach(e=>{let[t,{kind:n}]=e;var r,o;n===gS.VIDEO&&t._videoSSRC&&(null===(r=this.connection)||void 0===r||r.setStatsRemoteVideoIsReady(t._videoSSRC,!1));if(n===gS.VIDEO)this.unbindRemoteTrackEvents(t._videoTrack),i||(null===(o=t._videoTrack)||void 0===o||o._destroy(),t._videoTrack=void 0);else if(n===gS.AUDIO){var s;if(this.unbindRemoteTrackEvents(t._audioTrack),!i)null===(s=t._audioTrack)||void 0===s||s._destroy(),t._audioTrack=void 0}}),o}async massUnsubscribe(e){return this.massUnsubscribeNoLock(e)}async massUnsubscribeNoLock(e){let t=[];for(const{user:i,mediaType:n}of e){const e=this.pendingRemoteTracks.filter(e=>{let{user:t,kind:r}=e;return void 0!==n?t.uid===i.uid&&n===r:t.uid===i.uid});e.forEach(e=>{const t=this.pendingRemoteTracks.indexOf(e);this.pendingRemoteTracks.splice(t,1)}),t=t.concat(e)}if(!this.connection||this.state!==IS.Connected)return void t.forEach(e=>{let{user:t,kind:i}=e;var n;if(i===gS.AUDIO)null===(n=t._audioTrack)||void 0===n||n._destroy(),t._audioTrack=void 0;else if(i===gS.VIDEO){var r;null===(r=t._videoTrack)||void 0===r||r._destroy(),t._videoTrack=void 0}});const i=zi(e).call(e,(e,t)=>{let{user:i,mediaType:n}=t;const r=this.filterTobeUnSubscribedTracks(i,n);return e.concat(r)},[]);if(0===i.length)return;await this.connection.stopReceiving(i.map(e=>{let[,{id:t}]=e;return t}));const n=this.createUnsubscribeAllMessage(i);return this.withdrawRemoteTracks(i),0===this.remoteUserMap.size&&this.statsUploader.stopUploadDownlinkStats(),i.forEach(e=>{let[t,{kind:i}]=e;var n,r;i===gS.VIDEO&&t._videoSSRC&&(null===(n=this.connection)||void 0===n||n.setStatsRemoteVideoIsReady(t._videoSSRC,!1));if(i===gS.VIDEO)this.unbindRemoteTrackEvents(t._videoTrack),null===(r=t._videoTrack)||void 0===r||r._destroy(),t._videoTrack=void 0;else if(i===gS.AUDIO){var o;this.unbindRemoteTrackEvents(t._audioTrack),null===(o=t._audioTrack)||void 0===o||o._destroy(),t._audioTrack=void 0}}),n}async muteRemote(e,t){if(!this.connection)return;const i=this.remoteUserMap.get(e);if(!i)return void CE.warning("P2PChannel.muteRemote has no remote user ".concat(e.uid,"."));if(!i.get(t))return void CE.warning("P2PChannel.muteRemote has no remote user ".concat(e.uid," media type ").concat(t,"."));const n=t===gS.VIDEO?e._videoSSRC:e._audioSSRC;void 0!==n&&this.connection.setStatsRemoteVideoIsReady(n,!1)}async unmuteRemote(e,t){return this.unmuteRemoteNoLock(e,t)}async unmuteRemoteNoLock(e,t){if(!this.connection)return;const i=this.remoteUserMap.get(e);if(!i)return void CE.warning("P2PChannel.unmuteRemote has no remote user ".concat(e.uid,"."));i.get(t)||CE.warning("P2PChannel.unmuteRemote has no remote user ".concat(e.uid," media type ").concat(t,"."))}getAllTracks(e){const t=this.localTrackMap.get(RS.LocalAudioTrack);if((null==t?void 0:t.track)instanceof rI){const i=t.track;return Array.from(this.localTrackMap.entries()).filter(e=>{let[t]=e;return t!==RS.LocalAudioTrack}).filter(t=>{let[i]=t;return!(e&&i===RS.LocalVideoLowTrack)}).map(e=>{let[,{track:t}]=e;return t}).concat(i.trackList)}return Array.from(this.localTrackMap.entries()).filter(t=>{let[i]=t;return!(e&&i===RS.LocalVideoLowTrack)}).map(e=>{let[,{track:t}]=e;return t})}reportPublishEvent(e,t,i,n,r){if(e){const i=this.localTrackMap.get(RS.LocalAudioTrack),o=n?this.localTrackMap.get(RS.LocalVideoLowTrack):this.localTrackMap.get(RS.LocalVideoTrack);Tg.publish(this.store.sessionId,{eventElapse:aI.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:e,ec:t,audioName:null==i?void 0:i.track.getTrackLabel(),videoName:null==o?void 0:o.track.getTrackLabel(),screenshare:-1!==(null==o?void 0:o.track._hints.indexOf(aS.SCREEN_TRACK)),audio:!!i,video:!!o,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:r})}else{var o;i||(i=[]);const s=i.find(e=>e instanceof tI),a=n?null===(o=this.localTrackMap.get(RS.LocalVideoTrack))||void 0===o?void 0:o.track:i.find(e=>e instanceof QC);Tg.publish(this.store.sessionId,{eventElapse:aI.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:e,ec:t,audioName:null==s?void 0:s.getTrackLabel(),videoName:null==a?void 0:a.getTrackLabel(),screenshare:-1!==(null==a?void 0:a._hints.indexOf(aS.SCREEN_TRACK)),audio:!!s,video:!!a,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:r})}}reportSubscribeEvent(e,t,i,n){const r=n===gS.VIDEO?i._videoSSRC:i._audioSSRC;r&&Tg.subscribe(this.store.sessionId,{succ:e,ec:t,video:n===gS.VIDEO,audio:n===gS.AUDIO,peerid:i.uid,subscribeRequestid:n===gS.VIDEO?i._videoSSRC:i._audioSSRC,p2pid:this.store.p2pId,eventElapse:aI.measureFromSubscribeStart(this.store.clientId,r)})}reset(){CE.debug("P2PChannel.reset"),this.mutex=new vg("P2PChannel-mutex"),this.connection&&(this.connection.close(),this.unbindConnectionEvents(this.connection),this.connection=void 0),this.shouldForwardP2PCreation&&(this.connection=this.store.useDataChannel?new Gb({},this.store):this.isPlanB?new ZO({},this.store):new sb({},this.store),this.bindConnectionEvents(this.connection)),this.statsUploader.stopUploadUplinkStats(),this.statsUploader.stopUploadDownlinkStats(),this.statsUploader.stopUploadTransportStats(),this.statsUploader.stopUploadExtensionUsageStats(),this.unbindLocalTrackEvents(),this.unbindAllRemoteTrackEvents(),this.localTrackMap.clear(),this.remoteUserMap.clear(),this.statsCollector.removeRemoteStats(),this.statsCollector.removeLocalStats(),this.iceFailedCount=0,this.dtlsFailedCount=0,this.pendingLocalTracks=[],this.pendingRemoteTracks=[],this.state=IS.Disconnected}getStats(){var e;return null===(e=this.connection)||void 0===e?void 0:e.getStats()}getRemoteVideoIsReady(e){var t;return(null===(t=this.connection)||void 0===t?void 0:t.getRemoteVideoIsReady(e))||!1}getLocalAudioVolume(){const e=this.localTrackMap.get(RS.LocalAudioTrack);if(e)return e.track.getVolumeLevel()}getLocalVideoSize(){const e=this.localTrackMap.get(RS.LocalVideoTrack);if(e)return{width:e.track._videoWidth||0,height:e.track._videoHeight||0}}getEncoderConfig(e){const t=this.localTrackMap.get(e);return t&&t.track instanceof QC||t&&t.track instanceof tI?t.track._encoderConfig:void 0}getLocalMedia(e){return this.localTrackMap.get(e)}hasLocalMedia(){return this.localTrackMap.size>0}hasRemoteMedia(e,t){if(!e)return this.remoteUserMap.size>0;const i=this.remoteUserMap.get(e);return!!i&&(!t||i.has(t))}async hasRemoteMediaWithLock(e,t){if(!e)return this.remoteUserMap.size>0;const i=this.remoteUserMap.get(e);return!!i&&(!t||i.has(t))}getRemoteMedia(e){var t;const i=Array.from(ig(t=this.remoteUserMap).call(t)).find(t=>t.uid===e);return i?{audioTrack:i.audioTrack,audioSSRC:i._audioSSRC,videoTrack:i.videoTrack,videoSSRC:i._videoSSRC}:{}}getAudioLevels(){let e=Array.from(this.remoteUserMap.entries()).map(e=>{let[t]=e;return{uid:t.uid,level:t.audioTrack?100*t.audioTrack._source.getAccurateVolumeLevel():0}});const t=this.localTrackMap.get(RS.LocalAudioTrack);return t&&e.push({level:100*t.track._source.getAccurateVolumeLevel(),uid:this.store.uid}),e=jm(e).call(e,(e,t)=>e.level-t.level),e}async disconnectForReconnect(){this.connection&&(CE.debug("P2PChannel.disconnectForReconnect closing P2PConnection"),this.state=IS.Reconnecting,FE("KEEP_LAST_FRAME")&&0!==this.remoteUserMap.size&&Array.from(this.remoteUserMap.entries()).forEach(e=>{var t,i,n,r;let[o]=e;null===(t=o._videoTrack)||void 0===t||null===(i=t._player)||void 0===i||null===(n=i.getVideoElement())||void 0===n||n.pause(),null===(r=o._videoTrack)||void 0===r||r._originMediaStreamTrack.stop()}),this.connection.close(),this.unbindConnectionEvents(this.connection),this.connection=void 0,this.shouldForwardP2PCreation&&(this.connection=this.store.useDataChannel?new Gb({},this.store):this.isPlanB?new ZO({},this.store):new sb({},this.store),this.bindConnectionEvents(this.connection)),0!==this.localTrackMap.size&&(Array.from(this.localTrackMap.entries()).forEach(e=>{let[t,{track:i}]=e;switch(t){case RS.LocalVideoTrack:i._hints.includes(aS.LOW_STREAM)?i.close():this.pendingLocalTracks.push(i);break;case RS.LocalAudioTrack:i instanceof rI?this.pendingLocalTracks=this.pendingLocalTracks.concat(i.trackList):this.pendingLocalTracks.push(i);break;case RS.LocalVideoLowTrack:}}),this.emit(vS.MediaReconnectStart,this.store.uid)),this.unbindLocalTrackEvents(),this.localTrackMap.clear(),0!==this.remoteUserMap.size&&Array.from(this.remoteUserMap.entries()).forEach(e=>{let[t,i]=e;Array.from(ig(i).call(i)).forEach(e=>{this.setPendingRemoteMedia(t,e)}),this.emit(vS.MediaReconnectStart,t.uid)}),this.unbindAllRemoteTrackEvents(),this.remoteUserMap.clear(),this.statsUploader.stopUploadUplinkStats(),this.statsUploader.stopUploadDownlinkStats(),this.statsUploader.stopUploadTransportStats(),CE.debug("P2PChannel disconnected, waiting to reconnect."))}hasPendingRemoteMedia(e,t){for(const i of this.pendingRemoteTracks){const{user:n,kind:r}=i;if((e instanceof $C?e.uid:e)===n.uid&&t===r)return!0}return!1}setPendingRemoteMedia(e,t){this.hasPendingRemoteMedia(e,t)||this.pendingRemoteTracks.push({user:e,kind:t})}restartICE(){var e=this;return oO((function*(){if(!e.connection||e.state!==IS.Connected||e.connection instanceof Gb)return;const t=yield sO(e.mutex.lock("From P2PChannel.restartICE"));try{yield*cO(qb(e.connection.restartICE()),sO)}finally{t()}}))()}getUplinkNetworkQuality(){if(!this.connection)return 0;const e=this.connection.getStats(),t=this.localTrackMap.get(RS.LocalVideoTrack),i=this.localTrackMap.get(RS.LocalAudioTrack),n=e.videoSend.find(e=>e.ssrc===(null==t?void 0:t.ssrcs[0].ssrcId)),r=e.audioSend.find(e=>e.ssrc===(null==i?void 0:i.ssrcs[0].ssrcId));if(!n||!r)return 1;const o=UI(this,vS.NeedSignalRTT),s=n?n.rttMs:void 0,a=r?r.rttMs:void 0,c=s&&a?(s+a)/2:s||a,d=(c&&o?(c+o)/2:c||o)||0,u=100*e.sendPacketLossRate*.7/50+.3*d/1500,l=u<.17?1:u<.36?2:u<.59?3:u<.1?4:5,h=null==t?void 0:t.track;if(h&&h._encoderConfig&&-1===h._hints.indexOf(aS.SCREEN_TRACK)){const t=h._encoderConfig.bitrateMax,i=e.bitrate.actualEncoded;if(t&&i){const e=(1e3*t-i)/(1e3*t);return YE[e<.15?0:e<.3?1:e<.45?2:e<.6?3:4][l]}}return l}getDownlinkNetworkQuality(){if(!this.connection)return 0;const e=this.connection.getStats();let t=0;return Array.from(this.remoteUserMap.entries()).forEach(i=>{let[n]=i;const r=n._audioSSRC,o=n._videoSSRC,s=e.audioRecv.find(e=>e.ssrc===r),a=e.videoRecv.find(e=>e.ssrc===o);if(!s&&!a)return void(t+=1);const c=UI(this,vS.NeedSignalRTT),d=e.rtt,u=(d&&c?(d+c)/2:d||c)||0,l=s?s.jitterMs:void 0,h=e.recvPacketLossRate;let p=.7*h*100/50+.3*u/1500;l&&(p=.6*h*100/50+.2*u/1500+.2*l/400);t+=p<.1?1:p<.17?2:p<.36?3:p<.59?4:5}),this.remoteUserMap.size>0?Math.round(t/this.remoteUserMap.size):t}async muteLocalTrack(e){return new Sl((t,i)=>{this.handleMuteLocalTrack(e,t,i)})}filterTobePublishedTracks(e,t,i){const n=[],r=MS(),o=this.getAllTracks();e=FI(e=e.filter(e=>-1===o.indexOf(e)));let s=!1,a=!1;for(const o of e){if(o instanceof QC&&(this.localTrackMap.has(RS.LocalVideoTrack)||s?new EE(_E.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS).throw():(n.push({track:o,type:RS.LocalVideoTrack}),s=!0),t)){const e=this.getLowVideoTrack(o,i);n.push({track:e,type:RS.LocalVideoLowTrack})}if(o instanceof tI){const e=this.localTrackMap.get(RS.LocalAudioTrack);if(e){if(!(e.track instanceof rI))throw new EE(_E.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser does not support audio mixing");if(o._bypassWebAudio)throw new EE(_E.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");e.track.addAudioTrack(o),this.bindLocalAudioTrackEvents(o,!0)}else if(a){const e=n.find(e=>{let{type:t}=e;return t===RS.LocalAudioTrack});if(!(e.track instanceof rI))throw new EE(_E.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser does not support audio mixing");if(o._bypassWebAudio)throw new EE(_E.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");e.track.addAudioTrack(o)}else{if(!r.webAudioMediaStreamDest||o instanceof rI||o._bypassWebAudio)n.push({track:o,type:RS.LocalAudioTrack});else{const e=new rI;e.addAudioTrack(o),n.push({track:e,type:RS.LocalAudioTrack})}a=!0}}}return n}filterTobeUnpublishedTracks(e){const t=[],i=this.getAllTracks();e=FI(e=e.filter(e=>-1!==i.indexOf(e)));for(const i of e){if(i instanceof tI){const e=this.localTrackMap.get(RS.LocalAudioTrack);if(!e)continue;e.track instanceof rI?(e.track.removeAudioTrack(i),this.unbindLocalAudioTrackEvents(i),0===e.track.trackList.length&&(t.push([RS.LocalAudioTrack,e]),e.track.close())):t.push([RS.LocalAudioTrack,e])}if(i instanceof QC){const e=this.localTrackMap.get(RS.LocalVideoTrack);if(!e)continue;t.push([RS.LocalVideoTrack,e]);const i=this.localTrackMap.get(RS.LocalVideoLowTrack);i&&t.push([RS.LocalVideoLowTrack,i])}}return t}bindLocalTrackEvents(e){e.forEach(e=>{let{track:t,type:i}=e;switch(i){case RS.LocalVideoTrack:t.addListener(sS.GET_STATS,this.handleGetLocalVideoStats),t.addListener(sS.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),t.addListener(sS.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),t.addListener(sS.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),t.addListener(sS.SET_OPTIMIZATION_MODE,this.handleSetOptimizationMode),t.addListener(sS.NEED_REPLACE_TRACK,this.handleReplaceTrack),t.addListener(sS.NEED_MUTE_TRACK,this.handleMuteLocalTrack),t.addListener(sS.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case RS.LocalAudioTrack:this.bindLocalAudioTrackEvents(t);break;case RS.LocalVideoLowTrack:}})}bindLocalAudioTrackEvents(e,t){e instanceof rI?e.trackList.forEach(e=>{e.addListener(sS.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.addListener(sS.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.addListener(sS.GET_STATS,this.handleGetLocalAudioStats),e.addListener(sS.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.addListener(sS.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)}):(e.addListener(sS.GET_STATS,this.handleGetLocalAudioStats),e.addListener(sS.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.addListener(sS.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.addListener(sS.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.addListener(sS.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack),t||e.addListener(sS.NEED_REPLACE_TRACK,this.handleReplaceTrack))}unbindLocalTrackEvents(e){e||(e=Array.from(this.localTrackMap.entries()).map(e=>{let[t,{track:i}]=e;return{track:i,type:t}})),e.forEach(e=>{let{track:t,type:i}=e;switch(i){case RS.LocalVideoTrack:t.off(sS.GET_STATS,this.handleGetLocalVideoStats),t.off(sS.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),t.off(sS.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),t.off(sS.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),t.off(sS.SET_OPTIMIZATION_MODE,this.handleSetOptimizationMode),t.off(sS.NEED_REPLACE_TRACK,this.handleReplaceTrack),t.off(sS.NEED_MUTE_TRACK,this.handleMuteLocalTrack),t.off(sS.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case RS.LocalAudioTrack:this.unbindLocalAudioTrackEvents(t);break;case RS.LocalVideoLowTrack:}})}unbindLocalAudioTrackEvents(e){e instanceof rI?e.trackList.forEach(e=>{e.off(sS.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.off(sS.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.off(sS.GET_STATS,this.handleGetLocalAudioStats),e.off(sS.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.off(sS.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)}):(e.off(sS.GET_STATS,this.handleGetLocalAudioStats),e.off(sS.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.off(sS.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.off(sS.NEED_REPLACE_TRACK,this.handleReplaceTrack),e.off(sS.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.off(sS.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack))}bindRemoteTrackEvents(e,t){t instanceof Cb&&t.addListener(sS.GET_STATS,t=>{t(this.handleGetRemoteVideoStats(e))}),t instanceof yb&&t.addListener(sS.GET_STATS,t=>{t(this.handleGetRemoteAudioStats(e))})}unbindRemoteTrackEvents(e){e&&e.removeAllListeners(sS.GET_STATS)}unbindAllRemoteTrackEvents(){Array.from(this.remoteUserMap.entries()).forEach(e=>{let[t,i]=e;i.has(gS.AUDIO)&&this.unbindRemoteTrackEvents(t._audioTrack),i.has(gS.VIDEO)&&this.unbindRemoteTrackEvents(t._videoTrack)})}createGatewayPublishMessage(e,t){return e.map((e,i)=>{let n,r,{track:o,type:s}=e;switch(s){case RS.LocalAudioTrack:n=iS.Audio,r={dtx:o instanceof iI&&o._config.DTX,hq:!1,lq:!1,stereo:!1,speech:!1};break;case RS.LocalVideoTrack:n=o._hints.includes(aS.SCREEN_TRACK)?iS.Screen:iS.High,r=Yb(Yb({},fI(o)),{},{codec:this.store.codec});break;case RS.LocalVideoLowTrack:n=iS.Low,r=Yb(Yb({},fI(o)),{},{codec:this.store.codec})}return{stream_type:n,attributes:r,ssrcs:t[i]}})}createGatewayUnpublishMessage(e){return e.map(e=>{let t,[i,{track:n,ssrcs:r,id:o}]=e;switch(i){case RS.LocalVideoTrack:t=n._hints.includes(aS.SCREEN_TRACK)?iS.Screen:iS.High;break;case RS.LocalAudioTrack:t=iS.Audio;break;case RS.LocalVideoLowTrack:t=iS.Low}return{stream_type:t,ssrcs:r,mid:o}})}assignLocalTracks(e,t){e.forEach((e,i)=>{let{track:n,type:r}=e;this.localTrackMap.set(r,{track:n,id:t[i].id,ssrcs:t[i].localSSRC})})}withdrawLocalTracks(e){e.forEach(e=>{let[t]=e;this.localTrackMap.delete(t)})}bindConnectionEvents(e){e.onConnectionStateChange=async t=>{if(CE.info("[p2pId: ".concat(this.store.p2pId,"]: P2PConnection.onConnectionStateChange(").concat(t,")")),this.emit(vS.PeerConnectionStateChange,t),"connected"!==t||this.store.keyMetrics.peerConnectionEnd||this.store.peerConnectionEnd(),"disconnected"===t&&"disconnected"===e.iceConnectionState)return setTimeout(()=>{if("disconnected"===e.iceConnectionState&&FE("ICE_RESTART")){"CONNECTED"===UI(this,vS.QueryClientConnectionState)&&this.emit(vS.RequestRestartICE)}},800),void setTimeout(()=>{"disconnected"===e.peerConnectionState&&(CE.debug("P2PConnection disconnected timeout 4000ms, force reconnect"),setTimeout(()=>this.emit(vS.P2PLost),0),this.iceFailedCount+=1,this.requestReconnect())},4e3);"failed"===t&&(CE.debug("P2PConnection state failed, force reconnect"),setTimeout(()=>this.emit(vS.P2PLost),0),this.iceFailedCount+=1,await this.requestReconnect())},e.onICEConnectionStateChange=e=>{"connected"!==e||this.store.keyMetrics.iceConnectionEnd||this.store.iceConnectionEnd(),CE.info("[p2pId: ".concat(this.store.p2pId,"]: P2PConnection.onICEConnectionStateChange(").concat(e,")")),Tg.reportApiInvoke(this.store.sessionId,{name:"ICEConnectionStateChange",options:e,tag:lf.TRACER}).onSuccess(),this.emit(vS.IceConnectionStateChange,e)},e.onICETransportStateChange=e=>{CE.info("[p2pId: ".concat(this.store.p2pId,"]: P2PConnection.onICETransportStateChange(").concat(e,")"))},e.onDTLSTransportStateChange=e=>{CE.info("[p2pId: ".concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportStateChange(").concat(e,")"))},e.onDTLSTransportError=e=>{CE.info("[p2pId: ".concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportError(").concat(e,")"))},e.onFirstAudioDecoded=e=>{var t;const i=Array.from(ig(t=this.remoteUserMap).call(t)).find(t=>t._audioSSRC===e);var n;i&&(this.store.subscribe(i.uid,"audio",void 0,void 0,void 0,Date.now()),null===(n=i.audioTrack)||void 0===n||n.emit(lS.FIRST_FRAME_DECODED),Tg.firstRemoteFrame(this.store.sessionId,sf.FIRST_AUDIO_DECODE,af.FIRST_AUDIO_DECODE,{peer:i._uintid,subscribeElapse:aI.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId}))},e.onFirstAudioReceived=e=>{var t;const i=Array.from(ig(t=this.remoteUserMap).call(t)).find(t=>t._audioSSRC===e);i&&Tg.firstRemoteFrame(this.store.sessionId,sf.FIRST_AUDIO_RECEIVED,af.FIRST_AUDIO_RECEIVED,{peer:i._uintid,subscribeElapse:aI.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId})},e.onFirstVideoDecoded=(e,t,i)=>{this.reportVideoFirstFrameDecoded(e,t,i)},e.onFirstVideoReceived=e=>{var t;const i=Array.from(ig(t=this.remoteUserMap).call(t)).find(t=>t._videoSSRC===e);i&&Tg.firstRemoteFrame(this.store.sessionId,sf.FIRST_VIDEO_RECEIVED,af.FIRST_VIDEO_RECEIVED,{peer:i._uintid,subscribeElapse:aI.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId})},e.onSelectedLocalCandidateChanged=(e,t)=>{const i="relay"===e.candidateType,n="relay"===t.candidateType;"unknown"!==t.candidateType&&i===n||this.emit(vS.ConnectionTypeChange,i),CE.info("[p2pId: ".concat(this.store.p2pId,"]: P2PConnection.SelectedLocalCandidateChanged(").concat(JSON.stringify(vI(t))," -> ").concat(JSON.stringify(vI(e)),")"))},e.onSelectedRemoteCandidateChanged=(e,t)=>{CE.info("[p2pId: ".concat(this.store.p2pId,"]: P2PConnection.SelectedRemoteCandidateChanged(").concat(JSON.stringify(vI(t))," -> ").concat(JSON.stringify(vI(e)),")"))},e.onFirstVideoDecodedTimeout=e=>{this.reportVideoFirstFrameDecoded(e,void 0,void 0,!0)}}unbindConnectionEvents(e){e.onConnectionStateChange=void 0,e.onICEConnectionStateChange=void 0,e.onICETransportStateChange=void 0,e.onDTLSTransportStateChange=void 0,e.onDTLSTransportError=void 0,e.onFirstAudioDecoded=void 0,e.onFirstAudioReceived=void 0,e.onFirstVideoDecoded=void 0,e.onFirstVideoReceived=void 0,e.onSelectedLocalCandidateChanged=void 0,e.onSelectedRemoteCandidateChanged=void 0,e.onFirstVideoDecodedTimeout=void 0}filterTobeMutedTracks(e){const t=[];if(-1===this.getAllTracks().indexOf(e))return t;const i=this.localTrackMap.get(RS.LocalAudioTrack);if(e instanceof tI&&(null==i?void 0:i.track)instanceof rI)return i.track.isActive||t.push([RS.LocalAudioTrack,i]),t;const n=Array.from(this.localTrackMap.entries()).find(t=>{let[,{track:i}]=t;return e===i});if(n&&(t.push(n),n[0]===RS.LocalVideoTrack)){const e=this.localTrackMap.get(RS.LocalVideoLowTrack);e&&t.push([RS.LocalVideoLowTrack,e])}return t}filterTobeUnmutedTracks(e){const t=[],i=this.localTrackMap.get(RS.LocalAudioTrack);if(e instanceof tI&&(null==i?void 0:i.track)instanceof rI)return i.track.isActive&&t.push([RS.LocalAudioTrack,i]),t;const n=Array.from(this.localTrackMap.entries()).find(t=>{let[,{track:i}]=t;return e===i});if(n)if(n[0]===RS.LocalVideoTrack){t.push(n);const e=this.localTrackMap.get(RS.LocalVideoLowTrack);e&&t.push([RS.LocalVideoLowTrack,e])}else t.push(n);return t}createMuteMessage(e){return e.map(e=>{let t,[i,{track:n,ssrcs:r,id:o}]=e;switch(i){case RS.LocalAudioTrack:t=iS.Audio;break;case RS.LocalVideoTrack:t=n._hints.includes(aS.SCREEN_TRACK)?iS.Screen:iS.High;break;case RS.LocalVideoLowTrack:t=iS.Low}return{stream_type:t,ssrcs:r,mid:o}})}createUnmuteMessage(e){return e.map(e=>{let t,[i,{track:n,ssrcs:r,id:o}]=e;switch(i){case RS.LocalAudioTrack:t=iS.Audio;break;case RS.LocalVideoTrack:t=n._hints.includes(aS.SCREEN_TRACK)?iS.Screen:iS.High;break;case RS.LocalVideoLowTrack:t=iS.Low}return{stream_type:t,ssrcs:r,mid:o}})}filterTobeUnSubscribedTracks(e,t){const i=[],n=this.remoteUserMap.get(e);if(!n)return i;if(t){const r=n.get(t);if(!r)return i;i.push([e,{kind:t,id:r}])}else Array.from(n.entries()).forEach(t=>{let[n,r]=t;i.push([e,{kind:n,id:r}])});return i}createUnsubscribeMessage(e){const t=[];return e.forEach(e=>{let[i,{kind:n,id:r}]=e;switch(n){case gS.VIDEO:return void(i._videoSSRC&&t.push({stream_type:gS.VIDEO,ssrcId:i._videoSSRC}));case gS.AUDIO:return void(i._audioSSRC&&t.push({stream_type:gS.AUDIO,ssrcId:i._audioSSRC}))}}),t}createUnsubscribeAllMessage(e){const t=new Map;return e.forEach(e=>{let[i,{kind:n}]=e;if(t.has(i)){let e=t.get(i);n===gS.VIDEO?e|=rS.Video:e|=rS.Audio,t.set(i,e)}else n===gS.VIDEO?t.set(i,rS.Video):t.set(i,rS.Audio)}),{users:Array.from(t.entries()).map(e=>{let[t,i]=e;return{stream_id:t.uid,stream_type:i}})}}withdrawRemoteTracks(e){e.forEach(e=>{let[t,{kind:i}]=e;const n=this.remoteUserMap.get(t);n&&(n.delete(i),0===Array.from(n.entries()).length&&this.remoteUserMap.delete(t))})}async updateBitrateLimit(e){const t=this.localTrackMap.get(RS.LocalVideoTrack),i=this.localTrackMap.get(RS.LocalVideoLowTrack);t&&await t.track.setBitrateLimit(e.uplink),i&&e.low_stream_uplink&&await i.track.setBitrateLimit({max_bitrate:e.low_stream_uplink.bitrate,min_bitrate:e.low_stream_uplink.bitrate||0})}isP2PDisconnected(){if(this.connection){return"connected"!==this.connection.peerConnectionState}return!0}mapPubResToRemoteConfig(e,t){return e.map((e,i)=>{var n;let{stream_type:r}=e;return null===(n=t.find(e=>{let{stream_type:t}=e;return r===t}))||void 0===n?void 0:n.attributes})}async tryToUnmuteAudio(e){for(let i=0;i<e.length;i++)if(e[i]instanceof tI){var t;const n=this.filterTobeUnmutedTracks(e[i]);if(0===n.length)continue;await(null===(t=this.connection)||void 0===t?void 0:t.unmuteLocal(n.map(e=>{let[,{id:t}]=e;return t})));const r=this.createUnmuteMessage(n);return void await MI(this,vS.RequestUnmuteLocal,r)}}bindStatsUploaderEvents(){this.statsUploader.requestStats=()=>this.getStats(),this.statsUploader.requestLocalMedia=()=>Array.from(this.localTrackMap.entries()),this.statsUploader.requestRemoteMedia=()=>Array.from(this.remoteUserMap.entries()),this.statsUploader.requestVideoIsReady=e=>{var t;return!(null===(t=this.connection)||void 0===t||!t.getRemoteVideoIsReady(e))},this.statsUploader.requestUpload=(e,t)=>this.emit(vS.RequestUploadStats,e,t),this.statsUploader.requestAllTracks=()=>this.getAllTracks()}unbindStatsUploaderEvents(){this.statsUploader.requestStats=void 0,this.statsUploader.requestLocalMedia=void 0,this.statsUploader.requestRemoteMedia=void 0,this.statsUploader.requestVideoIsReady=void 0}async requestReconnect(){this.dtlsFailedCount+=1,await OI(fE(this.dtlsFailedCount,mE)),this.emit(vS.RequestReconnect)}async reconnectP2P(){const e=Array.from(this.localTrackMap.entries()),t=this.createGatewayUnpublishMessage(e);Array.from(this.remoteUserMap.entries()),t.length>0&&await kI(this,vS.RequestUnpublishForReconnectPC,t),this.disconnectForReconnect(),this.emit(vS.RequestReconnectPC)}canPublishLowStream(){return this.localTrackMap.has(RS.LocalVideoTrack)||this.pendingLocalTracks.some(e=>e instanceof QC)}throwIfTrackTypeNotMatch(e){if(e.filter(e=>e instanceof QC).length>1)throw new EE(_E.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(e.filter(e=>e instanceof tI).length>1&&(e.some(e=>e instanceof tI&&e._bypassWebAudio)||!MS().webAudioMediaStreamDest))throw new EE(_E.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode");for(const t of e){if(t instanceof QC&&this.pendingLocalTracks.some(e=>e instanceof QC))throw new EE(_E.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(t instanceof tI&&this.pendingLocalTracks.some(e=>e instanceof tI)&&(!MS().webAudioMediaStreamDest||t._bypassWebAudio||this.pendingLocalTracks.some(e=>e instanceof tI&&e._bypassWebAudio)))throw new EE(_E.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode")}}getLowVideoTrack(e,t){const i=MS().supportDualStreamEncoding,n=Yb(Yb({},{width:160,height:120,framerate:15,bitrate:50}),t);let r;r=i?e._mediaStreamTrack.clone():cb(e,n);const o=wI(8,"track-low-"),s=new QC(r,Yb(Yb({},i&&{scaleResolutionDownBy:II(n,e)}),{},{frameRate:n.framerate,bitrateMax:n.bitrate,bitrateMin:n.bitrate}),void 0,void 0,o);return s._hints.push(aS.LOW_STREAM),e.addListener(sS.NEED_CLOSE,()=>{s.close()}),s}async globalLock(){return this.mutex.lock("From P2PChannel.globalLock")}reportVideoFirstFrameDecoded(e,t,i,n){var r;const o=Array.from(ig(r=this.remoteUserMap).call(r)).find(t=>t._videoSSRC===e);if(o){n||this.store.subscribe(o.uid,"video",void 0,void 0,void 0,void 0,Date.now());const r=this.store.keyMetrics,s=r.subscribe.find(e=>e.userId===o.uid&&"video"===e.type);Tg.firstRemoteVideoDecode(this.store.sessionId,sf.FIRST_VIDEO_DECODE,af.FIRST_VIDEO_DECODE,{peer:o._uintid,videowidth:t,videoheight:i,subscribeElapse:aI.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId,apEnd:r.requestAPEnd||0,apStart:r.requestAPStart||0,joinGwEnd:r.joinGatewayEnd||0,joinGwStart:r.joinGatewayStart||0,pcEnd:r.peerConnectionEnd||0,pcStart:r.peerConnectionStart||0,subscriberEnd:(null==s?void 0:s.subscribeEnd)||0,subscriberStart:(null==s?void 0:s.subscribeStart)||0,videoAddNotify:(null==s?void 0:s.streamAdded)||0,state:n?1:0})}}async remoteMediaSsrcChanged(e,t,i){if(!this.connection)return!1;const n=this.remoteUserMap.get(e);if(!n)return!1;const r=n.get(t);if(!r)return!1;const o=await this.connection.getRemoteSSRC(r);return void 0!==o&&o!==i}resetConnection(e){CE.debug("[P2PChannel] reset connection to ".concat(e)),this.state===IS.Connected?(CE.debug("[P2PChannel] fallback to websocket but P2PChannel state still connected, disconnect first"),this.disconnectForReconnect()):(this.connection&&(this.connection.close(),this.unbindConnectionEvents(this.connection),this.connection=void 0),this.shouldForwardP2PCreation&&(this.connection=e===oS.datachannel?new Gb({},this.store):this.isPlanB?new ZO({},this.store):new sb({},this.store),this.bindConnectionEvents(this.connection)))}}).prototype,"startP2PConnection",[zb],Object.getOwnPropertyDescriptor(Hb.prototype,"startP2PConnection"),Hb.prototype),JT(Hb.prototype,"connect",[zb],Object.getOwnPropertyDescriptor(Hb.prototype,"connect"),Hb.prototype),JT(Hb.prototype,"preConnect",[zb],Object.getOwnPropertyDescriptor(Hb.prototype,"preConnect"),Hb.prototype),JT(Hb.prototype,"unpublish",[zb],Object.getOwnPropertyDescriptor(Hb.prototype,"unpublish"),Hb.prototype),JT(Hb.prototype,"unpublishLowStream",[zb],Object.getOwnPropertyDescriptor(Hb.prototype,"unpublishLowStream"),Hb.prototype),JT(Hb.prototype,"subscribe",[zb],Object.getOwnPropertyDescriptor(Hb.prototype,"subscribe"),Hb.prototype),JT(Hb.prototype,"massSubscribe",[zb],Object.getOwnPropertyDescriptor(Hb.prototype,"massSubscribe"),Hb.prototype),JT(Hb.prototype,"unsubscribe",[zb],Object.getOwnPropertyDescriptor(Hb.prototype,"unsubscribe"),Hb.prototype),JT(Hb.prototype,"massUnsubscribe",[zb],Object.getOwnPropertyDescriptor(Hb.prototype,"massUnsubscribe"),Hb.prototype),JT(Hb.prototype,"muteRemote",[zb],Object.getOwnPropertyDescriptor(Hb.prototype,"muteRemote"),Hb.prototype),JT(Hb.prototype,"unmuteRemote",[zb],Object.getOwnPropertyDescriptor(Hb.prototype,"unmuteRemote"),Hb.prototype),JT(Hb.prototype,"hasRemoteMediaWithLock",[zb],Object.getOwnPropertyDescriptor(Hb.prototype,"hasRemoteMediaWithLock"),Hb.prototype),JT(Hb.prototype,"disconnectForReconnect",[zb],Object.getOwnPropertyDescriptor(Hb.prototype,"disconnectForReconnect"),Hb.prototype),JT(Hb.prototype,"updateBitrateLimit",[zb],Object.getOwnPropertyDescriptor(Hb.prototype,"updateBitrateLimit"),Hb.prototype),JT(Hb.prototype,"remoteMediaSsrcChanged",[zb],Object.getOwnPropertyDescriptor(Hb.prototype,"remoteMediaSsrcChanged"),Hb.prototype),Hb);function zb(e,t,i){const n=e[t];if("function"!=typeof n)throw new Error("Cannot use mutex on object property.");return i.value=async function(){const e=this.mutex,i=await e.lock("From P2PChannel.".concat(t));try{for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return await n.apply(this,o)}finally{i()}},i}function Qb(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function Zb(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Qb(Object(i),!0).forEach((function(t){lp(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Qb(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var $b;!function(e){e.SET_SESSION_ID="SET_SESSION_ID",e.SET_P2P_ID="SET_P2P_id",e.SET_DC_ID="SET_DC_id",e.SET_UID="SET_UID",e.SET_PUB_ID="SET_PUB_ID",e.SET_CLOUD_PROXY_SERVER_MODE="SET_CLOUD_PROXY_SERVER_MODE",e.KEY_METRIC_CLIENT_CREATED="KEY_METRIC_CLIENT_CREATED",e.KEY_METRIC_JOIN_START="KEY_METRIC_JOIN_START",e.AVOID_JOIN_START="AVOID_JOIN_START",e.KEY_METRIC_JOIN_END="KEY_METRIC_JOIN_END",e.KEY_METRIC_REQUEST_AP_START="KEY_METRIC_REQUEST_AP_START",e.KEY_METRIC_REQUEST_AP_END="KEY_METRIC_REQUEST_AP_END",e.KEY_METRIC_JOIN_GATEWAY_START="KEY_METRIC_JOIN_GATEWAY_START",e.KEY_METRIC_JOIN_GATEWAY_END="KEY_METRIC_JOIN_GATEWAY_END",e.KEY_METRIC_PEER_CONNECTION_START="KEY_METRIC_PEER_CONNECTION_START",e.KEY_METRIC_PEER_CONNECTION_END="KEY_METRIC_PEER_CONNECTION_END",e.KEY_METRIC_ICE_CONNECTION_END="KEY_METRIC_ICE_CONNECTION_END",e.KEY_METRIC_SIGNAL_CHANNEL_OPEN="KEY_METRIC_SIGNAL_CHANNEL_OPEN",e.KEY_METRIC_PUBLISH="KEY_METRIC_PUBLISH",e.KEY_METRIC_SUBSCRIBE="KEY_METRIC_SUBSCRIBE",e.RECORD_JOIN_CHANNEL_SERVICE="RECORD_JOIN_CHANNEL_SERVICE",e.RESET_JOIN_CHANNEL_SERVICE_RECORDS="RESET_JOIN_CHANNEL_SERVICE_RECORDS",e.RESET_KEY_METRICS="RESET_KEY_METRICS",e.SET_USE_DATACHANNEL="SET_USE_DATACHANNEL"}($b||($b={}));class ew{constructor(e,t,i,n){lp(this,"state",void 0),this.state={codec:e,audioCodec:t,mode:i,clientId:n,sessionId:null,p2pId:0,dcId:0,pubId:0,subId:0,avoidJoinStart:0,keyMetrics:{publish:[],subscribe:[]},joinChannelServiceRecords:[],cloudProxyServerMode:"disabled",useDataChannel:!1}}dispatch(e){this.state=function(e,t){switch(t.type){case $b.SET_SESSION_ID:return Zb(Zb({},e),{},{sessionId:t.sessionId});case $b.SET_P2P_ID:return Zb(Zb({},e),{},{p2pId:t.p2pId});case $b.SET_UID:return Zb(Zb({},e),{},{uid:t.uid});case $b.SET_PUB_ID:return Zb(Zb({},e),{},{pubId:t.pubId});case $b.KEY_METRIC_CLIENT_CREATED:return Zb(Zb({},e),{},{keyMetrics:Zb(Zb({},e.keyMetrics),{},{clientCreated:t.metric})});case $b.KEY_METRIC_JOIN_START:return Zb(Zb({},e),{},{keyMetrics:Zb(Zb({},e.keyMetrics),{},{joinStart:t.metric})});case $b.AVOID_JOIN_START:return Zb(Zb({},e),{},{avoidJoinStart:t.avoidJoinStart});case $b.KEY_METRIC_JOIN_END:return Zb(Zb({},e),{},{keyMetrics:Zb(Zb({},e.keyMetrics),{},{joinEnd:t.metric})});case $b.KEY_METRIC_REQUEST_AP_START:return Zb(Zb({},e),{},{keyMetrics:Zb(Zb({},e.keyMetrics),{},{requestAPStart:t.metric})});case $b.KEY_METRIC_REQUEST_AP_END:return Zb(Zb({},e),{},{keyMetrics:Zb(Zb({},e.keyMetrics),{},{requestAPEnd:t.metric})});case $b.KEY_METRIC_JOIN_GATEWAY_START:return Zb(Zb({},e),{},{keyMetrics:Zb(Zb({},e.keyMetrics),{},{joinGatewayStart:t.metric})});case $b.KEY_METRIC_JOIN_GATEWAY_END:return Zb(Zb({},e),{},{keyMetrics:Zb(Zb({},e.keyMetrics),{},{joinGatewayEnd:t.metric})});case $b.KEY_METRIC_PEER_CONNECTION_START:return Zb(Zb({},e),{},{keyMetrics:Zb(Zb({},e.keyMetrics),{},{peerConnectionStart:t.metric})});case $b.KEY_METRIC_PEER_CONNECTION_END:return Zb(Zb({},e),{},{keyMetrics:Zb(Zb({},e.keyMetrics),{},{peerConnectionEnd:t.metric})});case $b.KEY_METRIC_SIGNAL_CHANNEL_OPEN:return Zb(Zb({},e),{},{keyMetrics:Zb(Zb({},e.keyMetrics),{},{signalChannelOpen:t.metric})});case $b.KEY_METRIC_ICE_CONNECTION_END:return Zb(Zb({},e),{},{keyMetrics:Zb(Zb({},e.keyMetrics),{},{iceConnectionEnd:t.metric})});case $b.KEY_METRIC_PUBLISH:{const i=e.keyMetrics.publish,n=i.findIndex(e=>e.trackId===t.metric.trackId);return-1!==n?(i[n]=Zb(Zb({},i[n]),t.metric),Zb(Zb({},e),{},{keyMetrics:Zb(Zb({},e.keyMetrics),{},{publish:[...i]})})):Zb(Zb({},e),{},{keyMetrics:Zb(Zb({},e.keyMetrics),{},{publish:[...e.keyMetrics.publish,t.metric]})})}case $b.KEY_METRIC_SUBSCRIBE:{const i=e.keyMetrics.subscribe,n=i.findIndex(e=>e.userId===t.metric.userId&&e.type===t.metric.type);return-1!==n?(i[n]=Zb(Zb({},i[n]),t.metric),Zb(Zb({},e),{},{keyMetrics:Zb(Zb({},e.keyMetrics),{},{subscribe:[...i]})})):Zb(Zb({},e),{},{keyMetrics:Zb(Zb({},e.keyMetrics),{},{subscribe:[...e.keyMetrics.subscribe,t.metric]})})}case $b.SET_CLOUD_PROXY_SERVER_MODE:return e.cloudProxyServerMode=t.mode,e;case $b.RECORD_JOIN_CHANNEL_SERVICE:return"number"!=typeof t.index?e.joinChannelServiceRecords=[...e.joinChannelServiceRecords,t.record]:(e.joinChannelServiceRecords[t.index]=Zb(Zb({},e.joinChannelServiceRecords[t.index]),t.record),e.joinChannelServiceRecords=[...e.joinChannelServiceRecords]),e;case $b.RESET_JOIN_CHANNEL_SERVICE_RECORDS:return e.joinChannelServiceRecords=[],e;case $b.RESET_KEY_METRICS:return e.keyMetrics={publish:[],subscribe:[]},e;case $b.SET_USE_DATACHANNEL:return Zb(Zb({},e),{},{useDataChannel:t.val});default:return e}}(this.state,e)}set sessionId(e){this.dispatch({type:$b.SET_SESSION_ID,sessionId:e})}get sessionId(){return this.state.sessionId}get codec(){return this.state.codec}get audioCodec(){return this.state.audioCodec}get clientId(){return this.state.clientId}set p2pId(e){this.dispatch({type:$b.SET_P2P_ID,p2pId:e})}get p2pId(){return this.state.p2pId}set dcId(e){this.dispatch({type:$b.SET_DC_ID,dcId:e})}get dcId(){return this.state.dcId}set uid(e){this.dispatch({type:$b.SET_UID,uid:e})}get uid(){return this.state.uid}set pubId(e){this.dispatch({type:$b.SET_PUB_ID,pubId:e})}get pubId(){return this.state.pubId}set cloudProxyServerMode(e){this.dispatch({type:$b.SET_CLOUD_PROXY_SERVER_MODE,mode:e})}get cloudProxyServerMode(){return this.state.cloudProxyServerMode}set useDataChannel(e){this.dispatch({type:$b.SET_USE_DATACHANNEL,val:e})}get useDataChannel(){return this.state.useDataChannel}clientCreated(){this.dispatch({type:$b.KEY_METRIC_CLIENT_CREATED,metric:Date.now()})}joinStart(){this.dispatch({type:$b.KEY_METRIC_JOIN_START,metric:Date.now()})}joinEnd(){this.dispatch({type:$b.KEY_METRIC_JOIN_END,metric:Date.now()})}requestAPStart(){this.dispatch({type:$b.KEY_METRIC_REQUEST_AP_START,metric:Date.now()})}requestAPEnd(){this.dispatch({type:$b.KEY_METRIC_REQUEST_AP_END,metric:Date.now()})}joinGatewayStart(){this.dispatch({type:$b.KEY_METRIC_JOIN_GATEWAY_START,metric:Date.now()})}joinGatewayEnd(){this.dispatch({type:$b.KEY_METRIC_JOIN_GATEWAY_END,metric:Date.now()})}peerConnectionStart(){this.dispatch({type:$b.KEY_METRIC_PEER_CONNECTION_START,metric:Date.now()})}peerConnectionEnd(){this.dispatch({type:$b.KEY_METRIC_PEER_CONNECTION_END,metric:Date.now()})}signalChannelOpen(){this.dispatch({type:$b.KEY_METRIC_SIGNAL_CHANNEL_OPEN,metric:Date.now()})}iceConnectionEnd(){this.dispatch({type:$b.KEY_METRIC_ICE_CONNECTION_END,metric:Date.now()})}publish(e,t,i,n){this.dispatch({type:$b.KEY_METRIC_PUBLISH,metric:Zb(Zb({trackId:e,type:t},i&&{publishStart:i}),n&&{publishEnd:n})})}subscribe(e,t,i,n,r,o,s){this.dispatch({type:$b.KEY_METRIC_SUBSCRIBE,metric:Zb(Zb(Zb(Zb(Zb({userId:e,type:t},i&&{subscribeStart:i}),n&&{subscribeEnd:n}),r&&{firstFrame:r}),o&&{streamAdded:o}),s&&{firstDecoded:s})})}massSubscribe(e,t,i,n){e.forEach(e=>{this.dispatch({type:$b.KEY_METRIC_SUBSCRIBE,metric:Zb(Zb(Zb({userId:e.userId,type:e.type},t&&{subscribeStart:t}),i&&{subscribeEnd:i}),n&&{firstFrame:n})})})}get keyMetrics(){return this.state.keyMetrics}recordJoinChannelService(e,t){"gateway"===e.service&&Array.isArray(e.urls)&&(e.urls=e.urls.map(e=>e.replace(/(\d+)-\d+-\d+-(\d+)/,"$1-*-*-$2")));try{return"number"!=typeof t?(this.dispatch({type:$b.RECORD_JOIN_CHANNEL_SERVICE,record:Zb(Zb({},e),{},{sessionId:this.sessionId,cloudProxyMode:this.cloudProxyServerMode,uid:this.uid})}),this.state.joinChannelServiceRecords.length-1):(t<0||t>=this.state.joinChannelServiceRecords.length||this.dispatch({type:$b.RECORD_JOIN_CHANNEL_SERVICE,record:e,index:t}),t)}catch(e){return 0}}resetJoinChannelServiceRecords(){this.dispatch({type:$b.RESET_JOIN_CHANNEL_SERVICE_RECORDS})}resetKeyMetrics(){this.dispatch({type:$b.RESET_KEY_METRICS})}get joinChannelServiceRecords(){try{return this.state.joinChannelServiceRecords}catch(e){return[]}}get avoidJoinStart(){return this.state.avoidJoinStart}set avoidJoinStart(e){this.dispatch({type:$b.AVOID_JOIN_START,avoidJoinStart:e})}}let tw;const iw=()=>"HTTPS"===(tw||tw||(tw=(window.location.protocol.split(":")[0]||"").toUpperCase(),tw)),nw=()=>void 0!==window.isSecureContext;function rw(e){let t=Ew();return function(e,t){let i=e.appId;void 0!==i&&(ww(t,10),Iw(t,i));let n=e.cid;void 0!==n&&(ww(t,16),ww(t,n));let r=e.cname;void 0!==r&&(ww(t,26),Iw(t,r));let o=e.deviceId;void 0!==o&&(ww(t,34),Iw(t,o));let s=e.elapse;void 0!==s&&(ww(t,40),Nw(t,s));let a=e.fileSize;void 0!==a&&(ww(t,48),Nw(t,pw(a)));let c=e.height;void 0!==c&&(ww(t,56),Nw(t,pw(c)));let d=e.jpg;void 0!==d&&(ww(t,66),ww(t,d.length),function(e,t){let i=Tw(e,t.length);e.bytes.set(t,i)}(t,d));let u=e.networkType;void 0!==u&&(ww(t,72),Nw(t,pw(u)));let l=e.osType;void 0!==l&&(ww(t,80),Nw(t,pw(l)));let h=e.requestId;void 0!==h&&(ww(t,90),Iw(t,h));let p=e.sdkVersion;void 0!==p&&(ww(t,98),Iw(t,p));let _=e.sequence;void 0!==_&&(ww(t,104),Nw(t,pw(_)));let E=e.sid;void 0!==E&&(ww(t,114),Iw(t,E));let m=e.timestamp;void 0!==m&&(ww(t,120),Nw(t,m));let f=e.uid;void 0!==f&&(ww(t,128),ww(t,f));let S=e.vid;void 0!==S&&(ww(t,136),ww(t,S));let T=e.width;void 0!==T&&(ww(t,144),Nw(t,pw(T)));let g=e.service;void 0!==g&&(ww(t,152),ww(t,g));let R=e.callbackData;void 0!==R&&(ww(t,162),Iw(t,R));let I=e.jpgEncryption;void 0!==I&&(ww(t,168),ww(t,I));let v=e.requestType;void 0!==v&&(ww(t,176),ww(t,v));let C=e.scorePorn;void 0!==C&&(ww(t,185),Ow(t,C));let y=e.scoreSexy;void 0!==y&&(ww(t,193),Ow(t,y));let A=e.scoreNeutral;void 0!==A&&(ww(t,201),Ow(t,A));let O=e.scene;void 0!==O&&(ww(t,208),ww(t,O));let b=e.ossFilePrefix;void 0!==b&&(ww(t,218),Iw(t,b));let w=e.serviceVendor;if(void 0!==w)for(let e of w){ww(t,226);let i=Ew();aw(e,i),ww(t,i.limit),vw(t,i),mw(i)}}(e,t),function(e){let t=e.bytes,i=e.limit;return t.length===i?t:t.subarray(0,i)}(t)}function ow(e){return function(e){let t={};e:for(;!Sw(e);){let i=bw(e);switch(i>>>3){case 0:break e;case 1:t.code=bw(e);break;case 2:t.msg=Rw(e,bw(e));break;case 3:{let i=cw(e);t.data=sw(e),e.limit=i;break}default:dw(e,7&i)}}return t}({bytes:t=e,offset:0,limit:t.length});var t}function sw(e){let t={};e:for(;!Sw(e);){let i=bw(e);switch(i>>>3){case 0:break e;case 1:t.requestId=Rw(e,bw(e));break;case 2:t.requestType=bw(e)>>>0;break;case 3:t.scorePorn=Aw(e);break;case 4:t.scoreSexy=Aw(e);break;case 5:t.scoreNeutral=Aw(e);break;case 6:t.requestScene=bw(e)>>>0;break;case 7:t.scene=bw(e)>>>0;break;default:dw(e,7&i)}}return t}function aw(e,t){let i=e.service;void 0!==i&&(ww(t,8),ww(t,i));let n=e.vendor;void 0!==n&&(ww(t,16),ww(t,n));let r=e.token;void 0!==r&&(ww(t,26),Iw(t,r));let o=e.callbackUrl;void 0!==o&&(ww(t,34),Iw(t,o))}function cw(e){let t=bw(e),i=e.limit;return e.limit=e.offset+t,i}function dw(e,t){switch(t){case 0:for(;128&Cw(e););break;case 2:fw(e,bw(e));break;case 5:fw(e,4);break;case 1:fw(e,8);break;default:throw new Error("Unimplemented type: "+t)}}let uw=new Float32Array(1);new Uint8Array(uw.buffer);let lw=new Float64Array(1),hw=new Uint8Array(lw.buffer);function pw(e){return{low:e|=0,high:e>>31,unsigned:e>=0}}let _w=[];function Ew(){const e=_w.pop();return e?(e.offset=e.limit=0,e):{bytes:new Uint8Array(64),offset:0,limit:0}}function mw(e){_w.push(e)}function fw(e,t){if(e.offset+t>e.limit)throw new Error("Skip past limit");e.offset+=t}function Sw(e){return e.offset>=e.limit}function Tw(e,t){let i=e.bytes,n=e.offset,r=e.limit,o=n+t;if(o>i.length){let t=new Uint8Array(2*o);t.set(i),e.bytes=t}return e.offset=o,o>r&&(e.limit=o),n}function gw(e,t){let i=e.offset;if(i+t>e.limit)throw new Error("Read past limit");return e.offset+=t,i}function Rw(e,t){let i=gw(e,t),n=String.fromCharCode,r=e.bytes,o="�",s="";for(let e=0;e<t;e++){let a,c,d,u,l=r[e+i];0==(128&l)?s+=n(l):192==(224&l)?e+1>=t?s+=o:(a=r[e+i+1],128!=(192&a)?s+=o:(u=(31&l)<<6|63&a,u<128?s+=o:(s+=n(u),e++))):224==(240&l)?e+2>=t?s+=o:(a=r[e+i+1],c=r[e+i+2],32896!=(49344&(a|c<<8))?s+=o:(u=(15&l)<<12|(63&a)<<6|63&c,u<2048||u>=55296&&u<=57343?s+=o:(s+=n(u),e+=2))):240==(248&l)?e+3>=t?s+=o:(a=r[e+i+1],c=r[e+i+2],d=r[e+i+3],8421504!=(12632256&(a|c<<8|d<<16))?s+=o:(u=(7&l)<<18|(63&a)<<12|(63&c)<<6|63&d,u<65536||u>1114111?s+=o:(u-=65536,s+=n(55296+(u>>10),56320+(1023&u)),e+=3))):s+=o}return s}function Iw(e,t){let i=t.length,n=0;for(let e=0;e<i;e++){let r=t.charCodeAt(e);r>=55296&&r<=56319&&e+1<i&&(r=(r<<10)+t.charCodeAt(++e)-56613888),n+=r<128?1:r<2048?2:r<65536?3:4}ww(e,n);let r=Tw(e,n),o=e.bytes;for(let e=0;e<i;e++){let n=t.charCodeAt(e);n>=55296&&n<=56319&&e+1<i&&(n=(n<<10)+t.charCodeAt(++e)-56613888),n<128?o[r++]=n:(n<2048?o[r++]=n>>6&31|192:(n<65536?o[r++]=n>>12&15|224:(o[r++]=n>>18&7|240,o[r++]=n>>12&63|128),o[r++]=n>>6&63|128),o[r++]=63&n|128)}}function vw(e,t){let i=Tw(e,t.limit),n=e.bytes,r=t.bytes;for(let e=0,o=t.limit;e<o;e++)n[e+i]=r[e]}function Cw(e){return e.bytes[gw(e,1)]}function yw(e,t){let i=Tw(e,1);e.bytes[i]=t}function Aw(e){let t=gw(e,8),i=e.bytes;return hw[0]=i[t++],hw[1]=i[t++],hw[2]=i[t++],hw[3]=i[t++],hw[4]=i[t++],hw[5]=i[t++],hw[6]=i[t++],hw[7]=i[t++],lw[0]}function Ow(e,t){let i=Tw(e,8),n=e.bytes;lw[0]=t,n[i++]=hw[0],n[i++]=hw[1],n[i++]=hw[2],n[i++]=hw[3],n[i++]=hw[4],n[i++]=hw[5],n[i++]=hw[6],n[i++]=hw[7]}function bw(e){let t,i=0,n=0;do{t=Cw(e),i<32&&(n|=(127&t)<<i),i+=7}while(128&t);return n}function ww(e,t){for(t>>>=0;t>=128;)yw(e,127&t|128),t>>>=7;yw(e,t)}function Nw(e,t){let i=t.low>>>0,n=(t.low>>>28|t.high<<4)>>>0,r=t.high>>>24,o=0===r?0===n?i<16384?i<128?1:2:i<1<<21?3:4:n<16384?n<128?5:6:n<1<<21?7:8:r<128?9:10,s=Tw(e,o),a=e.bytes;switch(o){case 10:a[s+9]=r>>>7&1;case 9:a[s+8]=9!==o?128|r:127&r;case 8:a[s+7]=8!==o?n>>>21|128:n>>>21&127;case 7:a[s+6]=7!==o?n>>>14|128:n>>>14&127;case 6:a[s+5]=6!==o?n>>>7|128:n>>>7&127;case 5:a[s+4]=5!==o?128|n:127&n;case 4:a[s+3]=4!==o?i>>>21|128:i>>>21&127;case 3:a[s+2]=3!==o?i>>>14|128:i>>>14&127;case 2:a[s+1]=2!==o?i>>>7|128:i>>>7&127;case 1:a[s]=1!==o?128|i:127&i}}const Dw=async(e,t,i)=>{const n=function(e){const t=[];for(let i=0;i<e.length;i+=2)t.push(parseInt(e.slice(i,i+2),16));return Uint8Array.from(t)}(function(e){const t="0123456789abcdef";function i(e){let i,n="";for(i=0;i<=3;i++)n+=t.charAt(e>>8*i+4&15)+t.charAt(e>>8*i&15);return n}function n(e,t){const i=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(i>>16)<<16|65535&i}function r(e,t,i,r,o,s){return n(function(e,t){return e<<t|e>>>32-t}(n(n(t,e),n(r,s)),o),i)}function o(e,t,i,n,o,s,a){return r(t&i|~t&n,e,t,o,s,a)}function s(e,t,i,n,o,s,a){return r(t&n|i&~n,e,t,o,s,a)}function a(e,t,i,n,o,s,a){return r(t^i^n,e,t,o,s,a)}function c(e,t,i,n,o,s,a){return r(i^(t|~n),e,t,o,s,a)}const d=function(e){let t;const i=1+(e.length+8>>6),n=new Array(16*i);for(t=0;t<16*i;t++)n[t]=0;for(t=0;t<e.length;t++)n[t>>2]|=e.charCodeAt(t)<<t%4*8;return n[t>>2]|=128<<t%4*8,n[16*i-2]=8*e.length,n}(e);let u,l,h,p,_,E=1732584193,m=-271733879,f=-1732584194,S=271733878;for(u=0;u<d.length;u+=16)l=E,h=m,p=f,_=S,E=o(E,m,f,S,d[u+0],7,-680876936),S=o(S,E,m,f,d[u+1],12,-389564586),f=o(f,S,E,m,d[u+2],17,606105819),m=o(m,f,S,E,d[u+3],22,-1044525330),E=o(E,m,f,S,d[u+4],7,-176418897),S=o(S,E,m,f,d[u+5],12,1200080426),f=o(f,S,E,m,d[u+6],17,-1473231341),m=o(m,f,S,E,d[u+7],22,-45705983),E=o(E,m,f,S,d[u+8],7,1770035416),S=o(S,E,m,f,d[u+9],12,-1958414417),f=o(f,S,E,m,d[u+10],17,-42063),m=o(m,f,S,E,d[u+11],22,-1990404162),E=o(E,m,f,S,d[u+12],7,1804603682),S=o(S,E,m,f,d[u+13],12,-40341101),f=o(f,S,E,m,d[u+14],17,-1502002290),m=o(m,f,S,E,d[u+15],22,1236535329),E=s(E,m,f,S,d[u+1],5,-165796510),S=s(S,E,m,f,d[u+6],9,-1069501632),f=s(f,S,E,m,d[u+11],14,643717713),m=s(m,f,S,E,d[u+0],20,-373897302),E=s(E,m,f,S,d[u+5],5,-701558691),S=s(S,E,m,f,d[u+10],9,38016083),f=s(f,S,E,m,d[u+15],14,-660478335),m=s(m,f,S,E,d[u+4],20,-405537848),E=s(E,m,f,S,d[u+9],5,568446438),S=s(S,E,m,f,d[u+14],9,-1019803690),f=s(f,S,E,m,d[u+3],14,-187363961),m=s(m,f,S,E,d[u+8],20,1163531501),E=s(E,m,f,S,d[u+13],5,-1444681467),S=s(S,E,m,f,d[u+2],9,-51403784),f=s(f,S,E,m,d[u+7],14,1735328473),m=s(m,f,S,E,d[u+12],20,-1926607734),E=a(E,m,f,S,d[u+5],4,-378558),S=a(S,E,m,f,d[u+8],11,-2022574463),f=a(f,S,E,m,d[u+11],16,1839030562),m=a(m,f,S,E,d[u+14],23,-35309556),E=a(E,m,f,S,d[u+1],4,-1530992060),S=a(S,E,m,f,d[u+4],11,1272893353),f=a(f,S,E,m,d[u+7],16,-155497632),m=a(m,f,S,E,d[u+10],23,-1094730640),E=a(E,m,f,S,d[u+13],4,681279174),S=a(S,E,m,f,d[u+0],11,-358537222),f=a(f,S,E,m,d[u+3],16,-722521979),m=a(m,f,S,E,d[u+6],23,76029189),E=a(E,m,f,S,d[u+9],4,-640364487),S=a(S,E,m,f,d[u+12],11,-421815835),f=a(f,S,E,m,d[u+15],16,530742520),m=a(m,f,S,E,d[u+2],23,-995338651),E=c(E,m,f,S,d[u+0],6,-198630844),S=c(S,E,m,f,d[u+7],10,1126891415),f=c(f,S,E,m,d[u+14],15,-1416354905),m=c(m,f,S,E,d[u+5],21,-57434055),E=c(E,m,f,S,d[u+12],6,1700485571),S=c(S,E,m,f,d[u+3],10,-1894986606),f=c(f,S,E,m,d[u+10],15,-1051523),m=c(m,f,S,E,d[u+1],21,-2054922799),E=c(E,m,f,S,d[u+8],6,1873313359),S=c(S,E,m,f,d[u+15],10,-30611744),f=c(f,S,E,m,d[u+6],15,-1560198380),m=c(m,f,S,E,d[u+13],21,1309151649),E=c(E,m,f,S,d[u+4],6,-145523070),S=c(S,E,m,f,d[u+11],10,-1120210379),f=c(f,S,E,m,d[u+2],15,718787259),m=c(m,f,S,E,d[u+9],21,-343485551),E=n(E,l),m=n(m,h),f=n(f,p),S=n(S,_);return i(E)+i(m)+i(f)+i(S)}(""+t+i)).slice(0,16),r=n.slice(0,12),o=await window.crypto.subtle.importKey("raw",n,"AES-GCM",!0,["encrypt"]);return new Uint8Array(await window.crypto.subtle.encrypt({name:"AES-GCM",iv:r},o,e))};function Pw(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}const Lw=new Map([["moderation",1],["supervise",2]]);class kw extends hE{get connectionState(){return this._connectionState}set connectionState(e){if(this._connectionState===e)return;const t=this._connectionState;this._connectionState=e,this.emit(NS.CONNECTION_STATE_CHANGE,t,e)}get inspectType(){return this._inspectType}set inspectType(e){var t;this._inspectMode=zi(t=e.map(e=>Lw.get(e)||0)).call(t,(e,t)=>e+t),this._inspectType=e}get quality(){return this._quality}set quality(e){this._quality=e>1?1:e<.1?.1:e,this.qualityTimer&&(window.clearTimeout(this.qualityTimer),this.qualityTimer=null),this._quality>=1||(this.qualityTimer=window.setTimeout(()=>{this.quality=this._quality/this.qualityRatio},6e4))}constructor(e){super(),lp(this,"name","AgoraRTCVideoContentInspect"),lp(this,"_connectionState",bS.CONNECTING),lp(this,"_innerConnectionState",void 0),lp(this,"sequence",0),lp(this,"inspectStartTime",void 0),lp(this,"workerManagerConnection",void 0),lp(this,"workerConnection",void 0),lp(this,"workerMessageLengthLimit",void 0),lp(this,"inspectIntervalMinimum",void 0),lp(this,"qualityRatio",void 0),lp(this,"_connectInfo",void 0),lp(this,"_cancelTokenSource",uE.CancelToken.source()),lp(this,"_retryConfig",void 0),lp(this,"wmSequence",0),lp(this,"inspectInterval",void 0),lp(this,"inspectTimer",null),lp(this,"ossFilePrefix",void 0),lp(this,"extraInfo",void 0),lp(this,"_inspectType",void 0),lp(this,"_inspectMode",void 0),lp(this,"_quality",1),lp(this,"qualityTimer",null),lp(this,"_inspectId",void 0),lp(this,"_needWorkUrlOnly",!1),lp(this,"inspectImage",()=>{if(this.connectionState!==bS.CONNECTED)throw new EE(_E.OPERATION_ABORTED,"content inspect service connection status is ".concat(this.connectionState));this.inspectTimer&&(window.clearInterval(this.inspectTimer),this.inspectTimer=null),this.inspectTimer=window.setInterval(()=>{this.connectionState===bS.CONNECTED?this.requestToInspectImage():CE.debug("[".concat(this._inspectId,"] Inspect State is not connected , "),this.connectionState)},this.inspectInterval<this.inspectIntervalMinimum?this.inspectIntervalMinimum:this.inspectInterval),this.requestToInspectImage()}),this._inspectId=wI(5,"inspect-"),this.workerMessageLengthLimit=FE("VIDEO_INSPECT_WORKER_MESSAGE_LENGTH_LIMIT"),this.inspectIntervalMinimum=FE("VIDEO_INSPECT_INTERVAL_MINIMUM"),this.qualityRatio=FE("VIDEO_INSPECT_QUALITY_RATIO"),this.inspectInterval=e.interval,this.ossFilePrefix=e.ossFilePrefix,this.extraInfo=e.extraInfo,this.inspectType=e.inspectType,this.inspectStartTime=Number(Date.now()),this.workerManagerConnection=new tv("worker-manager-"+this._inspectId,mE),this.on(NS.STATE_CHANGE,(e,t)=>{this._innerConnectionState=e,CE.debug("[".concat(this._inspectId,"] Inspect operation :").concat(wS[e]," ").concat(t||""))}),this.handleWorkerManagerEvents(),this.workerConnection=new tv("worker-"+this._inspectId,mE),this.handleWorkerEvents()}async init(e,t){this.emit(NS.STATE_CHANGE,wS.CONNECT_AP),this._connectInfo=e;const i=this._cancelTokenSource.token;return this._retryConfig=t,new Sl((n,r)=>{this.on(NS.CONNECTION_STATE_CHANGE,(e,t)=>{t===bS.CONNECTED&&n()}),this.requestAP(e,i,t).then(e=>{this.connectWorkerManager(e)}).catch(e=>{r(e)})})}async requestAP(e,t,i){const n=FE("WEBCS_DOMAIN").map(e=>"https://".concat(e,"/api/v1")),r=await function(e,t,i,n){let{appId:r,areaCode:o,cname:s,sid:a,token:c,uid:d}=t;xv++;const u="image_moderation_api",l={service_name:u,json_body:JSON.stringify({appId:r,areaCode:o,cname:s,command:"allocateEdge",requestId:xv,seq:xv,sid:a,token:c,ts:Date.now(),uid:d+""})};let h,p,_=e[0];return SE(async()=>{h=Date.now();const e=await ag(_,{data:l,cancelToken:i,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"},params:{action:"wrtc_gateway"}});if(p=Date.now()-h,0!==e.code){const t=new EE(_E.UNEXPECTED_RESPONSE,"image inspect ap error, code"+e.code,{retry:!0,responseTime:p});throw CE.error(t.toString()),t}const t=JSON.parse(e.json_body);if(200!==t.code){const e=new EE(_E.UNEXPECTED_RESPONSE,"image inspect ap error, code: ".concat(t.code,", reason: ").concat(t.reason),{code:t.code,responseTime:p});throw CE.error(e.toString()),e}if(!t.servers||!Array.isArray(t.servers)||0===t.servers.length){const e=new EE(_E.UNEXPECTED_RESPONSE,"image inspect ap empty server",{code:t.code,responseTime:p});throw CE.error(e.toString()),e}const n=FE("VIDEO_INSPECT_WORKER_MANAGER_HOST"),r=FE("VIDEO_INSPECT_WORKER_MANAGER_PORT");return{addressList:t.servers.map(e=>{let{address:t,wss:i}=e;if(t&&i)return"wss://".concat(t.replace(/\./g,"-"),".").concat(n,":").concat(r||i)}).filter(e=>!!e),workerToken:t.workerToken,vid:t.vid,responseTime:p}},(t,i)=>(Tg.apworkerEvent(a,{success:!0,sc:200,serviceName:u,responseDetail:JSON.stringify(t.addressList),firstSuccess:0===i,responseTime:p,serverIp:e[i%e.length]}),!1),(t,i)=>(Tg.apworkerEvent(a,{success:!1,sc:t.data&&t.data.code||200,serviceName:u,responseTime:p,serverIp:e[i%e.length]}),!!(t.code!==_E.OPERATION_ABORTED&&t.code!==_E.UNEXPECTED_RESPONSE||t.data&&t.data.retry)&&(_=e[(i+1)%e.length],!0)),n)}(n,e,t,i);this.emit(NS.STATE_CHANGE,wS.AP_CONNECTED);const{addressList:o}=r;return this.wmSequence++,o}async connectWorkerManager(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._needWorkUrlOnly=t,this.emit(NS.STATE_CHANGE,wS.CONNECT_WORKER_MANAGER),await this.workerManagerConnection.init(e,1e4)}async connectWorker(e){await this.workerConnection.init([e])}handleWorkerManagerEvents(){this.workerManagerConnection.on(jf.CONNECTED,async()=>{this.emit(NS.STATE_CHANGE,wS.WORKER_MANAGER_CONNECTED,this.workerManagerConnection.url),this.workerManagerConnection.sendMessage({appId:this._connectInfo.appId,cname:this._connectInfo.cname,uid:this._connectInfo.uid+"",sdkVersion:"4.17.0",sid:this._connectInfo.sid,seq:this.wmSequence,ts:Number(Date.now()),requestId:Math.floor(1e12*Math.random()),allocate:!0,clientRequest:{command:"join"}},!0)}),this.workerManagerConnection.on(jf.CLOSED,()=>{this._innerConnectionState<wS.GET_WORKER_MANAGER_RESPONSE&&CE.debug("[".concat(this._inspectId,"] Inspect worker manager is closed before connecting worker"))}),this.workerManagerConnection.on(jf.FAILED,()=>{this._innerConnectionState<wS.GET_WORKER_MANAGER_RESPONSE&&CE.debug("[".concat(this._inspectId,"] Connecting inspect worker manager is failed before connecting worker"))}),this.workerManagerConnection.on(jf.RECONNECTING,()=>{this._innerConnectionState<wS.GET_WORKER_MANAGER_RESPONSE&&CE.debug("[".concat(this._inspectId,"] Inspect worker manager is reconnecting before connecting worker"))}),this.workerManagerConnection.on(jf.ON_MESSAGE,async e=>{this.emit(NS.STATE_CHANGE,wS.GET_WORKER_MANAGER_RESPONSE);const t=this.workerManagerConnection.url;this.workerManagerConnection.close();const i=JSON.parse(e.data);if(200!==i.code)throw CE.error("[".concat(this._inspectId,"] Unexpected code ").concat(i.code," from worker manager")),new EE(_E.UNEXPECTED_RESPONSE,"response code of worker is unexpected",i);if(!(i.serverResponse&&i.serverResponse.portWss&&t))throw CE.error("[".concat(this._inspectId,"] Unexpected content from worker manager : ").concat(JSON.stringify(i))),new EE(_E.UNEXPECTED_RESPONSE,"response content of worker is unexpected",i);{const e=FE("VIDEO_INSPECT_WORKER_PORT")||i.serverResponse.portWss,n=t.replace(/:\d+\/?$/,":".concat(e));this.emit(NS.STATE_CHANGE,wS.CONNECT_WORKER,n),this._needWorkUrlOnly?this.emit(NS.REQUEST_NEW_WORKER_URL,n):await this.connectWorker(n)}}),this.workerManagerConnection.on(jf.WILL_RECONNECT,(e,t)=>{t(e)}),this.workerManagerConnection.on(jf.REQUEST_NEW_URLS,(e,t)=>{this.requestAP(this._connectInfo,this._cancelTokenSource.token,this._retryConfig).then(e).catch(t)})}handleWorkerEvents(){this.workerConnection.on(jf.CONNECTED,async()=>{this.emit(NS.STATE_CHANGE,wS.WORKER_CONNECTED,this.workerConnection.url),this.connectionState=bS.CONNECTED}),this.workerConnection.on(jf.ON_MESSAGE,async e=>{if(e.data instanceof ArrayBuffer){const i=ow(new Uint8Array(e.data));if(FE("SHOW_VIDEO_INSPECT_WORKER_MESSAGE")&&CE.debug("[".concat(this._inspectId,"] Response message for worker of inspect content "),JSON.stringify(i)),200===i.code){if(Array.isArray(this.inspectType)&&1===this.inspectType.length&&"supervise"===this.inspectType[0])return void this.emit(NS.INSPECT_RESULT,void 0,void 0);if(i.data&&i.data.scorePorn&&i.data.scoreSexy&&i.data.scoreNeutral){var t;const e={porn:i.data.scorePorn,sexy:i.data.scoreSexy,neutral:i.data.scoreNeutral},n=zi(t=Object.keys(e)).call(t,(t,i)=>e[t]>e[i]?t:i,"porn"),r=Object.keys(e).find(e=>e===n);this.emit(NS.INSPECT_RESULT,r)}else this.emit(NS.INSPECT_RESULT,void 0,new EE(_E.UNEXPECTED_RESPONSE,i.code+"","There is an unexpected data on message"))}else this.emit(NS.INSPECT_RESULT,void 0,new EE(_E.UNEXPECTED_RESPONSE,i.code+"",i.msg))}else CE.error("[".concat(this._inspectId,"] Unexpected message type from worker")),this.emit(NS.INSPECT_RESULT,void 0,new EE(_E.UNEXPECTED_RESPONSE,"invalid worker message type"))}),this.workerConnection.on(jf.CLOSED,()=>{this.connectionState=bS.CLOSED}),this.workerConnection.on(jf.FAILED,()=>{this.connectionState=bS.CLOSED}),this.workerConnection.on(jf.RECONNECTING,()=>{this.connectionState=this.connectionState===bS.CONNECTED?bS.RECONNECTING:bS.CONNECTING}),this.workerConnection.on(jf.WILL_RECONNECT,(e,t)=>{"recover"===e&&t(e),t("tryNext")}),this.workerConnection.on(jf.REQUEST_NEW_URLS,(e,t)=>{this.workerManagerConnection.close(),this.once(NS.REQUEST_NEW_WORKER_URL,t=>{e([t])}),this.requestAP(this._connectInfo,this._cancelTokenSource.token,this._retryConfig).then(e=>{this.connectWorkerManager(e,!0)}).catch(e=>{t(e)})})}static intToLong(e){return{low:e|=0,high:e>>31,unsigned:e>=0}}async requestToInspectImage(){this.sequence++;const e=UI(this,NS.CLIENT_LOCAL_VIDEO_TRACK),t={appId:this._connectInfo.appId,cname:this._connectInfo.cname,cid:this._connectInfo.cid,sid:this._connectInfo.sid,uid:this._connectInfo.uid,vid:this._connectInfo.vid};if(e){if(!e.isPlaying)return void this.emit(NS.INSPECT_RESULT,void 0,new EE(_E.INVALID_OPERATION,"Only the track being played can be inspected"));const i=await this.generateRequestData(e,t);this.workerConnection.sendMessage(i,!0,!0)}else this.emit(NS.INSPECT_RESULT,void 0,new EE(_E.INVALID_OPERATION,"Only the track being published can be inspected"))}async generateRequestData(e,t){let{appId:i,cname:n,cid:r,vid:o,sid:s,uid:a}=t;const c=Date.now(),d=await e.getCurrentFrameImage("image/jpeg",this.quality),u=await(async(e,t,i)=>await Dw(e.buffer,t,i))(d,i,n),l=this.sequence+"-"+r+"-"+a+"-"+c+"-"+wI(12,""),h={appId:i,cid:r,cname:n,deviceId:"",elapse:kw.intToLong(Number(c-this.inspectStartTime)),fileSize:u.byteLength,jpgEncryption:2,height:d.height,width:d.width,jpg:u,networkType:6,osType:7,requestId:l,sdkVersion:"4.17.0",sequence:this.sequence,sid:s,timestamp:kw.intToLong(c),uid:a,vid:o,service:this._inspectMode,callbackData:this.extraInfo,ossFilePrefix:this.ossFilePrefix};void 0===this.extraInfo&&delete h.callbackData,void 0===this.ossFilePrefix&&delete h.ossFilePrefix;const p=rw(h);if(p.byteLength<this.workerMessageLengthLimit){if(FE("SHOW_VIDEO_INSPECT_WORKER_MESSAGE")){const e=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Pw(Object(i),!0).forEach((function(t){lp(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Pw(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},h);delete e.jpg,CE.debug("[".concat(this._inspectId,"] Request message for worker of inspect content "),JSON.stringify(e))}return p}{const t=this.quality*this.qualityRatio;return this.quality=t,await this.generateRequestData(e,{appId:i,cname:n,cid:r,vid:o,sid:s,uid:a})}}close(){this._cancelTokenSource.cancel(),this._cancelTokenSource=uE.CancelToken.source(),this.workerManagerConnection&&this.workerManagerConnection.close(),this.workerConnection&&this.workerConnection.close(),this.inspectTimer&&window.clearInterval(this.inspectTimer),this.inspectTimer=null,this.connectionState=bS.CLOSED,this.emit(NS.STATE_CHANGE,wS.CLOSED)}}var Mw,Uw,xw,Vw,Fw,jw,Bw,Gw,Ww,Hw,Kw,Yw,qw,Jw,Xw,zw,Qw,Zw,$w,eN,tN,iN,nN,rN,oN,sN,aN,cN,dN,uN,lN,hN,pN,_N,EN,mN,fN,SN,TN;function gN(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function RN(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?gN(Object(i),!0).forEach((function(t){lp(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):gN(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}let IN=(Mw=Sg(),Uw=Sg({argsMap:(e,t)=>(Array.isArray(t)||(t=[t]),t.map(e=>e?Object(e).toString():"null"))}),xw=Sg({argsMap:(e,t)=>(t||(t=[]),Array.isArray(t)||(t=[t]),t.map(e=>e.getTrackId()))}),Vw=Sg({argsMap:(e,t,i)=>[t.uid,i]}),Fw=Sg({argsMap:(e,t)=>t.map(e=>{let{user:t,mediaType:i}=e;return[null==t?void 0:t.uid,i]})}),jw=Sg({argsMap:(e,t,i)=>[t.uid,i]}),Bw=Sg({argsMap:(e,t)=>t.map(e=>{let{user:t,mediaType:i}=e;return{uid:null==t?void 0:t.uid,mediaType:i}})}),Gw=Sg(),Ww=Sg(),Hw=Sg(),Kw=Sg(),Yw=Sg(),qw=Sg(),Jw=Sg(),Xw=Sg(),zw=Sg(),Qw=Sg(),Zw=Sg(),$w=Sg(),eN=Sg(),tN=Sg(),iN=Sg({argsMap:(e,t)=>[t]}),nN=Sg(),rN=Sg(),oN=Sg(),sN=Sg(),aN=Sg(),cN=Sg(),dN=Sg(),uN=Sg(),lN=Sg(),hN=Sg(),pN=Sg({argsMap:(e,t)=>(Array.isArray(t)||(t=[t]),[JSON.stringify(t)])}),_N=Sg(),EN=Sg(),mN=Sg(),fN=Sg({reportResult:!0}),SN=Sg(),JT((TN=class extends hE{get connectionState(){return this._gateway.state}get remoteUsers(){return this._users}get localTracks(){return this._p2pChannel.getAllTracks(!0)}get uid(){return this._uid}get channelName(){return this._channelName}get isStringUID(){return!!this._joinInfo&&!!this._joinInfo.stringUid}get __className__(){return"Client"}constructor(e){let t;if(super(),lp(this,"store",void 0),lp(this,"_uid",void 0),lp(this,"_channelName",void 0),lp(this,"_uintUid",void 0),lp(this,"_users",[]),lp(this,"_codec",void 0),lp(this,"_mode",void 0),lp(this,"_config",void 0),lp(this,"_clientId",void 0),lp(this,"_appId",void 0),lp(this,"_sessionId",null),lp(this,"_key",void 0),lp(this,"_joinInfo",void 0),lp(this,"_gateway",void 0),lp(this,"_statsCollector",void 0),lp(this,"_configDistribute",void 0),lp(this,"_leaveMutex",new vg("client-leave")),lp(this,"_publishMutex",new vg("client-publish")),lp(this,"_renewTokenMutex",new vg("client-renewtoken")),lp(this,"_subscribeMutex",new vg("client-subscribe")),lp(this,"_encryptionMode","none"),lp(this,"_encryptionSecret",null),lp(this,"_encryptionSalt",null),lp(this,"_proxyServer",void 0),lp(this,"_turnServer",{servers:[],mode:"auto"}),lp(this,"_cloudProxyServerMode","disabled"),lp(this,"_isDualStreamEnabled",!1),lp(this,"_defaultStreamFallbackType",void 0),lp(this,"_lowStreamParameter",void 0),lp(this,"_streamFallbackTypeCacheMap",new Map),lp(this,"_remoteStreamTypeCacheMap",new Map),lp(this,"_axiosCancelSource",uE.CancelToken.source()),lp(this,"_audioVolumeIndicationInterval",void 0),lp(this,"_networkQualityInterval",void 0),lp(this,"_userOfflineTimeout",void 0),lp(this,"_streamRemovedTimeout",void 0),lp(this,"_injectStreamingClient",void 0),lp(this,"_liveTranscodeStreamingClient",void 0),lp(this,"_liveRawStreamingClient",void 0),lp(this,"_channelMediaRelayClient",void 0),lp(this,"_networkQualitySensitivity","normal"),lp(this,"_p2pChannel",void 0),lp(this,"_useLocalAccessPoint",!1),lp(this,"_setLocalAPVersion",void 0),lp(this,"_joinAndNotLeaveYet",!1),lp(this,"_numberOfJoinCount",0),lp(this,"_remoteDefaultVideoStreamType",void 0),lp(this,"_inspect",void 0),lp(this,"_license",void 0),lp(this,"_handleLocalTrackEnable",(e,t,i)=>{this.publish(e,!1).then(t).catch(i)}),lp(this,"_handleLocalTrackDisable",(e,t,i)=>{this.unpublish(e).then(t).catch(i)}),lp(this,"_handleUserOnline",e=>{this.isStringUID&&"string"!=typeof e.uid&&CE.error("[".concat(this._clientId,"] StringUID is Mixed with UintUID"));const t=this._users.find(t=>t.uid===e.uid);if(t)t._trust_in_room_=!0;else{const t=new $C(e.uid,e.uint_id||e.uid);this._users.push(t),CE.debug("[".concat(this._clientId,"] user online"),e.uid),this.emit(Rf.USER_JOINED,t)}}),lp(this,"_handleUserOffline",e=>{const t=this._users.find(t=>t.uid===e.uid);t&&(this._handleRemoveStream(e),VI(this._users,t),this._remoteStreamTypeCacheMap.delete(t.uid),this._streamFallbackTypeCacheMap.delete(t.uid),CE.debug("[".concat(this._clientId,"] user offline"),e.uid,"reason:",e.reason),this.emit(Rf.USER_LEAVED,t,e.reason))}),lp(this,"_handleAddAudioOrVideoStream",(e,t,i,n,r,o,s)=>{const a=this._users.find(e=>e.uid===t);if(!a)return void CE.error("[".concat(this._clientId,"] can not find target user!(on_add_stream)"));CE.debug("[".concat(this._clientId,"] stream added with uid ").concat(t,", type ").concat(e)),this.store.subscribe(a.uid,e,void 0,void 0,void 0,Date.now());const c="audio"===e?a.hasAudio:a.hasVideo;a._uintid||(a._uintid=r||t),"audio"===e?a._trust_audio_stream_added_state_=!0:a._trust_video_stream_added_state_=!0,"audio"===e?(a._audio_added_=!0,void 0!==i&&(a._audioSSRC=i),void 0!==n&&(a._cname=n),o&&(a._audioOrtc=o)):(a._video_added_=!0,void 0!==i&&(a._videoSSRC=i),void 0!==n&&(a._cname=n),void 0!==s&&(a._rtxSsrcId=s),o&&(a._videoOrtc=o)),("audio"===e?a.hasAudio:a.hasVideo)&&!c&&(CE.info("[".concat(this._clientId,"] remote user ").concat(a.uid," published ").concat(e)),this.emit(Rf.USER_PUBLISHED,a,e)),"video"===e?Tg.onGatewayStream(this._sessionId,sf.ON_ADD_VIDEO_STREAM,af.ON_ADD_VIDEO_STREAM,{peer:r||t}):Tg.onGatewayStream(this._sessionId,sf.ON_ADD_AUDIO_STREAM,af.ON_ADD_AUDIO_STREAM,{peer:r||t}),this._p2pChannel.remoteMediaSsrcChanged(a,e,i).then(t=>{if(t)return CE.debug("[".concat(this._clientId,"] resubscribe ").concat(e," for user ").concat(a.uid," after rejoin because SSRC id changed.")),this._p2pChannel.unsubscribe(a,e,!0).then(()=>this._subscribe(a,e,!0).catch(e=>{CE.error("[".concat(this._clientId,"] resubscribe error"),e.toString())}))}),this._p2pChannel.hasPendingRemoteMedia(a,e)&&(CE.debug("[".concat(this._clientId,"] resubscribe ").concat(e," for user ").concat(a.uid," after reconnect.")),this._subscribe(a,e,!0).catch(e=>{CE.error("[".concat(this._clientId,"] resubscribe error"),e.toString())}))}),lp(this,"_handleRemoveStream",e=>{const t=this._users.find(t=>t.uid===e.uid);if(!t)return void CE.warning("[".concat(this._clientId,"] can not find target user!(on_remove_stream)"));CE.debug("[".concat(this._clientId,"] stream removed with uid ").concat(e.uid));let i=()=>{};t.hasAudio&&t.hasVideo?i=()=>{CE.info("[".concat(this._clientId,"] remote user ").concat(t.uid," unpublished audio track")),this.emit(Rf.USER_UNPUBLISHED,t,"audio"),CE.info("[".concat(this._clientId,"] remote user ").concat(t.uid," unpublished video track")),this.emit(Rf.USER_UNPUBLISHED,t,"video")}:t.hasVideo?i=()=>{CE.info("[".concat(this._clientId,"] remote user ").concat(t.uid," unpublished video track")),this.emit(Rf.USER_UNPUBLISHED,t,"video")}:t.hasAudio&&(i=()=>{CE.info("[".concat(this._clientId,"] remote user ").concat(t.uid," unpublished audio track")),this.emit(Rf.USER_UNPUBLISHED,t,"audio")}),t._trust_audio_stream_added_state_=!0,t._trust_video_stream_added_state_=!0,t._audio_added_=!1,t._video_added_=!1,this._p2pChannel.unsubscribe(t).then(e=>{if(e)return this._gateway.unsubscribe(e,t.uid)}),t._audioSSRC=void 0,t._videoSSRC=void 0,t._audioOrtc=void 0,t._videoOrtc=void 0,t._rtxSsrcId=void 0,Tg.onGatewayStream(this._sessionId,sf.ON_REMOVE_STREAM,af.ON_REMOVE_STREAM,{peer:e.uint_id||e.uid}),i()}),lp(this,"_handleSetStreamLocalEnable",(e,t,i)=>{const n=this._users.find(e=>e.uid===t);if(!n)return void CE.error("[".concat(this._clientId,"] can not find target user!(disable_local)"));CE.debug("[".concat(this._clientId,"] local ").concat(e," ").concat(i?"enabled":"disabled"," with uid ").concat(t));const r="audio"===e?n.hasAudio:n.hasVideo;if("audio"===e){n._trust_audio_enabled_state_=!0;const e=n._audio_enabled_;if(n._audio_enabled_=i,n._audio_enabled_===e)return;{const e=n._audio_enabled_?"enable-local-audio":"disable-local-audio";CE.debug("[".concat(this._clientId,"] user-info-updated, uid: ").concat(t,", msg: ").concat(e)),this.emit(Rf.USER_INFO_UPDATED,t,e)}}else{n._trust_video_enabled_state_=!0;const e=n._video_enabled_;if(n._video_enabled_=i,n._video_enabled_===e)return;{const e=n._video_enabled_?"enable-local-video":"disable-local-video";CE.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(t,", msg: ").concat(e)),this.emit(Rf.USER_INFO_UPDATED,t,e)}}const o="audio"===e?n.hasAudio:n.hasVideo;return r!==o?!r&&o?(CE.info("[".concat(this._clientId,"] remote user ").concat(t," published ").concat(e)),void this.emit(Rf.USER_PUBLISHED,n,e)):("video"===e&&n._videoTrack&&n._videoTrack._destroy(),"audio"===e&&n._audioTrack,this._p2pChannel.muteRemote(n,e),CE.info("[".concat(this._clientId,"] remote user ").concat(t," unpublished ").concat(e)),void this.emit(Rf.USER_UNPUBLISHED,n,e)):void 0}),lp(this,"_handleMuteStream",(e,t,i)=>{CE.debug("[".concat(this._clientId,"] receive mute message"),e,t,i);const n=this._users.find(t=>t.uid===e);if(!n)return void CE.warning("[".concat(this._clientId,"] can not find remote user, ignore mute event, uid: ").concat(e));const r="audio"===t?n.hasAudio:n.hasVideo;if("audio"===t){n._trust_audio_mute_state_=!0;const t=n._audio_muted_;if(n._audio_muted_=i,n._audio_muted_===t)return;{const t=n._audio_muted_?"mute-audio":"unmute-audio";CE.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(e,", msg: ").concat(t)),this.emit(Rf.USER_INFO_UPDATED,e,t)}}else{n._trust_video_mute_state_=!0;const t=n._video_muted_;if(n._video_muted_=i,n._video_muted_===t)return;{const t=n._video_muted_?"mute-video":"unmute-video";CE.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(e,", msg: ").concat(t)),this.emit(Rf.USER_INFO_UPDATED,e,t)}}const o="audio"===t?n.hasAudio:n.hasVideo;if(r!==o){if(!r&&o){return("audio"===t?n._audioSSRC:n._videoSSRC)?(CE.info("[".concat(this._clientId,"] remote user ").concat(e," published ").concat(t)),void this.emit(Rf.USER_PUBLISHED,n,t)):void CE.warning("[".concat(this._clientId,"] remote user ").concat(e," receive ").concat(t," unmute message  before add stream message, ").concat(t," SSRC doesn't exist yet."))}"video"===t&&n._videoTrack&&n._videoTrack._destroy(),"audio"===t&&n._audioTrack,this._p2pChannel.muteRemote(n,t),CE.info("[".concat(this._clientId,"] remote user ").concat(e," unpublished ").concat(t)),this.emit(Rf.USER_UNPUBLISHED,n,t)}}),lp(this,"_handleP2PLost",async e=>{CE.debug("[".concat(this._clientId,"] receive p2p lost"),e),parseInt(e.p2pid,10)===this.store.p2pId?await this._p2pChannel.requestReconnect():CE.warning("P2PLost stream not found",e)}),lp(this,"_handleTokenWillExpire",()=>{CE.debug("[".concat(this._clientId,"] received message onTokenPrivilegeWillExpire")),this.emit(Rf.ON_TOKEN_PRIVILEGE_WILL_EXPIRE)}),lp(this,"_handleBeforeUnload",e=>{"beforeunload"===e.type&&void 0!==e.returnValue&&""!==e.returnValue||(this.leave(),CE.info("[".concat(this._clientId,"] auto leave onbeforeunload or pagehide")))}),lp(this,"_handleUpdateNetworkQuality",()=>{if("normal"===this._networkQualitySensitivity)return;if(navigator&&void 0!==navigator.onLine&&!navigator.onLine)return void this.emit(Rf.NETWORK_QUALITY,{downlinkNetworkQuality:6,uplinkNetworkQuality:6});const e={downlinkNetworkQuality:0,uplinkNetworkQuality:0};e.uplinkNetworkQuality=this._p2pChannel.getUplinkNetworkQuality(),e.downlinkNetworkQuality=this._p2pChannel.getDownlinkNetworkQuality(),this.emit(Rf.NETWORK_QUALITY,e)}),this._codec=e.codec,this._mode=e.mode,this._clientId=wI(5,"client-"),this.store=new ew(e.codec,e.audioCodec,e.mode,this._clientId),this.store.clientCreated(),e.proxyServer&&this.setProxyServer(e.proxyServer,!0),e.turnServer&&this.setTurnServer(e.turnServer,!0),CE.info("[".concat(this._clientId,"] Initializing AgoraRTC client v").concat(AE," build: ").concat(yE,", mode: ").concat(this._mode,", codec: ").concat(this._codec)),e.clientRoleOptions)try{kf(e.clientRoleOptions),t=Object.assign({},e.clientRoleOptions)}catch(e){CE.warning("[".concat(this._clientId,"] ").concat(e.toString()))}this._statsCollector=new uI(this.store),this._statsCollector.onStatsException=(e,t,i)=>{CE.debug("[".concat(this._clientId,"] receive exception msg, code: ").concat(e,", msg: ").concat(t,", uid: ").concat(i)),this.emit(Rf.EXCEPTION,{code:e,msg:t,uid:i})},this._statsCollector.onUploadPublishDuration=(e,t,i,n)=>{const r=this._users.find(t=>t.uid===e);r&&Tg.peerPublishStatus(this._sessionId,{subscribeElapse:n,audioPublishDuration:t,videoPublishDuration:i,peer:r._uintid})},this.store.useDataChannel=MS().supportDataChannel&&FE("SIGNAL_CHANNEL"),this._gateway=new Ev(this.store,{clientId:this._clientId,mode:this._mode,codec:this._codec,websocketRetryConfig:e.websocketRetryConfig||mE,httpRetryConfig:e.httpRetryConfig||mE,forceWaitGatewayResponse:void 0===e.forceWaitGatewayResponse||e.forceWaitGatewayResponse,statsCollector:this._statsCollector,role:e.role,clientRoleOptions:t}),this._config=e,this._configDistribute=new Jv,this._p2pChannel=new Xb(this.store,this._statsCollector),this._handleP2PChannelEvents(),this._handleGatewayEvents(),this._handleGatewaySignalEvents()}async join(e,t,i,n,r){const o=++this._numberOfJoinCount;this.store.joinStart(),n&&(this.store.uid=n);const s=iw(),a=nw()?window.isSecureContext:"Browser Not Support";if(!nw()&&!s||!window.isSecureContext){const e="The website must be running in a secure context (About secure context: https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts ), otherwise the media collection will be restricted by the browser";CE.warning(e)}const c=NI();"DISCONNECTED"===this.connectionState&&(this.store.avoidJoinStart=Math.round(Date.now()),CE.debug("[".concat(this._clientId,"] set avoidJoinStart to ").concat(this.store.avoidJoinStart)));const d=Tg.reportApiInvoke(c,{name:uf.JOIN,options:[e,t,i,n],states:{isHttps:s,isSecureContext:a},tag:lf.TRACER});Tg.setAppId(e);try{if(!i&&null!==i)throw new EE(_E.INVALID_PARAMS,"Invalid token: ".concat(i,". If you don not use token, set it to null"));i&&Km(i,"token",1,2047),Km(e,"appid",1,2047),qm(t),n&&Jm(n),r&&Km(r,"optionalInfo",1,2047)}catch(e){throw d.onError(e),e}if(CE.info("[".concat(this._clientId,"] start join channel ").concat(t,", join number: ").concat(o)),this._leaveMutex.isLocked){CE.debug("[".concat(this._clientId,"] join: waiting leave operation"));(await this._leaveMutex.lock())(),CE.debug("[".concat(this._clientId,"] join: continue"))}if(this._joinAndNotLeaveYet=!0,"DISCONNECTED"!==this.connectionState){const e=new EE(_E.INVALID_OPERATION,"[".concat(this._clientId,"] Client already in connecting/connected state"));throw d.onError(e),e}this._sessionId||(this._sessionId=c,this.store.sessionId=this._sessionId),this._gateway.state="CONNECTING";const u=RN({clientId:this._clientId,appId:e,sid:this._sessionId,cname:t,uid:"string"!=typeof n?n:null,turnServer:this._turnServer,proxyServer:this._proxyServer,token:i||e,cloudProxyServer:this._cloudProxyServerMode,optionalInfo:r,license:this._license,useLocalAccessPoint:this._useLocalAccessPoint},void 0!==this._remoteDefaultVideoStreamType&&{defaultVideoStream:this._remoteDefaultVideoStreamType});if(this._useLocalAccessPoint&&(u.setLocalAPVersion=this._setLocalAPVersion),"string"==typeof n&&(u.stringUid=n,this._uintUid?(u.uid=this._uintUid,this._uintUid=void 0):u.uid=0),"none"!==this._encryptionMode&&this._encryptionSecret){if(u.aesmode=this._encryptionMode,u.aespassword=await(async e=>{const t=HI("MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDCMnXAHkKIGAM+x4N22gCI+Wyu\nSTM9ztkT3uYslTT2PuKmZfPzhH6kVdO7PTjGCOZnAsyb3oTtWat0KcxQ4jxvqQV+\nHvYl3iI1Yd4vl2c3qRMJPLtRDfNxa2Mcxgq7e9aEUibzdd0st+OJAy3tOj/Y0aVy\nxQiYDz3vqa6bP29adwIDAQAB"),i=await window.crypto.subtle.importKey("spki",t,{name:"RSA-OAEP",hash:"SHA-256"},!0,["encrypt"]),n=pg(e),r=await window.crypto.subtle.encrypt({name:"RSA-OAEP"},i,n);return KI(new Uint8Array(r))})(this._encryptionSecret),!this._joinAndNotLeaveYet)throw new EE(_E.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"));this._encryptionSalt&&(u.aessalt=this._encryptionSalt)}this._startSession(this._sessionId,{channel:t,appId:e});const l=this._sessionId;setTimeout(()=>{"CONNECTING"===this.connectionState&&l===this._sessionId&&Tg.joinChannelTimeout(this._sessionId,5)},5e3);try{let n;const r=u.cloudProxyServer;if(["proxy3","proxy4","proxy5"].includes(r)){const e=FE("PROXY_SERVER_TYPE3");Array.isArray(e)?u.proxyServer=e[0]:u.proxyServer=e}if(Tg.setProxyServer(u.proxyServer),CE.setProxyServer(u.proxyServer),this.store.requestAPStart(),u.stringUid&&!u.uid){const e=await jv(u.stringUid,u,this._axiosCancelSource.token,this._config.httpRetryConfig||mE,this.store);CE.debug("getUserAccount Success ".concat(u.stringUid," => ").concat(e)),u.uid=e,n=await Fv(u,this._axiosCancelSource.token,this._config.httpRetryConfig||mE,!0,this.store)}else n=await Fv(u,this._axiosCancelSource.token,this._config.httpRetryConfig||mE,!0,this.store);if(!this._joinAndNotLeaveYet)throw new EE(_E.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"));this.store.requestAPEnd(),setTimeout(()=>{this._configDistribute.startGetConfigDistribute(u,this._axiosCancelSource.token),this._configDistribute.on(SS.UPDATE_BITRATE_LIMIT,e=>{this._p2pChannel.updateBitrateLimit(e)})},0),this._key=i||e;const o=n.gatewayInfo;this._joinInfo=RN(RN({},u),{},{cid:o.cid,uid:u.uid?u.uid:o.uid,vid:o.vid,apResponse:o.res,uni_lbs_ip:o.uni_lbs_ip,gatewayAddrs:o.gatewayAddrs});const s=await this._joinGateway();if(!this._joinAndNotLeaveYet)throw new EE(_E.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"));d.onSuccess(s),this._appId=e,this._channelName=u.cname,this._uid=s,this.store.uid=s,setTimeout(()=>{this._networkQualityInterval&&window.clearInterval(this._networkQualityInterval),this._networkQualityInterval=window.setInterval(this._handleUpdateNetworkQuality,2e3),window.addEventListener(Wh()?"beforeunload":"pagehide",this._handleBeforeUnload)},0);const a=u.stringUid?"string uid: ".concat(u.stringUid,",uid: ").concat(u.uid):"uid: ".concat(this._uid);return CE.info("[".concat(this._clientId,"] Joining channel success: channel: ").concat(t,",").concat(a)),setTimeout(()=>{CE.startUpload()},5e3),this.store.joinEnd(),h=this,qE.includes(h)||qE.push(h),s}catch(e){const t=Array.isArray(e)?e[0]:e;throw CE.error("[".concat(this._clientId,"] join number: ").concat(o,", Joining channel failed, rollback"),t),t.code!==_E.OPERATION_ABORTED&&this._numberOfJoinCount===o&&(this._gateway.state="DISCONNECTED",this._reset()),d.onError(t),t}var h}_joinGateway(){if(!this._joinInfo||!this._key)throw new EE(_E.INVALID_OPERATION);return this._gateway.join(this._joinInfo,this._key,!("disabled"!==this._joinInfo.cloudProxyServer||this._joinInfo.proxyServer||!FE("JOIN_WITH_FALLBACK_SIGNAL_PROXY"))).then(e=>e).catch(e=>{if(e.code===_E.INIT_WEBSOCKET_TIMEOUT)return this._gateway.leave(!0,gf.FALLBACK),e;if(e.code===_E.INIT_DATACHANNEL_TIMEOUT)return this._gateway.leave(!0,gf.FALLBACK),e;throw e}).then(e=>{if(e instanceof EE){if(e.code===_E.INIT_WEBSOCKET_TIMEOUT){if(CE.info("[".concat(this._clientId,"] join timeout, fallback to proxy")),!this._joinInfo||!this._key)throw new EE(_E.INVALID_OPERATION);this._joinInfo.cloudProxyServer="fallback",this._cloudProxyServerMode="fallback",this.store.cloudProxyServerMode="fallback";const e=FE("PROXY_SERVER_TYPE3");if(Array.isArray(e))if(this._joinInfo.apUrl){const t=/^https?:\/\/(.+?)(\/.*)?$/.exec(this._joinInfo.apUrl)[1].split("."),i=t.slice(t.length-2).join(".");e.forEach(e=>{this._joinInfo&&e.includes(i)&&(this._joinInfo.proxyServer=e)}),this._joinInfo.proxyServer||(this._joinInfo.proxyServer=e[0])}else this._joinInfo.proxyServer=e[0];else this._joinInfo.proxyServer=e;const t=FE("LOG_UPLOAD_SERVER").match(/.+:(\d{1,5})$/);t&&t[1]&&"443"!==t[1]&&CE.setProxyServer(this._joinInfo.proxyServer),"443"!==FE("STATS_COLLECTOR_PORT").toString()&&Tg.setProxyServer(this._joinInfo.proxyServer);return Tg.reportApiInvoke(this._sessionId,{name:uf.JOIN_FALLBACK_TO_PROXY,options:[this._joinInfo.proxyServer],tag:lf.TRACER}).onSuccess(),this.emit(Rf.JOIN_FALLBACK_TO_PROXY,this._joinInfo.proxyServer),this._gateway.join(this._joinInfo,this._key)}if(CE.info("[".concat(this._clientId,"] join by datachannel timeout, fallback to websocket")),!this._joinInfo||!this._key)throw new EE(_E.INVALID_OPERATION);return Tg.reportApiInvoke(this._sessionId,{name:uf.DATACHANNEL_FAILBACK,options:[this.store.clientId],tag:lf.TRACER}).onSuccess(),this._joinGateway()}return e}).then(e=>e)}async leave(){CE.info("[".concat(this._clientId,"] Leaving channel")),window.removeEventListener(Wh()?"beforeunload":"pagehide",this._handleBeforeUnload),this._reset(),function(e){const t=qE.indexOf(e);-1!==t&&qE.splice(t,1)}(this);const e=await this._leaveMutex.lock();if("DISCONNECTED"===this.connectionState)return CE.info("[".concat(this._clientId,"] Leaving channel repeated, success")),void e();await this._gateway.leave("CONNECTED"!==this.connectionState),CE.info("[".concat(this._clientId,"] Leaving channel success")),this._joinAndNotLeaveYet=!1,this.store.resetJoinChannelServiceRecords(),e()}async publish(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(Array.isArray(e)||(e=[e]),0===e.length)throw new EE(_E.INVALID_PARAMS,"track list is empty");if("audience"===this._gateway.role)throw new EE(_E.INVALID_OPERATION,"audience can not publish stream");for(const i of e){if(!(i instanceof yg))throw new EE(_E.INVALID_PARAMS,"parameter is not local track");if(!i._enabled&&t)throw new EE(_E.TRACK_IS_DISABLED,"can not publish a disabled track: ".concat(i.getTrackId()))}CE.info("[".concat(this._clientId,"] Publishing tracks, id ").concat(e.map(e=>"".concat(e.getTrackId()," ")))),await this._configDistribute.awaitConfigDistributeComplete(),t&&e.forEach(e=>{const t=this._configDistribute.getBitrateLimit();e instanceof QC&&t&&e.setBitrateLimit(t.uplink)});const i=await this._publishMutex.lock();try{await this._publishHighStream(e),CE.info("[".concat(this._clientId,"] Publish success, id ").concat(e.map(e=>"".concat(e.getTrackId()," "))))}catch(e){throw CE.error("[".concat(this._clientId,"] publish error"),e.toString()),e}finally{i()}}async unpublish(e){if(!this._joinInfo||void 0===this._uid)throw new EE(_E.INVALID_OPERATION,"Can't unpublish stream, haven't joined yet!");e?Array.isArray(e)||(e=[e]):e=this._p2pChannel.getAllTracks(!0),CE.info("[".concat(this._clientId,"] Unpublish tracks, tracks ").concat(e.map(e=>"".concat(e.getTrackId()," "))," "));const t=await this._publishMutex.lock();try{const i=await this._p2pChannel.unpublish(e);i&&await this._gateway.unpublish(i,this._uid),CE.info("[".concat(this._clientId,"] Unpublish success,tracks ").concat(e.map(e=>"".concat(e.getTrackId()))))}catch(e){throw CE.error("[".concat(this._clientId,"] unpublish error"),e.toString()),e}finally{t&&t()}}async subscribe(e,t){return this._subscribe(e,t)}async _subscribe(e,t,i){if(Gm(t,"mediaType",["audio","video"]),!this._joinInfo)throw new EE(_E.INVALID_OPERATION,"Can't subscribe stream, not joined");if("CONNECTED"!==this.connectionState&&"RECONNECTING"!==this.connectionState)throw new EE(_E.INVALID_OPERATION,"Can't subscribe stream in ".concat(this.connectionState," state"));if(!this._users.find(t=>t===e)){const t=new EE(_E.INVALID_REMOTE_USER,"user is not in the channel");throw CE.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid,", this user is not in the channel")),t}if(!e.hasAudio&&!e.hasVideo){const t=new EE(_E.INVALID_REMOTE_USER,"user is not published");throw CE.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid,", user is not published")),t}if(!(i||("audio"!==t||e.hasAudio&&void 0!==e._audioSSRC)&&("video"!==t||e.hasVideo&&void 0!==e._videoSSRC))){const i=new EE(_E.REMOTE_USER_IS_NOT_PUBLISHED);throw CE.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid," with mediaType ").concat(t,", remote track is not published")),i}const n="audio"===t?e._audioSSRC:e._videoSSRC,r="audio"===t?e._audioOrtc:e._videoOrtc,o="video"===t?e._rtxSsrcId:void 0,s={stream_type:"audio"===t?gS.AUDIO:gS.VIDEO,ssrcId:n},a=await this._subscribeMutex.lock();CE.info("[".concat(this._clientId,"] subscribe user ").concat(e.uid,", mediaType: ").concat(t));try{if(await this._p2pChannel.hasRemoteMediaWithLock(e,t))await this._p2pChannel.unmuteRemote(e,t);else try{aI.markSubscribeStart(this.store.clientId,n),this.store.subscribe(e.uid,t,Date.now()),await this._p2pChannel.subscribe(e,t,n,o,r);try{await this._gateway.subscribe(e.uid,s,!0)}catch(i){if((null==i?void 0:i.code)!==_E.WS_ABORT)throw await this._p2pChannel.unsubscribe(e,t),i;await this._p2pChannel.unsubscribe(e,t,!0),this._p2pChannel.setPendingRemoteMedia(e,t)}this.store.subscribe(e.uid,t,void 0,Date.now()),this._p2pChannel.reportSubscribeEvent(!0,null,e,t)}catch(i){throw this._p2pChannel.reportSubscribeEvent(!1,null==i?void 0:i.code,e,t),i}CE.info("[".concat(this._clientId,"] subscribe success user ").concat(e.uid,", mediaType: ").concat(t)),this._defaultStreamFallbackType&&this.setStreamFallbackOption(e.uid,this._defaultStreamFallbackType).catch(e=>{CE.warning("[".concat(this._clientId,"] auto set fallback failed"),e)});const i="audio"===t?e._audioTrack:e._videoTrack;if(!i)throw new EE(_E.UNEXPECTED_ERROR,"can not find remote track in user object");return i}catch(t){throw CE.error("[".concat(this._clientId,"] subscribe user ").concat(e.uid," error"),t),t}finally{a()}}async massSubscribe(e){if(Ym(e,"subscribeList"),!this._joinInfo)throw new EE(_E.INVALID_OPERATION,"Can't subscribe stream, not joined");if("CONNECTED"!==this.connectionState&&"RECONNECTING"!==this.connectionState)throw new EE(_E.INVALID_OPERATION,"Can't subscribe stream in ".concat(this.connectionState," state"));const t=Date.now(),i=new Map,n=await this._subscribeMutex.lock();CE.info("[".concat(this._clientId,"]start massSubscribe user ").concat(e.map(e=>{let{user:t,mediaType:i}=e;return"user: ".concat(null==t?void 0:t.uid,", mediaType: ").concat(i)}).join("; ")));const r=(e=[...e]).map(e=>{let{user:t,mediaType:i}=e;return{user:t,mediaType:i}}),o=await this._p2pChannel.globalLock();try{var s;for(let t=e.length-1;t>=0;t--){const n=e[t],{user:o,mediaType:s}=n;if(Gm(s,"mediaType",["audio","video"]),!o){const e=new EE(_E.INVALID_PARAMS,"user property does not exist in subscribeList item");throw CE.error("[".concat(this._clientId,"] user property does not exist in subscribeList item")),e}if(!this._users.find(e=>e===o)){const i=new EE(_E.INVALID_REMOTE_USER,"user is not in the channel");CE.error("[".concat(this._clientId,"] can not massSubscribe ").concat(o.uid,", this user is not in the channel")),r[t].error=i,e.splice(t,1);continue}if("audio"===s&&(!o.hasAudio||void 0===o._audioSSRC)||"video"===s&&(!o.hasVideo||void 0===o._videoSSRC)){const i=new EE(_E.REMOTE_USER_IS_NOT_PUBLISHED);CE.error("[".concat(this._clientId,"] can not subscribe ").concat(o.uid," with mediaType ").concat(s,", remote user is not published")),r[t].error=i,e.splice(t,1);continue}const a=rS.Video|rS.LwoVideo,c=i.get(o);if(c){if("video"===s?c&a:c&rS.Audio){e.splice(t,1),CE.warning("repeat massSubscribe user:".concat(o.uid,", mediaType:").concat(s," twice"));continue}i.set(o,c|("video"===s?a:rS.Audio))}else i.set(o,"video"===s?a:rS.Audio)}for(let t=e.length-1;t>=0;t--){const n=e[t],{user:r,mediaType:o}=n,s=rS.Video|rS.LwoVideo;if(this._p2pChannel.hasRemoteMedia(r,o)){await this._p2pChannel.unmuteRemoteNoLock(r,o);const n=i.get(r);i.set(r,"video"===o?n^s:n^rS.Audio),e.splice(t,1)}}this.store.massSubscribe(e.map(e=>({userId:e.user.uid,type:e.mediaType})),t);const a=zi(s=Array.from(i.entries())).call(s,(e,t)=>{let[i,n]=t;if(0===n)return e;const r={stream_id:i.uid,stream_type:n};return n&rS.Audio&&(r.audio_ssrc=i._audioSSRC),n&rS.Video&&(r.video_ssrc=i._videoSSRC),e.push(r),e},[]);try{e.length>0&&await this._p2pChannel.massSubscribeNoLock(e.map(e=>{let{user:t,mediaType:i}=e;return{user:t,mediaType:i,ssrcId:i===gS.VIDEO?t._videoSSRC:t._audioSSRC,rtxSsrcId:t._rtxSsrcId}}));const i=new Map;if(a.length>0){const e=await this._gateway.subscribeAll(a,!0);((null==e?void 0:e.users)||[]).forEach(e=>{let{stream_id:t,video_error_code:n,audio_error_code:r,error_code:o}=e;(n||r||o)&&i.set(t,{video_error_code:n,audio_error_code:r,error_code:o})})}if(Array.from(i.entries()).length>0){const e=Array.from(i.entries()).map(e=>{let t,[i,n]=e;n.error_code||n.video_error_code&&n.audio_error_code?t=void 0:n.video_error_code?t=gS.VIDEO:n.audio_error_code&&(t=gS.AUDIO);return{user:this.remoteUsers.find(e=>e.uid===i),mediaType:t}});await this._p2pChannel.massUnsubscribeNoLock(e)}for(const e of r){const t=i.get(e.user.uid);if(t){const i=t.error_code||"audio"===e.mediaType&&t.audio_error_code||"video"===e.mediaType&&t.video_error_code;if(i){const t=$I(i);CE.error("user:".concat(e.user.uid," mediaType:").concat(e.mediaType," has massSubscribe error ").concat(t.desc)),e.error=new EE(_E.SUBSCRIBE_FAILED,"code ".concat(i,": ").concat(t.desc))}}e.error||("video"===e.mediaType?e.track=e.user.videoTrack:e.track=e.user.audioTrack)}return this.store.massSubscribe(r.filter(e=>!e.error).map(e=>({userId:e.user.uid,type:e.mediaType})),void 0,Date.now()),r.forEach(e=>{var i;Tg.subscribe(this.store.sessionId,{succ:!!e.error,ec:(null===(i=e.error)||void 0===i?void 0:i.code)||null,video:e.mediaType===gS.VIDEO,audio:e.mediaType===gS.AUDIO,peerid:e.user.uid,subscribeRequestid:e.mediaType===gS.VIDEO?e.user._videoSSRC:e.user._audioSSRC,p2pid:this.store.p2pId,eventElapse:Math.floor(performance.now()-t)},!0)}),CE.info("[".concat(this._clientId,"] massSubscribe success ").concat(e.map(e=>{let{user:t,mediaType:i}=e;return"user: ".concat(null==t?void 0:t.uid,", mediaType: ").concat(i)}).join("; "))),r}catch(t){throw await this._p2pChannel.massUnsubscribeNoLock(e),t}}finally{o(),n()}}async unsubscribe(e,t){if(t&&Gm(t,"mediaType",["audio","video"]),!this._joinInfo)throw new EE(_E.INVALID_OPERATION,"Can't unsubscribe stream, haven't joined yet!");if(!this._users.find(t=>t===e)){const t=new EE(_E.INVALID_REMOTE_USER,"user is not in the channel");throw CE.error("[".concat(this._clientId,"] can not unsubscribe ").concat(e.uid,", user is not in the channel")),t}CE.info("[".concat(this._clientId,"] unsubscribe uid: ").concat(e.uid,", mediaType: ").concat(t));try{const i=await this._p2pChannel.unsubscribe(e,t);i&&await this._gateway.unsubscribe(i,e.uid),CE.info("[".concat(this._clientId,"] unsubscribe success uid: ").concat(e.uid,", mediaType: ").concat(t))}catch(t){if(t.code===_E.DISCONNECT_P2P)return void CE.warning("disconnecting p2p, abort unsubscribe request.");throw CE.error("[".concat(this._clientId,"] unsubscribe user ").concat(e.uid," error"),t.toString()),t}}async massUnsubscribe(e){if(Ym(e,"unsubscribeList"),!this._joinInfo)throw new EE(_E.INVALID_OPERATION,"Can't unsubscribeAll stream, haven't joined yet!");CE.info("[".concat(this._clientId,"] start massUnsubscribe ").concat(e.map(e=>{let{user:t,mediaType:i}=e;return"user: ".concat(null==t?void 0:t.uid,", mediaType: ").concat(i,";")}).join())),e=[...e];const t=new Map;for(let i=e.length-1;i>=0;i--){const{user:n,mediaType:r}=e[i];if(!n){const e=new EE(_E.INVALID_PARAMS,"user property does not exist in unsubscribeList item");throw CE.error("[".concat(this._clientId,"] user property does not exist in unsubscribeList item")),e}Gm(r,"mediaType",["video","audio",void 0]);if(!this._users.find(e=>e===n)){CE.warning("[".concat(this._clientId,"] can not unsubscribe ").concat(n.uid,", user is not in the channel")),e.splice(i,1);continue}const o=rS.Video|rS.LwoVideo;if(t.has(n)){const s=t.get(n);let a;switch(r){case"video":a=s&o;break;case"audio":a=s&rS.Audio;break;default:a=s&(rS.Audio|o)}if(a){CE.warning("repeat massUnsubscribe user:".concat(n.uid,",mediaType:").concat(r," twice.")),e.splice(i,1);continue}r?"audio"===r?t.set(n,s|rS.Audio):"video"===r&&t.set(n,s|o):t.set(n,s|rS.Audio|o)}else r?"audio"===r?t.set(n,rS.Audio):"video"===r&&t.set(n,o):t.set(n,rS.Audio|o)}try{const t=await this._p2pChannel.massUnsubscribe(e);t&&await this._gateway.massUnsubscribe(t),CE.info("[".concat(this._clientId,"] massUnsubscribe success ").concat(e.map(e=>{let{user:t,mediaType:i}=e;return"user: ".concat(null==t?void 0:t.uid,", mediaType: ").concat(i,";")}).join()))}catch(e){if(e.code===_E.DISCONNECT_P2P)return void CE.warning("disconnecting p2p, abort unsubscribe request.");throw CE.error("[".concat(this._clientId,"] massUnsubscribe error"),e.toString()),e}}setLowStreamParameter(e){!function(e){if(!e)throw new EE(_E.INVALID_PARAMS);Xm(e.width)||Hm(e.width,"streamParameter.width"),Xm(e.height)||Hm(e.height,"streamParameter.height"),Xm(e.framerate)||Hm(e.framerate,"streamParameter.framerate"),Xm(e.bitrate)||Wm(e.bitrate,"streamParameter.bitrate")}(e),(!e.width&&e.height||e.width&&!e.height)&&CE.warning("[".concat(this._clientId,"] The width and height parameters take effect only when both are set")),CE.info("[".concat(this._clientId,"] set low stream parameter to"),JSON.stringify(e));const t=this._configDistribute.getLowStreamConfigDistribute();t&&t.bitrate&&e.bitrate&&t.bitrate<e.bitrate&&(e.bitrate=t.bitrate),this._lowStreamParameter=e}async enableDualStream(){if(!MS().supportDualStream)throw Tg.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!0,succ:!1}),new EE(_E.NOT_SUPPORTED,"Your browser is not support dual stream");if(this._isDualStreamEnabled)throw new EE(_E.INVALID_OPERATION,"Dual stream is already enabled");if(this._p2pChannel.canPublishLowStream())try{await this._publishLowStream()}catch(e){throw Tg.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!0,succ:!1}),e}this._isDualStreamEnabled=!0,Tg.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!0,succ:!0}),CE.info("[".concat(this._clientId,"] enable dual stream"))}async disableDualStream(){if(this._isDualStreamEnabled){if(!this._joinInfo)throw new EE(_E.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if(this._p2pChannel.getLocalMedia(RS.LocalVideoLowTrack))try{const e=await this._p2pChannel.unpublishLowStream();e&&await this._gateway.unpublish(e,this._joinInfo.stringUid||this._joinInfo.uid)}catch(e){throw Tg.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!1,succ:!1}),e}this._isDualStreamEnabled=!1,Tg.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!1,succ:!0}),CE.info("[".concat(this._clientId,"] disable dual stream"))}}async setClientRole(e,t){if(function(e){Gm(e,"role",["audience","host"])}(e),t&&kf(t),"rtc"===this._mode)throw CE.warning("[".concat(this._clientId,"]rtc mode can not use setClientRole")),new EE(_E.INVALID_OPERATION,"rtc mode can not use setClientRole");if(t&&t.level&&"host"===e)throw new EE(_E.INVALID_OPERATION,"host mode can not set audience latency level");if("audience"===e&&this._p2pChannel.hasLocalMedia())throw new EE(_E.INVALID_OPERATION,"can not set client role to audience when publishing stream");await this._gateway.setClientRole(e,t),CE.info("[".concat(this._clientId,"] set client role to ").concat(e,", level: ").concat(t&&t.level))}setProxyServer(e,t){if(Km(e,"proxyServer"),!t){if("DISCONNECTED"!==this.connectionState)throw new EE(_E.INVALID_OPERATION,"Set proxy server before join channel");if("disabled"!==this._cloudProxyServerMode||this._useLocalAccessPoint)throw new EE(_E.INVALID_OPERATION,"You have already set the proxy")}this._proxyServer=e,Tg.setProxyServer(this._proxyServer),CE.setProxyServer(this._proxyServer),CE.info("[".concat(this._clientId,"] Set proxy server ").concat(t?"by initialize call":""," success."))}setTurnServer(e,t){if(Array.isArray(e)||(e=[e]),!t){if("DISCONNECTED"!==this.connectionState)throw new EE(_E.INVALID_OPERATION,"Set turn server before join channel");if("disabled"!==this._cloudProxyServerMode||this._useLocalAccessPoint)throw new EE(_E.INVALID_OPERATION,"You have already set the proxy")}if(Pf(e))return this._turnServer={servers:e,mode:"original-manual"},void CE.info("[".concat(this._clientId,"] Set original turnserver ").concat(t?"by initialize call":""," success: ").concat(e.map(e=>e.urls).join(","),"."));e.forEach(e=>Lf(e)),this._turnServer={servers:e,mode:"manual"},CE.info("[".concat(this._clientId,"] Set turnserver ").concat(t?"by initialize call":""," success."))}setLicense(e){if("DISCONNECTED"!==this.connectionState){throw new EE(_E.INVALID_OPERATION,"you should set license before join channel")}if(Km(e,"license",32,32),!/^[A-Za-z\d]+$/.test(e))throw new EE(_E.INVALID_PARAMS,"license should only contains characters from A-Z a-z 0-9");this._license=e,CE.info("[".concat(this._clientId,"] set license success"),e)}startProxyServer(e){if("DISCONNECTED"!==this.connectionState)throw new EE(_E.INVALID_OPERATION,"Start proxy server before join channel");if(this._proxyServer||"manual"===this._turnServer.mode||this._useLocalAccessPoint)throw new EE(_E.INVALID_OPERATION,"You have already set the proxy");const t=[3,4,5];let i;switch(void 0===e&&(e=3),e){case 1:case 2:throw new EE(_E.NOT_SUPPORTED,"proxy mode 1/2 has been deprecated and not supported.");case 3:i="proxy3";break;case 4:i="proxy4";break;case 5:i="proxy5";break;default:throw new EE(_E.INVALID_PARAMS,"proxy server mode must be ".concat(t.join("|")))}this._cloudProxyServerMode=i,this.store.cloudProxyServerMode=i,CE.info("[".concat(this._clientId,"] set cloud proxy server mode to"),this._cloudProxyServerMode)}stopProxyServer(){if("DISCONNECTED"!==this.connectionState)throw new EE(_E.INVALID_OPERATION,"Stop proxy server after leave channel");Tg.setProxyServer(),CE.setProxyServer(),this._cloudProxyServerMode="disabled",this.store.cloudProxyServerMode="disabled",CE.info("[".concat(this._clientId,"] set cloud proxy server mode to"),this._cloudProxyServerMode),this._proxyServer=void 0,this._turnServer={mode:"auto",servers:[]}}setLocalAccessPointsV2(e){if(!e.accessPoints)throw new EE(_E.INVALID_PARAMS,"accessPoints is required.");Ym(e.accessPoints.serverList,"accessPoints.serverList"),Km(e.accessPoints.domain,"accessPoints.domain");const t=(e,t)=>{Wm(e,t,0,65535,!0)};let i=443;if(e.accessPoints.port&&(t(e.accessPoints.port,"accessPoints.port"),i=e.accessPoints.port),this._proxyServer||"disabled"!==this._cloudProxyServerMode)throw new EE(_E.INVALID_OPERATION,"set local access point failed, You have already set the cloud proxy");FE("CLOSE_AFB_FOR_LOCAL_AP")&&(VE("JOIN_WITH_FALLBACK_SIGNAL_PROXY",!1),VE("JOIN_WITH_FALLBACK_MEDIA_PROXY",!1));const n=/^((\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.){3}(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/,r=e.accessPoints.domain,o=e.accessPoints.serverList.map(e=>n.test(e)?"".concat(e.replace(/\./g,"-"),".").concat(r):e),s=o.map(e=>"".concat(e,":").concat(i));this._useLocalAccessPoint=!0,this._setLocalAPVersion=2,VE("WEBCS_DOMAIN",s),VE("WEBCS_DOMAIN_BACKUP_LIST",s),VE("GATEWAY_DOMAINS",[r]),e.report&&e.report.hostname&&Array.isArray(e.report.hostname)&&e.report.hostname.length?(Ym(e.report.hostname,"report.hostname"),VE("EVENT_REPORT_DOMAIN",e.report.hostname[0]),VE("EVENT_REPORT_BACKUP_DOMAIN",e.report.hostname[1]||e.report.hostname[0])):(VE("EVENT_REPORT_DOMAIN",o[0]),VE("EVENT_REPORT_BACKUP_DOMAIN",o[1]||o[0]));let a=6443;e.report&&e.report.port&&(t(e.report.port,"report.port"),a=e.report.port),VE("STATS_COLLECTOR_PORT",a),e.report?VE("ENABLE_EVENT_REPORT",!0):VE("ENABLE_EVENT_REPORT",!1);let c="";e.log&&e.log.hostname&&Array.isArray(e.log.hostname)&&e.log.hostname.length?(Ym(e.log.hostname,"log.hostname"),c=e.log.hostname[0]):c=o[0];let d=6444;e.log&&e.log.port&&(t(e.log.port,"log.port"),d=e.log.port),VE("LOG_UPLOAD_SERVER","".concat(c,":").concat(d));let u=[];e.cds&&e.cds.hostname&&Array.isArray(e.cds.hostname)&&e.cds.hostname.length?(Ym(e.cds.hostname,"cds.hostname"),u=e.cds.hostname):u=o;let l=443;e.cds&&e.cds.port&&(t(e.cds.port,"cds.port"),l=e.cds.port),VE("CDS_AP",u.map(e=>"".concat(e,":").concat(l))),e.cds?VE("ENABLE_CONFIG_DISTRIBUTE",!0):VE("ENABLE_CONFIG_DISTRIBUTE",!1),CE.info("set local access point v2 success")}setLocalAccessPoints(e,t){if(Ym(e,"serverList"),Km(t,"domain"),this._proxyServer||"disabled"!==this._cloudProxyServerMode)throw new EE(_E.INVALID_OPERATION,"set local access point failed, You have already set the cloud proxy");const i=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/;e=e.map(e=>i.test(e)?"".concat(e.replace(/\./g,"-"),".").concat(t):e),this._useLocalAccessPoint=!0,this._setLocalAPVersion=1,VE("WEBCS_DOMAIN",e),VE("WEBCS_DOMAIN_BACKUP_LIST",e),VE("GATEWAY_DOMAINS",[t]),VE("EVENT_REPORT_DOMAIN",e[0]),VE("EVENT_REPORT_BACKUP_DOMAIN",e[1]||e[0]),VE("LOG_UPLOAD_SERVER","".concat(e[0],":6444")),CE.info("set local access point success")}async setRemoteDefaultVideoStreamType(e){if(Gm(e,"streamType",[0,1]),this._remoteDefaultVideoStreamType=e,this._joinInfo)try{await this._gateway.setDefaultRemoteVideoStreamType(e),this._joinInfo.defaultVideoStream=this._remoteDefaultVideoStreamType}catch(e){throw CE.error("[".concat(this._clientId,"] set default remote video stream type error"),e.toString()),e}else CE.debug("haven't joined yet, cache remoteDefaultVideoStreamType ".concat(e))}async setRemoteVideoStreamType(e,t){Gm(t,"streamType",[0,1]);try{await this._gateway.setRemoteVideoStreamType(e,t),setTimeout(()=>{const t=this._users.find(t=>t.uid===e);t&&t.videoTrack&&t.videoTrack.updateMediaStreamTrackResolution()},2e3)}catch(e){throw CE.error("[".concat(this._clientId,"] set remote video stream type error"),e.toString()),e}CE.info("[".concat(this._clientId,"] set remote ").concat(e," video stream type to ").concat(t)),this._remoteStreamTypeCacheMap.set(e,t)}async setStreamFallbackOption(e,t){Gm(t,"fallbackType",[0,1,2]);try{await this._gateway.setStreamFallbackOption(e,t)}catch(e){throw CE.error("[".concat(this._clientId,"] set stream fallback option"),e.toString()),e}CE.info("[".concat(this._clientId,"] set remote ").concat(e," stream fallback type to ").concat(t)),this._streamFallbackTypeCacheMap.set(e,t)}setEncryptionConfig(e,t,i){!function(e){Gm(e,"encryptionMode",["aes-128-xts","aes-256-xts","aes-128-ecb","sm4-128-ecb","aes-128-gcm","aes-256-gcm","aes-128-gcm2","aes-256-gcm2","none"])}(e),Km(t,"secret");if(["aes-128-gcm2","aes-256-gcm2"].includes(e)){if(!i||!(i instanceof Uint8Array&&32===i.length))throw new EE(_E.INVALID_PARAMS,"salt must be an Uint8Array and exactly equal to 32 bytes")}else if(i)throw new EE(_E.INVALID_PARAMS,"current encrypt mode does not need salt");new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*,.<>?/:;'\"|{}\\[\\]])(?=.{8,})").test(t)||CE.warning("The secret is not strong:\n      The secret must contain at least 1 lowercase alphabetical character,\n      The secret must contain at least 1 uppercase alphabetical character,\n      The secret must contain at least 1 numeric character,\n      The secret must contain at least one special character,\n      The secret must be eight characters or longer.\n      "),this._encryptionMode=e,this._encryptionSecret=t,i&&(this._encryptionSalt=KI(i))}async renewToken(e){if(Km(e,"token",1,2047),!this._key||!this._joinInfo)throw new EE(_E.INVALID_OPERATION,"renewToken should not be called before user join");const t=this._key;this._key=e,this._joinInfo&&(this._joinInfo.token=e);const i=await this._renewTokenMutex.lock();try{if(FE("USE_NEW_TOKEN")){CE.debug("start renew token with ticket from unilbs");const t=await Kv(this._joinInfo,this._axiosCancelSource.token,this._config.httpRetryConfig||mE);CE.debug("[".concat(this._clientId,"] get ticket from unilbs success")),await this._gateway.renewToken({token:e,ticket:t})}else CE.debug("start renew token without ticket"),await this._gateway.renewToken({token:e});CE.debug("[".concat(this._clientId,"] renewToken success"))}catch(e){throw this._key=t,this._joinInfo.token=t,CE.error("[".concat(this._clientId,"] renewToken failed"),e.toString()),e}finally{i()}}enableAudioVolumeIndicator(){this._audioVolumeIndicationInterval?CE.warning("you have already enabled audio volume indicator!"):this._audioVolumeIndicationInterval=window.setInterval(()=>{const e=this._p2pChannel.getAudioLevels();this.emit(Rf.VOLUME_INDICATOR,e)},FE("AUDIO_VOLUME_INDICATION_INTERVAL")||2e3)}getRTCStats(){const e=this._statsCollector.getRTCStats(),t=this._gateway.getInChannelInfo();return e.Duration=Math.round(t.duration/1e3),e}async startLiveStreaming(e,t){if(!t){if("h264"!==this._codec)throw new EE(_E.LIVE_STREAMING_INVALID_RAW_STREAM,"raw streaming is only support h264");if(!this._p2pChannel.hasLocalMedia())throw new EE(_E.LIVE_STREAMING_INVALID_RAW_STREAM,"can not find stream to raw streaming")}if(this._liveRawStreamingClient&&this._liveRawStreamingClient.hasUrl(e)||this._liveTranscodeStreamingClient&&this._liveTranscodeStreamingClient.hasUrl(e))throw new EE(_E.LIVE_STREAMING_TASK_CONFLICT);const i=t?Bf.TRANSCODE:Bf.RAW;return this._createLiveStreamingClient(i).startLiveStreamingTask(e,i)}setLiveTranscoding(e){return this._createLiveStreamingClient(Bf.TRANSCODE).setTranscodingConfig(e)}async stopLiveStreaming(e){const t=[this._liveRawStreamingClient,this._liveTranscodeStreamingClient].filter(t=>t&&t.hasUrl(e));if(!t.length)throw new EE(_E.INVALID_PARAMS,"can not find live streaming url to stop");await Sl.all(t.map(t=>t&&t.stopLiveStreamingTask(e)))}async addInjectStreamUrl(e,t){if(!this._joinInfo)throw new EE(_E.INVALID_OPERATION,"can not addInjectStreamUrl, no joininfo");const i=this._createLiveStreamingClient(Bf.INJECT);i.setInjectStreamConfig(t,0),await i.startLiveStreamingTask(e,Bf.INJECT)}async removeInjectStreamUrl(){var e;const t=this._createLiveStreamingClient(Bf.INJECT),i=Array.from(HR(e=t.streamingTasks).call(e)).find(e=>e.mode===Bf.INJECT);if(!this._joinInfo||!i)throw new EE(_E.INVALID_OPERATION,"can remove addInjectStreamUrl, no joininfo or inject task");await t.stopLiveStreamingTask(i.url)}async startChannelMediaRelay(e){iC(e);const t=this._createChannelMediaRelayClient();await t.startChannelMediaRelay(e)}async updateChannelMediaRelay(e){iC(e);const t=this._createChannelMediaRelayClient();await t.updateChannelMediaRelay(e)}async stopChannelMediaRelay(){const e=this._createChannelMediaRelayClient();await e.stopChannelMediaRelay()}sendStreamMessage(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!this._joinInfo)throw new EE(_E.INVALID_OPERATION,"can not send data stream, not joined");if("string"==typeof e){e=(new TextEncoder).encode(e)}if(new Blob([e]).size>1024)throw new EE(_E.INVALID_PARAMS,"stream message out of range.");return this._gateway.signal.request(yf.DATA_STREAM,{payload:KI(e)},!t)}sendMetadata(e){if(!this._joinInfo)throw new EE(_E.INVALID_OPERATION,"can not send metadata, not joined");if(new Blob([e]).size>1024)throw new EE(_E.METADATA_OUT_OF_RANGE);return this._gateway.signal.request(yf.SEND_METADATA,{session_id:this._joinInfo.sid,metadata:KI(e)})}async sendCustomReportMessage(e){if(Array.isArray(e)||(e=[e]),e.forEach(rf),!this._joinInfo)throw new EE(_E.INVALID_OPERATION,"can not send custom report, not joined");await Tg.sendCustomReportMessage(this._joinInfo.sid,e)}getLocalAudioStats(){return this._statsCollector.getLocalAudioTrackStats()}getRemoteAudioStats(){return this._statsCollector.getRemoteAudioTrackStats()}getLocalVideoStats(){return this._statsCollector.getLocalVideoTrackStats()}getRemoteVideoStats(){return this._statsCollector.getRemoteVideoTrackStats()}getRemoteNetworkQuality(){return this._statsCollector.getRemoteNetworkQualityStats()}async pickSVCLayer(e,t){Gm(t.spatialLayer,"spatialLayer",[0,1,2,3]),Gm(t.temporalLayer,"temporalLayer",[0,1,2,3]);try{await this._gateway.pickSVCLayer(e,t)}catch(e){throw CE.error("[".concat(this._clientId,"] pick SVC layer failed"),e.toString()),e}}_reset(){if(CE.debug("[".concat(this._clientId,"] reset client")),this._axiosCancelSource.cancel(),this._axiosCancelSource=uE.CancelToken.source(),this._streamFallbackTypeCacheMap=new Map,this._remoteStreamTypeCacheMap=new Map,this._configDistribute.stopGetConfigDistribute(),this._joinInfo=void 0,this._proxyServer=void 0,this._defaultStreamFallbackType=void 0,this._sessionId=null,this.store.sessionId=null,this._statsCollector.reset(),this._key=void 0,this._appId=void 0,this._uid=void 0,this.store.uid=void 0,this._channelName=void 0,this._encryptionMode="none",this._encryptionSecret=null,this._encryptionSalt=null,this._users.forEach(e=>{e._audioTrack&&e._audioTrack._destroy(),e._videoTrack&&e._videoTrack._destroy()}),this._users=[],this._audioVolumeIndicationInterval&&(window.clearInterval(this._audioVolumeIndicationInterval),this._audioVolumeIndicationInterval=void 0),"fallback"===this._cloudProxyServerMode&&(this._cloudProxyServerMode="disabled",this.store.cloudProxyServerMode="disabled"),this._p2pChannel.reset(),this._publishMutex=new vg("client-publish"),this._subscribeMutex=new vg("client-subscribe"),this._networkQualityInterval&&(window.clearInterval(this._networkQualityInterval),this._networkQualityInterval=void 0),this._injectStreamingClient&&(this._injectStreamingClient.terminate(),this._injectStreamingClient.removeAllListeners(),this._injectStreamingClient=void 0),this._liveRawStreamingClient&&(this._liveRawStreamingClient.terminate(),this._liveRawStreamingClient.removeAllListeners(),this._liveRawStreamingClient=void 0),this._liveTranscodeStreamingClient&&(this._liveTranscodeStreamingClient.terminate(),this._liveTranscodeStreamingClient.removeAllListeners(),this._liveTranscodeStreamingClient=void 0),this._channelMediaRelayClient&&(this._channelMediaRelayClient.dispose(),this._channelMediaRelayClient=void 0),this._inspect)try{this._inspect.close(),this._inspect=void 0}catch(e){}}_startSession(e,t){const i=e||NI();e?CE.debug("[".concat(this._clientId,"] new Session ").concat(i)):CE.debug("[".concat(this._clientId,"] renewSession ").concat(this._sessionId," => ").concat(i)),this._sessionId=i,this.store.sessionId=i,t?Tg.sessionInit(this._sessionId,{lts:(new Date).getTime(),cname:t.channel,appid:t.appId,mode:this._mode}):this._joinInfo?Tg.sessionInit(this._sessionId,{lts:(new Date).getTime(),cname:this._joinInfo.cname,appid:this._joinInfo.appId,mode:this._mode}):this._gateway.joinInfo&&Tg.sessionInit(this._sessionId,{lts:(new Date).getTime(),cname:this._gateway.joinInfo.cname,appid:this._gateway.joinInfo.appId,mode:this._mode}),this._joinInfo&&(this._joinInfo.sid=i),this._gateway.joinInfo&&(this._gateway.joinInfo.sid=i)}async _publishHighStream(e){if(!this._joinInfo||void 0===this._uid)throw new EE(_E.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if("CONNECTED"!==this.connectionState&&"RECONNECTING"!==this.connectionState)throw new EE(_E.INVALID_OPERATION,"can not publish stream in ".concat(this.connectionState," state"));if("auto"===this._turnServer.mode&&FE("FORCE_TURN")&&!FE("TURN_ENABLE_TCP")&&!FE("TURN_ENABLE_UDP"))throw new EE(_E.UNEXPECTED_ERROR,"force TURN With No TURN Configuration");CE.debug("[".concat(this._clientId,"] publish high stream"));try{const i=await this._p2pChannel.publish(e,this._isDualStreamEnabled,this._lowStreamParameter),n=(await i.next()).value;if(n){var t;let e;try{e=await this._gateway.publish(this._uid,n,!0)}catch(e){if(e.code!==_E.DISCONNECT_P2P)throw i.throw(e),e}await i.next((null===(t=e)||void 0===t?void 0:t.ortc)||[])}this._p2pChannel.reportPublishEvent(!0,null);for(const t of e)t instanceof QC&&t._encoderConfig&&this._gateway.setVideoProfile(t._encoderConfig),!t.muted&&t.enabled||await this._p2pChannel.muteLocalTrack(t)}catch(t){if(this._p2pChannel.reportPublishEvent(!1,null==t?void 0:t.code,e),(null==t?void 0:t.code)===_E.WS_ABORT)return;throw t}}async _publishLowStream(){if(!this._joinInfo||void 0===this._uid)throw new EE(_E.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if("CONNECTED"!==this.connectionState&&"RECONNECTING"!==this.connectionState)throw new EE(_E.INVALID_OPERATION,"can not publish stream in ".concat(this.connectionState," state"));CE.debug("[".concat(this._clientId,"] publish low stream"));const e=this._configDistribute.getLowStreamConfigDistribute();e&&e.bitrate&&(this._lowStreamParameter||(this._lowStreamParameter={width:160,height:120,framerate:15,bitrate:50}),this._lowStreamParameter&&this._lowStreamParameter.bitrate&&e.bitrate<this._lowStreamParameter.bitrate&&(this._lowStreamParameter.bitrate=e.bitrate));try{const e=await this._p2pChannel.publishLowStream(this._lowStreamParameter),i=(await e.next()).value;if(i){var t;let n;try{n=await this._gateway.publish(this._uid,i,!0)}catch(t){if(t.code!==_E.DISCONNECT_P2P)throw e.throw(t),t}e.next((null===(t=n)||void 0===t?void 0:t.ortc)||[]),this._p2pChannel.reportPublishEvent(!0,null,void 0,!0)}}catch(e){if(this._p2pChannel.reportPublishEvent(!1,null==e?void 0:e.code,void 0,!0),(null==e?void 0:e.code)===_E.WS_ABORT)return;throw e}}_createLiveStreamingClient(e){if(!this._joinInfo||!this._appId){return new EE(_E.INVALID_OPERATION,"can not create live streaming client, please join channel first").throw()}const t=()=>new eC(this._joinInfo,this._config.websocketRetryConfig||mE,this._config.httpRetryConfig||mE),i=e=>{e.onLiveStreamError=(e,t)=>{Tg.reportApiInvoke(this._sessionId,{name:uf.ON_LIVE_STREAM_ERROR,options:[e,t],tag:lf.TRACER}).onSuccess(),this.emit(Rf.LIVE_STREAMING_ERROR,e,t)},e.onLiveStreamWarning=(e,t)=>{Tg.reportApiInvoke(this._sessionId,{name:uf.ON_LIVE_STREAM_WARNING,options:[e,t],tag:lf.TRACER}).onSuccess(),this.emit(Rf.LIVE_STREAMING_WARNING,e,t)},e.on(Xf.REQUEST_WORKER_MANAGER_LIST,(e,t,i)=>{if(!this._joinInfo)return i(new EE(_E.INVALID_OPERATION,"can not find join info to get worker manager"));Wv(e,this._joinInfo,this._axiosCancelSource.token,mE).then(t).catch(i)})};switch(e){case Bf.RAW:return this._liveRawStreamingClient||(this._liveRawStreamingClient=t(),i(this._liveRawStreamingClient)),this._liveRawStreamingClient;case Bf.TRANSCODE:return this._liveTranscodeStreamingClient||(this._liveTranscodeStreamingClient=t(),i(this._liveTranscodeStreamingClient)),this._liveTranscodeStreamingClient;case Bf.INJECT:return this._injectStreamingClient||(this._injectStreamingClient=t(),this._injectStreamingClient.on(Xf.REQUEST_WORKER_MANAGER_LIST,(e,t,i)=>{if(!this._joinInfo)return i(new EE(_E.INVALID_OPERATION,"can not find join info to get worker manager"));Wv(e,this._joinInfo,this._axiosCancelSource.token,mE).then(t).catch(i)}),this._injectStreamingClient.onInjectStatusChange=(e,t,i)=>{this.emit(Rf.INJECT_STREAM_STATUS,e,t,i)}),this._injectStreamingClient}}_createChannelMediaRelayClient(){if(!this._joinInfo){return new EE(_E.INVALID_OPERATION,"can not create channel media relay client, please join channel first").throw()}return this._channelMediaRelayClient||(this._channelMediaRelayClient=new rC(this._joinInfo,this._clientId,this._config.websocketRetryConfig||mE,this._config.httpRetryConfig||mE),this._channelMediaRelayClient.on("state",e=>{e===eS.RELAY_STATE_FAILURE&&this._channelMediaRelayClient&&this._channelMediaRelayClient.dispose(),this.emit(Rf.CHANNEL_MEDIA_RELAY_STATE,e)}),this._channelMediaRelayClient.on("event",e=>{this.emit(Rf.CHANNEL_MEDIA_RELAY_EVENT,e)})),this._channelMediaRelayClient}_handleGatewayEvents(){this._gateway.on(nS.DISCONNECT_P2P,async()=>{await this._p2pChannel.disconnectForReconnect()}),this._gateway.on(nS.CONNECTION_STATE_CHANGE,(e,t,i)=>{var n;if(i===gf.FALLBACK)return;const r=()=>{this.emit(Rf.CONNECTION_STATE_CHANGE,e,t,i)};if(Tg.reportApiInvoke(this._sessionId||(null===(n=this._gateway.joinInfo)||void 0===n?void 0:n.sid)||null,{name:uf.CONNECTION_STATE_CHANGE,options:[e,t,i],tag:lf.TRACER}).onSuccess(JSON.stringify({cur:e,prev:t,reason:i})),CE.info("[".concat(this._clientId,"] connection state change: ").concat(t," -> ").concat(e)),"DISCONNECTED"===e)return this._reset(),void r();if("RECONNECTING"===e)this._users.forEach(e=>{e._trust_in_room_=!1,e._trust_audio_enabled_state_=!1,e._trust_video_enabled_state_=!1,e._trust_audio_mute_state_=!1,e._trust_video_mute_state_=!1,e._trust_audio_stream_added_state_=!1,e._trust_video_stream_added_state_=!1,e._audioSSRC=void 0,e._videoSSRC=void 0,e._videoOrtc=void 0,e._audioOrtc=void 0,e._cname=void 0,e._rtxSsrcId=void 0}),this._userOfflineTimeout&&window.clearTimeout(this._userOfflineTimeout),this._streamRemovedTimeout&&window.clearTimeout(this._streamRemovedTimeout),this._userOfflineTimeout=void 0,this._streamRemovedTimeout=void 0;else if("CONNECTED"===e){var o;this._streamFallbackTypeCacheMap.forEach((e,t)=>{this._gateway.setStreamFallbackOption(t,e).catch(e=>{CE.warning("[".concat(this._clientId,"] auto set stream fallback option failed"),e)})}),this._remoteStreamTypeCacheMap.forEach((e,t)=>{this._gateway.setRemoteVideoStreamType(t,e).catch(e=>{CE.warning("[".concat(this._clientId,"] auto set remote stream type failed"),e)})}),void 0!==this._remoteDefaultVideoStreamType&&void 0===(null===(o=this._joinInfo)||void 0===o?void 0:o.defaultVideoStream)&&this.setRemoteDefaultVideoStreamType(this._remoteDefaultVideoStreamType).then(()=>{CE.debug("[".concat(this._clientId,"] setRemoteDefaultVideoStreamType after gateway connected"))}).catch(e=>{CE.error("[".concat(this._clientId,"] setRemoteDefaultVideoStreamType after gateway failed, ").concat(e))}),this._p2pChannel.republish(),this._userOfflineTimeout=window.setTimeout(()=>{if("CONNECTED"!==this.connectionState)return;this._userOfflineTimeout=void 0;this._users.filter(e=>!e._trust_in_room_).forEach(e=>{CE.debug("[".concat(this._clientId,"] user offline timeout, emit user offline ").concat(e.uid)),this._handleUserOffline({uid:e.uid})})},3e3),this._streamRemovedTimeout=window.setTimeout(()=>{"CONNECTED"===this.connectionState&&(this._streamRemovedTimeout=void 0,this._users.forEach(e=>{e._trust_audio_mute_state_||(CE.debug("[".concat(this._clientId,"] auto dispatch audio unmute event ").concat(e.uid)),this._handleMuteStream(e.uid,"audio",!1)),e._trust_video_mute_state_||(CE.debug("[".concat(this._clientId,"] auto dispatch video unmute event ").concat(e.uid)),this._handleMuteStream(e.uid,"video",!1)),e._trust_audio_enabled_state_||(CE.debug("[".concat(this._clientId,"] auto dispatch enable local audio ").concat(e.uid)),this._handleSetStreamLocalEnable("audio",e.uid,!0)),e._trust_video_enabled_state_||(CE.debug("[".concat(this._clientId,"] auto dispatch enable local video ").concat(e.uid)),this._handleSetStreamLocalEnable("video",e.uid,!0)),e._trust_video_stream_added_state_||(CE.debug("[".concat(this._clientId,"] auto dispatch reset video stream added ").concat(e.uid)),this._handleResetAddStream(e,"video")),e._trust_audio_stream_added_state_||(CE.debug("[".concat(this._clientId,"] auto dispatch reset audio stream added ").concat(e.uid)),this._handleResetAddStream(e,"audio")),e._video_added_||e._audio_added_||(CE.debug("[".concat(this._clientId,"] auto dispatch stream remove ").concat(e.uid)),this._handleRemoveStream({uid:e.uid,uint_id:e._uintid}))}))},1e3)}r()}),this._gateway.on(nS.REQUEST_NEW_GATEWAY_LIST,(e,t)=>{if(!this._joinInfo)return t(new EE(_E.UNEXPECTED_ERROR,"can not recover, no join info"));Vv(this._joinInfo,this._axiosCancelSource.token,this._config.httpRetryConfig||mE,this.store).then(t=>{this._joinInfo&&(this._joinInfo.apResponse=t.gatewayInfo.res,this._joinInfo.gatewayAddrs=t.gatewayInfo.gatewayAddrs,this._joinInfo.uni_lbs_ip=t.gatewayInfo.uni_lbs_ip),e(t.gatewayInfo.gatewayAddrs.map(e=>{if(this._joinInfo&&this._joinInfo.proxyServer){const t=e.address.split(":");return"wss://".concat(this._joinInfo.proxyServer,"/ws/?h=").concat(t[0],"&p=").concat(t[1])}return"wss://".concat(e.address)}))}).catch(t)}),this._gateway.on(nS.NETWORK_QUALITY,e=>{"normal"===this._networkQualitySensitivity&&this.emit(Rf.NETWORK_QUALITY,e)}),this._gateway.on(nS.STREAM_TYPE_CHANGE,(e,t)=>{this.emit(Rf.STREAM_TYPE_CHANGED,e,t);Tg.reportApiInvoke(this._sessionId,{name:uf.STREAM_TYPE_CHANGE,options:[e,t],tag:lf.TRACER}).onSuccess(JSON.stringify({uid:e,streamType:t}))}),this._gateway.on(nS.IS_P2P_DISCONNECTED,e=>{this._p2pChannel.isP2PDisconnected()?e(!0):this._p2pChannel.hasLocalMedia()||this._p2pChannel.hasRemoteMedia()?e(!1):e(!0)}),this._gateway.on(nS.NEED_RENEW_SESSION,()=>{this._startSession()}),this._gateway.on(nS.REQUEST_P2P_CONNECTION_PARAMS,async(e,t,i)=>{try{t(await this._p2pChannel.startP2PConnection(e))}catch(e){i(e)}}),this._gateway.on(nS.JOIN_RESPONSE,(e,t)=>{const{dtlsParameters:i,iceParameters:n,candidates:r,rtpCapabilities:o,setup:s,cname:a}=mO(e.ortc,t);this._p2pChannel.connect(n,i,r,o,s,a)}),this._gateway.on(nS.REQUEST_DC_CONNECTION_PARAMS,e=>{e(this._p2pChannel.getEstablishParams())}),this._gateway.on(nS.RESET_SIGNAL,e=>{this._p2pChannel.resetConnection(e),this._handleGatewaySignalEvents()}),this._gateway.on(nS.DATACHANNEL_FAILBACK,()=>{this._joinGateway()}),this._gateway.on(nS.DATACHANNEL_PRECONNECT,async(e,t,i,n)=>{var r,o,s,a,c,d;await this._p2pChannel.startP2PConnection({turnServer:null===(r=this._joinInfo)||void 0===r?void 0:r.turnServer},!0);const u=function(e,t){let i;return t&&t.ip&&"number"==typeof t.port?(i=[{foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:t.ip,port:t.port.toString(),type:"host",extension:{}}],CE.debug("Using remote candidate from AP ".concat(t.ip,":").concat(t.port)),t.ip6&&(i.push({foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:t.ip6,port:t.port.toString(),type:"host",extension:{}}),CE.debug("Using IPV6 remote candidate from AP ".concat(t.ip6,":").concat(t.port)))):i=[{foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:e.ip,port:e.port.toString(),type:"host",extension:{}}],i}(e,t);return this._p2pChannel.preConnect({iceUfrag:"".concat(null===(o=this._joinInfo)||void 0===o?void 0:o.apResponse.cid,"_").concat(null===(s=this._joinInfo)||void 0===s?void 0:s.apResponse.cert),icePwd:"".concat(null===(a=this._joinInfo)||void 0===a?void 0:a.apResponse.cid,"_").concat(null===(c=this._joinInfo)||void 0===c?void 0:c.apResponse.cert)},{fingerprints:[{hashFunction:"sha-256",fingerprint:null!==(d=FE("FINGERPRINT"))&&void 0!==d?d:e.fingerprint}]},u,{send:{audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]},recv:{audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]}},"active","o/i14u9pJrxRKAsu").then(i).catch(n)})}_handleGatewaySignalEvents(){this._gateway.signal.on(Of.ON_USER_ONLINE,this._handleUserOnline),this._gateway.signal.on(Of.ON_USER_OFFLINE,this._handleUserOffline),this._gateway.signal.on(Of.ON_ADD_AUDIO_STREAM,e=>this._handleAddAudioOrVideoStream("audio",e.uid,e.ssrcId,e.cname,e.uint_id,e.ortc)),this._gateway.signal.on(Of.ON_ADD_VIDEO_STREAM,e=>this._handleAddAudioOrVideoStream("video",e.uid,e.ssrcId,e.cname,e.uint_id,e.ortc,e.rtxSsrcId)),this._gateway.signal.on(Of.ON_REMOVE_STREAM,this._handleRemoveStream),this._gateway.signal.on(Of.ON_P2P_LOST,this._handleP2PLost),this._gateway.signal.on(Of.MUTE_AUDIO,e=>this._handleMuteStream(e.uid,"audio",!0)),this._gateway.signal.on(Of.UNMUTE_AUDIO,e=>this._handleMuteStream(e.uid,"audio",!1)),this._gateway.signal.on(Of.MUTE_VIDEO,e=>this._handleMuteStream(e.uid,"video",!0)),this._gateway.signal.on(Of.UNMUTE_VIDEO,e=>this._handleMuteStream(e.uid,"video",!1)),this._gateway.signal.on(Of.RECEIVE_METADATA,e=>{const t=HI(e.metadata);this.emit(Rf.RECEIVE_METADATA,e.uid,t)}),this._gateway.signal.on(Of.ON_DATA_STREAM,e=>{e.seq&&delete e.seq,e.payload=HI(e.payload),this.emit(Rf.STREAM_MESSAGE,e.uid,e.payload),this.onStreamMessage&&this.onStreamMessage(e)}),this._gateway.signal.on(Of.ON_CRYPT_ERROR,()=>{WI(()=>{CE.warning("[".concat(this._clientId,"] on crypt error")),this.emit(Rf.CRYPT_ERROR)},this._sessionId)}),this._gateway.signal.on(Of.ON_TOKEN_PRIVILEGE_WILL_EXPIRE,this._handleTokenWillExpire),this._gateway.signal.on(Of.ON_TOKEN_PRIVILEGE_DID_EXPIRE,()=>{CE.warning("[".concat(this._clientId,"] received message onTokenPrivilegeDidExpire, please get new token and join again")),this._gateway.leave(!0),this.emit(Rf.ON_TOKEN_PRIVILEGE_DID_EXPIRE),this._reset()}),this._gateway.signal.on(Of.ON_STREAM_FALLBACK_UPDATE,e=>{CE.debug("[".concat(this._clientId,"] stream fallback peerId: ").concat(e.stream_id,", attr: ").concat(e.stream_type)),this.emit(Rf.STREAM_FALLBACK,e.stream_id,1===e.stream_type?"fallback":"recover")}),this._gateway.signal.on(Of.ON_PUBLISH_STREAM,e=>{this.uid===this._uid&&(this._p2pChannel.reportPublishEvent(!0,null,void 0,!1,JSON.stringify({proxy:e.proxy})),CE.info("[".concat(this._clientId,"] on publish stream, ").concat(JSON.stringify(e))))}),this._gateway.signal.on(Of.ENABLE_LOCAL_VIDEO,e=>{this._handleSetStreamLocalEnable("video",e.uid,!0)}),this._gateway.signal.on(Of.DISABLE_LOCAL_VIDEO,e=>{this._handleSetStreamLocalEnable("video",e.uid,!1)}),this._gateway.signal.on(Cf.REQUEST_TIMEOUT,(e,t)=>{if(this._joinInfo)switch(e){case yf.PUBLISH:{if(!t)return;const e=(t=t).ortc;if(e){var i,n,r,o;const s=e.some(e=>{let{stream_type:t}=e;return t===iS.Audio}),a=e.some(e=>{let{stream_type:t}=e;return t!==iS.Audio}),c=e.some(e=>{let{stream_type:t}=e;return t===iS.Screen||t===iS.ScreenLow});"offer"===t.state&&Tg.publish(this._joinInfo.sid,{eventElapse:aI.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:!1,ec:_E.TIMEOUT,audio:s,video:a,p2pid:t.p2p_id,publishRequestid:this.store.pubId,screenshare:c,audioName:s?null===(i=e.find(e=>{let{stream_type:t}=e;return t===iS.Audio}))||void 0===i||null===(n=i.ssrcs[0])||void 0===n?void 0:n.ssrcId.toString():void 0,videoName:a?null===(r=e.find(e=>{let{stream_type:t}=e;return t!==iS.Audio}))||void 0===r||null===(o=r.ssrcs[0])||void 0===o?void 0:o.ssrcId.toString():void 0})}break}case yf.SUBSCRIBE:(t=t)&&Tg.subscribe(this._joinInfo.sid,{succ:!1,ec:_E.TIMEOUT,audio:t.stream_type===gS.AUDIO,video:t.stream_type===gS.VIDEO,peerid:t.stream_id,subscribeRequestid:t.ssrcId,p2pid:this.store.p2pId,eventElapse:aI.measureFromSubscribeStart(this.store.clientId,t.ssrcId)})}}),this._gateway.signal.on(Of.ON_P2P_OK,e=>{this.uid,this._uid}),this._gateway.signal.on(Of.ON_PUBLISHED_USER_LIST,e=>{if(null==e||!e.users)return;const t=[],i=[];for(const n of e.users){let e=this._users.find(e=>e.uid===n.stream_id);e?e._trust_in_room_=!0:(e=new $C(n.stream_id,n.stream_id),this._users.push(e),0===this.getListeners(Rf.PUBLISHED_USER_LIST).length&&(CE.debug("[".concat(this._clientId,"] user online"),n.stream_id),this.emit(Rf.USER_JOINED,e)));const r=rS.Audio&n.stream_type,o=(rS.Video|rS.LwoVideo)&n.stream_type,s=r&&e.hasAudio,a=o&&e.hasVideo;o&&(e._trust_video_stream_added_state_=!0,e._video_added_=!0,e._videoSSRC=n.video_ssrc),r&&(e._trust_audio_stream_added_state_=!0,e._audio_added_=!0,e._audioSSRC=n.audio_ssrc),r&&!s&&0===this.getListeners(Rf.PUBLISHED_USER_LIST).length&&(CE.info("[".concat(this._clientId,"] remote user ").concat(e.uid," published audio")),this.emit(Rf.USER_PUBLISHED,e,"audio")),o&&!a&&0===this.getListeners(Rf.PUBLISHED_USER_LIST).length&&(CE.info("[".concat(this._clientId,"] remote user ").concat(e.uid," published video")),this.emit(Rf.USER_PUBLISHED,e,"video")),(r&&!s||o&&!a)&&t.push(e),o&&this._p2pChannel.hasPendingRemoteMedia(e,"video")&&i.push({user:e,mediaType:"video"}),r&&this._p2pChannel.hasPendingRemoteMedia(e,"audio")&&i.push({user:e,mediaType:"audio"})}i.length>0&&(CE.debug("[".concat(this._clientId,"] RE massSubscribe after reconnect ").concat(i.map(e=>"user: ".concat(e.user.uid,", mediaType: ").concat(e.mediaType)).join("; ")," ")),this.massSubscribe(i).catch(e=>{CE.error("[".concat(this._clientId,"] mass resubscribe error"),e.toString())})),this.getListeners(Rf.PUBLISHED_USER_LIST).length>0?(CE.info("[".concat(this._clientId,"] client emit user-list event, users: ").concat(t.map(e=>e.uid).join(", "))),this.emit(Rf.PUBLISHED_USER_LIST,t)):CE.info("[".concat(this._clientId,"] client not emit user-list event case there is no user-list listener, users: ").concat(t.map(e=>e.uid).join(", ")))})}_handleP2PChannelEvents(){this._p2pChannel.on(vS.RequestMuteLocal,async(e,t,i)=>{if(this._joinInfo)try{await this._gateway.muteLocal(e,this._joinInfo.stringUid||this._joinInfo.uid),t()}catch(e){e.code===_E.DISCONNECT_P2P?t():i(e)}else t()}),this._p2pChannel.on(vS.RequestUnmuteLocal,async(e,t,i)=>{if(this._joinInfo)try{await this._gateway.unmuteLocal(e,this._joinInfo.stringUid||this._joinInfo.uid),t()}catch(e){e.code===_E.DISCONNECT_P2P?t():i(e)}else t()}),this._p2pChannel.on(vS.RequestRePublish,(e,t,i)=>{this.publish(e,!1).then(t).catch(i)}),this._p2pChannel.on(vS.RequestReSubscribe,async(e,t,i)=>{try{for(const{user:t,kind:i}of e)i===gS.VIDEO?await this.subscribe(t,"video"):await this.subscribe(t,"audio");t()}catch(e){i(e)}}),this._p2pChannel.on(vS.RequestUploadStats,(e,t)=>{this._gateway.uploadStats(e,t)}),this._p2pChannel.on(vS.MediaReconnectStart,e=>{this.emit(Rf.MEDIA_RECONNECT_START,e)}),this._p2pChannel.on(vS.MediaReconnectEnd,e=>{this.emit(Rf.MEDIA_RECONNECT_END,e)}),this._p2pChannel.on(vS.NeedSignalRTT,e=>{e(this._gateway.getSignalRTT())}),this._p2pChannel.on(vS.RequestRestartICE,async()=>{const e=await this._p2pChannel.restartICE(),t=await e.next();if(t.done)return;const i=t.value;let n;try{n=await this._gateway.restartICE({iceParameters:i})}catch(t){return void e.throw(t)}const{iceParameters:r}=function(e){const t=e.iceParameters;return{iceParameters:{iceUfrag:t.iceUfrag,icePwd:t.icePwd}}}(n);await e.next({remoteIceParameters:r})}),this._p2pChannel.on(vS.RequestReconnect,async()=>{this._gateway.reconnect()}),this._p2pChannel.on(vS.RequestReconnectPC,async()=>{var e;const{iceParameters:t,dtlsParameters:i,rtpCapabilities:n}=await this._p2pChannel.startP2PConnection({turnServer:null===(e=this._joinInfo)||void 0===e?void 0:e.turnServer}),{gatewayEstablishParams:r,gatewayAddress:o}=await this._gateway.reconnectPC({iceParameters:t,dtlsParameters:i,rtpCapabilities:n}),{dtlsParameters:s,iceParameters:a,candidates:c,rtpCapabilities:d,setup:u,cname:l}=mO(r,o);await this._p2pChannel.connect(a,s,c,d,u,l),await this._p2pChannel.republish(),await this._p2pChannel.reSubscribe()}),this._p2pChannel.on(vS.RequestUnpublishForReconnectPC,async(e,t,i)=>{this._joinInfo&&void 0!==this._uid?(await this._gateway.unpublish(e,this._uid),t()):i()}),this._p2pChannel.on(vS.P2PLost,()=>{this.emit(Rf.P2P_LOST,this.store.uid)}),this._p2pChannel.on(vS.UpdateVideoEncoder,e=>{e._encoderConfig&&this._gateway.setVideoProfile(e._encoderConfig)}),this._p2pChannel.on(vS.ConnectionTypeChange,e=>{this.emit(Rf.IS_USING_CLOUD_PROXY,e)}),this._p2pChannel.on(vS.RequestLowStreamParameter,e=>{e(this._lowStreamParameter||{width:160,height:120,framerate:15,bitrate:50})}),this._p2pChannel.on(vS.QueryClientConnectionState,e=>{e(this.connectionState)})}getKeyMetrics(){return this.store.keyMetrics}async enableContentInspect(e){if("CONNECTED"!==this.connectionState||!this._joinInfo)throw new EE(_E.INVALID_OPERATION,"[".concat(this._clientId,"] Client did not join channel"));if(this._inspect)throw new EE(_E.INVALID_OPERATION,"[".concat(this._clientId,"] Inspect content service already in connecting/connected state"));if(!e)throw new EE(_E.INVALID_PARAMS,"[".concat(this._clientId,"] inspectConfig is necessary"));if(!e.inspectType||!Array.isArray(e.inspectType))throw new EE(_E.INVALID_PARAMS,"[".concat(this._clientId,"] inspectConfig.inspectType is necessary and is an instance of Array."));{const t=[...new Set(e.inspectType)];t.forEach(e=>{if(!["supervise","moderation"].includes(e))throw new EE(_E.INVALID_PARAMS,"[".concat(this._clientId,"] ").concat(e," is not a valid inspect type."))}),e.inspectType=t}if(e&&e.extraInfo&&e.extraInfo.length>1024)throw new EE(_E.INVALID_PARAMS,"[".concat(this._clientId,"] inspectConfig.extraInfo length cannot exceed 1024 bytes"));try{const t=new kw(e);this._inspect=t,this.handleVideoInspectEvents(this._inspect),await t.init({appId:this._joinInfo.appId,areaCode:"",cname:this._joinInfo.cname,sid:this._joinInfo.sid,token:this._joinInfo.token,uid:this._joinInfo.uid,cid:this._joinInfo.cid,vid:this._joinInfo.vid?Number(this._joinInfo.vid):0},mE)}catch(e){throw Array.isArray(e)?e[0]:e}}async disableContentInspect(){if(!this._inspect)throw new EE(_E.INVALID_OPERATION,"[".concat(this._clientId,"] inspectVideoContent not started"));try{this._inspect.close(),this._inspect=void 0}catch(e){throw Array.isArray(e)?e[0]:e}}handleVideoInspectEvents(e){e.on(NS.CONNECTION_STATE_CHANGE,(t,i)=>{switch(this.emit(Rf.CONTENT_INSPECT_CONNECTION_STATE_CHANGE,t,i),i){case bS.CONNECTED:if("CONNECTED"!==this.connectionState)return void this.emit(Rf.CONTENT_INSPECT_ERROR,new EE(_E.OPERATION_ABORTED,"Content inspect was cancelled because it left the channel"));e.inspectImage()}}),e.on(NS.INSPECT_RESULT,(e,t)=>{var i;if((null==t?void 0:t.code)===_E.INVALID_OPERATION&&"DISCONNECTED"===this.connectionState)return CE.debug("Stop inspect content because that has left channel"),null==this||null===(i=this._inspect)||void 0===i||i.close(),void(this._inspect=void 0);this.emit(Rf.CONTENT_INSPECT_RESULT,e,t)}),e.on(NS.CLIENT_LOCAL_VIDEO_TRACK,e=>{e(this.localTracks.filter(e=>"video"===e.trackMediaType)[0])})}getJoinChannelServiceRecords(){return CE.debug("getJoinChannelServiceRecords"),this.store.joinChannelServiceRecords}async setPublishAudioFilterEnabled(e){Bm(e,"enabled"),VE("ENABLE_PUBLISH_AUDIO_FILTER",e),this._joinInfo&&await this._gateway.setPublishAudioFilterEnabled(e)}_handleResetAddStream(e,t){switch(t){case"audio":e._audio_added_=!1,e._trust_audio_stream_added_state_=!0;break;case"video":e._video_added_=!1,e._trust_video_stream_added_state_=!0}}}).prototype,"leave",[Mw],Object.getOwnPropertyDescriptor(TN.prototype,"leave"),TN.prototype),JT(TN.prototype,"publish",[Uw],Object.getOwnPropertyDescriptor(TN.prototype,"publish"),TN.prototype),JT(TN.prototype,"unpublish",[xw],Object.getOwnPropertyDescriptor(TN.prototype,"unpublish"),TN.prototype),JT(TN.prototype,"subscribe",[Vw],Object.getOwnPropertyDescriptor(TN.prototype,"subscribe"),TN.prototype),JT(TN.prototype,"massSubscribe",[Fw],Object.getOwnPropertyDescriptor(TN.prototype,"massSubscribe"),TN.prototype),JT(TN.prototype,"unsubscribe",[jw],Object.getOwnPropertyDescriptor(TN.prototype,"unsubscribe"),TN.prototype),JT(TN.prototype,"massUnsubscribe",[Bw],Object.getOwnPropertyDescriptor(TN.prototype,"massUnsubscribe"),TN.prototype),JT(TN.prototype,"setLowStreamParameter",[Gw],Object.getOwnPropertyDescriptor(TN.prototype,"setLowStreamParameter"),TN.prototype),JT(TN.prototype,"enableDualStream",[Ww],Object.getOwnPropertyDescriptor(TN.prototype,"enableDualStream"),TN.prototype),JT(TN.prototype,"disableDualStream",[Hw],Object.getOwnPropertyDescriptor(TN.prototype,"disableDualStream"),TN.prototype),JT(TN.prototype,"setClientRole",[Kw],Object.getOwnPropertyDescriptor(TN.prototype,"setClientRole"),TN.prototype),JT(TN.prototype,"setProxyServer",[Yw],Object.getOwnPropertyDescriptor(TN.prototype,"setProxyServer"),TN.prototype),JT(TN.prototype,"setTurnServer",[qw],Object.getOwnPropertyDescriptor(TN.prototype,"setTurnServer"),TN.prototype),JT(TN.prototype,"setLicense",[Jw],Object.getOwnPropertyDescriptor(TN.prototype,"setLicense"),TN.prototype),JT(TN.prototype,"startProxyServer",[Xw],Object.getOwnPropertyDescriptor(TN.prototype,"startProxyServer"),TN.prototype),JT(TN.prototype,"stopProxyServer",[zw],Object.getOwnPropertyDescriptor(TN.prototype,"stopProxyServer"),TN.prototype),JT(TN.prototype,"setLocalAccessPointsV2",[Qw],Object.getOwnPropertyDescriptor(TN.prototype,"setLocalAccessPointsV2"),TN.prototype),JT(TN.prototype,"setLocalAccessPoints",[Zw],Object.getOwnPropertyDescriptor(TN.prototype,"setLocalAccessPoints"),TN.prototype),JT(TN.prototype,"setRemoteDefaultVideoStreamType",[$w],Object.getOwnPropertyDescriptor(TN.prototype,"setRemoteDefaultVideoStreamType"),TN.prototype),JT(TN.prototype,"setRemoteVideoStreamType",[eN],Object.getOwnPropertyDescriptor(TN.prototype,"setRemoteVideoStreamType"),TN.prototype),JT(TN.prototype,"setStreamFallbackOption",[tN],Object.getOwnPropertyDescriptor(TN.prototype,"setStreamFallbackOption"),TN.prototype),JT(TN.prototype,"setEncryptionConfig",[iN],Object.getOwnPropertyDescriptor(TN.prototype,"setEncryptionConfig"),TN.prototype),JT(TN.prototype,"renewToken",[nN],Object.getOwnPropertyDescriptor(TN.prototype,"renewToken"),TN.prototype),JT(TN.prototype,"enableAudioVolumeIndicator",[rN],Object.getOwnPropertyDescriptor(TN.prototype,"enableAudioVolumeIndicator"),TN.prototype),JT(TN.prototype,"startLiveStreaming",[oN],Object.getOwnPropertyDescriptor(TN.prototype,"startLiveStreaming"),TN.prototype),JT(TN.prototype,"setLiveTranscoding",[sN],Object.getOwnPropertyDescriptor(TN.prototype,"setLiveTranscoding"),TN.prototype),JT(TN.prototype,"stopLiveStreaming",[aN],Object.getOwnPropertyDescriptor(TN.prototype,"stopLiveStreaming"),TN.prototype),JT(TN.prototype,"addInjectStreamUrl",[cN],Object.getOwnPropertyDescriptor(TN.prototype,"addInjectStreamUrl"),TN.prototype),JT(TN.prototype,"removeInjectStreamUrl",[dN],Object.getOwnPropertyDescriptor(TN.prototype,"removeInjectStreamUrl"),TN.prototype),JT(TN.prototype,"startChannelMediaRelay",[uN],Object.getOwnPropertyDescriptor(TN.prototype,"startChannelMediaRelay"),TN.prototype),JT(TN.prototype,"updateChannelMediaRelay",[lN],Object.getOwnPropertyDescriptor(TN.prototype,"updateChannelMediaRelay"),TN.prototype),JT(TN.prototype,"stopChannelMediaRelay",[hN],Object.getOwnPropertyDescriptor(TN.prototype,"stopChannelMediaRelay"),TN.prototype),JT(TN.prototype,"sendCustomReportMessage",[pN],Object.getOwnPropertyDescriptor(TN.prototype,"sendCustomReportMessage"),TN.prototype),JT(TN.prototype,"pickSVCLayer",[_N],Object.getOwnPropertyDescriptor(TN.prototype,"pickSVCLayer"),TN.prototype),JT(TN.prototype,"enableContentInspect",[EN],Object.getOwnPropertyDescriptor(TN.prototype,"enableContentInspect"),TN.prototype),JT(TN.prototype,"disableContentInspect",[mN],Object.getOwnPropertyDescriptor(TN.prototype,"disableContentInspect"),TN.prototype),JT(TN.prototype,"getJoinChannelServiceRecords",[fN],Object.getOwnPropertyDescriptor(TN.prototype,"getJoinChannelServiceRecords"),TN.prototype),JT(TN.prototype,"setPublishAudioFilterEnabled",[SN],Object.getOwnPropertyDescriptor(TN.prototype,"setPublishAudioFilterEnabled"),TN.prototype),TN);class vN extends Ug{set currentState(e){e!==this._currentState&&(this._currentState=e,this.emit(wf.AUDIO_SOURCE_STATE_CHANGE,this._currentState))}get currentState(){return this._currentState}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),lp(this,"audioBuffer",void 0),lp(this,"sourceNode",void 0),lp(this,"startPlayTime",0),lp(this,"startPlayOffset",0),lp(this,"pausePlayTime",0),lp(this,"options",void 0),lp(this,"currentLoopCount",0),lp(this,"_currentState","stopped"),this.audioBuffer=e,this.options=t,this.startPlayOffset=this.options.startPlayTime||0}createWebAudioDiagram(){return this.context.createGain()}get duration(){return this.audioBuffer.duration}get currentTime(){return"stopped"===this.currentState?0:"paused"===this.currentState?this.pausePlayTime:(this.context.currentTime-this.startPlayTime+this.startPlayOffset)%this.audioBuffer.duration}updateOptions(e){"stopped"===this.currentState?(this.options=e,this.startPlayOffset=this.options.startPlayTime||0):CE.warning("can not set audio source options")}startProcessAudioBuffer(){this.sourceNode&&this.stopProcessAudioBuffer(),this.sourceNode=this.createSourceNode(),this.startSourceNode(),this.currentState="playing"}pauseProcessAudioBuffer(){this.sourceNode&&"playing"===this.currentState&&(this.pausePlayTime=this.currentTime,this.sourceNode.onended=null,this.sourceNode.stop(),this.sourceNode.buffer=null,this.sourceNode=this.createSourceNode(),this.currentState="paused")}seekAudioBuffer(e){this.sourceNode&&(this.sourceNode.onended=null,"playing"===this.currentState&&this.sourceNode.stop(),this.sourceNode=this.createSourceNode(),"playing"===this.currentState?(this.startPlayOffset=e,this.startSourceNode()):"paused"===this.currentState&&(this.pausePlayTime=e))}resumeProcessAudioBuffer(){"paused"===this.currentState&&this.sourceNode&&(this.startPlayOffset=this.pausePlayTime,this.pausePlayTime=0,this.startSourceNode(),this.currentState="playing")}stopProcessAudioBuffer(){if(this.sourceNode){this.sourceNode.onended=null;try{this.sourceNode.stop()}catch(e){}this.reset()}}startSourceNode(){this.sourceNode&&this.sourceNode.buffer&&(this.sourceNode.start(0,this.startPlayOffset),this.startPlayTime=this.context.currentTime,this.sourceNode.onended=this.handleSourceNodeEnded.bind(this))}createSourceNode(){const e=this.context.createBufferSource();return e.buffer=this.audioBuffer,e.loop=!!this.options.loop,e.connect(this.outputNode),e}handleSourceNodeEnded(){if(this.currentLoopCount+=1,this.options.cycle&&this.options.cycle>this.currentLoopCount)return this.startPlayOffset=0,this.sourceNode=void 0,void this.startProcessAudioBuffer();this.reset()}reset(){this.startPlayOffset=this.options.startPlayTime||0,this.currentState="stopped",this.sourceNode&&(this.sourceNode.disconnect(),this.sourceNode=void 0),this.currentLoopCount=0}}const CN=new Map;async function yN(e,t){let i=null;if("string"==typeof e){const t=CN.get(e);if(t)return CE.debug("use cached audio resource: ",e),t;try{i=(await SE(()=>uE.get(e,{responseType:"arraybuffer"}),void 0,void 0,{maxRetryCount:3})).data}catch(e){throw new EE(_E.FETCH_AUDIO_FILE_FAILED,e.toString())}}else{const t=new Sl((t,i)=>{const n=new FileReader;n.onload=e=>{e.target?t(e.target.result):i(new EE(_E.READ_LOCAL_AUDIO_FILE_ERROR))},n.onerror=()=>{i(new EE(_E.READ_LOCAL_AUDIO_FILE_ERROR))},n.readAsArrayBuffer(e)});i=await t}const n=await function(e){const t=Dg();return new Sl((i,n)=>{t.decodeAudioData(e,e=>{i(e)},e=>{n(new EE(_E.DECODE_AUDIO_FILE_FAILED,e.toString()))})})}(i);return"string"==typeof e&&t&&CN.set(e,n),n}function AN(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function ON(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?AN(Object(i),!0).forEach((function(t){lp(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):AN(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function bN(e,t,i,n){i.optimizationMode&&(n&&n.width&&n.height?(i.encoderConfig=ON(ON({},n),{},{bitrateMin:n.bitrateMin,bitrateMax:n.bitrateMax}),"motion"!==i.optimizationMode&&"detail"!==i.optimizationMode||(t.contentHint=i.optimizationMode,t.contentHint===i.optimizationMode?CE.debug("[".concat(e,"] set content hint to"),i.optimizationMode):CE.debug("[".concat(e,"] set content hint failed")))):CE.warning("[".concat(e,"] can not apply optimization mode bitrate config, no encoderConfig")))}const wN=Mh().name;function NN(e,t,i,n){let r,o=0,s=null;return new Sl((a,c)=>{setTimeout(()=>{r&&(r(),a(o))},t),r=kg(()=>{!function(){o>n&&r&&(r(),a(o));const t=i.getContext("2d");if(!t){const e=new EE(_E.UNEXPECTED_ERROR,"can not get canvas 2d context.");return CE.error(e.toString()),void c(e)}t.drawImage(e,0,0,160,120);const d=t.getImageData(0,0,i.width,i.height),u=Math.floor(d.data.length/3);if(s){for(let e=0;e<u;e+=3)if(d.data[e]!==s[e])return o+=1,void(s=d.data);s=d.data}else s=d.data}()},30)})}class DN{constructor(e,t){lp(this,"id",0),lp(this,"element",void 0),lp(this,"peerPair",void 0),lp(this,"context",void 0),lp(this,"audioPlayerElement",void 0),lp(this,"audioTrack",void 0),DN.count+=1,this.id=DN.count,this.element=e,this.context=t}initPeers(){this.peerPair=[new RTCPeerConnection,new RTCPeerConnection],this.peerPair[1].ontrack=e=>{const t=document.createElement("audio");t.srcObject=new MediaStream([e.track]),t.play(),this.audioPlayerElement=t}}async switchSdp(){if(!this.peerPair)return;const e=async(e,t)=>{const i="offer"===t?await e.createOffer():await e.createAnswer();return await e.setLocalDescription(i),"complete"===e.iceGatheringState?e.localDescription:new Sl(t=>{e.onicegatheringstatechange=()=>{"complete"===e.iceGatheringState&&t(e.localDescription)}})},t=async(e,t)=>await e.setRemoteDescription(t);try{const i=await e(this.peerPair[0],"offer");await t(this.peerPair[1],i);const n=await e(this.peerPair[1],"answer");await t(this.peerPair[0],n)}catch(e){throw new EE(_E.LOCAL_AEC_ERROR,e.toString()).print()}}async getTracksFromMediaElement(e){if(this.audioTrack)return this.audioTrack;let t;try{e instanceof HTMLVideoElement&&(e.captureStream?e.captureStream():e.mozCaptureStream()),t=this.context.createMediaStreamDestination();this.context.createMediaElementSource(e).connect(t)}catch(e){throw new EE(_E.LOCAL_AEC_ERROR,e.toString()).print()}if(!t){throw new EE(_E.LOCAL_AEC_ERROR,"no dest node when local aec").print()}const i=t.stream.getAudioTracks()[0];return this.audioTrack=i,i}getElement(){return this.element}async startEchoCancellation(){this.context.resume(),this.peerPair&&this.close(),this.initPeers();const e=this.element,t=await this.getTracksFromMediaElement(e);this.peerPair&&this.peerPair[0].addTrack(t),await this.switchSdp()}close(){CE.debug("close echo cancellation unit, id is",this.id),this.audioPlayerElement&&this.audioPlayerElement.pause(),this.peerPair&&this.peerPair.forEach(e=>{e.close()}),this.peerPair=void 0,this.audioPlayerElement=void 0}}var PN,LN;lp(DN,"count",0);const kN=window.AudioContext||window.webkitAudioContext;const MN=new(PN=Sg({report:Tg}),JT((LN=class{constructor(){lp(this,"units",[]),lp(this,"context",void 0)}processExternalMediaAEC(e){if(!this._doesEnvironmentNeedAEC())return CE.debug("the system does not need to process local aec"),-1;this.context||(this.context=new kN);let t=this.units.find(t=>t&&t.getElement()===e);return t||(t=new DN(e,this.context),this.units.push(t)),t.startEchoCancellation(),CE.debug("start processing local audio echo cancellation, id is",t.id),t.id}_doesEnvironmentNeedAEC(){return Mh().name!==Nh.SAFARI}}).prototype,"processExternalMediaAEC",[PN],Object.getOwnPropertyDescriptor(LN.prototype,"processExternalMediaAEC"),LN.prototype),LN);VE("PROCESS_ID","process-".concat(wI(8,""),"-").concat(wI(4,""),"-").concat(wI(4,""),"-").concat(wI(4,""),"-").concat(wI(12,""))),function(){const e=Mh();kS.getDisplayMedia=function(e){if(navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia)return!0;return!1}(),kS.getStreamFromExtension=e.name===Nh.CHROME&&Number(e.version)>34,kS.supportUnifiedPlan=function(){if(!window.RTCRtpTransceiver)return!1;if(!("currentDirection"in RTCRtpTransceiver.prototype))return!1;const e=new RTCPeerConnection;let t=!1;try{e.addTransceiver("audio"),t=!0}catch(e){}return e.close(),t}(),kS.supportMinBitrate=e.name===Nh.CHROME||e.name===Nh.EDGE,kS.supportSetRtpSenderParameters=function(){const e=Mh();if(!window.RTCRtpSender||!window.RTCRtpSender.prototype.setParameters||!window.RTCRtpSender.prototype.getParameters)return!1;return!!tp()||(!(!Wh()&&!Fh())||e.name===Nh.FIREFOX&&Number(e.version)>=64)}(),e.name===Nh.SAFARI&&(Number(e.version)>=14?kS.supportDualStream=!0:kS.supportDualStream=!1),kS.webAudioMediaStreamDest=function(){const e=Mh();if(e.name===Nh.SAFARI&&Number(e.version)<12)return!1;return!0}(),kS.supportReplaceTrack=function(){if(!window.RTCRtpSender)return!1;if("function"==typeof RTCRtpSender.prototype.replaceTrack)return!0;return!1}(),kS.supportWebGL="undefined"!=typeof WebGLRenderingContext,kS.supportRequestFrame=!!window.CanvasCaptureMediaStreamTrack,tp()||(kS.webAudioWithAEC=!0),kS.supportShareAudio=function(){const e=Mh();if((e.os===wh.WIN_10||e.os===wh.WIN_81||e.os===wh.WIN_7||e.os===wh.LINUX||e.os===wh.MAC_OS)&&e.name===Nh.CHROME&&Number(e.version)>=74)return!0;return!1}(),kS.supportDualStreamEncoding=function(){const e=Mh();if(FE("DISABLE_WEBAUDIO"))return!0;return"Safari"===e.name&&Number(e.version)>=14||!!("Chrome"===e.name&&/Windows/i.test(e.os||"")&&Number(e.version)>=100&&FE("CHROME_DUAL_STREAM_USE_ENCODING"))}(),kS.supportDataChannel=function(){if(function(e){const t=Mh();return!(t.name!==Nh.CHROME||!t.osVersion)&&Number(t.version)>=e}(76)||function(e){const t=Mh();return!(t.name!==Nh.FIREFOX||!t.osVersion)&&Number(t.version)>=e}(68)||function(e){const t=Mh();return!(t.name!==Nh.SAFARI||!t.osVersion)&&Number(t.version)>=e}(14))return!0;return!1}(),CE.info("browser compatibility",JSON.stringify(kS),JSON.stringify(e)),kS.supportPCSetConfiguration=!Hh()&&!!RTCPeerConnection.prototype.setConfiguration}(),function(){let e;try{e=window.localStorage.getItem("websdk_ng_global_parameter")}catch(e){return void CE.error("Error loading sdk config",e.message)}if(e)try{const t=JSON.parse(window.atob(e)),i=Date.now();CE.debug("Loading global parameters from cache",t),Object.keys(t).forEach(e=>{if(Object.prototype.hasOwnProperty.call(jE,e)){const{value:n,expires:r}=t[e];if(r&&r<=i)return;BE[e]=n,jE[e]=n}})}catch(t){CE.error("Error loading mutableParamsCache: ".concat(e),t.message)}}(),Array.isArray(BE.AREAS)&&BE.AREAS.length>0&&Cv(BE.AREAS,!0);const UN={__CLIENT_LIST__:qE,__TRACK_LIST__:JE,VERSION:AE,BUILD:yE,setParameter:(e,t,i)=>{CE.debug("setParameter key:".concat(e,", value:").concat(JSON.stringify(t))),VE(e,t,i)},getParameter:FE,getSupportedCodec:async function(){let e={audio:[],video:[]};try{let t=new RTCPeerConnection;t.addTransceiver("video",{direction:"recvonly"}),t.addTransceiver("audio",{direction:"recvonly"});const i=(await t.createOffer()).sdp;if(!i)return e;t.close(),t=null,e=function(e){const t={video:[],audio:[]};return e.match(/ VP8/i)&&t.video.push("VP8"),e.match(/ VP9/i)&&t.video.push("VP9"),e.match(/ AV1/i)&&t.video.push("AV1"),e.match(/ H264/i)&&t.video.push("H264"),e.match(/ opus/i)&&t.audio.push("OPUS"),e.match(/ PCMU/i)&&t.audio.push("PCMU"),e.match(/ PCMA/i)&&t.audio.push("PCMA"),e.match(/ G722/i)&&t.audio.push("G722"),t}(i)}catch(e){throw new EE(_E.CREATE_OFFER_FAILED,e.toString&&e.toString()).print()}return e},checkSystemRequirements:function(){const e=Tg.reportApiInvoke(null,{name:uf.CHECK_SYSTEM_REQUIREMENTS,options:[],tag:lf.TRACER});let t=!1;try{const e=window.RTCPeerConnection,i=navigator.mediaDevices&&navigator.mediaDevices.getUserMedia,n=window.WebSocket;t=!!(e&&i&&n)}catch(e){return CE.error("check system requirement failed: ",e),!1}let i=!1;const n=Mh();n.name===Nh.CHROME&&Number(n.version)>=58&&(!Bh()||jh())&&(i=!0),n.name===Nh.FIREFOX&&Number(n.version)>=56&&(i=!0),n.name===Nh.OPERA&&Number(n.version)>=45&&(i=!0),n.name===Nh.SAFARI&&Number(n.version)>=11&&(i=!0),($h()||Mh().name===Nh.QQ)&&(i=!0),CE.debug("checkSystemRequirements, api:",t,"browser",i);const r=t&&i;return e.onSuccess(r),r},getDevices:function(e){return zg.enumerateDevices(!0,!0,e)},getMicrophones:function(e){return zg.getRecordingDevices(e)},getCameras:function(e){return zg.getCamerasDevices(e)},getElectronScreenSources:jg,getPlaybackDevices:function(e){return zg.getSpeakers(e)},createClient:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{codec:"vp8",audioCodec:"opus",mode:"rtc"};const t=Tg.reportApiInvoke(null,{name:uf.CREATE_CLIENT,options:[e],tag:lf.TRACER});try{Df(e)}catch(e){throw t.onError(e),e}return void 0===e.audioCodec&&(e.audioCodec="opus"),t.onSuccess(),new IN(RN(RN({forceWaitGatewayResponse:!0},e),{},{role:"rtc"===e.mode?"host":e.role}))},createCameraVideoTrack:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=Tg.reportApiInvoke(null,{tag:lf.TRACER,name:uf.CREATE_CAM_VIDEO_TRACK,options:[ON({},e)]}),i=lC(e),n=wI(8,"track-cam-");let r=null;CE.info("start create camera video track with config",JSON.stringify(e),"trackId",n);try{r=(await Yg({video:i},n)).getVideoTracks()[0]||null}catch(e){throw t.onError(e),e}if(!r){const e=new EE(_E.UNEXPECTED_ERROR,"can not find track in media stream");return t.onError(e),e.throw()}e.optimizationMode&&bN(n,r,e,LE(e.encoderConfig));const o=new ZC(r,e,i,e.scalabiltyMode?ME(e.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},e.optimizationMode,n);return t.onSuccess(o.getTrackId()),CE.info("create camera video success, trackId:",n),o},createCustomVideoTrack:function(e){const t=Tg.reportApiInvoke(null,{tag:lf.TRACER,name:uf.CREATE_CUSTOM_VIDEO_TRACK,options:[e]}),i=new QC(e.mediaStreamTrack,{bitrateMax:e.bitrateMax,bitrateMin:e.bitrateMin},e.scalabiltyMode?ME(e.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},e.optimizationMode);return t.onSuccess(i.getTrackId()),CE.info("create custom video track success with config",e,"trackId",i.getTrackId()),i},createScreenVideoTrack:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"disable";const i=Tg.reportApiInvoke(null,{tag:lf.TRACER,name:uf.CREATE_SCREEN_VIDEO_TRACK,options:[ON({},e),t]});e.encoderConfig?"string"==typeof e.encoderConfig||e.encoderConfig.width&&e.encoderConfig.height||(e.encoderConfig.width={max:1920},e.encoderConfig.height={max:1080}):e.encoderConfig="1080p_2";const n=hC(e),r=wI(8,"track-scr");let o=null,s=null;const a=MS();if(!a.supportShareAudio&&"enable"===t){const e=new EE(_E.NOT_SUPPORTED,"your browser or platform is not support share-screen with audio");return i.onError(e),e.throw()}CE.info("start create screen video track with config",e,"withAudio",t,"trackId",r);try{const e=await Yg({screen:n,screenAudio:"auto"===t?a.supportShareAudio:"enable"===t},r);o=e.getVideoTracks()[0]||null,s=e.getAudioTracks()[0]||null}catch(e){throw i.onError(e),e}if(!o){const e=new EE(_E.UNEXPECTED_ERROR,"can not find track in media stream");return i.onError(e),e.throw()}if(!s&&"enable"===t){o&&o.stop();const e=new EE(_E.SHARE_AUDIO_NOT_ALLOWED);return i.onError(e),e.throw()}e.optimizationMode||(e.optimizationMode="detail"),e.optimizationMode&&(bN(r,o,e,e.encoderConfig&&kE(e.encoderConfig)),e.encoderConfig&&"string"!=typeof e.encoderConfig&&(e.encoderConfig.bitrateMin=e.encoderConfig.bitrateMax));const c=new QC(o,e.encoderConfig?kE(e.encoderConfig):{},e.scalabiltyMode?ME(e.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},e.optimizationMode,r,[aS.SCREEN_TRACK]);if(!s)return i.onSuccess(c.getTrackId()),CE.info("create screen video track success","video:",c.getTrackId()),c;const d=new tI(s);return i.onSuccess([c.getTrackId(),d.getTrackId()]),CE.info("create screen video track success","video:",c.getTrackId(),"audio:",d.getTrackId()),[c,d]},createMicrophoneAndCameraTracks:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=Tg.reportApiInvoke(null,{tag:lf.TRACER,name:uf.CREATE_MIC_AND_CAM_TRACKS,options:[e,t]}),n=lC(t),r=pC(e),o=wI(8,"track-mic-"),s=wI(8,"track-cam-");let a=null,c=null;CE.info("start create camera video track(".concat(s,") and microphone audio track(").concat(o,") with config, audio: ").concat(JSON.stringify(e),", video: ").concat(JSON.stringify(t)));try{const e=await Yg({audio:r,video:n},"".concat(o,"-").concat(s));a=e.getAudioTracks()[0],c=e.getVideoTracks()[0]}catch(e){throw i.onError(e),e}if(!a||!c){const e=new EE(_E.UNEXPECTED_ERROR,"can not find tracks in media stream");return i.onError(e),e.throw()}t.optimizationMode&&bN(s,c,t,LE(t.encoderConfig));const d=new iI(a,e,r,o),u=new ZC(c,t,n,t.scalabiltyMode?ME(t.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},t.optimizationMode,s);return i.onSuccess([d.getTrackId(),u.getTrackId()]),CE.info("create camera video track(".concat(s,") and microphone audio track(").concat(o,") success")),[d,u]},createMicrophoneAudioTrack:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=Tg.reportApiInvoke(null,{tag:lf.TRACER,name:uf.CREATE_MIC_AUDIO_TRACK,options:[e]}),i=pC(e),n=wI(8,"track-mic-");let r=null;CE.info("start create microphone audio track with config",JSON.stringify(e),"trackId",n);try{r=(await Yg({audio:i},n)).getAudioTracks()[0]||null}catch(e){throw t.onError(e),e}if(!r){const e=new EE(_E.UNEXPECTED_ERROR,"can not find track in media stream");return t.onError(e),e.throw()}const o=new iI(r,e,i,n);return t.onSuccess(o.getTrackId()),CE.info("create microphone audio track success, trackId:",n),o},createCustomAudioTrack:function(e){const t=Tg.reportApiInvoke(null,{tag:lf.TRACER,name:uf.CREATE_CUSTOM_AUDIO_TRACK,options:[e]}),i=new tI(e.mediaStreamTrack,e.encoderConfig?xE(e.encoderConfig):{});return CE.info("create custom audio track success with config",e,"trackId",i.getTrackId()),t.onSuccess(i.getTrackId()),i},createBufferSourceAudioTrack:async function(e){const t=Tg.reportApiInvoke(null,{tag:lf.TRACER,name:uf.CREATE_BUFFER_AUDIO_TRACK,options:[e]});if(FE("DISABLE_WEBAUDIO"))throw new EE(_E.NOT_SUPPORTED,"can not create BufferSourceAudioTrack when WebAudio disabled");const i=wI(8,"track-buf-");CE.info("start create buffer source audio track with config",JSON.stringify(e),"trackId",i);const n=e.source;if(!(e.source instanceof AudioBuffer))try{e.source=await yN(e.source,e.cacheOnlineFile)}catch(e){return t.onError(e),e.throw()}const r=new vN(e.source),o=new nI(n,r,e.encoderConfig?xE(e.encoderConfig):{},i);return CE.info("create buffer source audio track success, trackId:",i),t.onSuccess(o.getTrackId()),o},setAppType:function(e){if(CE.debug("setAppType: ".concat(e)),!(Number.isInteger(e)&&e>=0))throw CE.debug("Invalid appType"),new EE(_E.INVALID_PARAMS,"invalid app type",e);VE("APP_TYPE",Math.floor(e))},setLogLevel:function(e){CE.setLogLevel(e)},enableLogUpload:function(){FE("USE_NEW_LOG")?VE("UPLOAD_LOG",!0):CE.enableLogUpload()},disableLogUpload:function(){FE("USE_NEW_LOG")?VE("UPLOAD_LOG",!1):CE.disableLogUpload()},createChannelMediaRelayConfiguration:function(){return new tC},checkAudioTrackIsActive:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;const i=Tg.reportApiInvoke(null,{tag:lf.TRACER,name:uf.CHECK_AUDIO_TRACK_IS_ACTIVE,options:[t]});if(!(e instanceof tI||e instanceof yb)){const e=new EE(_E.INVALID_TRACK,"the parameter is not a audio track");return i.onError(e),e.throw()}t&&t<1e3&&(t=1e3);const n=e instanceof tI?e.getTrackLabel():"remote_track",r=e.getVolumeLevel();let o=r,s=r;const a=Date.now();return new Sl(r=>{const c=setInterval(()=>{const d=e.getVolumeLevel();o=d>o?d:o,s=d<s?d:s;const u=o-s>1e-4,l=Date.now()-a;if(u||l>t){clearInterval(c);const t=u,s={duration:l,deviceLabel:n,maxVolumeLevel:o,result:t};CE.info("[track-".concat(e.getTrackId(),"] check audio track active completed. ").concat(JSON.stringify(s))),i.onSuccess(s),r(t)}},200)})},checkVideoTrackIsActive:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;const i=Tg.reportApiInvoke(null,{tag:lf.TRACER,name:uf.CHECK_VIDEO_TRACK_IS_ACTIVE,options:[t]});if(!(e instanceof QC||e instanceof Cb)){const e=new EE(_E.INVALID_TRACK,"the parameter is not a video track");return i.onError(e),e.throw()}const n=4;t&&t<1e3&&(t=1e3);const r=e instanceof QC?e.getTrackLabel():"remote_track",o=e.getMediaStreamTrack(!0),s=document.createElement("video");s.style.width="1px",s.style.height="1px",s.setAttribute("muted",""),s.muted=!0,s.setAttribute("playsinline",""),s.controls=!1,(Wh()||Fh())&&(s.style.opacity="0.01",s.style.position="fixed",s.style.left="0",s.style.top="0",document.body.appendChild(s)),s.srcObject=new MediaStream([o]),s.play();const a=document.createElement("canvas");a.width=160,a.height=120;let c=0,d=0;try{const e=Date.now();c=await NN(s,t,a,n),d=Date.now()-e}catch(e){throw i.onError(e),e}wN===Nh.SAFARI&&(s.pause(),s.remove()),s.srcObject=null;const u=c>n,l={duration:d,changedPicNum:c,deviceLabel:r,result:u};return CE.info("[track-".concat(e.getTrackId(),"] check video track active completed. ").concat(JSON.stringify(l))),i.onSuccess(l),u},setArea:Cv,audioElementPlayCenter:Zg,processExternalMediaAEC:function(e){MN.processExternalMediaAEC(e)},registerExtensions:function(e){e.forEach(e=>{const t=e;t.__registered__=!0,t.logger.hookLog=CE.extLog,t.reporter.hookApiInvoke=Tg.extApiInvoke,t.parameters&&Object.keys(t.parameters).forEach(e=>{t.parameters[e]=FE(e)})})},ChannelMediaRelayError:tS,ChannelMediaRelayEvent:$f,ChannelMediaRelayState:eS,RemoteStreamFallbackType:dS,RemoteStreamType:cS,ConnectionDisconnectedReason:gf,AudienceLatencyLevelType:Tf,AREAS:hS},xN=window||document;return Object.defineProperties(UN,{onAudioAutoplayFailed:{get:()=>lg.onAudioAutoplayFailed,set:e=>{lg.onAudioAutoplayFailed=e}},onAutoplayFailed:{get:()=>lg.onAutoplayFailed,set:e=>{lg.onAutoplayFailed=e}},_onSecurityPolicyViolation:{value:void 0,writable:!0},_cspEventHandlerPointer:{value:void 0,writable:!0},onSecurityPolicyViolation:{get:()=>UN._onSecurityPolicyViolation,set(e){if(UN._onSecurityPolicyViolation=e,!xN)return;const t=e=>{if(!(e&&e.blockedURI&&UN.onSecurityPolicyViolation))return;const t=e.blockedURI;FE("CSP_DETECTED_HOSTNAME_LIST").some(e=>t.includes(e))&&UN.onSecurityPolicyViolation&&"function"==typeof UN.onSecurityPolicyViolation&&UN.onSecurityPolicyViolation(e)},i=UN._cspEventHandlerPointer;i&&xN.removeEventListener("securitypolicyviolation",i),e&&"function"==typeof e&&xN.addEventListener("securitypolicyviolation",t),UN._cspEventHandlerPointer=t}}}),zg.on(pf.CAMERA_DEVICE_CHANGED,e=>{CE.info("camera device changed",JSON.stringify(e)),UN.onCameraChanged&&UN.onCameraChanged(e)}),zg.on(pf.RECORDING_DEVICE_CHANGED,e=>{CE.info("microphone device changed",JSON.stringify(e)),UN.onMicrophoneChanged&&UN.onMicrophoneChanged(e)}),zg.on(pf.PLAYOUT_DEVICE_CHANGED,e=>{CE.debug("playout device changed",JSON.stringify(e)),UN.onPlaybackDeviceChanged&&UN.onPlaybackDeviceChanged(e)}),Zg.onAutoplayFailed=()=>{CE.info("detect audio element autoplay failed"),lg.onAudioAutoplayFailed&&lg.onAudioAutoplayFailed()},wg.on("autoplay-failed",()=>{CE.info("detect webaudio autoplay failed"),lg.onAudioAutoplayFailed&&lg.onAudioAutoplayFailed()}),window&&(window.__ARTC__=UN),UN}));


/***/ }),

/***/ "./node_modules/axios/index.js":
/*!*************************************!*\
  !*** ./node_modules/axios/index.js ***!
  \*************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

module.exports = __webpack_require__(/*! ./lib/axios */ "./node_modules/axios/lib/axios.js");

/***/ }),

/***/ "./node_modules/axios/lib/adapters/xhr.js":
/*!************************************************!*\
  !*** ./node_modules/axios/lib/adapters/xhr.js ***!
  \************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";


var utils = __webpack_require__(/*! ./../utils */ "./node_modules/axios/lib/utils.js");
var settle = __webpack_require__(/*! ./../core/settle */ "./node_modules/axios/lib/core/settle.js");
var cookies = __webpack_require__(/*! ./../helpers/cookies */ "./node_modules/axios/lib/helpers/cookies.js");
var buildURL = __webpack_require__(/*! ./../helpers/buildURL */ "./node_modules/axios/lib/helpers/buildURL.js");
var buildFullPath = __webpack_require__(/*! ../core/buildFullPath */ "./node_modules/axios/lib/core/buildFullPath.js");
var parseHeaders = __webpack_require__(/*! ./../helpers/parseHeaders */ "./node_modules/axios/lib/helpers/parseHeaders.js");
var isURLSameOrigin = __webpack_require__(/*! ./../helpers/isURLSameOrigin */ "./node_modules/axios/lib/helpers/isURLSameOrigin.js");
var createError = __webpack_require__(/*! ../core/createError */ "./node_modules/axios/lib/core/createError.js");
var transitionalDefaults = __webpack_require__(/*! ../defaults/transitional */ "./node_modules/axios/lib/defaults/transitional.js");
var Cancel = __webpack_require__(/*! ../cancel/Cancel */ "./node_modules/axios/lib/cancel/Cancel.js");

module.exports = function xhrAdapter(config) {
  return new Promise(function dispatchXhrRequest(resolve, reject) {
    var requestData = config.data;
    var requestHeaders = config.headers;
    var responseType = config.responseType;
    var onCanceled;
    function done() {
      if (config.cancelToken) {
        config.cancelToken.unsubscribe(onCanceled);
      }

      if (config.signal) {
        config.signal.removeEventListener('abort', onCanceled);
      }
    }

    if (utils.isFormData(requestData)) {
      delete requestHeaders['Content-Type']; // Let the browser set it
    }

    var request = new XMLHttpRequest();

    // HTTP basic authentication
    if (config.auth) {
      var username = config.auth.username || '';
      var password = config.auth.password ? unescape(encodeURIComponent(config.auth.password)) : '';
      requestHeaders.Authorization = 'Basic ' + btoa(username + ':' + password);
    }

    var fullPath = buildFullPath(config.baseURL, config.url);
    request.open(config.method.toUpperCase(), buildURL(fullPath, config.params, config.paramsSerializer), true);

    // Set the request timeout in MS
    request.timeout = config.timeout;

    function onloadend() {
      if (!request) {
        return;
      }
      // Prepare the response
      var responseHeaders = 'getAllResponseHeaders' in request ? parseHeaders(request.getAllResponseHeaders()) : null;
      var responseData = !responseType || responseType === 'text' ||  responseType === 'json' ?
        request.responseText : request.response;
      var response = {
        data: responseData,
        status: request.status,
        statusText: request.statusText,
        headers: responseHeaders,
        config: config,
        request: request
      };

      settle(function _resolve(value) {
        resolve(value);
        done();
      }, function _reject(err) {
        reject(err);
        done();
      }, response);

      // Clean up request
      request = null;
    }

    if ('onloadend' in request) {
      // Use onloadend if available
      request.onloadend = onloadend;
    } else {
      // Listen for ready state to emulate onloadend
      request.onreadystatechange = function handleLoad() {
        if (!request || request.readyState !== 4) {
          return;
        }

        // The request errored out and we didn't get a response, this will be
        // handled by onerror instead
        // With one exception: request that using file: protocol, most browsers
        // will return status as 0 even though it's a successful request
        if (request.status === 0 && !(request.responseURL && request.responseURL.indexOf('file:') === 0)) {
          return;
        }
        // readystate handler is calling before onerror or ontimeout handlers,
        // so we should call onloadend on the next 'tick'
        setTimeout(onloadend);
      };
    }

    // Handle browser request cancellation (as opposed to a manual cancellation)
    request.onabort = function handleAbort() {
      if (!request) {
        return;
      }

      reject(createError('Request aborted', config, 'ECONNABORTED', request));

      // Clean up request
      request = null;
    };

    // Handle low level network errors
    request.onerror = function handleError() {
      // Real errors are hidden from us by the browser
      // onerror should only fire if it's a network error
      reject(createError('Network Error', config, null, request));

      // Clean up request
      request = null;
    };

    // Handle timeout
    request.ontimeout = function handleTimeout() {
      var timeoutErrorMessage = config.timeout ? 'timeout of ' + config.timeout + 'ms exceeded' : 'timeout exceeded';
      var transitional = config.transitional || transitionalDefaults;
      if (config.timeoutErrorMessage) {
        timeoutErrorMessage = config.timeoutErrorMessage;
      }
      reject(createError(
        timeoutErrorMessage,
        config,
        transitional.clarifyTimeoutError ? 'ETIMEDOUT' : 'ECONNABORTED',
        request));

      // Clean up request
      request = null;
    };

    // Add xsrf header
    // This is only done if running in a standard browser environment.
    // Specifically not if we're in a web worker, or react-native.
    if (utils.isStandardBrowserEnv()) {
      // Add xsrf header
      var xsrfValue = (config.withCredentials || isURLSameOrigin(fullPath)) && config.xsrfCookieName ?
        cookies.read(config.xsrfCookieName) :
        undefined;

      if (xsrfValue) {
        requestHeaders[config.xsrfHeaderName] = xsrfValue;
      }
    }

    // Add headers to the request
    if ('setRequestHeader' in request) {
      utils.forEach(requestHeaders, function setRequestHeader(val, key) {
        if (typeof requestData === 'undefined' && key.toLowerCase() === 'content-type') {
          // Remove Content-Type if data is undefined
          delete requestHeaders[key];
        } else {
          // Otherwise add header to the request
          request.setRequestHeader(key, val);
        }
      });
    }

    // Add withCredentials to request if needed
    if (!utils.isUndefined(config.withCredentials)) {
      request.withCredentials = !!config.withCredentials;
    }

    // Add responseType to request if needed
    if (responseType && responseType !== 'json') {
      request.responseType = config.responseType;
    }

    // Handle progress if needed
    if (typeof config.onDownloadProgress === 'function') {
      request.addEventListener('progress', config.onDownloadProgress);
    }

    // Not all browsers support upload events
    if (typeof config.onUploadProgress === 'function' && request.upload) {
      request.upload.addEventListener('progress', config.onUploadProgress);
    }

    if (config.cancelToken || config.signal) {
      // Handle cancellation
      // eslint-disable-next-line func-names
      onCanceled = function(cancel) {
        if (!request) {
          return;
        }
        reject(!cancel || (cancel && cancel.type) ? new Cancel('canceled') : cancel);
        request.abort();
        request = null;
      };

      config.cancelToken && config.cancelToken.subscribe(onCanceled);
      if (config.signal) {
        config.signal.aborted ? onCanceled() : config.signal.addEventListener('abort', onCanceled);
      }
    }

    if (!requestData) {
      requestData = null;
    }

    // Send the request
    request.send(requestData);
  });
};


/***/ }),

/***/ "./node_modules/axios/lib/axios.js":
/*!*****************************************!*\
  !*** ./node_modules/axios/lib/axios.js ***!
  \*****************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";


var utils = __webpack_require__(/*! ./utils */ "./node_modules/axios/lib/utils.js");
var bind = __webpack_require__(/*! ./helpers/bind */ "./node_modules/axios/lib/helpers/bind.js");
var Axios = __webpack_require__(/*! ./core/Axios */ "./node_modules/axios/lib/core/Axios.js");
var mergeConfig = __webpack_require__(/*! ./core/mergeConfig */ "./node_modules/axios/lib/core/mergeConfig.js");
var defaults = __webpack_require__(/*! ./defaults */ "./node_modules/axios/lib/defaults/index.js");

/**
 * Create an instance of Axios
 *
 * @param {Object} defaultConfig The default config for the instance
 * @return {Axios} A new instance of Axios
 */
function createInstance(defaultConfig) {
  var context = new Axios(defaultConfig);
  var instance = bind(Axios.prototype.request, context);

  // Copy axios.prototype to instance
  utils.extend(instance, Axios.prototype, context);

  // Copy context to instance
  utils.extend(instance, context);

  // Factory for creating new instances
  instance.create = function create(instanceConfig) {
    return createInstance(mergeConfig(defaultConfig, instanceConfig));
  };

  return instance;
}

// Create the default instance to be exported
var axios = createInstance(defaults);

// Expose Axios class to allow class inheritance
axios.Axios = Axios;

// Expose Cancel & CancelToken
axios.Cancel = __webpack_require__(/*! ./cancel/Cancel */ "./node_modules/axios/lib/cancel/Cancel.js");
axios.CancelToken = __webpack_require__(/*! ./cancel/CancelToken */ "./node_modules/axios/lib/cancel/CancelToken.js");
axios.isCancel = __webpack_require__(/*! ./cancel/isCancel */ "./node_modules/axios/lib/cancel/isCancel.js");
axios.VERSION = (__webpack_require__(/*! ./env/data */ "./node_modules/axios/lib/env/data.js").version);

// Expose all/spread
axios.all = function all(promises) {
  return Promise.all(promises);
};
axios.spread = __webpack_require__(/*! ./helpers/spread */ "./node_modules/axios/lib/helpers/spread.js");

// Expose isAxiosError
axios.isAxiosError = __webpack_require__(/*! ./helpers/isAxiosError */ "./node_modules/axios/lib/helpers/isAxiosError.js");

module.exports = axios;

// Allow use of default import syntax in TypeScript
module.exports["default"] = axios;


/***/ }),

/***/ "./node_modules/axios/lib/cancel/Cancel.js":
/*!*************************************************!*\
  !*** ./node_modules/axios/lib/cancel/Cancel.js ***!
  \*************************************************/
/***/ ((module) => {

"use strict";


/**
 * A `Cancel` is an object that is thrown when an operation is canceled.
 *
 * @class
 * @param {string=} message The message.
 */
function Cancel(message) {
  this.message = message;
}

Cancel.prototype.toString = function toString() {
  return 'Cancel' + (this.message ? ': ' + this.message : '');
};

Cancel.prototype.__CANCEL__ = true;

module.exports = Cancel;


/***/ }),

/***/ "./node_modules/axios/lib/cancel/CancelToken.js":
/*!******************************************************!*\
  !*** ./node_modules/axios/lib/cancel/CancelToken.js ***!
  \******************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";


var Cancel = __webpack_require__(/*! ./Cancel */ "./node_modules/axios/lib/cancel/Cancel.js");

/**
 * A `CancelToken` is an object that can be used to request cancellation of an operation.
 *
 * @class
 * @param {Function} executor The executor function.
 */
function CancelToken(executor) {
  if (typeof executor !== 'function') {
    throw new TypeError('executor must be a function.');
  }

  var resolvePromise;

  this.promise = new Promise(function promiseExecutor(resolve) {
    resolvePromise = resolve;
  });

  var token = this;

  // eslint-disable-next-line func-names
  this.promise.then(function(cancel) {
    if (!token._listeners) return;

    var i;
    var l = token._listeners.length;

    for (i = 0; i < l; i++) {
      token._listeners[i](cancel);
    }
    token._listeners = null;
  });

  // eslint-disable-next-line func-names
  this.promise.then = function(onfulfilled) {
    var _resolve;
    // eslint-disable-next-line func-names
    var promise = new Promise(function(resolve) {
      token.subscribe(resolve);
      _resolve = resolve;
    }).then(onfulfilled);

    promise.cancel = function reject() {
      token.unsubscribe(_resolve);
    };

    return promise;
  };

  executor(function cancel(message) {
    if (token.reason) {
      // Cancellation has already been requested
      return;
    }

    token.reason = new Cancel(message);
    resolvePromise(token.reason);
  });
}

/**
 * Throws a `Cancel` if cancellation has been requested.
 */
CancelToken.prototype.throwIfRequested = function throwIfRequested() {
  if (this.reason) {
    throw this.reason;
  }
};

/**
 * Subscribe to the cancel signal
 */

CancelToken.prototype.subscribe = function subscribe(listener) {
  if (this.reason) {
    listener(this.reason);
    return;
  }

  if (this._listeners) {
    this._listeners.push(listener);
  } else {
    this._listeners = [listener];
  }
};

/**
 * Unsubscribe from the cancel signal
 */

CancelToken.prototype.unsubscribe = function unsubscribe(listener) {
  if (!this._listeners) {
    return;
  }
  var index = this._listeners.indexOf(listener);
  if (index !== -1) {
    this._listeners.splice(index, 1);
  }
};

/**
 * Returns an object that contains a new `CancelToken` and a function that, when called,
 * cancels the `CancelToken`.
 */
CancelToken.source = function source() {
  var cancel;
  var token = new CancelToken(function executor(c) {
    cancel = c;
  });
  return {
    token: token,
    cancel: cancel
  };
};

module.exports = CancelToken;


/***/ }),

/***/ "./node_modules/axios/lib/cancel/isCancel.js":
/*!***************************************************!*\
  !*** ./node_modules/axios/lib/cancel/isCancel.js ***!
  \***************************************************/
/***/ ((module) => {

"use strict";


module.exports = function isCancel(value) {
  return !!(value && value.__CANCEL__);
};


/***/ }),

/***/ "./node_modules/axios/lib/core/Axios.js":
/*!**********************************************!*\
  !*** ./node_modules/axios/lib/core/Axios.js ***!
  \**********************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";


var utils = __webpack_require__(/*! ./../utils */ "./node_modules/axios/lib/utils.js");
var buildURL = __webpack_require__(/*! ../helpers/buildURL */ "./node_modules/axios/lib/helpers/buildURL.js");
var InterceptorManager = __webpack_require__(/*! ./InterceptorManager */ "./node_modules/axios/lib/core/InterceptorManager.js");
var dispatchRequest = __webpack_require__(/*! ./dispatchRequest */ "./node_modules/axios/lib/core/dispatchRequest.js");
var mergeConfig = __webpack_require__(/*! ./mergeConfig */ "./node_modules/axios/lib/core/mergeConfig.js");
var validator = __webpack_require__(/*! ../helpers/validator */ "./node_modules/axios/lib/helpers/validator.js");

var validators = validator.validators;
/**
 * Create a new instance of Axios
 *
 * @param {Object} instanceConfig The default config for the instance
 */
function Axios(instanceConfig) {
  this.defaults = instanceConfig;
  this.interceptors = {
    request: new InterceptorManager(),
    response: new InterceptorManager()
  };
}

/**
 * Dispatch a request
 *
 * @param {Object} config The config specific for this request (merged with this.defaults)
 */
Axios.prototype.request = function request(configOrUrl, config) {
  /*eslint no-param-reassign:0*/
  // Allow for axios('example/url'[, config]) a la fetch API
  if (typeof configOrUrl === 'string') {
    config = config || {};
    config.url = configOrUrl;
  } else {
    config = configOrUrl || {};
  }

  config = mergeConfig(this.defaults, config);

  // Set config.method
  if (config.method) {
    config.method = config.method.toLowerCase();
  } else if (this.defaults.method) {
    config.method = this.defaults.method.toLowerCase();
  } else {
    config.method = 'get';
  }

  var transitional = config.transitional;

  if (transitional !== undefined) {
    validator.assertOptions(transitional, {
      silentJSONParsing: validators.transitional(validators.boolean),
      forcedJSONParsing: validators.transitional(validators.boolean),
      clarifyTimeoutError: validators.transitional(validators.boolean)
    }, false);
  }

  // filter out skipped interceptors
  var requestInterceptorChain = [];
  var synchronousRequestInterceptors = true;
  this.interceptors.request.forEach(function unshiftRequestInterceptors(interceptor) {
    if (typeof interceptor.runWhen === 'function' && interceptor.runWhen(config) === false) {
      return;
    }

    synchronousRequestInterceptors = synchronousRequestInterceptors && interceptor.synchronous;

    requestInterceptorChain.unshift(interceptor.fulfilled, interceptor.rejected);
  });

  var responseInterceptorChain = [];
  this.interceptors.response.forEach(function pushResponseInterceptors(interceptor) {
    responseInterceptorChain.push(interceptor.fulfilled, interceptor.rejected);
  });

  var promise;

  if (!synchronousRequestInterceptors) {
    var chain = [dispatchRequest, undefined];

    Array.prototype.unshift.apply(chain, requestInterceptorChain);
    chain = chain.concat(responseInterceptorChain);

    promise = Promise.resolve(config);
    while (chain.length) {
      promise = promise.then(chain.shift(), chain.shift());
    }

    return promise;
  }


  var newConfig = config;
  while (requestInterceptorChain.length) {
    var onFulfilled = requestInterceptorChain.shift();
    var onRejected = requestInterceptorChain.shift();
    try {
      newConfig = onFulfilled(newConfig);
    } catch (error) {
      onRejected(error);
      break;
    }
  }

  try {
    promise = dispatchRequest(newConfig);
  } catch (error) {
    return Promise.reject(error);
  }

  while (responseInterceptorChain.length) {
    promise = promise.then(responseInterceptorChain.shift(), responseInterceptorChain.shift());
  }

  return promise;
};

Axios.prototype.getUri = function getUri(config) {
  config = mergeConfig(this.defaults, config);
  return buildURL(config.url, config.params, config.paramsSerializer).replace(/^\?/, '');
};

// Provide aliases for supported request methods
utils.forEach(['delete', 'get', 'head', 'options'], function forEachMethodNoData(method) {
  /*eslint func-names:0*/
  Axios.prototype[method] = function(url, config) {
    return this.request(mergeConfig(config || {}, {
      method: method,
      url: url,
      data: (config || {}).data
    }));
  };
});

utils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {
  /*eslint func-names:0*/
  Axios.prototype[method] = function(url, data, config) {
    return this.request(mergeConfig(config || {}, {
      method: method,
      url: url,
      data: data
    }));
  };
});

module.exports = Axios;


/***/ }),

/***/ "./node_modules/axios/lib/core/InterceptorManager.js":
/*!***********************************************************!*\
  !*** ./node_modules/axios/lib/core/InterceptorManager.js ***!
  \***********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";


var utils = __webpack_require__(/*! ./../utils */ "./node_modules/axios/lib/utils.js");

function InterceptorManager() {
  this.handlers = [];
}

/**
 * Add a new interceptor to the stack
 *
 * @param {Function} fulfilled The function to handle `then` for a `Promise`
 * @param {Function} rejected The function to handle `reject` for a `Promise`
 *
 * @return {Number} An ID used to remove interceptor later
 */
InterceptorManager.prototype.use = function use(fulfilled, rejected, options) {
  this.handlers.push({
    fulfilled: fulfilled,
    rejected: rejected,
    synchronous: options ? options.synchronous : false,
    runWhen: options ? options.runWhen : null
  });
  return this.handlers.length - 1;
};

/**
 * Remove an interceptor from the stack
 *
 * @param {Number} id The ID that was returned by `use`
 */
InterceptorManager.prototype.eject = function eject(id) {
  if (this.handlers[id]) {
    this.handlers[id] = null;
  }
};

/**
 * Iterate over all the registered interceptors
 *
 * This method is particularly useful for skipping over any
 * interceptors that may have become `null` calling `eject`.
 *
 * @param {Function} fn The function to call for each interceptor
 */
InterceptorManager.prototype.forEach = function forEach(fn) {
  utils.forEach(this.handlers, function forEachHandler(h) {
    if (h !== null) {
      fn(h);
    }
  });
};

module.exports = InterceptorManager;


/***/ }),

/***/ "./node_modules/axios/lib/core/buildFullPath.js":
/*!******************************************************!*\
  !*** ./node_modules/axios/lib/core/buildFullPath.js ***!
  \******************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";


var isAbsoluteURL = __webpack_require__(/*! ../helpers/isAbsoluteURL */ "./node_modules/axios/lib/helpers/isAbsoluteURL.js");
var combineURLs = __webpack_require__(/*! ../helpers/combineURLs */ "./node_modules/axios/lib/helpers/combineURLs.js");

/**
 * Creates a new URL by combining the baseURL with the requestedURL,
 * only when the requestedURL is not already an absolute URL.
 * If the requestURL is absolute, this function returns the requestedURL untouched.
 *
 * @param {string} baseURL The base URL
 * @param {string} requestedURL Absolute or relative URL to combine
 * @returns {string} The combined full path
 */
module.exports = function buildFullPath(baseURL, requestedURL) {
  if (baseURL && !isAbsoluteURL(requestedURL)) {
    return combineURLs(baseURL, requestedURL);
  }
  return requestedURL;
};


/***/ }),

/***/ "./node_modules/axios/lib/core/createError.js":
/*!****************************************************!*\
  !*** ./node_modules/axios/lib/core/createError.js ***!
  \****************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";


var enhanceError = __webpack_require__(/*! ./enhanceError */ "./node_modules/axios/lib/core/enhanceError.js");

/**
 * Create an Error with the specified message, config, error code, request and response.
 *
 * @param {string} message The error message.
 * @param {Object} config The config.
 * @param {string} [code] The error code (for example, 'ECONNABORTED').
 * @param {Object} [request] The request.
 * @param {Object} [response] The response.
 * @returns {Error} The created error.
 */
module.exports = function createError(message, config, code, request, response) {
  var error = new Error(message);
  return enhanceError(error, config, code, request, response);
};


/***/ }),

/***/ "./node_modules/axios/lib/core/dispatchRequest.js":
/*!********************************************************!*\
  !*** ./node_modules/axios/lib/core/dispatchRequest.js ***!
  \********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";


var utils = __webpack_require__(/*! ./../utils */ "./node_modules/axios/lib/utils.js");
var transformData = __webpack_require__(/*! ./transformData */ "./node_modules/axios/lib/core/transformData.js");
var isCancel = __webpack_require__(/*! ../cancel/isCancel */ "./node_modules/axios/lib/cancel/isCancel.js");
var defaults = __webpack_require__(/*! ../defaults */ "./node_modules/axios/lib/defaults/index.js");
var Cancel = __webpack_require__(/*! ../cancel/Cancel */ "./node_modules/axios/lib/cancel/Cancel.js");

/**
 * Throws a `Cancel` if cancellation has been requested.
 */
function throwIfCancellationRequested(config) {
  if (config.cancelToken) {
    config.cancelToken.throwIfRequested();
  }

  if (config.signal && config.signal.aborted) {
    throw new Cancel('canceled');
  }
}

/**
 * Dispatch a request to the server using the configured adapter.
 *
 * @param {object} config The config that is to be used for the request
 * @returns {Promise} The Promise to be fulfilled
 */
module.exports = function dispatchRequest(config) {
  throwIfCancellationRequested(config);

  // Ensure headers exist
  config.headers = config.headers || {};

  // Transform request data
  config.data = transformData.call(
    config,
    config.data,
    config.headers,
    config.transformRequest
  );

  // Flatten headers
  config.headers = utils.merge(
    config.headers.common || {},
    config.headers[config.method] || {},
    config.headers
  );

  utils.forEach(
    ['delete', 'get', 'head', 'post', 'put', 'patch', 'common'],
    function cleanHeaderConfig(method) {
      delete config.headers[method];
    }
  );

  var adapter = config.adapter || defaults.adapter;

  return adapter(config).then(function onAdapterResolution(response) {
    throwIfCancellationRequested(config);

    // Transform response data
    response.data = transformData.call(
      config,
      response.data,
      response.headers,
      config.transformResponse
    );

    return response;
  }, function onAdapterRejection(reason) {
    if (!isCancel(reason)) {
      throwIfCancellationRequested(config);

      // Transform response data
      if (reason && reason.response) {
        reason.response.data = transformData.call(
          config,
          reason.response.data,
          reason.response.headers,
          config.transformResponse
        );
      }
    }

    return Promise.reject(reason);
  });
};


/***/ }),

/***/ "./node_modules/axios/lib/core/enhanceError.js":
/*!*****************************************************!*\
  !*** ./node_modules/axios/lib/core/enhanceError.js ***!
  \*****************************************************/
/***/ ((module) => {

"use strict";


/**
 * Update an Error with the specified config, error code, and response.
 *
 * @param {Error} error The error to update.
 * @param {Object} config The config.
 * @param {string} [code] The error code (for example, 'ECONNABORTED').
 * @param {Object} [request] The request.
 * @param {Object} [response] The response.
 * @returns {Error} The error.
 */
module.exports = function enhanceError(error, config, code, request, response) {
  error.config = config;
  if (code) {
    error.code = code;
  }

  error.request = request;
  error.response = response;
  error.isAxiosError = true;

  error.toJSON = function toJSON() {
    return {
      // Standard
      message: this.message,
      name: this.name,
      // Microsoft
      description: this.description,
      number: this.number,
      // Mozilla
      fileName: this.fileName,
      lineNumber: this.lineNumber,
      columnNumber: this.columnNumber,
      stack: this.stack,
      // Axios
      config: this.config,
      code: this.code,
      status: this.response && this.response.status ? this.response.status : null
    };
  };
  return error;
};


/***/ }),

/***/ "./node_modules/axios/lib/core/mergeConfig.js":
/*!****************************************************!*\
  !*** ./node_modules/axios/lib/core/mergeConfig.js ***!
  \****************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";


var utils = __webpack_require__(/*! ../utils */ "./node_modules/axios/lib/utils.js");

/**
 * Config-specific merge-function which creates a new config-object
 * by merging two configuration objects together.
 *
 * @param {Object} config1
 * @param {Object} config2
 * @returns {Object} New object resulting from merging config2 to config1
 */
module.exports = function mergeConfig(config1, config2) {
  // eslint-disable-next-line no-param-reassign
  config2 = config2 || {};
  var config = {};

  function getMergedValue(target, source) {
    if (utils.isPlainObject(target) && utils.isPlainObject(source)) {
      return utils.merge(target, source);
    } else if (utils.isPlainObject(source)) {
      return utils.merge({}, source);
    } else if (utils.isArray(source)) {
      return source.slice();
    }
    return source;
  }

  // eslint-disable-next-line consistent-return
  function mergeDeepProperties(prop) {
    if (!utils.isUndefined(config2[prop])) {
      return getMergedValue(config1[prop], config2[prop]);
    } else if (!utils.isUndefined(config1[prop])) {
      return getMergedValue(undefined, config1[prop]);
    }
  }

  // eslint-disable-next-line consistent-return
  function valueFromConfig2(prop) {
    if (!utils.isUndefined(config2[prop])) {
      return getMergedValue(undefined, config2[prop]);
    }
  }

  // eslint-disable-next-line consistent-return
  function defaultToConfig2(prop) {
    if (!utils.isUndefined(config2[prop])) {
      return getMergedValue(undefined, config2[prop]);
    } else if (!utils.isUndefined(config1[prop])) {
      return getMergedValue(undefined, config1[prop]);
    }
  }

  // eslint-disable-next-line consistent-return
  function mergeDirectKeys(prop) {
    if (prop in config2) {
      return getMergedValue(config1[prop], config2[prop]);
    } else if (prop in config1) {
      return getMergedValue(undefined, config1[prop]);
    }
  }

  var mergeMap = {
    'url': valueFromConfig2,
    'method': valueFromConfig2,
    'data': valueFromConfig2,
    'baseURL': defaultToConfig2,
    'transformRequest': defaultToConfig2,
    'transformResponse': defaultToConfig2,
    'paramsSerializer': defaultToConfig2,
    'timeout': defaultToConfig2,
    'timeoutMessage': defaultToConfig2,
    'withCredentials': defaultToConfig2,
    'adapter': defaultToConfig2,
    'responseType': defaultToConfig2,
    'xsrfCookieName': defaultToConfig2,
    'xsrfHeaderName': defaultToConfig2,
    'onUploadProgress': defaultToConfig2,
    'onDownloadProgress': defaultToConfig2,
    'decompress': defaultToConfig2,
    'maxContentLength': defaultToConfig2,
    'maxBodyLength': defaultToConfig2,
    'transport': defaultToConfig2,
    'httpAgent': defaultToConfig2,
    'httpsAgent': defaultToConfig2,
    'cancelToken': defaultToConfig2,
    'socketPath': defaultToConfig2,
    'responseEncoding': defaultToConfig2,
    'validateStatus': mergeDirectKeys
  };

  utils.forEach(Object.keys(config1).concat(Object.keys(config2)), function computeConfigValue(prop) {
    var merge = mergeMap[prop] || mergeDeepProperties;
    var configValue = merge(prop);
    (utils.isUndefined(configValue) && merge !== mergeDirectKeys) || (config[prop] = configValue);
  });

  return config;
};


/***/ }),

/***/ "./node_modules/axios/lib/core/settle.js":
/*!***********************************************!*\
  !*** ./node_modules/axios/lib/core/settle.js ***!
  \***********************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";


var createError = __webpack_require__(/*! ./createError */ "./node_modules/axios/lib/core/createError.js");

/**
 * Resolve or reject a Promise based on response status.
 *
 * @param {Function} resolve A function that resolves the promise.
 * @param {Function} reject A function that rejects the promise.
 * @param {object} response The response.
 */
module.exports = function settle(resolve, reject, response) {
  var validateStatus = response.config.validateStatus;
  if (!response.status || !validateStatus || validateStatus(response.status)) {
    resolve(response);
  } else {
    reject(createError(
      'Request failed with status code ' + response.status,
      response.config,
      null,
      response.request,
      response
    ));
  }
};


/***/ }),

/***/ "./node_modules/axios/lib/core/transformData.js":
/*!******************************************************!*\
  !*** ./node_modules/axios/lib/core/transformData.js ***!
  \******************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";


var utils = __webpack_require__(/*! ./../utils */ "./node_modules/axios/lib/utils.js");
var defaults = __webpack_require__(/*! ../defaults */ "./node_modules/axios/lib/defaults/index.js");

/**
 * Transform the data for a request or a response
 *
 * @param {Object|String} data The data to be transformed
 * @param {Array} headers The headers for the request or response
 * @param {Array|Function} fns A single function or Array of functions
 * @returns {*} The resulting transformed data
 */
module.exports = function transformData(data, headers, fns) {
  var context = this || defaults;
  /*eslint no-param-reassign:0*/
  utils.forEach(fns, function transform(fn) {
    data = fn.call(context, data, headers);
  });

  return data;
};


/***/ }),

/***/ "./node_modules/axios/lib/defaults/index.js":
/*!**************************************************!*\
  !*** ./node_modules/axios/lib/defaults/index.js ***!
  \**************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
/* provided dependency */ var process = __webpack_require__(/*! process/browser.js */ "./node_modules/process/browser.js");


var utils = __webpack_require__(/*! ../utils */ "./node_modules/axios/lib/utils.js");
var normalizeHeaderName = __webpack_require__(/*! ../helpers/normalizeHeaderName */ "./node_modules/axios/lib/helpers/normalizeHeaderName.js");
var enhanceError = __webpack_require__(/*! ../core/enhanceError */ "./node_modules/axios/lib/core/enhanceError.js");
var transitionalDefaults = __webpack_require__(/*! ./transitional */ "./node_modules/axios/lib/defaults/transitional.js");

var DEFAULT_CONTENT_TYPE = {
  'Content-Type': 'application/x-www-form-urlencoded'
};

function setContentTypeIfUnset(headers, value) {
  if (!utils.isUndefined(headers) && utils.isUndefined(headers['Content-Type'])) {
    headers['Content-Type'] = value;
  }
}

function getDefaultAdapter() {
  var adapter;
  if (typeof XMLHttpRequest !== 'undefined') {
    // For browsers use XHR adapter
    adapter = __webpack_require__(/*! ../adapters/xhr */ "./node_modules/axios/lib/adapters/xhr.js");
  } else if (typeof process !== 'undefined' && Object.prototype.toString.call(process) === '[object process]') {
    // For node use HTTP adapter
    adapter = __webpack_require__(/*! ../adapters/http */ "./node_modules/axios/lib/adapters/xhr.js");
  }
  return adapter;
}

function stringifySafely(rawValue, parser, encoder) {
  if (utils.isString(rawValue)) {
    try {
      (parser || JSON.parse)(rawValue);
      return utils.trim(rawValue);
    } catch (e) {
      if (e.name !== 'SyntaxError') {
        throw e;
      }
    }
  }

  return (encoder || JSON.stringify)(rawValue);
}

var defaults = {

  transitional: transitionalDefaults,

  adapter: getDefaultAdapter(),

  transformRequest: [function transformRequest(data, headers) {
    normalizeHeaderName(headers, 'Accept');
    normalizeHeaderName(headers, 'Content-Type');

    if (utils.isFormData(data) ||
      utils.isArrayBuffer(data) ||
      utils.isBuffer(data) ||
      utils.isStream(data) ||
      utils.isFile(data) ||
      utils.isBlob(data)
    ) {
      return data;
    }
    if (utils.isArrayBufferView(data)) {
      return data.buffer;
    }
    if (utils.isURLSearchParams(data)) {
      setContentTypeIfUnset(headers, 'application/x-www-form-urlencoded;charset=utf-8');
      return data.toString();
    }
    if (utils.isObject(data) || (headers && headers['Content-Type'] === 'application/json')) {
      setContentTypeIfUnset(headers, 'application/json');
      return stringifySafely(data);
    }
    return data;
  }],

  transformResponse: [function transformResponse(data) {
    var transitional = this.transitional || defaults.transitional;
    var silentJSONParsing = transitional && transitional.silentJSONParsing;
    var forcedJSONParsing = transitional && transitional.forcedJSONParsing;
    var strictJSONParsing = !silentJSONParsing && this.responseType === 'json';

    if (strictJSONParsing || (forcedJSONParsing && utils.isString(data) && data.length)) {
      try {
        return JSON.parse(data);
      } catch (e) {
        if (strictJSONParsing) {
          if (e.name === 'SyntaxError') {
            throw enhanceError(e, this, 'E_JSON_PARSE');
          }
          throw e;
        }
      }
    }

    return data;
  }],

  /**
   * A timeout in milliseconds to abort a request. If set to 0 (default) a
   * timeout is not created.
   */
  timeout: 0,

  xsrfCookieName: 'XSRF-TOKEN',
  xsrfHeaderName: 'X-XSRF-TOKEN',

  maxContentLength: -1,
  maxBodyLength: -1,

  validateStatus: function validateStatus(status) {
    return status >= 200 && status < 300;
  },

  headers: {
    common: {
      'Accept': 'application/json, text/plain, */*'
    }
  }
};

utils.forEach(['delete', 'get', 'head'], function forEachMethodNoData(method) {
  defaults.headers[method] = {};
});

utils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {
  defaults.headers[method] = utils.merge(DEFAULT_CONTENT_TYPE);
});

module.exports = defaults;


/***/ }),

/***/ "./node_modules/axios/lib/defaults/transitional.js":
/*!*********************************************************!*\
  !*** ./node_modules/axios/lib/defaults/transitional.js ***!
  \*********************************************************/
/***/ ((module) => {

"use strict";


module.exports = {
  silentJSONParsing: true,
  forcedJSONParsing: true,
  clarifyTimeoutError: false
};


/***/ }),

/***/ "./node_modules/axios/lib/env/data.js":
/*!********************************************!*\
  !*** ./node_modules/axios/lib/env/data.js ***!
  \********************************************/
/***/ ((module) => {

module.exports = {
  "version": "0.26.1"
};

/***/ }),

/***/ "./node_modules/axios/lib/helpers/bind.js":
/*!************************************************!*\
  !*** ./node_modules/axios/lib/helpers/bind.js ***!
  \************************************************/
/***/ ((module) => {

"use strict";


module.exports = function bind(fn, thisArg) {
  return function wrap() {
    var args = new Array(arguments.length);
    for (var i = 0; i < args.length; i++) {
      args[i] = arguments[i];
    }
    return fn.apply(thisArg, args);
  };
};


/***/ }),

/***/ "./node_modules/axios/lib/helpers/buildURL.js":
/*!****************************************************!*\
  !*** ./node_modules/axios/lib/helpers/buildURL.js ***!
  \****************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";


var utils = __webpack_require__(/*! ./../utils */ "./node_modules/axios/lib/utils.js");

function encode(val) {
  return encodeURIComponent(val).
    replace(/%3A/gi, ':').
    replace(/%24/g, '$').
    replace(/%2C/gi, ',').
    replace(/%20/g, '+').
    replace(/%5B/gi, '[').
    replace(/%5D/gi, ']');
}

/**
 * Build a URL by appending params to the end
 *
 * @param {string} url The base of the url (e.g., http://www.google.com)
 * @param {object} [params] The params to be appended
 * @returns {string} The formatted url
 */
module.exports = function buildURL(url, params, paramsSerializer) {
  /*eslint no-param-reassign:0*/
  if (!params) {
    return url;
  }

  var serializedParams;
  if (paramsSerializer) {
    serializedParams = paramsSerializer(params);
  } else if (utils.isURLSearchParams(params)) {
    serializedParams = params.toString();
  } else {
    var parts = [];

    utils.forEach(params, function serialize(val, key) {
      if (val === null || typeof val === 'undefined') {
        return;
      }

      if (utils.isArray(val)) {
        key = key + '[]';
      } else {
        val = [val];
      }

      utils.forEach(val, function parseValue(v) {
        if (utils.isDate(v)) {
          v = v.toISOString();
        } else if (utils.isObject(v)) {
          v = JSON.stringify(v);
        }
        parts.push(encode(key) + '=' + encode(v));
      });
    });

    serializedParams = parts.join('&');
  }

  if (serializedParams) {
    var hashmarkIndex = url.indexOf('#');
    if (hashmarkIndex !== -1) {
      url = url.slice(0, hashmarkIndex);
    }

    url += (url.indexOf('?') === -1 ? '?' : '&') + serializedParams;
  }

  return url;
};


/***/ }),

/***/ "./node_modules/axios/lib/helpers/combineURLs.js":
/*!*******************************************************!*\
  !*** ./node_modules/axios/lib/helpers/combineURLs.js ***!
  \*******************************************************/
/***/ ((module) => {

"use strict";


/**
 * Creates a new URL by combining the specified URLs
 *
 * @param {string} baseURL The base URL
 * @param {string} relativeURL The relative URL
 * @returns {string} The combined URL
 */
module.exports = function combineURLs(baseURL, relativeURL) {
  return relativeURL
    ? baseURL.replace(/\/+$/, '') + '/' + relativeURL.replace(/^\/+/, '')
    : baseURL;
};


/***/ }),

/***/ "./node_modules/axios/lib/helpers/cookies.js":
/*!***************************************************!*\
  !*** ./node_modules/axios/lib/helpers/cookies.js ***!
  \***************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";


var utils = __webpack_require__(/*! ./../utils */ "./node_modules/axios/lib/utils.js");

module.exports = (
  utils.isStandardBrowserEnv() ?

  // Standard browser envs support document.cookie
    (function standardBrowserEnv() {
      return {
        write: function write(name, value, expires, path, domain, secure) {
          var cookie = [];
          cookie.push(name + '=' + encodeURIComponent(value));

          if (utils.isNumber(expires)) {
            cookie.push('expires=' + new Date(expires).toGMTString());
          }

          if (utils.isString(path)) {
            cookie.push('path=' + path);
          }

          if (utils.isString(domain)) {
            cookie.push('domain=' + domain);
          }

          if (secure === true) {
            cookie.push('secure');
          }

          document.cookie = cookie.join('; ');
        },

        read: function read(name) {
          var match = document.cookie.match(new RegExp('(^|;\\s*)(' + name + ')=([^;]*)'));
          return (match ? decodeURIComponent(match[3]) : null);
        },

        remove: function remove(name) {
          this.write(name, '', Date.now() - 86400000);
        }
      };
    })() :

  // Non standard browser env (web workers, react-native) lack needed support.
    (function nonStandardBrowserEnv() {
      return {
        write: function write() {},
        read: function read() { return null; },
        remove: function remove() {}
      };
    })()
);


/***/ }),

/***/ "./node_modules/axios/lib/helpers/isAbsoluteURL.js":
/*!*********************************************************!*\
  !*** ./node_modules/axios/lib/helpers/isAbsoluteURL.js ***!
  \*********************************************************/
/***/ ((module) => {

"use strict";


/**
 * Determines whether the specified URL is absolute
 *
 * @param {string} url The URL to test
 * @returns {boolean} True if the specified URL is absolute, otherwise false
 */
module.exports = function isAbsoluteURL(url) {
  // A URL is considered absolute if it begins with "<scheme>://" or "//" (protocol-relative URL).
  // RFC 3986 defines scheme name as a sequence of characters beginning with a letter and followed
  // by any combination of letters, digits, plus, period, or hyphen.
  return /^([a-z][a-z\d+\-.]*:)?\/\//i.test(url);
};


/***/ }),

/***/ "./node_modules/axios/lib/helpers/isAxiosError.js":
/*!********************************************************!*\
  !*** ./node_modules/axios/lib/helpers/isAxiosError.js ***!
  \********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";


var utils = __webpack_require__(/*! ./../utils */ "./node_modules/axios/lib/utils.js");

/**
 * Determines whether the payload is an error thrown by Axios
 *
 * @param {*} payload The value to test
 * @returns {boolean} True if the payload is an error thrown by Axios, otherwise false
 */
module.exports = function isAxiosError(payload) {
  return utils.isObject(payload) && (payload.isAxiosError === true);
};


/***/ }),

/***/ "./node_modules/axios/lib/helpers/isURLSameOrigin.js":
/*!***********************************************************!*\
  !*** ./node_modules/axios/lib/helpers/isURLSameOrigin.js ***!
  \***********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";


var utils = __webpack_require__(/*! ./../utils */ "./node_modules/axios/lib/utils.js");

module.exports = (
  utils.isStandardBrowserEnv() ?

  // Standard browser envs have full support of the APIs needed to test
  // whether the request URL is of the same origin as current location.
    (function standardBrowserEnv() {
      var msie = /(msie|trident)/i.test(navigator.userAgent);
      var urlParsingNode = document.createElement('a');
      var originURL;

      /**
    * Parse a URL to discover it's components
    *
    * @param {String} url The URL to be parsed
    * @returns {Object}
    */
      function resolveURL(url) {
        var href = url;

        if (msie) {
        // IE needs attribute set twice to normalize properties
          urlParsingNode.setAttribute('href', href);
          href = urlParsingNode.href;
        }

        urlParsingNode.setAttribute('href', href);

        // urlParsingNode provides the UrlUtils interface - http://url.spec.whatwg.org/#urlutils
        return {
          href: urlParsingNode.href,
          protocol: urlParsingNode.protocol ? urlParsingNode.protocol.replace(/:$/, '') : '',
          host: urlParsingNode.host,
          search: urlParsingNode.search ? urlParsingNode.search.replace(/^\?/, '') : '',
          hash: urlParsingNode.hash ? urlParsingNode.hash.replace(/^#/, '') : '',
          hostname: urlParsingNode.hostname,
          port: urlParsingNode.port,
          pathname: (urlParsingNode.pathname.charAt(0) === '/') ?
            urlParsingNode.pathname :
            '/' + urlParsingNode.pathname
        };
      }

      originURL = resolveURL(window.location.href);

      /**
    * Determine if a URL shares the same origin as the current location
    *
    * @param {String} requestURL The URL to test
    * @returns {boolean} True if URL shares the same origin, otherwise false
    */
      return function isURLSameOrigin(requestURL) {
        var parsed = (utils.isString(requestURL)) ? resolveURL(requestURL) : requestURL;
        return (parsed.protocol === originURL.protocol &&
            parsed.host === originURL.host);
      };
    })() :

  // Non standard browser envs (web workers, react-native) lack needed support.
    (function nonStandardBrowserEnv() {
      return function isURLSameOrigin() {
        return true;
      };
    })()
);


/***/ }),

/***/ "./node_modules/axios/lib/helpers/normalizeHeaderName.js":
/*!***************************************************************!*\
  !*** ./node_modules/axios/lib/helpers/normalizeHeaderName.js ***!
  \***************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";


var utils = __webpack_require__(/*! ../utils */ "./node_modules/axios/lib/utils.js");

module.exports = function normalizeHeaderName(headers, normalizedName) {
  utils.forEach(headers, function processHeader(value, name) {
    if (name !== normalizedName && name.toUpperCase() === normalizedName.toUpperCase()) {
      headers[normalizedName] = value;
      delete headers[name];
    }
  });
};


/***/ }),

/***/ "./node_modules/axios/lib/helpers/parseHeaders.js":
/*!********************************************************!*\
  !*** ./node_modules/axios/lib/helpers/parseHeaders.js ***!
  \********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";


var utils = __webpack_require__(/*! ./../utils */ "./node_modules/axios/lib/utils.js");

// Headers whose duplicates are ignored by node
// c.f. https://nodejs.org/api/http.html#http_message_headers
var ignoreDuplicateOf = [
  'age', 'authorization', 'content-length', 'content-type', 'etag',
  'expires', 'from', 'host', 'if-modified-since', 'if-unmodified-since',
  'last-modified', 'location', 'max-forwards', 'proxy-authorization',
  'referer', 'retry-after', 'user-agent'
];

/**
 * Parse headers into an object
 *
 * ```
 * Date: Wed, 27 Aug 2014 08:58:49 GMT
 * Content-Type: application/json
 * Connection: keep-alive
 * Transfer-Encoding: chunked
 * ```
 *
 * @param {String} headers Headers needing to be parsed
 * @returns {Object} Headers parsed into an object
 */
module.exports = function parseHeaders(headers) {
  var parsed = {};
  var key;
  var val;
  var i;

  if (!headers) { return parsed; }

  utils.forEach(headers.split('\n'), function parser(line) {
    i = line.indexOf(':');
    key = utils.trim(line.substr(0, i)).toLowerCase();
    val = utils.trim(line.substr(i + 1));

    if (key) {
      if (parsed[key] && ignoreDuplicateOf.indexOf(key) >= 0) {
        return;
      }
      if (key === 'set-cookie') {
        parsed[key] = (parsed[key] ? parsed[key] : []).concat([val]);
      } else {
        parsed[key] = parsed[key] ? parsed[key] + ', ' + val : val;
      }
    }
  });

  return parsed;
};


/***/ }),

/***/ "./node_modules/axios/lib/helpers/spread.js":
/*!**************************************************!*\
  !*** ./node_modules/axios/lib/helpers/spread.js ***!
  \**************************************************/
/***/ ((module) => {

"use strict";


/**
 * Syntactic sugar for invoking a function and expanding an array for arguments.
 *
 * Common use case would be to use `Function.prototype.apply`.
 *
 *  ```js
 *  function f(x, y, z) {}
 *  var args = [1, 2, 3];
 *  f.apply(null, args);
 *  ```
 *
 * With `spread` this example can be re-written.
 *
 *  ```js
 *  spread(function(x, y, z) {})([1, 2, 3]);
 *  ```
 *
 * @param {Function} callback
 * @returns {Function}
 */
module.exports = function spread(callback) {
  return function wrap(arr) {
    return callback.apply(null, arr);
  };
};


/***/ }),

/***/ "./node_modules/axios/lib/helpers/validator.js":
/*!*****************************************************!*\
  !*** ./node_modules/axios/lib/helpers/validator.js ***!
  \*****************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";


var VERSION = (__webpack_require__(/*! ../env/data */ "./node_modules/axios/lib/env/data.js").version);

var validators = {};

// eslint-disable-next-line func-names
['object', 'boolean', 'number', 'function', 'string', 'symbol'].forEach(function(type, i) {
  validators[type] = function validator(thing) {
    return typeof thing === type || 'a' + (i < 1 ? 'n ' : ' ') + type;
  };
});

var deprecatedWarnings = {};

/**
 * Transitional option validator
 * @param {function|boolean?} validator - set to false if the transitional option has been removed
 * @param {string?} version - deprecated version / removed since version
 * @param {string?} message - some message with additional info
 * @returns {function}
 */
validators.transitional = function transitional(validator, version, message) {
  function formatMessage(opt, desc) {
    return '[Axios v' + VERSION + '] Transitional option \'' + opt + '\'' + desc + (message ? '. ' + message : '');
  }

  // eslint-disable-next-line func-names
  return function(value, opt, opts) {
    if (validator === false) {
      throw new Error(formatMessage(opt, ' has been removed' + (version ? ' in ' + version : '')));
    }

    if (version && !deprecatedWarnings[opt]) {
      deprecatedWarnings[opt] = true;
      // eslint-disable-next-line no-console
      console.warn(
        formatMessage(
          opt,
          ' has been deprecated since v' + version + ' and will be removed in the near future'
        )
      );
    }

    return validator ? validator(value, opt, opts) : true;
  };
};

/**
 * Assert object's properties type
 * @param {object} options
 * @param {object} schema
 * @param {boolean?} allowUnknown
 */

function assertOptions(options, schema, allowUnknown) {
  if (typeof options !== 'object') {
    throw new TypeError('options must be an object');
  }
  var keys = Object.keys(options);
  var i = keys.length;
  while (i-- > 0) {
    var opt = keys[i];
    var validator = schema[opt];
    if (validator) {
      var value = options[opt];
      var result = value === undefined || validator(value, opt, options);
      if (result !== true) {
        throw new TypeError('option ' + opt + ' must be ' + result);
      }
      continue;
    }
    if (allowUnknown !== true) {
      throw Error('Unknown option ' + opt);
    }
  }
}

module.exports = {
  assertOptions: assertOptions,
  validators: validators
};


/***/ }),

/***/ "./node_modules/axios/lib/utils.js":
/*!*****************************************!*\
  !*** ./node_modules/axios/lib/utils.js ***!
  \*****************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";


var bind = __webpack_require__(/*! ./helpers/bind */ "./node_modules/axios/lib/helpers/bind.js");

// utils is a library of generic helper functions non-specific to axios

var toString = Object.prototype.toString;

/**
 * Determine if a value is an Array
 *
 * @param {Object} val The value to test
 * @returns {boolean} True if value is an Array, otherwise false
 */
function isArray(val) {
  return Array.isArray(val);
}

/**
 * Determine if a value is undefined
 *
 * @param {Object} val The value to test
 * @returns {boolean} True if the value is undefined, otherwise false
 */
function isUndefined(val) {
  return typeof val === 'undefined';
}

/**
 * Determine if a value is a Buffer
 *
 * @param {Object} val The value to test
 * @returns {boolean} True if value is a Buffer, otherwise false
 */
function isBuffer(val) {
  return val !== null && !isUndefined(val) && val.constructor !== null && !isUndefined(val.constructor)
    && typeof val.constructor.isBuffer === 'function' && val.constructor.isBuffer(val);
}

/**
 * Determine if a value is an ArrayBuffer
 *
 * @param {Object} val The value to test
 * @returns {boolean} True if value is an ArrayBuffer, otherwise false
 */
function isArrayBuffer(val) {
  return toString.call(val) === '[object ArrayBuffer]';
}

/**
 * Determine if a value is a FormData
 *
 * @param {Object} val The value to test
 * @returns {boolean} True if value is an FormData, otherwise false
 */
function isFormData(val) {
  return toString.call(val) === '[object FormData]';
}

/**
 * Determine if a value is a view on an ArrayBuffer
 *
 * @param {Object} val The value to test
 * @returns {boolean} True if value is a view on an ArrayBuffer, otherwise false
 */
function isArrayBufferView(val) {
  var result;
  if ((typeof ArrayBuffer !== 'undefined') && (ArrayBuffer.isView)) {
    result = ArrayBuffer.isView(val);
  } else {
    result = (val) && (val.buffer) && (isArrayBuffer(val.buffer));
  }
  return result;
}

/**
 * Determine if a value is a String
 *
 * @param {Object} val The value to test
 * @returns {boolean} True if value is a String, otherwise false
 */
function isString(val) {
  return typeof val === 'string';
}

/**
 * Determine if a value is a Number
 *
 * @param {Object} val The value to test
 * @returns {boolean} True if value is a Number, otherwise false
 */
function isNumber(val) {
  return typeof val === 'number';
}

/**
 * Determine if a value is an Object
 *
 * @param {Object} val The value to test
 * @returns {boolean} True if value is an Object, otherwise false
 */
function isObject(val) {
  return val !== null && typeof val === 'object';
}

/**
 * Determine if a value is a plain Object
 *
 * @param {Object} val The value to test
 * @return {boolean} True if value is a plain Object, otherwise false
 */
function isPlainObject(val) {
  if (toString.call(val) !== '[object Object]') {
    return false;
  }

  var prototype = Object.getPrototypeOf(val);
  return prototype === null || prototype === Object.prototype;
}

/**
 * Determine if a value is a Date
 *
 * @param {Object} val The value to test
 * @returns {boolean} True if value is a Date, otherwise false
 */
function isDate(val) {
  return toString.call(val) === '[object Date]';
}

/**
 * Determine if a value is a File
 *
 * @param {Object} val The value to test
 * @returns {boolean} True if value is a File, otherwise false
 */
function isFile(val) {
  return toString.call(val) === '[object File]';
}

/**
 * Determine if a value is a Blob
 *
 * @param {Object} val The value to test
 * @returns {boolean} True if value is a Blob, otherwise false
 */
function isBlob(val) {
  return toString.call(val) === '[object Blob]';
}

/**
 * Determine if a value is a Function
 *
 * @param {Object} val The value to test
 * @returns {boolean} True if value is a Function, otherwise false
 */
function isFunction(val) {
  return toString.call(val) === '[object Function]';
}

/**
 * Determine if a value is a Stream
 *
 * @param {Object} val The value to test
 * @returns {boolean} True if value is a Stream, otherwise false
 */
function isStream(val) {
  return isObject(val) && isFunction(val.pipe);
}

/**
 * Determine if a value is a URLSearchParams object
 *
 * @param {Object} val The value to test
 * @returns {boolean} True if value is a URLSearchParams object, otherwise false
 */
function isURLSearchParams(val) {
  return toString.call(val) === '[object URLSearchParams]';
}

/**
 * Trim excess whitespace off the beginning and end of a string
 *
 * @param {String} str The String to trim
 * @returns {String} The String freed of excess whitespace
 */
function trim(str) {
  return str.trim ? str.trim() : str.replace(/^\s+|\s+$/g, '');
}

/**
 * Determine if we're running in a standard browser environment
 *
 * This allows axios to run in a web worker, and react-native.
 * Both environments support XMLHttpRequest, but not fully standard globals.
 *
 * web workers:
 *  typeof window -> undefined
 *  typeof document -> undefined
 *
 * react-native:
 *  navigator.product -> 'ReactNative'
 * nativescript
 *  navigator.product -> 'NativeScript' or 'NS'
 */
function isStandardBrowserEnv() {
  if (typeof navigator !== 'undefined' && (navigator.product === 'ReactNative' ||
                                           navigator.product === 'NativeScript' ||
                                           navigator.product === 'NS')) {
    return false;
  }
  return (
    typeof window !== 'undefined' &&
    typeof document !== 'undefined'
  );
}

/**
 * Iterate over an Array or an Object invoking a function for each item.
 *
 * If `obj` is an Array callback will be called passing
 * the value, index, and complete array for each item.
 *
 * If 'obj' is an Object callback will be called passing
 * the value, key, and complete object for each property.
 *
 * @param {Object|Array} obj The object to iterate
 * @param {Function} fn The callback to invoke for each item
 */
function forEach(obj, fn) {
  // Don't bother if no value provided
  if (obj === null || typeof obj === 'undefined') {
    return;
  }

  // Force an array if not already something iterable
  if (typeof obj !== 'object') {
    /*eslint no-param-reassign:0*/
    obj = [obj];
  }

  if (isArray(obj)) {
    // Iterate over array values
    for (var i = 0, l = obj.length; i < l; i++) {
      fn.call(null, obj[i], i, obj);
    }
  } else {
    // Iterate over object keys
    for (var key in obj) {
      if (Object.prototype.hasOwnProperty.call(obj, key)) {
        fn.call(null, obj[key], key, obj);
      }
    }
  }
}

/**
 * Accepts varargs expecting each argument to be an object, then
 * immutably merges the properties of each object and returns result.
 *
 * When multiple objects contain the same key the later object in
 * the arguments list will take precedence.
 *
 * Example:
 *
 * ```js
 * var result = merge({foo: 123}, {foo: 456});
 * console.log(result.foo); // outputs 456
 * ```
 *
 * @param {Object} obj1 Object to merge
 * @returns {Object} Result of all merge properties
 */
function merge(/* obj1, obj2, obj3, ... */) {
  var result = {};
  function assignValue(val, key) {
    if (isPlainObject(result[key]) && isPlainObject(val)) {
      result[key] = merge(result[key], val);
    } else if (isPlainObject(val)) {
      result[key] = merge({}, val);
    } else if (isArray(val)) {
      result[key] = val.slice();
    } else {
      result[key] = val;
    }
  }

  for (var i = 0, l = arguments.length; i < l; i++) {
    forEach(arguments[i], assignValue);
  }
  return result;
}

/**
 * Extends object a by mutably adding to it the properties of object b.
 *
 * @param {Object} a The object to be extended
 * @param {Object} b The object to copy properties from
 * @param {Object} thisArg The object to bind function to
 * @return {Object} The resulting value of object a
 */
function extend(a, b, thisArg) {
  forEach(b, function assignValue(val, key) {
    if (thisArg && typeof val === 'function') {
      a[key] = bind(val, thisArg);
    } else {
      a[key] = val;
    }
  });
  return a;
}

/**
 * Remove byte order marker. This catches EF BB BF (the UTF-8 BOM)
 *
 * @param {string} content with BOM
 * @return {string} content value without BOM
 */
function stripBOM(content) {
  if (content.charCodeAt(0) === 0xFEFF) {
    content = content.slice(1);
  }
  return content;
}

module.exports = {
  isArray: isArray,
  isArrayBuffer: isArrayBuffer,
  isBuffer: isBuffer,
  isFormData: isFormData,
  isArrayBufferView: isArrayBufferView,
  isString: isString,
  isNumber: isNumber,
  isObject: isObject,
  isPlainObject: isPlainObject,
  isUndefined: isUndefined,
  isDate: isDate,
  isFile: isFile,
  isBlob: isBlob,
  isFunction: isFunction,
  isStream: isStream,
  isURLSearchParams: isURLSearchParams,
  isStandardBrowserEnv: isStandardBrowserEnv,
  forEach: forEach,
  merge: merge,
  extend: extend,
  trim: trim,
  stripBOM: stripBOM
};


/***/ }),

/***/ "./node_modules/babel-loader/lib/index.js??clonedRuleSet-5.use[0]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./resources/assets/js/video/AppPregnant.vue?vue&type=script&lang=js":
/*!*******************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib/index.js??clonedRuleSet-5.use[0]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./resources/assets/js/video/AppPregnant.vue?vue&type=script&lang=js ***!
  \*******************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _VideoAppPregnant_vue__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./VideoAppPregnant.vue */ "./resources/assets/js/video/VideoAppPregnant.vue");

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({
  name: 'App',
  components: {
    'video-app-pregnant': _VideoAppPregnant_vue__WEBPACK_IMPORTED_MODULE_0__["default"]
  }
});

/***/ }),

/***/ "./node_modules/babel-loader/lib/index.js??clonedRuleSet-5.use[0]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./resources/assets/js/video/LabRequestModal.vue?vue&type=script&lang=js":
/*!***********************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib/index.js??clonedRuleSet-5.use[0]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./resources/assets/js/video/LabRequestModal.vue?vue&type=script&lang=js ***!
  \***********************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "./node_modules/@babel/runtime/regenerator/index.js");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _api_index__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./api/index */ "./resources/assets/js/video/api/index.js");

function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }
function _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err); } _next(undefined); }); }; }
function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }
function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }
function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }
function _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== "undefined" && arr[Symbol.iterator] || arr["@@iterator"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"] != null) _i["return"](); } finally { if (_d) throw _e; } } return _arr; }
function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({
  data: function data() {
    return {
      baseUrl: $("#broadcasting_url").val(),
      searchTerm: '',
      laboratories: [],
      laboratoriesHolder: [],
      checkedLaboratories: []
    };
  },
  props: {
    activity_id: {
      type: Number
    },
    requested_by: {
      type: Number
    }
  },
  mounted: function mounted() {
    console.log(this.activity_id);
    this.__getLaboratories();
  },
  methods: {
    searchLaboratories: function searchLaboratories() {
      var searchTermLower = this.searchTerm.toLowerCase();
      var searchTermRegex = new RegExp(searchTermLower.replace(/[-/\\^$*+?.()|[\]{}]/g, '\\$&'), 'i');
      if (searchTermLower) {
        this.laboratories = Object.entries(this.laboratoriesHolder).filter(function (_ref) {
          var _ref2 = _slicedToArray(_ref, 2),
            laboratoryCode = _ref2[0],
            laboratoryDescription = _ref2[1];
          return searchTermRegex.test(laboratoryCode.toLowerCase()) || searchTermRegex.test(laboratoryDescription.toLowerCase());
        }).reduce(function (filtered, _ref3) {
          var _ref4 = _slicedToArray(_ref3, 2),
            laboratoryCode = _ref4[0],
            laboratoryDescription = _ref4[1];
          filtered[laboratoryCode] = laboratoryDescription;
          return filtered;
        }, {});
      } else {
        this.laboratories = this.laboratoriesHolder;
      }
    },
    submitForm: function submitForm() {
      if (this.checkedLaboratories.length > 0) {
        var params = {
          activity_id: this.activity_id,
          requested_by: this.requested_by,
          laboratory_code: this.checkedLaboratories
        };
        this.__saveLaboratories(params);
        $("#labRequestModal").modal("hide");
        Lobibox.notify('success', {
          title: "Laboratory Request",
          msg: "Laboratory successfully request",
          img: this.baseUrl + "/resources/img/ro7.png"
        });
        return;
      }
      Lobibox.alert("error", {
        msg: "Please select a laboratory to request"
      });
    },
    __getLaboratories: function __getLaboratories() {
      var _this = this;
      return _asyncToGenerator( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark(function _callee() {
        var response;
        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                _context.next = 2;
                return (0,_api_index__WEBPACK_IMPORTED_MODULE_1__.getLaboratories)();
              case 2:
                response = _context.sent;
                _this.laboratories = response.data;
                _this.laboratoriesHolder = response.data;
              case 5:
              case "end":
                return _context.stop();
            }
          }
        }, _callee);
      }))();
    },
    __saveLaboratories: function __saveLaboratories(params) {
      return _asyncToGenerator( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark(function _callee2() {
        var response;
        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap(function _callee2$(_context2) {
          while (1) {
            switch (_context2.prev = _context2.next) {
              case 0:
                _context2.next = 2;
                return (0,_api_index__WEBPACK_IMPORTED_MODULE_1__.saveLabRequest)(params);
              case 2:
                response = _context2.sent;
                console.log(response.data);
              case 4:
              case "end":
                return _context2.stop();
            }
          }
        }, _callee2);
      }))();
    }
  }
});

/***/ }),

/***/ "./node_modules/babel-loader/lib/index.js??clonedRuleSet-5.use[0]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./resources/assets/js/video/PrescriptionModal.vue?vue&type=script&lang=js":
/*!*************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib/index.js??clonedRuleSet-5.use[0]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./resources/assets/js/video/PrescriptionModal.vue?vue&type=script&lang=js ***!
  \*************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "./node_modules/@babel/runtime/regenerator/index.js");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! axios */ "./node_modules/axios/index.js");
/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_1__);

function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }
function _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err); } _next(undefined); }); }; }
function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it["return"] != null) it["return"](); } finally { if (didErr) throw err; } } }; }
function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }
function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({
  props: {
    activity_id: {
      type: Number
    },
    baseUrl: {
      type: String
    },
    code: {
      type: String
    },
    form_type: {
      type: String
    }
  },
  data: function data() {
    return {
      prescriptionSubmitted: false,
      generic_name: "",
      brandname: "",
      dosage: "",
      quantity: "",
      formulation: "",
      frequency: "",
      duration: "",
      prescribed_activity_id: "",
      prescriptions: []
    };
  },
  created: function created() {
    var prescriptionCode = this.code;
    this.fetchPrescriptions(prescriptionCode);
  },
  methods: {
    checkRequiredProperties: function checkRequiredProperties(obj) {
      if (!obj.generic_name) {
        Lobibox.alert("error", {
          msg: "Please input generic name"
        });
        return false;
      }
      // else if (!obj.brandname) {
      //     Lobibox.alert("error", {
      //         msg: "Please input brandname",
      //     });
      //     return false;
      // }
      else if (!obj.dosage) {
        Lobibox.alert("error", {
          msg: "Please input dosage"
        });
        return false;
      } else if (!obj.quantity) {
        Lobibox.alert("error", {
          msg: "Please input quantity"
        });
        return false;
      } else if (!obj.formulation) {
        Lobibox.alert("error", {
          msg: "Please input formulation"
        });
        return false;
      } else if (!obj.frequency) {
        Lobibox.alert("error", {
          msg: "Please input frequency"
        });
        return false;
      } else if (!obj.duration) {
        Lobibox.alert("error", {
          msg: "Please input duration"
        });
        return false;
      }
      return true;
    },
    savePrescriptions: function savePrescriptions() {
      var _this = this;
      if (!this.checkRequiredProperties(this)) {
        return;
      }
      var _iterator = _createForOfIteratorHelper(this.prescriptions),
        _step;
      try {
        for (_iterator.s(); !(_step = _iterator.n()).done;) {
          var prescription = _step.value;
          if (!this.checkRequiredProperties(prescription)) {
            return;
          }
        }
      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }
      var combinedPrescriptions = {
        singlePrescription: {
          generic_name: this.generic_name,
          brandname: this.brandname,
          dosage: this.dosage,
          quantity: this.quantity,
          formulation: this.formulation,
          frequency: this.frequency,
          duration: this.duration,
          code: this.code,
          activity_id: this.activity_id,
          form_type: this.form_type,
          prescribed_activity_id: this.prescribed_activity_id
        },
        multiplePrescriptions: this.prescriptions
      };
      Lobibox.alert("success", {
        msg: "Prescriptions saved successfully!"
      });
      $("#prescriptionModal").modal("hide");
      console.log('Combined Prescription Data:', combinedPrescriptions);
      axios__WEBPACK_IMPORTED_MODULE_1___default().post("".concat(this.baseUrl, "/api/video/prescriptions"), combinedPrescriptions).then(function (response) {
        console.log("Prescription submitted successfully", response.data);
        _this.prescriptions = []; // Clear prescription data
        _this.fetchPrescriptions(_this.code); // Fetch fresh data
      })["catch"](function (error) {
        console.error("Error submitting prescription", error);
      });
    },
    addEmptyPrescriptionBlock: function addEmptyPrescriptionBlock() {
      var emptyPrescription = {
        generic_name: "",
        brandname: "",
        dosage: "",
        quantity: "",
        formulation: "",
        frequency: "",
        duration: ""
      };
      this.prescriptions.push(emptyPrescription);
    },
    deletePrescription: function deletePrescription(index) {
      var _this2 = this;
      var prescriptionToDelete = this.prescriptions[index];
      if (prescriptionToDelete.id) {
        if (confirm("Are you sure you want to delete this prescription?")) {
          axios__WEBPACK_IMPORTED_MODULE_1___default()["delete"]("".concat(this.baseUrl, "/api/video/prescriptions/").concat(prescriptionToDelete.id)).then(function (response) {
            Lobibox.alert("success", {
              msg: "Prescription deleted successfully!"
            });
            console.log("Prescription deleted successfully", response.data);
            _this2.prescriptions.splice(index, 1);
          })["catch"](function (error) {
            console.error("Error deleting prescription", error);
          });
        }
      } else {
        this.prescriptions.splice(index, 1);
      }
    },
    fetchPrescriptions: function fetchPrescriptions(code) {
      var _this3 = this;
      return _asyncToGenerator( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark(function _callee() {
        var response, firstPrescription;
        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                _context.prev = 0;
                _context.next = 3;
                return axios__WEBPACK_IMPORTED_MODULE_1___default().get("".concat(_this3.baseUrl, "/api/video/prescriptions/").concat(code));
              case 3:
                response = _context.sent;
                _this3.prescriptions = response.data.prescriptions;
                firstPrescription = _this3.prescriptions[0];
                if (firstPrescription) {
                  _this3.generic_name = firstPrescription.generic_name || '';
                  _this3.brandname = firstPrescription.brandname || '';
                  _this3.dosage = firstPrescription.dosage || '';
                  _this3.quantity = firstPrescription.quantity || '';
                  _this3.formulation = firstPrescription.formulation || '';
                  _this3.frequency = firstPrescription.frequency || '';
                  _this3.duration = firstPrescription.duration || '';
                  _this3.prescribed_activity_id = firstPrescription.prescribed_activity_id || '';
                  _this3.prescriptions = _this3.prescriptions.slice(1);
                } else {
                  console.error('No prescriptions available.');
                }
                _context.next = 12;
                break;
              case 9:
                _context.prev = 9;
                _context.t0 = _context["catch"](0);
                console.error('Error fetching prescriptions:', _context.t0);
              case 12:
              case "end":
                return _context.stop();
            }
          }
        }, _callee, null, [[0, 9]]);
      }))();
    }
  }
});

/***/ }),

/***/ "./node_modules/babel-loader/lib/index.js??clonedRuleSet-5.use[0]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./resources/assets/js/video/VideoAppPregnant.vue?vue&type=script&lang=js":
/*!************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib/index.js??clonedRuleSet-5.use[0]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./resources/assets/js/video/VideoAppPregnant.vue?vue&type=script&lang=js ***!
  \************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "./node_modules/@babel/runtime/regenerator/index.js");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! axios */ "./node_modules/axios/index.js");
/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var vue__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! vue */ "./node_modules/vue/dist/vue.esm-bundler.js");
/* harmony import */ var agora_rtc_sdk_ng__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! agora-rtc-sdk-ng */ "./node_modules/agora-rtc-sdk-ng/AgoraRTC_N-production.js");
/* harmony import */ var agora_rtc_sdk_ng__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(agora_rtc_sdk_ng__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _PrescriptionModal_vue__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./PrescriptionModal.vue */ "./resources/assets/js/video/PrescriptionModal.vue");
/* harmony import */ var _LabRequestModal_vue__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./LabRequestModal.vue */ "./resources/assets/js/video/LabRequestModal.vue");

function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }
function _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err); } _next(undefined); }); }; }




 // I add this
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({
  name: 'RecoApp',
  components: {
    PrescriptionModal: _PrescriptionModal_vue__WEBPACK_IMPORTED_MODULE_4__["default"],
    LabRequestModal: _LabRequestModal_vue__WEBPACK_IMPORTED_MODULE_5__["default"]
  },
  data: function data() {
    return {
      ringingPhoneUrl: $("#broadcasting_url").val() + "/public/ringing.mp3",
      baseUrl: $("#broadcasting_url").val(),
      doctorUrl: $("#broadcasting_url").val() + "/resources/img/video/Doctor5.png",
      doctorUrl1: $("#broadcasting_url").val() + "/resources/img/video/Doctor6.png",
      declineUrl: $("#broadcasting_url").val() + "/resources/img/video/decline.png",
      videoCallUrl: $("#broadcasting_url").val() + "/resources/img/video/videocall.png",
      micUrl: $("#broadcasting_url").val() + "/resources/img/video/mic.png",
      dohLogoUrl: $("#broadcasting_url").val() + "/resources/img/video/doh-logo.png",
      tracking_id: this.getUrlVars()["id"],
      referral_code: this.getUrlVars()["code"],
      referring_md: this.getUrlVars()["referring_md"],
      activity_id: this.getUrlVars()["activity_id"],
      options: {
        // Pass your App ID here.
        appId: '0fc02f6b7ce04fbcb1991d71df2dbe0d',
        // Set the channel name.
        channel: this.getUrlVars()["code"],
        // Pass your temp token here.
        token: null,
        // Set the user ID.
        uid: 0
      },
      form: {
        pregnant: {
          notes_diagnoses: '',
          // Set this to the value of $form['pregnant']->notes_diagnoses
          other_diagnoses: '',
          // Set this to the value of $form['pregnant']->other_diagnoses
          other_reason_referral: '' // Set this to the value of $form['pregnant']->other_reason_referral
        }
      },
      patient_age: "",
      file_path: [],
      file_name: [],
      icd: [],
      reason: {},
      formBaby: {},
      videoStreaming: true,
      audioStreaming: true,
      channelParameters: {
        // A variable to hold a local audio track.
        localAudioTrack: null,
        // A variable to hold a local video track.
        localVideoTrack: null,
        // A variable to hold a remote audio track.
        remoteAudioTrack: null,
        // A variable to hold a remote video track.
        remoteVideoTrack: null,
        // A variable to hold the remote user id.s
        remoteUid: null
      },
      showDiv: false,
      prescription: "",
      prescriptionSubmitted: false,
      form_type: "pregnant"
    };
  },
  mounted: function mounted() {
    var _this = this;
    axios__WEBPACK_IMPORTED_MODULE_1___default().get("".concat(this.baseUrl, "/doctor/referral/video/pregnant/form/").concat(this.tracking_id)).then(function (res) {
      var response = res.data;
      console.log("testing");
      console.log(response);
      _this.form = response.form['pregnant'];
      _this.formBaby = response.form['baby'];
      if (response.age_type === "y") _this.patient_age = response.patient_age + " Years Old";else if (response.age_type === "m") _this.patient_age = response.patient_age + " Months Old";
      _this.icd = response.icd;
      console.log("testing\n" + _this.icd);
      _this.file_path = response.file_path;
      _this.file_name = response.file_name;
      _this.reason = response.reason;
      console.log(response);
    })["catch"](function (error) {
      console.log(error);
    });
    this.hideDivAfterTimeout();
    window.addEventListener('click', this.showDivAgain);
  },
  beforeUnmount: function beforeUnmount() {
    //this.clearTimeout();
    window.removeEventListener('click', this.showDivAgain);
  },
  props: ["user"],
  created: function created() {
    var self = this;
    $(document).ready(function () {
      console.log("ready!");
      self.ringingPhoneFunc();
    });
    this.startBasicCall();
  },
  methods: {
    startBasicCall: function startBasicCall() {
      var _this2 = this;
      return _asyncToGenerator( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark(function _callee2() {
        var agoraEngine, remotePlayerContainer, localPlayerContainer, self;
        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap(function _callee2$(_context2) {
          while (1) {
            switch (_context2.prev = _context2.next) {
              case 0:
                // Create an instance of the Agora Engine
                agoraEngine = agora_rtc_sdk_ng__WEBPACK_IMPORTED_MODULE_3___default().createClient({
                  mode: "rtc",
                  codec: "vp8"
                }); // Dynamically create a container in the form of a DIV element to play the remote video track.
                remotePlayerContainer = document.createElement("div"); // Dynamically create a container in the form of a DIV element to play the local video track.
                localPlayerContainer = document.createElement('div'); // Specify the ID of the DIV container. You can use the uid of the local user.
                localPlayerContainer.id = _this2.options.uid;
                // Listen for the "user-published" event to retrieve a AgoraRTCRemoteUser object.
                self = _this2;
                agoraEngine.on("user-published", /*#__PURE__*/function () {
                  var _ref = _asyncToGenerator( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark(function _callee(user, mediaType) {
                    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap(function _callee$(_context) {
                      while (1) {
                        switch (_context.prev = _context.next) {
                          case 0:
                            _context.next = 2;
                            return agoraEngine.subscribe(user, mediaType);
                          case 2:
                            console.log("subscribe success");
                            // Subscribe and play the remote video in the container If the remote user publishes a video track.
                            if (mediaType == "video") {
                              console.log("remote");
                              // Retrieve the remote video track.
                              self.channelParameters.remoteVideoTrack = user.videoTrack;
                              // Retrieve the remote audio track.
                              self.channelParameters.remoteAudioTrack = user.audioTrack;
                              // Save the remote user id for reuse.
                              self.channelParameters.remoteUid = user.uid.toString();
                              // Specify the ID of the DIV container. You can use the uid of the remote user.
                              remotePlayerContainer.id = user.uid.toString();
                              self.channelParameters.remoteUid = user.uid.toString();
                              /*remotePlayerContainer.textContent = "Remote user " + user.uid.toString();*/
                              // Append the remote container to the page body.
                              self.$refs.ringingPhone.pause();
                              document.body.append(remotePlayerContainer);
                              $(".remotePlayerDiv").html(remotePlayerContainer);
                              $(".remotePlayerDiv").removeAttr("style").css("display", "unset");
                              $(remotePlayerContainer).addClass("remotePlayerLayer");
                              // Play the remote video track.
                              self.channelParameters.remoteVideoTrack.play(remotePlayerContainer);
                            }
                            // Subscribe and play the remote audio track If the remote user publishes the audio track only.
                            if (mediaType == "audio") {
                              // Get the RemoteAudioTrack object in the AgoraRTCRemoteUser object.
                              self.channelParameters.remoteAudioTrack = user.audioTrack;
                              // Play the remote audio track. No need to pass any DOM element.
                              self.channelParameters.remoteAudioTrack.play();
                            }
                            // Listen for the "user-unpublished" event.
                            agoraEngine.on("user-unpublished", function (user) {
                              console.log(user.uid + "has left the channel");
                            });
                          case 6:
                          case "end":
                            return _context.stop();
                        }
                      }
                    }, _callee);
                  }));
                  return function (_x, _x2) {
                    return _ref.apply(this, arguments);
                  };
                }());
                window.onload = function () {
                  self.joinVideo(agoraEngine, self.channelParameters, localPlayerContainer, self);
                };
              case 7:
              case "end":
                return _context2.stop();
            }
          }
        }, _callee2);
      }))();
    },
    getUrlVars: function getUrlVars() {
      var vars = [],
        hash;
      var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
      for (var i = 0; i < hashes.length; i++) {
        hash = hashes[i].split('=');
        vars.push(hash[0]);
        vars[hash[0]] = hash[1];
      }
      return vars;
    },
    joinVideo: function joinVideo(agoraEngine, channelParameters, localPlayerContainer, self) {
      return _asyncToGenerator( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark(function _callee3() {
        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap(function _callee3$(_context3) {
          while (1) {
            switch (_context3.prev = _context3.next) {
              case 0:
                console.log("local");
                // Join a channel.
                _context3.next = 3;
                return agoraEngine.join(self.options.appId, self.options.channel, self.options.token, self.options.uid);
              case 3:
                _context3.next = 5;
                return agora_rtc_sdk_ng__WEBPACK_IMPORTED_MODULE_3___default().createMicrophoneAudioTrack();
              case 5:
                channelParameters.localAudioTrack = _context3.sent;
                _context3.next = 8;
                return agora_rtc_sdk_ng__WEBPACK_IMPORTED_MODULE_3___default().createCameraVideoTrack();
              case 8:
                channelParameters.localVideoTrack = _context3.sent;
                // Append the local video container to the page body.
                document.body.append(localPlayerContainer);
                $(".localPlayerDiv").html(localPlayerContainer);
                $(localPlayerContainer).addClass("localPlayerLayer");
                // Publish the local audio and video tracks in the channel.
                _context3.next = 14;
                return agoraEngine.publish([channelParameters.localAudioTrack, channelParameters.localVideoTrack]);
              case 14:
                // Play the local video track.
                channelParameters.localVideoTrack.play(localPlayerContainer);
                console.log("publish success!");
              case 16:
              case "end":
                return _context3.stop();
            }
          }
        }, _callee3);
      }))();
    },
    leaveChannel: function leaveChannel() {
      if (confirm("Are you sure you want to leave this channel?")) {
        window.top.close();
      }
    },
    videoStreamingOnAndOff: function videoStreamingOnAndOff() {
      this.videoStreaming = this.videoStreaming ? false : true;
      this.channelParameters.localVideoTrack.setEnabled(this.videoStreaming);
    },
    audioStreamingOnAnddOff: function audioStreamingOnAnddOff() {
      this.audioStreaming = this.audioStreaming ? false : true;
      this.channelParameters.localAudioTrack.setEnabled(this.audioStreaming);
    },
    hideDivAfterTimeout: function hideDivAfterTimeout() {
      var _this3 = this;
      setTimeout(function () {
        $(".iconCall").removeClass("fade-in");
        _this3.showDiv = false;
      }, 10000);
    },
    showDivAgain: function showDivAgain() {
      this.showDiv = true;
      this.hideDivAfterTimeout();
    },
    clearTimeout: function (_clearTimeout) {
      function clearTimeout() {
        return _clearTimeout.apply(this, arguments);
      }
      clearTimeout.toString = function () {
        return _clearTimeout.toString();
      };
      return clearTimeout;
    }(function () {
      // Clear the timeout if the component is about to be unmounted
      // to prevent memory leaks
      clearTimeout(this.timeoutId);
    }),
    ringingPhoneFunc: function ringingPhoneFunc() {
      var _this4 = this;
      return _asyncToGenerator( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark(function _callee4() {
        var self;
        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap(function _callee4$(_context4) {
          while (1) {
            switch (_context4.prev = _context4.next) {
              case 0:
                _context4.next = 2;
                return _this4.$refs.ringingPhone.play();
              case 2:
                self = _this4;
                setTimeout(function () {
                  console.log("pause");
                  self.$refs.ringingPhone.pause();
                }, 60000);
              case 4:
              case "end":
                return _context4.stop();
            }
          }
        }, _callee4);
      }))();
    },
    submitPrescription: function submitPrescription() {
      var _this5 = this;
      if (this.prescription) {
        var updatePrescription = {
          code: this.referral_code,
          prescription: this.prescription,
          form_type: this.form_type
        };
        axios__WEBPACK_IMPORTED_MODULE_1___default().post("".concat(this.baseUrl, "/api/video/prescription/update"), updatePrescription).then(function (response) {
          console.log(response);
          if (response.data === 'success') {
            _this5.prescriptionSubmitted = true;
            Lobibox.alert("success", {
              msg: "Successfully submitted prescription!"
            });
          } else {
            Lobibox.alert("error", {
              msg: "Error in server!"
            });
          }
        });
      } else {
        Lobibox.alert("error", {
          msg: "No prescription inputted!"
        });
      }
    },
    generatePrescription: function generatePrescription() {
      var _this6 = this;
      var getPrescription = {
        code: this.referral_code,
        form_type: this.form_type,
        activity_id: this.activity_id
      };
      axios__WEBPACK_IMPORTED_MODULE_1___default().post("".concat(this.baseUrl, "/api/video/prescription/check"), getPrescription).then(function (response) {
        console.log(response);
        if (response.data.status === 'success') {
          window.open("".concat(_this6.baseUrl, "/doctor/print/prescription/").concat(_this6.tracking_id, "/").concat(response.data.prescriptions[0].prescribed_activity_id), '_blank');
        } else {
          Lobibox.alert("error", {
            msg: "No added prescription!"
          });
        }
      })["catch"](function (error) {
        console.log(error);
      });
    },
    endorseUpward: function endorseUpward() {
      var self = this;
      Lobibox.confirm({
        msg: "Do you want to endorse this patient for an upward level of referral?",
        callback: function callback($this, type, ev) {
          if (type == 'yes') {
            var endorseUpward = {
              code: self.referral_code,
              form_type: self.form_type
            };
            axios__WEBPACK_IMPORTED_MODULE_1___default().post("".concat(self.baseUrl, "/api/video/upward"), endorseUpward).then(function (response) {
              console.log(response.data);
              var successData = response.data.trim();
              if (successData === 'success') {
                Lobibox.alert("success", {
                  msg: "Successfully endorse the patient for upward referral!"
                });
              } else {
                Lobibox.alert("error", {
                  msg: "Error in server!"
                });
              }
            });
          }
        }
      });
    }
  }
});

/***/ }),

/***/ "./node_modules/babel-loader/lib/index.js??clonedRuleSet-5.use[0]!./node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[2]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./resources/assets/js/video/LabRequestModal.vue?vue&type=template&id=0847a395&scoped=true":
/*!***************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib/index.js??clonedRuleSet-5.use[0]!./node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[2]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./resources/assets/js/video/LabRequestModal.vue?vue&type=template&id=0847a395&scoped=true ***!
  \***************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "render": () => (/* binding */ render)
/* harmony export */ });
/* harmony import */ var vue__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! vue */ "./node_modules/vue/dist/vue.esm-bundler.js");

var _withScopeId = function _withScopeId(n) {
  return (0,vue__WEBPACK_IMPORTED_MODULE_0__.pushScopeId)("data-v-0847a395"), n = n(), (0,vue__WEBPACK_IMPORTED_MODULE_0__.popScopeId)(), n;
};
var _hoisted_1 = {
  "class": "modal fade",
  id: "labRequestModal",
  "data-backdrop": "static",
  "data-keyboard": "false",
  "aria-labelledby": "prescriptionModalLabel",
  "aria-hidden": "true"
};
var _hoisted_2 = {
  "class": "modal-dialog modal-dialog-centered modal-lg"
};
var _hoisted_3 = {
  "class": "modal-content"
};
var _hoisted_4 = /*#__PURE__*/(0,vue__WEBPACK_IMPORTED_MODULE_0__.createStaticVNode)("<div class=\"modal-header\" data-v-0847a395><h5 class=\"modal-title fs-5\" id=\"prescriptionModalLabel\" data-v-0847a395><i class=\"bi bi-prescription2\" data-v-0847a395></i> Lab Request</h5><button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\" data-v-0847a395><span aria-hidden=\"true\" data-v-0847a395>×</span></button></div>", 1);
var _hoisted_5 = {
  "class": "modal-body"
};
var _hoisted_6 = {
  "class": "input-group mb-3"
};
var _hoisted_7 = {
  id: "modal-body-scroll"
};
var _hoisted_8 = ["value"];
var _hoisted_9 = {
  "class": "form-check-label",
  "for": "checkbox1"
};
var _hoisted_10 = {
  "class": "modal-footer"
};
var _hoisted_11 = /*#__PURE__*/_withScopeId(function () {
  return /*#__PURE__*/(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("i", {
    "class": "bi bi-save"
  }, null, -1 /* HOISTED */);
});
function render(_ctx, _cache, $props, $setup, $data, $options) {
  return (0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementBlock)("div", _hoisted_1, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("div", _hoisted_2, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("div", _hoisted_3, [_hoisted_4, (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("div", _hoisted_5, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("div", _hoisted_6, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.withDirectives)((0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("input", {
    type: "text",
    "class": "form-control",
    placeholder: "Search Laboratory...",
    "aria-label": "Search...",
    "aria-describedby": "searchButton",
    "onUpdate:modelValue": _cache[0] || (_cache[0] = function ($event) {
      return $data.searchTerm = $event;
    }),
    onKeyup: _cache[1] || (_cache[1] = function () {
      return $options.searchLaboratories && $options.searchLaboratories.apply($options, arguments);
    })
  }, null, 544 /* HYDRATE_EVENTS, NEED_PATCH */), [[vue__WEBPACK_IMPORTED_MODULE_0__.vModelText, $data.searchTerm]]), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createCommentVNode)(" <button class=\"btn btn-secondary\" type=\"button\" id=\"laboratorySearch\" @click=\"searchLaboratories\">Search</button> ")]), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("div", _hoisted_7, [((0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(true), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementBlock)(vue__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, (0,vue__WEBPACK_IMPORTED_MODULE_0__.renderList)($data.laboratories, function (laboratoryDescription, laboratoryCode) {
    return (0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementBlock)("div", {
      "class": "form-check laboratory-check",
      key: laboratoryCode
    }, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.withDirectives)((0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("input", {
      "class": "form-check-input",
      type: "checkbox",
      "onUpdate:modelValue": _cache[2] || (_cache[2] = function ($event) {
        return $data.checkedLaboratories = $event;
      }),
      value: laboratoryCode
    }, null, 8 /* PROPS */, _hoisted_8), [[vue__WEBPACK_IMPORTED_MODULE_0__.vModelCheckbox, $data.checkedLaboratories]]), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("label", _hoisted_9, (0,vue__WEBPACK_IMPORTED_MODULE_0__.toDisplayString)("".concat(laboratoryCode, " - ").concat(laboratoryDescription)), 1 /* TEXT */)]);
  }), 128 /* KEYED_FRAGMENT */))])]), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("div", _hoisted_10, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("button", {
    "class": "btn btn-success btn-sm",
    type: "button",
    onClick: _cache[3] || (_cache[3] = function () {
      return $options.submitForm && $options.submitForm.apply($options, arguments);
    })
  }, [_hoisted_11, (0,vue__WEBPACK_IMPORTED_MODULE_0__.createTextVNode)(" Submit")])])])])]);
}

/***/ }),

/***/ "./node_modules/babel-loader/lib/index.js??clonedRuleSet-5.use[0]!./node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[2]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./resources/assets/js/video/PrescriptionModal.vue?vue&type=template&id=c2b74386&scoped=true":
/*!*****************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib/index.js??clonedRuleSet-5.use[0]!./node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[2]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./resources/assets/js/video/PrescriptionModal.vue?vue&type=template&id=c2b74386&scoped=true ***!
  \*****************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "render": () => (/* binding */ render)
/* harmony export */ });
/* harmony import */ var vue__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! vue */ "./node_modules/vue/dist/vue.esm-bundler.js");

var _withScopeId = function _withScopeId(n) {
  return (0,vue__WEBPACK_IMPORTED_MODULE_0__.pushScopeId)("data-v-c2b74386"), n = n(), (0,vue__WEBPACK_IMPORTED_MODULE_0__.popScopeId)(), n;
};
var _hoisted_1 = {
  "class": "modal fade",
  id: "prescriptionModal",
  "data-backdrop": "static",
  "data-keyboard": "false",
  "aria-labelledby": "prescriptionModalLabel",
  "aria-hidden": "true"
};
var _hoisted_2 = {
  "class": "modal-dialog modal-dialog-centered"
};
var _hoisted_3 = {
  "class": "modal-content"
};
var _hoisted_4 = /*#__PURE__*/(0,vue__WEBPACK_IMPORTED_MODULE_0__.createStaticVNode)("<div class=\"modal-header\" data-v-c2b74386><h5 class=\"modal-title fs-5\" id=\"prescriptionModalLabel\" data-v-c2b74386><i class=\"bi bi-prescription\" data-v-c2b74386></i> Prescription</h5><button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\" data-v-c2b74386><span aria-hidden=\"true\" data-v-c2b74386>×</span></button></div>", 1);
var _hoisted_5 = {
  "class": "modal-body"
};
var _hoisted_6 = /*#__PURE__*/(0,vue__WEBPACK_IMPORTED_MODULE_0__.createStaticVNode)("<div class=\"container\" data-v-c2b74386>Ex. <div class=\"row row-circle\" data-v-c2b74386><div class=\"circle1\" data-v-c2b74386>1</div><div class=\"circle2\" data-v-c2b74386>2</div><div class=\"circle3\" data-v-c2b74386>3</div><div class=\"circle4\" data-v-c2b74386>4</div><div class=\"circle5\" data-v-c2b74386>5</div></div><div class=\"row row-presLabel\" data-v-c2b74386><div class=\"col col-presLabel\" data-v-c2b74386><div class=\"col-Label\" data-v-c2b74386><span class=\"underline\" data-v-c2b74386>Paracetamol</span><span class=\"underline\" data-v-c2b74386>(Biogesic)</span><span class=\"underline\" data-v-c2b74386>500mg</span><span class=\"underline\" data-v-c2b74386>#30</span><span class=\"underline\" data-v-c2b74386>Tablet</span></div></div></div><div class=\"row row-circle\" data-v-c2b74386><div class=\"circle6\" data-v-c2b74386>6</div><div class=\"circle7\" data-v-c2b74386>7</div></div><div class=\"row row-presLabel\" data-v-c2b74386><div class=\"col col-presLabel\" data-v-c2b74386><div class=\"col-Label\" data-v-c2b74386>Sig: <span class=\"underline\" data-v-c2b74386>1 Tab</span> for <span class=\"underline\" data-v-c2b74386>Every 4 hours</span></div></div></div></div>", 1);
var _hoisted_7 = {
  style: {
    "border": "solid 1px lightgray",
    "margin-top": "10px",
    "padding": "5px"
  }
};
var _hoisted_8 = {
  "class": "row prescription"
};
var _hoisted_9 = {
  "class": "col"
};
var _hoisted_10 = /*#__PURE__*/_withScopeId(function () {
  return /*#__PURE__*/(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("label", {
    "for": "generic_name"
  }, [/*#__PURE__*/(0,vue__WEBPACK_IMPORTED_MODULE_0__.createTextVNode)("1.) Generic Name:"), /*#__PURE__*/(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("span", {
    style: {
      "color": "red"
    }
  }, "*")], -1 /* HOISTED */);
});
var _hoisted_11 = {
  "class": "row prescription"
};
var _hoisted_12 = {
  "class": "col"
};
var _hoisted_13 = /*#__PURE__*/_withScopeId(function () {
  return /*#__PURE__*/(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("label", {
    "for": "brandname"
  }, "2.) Brand Name: (Optional)", -1 /* HOISTED */);
});
var _hoisted_14 = {
  "class": "col"
};
var _hoisted_15 = /*#__PURE__*/_withScopeId(function () {
  return /*#__PURE__*/(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("label", {
    "for": "dosage"
  }, [/*#__PURE__*/(0,vue__WEBPACK_IMPORTED_MODULE_0__.createTextVNode)("3.) Dosage:"), /*#__PURE__*/(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("span", {
    style: {
      "color": "red"
    }
  }, "*")], -1 /* HOISTED */);
});
var _hoisted_16 = {
  "class": "row prescription"
};
var _hoisted_17 = {
  "class": "col"
};
var _hoisted_18 = /*#__PURE__*/_withScopeId(function () {
  return /*#__PURE__*/(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("label", {
    "for": "quantity"
  }, [/*#__PURE__*/(0,vue__WEBPACK_IMPORTED_MODULE_0__.createTextVNode)("4.) Quantity:"), /*#__PURE__*/(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("span", {
    style: {
      "color": "red"
    }
  }, "*")], -1 /* HOISTED */);
});
var _hoisted_19 = {
  "class": "col"
};
var _hoisted_20 = /*#__PURE__*/_withScopeId(function () {
  return /*#__PURE__*/(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("label", {
    "for": "formulation"
  }, [/*#__PURE__*/(0,vue__WEBPACK_IMPORTED_MODULE_0__.createTextVNode)("5.) Formulation:"), /*#__PURE__*/(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("span", {
    style: {
      "color": "red"
    }
  }, "*")], -1 /* HOISTED */);
});
var _hoisted_21 = {
  "class": "row prescription"
};
var _hoisted_22 = {
  "class": "col"
};
var _hoisted_23 = /*#__PURE__*/_withScopeId(function () {
  return /*#__PURE__*/(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("label", {
    "for": "frequency"
  }, [/*#__PURE__*/(0,vue__WEBPACK_IMPORTED_MODULE_0__.createTextVNode)("6.) Frequency:"), /*#__PURE__*/(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("span", {
    style: {
      "color": "red"
    }
  }, "*")], -1 /* HOISTED */);
});
var _hoisted_24 = {
  "class": "col"
};
var _hoisted_25 = /*#__PURE__*/_withScopeId(function () {
  return /*#__PURE__*/(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("label", {
    "for": "duration"
  }, [/*#__PURE__*/(0,vue__WEBPACK_IMPORTED_MODULE_0__.createTextVNode)("7.) Duration:"), /*#__PURE__*/(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("span", {
    style: {
      "color": "red"
    }
  }, "*")], -1 /* HOISTED */);
});
var _hoisted_26 = {
  "class": "row"
};
var _hoisted_27 = {
  "class": "col"
};
var _hoisted_28 = ["onClick"];
var _hoisted_29 = /*#__PURE__*/_withScopeId(function () {
  return /*#__PURE__*/(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("i", {
    "class": "bi bi-trash"
  }, null, -1 /* HOISTED */);
});
var _hoisted_30 = [_hoisted_29];
var _hoisted_31 = {
  "class": "row prescription"
};
var _hoisted_32 = {
  "class": "col"
};
var _hoisted_33 = /*#__PURE__*/_withScopeId(function () {
  return /*#__PURE__*/(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("label", {
    "for": "generic_name"
  }, [/*#__PURE__*/(0,vue__WEBPACK_IMPORTED_MODULE_0__.createTextVNode)("1.) Generic Name:"), /*#__PURE__*/(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("span", {
    style: {
      "color": "red"
    }
  }, "*")], -1 /* HOISTED */);
});
var _hoisted_34 = ["onUpdate:modelValue"];
var _hoisted_35 = {
  "class": "row prescription"
};
var _hoisted_36 = {
  "class": "col"
};
var _hoisted_37 = /*#__PURE__*/_withScopeId(function () {
  return /*#__PURE__*/(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("label", {
    "for": "brandname"
  }, "2.) Brand Name: (Optional)", -1 /* HOISTED */);
});
var _hoisted_38 = ["onUpdate:modelValue"];
var _hoisted_39 = {
  "class": "col"
};
var _hoisted_40 = /*#__PURE__*/_withScopeId(function () {
  return /*#__PURE__*/(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("label", {
    "for": "dosage"
  }, [/*#__PURE__*/(0,vue__WEBPACK_IMPORTED_MODULE_0__.createTextVNode)("3.) Dosage:"), /*#__PURE__*/(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("span", {
    style: {
      "color": "red"
    }
  }, "*")], -1 /* HOISTED */);
});
var _hoisted_41 = ["onUpdate:modelValue"];
var _hoisted_42 = {
  "class": "row prescription"
};
var _hoisted_43 = {
  "class": "col"
};
var _hoisted_44 = /*#__PURE__*/_withScopeId(function () {
  return /*#__PURE__*/(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("label", {
    "for": "quantity"
  }, [/*#__PURE__*/(0,vue__WEBPACK_IMPORTED_MODULE_0__.createTextVNode)("4.) Quantity:"), /*#__PURE__*/(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("span", {
    style: {
      "color": "red"
    }
  }, "*")], -1 /* HOISTED */);
});
var _hoisted_45 = ["onUpdate:modelValue"];
var _hoisted_46 = {
  "class": "col"
};
var _hoisted_47 = /*#__PURE__*/_withScopeId(function () {
  return /*#__PURE__*/(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("label", {
    "for": "formulation"
  }, [/*#__PURE__*/(0,vue__WEBPACK_IMPORTED_MODULE_0__.createTextVNode)("5.) Formulation:"), /*#__PURE__*/(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("span", {
    style: {
      "color": "red"
    }
  }, "*")], -1 /* HOISTED */);
});
var _hoisted_48 = ["onUpdate:modelValue"];
var _hoisted_49 = {
  "class": "row prescription"
};
var _hoisted_50 = {
  "class": "col"
};
var _hoisted_51 = /*#__PURE__*/_withScopeId(function () {
  return /*#__PURE__*/(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("label", {
    "for": "frequency"
  }, [/*#__PURE__*/(0,vue__WEBPACK_IMPORTED_MODULE_0__.createTextVNode)("6.) Frequency:"), /*#__PURE__*/(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("span", {
    style: {
      "color": "red"
    }
  }, "*")], -1 /* HOISTED */);
});
var _hoisted_52 = ["onUpdate:modelValue"];
var _hoisted_53 = {
  "class": "col"
};
var _hoisted_54 = /*#__PURE__*/_withScopeId(function () {
  return /*#__PURE__*/(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("label", {
    "for": "duration"
  }, [/*#__PURE__*/(0,vue__WEBPACK_IMPORTED_MODULE_0__.createTextVNode)("7.) Duration:"), /*#__PURE__*/(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("span", {
    style: {
      "color": "red"
    }
  }, "*")], -1 /* HOISTED */);
});
var _hoisted_55 = ["onUpdate:modelValue"];
var _hoisted_56 = {
  "class": "modal-footer"
};
var _hoisted_57 = /*#__PURE__*/_withScopeId(function () {
  return /*#__PURE__*/(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("button", {
    "class": "btn btn-secondary btn-sm",
    type: "button",
    "data-dismiss": "modal"
  }, "Close", -1 /* HOISTED */);
});
var _hoisted_58 = /*#__PURE__*/_withScopeId(function () {
  return /*#__PURE__*/(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("i", {
    "class": "bi bi-prescription2"
  }, null, -1 /* HOISTED */);
});
var _hoisted_59 = /*#__PURE__*/_withScopeId(function () {
  return /*#__PURE__*/(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("i", {
    "class": "bi bi-prescription"
  }, null, -1 /* HOISTED */);
});
var _hoisted_60 = /*#__PURE__*/_withScopeId(function () {
  return /*#__PURE__*/(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("i", {
    "class": "bi bi-prescription"
  }, null, -1 /* HOISTED */);
});
function render(_ctx, _cache, $props, $setup, $data, $options) {
  return (0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementBlock)("div", _hoisted_1, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("div", _hoisted_2, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("div", _hoisted_3, [_hoisted_4, (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("div", _hoisted_5, [_hoisted_6, (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("div", _hoisted_7, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("div", _hoisted_8, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("div", _hoisted_9, [_hoisted_10, (0,vue__WEBPACK_IMPORTED_MODULE_0__.withDirectives)((0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("input", {
    type: "text",
    "onUpdate:modelValue": _cache[0] || (_cache[0] = function ($event) {
      return $data.generic_name = $event;
    }),
    "class": "form-control form-control-sm"
  }, null, 512 /* NEED_PATCH */), [[vue__WEBPACK_IMPORTED_MODULE_0__.vModelText, $data.generic_name]])])]), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("div", _hoisted_11, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("div", _hoisted_12, [_hoisted_13, (0,vue__WEBPACK_IMPORTED_MODULE_0__.withDirectives)((0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("input", {
    type: "text",
    "onUpdate:modelValue": _cache[1] || (_cache[1] = function ($event) {
      return $data.brandname = $event;
    }),
    "class": "form-control form-control-sm"
  }, null, 512 /* NEED_PATCH */), [[vue__WEBPACK_IMPORTED_MODULE_0__.vModelText, $data.brandname]])]), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("div", _hoisted_14, [_hoisted_15, (0,vue__WEBPACK_IMPORTED_MODULE_0__.withDirectives)((0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("input", {
    type: "text",
    "onUpdate:modelValue": _cache[2] || (_cache[2] = function ($event) {
      return $data.dosage = $event;
    }),
    "class": "form-control form-control-sm"
  }, null, 512 /* NEED_PATCH */), [[vue__WEBPACK_IMPORTED_MODULE_0__.vModelText, $data.dosage]])])]), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("div", _hoisted_16, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("div", _hoisted_17, [_hoisted_18, (0,vue__WEBPACK_IMPORTED_MODULE_0__.withDirectives)((0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("input", {
    type: "number",
    "onUpdate:modelValue": _cache[3] || (_cache[3] = function ($event) {
      return $data.quantity = $event;
    }),
    "class": "form-control form-control-sm"
  }, null, 512 /* NEED_PATCH */), [[vue__WEBPACK_IMPORTED_MODULE_0__.vModelText, $data.quantity]])]), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("div", _hoisted_19, [_hoisted_20, (0,vue__WEBPACK_IMPORTED_MODULE_0__.withDirectives)((0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("input", {
    type: "text",
    "onUpdate:modelValue": _cache[4] || (_cache[4] = function ($event) {
      return $data.formulation = $event;
    }),
    "class": "form-control form-control-sm"
  }, null, 512 /* NEED_PATCH */), [[vue__WEBPACK_IMPORTED_MODULE_0__.vModelText, $data.formulation]])])]), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("div", _hoisted_21, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("div", _hoisted_22, [_hoisted_23, (0,vue__WEBPACK_IMPORTED_MODULE_0__.withDirectives)((0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("input", {
    type: "text",
    "onUpdate:modelValue": _cache[5] || (_cache[5] = function ($event) {
      return $data.frequency = $event;
    }),
    "class": "form-control form-control-sm"
  }, null, 512 /* NEED_PATCH */), [[vue__WEBPACK_IMPORTED_MODULE_0__.vModelText, $data.frequency]])]), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("div", _hoisted_24, [_hoisted_25, (0,vue__WEBPACK_IMPORTED_MODULE_0__.withDirectives)((0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("input", {
    type: "text",
    "onUpdate:modelValue": _cache[6] || (_cache[6] = function ($event) {
      return $data.duration = $event;
    }),
    "class": "form-control form-control-sm"
  }, null, 512 /* NEED_PATCH */), [[vue__WEBPACK_IMPORTED_MODULE_0__.vModelText, $data.duration]])])])]), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createCommentVNode)("FOR DUPLICATE PRESCRIPTION"), ((0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(true), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementBlock)(vue__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, (0,vue__WEBPACK_IMPORTED_MODULE_0__.renderList)($data.prescriptions, function (prescription, index) {
    return (0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementBlock)("div", {
      key: index,
      style: {
        "border": "solid 1px slategray",
        "margin-top": "10px",
        "padding": "5px"
      }
    }, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("div", _hoisted_26, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("div", _hoisted_27, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("button", {
      "class": "btn btn-danger btn-sm",
      onClick: function onClick($event) {
        return $options.deletePrescription(index);
      }
    }, _hoisted_30, 8 /* PROPS */, _hoisted_28)])]), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("div", _hoisted_31, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("div", _hoisted_32, [_hoisted_33, (0,vue__WEBPACK_IMPORTED_MODULE_0__.withDirectives)((0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("input", {
      type: "text",
      "onUpdate:modelValue": function onUpdateModelValue($event) {
        return prescription.generic_name = $event;
      },
      "class": "form-control form-control-sm"
    }, null, 8 /* PROPS */, _hoisted_34), [[vue__WEBPACK_IMPORTED_MODULE_0__.vModelText, prescription.generic_name]])])]), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("div", _hoisted_35, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("div", _hoisted_36, [_hoisted_37, (0,vue__WEBPACK_IMPORTED_MODULE_0__.withDirectives)((0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("input", {
      type: "text",
      "onUpdate:modelValue": function onUpdateModelValue($event) {
        return prescription.brandname = $event;
      },
      "class": "form-control form-control-sm"
    }, null, 8 /* PROPS */, _hoisted_38), [[vue__WEBPACK_IMPORTED_MODULE_0__.vModelText, prescription.brandname]])]), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("div", _hoisted_39, [_hoisted_40, (0,vue__WEBPACK_IMPORTED_MODULE_0__.withDirectives)((0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("input", {
      type: "text",
      "onUpdate:modelValue": function onUpdateModelValue($event) {
        return prescription.dosage = $event;
      },
      "class": "form-control form-control-sm"
    }, null, 8 /* PROPS */, _hoisted_41), [[vue__WEBPACK_IMPORTED_MODULE_0__.vModelText, prescription.dosage]])])]), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("div", _hoisted_42, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("div", _hoisted_43, [_hoisted_44, (0,vue__WEBPACK_IMPORTED_MODULE_0__.withDirectives)((0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("input", {
      type: "number",
      "onUpdate:modelValue": function onUpdateModelValue($event) {
        return prescription.quantity = $event;
      },
      "class": "form-control form-control-sm"
    }, null, 8 /* PROPS */, _hoisted_45), [[vue__WEBPACK_IMPORTED_MODULE_0__.vModelText, prescription.quantity]])]), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("div", _hoisted_46, [_hoisted_47, (0,vue__WEBPACK_IMPORTED_MODULE_0__.withDirectives)((0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("input", {
      type: "text",
      "onUpdate:modelValue": function onUpdateModelValue($event) {
        return prescription.formulation = $event;
      },
      "class": "form-control form-control-sm"
    }, null, 8 /* PROPS */, _hoisted_48), [[vue__WEBPACK_IMPORTED_MODULE_0__.vModelText, prescription.formulation]])])]), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("div", _hoisted_49, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("div", _hoisted_50, [_hoisted_51, (0,vue__WEBPACK_IMPORTED_MODULE_0__.withDirectives)((0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("input", {
      type: "text",
      "onUpdate:modelValue": function onUpdateModelValue($event) {
        return prescription.frequency = $event;
      },
      "class": "form-control form-control-sm"
    }, null, 8 /* PROPS */, _hoisted_52), [[vue__WEBPACK_IMPORTED_MODULE_0__.vModelText, prescription.frequency]])]), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("div", _hoisted_53, [_hoisted_54, (0,vue__WEBPACK_IMPORTED_MODULE_0__.withDirectives)((0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("input", {
      type: "text",
      "onUpdate:modelValue": function onUpdateModelValue($event) {
        return prescription.duration = $event;
      },
      "class": "form-control form-control-sm"
    }, null, 8 /* PROPS */, _hoisted_55), [[vue__WEBPACK_IMPORTED_MODULE_0__.vModelText, prescription.duration]])])])]);
  }), 128 /* KEYED_FRAGMENT */))]), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("div", _hoisted_56, [_hoisted_57, (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("button", {
    "class": "btn btn-primary btn-sm",
    type: "button",
    onClick: _cache[7] || (_cache[7] = function ($event) {
      return $options.addEmptyPrescriptionBlock();
    })
  }, [_hoisted_58, (0,vue__WEBPACK_IMPORTED_MODULE_0__.createTextVNode)(" Add Prescription")]), $data.prescriptionSubmitted ? ((0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementBlock)("button", {
    key: 0,
    "class": "btn btn-success btn-sm",
    type: "button",
    onClick: _cache[8] || (_cache[8] = function ($event) {
      return $options.savePrescriptions();
    })
  }, [_hoisted_59, (0,vue__WEBPACK_IMPORTED_MODULE_0__.createTextVNode)(" Update Prescription")])) : ((0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementBlock)("button", {
    key: 1,
    "class": "btn btn-success btn-sm",
    type: "button",
    onClick: _cache[9] || (_cache[9] = function ($event) {
      return $options.savePrescriptions();
    })
  }, [_hoisted_60, (0,vue__WEBPACK_IMPORTED_MODULE_0__.createTextVNode)(" Submit Prescription")]))])])])]);
}

/***/ }),

/***/ "./node_modules/babel-loader/lib/index.js??clonedRuleSet-5.use[0]!./node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[2]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./resources/assets/js/video/VideoAppPregnant.vue?vue&type=template&id=1ef045ee":
/*!****************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib/index.js??clonedRuleSet-5.use[0]!./node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[2]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./resources/assets/js/video/VideoAppPregnant.vue?vue&type=template&id=1ef045ee ***!
  \****************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "render": () => (/* binding */ render)
/* harmony export */ });
/* harmony import */ var vue__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! vue */ "./node_modules/vue/dist/vue.esm-bundler.js");

var _hoisted_1 = ["src"];
var _hoisted_2 = {
  "class": "container-fluid"
};
var _hoisted_3 = {
  "class": "row"
};
var _hoisted_4 = {
  "class": "col-lg-8"
};
var _hoisted_5 = {
  "class": "mainPic"
};
var _hoisted_6 = {
  "class": "remotePlayerDiv"
};
var _hoisted_7 = /*#__PURE__*/(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("div", {
  id: "calling"
}, [/*#__PURE__*/(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("h3", null, "Calling...")], -1 /* HOISTED */);
var _hoisted_8 = ["src"];
var _hoisted_9 = {
  key: 0,
  "class": "iconCall position-absolute fade-in"
};
var _hoisted_10 = /*#__PURE__*/(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("i", {
  "class": "bi-mic-fill"
}, null, -1 /* HOISTED */);
var _hoisted_11 = [_hoisted_10];
var _hoisted_12 = /*#__PURE__*/(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("i", {
  "class": "bi-camera-video-fill"
}, null, -1 /* HOISTED */);
var _hoisted_13 = [_hoisted_12];
var _hoisted_14 = /*#__PURE__*/(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("i", {
  "class": "bi-telephone-x-fill"
}, null, -1 /* HOISTED */);
var _hoisted_15 = [_hoisted_14];
var _hoisted_16 = /*#__PURE__*/(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("i", {
  "class": "bi-hospital"
}, null, -1 /* HOISTED */);
var _hoisted_17 = [_hoisted_16];
var _hoisted_18 = {
  key: 1,
  "class": "btn btn-success btn-lg prescription-button",
  "data-toggle": "modal",
  "data-target": "#prescriptionModal",
  type: "button"
};
var _hoisted_19 = /*#__PURE__*/(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("i", {
  "class": "bi bi-prescription"
}, null, -1 /* HOISTED */);
var _hoisted_20 = [_hoisted_19];
var _hoisted_21 = {
  key: 2,
  "class": "btn btn-primary btn-lg prescription-button",
  "data-toggle": "modal",
  "data-target": "#labRequestModal",
  type: "button"
};
var _hoisted_22 = /*#__PURE__*/(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("i", {
  "class": "bi-card-checklist"
}, null, -1 /* HOISTED */);
var _hoisted_23 = [_hoisted_22];
var _hoisted_24 = {
  "class": "localPlayerDiv"
};
var _hoisted_25 = ["src"];
var _hoisted_26 = {
  "class": "col-lg-4"
};
var _hoisted_27 = {
  "class": "telemedForm"
};
var _hoisted_28 = {
  "class": "row-fluid"
};
var _hoisted_29 = ["src"];
var _hoisted_30 = /*#__PURE__*/(0,vue__WEBPACK_IMPORTED_MODULE_0__.createStaticVNode)("<div class=\"formHeader\"><p>Republic of the Philippines</p><p>DEPARTMENT OF HEALTH</p><p><b>CENTRAL VISAYAS CENTER for HEALTH DEVELOPMENT</b></p><p>Osmeña Boulevard Sambag II, Cebu City, 6000 Philippines</p><p>Regional Director&#39;s Office Tel. No. (032) 253-6355 Fax No. (032) 254-0109</p><p>Official Website: <span style=\"color:blue;\">http://www.ro7.doh.gov.ph</span> Email Address: dohro7@gmail.com</p></div><div class=\"clinical\"><span style=\"color:#4CAF50;\"><b>BEmONC/CEmONC REFERRAL FORM</b></span></div>", 2);
var _hoisted_32 = {
  "class": "tableForm"
};
var _hoisted_33 = {
  "class": "table table-striped form-label formTable"
};
var _hoisted_34 = /*#__PURE__*/(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("tr", null, [/*#__PURE__*/(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("th", {
  colspan: "12"
}, "REFERRAL RECORD")], -1 /* HOISTED */);
var _hoisted_35 = /*#__PURE__*/(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("td", {
  colspan: "6"
}, "Who is referring", -1 /* HOISTED */);
var _hoisted_36 = {
  colspan: "6"
};
var _hoisted_37 = {
  "class": "forDetails"
};
var _hoisted_38 = {
  colspan: "12"
};
var _hoisted_39 = {
  "class": "forDetails"
};
var _hoisted_40 = {
  colspan: "6"
};
var _hoisted_41 = {
  "class": "forDetails"
};
var _hoisted_42 = {
  colspan: "6"
};
var _hoisted_43 = {
  "class": "forDetails"
};
var _hoisted_44 = {
  colspan: "12"
};
var _hoisted_45 = {
  "class": "forDetails"
};
var _hoisted_46 = {
  colspan: "12"
};
var _hoisted_47 = {
  "class": "forDetails"
};
var _hoisted_48 = {
  colspan: "12"
};
var _hoisted_49 = {
  "class": "forDetails"
};
var _hoisted_50 = {
  colspan: "12"
};
var _hoisted_51 = {
  "class": "forDetails"
};
var _hoisted_52 = {
  colspan: "6"
};
var _hoisted_53 = {
  "class": "forDetails"
};
var _hoisted_54 = {
  colspan: "6"
};
var _hoisted_55 = {
  "class": "forDetails"
};
var _hoisted_56 = {
  colspan: "12"
};
var _hoisted_57 = {
  "class": "forDetails"
};
var _hoisted_58 = {
  colspan: "12"
};
var _hoisted_59 = {
  "class": "forDetails"
};
var _hoisted_60 = {
  colspan: "12"
};
var _hoisted_61 = {
  "class": "forDetails"
};
var _hoisted_62 = {
  "class": "row"
};
var _hoisted_63 = {
  "class": "col"
};
var _hoisted_64 = /*#__PURE__*/(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("tr", null, [/*#__PURE__*/(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("th", {
  colspan: "6",
  "class": "padded-header"
}, "WOMAN")], -1 /* HOISTED */);
var _hoisted_65 = {
  "class": "padded-row"
};
var _hoisted_66 = {
  colspan: "3"
};
var _hoisted_67 = {
  "class": "forDetails"
};
var _hoisted_68 = {
  "class": "padded-row"
};
var _hoisted_69 = {
  colspan: "6"
};
var _hoisted_70 = {
  "class": "forDetails"
};
var _hoisted_71 = /*#__PURE__*/(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("br", null, null, -1 /* HOISTED */);
var _hoisted_72 = /*#__PURE__*/(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("small", null, "(at time of referral)", -1 /* HOISTED */);
var _hoisted_73 = {
  "class": "padded-row"
};
var _hoisted_74 = {
  colspan: "6"
};
var _hoisted_75 = /*#__PURE__*/(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("br", null, null, -1 /* HOISTED */);
var _hoisted_76 = {
  "class": "forDetails"
};
var _hoisted_77 = {
  "class": "padded-row"
};
var _hoisted_78 = {
  colspan: "6"
};
var _hoisted_79 = /*#__PURE__*/(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("br", null, null, -1 /* HOISTED */);
var _hoisted_80 = {
  "class": "forDetails"
};
var _hoisted_81 = {
  "class": "padded-row"
};
var _hoisted_82 = {
  colspan: "6"
};
var _hoisted_83 = /*#__PURE__*/(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("br", null, null, -1 /* HOISTED */);
var _hoisted_84 = {
  "class": "forDetails",
  style: {
    "white-space": "pre-line"
  }
};
var _hoisted_85 = /*#__PURE__*/(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("tr", {
  "class": "bg-gray"
}, [/*#__PURE__*/(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("td", {
  colspan: "6",
  "class": "padded-header"
}, [/*#__PURE__*/(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("strong", null, "Treatments Give Time")])], -1 /* HOISTED */);
var _hoisted_86 = {
  "class": "padded-row"
};
var _hoisted_87 = {
  colspan: "6"
};
var _hoisted_88 = /*#__PURE__*/(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("br", null, null, -1 /* HOISTED */);
var _hoisted_89 = {
  "class": "forDetails"
};
var _hoisted_90 = {
  "class": "forDetails"
};
var _hoisted_91 = {
  "class": "padded-row"
};
var _hoisted_92 = {
  colspan: "6"
};
var _hoisted_93 = /*#__PURE__*/(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("br", null, null, -1 /* HOISTED */);
var _hoisted_94 = {
  "class": "forDetails"
};
var _hoisted_95 = {
  "class": "forDetails"
};
var _hoisted_96 = {
  "class": "padded-row"
};
var _hoisted_97 = {
  colspan: "6"
};
var _hoisted_98 = /*#__PURE__*/(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("br", null, null, -1 /* HOISTED */);
var _hoisted_99 = {
  "class": "forDetails",
  style: {
    "white-space": "pre-line"
  }
};
var _hoisted_100 = {
  key: 0,
  "class": "padded-row"
};
var _hoisted_101 = {
  colspan: "6"
};
var _hoisted_102 = {
  "class": "forDetails"
};
var _hoisted_103 = {
  key: 1,
  "class": "padded-row"
};
var _hoisted_104 = {
  colspan: "6"
};
var _hoisted_105 = /*#__PURE__*/(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("br", null, null, -1 /* HOISTED */);
var _hoisted_106 = {
  "class": "forDetails",
  style: {
    "white-space": "pre-line"
  }
};
var _hoisted_107 = {
  key: 2,
  "class": "padded-row"
};
var _hoisted_108 = {
  colspan: "6"
};
var _hoisted_109 = /*#__PURE__*/(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("br", null, null, -1 /* HOISTED */);
var _hoisted_110 = {
  "class": "forDetails",
  style: {
    "white-space": "pre-line"
  }
};
var _hoisted_111 = {
  key: 3,
  "class": "padded-row"
};
var _hoisted_112 = {
  colspan: "6"
};
var _hoisted_113 = /*#__PURE__*/(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("br", null, null, -1 /* HOISTED */);
var _hoisted_114 = {
  "class": "forDetails",
  style: {
    "white-space": "pre-line"
  }
};
var _hoisted_115 = {
  key: 4,
  "class": "padded-row"
};
var _hoisted_116 = {
  colspan: "6"
};
var _hoisted_117 = /*#__PURE__*/(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("br", null, null, -1 /* HOISTED */);
var _hoisted_118 = {
  "class": "forDetails",
  style: {
    "white-space": "pre-line"
  }
};
var _hoisted_119 = {
  key: 5,
  "class": "padded-row"
};
var _hoisted_120 = {
  colspan: "6"
};
var _hoisted_121 = {
  key: 0
};
var _hoisted_122 = {
  key: 1
};
var _hoisted_123 = /*#__PURE__*/(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("br", null, null, -1 /* HOISTED */);
var _hoisted_124 = ["href"];
var _hoisted_125 = {
  key: 0
};
var _hoisted_126 = {
  "class": "col"
};
var _hoisted_127 = /*#__PURE__*/(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("tr", {
  "class": "bg-gray"
}, [/*#__PURE__*/(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("th", {
  colspan: "6",
  "class": "padded-header"
}, "BABY")], -1 /* HOISTED */);
var _hoisted_128 = {
  "class": "padded-row"
};
var _hoisted_129 = {
  colspan: "6"
};
var _hoisted_130 = {
  "class": "forDetails"
};
var _hoisted_131 = {
  "class": "padded-row"
};
var _hoisted_132 = {
  colspan: "6"
};
var _hoisted_133 = {
  "class": "forDetails"
};
var _hoisted_134 = {
  "class": "padded-row"
};
var _hoisted_135 = {
  colspan: "6"
};
var _hoisted_136 = {
  "class": "forDetails"
};
var _hoisted_137 = {
  "class": "padded-row"
};
var _hoisted_138 = {
  colspan: "6"
};
var _hoisted_139 = {
  "class": "forDetails"
};
var _hoisted_140 = {
  "class": "padded-row"
};
var _hoisted_141 = {
  colspan: "6"
};
var _hoisted_142 = /*#__PURE__*/(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("br", null, null, -1 /* HOISTED */);
var _hoisted_143 = {
  "class": "forDetails"
};
var _hoisted_144 = {
  "class": "padded-row"
};
var _hoisted_145 = {
  colspan: "6"
};
var _hoisted_146 = /*#__PURE__*/(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("br", null, null, -1 /* HOISTED */);
var _hoisted_147 = {
  "class": "forDetails",
  style: {
    "white-space": "pre-line"
  }
};
var _hoisted_148 = {
  "class": "padded-row"
};
var _hoisted_149 = {
  colspan: "6"
};
var _hoisted_150 = /*#__PURE__*/(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("br", null, null, -1 /* HOISTED */);
var _hoisted_151 = {
  "class": "forDetails"
};
var _hoisted_152 = /*#__PURE__*/(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("tr", {
  "class": "bg-gray"
}, [/*#__PURE__*/(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("td", {
  colspan: "6",
  "class": "padded-header"
}, [/*#__PURE__*/(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("strong", null, "Treatments Give Time")])], -1 /* HOISTED */);
var _hoisted_153 = {
  "class": "padded-row"
};
var _hoisted_154 = {
  colspan: "6"
};
var _hoisted_155 = /*#__PURE__*/(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("br", null, null, -1 /* HOISTED */);
var _hoisted_156 = {
  "class": "forDetails"
};
var _hoisted_157 = {
  "class": "forDetails"
};
var _hoisted_158 = {
  "class": "padded-row"
};
var _hoisted_159 = {
  colspan: "6"
};
var _hoisted_160 = /*#__PURE__*/(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("br", null, null, -1 /* HOISTED */);
var _hoisted_161 = {
  "class": "forDetails"
};
var _hoisted_162 = {
  "class": "forDetails"
};
var _hoisted_163 = {
  "class": "padded-row"
};
var _hoisted_164 = {
  colspan: "6"
};
var _hoisted_165 = /*#__PURE__*/(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("br", null, null, -1 /* HOISTED */);
var _hoisted_166 = {
  "class": "forDetails",
  style: {
    "white-space": "pre-line"
  }
};
var _hoisted_167 = {
  key: 0
};
var _hoisted_168 = /*#__PURE__*/(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("i", {
  "class": "bi bi-prescription"
}, null, -1 /* HOISTED */);
function render(_ctx, _cache, $props, $setup, $data, $options) {
  var _component_PrescriptionModal = (0,vue__WEBPACK_IMPORTED_MODULE_0__.resolveComponent)("PrescriptionModal");
  var _component_LabRequestModal = (0,vue__WEBPACK_IMPORTED_MODULE_0__.resolveComponent)("LabRequestModal");
  return (0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementBlock)(vue__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("audio", {
    ref: "ringingPhone",
    src: $data.ringingPhoneUrl,
    loop: ""
  }, null, 8 /* PROPS */, _hoisted_1), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("div", _hoisted_2, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("div", _hoisted_3, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("div", _hoisted_4, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("div", _hoisted_5, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("div", _hoisted_6, [_hoisted_7, (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("img", {
    src: $data.doctorUrl,
    "class": "img-fluid",
    alt: "Image1"
  }, null, 8 /* PROPS */, _hoisted_8)]), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createVNode)(vue__WEBPACK_IMPORTED_MODULE_0__.Transition, {
    name: "fade"
  }, {
    "default": (0,vue__WEBPACK_IMPORTED_MODULE_0__.withCtx)(function () {
      return [$data.showDiv ? ((0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementBlock)("div", _hoisted_9, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("button", {
        "class": (0,vue__WEBPACK_IMPORTED_MODULE_0__.normalizeClass)(["btn btn-success btn-lg mic-button", {
          'mic-button-slash': !$data.audioStreaming
        }]),
        onClick: _cache[0] || (_cache[0] = function () {
          return $options.audioStreamingOnAnddOff && $options.audioStreamingOnAnddOff.apply($options, arguments);
        }),
        type: "button"
      }, _hoisted_11, 2 /* CLASS */), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createTextVNode)("  "), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("button", {
        "class": (0,vue__WEBPACK_IMPORTED_MODULE_0__.normalizeClass)(["btn btn-success btn-lg video-button", {
          'video-button-slash': !$data.videoStreaming
        }]),
        onClick: _cache[1] || (_cache[1] = function () {
          return $options.videoStreamingOnAndOff && $options.videoStreamingOnAndOff.apply($options, arguments);
        }),
        type: "button"
      }, _hoisted_13, 2 /* CLASS */), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createTextVNode)("  "), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("button", {
        "class": "btn btn-danger btn-lg decline-button",
        onClick: _cache[2] || (_cache[2] = function () {
          return $options.leaveChannel && $options.leaveChannel.apply($options, arguments);
        }),
        type: "button"
      }, _hoisted_15), $data.referring_md == 'no' ? ((0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementBlock)("button", {
        key: 0,
        "class": "btn btn-warning btn-lg upward-button",
        onClick: _cache[3] || (_cache[3] = function () {
          return $options.endorseUpward && $options.endorseUpward.apply($options, arguments);
        }),
        type: "button",
        style: {
          "margin-left": "10px"
        }
      }, _hoisted_17)) : (0,vue__WEBPACK_IMPORTED_MODULE_0__.createCommentVNode)("v-if", true), $data.referring_md == 'no' ? ((0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementBlock)("button", _hoisted_18, _hoisted_20)) : (0,vue__WEBPACK_IMPORTED_MODULE_0__.createCommentVNode)("v-if", true), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createCommentVNode)(" <button class=\"btn btn-success btn-lg lab-button\" @click=\"endorseUpward\" type=\"button\" v-if=\"referring_md == 'no'\"><i class=\"bi-card-checklist\"></i></button> "), $data.referring_md == 'no' ? ((0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementBlock)("button", _hoisted_21, _hoisted_23)) : (0,vue__WEBPACK_IMPORTED_MODULE_0__.createCommentVNode)("v-if", true)])) : (0,vue__WEBPACK_IMPORTED_MODULE_0__.createCommentVNode)("v-if", true)];
    }),
    _: 1 /* STABLE */
  }), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("div", _hoisted_24, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("img", {
    src: $data.doctorUrl1,
    id: "local-image",
    "class": "img2",
    alt: "Image2"
  }, null, 8 /* PROPS */, _hoisted_25)])])]), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("div", _hoisted_26, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("div", _hoisted_27, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("div", _hoisted_28, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("div", null, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("img", {
    src: $data.dohLogoUrl,
    alt: "Image3",
    "class": "dohLogo"
  }, null, 8 /* PROPS */, _hoisted_29)]), _hoisted_30, (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("div", _hoisted_32, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("table", _hoisted_33, [_hoisted_34, (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("tr", null, [_hoisted_35, (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("td", _hoisted_36, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createTextVNode)("Record Number: "), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("span", _hoisted_37, (0,vue__WEBPACK_IMPORTED_MODULE_0__.toDisplayString)($data.form.record_no), 1 /* TEXT */)])]), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("tr", null, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("td", _hoisted_38, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createTextVNode)("Referred Date: "), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("span", _hoisted_39, (0,vue__WEBPACK_IMPORTED_MODULE_0__.toDisplayString)($data.form.referred_date), 1 /* TEXT */)])]), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("tr", null, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("td", _hoisted_40, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createTextVNode)("Referring Name: "), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("span", _hoisted_41, (0,vue__WEBPACK_IMPORTED_MODULE_0__.toDisplayString)($data.form.md_referring), 1 /* TEXT */)]), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("td", _hoisted_42, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createTextVNode)("Arrival Date: "), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("span", _hoisted_43, (0,vue__WEBPACK_IMPORTED_MODULE_0__.toDisplayString)($data.form.arrival_date), 1 /* TEXT */)])]), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("tr", null, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("td", _hoisted_44, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createTextVNode)("Contact # of Referring MD/HCW: "), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("span", _hoisted_45, (0,vue__WEBPACK_IMPORTED_MODULE_0__.toDisplayString)($data.form.referring_md_contact), 1 /* TEXT */)])]), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("tr", null, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("td", _hoisted_46, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createTextVNode)("Referring Facility: "), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("span", _hoisted_47, (0,vue__WEBPACK_IMPORTED_MODULE_0__.toDisplayString)($data.form.referring_facility), 1 /* TEXT */)])]), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("tr", null, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("td", _hoisted_48, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createTextVNode)("Facility Contact #: "), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("span", _hoisted_49, (0,vue__WEBPACK_IMPORTED_MODULE_0__.toDisplayString)($data.form.referring_contact), 1 /* TEXT */)])]), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("tr", null, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("td", _hoisted_50, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createTextVNode)("Accompanied by the Health Worker: "), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("span", _hoisted_51, (0,vue__WEBPACK_IMPORTED_MODULE_0__.toDisplayString)($data.form.health_worker), 1 /* TEXT */)])]), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("tr", null, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("td", _hoisted_52, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createTextVNode)("Referred to: "), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("span", _hoisted_53, (0,vue__WEBPACK_IMPORTED_MODULE_0__.toDisplayString)($data.form.referred_facility), 1 /* TEXT */)]), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("td", _hoisted_54, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createTextVNode)("Department: "), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("span", _hoisted_55, (0,vue__WEBPACK_IMPORTED_MODULE_0__.toDisplayString)($data.form.department), 1 /* TEXT */)])]), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("tr", null, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("td", _hoisted_56, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createTextVNode)("Covid Number: "), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("span", _hoisted_57, (0,vue__WEBPACK_IMPORTED_MODULE_0__.toDisplayString)($data.form.covid_number), 1 /* TEXT */)])]), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("tr", null, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("td", _hoisted_58, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createTextVNode)("Clinical Status: "), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("span", _hoisted_59, (0,vue__WEBPACK_IMPORTED_MODULE_0__.toDisplayString)($data.form.refer_clinical_status), 1 /* TEXT */)])]), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("tr", null, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("td", _hoisted_60, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createTextVNode)("Surviellance Category: "), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("span", _hoisted_61, (0,vue__WEBPACK_IMPORTED_MODULE_0__.toDisplayString)($data.form.refer_sur_category), 1 /* TEXT */)])])]), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("div", _hoisted_62, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("div", _hoisted_63, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("table", null, [_hoisted_64, (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("tr", _hoisted_65, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("td", _hoisted_66, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createTextVNode)("Name: "), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("span", _hoisted_67, (0,vue__WEBPACK_IMPORTED_MODULE_0__.toDisplayString)($data.form.woman_name), 1 /* TEXT */)])]), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("tr", _hoisted_68, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("td", _hoisted_69, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createTextVNode)("Age: "), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("span", _hoisted_70, (0,vue__WEBPACK_IMPORTED_MODULE_0__.toDisplayString)($data.form.woman_age), 1 /* TEXT */), _hoisted_71, _hoisted_72])]), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("tr", _hoisted_73, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("td", _hoisted_74, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createTextVNode)("Address: "), _hoisted_75, (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("span", _hoisted_76, (0,vue__WEBPACK_IMPORTED_MODULE_0__.toDisplayString)($data.form.patient_address), 1 /* TEXT */)])]), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("tr", _hoisted_77, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("td", _hoisted_78, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createTextVNode)("Main Reason for Referral: "), _hoisted_79, (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("span", _hoisted_80, (0,vue__WEBPACK_IMPORTED_MODULE_0__.toDisplayString)($data.form.woman_reason), 1 /* TEXT */)])]), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("tr", _hoisted_81, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("td", _hoisted_82, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createTextVNode)("Major Findings (Clinica and BP,Temp,Lab) "), _hoisted_83, (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("span", _hoisted_84, (0,vue__WEBPACK_IMPORTED_MODULE_0__.toDisplayString)($data.form.woman_major_findings), 1 /* TEXT */)])]), _hoisted_85, (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("tr", _hoisted_86, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("td", _hoisted_87, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createTextVNode)("Before Referral: "), _hoisted_88, (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("span", _hoisted_89, (0,vue__WEBPACK_IMPORTED_MODULE_0__.toDisplayString)($data.form.woman_before_treatment), 1 /* TEXT */), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createTextVNode)(" - "), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("span", _hoisted_90, (0,vue__WEBPACK_IMPORTED_MODULE_0__.toDisplayString)($data.form.woman_before_given_time), 1 /* TEXT */)])]), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("tr", _hoisted_91, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("td", _hoisted_92, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createTextVNode)("During Referral: "), _hoisted_93, (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("span", _hoisted_94, (0,vue__WEBPACK_IMPORTED_MODULE_0__.toDisplayString)($data.form.woman_during_transport), 1 /* TEXT */), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createTextVNode)(" - "), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("span", _hoisted_95, (0,vue__WEBPACK_IMPORTED_MODULE_0__.toDisplayString)($data.form.woman_transport_given_time), 1 /* TEXT */)])]), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("tr", _hoisted_96, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("td", _hoisted_97, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createTextVNode)("Information Given to the Woman and Companion About the Reason for Referral "), _hoisted_98, (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("span", _hoisted_99, (0,vue__WEBPACK_IMPORTED_MODULE_0__.toDisplayString)($data.form.woman_information_given), 1 /* TEXT */)])]), $data.icd.length > 0 ? ((0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementBlock)("tr", _hoisted_100, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("td", _hoisted_101, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createTextVNode)(" ICD-10 Code and Description: "), ((0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(true), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementBlock)(vue__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, (0,vue__WEBPACK_IMPORTED_MODULE_0__.renderList)($data.icd, function (i) {
    return (0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementBlock)("li", {
      key: i.code
    }, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("span", _hoisted_102, (0,vue__WEBPACK_IMPORTED_MODULE_0__.toDisplayString)(i.code) + " - " + (0,vue__WEBPACK_IMPORTED_MODULE_0__.toDisplayString)(i.description), 1 /* TEXT */)]);
  }), 128 /* KEYED_FRAGMENT */))])])) : (0,vue__WEBPACK_IMPORTED_MODULE_0__.createCommentVNode)("v-if", true), $data.form.notes_diagnoses ? ((0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementBlock)("tr", _hoisted_103, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("td", _hoisted_104, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createTextVNode)(" Diagnosis/Impression: "), _hoisted_105, (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("span", _hoisted_106, (0,vue__WEBPACK_IMPORTED_MODULE_0__.toDisplayString)($data.form.notes_diagnoses), 1 /* TEXT */)])])) : (0,vue__WEBPACK_IMPORTED_MODULE_0__.createCommentVNode)("v-if", true), $data.form.other_diagnoses ? ((0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementBlock)("tr", _hoisted_107, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("td", _hoisted_108, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createTextVNode)(" Other Diagnoses: "), _hoisted_109, (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("span", _hoisted_110, (0,vue__WEBPACK_IMPORTED_MODULE_0__.toDisplayString)($data.form.other_diagnoses), 1 /* TEXT */)])])) : (0,vue__WEBPACK_IMPORTED_MODULE_0__.createCommentVNode)("v-if", true), $data.reason ? ((0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementBlock)("tr", _hoisted_111, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("td", _hoisted_112, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createTextVNode)(" Reason for referral: "), _hoisted_113, (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("span", _hoisted_114, (0,vue__WEBPACK_IMPORTED_MODULE_0__.toDisplayString)($data.reason.reason), 1 /* TEXT */)])])) : (0,vue__WEBPACK_IMPORTED_MODULE_0__.createCommentVNode)("v-if", true), $data.form.other_reason_referral ? ((0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementBlock)("tr", _hoisted_115, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("td", _hoisted_116, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createTextVNode)(" Reason for referral: "), _hoisted_117, (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("span", _hoisted_118, (0,vue__WEBPACK_IMPORTED_MODULE_0__.toDisplayString)($data.form.other_reason_referral), 1 /* TEXT */)])])) : (0,vue__WEBPACK_IMPORTED_MODULE_0__.createCommentVNode)("v-if", true), $data.file_path ? ((0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementBlock)("tr", _hoisted_119, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("td", _hoisted_120, [$data.file_path.length > 1 ? ((0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementBlock)("span", _hoisted_121, "File Attachments: ")) : ((0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementBlock)("span", _hoisted_122, "File Attachment: ")), _hoisted_123, ((0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(true), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementBlock)(vue__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, (0,vue__WEBPACK_IMPORTED_MODULE_0__.renderList)($data.file_path, function (path, index) {
    return (0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementBlock)("span", {
      key: index
    }, [((0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementBlock)("a", {
      href: path,
      key: index,
      id: "file_download",
      "class": "reason",
      target: "_blank",
      download: ""
    }, (0,vue__WEBPACK_IMPORTED_MODULE_0__.toDisplayString)($data.file_name[index]), 9 /* TEXT, PROPS */, _hoisted_124)), index + 1 !== $data.file_path.length ? ((0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementBlock)("span", _hoisted_125, ", ")) : (0,vue__WEBPACK_IMPORTED_MODULE_0__.createCommentVNode)("v-if", true)]);
  }), 128 /* KEYED_FRAGMENT */))])])) : (0,vue__WEBPACK_IMPORTED_MODULE_0__.createCommentVNode)("v-if", true)])]), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("div", _hoisted_126, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("table", null, [_hoisted_127, (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("tr", _hoisted_128, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("td", _hoisted_129, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createTextVNode)("Name: "), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("span", _hoisted_130, (0,vue__WEBPACK_IMPORTED_MODULE_0__.toDisplayString)($data.formBaby.baby_name), 1 /* TEXT */)])]), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("tr", _hoisted_131, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("td", _hoisted_132, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createTextVNode)("Date of Birth: "), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("span", _hoisted_133, (0,vue__WEBPACK_IMPORTED_MODULE_0__.toDisplayString)($data.formBaby.baby_dob), 1 /* TEXT */)])]), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("tr", _hoisted_134, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("td", _hoisted_135, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createTextVNode)("Birth Weight: "), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("span", _hoisted_136, (0,vue__WEBPACK_IMPORTED_MODULE_0__.toDisplayString)($data.formBaby.weight), 1 /* TEXT */)])]), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("tr", _hoisted_137, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("td", _hoisted_138, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createTextVNode)("Gestational Age: "), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("span", _hoisted_139, (0,vue__WEBPACK_IMPORTED_MODULE_0__.toDisplayString)($data.formBaby.gestational_age), 1 /* TEXT */)])]), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("tr", _hoisted_140, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("td", _hoisted_141, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createTextVNode)("Main Reason for Referral: "), _hoisted_142, (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("span", _hoisted_143, (0,vue__WEBPACK_IMPORTED_MODULE_0__.toDisplayString)($data.formBaby.baby_reason), 1 /* TEXT */)])]), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("tr", _hoisted_144, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("td", _hoisted_145, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createTextVNode)("Major Findings (Clinical and BP,Temp,Lab) "), _hoisted_146, (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("span", _hoisted_147, (0,vue__WEBPACK_IMPORTED_MODULE_0__.toDisplayString)($data.formBaby.baby_major_findings), 1 /* TEXT */)])]), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("tr", _hoisted_148, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("td", _hoisted_149, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createTextVNode)("Last (Breast) Feed (Time): "), _hoisted_150, (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("span", _hoisted_151, (0,vue__WEBPACK_IMPORTED_MODULE_0__.toDisplayString)($data.formBaby.baby_last_feed), 1 /* TEXT */)])]), _hoisted_152, (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("tr", _hoisted_153, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("td", _hoisted_154, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createTextVNode)("Before Referral: "), _hoisted_155, (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("span", _hoisted_156, (0,vue__WEBPACK_IMPORTED_MODULE_0__.toDisplayString)($data.formBaby.baby_before_treatment), 1 /* TEXT */), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createTextVNode)(" - "), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("span", _hoisted_157, (0,vue__WEBPACK_IMPORTED_MODULE_0__.toDisplayString)($data.formBaby.baby_before_given_time), 1 /* TEXT */)])]), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("tr", _hoisted_158, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("td", _hoisted_159, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createTextVNode)("During Transport: "), _hoisted_160, (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("span", _hoisted_161, (0,vue__WEBPACK_IMPORTED_MODULE_0__.toDisplayString)($data.formBaby.baby_during_transport), 1 /* TEXT */), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createTextVNode)(" - "), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("span", _hoisted_162, (0,vue__WEBPACK_IMPORTED_MODULE_0__.toDisplayString)($data.formBaby.baby_transport_given_time), 1 /* TEXT */)])]), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("tr", _hoisted_163, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("td", _hoisted_164, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createTextVNode)("Information Given to the Woman and Companion About the Reason for Referral "), _hoisted_165, (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("span", _hoisted_166, (0,vue__WEBPACK_IMPORTED_MODULE_0__.toDisplayString)($data.formBaby.baby_information_given), 1 /* TEXT */)])])]), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createCommentVNode)(" ======================================================================= ")])]), $data.referring_md == 'yes' ? ((0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementBlock)("div", _hoisted_167, [(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("button", {
    "class": "btn btn-success btn-md btn-block",
    type: "button",
    onClick: _cache[4] || (_cache[4] = function ($event) {
      return $options.generatePrescription();
    })
  }, [_hoisted_168, (0,vue__WEBPACK_IMPORTED_MODULE_0__.createTextVNode)(" Generate Prescription")])])) : (0,vue__WEBPACK_IMPORTED_MODULE_0__.createCommentVNode)("v-if", true), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createCommentVNode)(" ======================================================================= ")])])])])]), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createVNode)(_component_PrescriptionModal, {
    activity_id: parseInt($data.activity_id),
    baseUrl: $data.baseUrl,
    code: $data.referral_code,
    form_type: $data.form_type
  }, null, 8 /* PROPS */, ["activity_id", "baseUrl", "code", "form_type"]), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createVNode)(_component_LabRequestModal, {
    activity_id: parseInt($data.activity_id),
    requested_by: parseInt($props.user.id)
  }, null, 8 /* PROPS */, ["activity_id", "requested_by"])])], 64 /* STABLE_FRAGMENT */);
}

/***/ }),

/***/ "./resources/assets/js/video/api/index.js":
/*!************************************************!*\
  !*** ./resources/assets/js/video/api/index.js ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "getLaboratories": () => (/* binding */ getLaboratories),
/* harmony export */   "saveLabRequest": () => (/* binding */ saveLabRequest)
/* harmony export */ });
/* harmony import */ var _req__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./req */ "./resources/assets/js/video/api/req.js");

var base = $("#broadcasting_url").val();
function getLaboratories() {
  return _req__WEBPACK_IMPORTED_MODULE_0__["default"].get(base + "/api/laboratories");
}
function saveLabRequest(params) {
  return _req__WEBPACK_IMPORTED_MODULE_0__["default"].post(base + "/api/laboratories", params);
}

/***/ }),

/***/ "./resources/assets/js/video/api/req.js":
/*!**********************************************!*\
  !*** ./resources/assets/js/video/api/req.js ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
window.axios = __webpack_require__(/*! axios */ "./node_modules/axios/index.js");
window.axios.defaults.headers.common['X-Requested-With'] = 'XMLHttpRequest';
var token = document.head.querySelector('meta[name="csrf-token"]');
if (token) {
  window.axios.defaults.headers.common['X-CSRF-TOKEN'] = token.content;
} else {
  console.error('CSRF token not found: https://laravel.com/docs/csrf#csrf-x-csrf-token');
}
function get(url, params, headers) {
  return axios.get(url, {
    params: params,
    headers: headers
  });
}
function deletes(url, params, headers) {
  return axios["delete"](url, {
    params: params,
    headers: headers
  });
}
function post(url, params, headers) {
  return axios.post(url, params, headers);
}
function put(url, params, headers) {
  return axios.put(url, params, headers);
}
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({
  get: get,
  deletes: deletes,
  post: post,
  put: put
});

/***/ }),

/***/ "./node_modules/base64-js/index.js":
/*!*****************************************!*\
  !*** ./node_modules/base64-js/index.js ***!
  \*****************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";


exports.byteLength = byteLength
exports.toByteArray = toByteArray
exports.fromByteArray = fromByteArray

var lookup = []
var revLookup = []
var Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array

var code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'
for (var i = 0, len = code.length; i < len; ++i) {
  lookup[i] = code[i]
  revLookup[code.charCodeAt(i)] = i
}

// Support decoding URL-safe base64 strings, as Node.js does.
// See: https://en.wikipedia.org/wiki/Base64#URL_applications
revLookup['-'.charCodeAt(0)] = 62
revLookup['_'.charCodeAt(0)] = 63

function getLens (b64) {
  var len = b64.length

  if (len % 4 > 0) {
    throw new Error('Invalid string. Length must be a multiple of 4')
  }

  // Trim off extra bytes after placeholder bytes are found
  // See: https://github.com/beatgammit/base64-js/issues/42
  var validLen = b64.indexOf('=')
  if (validLen === -1) validLen = len

  var placeHoldersLen = validLen === len
    ? 0
    : 4 - (validLen % 4)

  return [validLen, placeHoldersLen]
}

// base64 is 4/3 + up to two characters of the original data
function byteLength (b64) {
  var lens = getLens(b64)
  var validLen = lens[0]
  var placeHoldersLen = lens[1]
  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen
}

function _byteLength (b64, validLen, placeHoldersLen) {
  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen
}

function toByteArray (b64) {
  var tmp
  var lens = getLens(b64)
  var validLen = lens[0]
  var placeHoldersLen = lens[1]

  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))

  var curByte = 0

  // if there are placeholders, only get up to the last complete 4 chars
  var len = placeHoldersLen > 0
    ? validLen - 4
    : validLen

  var i
  for (i = 0; i < len; i += 4) {
    tmp =
      (revLookup[b64.charCodeAt(i)] << 18) |
      (revLookup[b64.charCodeAt(i + 1)] << 12) |
      (revLookup[b64.charCodeAt(i + 2)] << 6) |
      revLookup[b64.charCodeAt(i + 3)]
    arr[curByte++] = (tmp >> 16) & 0xFF
    arr[curByte++] = (tmp >> 8) & 0xFF
    arr[curByte++] = tmp & 0xFF
  }

  if (placeHoldersLen === 2) {
    tmp =
      (revLookup[b64.charCodeAt(i)] << 2) |
      (revLookup[b64.charCodeAt(i + 1)] >> 4)
    arr[curByte++] = tmp & 0xFF
  }

  if (placeHoldersLen === 1) {
    tmp =
      (revLookup[b64.charCodeAt(i)] << 10) |
      (revLookup[b64.charCodeAt(i + 1)] << 4) |
      (revLookup[b64.charCodeAt(i + 2)] >> 2)
    arr[curByte++] = (tmp >> 8) & 0xFF
    arr[curByte++] = tmp & 0xFF
  }

  return arr
}

function tripletToBase64 (num) {
  return lookup[num >> 18 & 0x3F] +
    lookup[num >> 12 & 0x3F] +
    lookup[num >> 6 & 0x3F] +
    lookup[num & 0x3F]
}

function encodeChunk (uint8, start, end) {
  var tmp
  var output = []
  for (var i = start; i < end; i += 3) {
    tmp =
      ((uint8[i] << 16) & 0xFF0000) +
      ((uint8[i + 1] << 8) & 0xFF00) +
      (uint8[i + 2] & 0xFF)
    output.push(tripletToBase64(tmp))
  }
  return output.join('')
}

function fromByteArray (uint8) {
  var tmp
  var len = uint8.length
  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes
  var parts = []
  var maxChunkLength = 16383 // must be multiple of 3

  // go through the array every three bytes, we'll deal with trailing stuff later
  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {
    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))
  }

  // pad the end with zeros, but make sure to not forget the extra bytes
  if (extraBytes === 1) {
    tmp = uint8[len - 1]
    parts.push(
      lookup[tmp >> 2] +
      lookup[(tmp << 4) & 0x3F] +
      '=='
    )
  } else if (extraBytes === 2) {
    tmp = (uint8[len - 2] << 8) + uint8[len - 1]
    parts.push(
      lookup[tmp >> 10] +
      lookup[(tmp >> 4) & 0x3F] +
      lookup[(tmp << 2) & 0x3F] +
      '='
    )
  }

  return parts.join('')
}


/***/ }),

/***/ "./node_modules/buffer/index.js":
/*!**************************************!*\
  !*** ./node_modules/buffer/index.js ***!
  \**************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
/* eslint-disable no-proto */



var base64 = __webpack_require__(/*! base64-js */ "./node_modules/base64-js/index.js")
var ieee754 = __webpack_require__(/*! ieee754 */ "./node_modules/ieee754/index.js")
var isArray = __webpack_require__(/*! isarray */ "./node_modules/isarray/index.js")

exports.Buffer = Buffer
exports.SlowBuffer = SlowBuffer
exports.INSPECT_MAX_BYTES = 50

/**
 * If `Buffer.TYPED_ARRAY_SUPPORT`:
 *   === true    Use Uint8Array implementation (fastest)
 *   === false   Use Object implementation (most compatible, even IE6)
 *
 * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,
 * Opera 11.6+, iOS 4.2+.
 *
 * Due to various browser bugs, sometimes the Object implementation will be used even
 * when the browser supports typed arrays.
 *
 * Note:
 *
 *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,
 *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.
 *
 *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.
 *
 *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of
 *     incorrect length in some situations.

 * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they
 * get the Object implementation, which is slower but behaves correctly.
 */
Buffer.TYPED_ARRAY_SUPPORT = __webpack_require__.g.TYPED_ARRAY_SUPPORT !== undefined
  ? __webpack_require__.g.TYPED_ARRAY_SUPPORT
  : typedArraySupport()

/*
 * Export kMaxLength after typed array support is determined.
 */
exports.kMaxLength = kMaxLength()

function typedArraySupport () {
  try {
    var arr = new Uint8Array(1)
    arr.__proto__ = {__proto__: Uint8Array.prototype, foo: function () { return 42 }}
    return arr.foo() === 42 && // typed array instances can be augmented
        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`
        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`
  } catch (e) {
    return false
  }
}

function kMaxLength () {
  return Buffer.TYPED_ARRAY_SUPPORT
    ? 0x7fffffff
    : 0x3fffffff
}

function createBuffer (that, length) {
  if (kMaxLength() < length) {
    throw new RangeError('Invalid typed array length')
  }
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    // Return an augmented `Uint8Array` instance, for best performance
    that = new Uint8Array(length)
    that.__proto__ = Buffer.prototype
  } else {
    // Fallback: Return an object instance of the Buffer class
    if (that === null) {
      that = new Buffer(length)
    }
    that.length = length
  }

  return that
}

/**
 * The Buffer constructor returns instances of `Uint8Array` that have their
 * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of
 * `Uint8Array`, so the returned instances will have all the node `Buffer` methods
 * and the `Uint8Array` methods. Square bracket notation works as expected -- it
 * returns a single octet.
 *
 * The `Uint8Array` prototype remains unmodified.
 */

function Buffer (arg, encodingOrOffset, length) {
  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {
    return new Buffer(arg, encodingOrOffset, length)
  }

  // Common case.
  if (typeof arg === 'number') {
    if (typeof encodingOrOffset === 'string') {
      throw new Error(
        'If encoding is specified then the first argument must be a string'
      )
    }
    return allocUnsafe(this, arg)
  }
  return from(this, arg, encodingOrOffset, length)
}

Buffer.poolSize = 8192 // not used by this implementation

// TODO: Legacy, not needed anymore. Remove in next major version.
Buffer._augment = function (arr) {
  arr.__proto__ = Buffer.prototype
  return arr
}

function from (that, value, encodingOrOffset, length) {
  if (typeof value === 'number') {
    throw new TypeError('"value" argument must not be a number')
  }

  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {
    return fromArrayBuffer(that, value, encodingOrOffset, length)
  }

  if (typeof value === 'string') {
    return fromString(that, value, encodingOrOffset)
  }

  return fromObject(that, value)
}

/**
 * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError
 * if value is a number.
 * Buffer.from(str[, encoding])
 * Buffer.from(array)
 * Buffer.from(buffer)
 * Buffer.from(arrayBuffer[, byteOffset[, length]])
 **/
Buffer.from = function (value, encodingOrOffset, length) {
  return from(null, value, encodingOrOffset, length)
}

if (Buffer.TYPED_ARRAY_SUPPORT) {
  Buffer.prototype.__proto__ = Uint8Array.prototype
  Buffer.__proto__ = Uint8Array
  if (typeof Symbol !== 'undefined' && Symbol.species &&
      Buffer[Symbol.species] === Buffer) {
    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97
    Object.defineProperty(Buffer, Symbol.species, {
      value: null,
      configurable: true
    })
  }
}

function assertSize (size) {
  if (typeof size !== 'number') {
    throw new TypeError('"size" argument must be a number')
  } else if (size < 0) {
    throw new RangeError('"size" argument must not be negative')
  }
}

function alloc (that, size, fill, encoding) {
  assertSize(size)
  if (size <= 0) {
    return createBuffer(that, size)
  }
  if (fill !== undefined) {
    // Only pay attention to encoding if it's a string. This
    // prevents accidentally sending in a number that would
    // be interpretted as a start offset.
    return typeof encoding === 'string'
      ? createBuffer(that, size).fill(fill, encoding)
      : createBuffer(that, size).fill(fill)
  }
  return createBuffer(that, size)
}

/**
 * Creates a new filled Buffer instance.
 * alloc(size[, fill[, encoding]])
 **/
Buffer.alloc = function (size, fill, encoding) {
  return alloc(null, size, fill, encoding)
}

function allocUnsafe (that, size) {
  assertSize(size)
  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0)
  if (!Buffer.TYPED_ARRAY_SUPPORT) {
    for (var i = 0; i < size; ++i) {
      that[i] = 0
    }
  }
  return that
}

/**
 * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.
 * */
Buffer.allocUnsafe = function (size) {
  return allocUnsafe(null, size)
}
/**
 * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.
 */
Buffer.allocUnsafeSlow = function (size) {
  return allocUnsafe(null, size)
}

function fromString (that, string, encoding) {
  if (typeof encoding !== 'string' || encoding === '') {
    encoding = 'utf8'
  }

  if (!Buffer.isEncoding(encoding)) {
    throw new TypeError('"encoding" must be a valid string encoding')
  }

  var length = byteLength(string, encoding) | 0
  that = createBuffer(that, length)

  var actual = that.write(string, encoding)

  if (actual !== length) {
    // Writing a hex string, for example, that contains invalid characters will
    // cause everything after the first invalid character to be ignored. (e.g.
    // 'abxxcd' will be treated as 'ab')
    that = that.slice(0, actual)
  }

  return that
}

function fromArrayLike (that, array) {
  var length = array.length < 0 ? 0 : checked(array.length) | 0
  that = createBuffer(that, length)
  for (var i = 0; i < length; i += 1) {
    that[i] = array[i] & 255
  }
  return that
}

function fromArrayBuffer (that, array, byteOffset, length) {
  array.byteLength // this throws if `array` is not a valid ArrayBuffer

  if (byteOffset < 0 || array.byteLength < byteOffset) {
    throw new RangeError('\'offset\' is out of bounds')
  }

  if (array.byteLength < byteOffset + (length || 0)) {
    throw new RangeError('\'length\' is out of bounds')
  }

  if (byteOffset === undefined && length === undefined) {
    array = new Uint8Array(array)
  } else if (length === undefined) {
    array = new Uint8Array(array, byteOffset)
  } else {
    array = new Uint8Array(array, byteOffset, length)
  }

  if (Buffer.TYPED_ARRAY_SUPPORT) {
    // Return an augmented `Uint8Array` instance, for best performance
    that = array
    that.__proto__ = Buffer.prototype
  } else {
    // Fallback: Return an object instance of the Buffer class
    that = fromArrayLike(that, array)
  }
  return that
}

function fromObject (that, obj) {
  if (Buffer.isBuffer(obj)) {
    var len = checked(obj.length) | 0
    that = createBuffer(that, len)

    if (that.length === 0) {
      return that
    }

    obj.copy(that, 0, 0, len)
    return that
  }

  if (obj) {
    if ((typeof ArrayBuffer !== 'undefined' &&
        obj.buffer instanceof ArrayBuffer) || 'length' in obj) {
      if (typeof obj.length !== 'number' || isnan(obj.length)) {
        return createBuffer(that, 0)
      }
      return fromArrayLike(that, obj)
    }

    if (obj.type === 'Buffer' && isArray(obj.data)) {
      return fromArrayLike(that, obj.data)
    }
  }

  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')
}

function checked (length) {
  // Note: cannot use `length < kMaxLength()` here because that fails when
  // length is NaN (which is otherwise coerced to zero.)
  if (length >= kMaxLength()) {
    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +
                         'size: 0x' + kMaxLength().toString(16) + ' bytes')
  }
  return length | 0
}

function SlowBuffer (length) {
  if (+length != length) { // eslint-disable-line eqeqeq
    length = 0
  }
  return Buffer.alloc(+length)
}

Buffer.isBuffer = function isBuffer (b) {
  return !!(b != null && b._isBuffer)
}

Buffer.compare = function compare (a, b) {
  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {
    throw new TypeError('Arguments must be Buffers')
  }

  if (a === b) return 0

  var x = a.length
  var y = b.length

  for (var i = 0, len = Math.min(x, y); i < len; ++i) {
    if (a[i] !== b[i]) {
      x = a[i]
      y = b[i]
      break
    }
  }

  if (x < y) return -1
  if (y < x) return 1
  return 0
}

Buffer.isEncoding = function isEncoding (encoding) {
  switch (String(encoding).toLowerCase()) {
    case 'hex':
    case 'utf8':
    case 'utf-8':
    case 'ascii':
    case 'latin1':
    case 'binary':
    case 'base64':
    case 'ucs2':
    case 'ucs-2':
    case 'utf16le':
    case 'utf-16le':
      return true
    default:
      return false
  }
}

Buffer.concat = function concat (list, length) {
  if (!isArray(list)) {
    throw new TypeError('"list" argument must be an Array of Buffers')
  }

  if (list.length === 0) {
    return Buffer.alloc(0)
  }

  var i
  if (length === undefined) {
    length = 0
    for (i = 0; i < list.length; ++i) {
      length += list[i].length
    }
  }

  var buffer = Buffer.allocUnsafe(length)
  var pos = 0
  for (i = 0; i < list.length; ++i) {
    var buf = list[i]
    if (!Buffer.isBuffer(buf)) {
      throw new TypeError('"list" argument must be an Array of Buffers')
    }
    buf.copy(buffer, pos)
    pos += buf.length
  }
  return buffer
}

function byteLength (string, encoding) {
  if (Buffer.isBuffer(string)) {
    return string.length
  }
  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&
      (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {
    return string.byteLength
  }
  if (typeof string !== 'string') {
    string = '' + string
  }

  var len = string.length
  if (len === 0) return 0

  // Use a for loop to avoid recursion
  var loweredCase = false
  for (;;) {
    switch (encoding) {
      case 'ascii':
      case 'latin1':
      case 'binary':
        return len
      case 'utf8':
      case 'utf-8':
      case undefined:
        return utf8ToBytes(string).length
      case 'ucs2':
      case 'ucs-2':
      case 'utf16le':
      case 'utf-16le':
        return len * 2
      case 'hex':
        return len >>> 1
      case 'base64':
        return base64ToBytes(string).length
      default:
        if (loweredCase) return utf8ToBytes(string).length // assume utf8
        encoding = ('' + encoding).toLowerCase()
        loweredCase = true
    }
  }
}
Buffer.byteLength = byteLength

function slowToString (encoding, start, end) {
  var loweredCase = false

  // No need to verify that "this.length <= MAX_UINT32" since it's a read-only
  // property of a typed array.

  // This behaves neither like String nor Uint8Array in that we set start/end
  // to their upper/lower bounds if the value passed is out of range.
  // undefined is handled specially as per ECMA-262 6th Edition,
  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.
  if (start === undefined || start < 0) {
    start = 0
  }
  // Return early if start > this.length. Done here to prevent potential uint32
  // coercion fail below.
  if (start > this.length) {
    return ''
  }

  if (end === undefined || end > this.length) {
    end = this.length
  }

  if (end <= 0) {
    return ''
  }

  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.
  end >>>= 0
  start >>>= 0

  if (end <= start) {
    return ''
  }

  if (!encoding) encoding = 'utf8'

  while (true) {
    switch (encoding) {
      case 'hex':
        return hexSlice(this, start, end)

      case 'utf8':
      case 'utf-8':
        return utf8Slice(this, start, end)

      case 'ascii':
        return asciiSlice(this, start, end)

      case 'latin1':
      case 'binary':
        return latin1Slice(this, start, end)

      case 'base64':
        return base64Slice(this, start, end)

      case 'ucs2':
      case 'ucs-2':
      case 'utf16le':
      case 'utf-16le':
        return utf16leSlice(this, start, end)

      default:
        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)
        encoding = (encoding + '').toLowerCase()
        loweredCase = true
    }
  }
}

// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect
// Buffer instances.
Buffer.prototype._isBuffer = true

function swap (b, n, m) {
  var i = b[n]
  b[n] = b[m]
  b[m] = i
}

Buffer.prototype.swap16 = function swap16 () {
  var len = this.length
  if (len % 2 !== 0) {
    throw new RangeError('Buffer size must be a multiple of 16-bits')
  }
  for (var i = 0; i < len; i += 2) {
    swap(this, i, i + 1)
  }
  return this
}

Buffer.prototype.swap32 = function swap32 () {
  var len = this.length
  if (len % 4 !== 0) {
    throw new RangeError('Buffer size must be a multiple of 32-bits')
  }
  for (var i = 0; i < len; i += 4) {
    swap(this, i, i + 3)
    swap(this, i + 1, i + 2)
  }
  return this
}

Buffer.prototype.swap64 = function swap64 () {
  var len = this.length
  if (len % 8 !== 0) {
    throw new RangeError('Buffer size must be a multiple of 64-bits')
  }
  for (var i = 0; i < len; i += 8) {
    swap(this, i, i + 7)
    swap(this, i + 1, i + 6)
    swap(this, i + 2, i + 5)
    swap(this, i + 3, i + 4)
  }
  return this
}

Buffer.prototype.toString = function toString () {
  var length = this.length | 0
  if (length === 0) return ''
  if (arguments.length === 0) return utf8Slice(this, 0, length)
  return slowToString.apply(this, arguments)
}

Buffer.prototype.equals = function equals (b) {
  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')
  if (this === b) return true
  return Buffer.compare(this, b) === 0
}

Buffer.prototype.inspect = function inspect () {
  var str = ''
  var max = exports.INSPECT_MAX_BYTES
  if (this.length > 0) {
    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')
    if (this.length > max) str += ' ... '
  }
  return '<Buffer ' + str + '>'
}

Buffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {
  if (!Buffer.isBuffer(target)) {
    throw new TypeError('Argument must be a Buffer')
  }

  if (start === undefined) {
    start = 0
  }
  if (end === undefined) {
    end = target ? target.length : 0
  }
  if (thisStart === undefined) {
    thisStart = 0
  }
  if (thisEnd === undefined) {
    thisEnd = this.length
  }

  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {
    throw new RangeError('out of range index')
  }

  if (thisStart >= thisEnd && start >= end) {
    return 0
  }
  if (thisStart >= thisEnd) {
    return -1
  }
  if (start >= end) {
    return 1
  }

  start >>>= 0
  end >>>= 0
  thisStart >>>= 0
  thisEnd >>>= 0

  if (this === target) return 0

  var x = thisEnd - thisStart
  var y = end - start
  var len = Math.min(x, y)

  var thisCopy = this.slice(thisStart, thisEnd)
  var targetCopy = target.slice(start, end)

  for (var i = 0; i < len; ++i) {
    if (thisCopy[i] !== targetCopy[i]) {
      x = thisCopy[i]
      y = targetCopy[i]
      break
    }
  }

  if (x < y) return -1
  if (y < x) return 1
  return 0
}

// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,
// OR the last index of `val` in `buffer` at offset <= `byteOffset`.
//
// Arguments:
// - buffer - a Buffer to search
// - val - a string, Buffer, or number
// - byteOffset - an index into `buffer`; will be clamped to an int32
// - encoding - an optional encoding, relevant is val is a string
// - dir - true for indexOf, false for lastIndexOf
function bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {
  // Empty buffer means no match
  if (buffer.length === 0) return -1

  // Normalize byteOffset
  if (typeof byteOffset === 'string') {
    encoding = byteOffset
    byteOffset = 0
  } else if (byteOffset > 0x7fffffff) {
    byteOffset = 0x7fffffff
  } else if (byteOffset < -0x80000000) {
    byteOffset = -0x80000000
  }
  byteOffset = +byteOffset  // Coerce to Number.
  if (isNaN(byteOffset)) {
    // byteOffset: it it's undefined, null, NaN, "foo", etc, search whole buffer
    byteOffset = dir ? 0 : (buffer.length - 1)
  }

  // Normalize byteOffset: negative offsets start from the end of the buffer
  if (byteOffset < 0) byteOffset = buffer.length + byteOffset
  if (byteOffset >= buffer.length) {
    if (dir) return -1
    else byteOffset = buffer.length - 1
  } else if (byteOffset < 0) {
    if (dir) byteOffset = 0
    else return -1
  }

  // Normalize val
  if (typeof val === 'string') {
    val = Buffer.from(val, encoding)
  }

  // Finally, search either indexOf (if dir is true) or lastIndexOf
  if (Buffer.isBuffer(val)) {
    // Special case: looking for empty string/buffer always fails
    if (val.length === 0) {
      return -1
    }
    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)
  } else if (typeof val === 'number') {
    val = val & 0xFF // Search for a byte value [0-255]
    if (Buffer.TYPED_ARRAY_SUPPORT &&
        typeof Uint8Array.prototype.indexOf === 'function') {
      if (dir) {
        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)
      } else {
        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)
      }
    }
    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)
  }

  throw new TypeError('val must be string, number or Buffer')
}

function arrayIndexOf (arr, val, byteOffset, encoding, dir) {
  var indexSize = 1
  var arrLength = arr.length
  var valLength = val.length

  if (encoding !== undefined) {
    encoding = String(encoding).toLowerCase()
    if (encoding === 'ucs2' || encoding === 'ucs-2' ||
        encoding === 'utf16le' || encoding === 'utf-16le') {
      if (arr.length < 2 || val.length < 2) {
        return -1
      }
      indexSize = 2
      arrLength /= 2
      valLength /= 2
      byteOffset /= 2
    }
  }

  function read (buf, i) {
    if (indexSize === 1) {
      return buf[i]
    } else {
      return buf.readUInt16BE(i * indexSize)
    }
  }

  var i
  if (dir) {
    var foundIndex = -1
    for (i = byteOffset; i < arrLength; i++) {
      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {
        if (foundIndex === -1) foundIndex = i
        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize
      } else {
        if (foundIndex !== -1) i -= i - foundIndex
        foundIndex = -1
      }
    }
  } else {
    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength
    for (i = byteOffset; i >= 0; i--) {
      var found = true
      for (var j = 0; j < valLength; j++) {
        if (read(arr, i + j) !== read(val, j)) {
          found = false
          break
        }
      }
      if (found) return i
    }
  }

  return -1
}

Buffer.prototype.includes = function includes (val, byteOffset, encoding) {
  return this.indexOf(val, byteOffset, encoding) !== -1
}

Buffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {
  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)
}

Buffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {
  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)
}

function hexWrite (buf, string, offset, length) {
  offset = Number(offset) || 0
  var remaining = buf.length - offset
  if (!length) {
    length = remaining
  } else {
    length = Number(length)
    if (length > remaining) {
      length = remaining
    }
  }

  // must be an even number of digits
  var strLen = string.length
  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')

  if (length > strLen / 2) {
    length = strLen / 2
  }
  for (var i = 0; i < length; ++i) {
    var parsed = parseInt(string.substr(i * 2, 2), 16)
    if (isNaN(parsed)) return i
    buf[offset + i] = parsed
  }
  return i
}

function utf8Write (buf, string, offset, length) {
  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)
}

function asciiWrite (buf, string, offset, length) {
  return blitBuffer(asciiToBytes(string), buf, offset, length)
}

function latin1Write (buf, string, offset, length) {
  return asciiWrite(buf, string, offset, length)
}

function base64Write (buf, string, offset, length) {
  return blitBuffer(base64ToBytes(string), buf, offset, length)
}

function ucs2Write (buf, string, offset, length) {
  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)
}

Buffer.prototype.write = function write (string, offset, length, encoding) {
  // Buffer#write(string)
  if (offset === undefined) {
    encoding = 'utf8'
    length = this.length
    offset = 0
  // Buffer#write(string, encoding)
  } else if (length === undefined && typeof offset === 'string') {
    encoding = offset
    length = this.length
    offset = 0
  // Buffer#write(string, offset[, length][, encoding])
  } else if (isFinite(offset)) {
    offset = offset | 0
    if (isFinite(length)) {
      length = length | 0
      if (encoding === undefined) encoding = 'utf8'
    } else {
      encoding = length
      length = undefined
    }
  // legacy write(string, encoding, offset, length) - remove in v0.13
  } else {
    throw new Error(
      'Buffer.write(string, encoding, offset[, length]) is no longer supported'
    )
  }

  var remaining = this.length - offset
  if (length === undefined || length > remaining) length = remaining

  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {
    throw new RangeError('Attempt to write outside buffer bounds')
  }

  if (!encoding) encoding = 'utf8'

  var loweredCase = false
  for (;;) {
    switch (encoding) {
      case 'hex':
        return hexWrite(this, string, offset, length)

      case 'utf8':
      case 'utf-8':
        return utf8Write(this, string, offset, length)

      case 'ascii':
        return asciiWrite(this, string, offset, length)

      case 'latin1':
      case 'binary':
        return latin1Write(this, string, offset, length)

      case 'base64':
        // Warning: maxLength not taken into account in base64Write
        return base64Write(this, string, offset, length)

      case 'ucs2':
      case 'ucs-2':
      case 'utf16le':
      case 'utf-16le':
        return ucs2Write(this, string, offset, length)

      default:
        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)
        encoding = ('' + encoding).toLowerCase()
        loweredCase = true
    }
  }
}

Buffer.prototype.toJSON = function toJSON () {
  return {
    type: 'Buffer',
    data: Array.prototype.slice.call(this._arr || this, 0)
  }
}

function base64Slice (buf, start, end) {
  if (start === 0 && end === buf.length) {
    return base64.fromByteArray(buf)
  } else {
    return base64.fromByteArray(buf.slice(start, end))
  }
}

function utf8Slice (buf, start, end) {
  end = Math.min(buf.length, end)
  var res = []

  var i = start
  while (i < end) {
    var firstByte = buf[i]
    var codePoint = null
    var bytesPerSequence = (firstByte > 0xEF) ? 4
      : (firstByte > 0xDF) ? 3
      : (firstByte > 0xBF) ? 2
      : 1

    if (i + bytesPerSequence <= end) {
      var secondByte, thirdByte, fourthByte, tempCodePoint

      switch (bytesPerSequence) {
        case 1:
          if (firstByte < 0x80) {
            codePoint = firstByte
          }
          break
        case 2:
          secondByte = buf[i + 1]
          if ((secondByte & 0xC0) === 0x80) {
            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)
            if (tempCodePoint > 0x7F) {
              codePoint = tempCodePoint
            }
          }
          break
        case 3:
          secondByte = buf[i + 1]
          thirdByte = buf[i + 2]
          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {
            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)
            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {
              codePoint = tempCodePoint
            }
          }
          break
        case 4:
          secondByte = buf[i + 1]
          thirdByte = buf[i + 2]
          fourthByte = buf[i + 3]
          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {
            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)
            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {
              codePoint = tempCodePoint
            }
          }
      }
    }

    if (codePoint === null) {
      // we did not generate a valid codePoint so insert a
      // replacement char (U+FFFD) and advance only 1 byte
      codePoint = 0xFFFD
      bytesPerSequence = 1
    } else if (codePoint > 0xFFFF) {
      // encode to utf16 (surrogate pair dance)
      codePoint -= 0x10000
      res.push(codePoint >>> 10 & 0x3FF | 0xD800)
      codePoint = 0xDC00 | codePoint & 0x3FF
    }

    res.push(codePoint)
    i += bytesPerSequence
  }

  return decodeCodePointsArray(res)
}

// Based on http://stackoverflow.com/a/22747272/680742, the browser with
// the lowest limit is Chrome, with 0x10000 args.
// We go 1 magnitude less, for safety
var MAX_ARGUMENTS_LENGTH = 0x1000

function decodeCodePointsArray (codePoints) {
  var len = codePoints.length
  if (len <= MAX_ARGUMENTS_LENGTH) {
    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()
  }

  // Decode in chunks to avoid "call stack size exceeded".
  var res = ''
  var i = 0
  while (i < len) {
    res += String.fromCharCode.apply(
      String,
      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)
    )
  }
  return res
}

function asciiSlice (buf, start, end) {
  var ret = ''
  end = Math.min(buf.length, end)

  for (var i = start; i < end; ++i) {
    ret += String.fromCharCode(buf[i] & 0x7F)
  }
  return ret
}

function latin1Slice (buf, start, end) {
  var ret = ''
  end = Math.min(buf.length, end)

  for (var i = start; i < end; ++i) {
    ret += String.fromCharCode(buf[i])
  }
  return ret
}

function hexSlice (buf, start, end) {
  var len = buf.length

  if (!start || start < 0) start = 0
  if (!end || end < 0 || end > len) end = len

  var out = ''
  for (var i = start; i < end; ++i) {
    out += toHex(buf[i])
  }
  return out
}

function utf16leSlice (buf, start, end) {
  var bytes = buf.slice(start, end)
  var res = ''
  for (var i = 0; i < bytes.length; i += 2) {
    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)
  }
  return res
}

Buffer.prototype.slice = function slice (start, end) {
  var len = this.length
  start = ~~start
  end = end === undefined ? len : ~~end

  if (start < 0) {
    start += len
    if (start < 0) start = 0
  } else if (start > len) {
    start = len
  }

  if (end < 0) {
    end += len
    if (end < 0) end = 0
  } else if (end > len) {
    end = len
  }

  if (end < start) end = start

  var newBuf
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    newBuf = this.subarray(start, end)
    newBuf.__proto__ = Buffer.prototype
  } else {
    var sliceLen = end - start
    newBuf = new Buffer(sliceLen, undefined)
    for (var i = 0; i < sliceLen; ++i) {
      newBuf[i] = this[i + start]
    }
  }

  return newBuf
}

/*
 * Need to make sure that buffer isn't trying to write out of bounds.
 */
function checkOffset (offset, ext, length) {
  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')
  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')
}

Buffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) checkOffset(offset, byteLength, this.length)

  var val = this[offset]
  var mul = 1
  var i = 0
  while (++i < byteLength && (mul *= 0x100)) {
    val += this[offset + i] * mul
  }

  return val
}

Buffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) {
    checkOffset(offset, byteLength, this.length)
  }

  var val = this[offset + --byteLength]
  var mul = 1
  while (byteLength > 0 && (mul *= 0x100)) {
    val += this[offset + --byteLength] * mul
  }

  return val
}

Buffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 1, this.length)
  return this[offset]
}

Buffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 2, this.length)
  return this[offset] | (this[offset + 1] << 8)
}

Buffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 2, this.length)
  return (this[offset] << 8) | this[offset + 1]
}

Buffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 4, this.length)

  return ((this[offset]) |
      (this[offset + 1] << 8) |
      (this[offset + 2] << 16)) +
      (this[offset + 3] * 0x1000000)
}

Buffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 4, this.length)

  return (this[offset] * 0x1000000) +
    ((this[offset + 1] << 16) |
    (this[offset + 2] << 8) |
    this[offset + 3])
}

Buffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) checkOffset(offset, byteLength, this.length)

  var val = this[offset]
  var mul = 1
  var i = 0
  while (++i < byteLength && (mul *= 0x100)) {
    val += this[offset + i] * mul
  }
  mul *= 0x80

  if (val >= mul) val -= Math.pow(2, 8 * byteLength)

  return val
}

Buffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) checkOffset(offset, byteLength, this.length)

  var i = byteLength
  var mul = 1
  var val = this[offset + --i]
  while (i > 0 && (mul *= 0x100)) {
    val += this[offset + --i] * mul
  }
  mul *= 0x80

  if (val >= mul) val -= Math.pow(2, 8 * byteLength)

  return val
}

Buffer.prototype.readInt8 = function readInt8 (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 1, this.length)
  if (!(this[offset] & 0x80)) return (this[offset])
  return ((0xff - this[offset] + 1) * -1)
}

Buffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 2, this.length)
  var val = this[offset] | (this[offset + 1] << 8)
  return (val & 0x8000) ? val | 0xFFFF0000 : val
}

Buffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 2, this.length)
  var val = this[offset + 1] | (this[offset] << 8)
  return (val & 0x8000) ? val | 0xFFFF0000 : val
}

Buffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 4, this.length)

  return (this[offset]) |
    (this[offset + 1] << 8) |
    (this[offset + 2] << 16) |
    (this[offset + 3] << 24)
}

Buffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 4, this.length)

  return (this[offset] << 24) |
    (this[offset + 1] << 16) |
    (this[offset + 2] << 8) |
    (this[offset + 3])
}

Buffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 4, this.length)
  return ieee754.read(this, offset, true, 23, 4)
}

Buffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 4, this.length)
  return ieee754.read(this, offset, false, 23, 4)
}

Buffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 8, this.length)
  return ieee754.read(this, offset, true, 52, 8)
}

Buffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 8, this.length)
  return ieee754.read(this, offset, false, 52, 8)
}

function checkInt (buf, value, offset, ext, max, min) {
  if (!Buffer.isBuffer(buf)) throw new TypeError('"buffer" argument must be a Buffer instance')
  if (value > max || value < min) throw new RangeError('"value" argument is out of bounds')
  if (offset + ext > buf.length) throw new RangeError('Index out of range')
}

Buffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {
  value = +value
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) {
    var maxBytes = Math.pow(2, 8 * byteLength) - 1
    checkInt(this, value, offset, byteLength, maxBytes, 0)
  }

  var mul = 1
  var i = 0
  this[offset] = value & 0xFF
  while (++i < byteLength && (mul *= 0x100)) {
    this[offset + i] = (value / mul) & 0xFF
  }

  return offset + byteLength
}

Buffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {
  value = +value
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) {
    var maxBytes = Math.pow(2, 8 * byteLength) - 1
    checkInt(this, value, offset, byteLength, maxBytes, 0)
  }

  var i = byteLength - 1
  var mul = 1
  this[offset + i] = value & 0xFF
  while (--i >= 0 && (mul *= 0x100)) {
    this[offset + i] = (value / mul) & 0xFF
  }

  return offset + byteLength
}

Buffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)
  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)
  this[offset] = (value & 0xff)
  return offset + 1
}

function objectWriteUInt16 (buf, value, offset, littleEndian) {
  if (value < 0) value = 0xffff + value + 1
  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {
    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>
      (littleEndian ? i : 1 - i) * 8
  }
}

Buffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value & 0xff)
    this[offset + 1] = (value >>> 8)
  } else {
    objectWriteUInt16(this, value, offset, true)
  }
  return offset + 2
}

Buffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value >>> 8)
    this[offset + 1] = (value & 0xff)
  } else {
    objectWriteUInt16(this, value, offset, false)
  }
  return offset + 2
}

function objectWriteUInt32 (buf, value, offset, littleEndian) {
  if (value < 0) value = 0xffffffff + value + 1
  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {
    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff
  }
}

Buffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset + 3] = (value >>> 24)
    this[offset + 2] = (value >>> 16)
    this[offset + 1] = (value >>> 8)
    this[offset] = (value & 0xff)
  } else {
    objectWriteUInt32(this, value, offset, true)
  }
  return offset + 4
}

Buffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value >>> 24)
    this[offset + 1] = (value >>> 16)
    this[offset + 2] = (value >>> 8)
    this[offset + 3] = (value & 0xff)
  } else {
    objectWriteUInt32(this, value, offset, false)
  }
  return offset + 4
}

Buffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) {
    var limit = Math.pow(2, 8 * byteLength - 1)

    checkInt(this, value, offset, byteLength, limit - 1, -limit)
  }

  var i = 0
  var mul = 1
  var sub = 0
  this[offset] = value & 0xFF
  while (++i < byteLength && (mul *= 0x100)) {
    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {
      sub = 1
    }
    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF
  }

  return offset + byteLength
}

Buffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) {
    var limit = Math.pow(2, 8 * byteLength - 1)

    checkInt(this, value, offset, byteLength, limit - 1, -limit)
  }

  var i = byteLength - 1
  var mul = 1
  var sub = 0
  this[offset + i] = value & 0xFF
  while (--i >= 0 && (mul *= 0x100)) {
    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {
      sub = 1
    }
    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF
  }

  return offset + byteLength
}

Buffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)
  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)
  if (value < 0) value = 0xff + value + 1
  this[offset] = (value & 0xff)
  return offset + 1
}

Buffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value & 0xff)
    this[offset + 1] = (value >>> 8)
  } else {
    objectWriteUInt16(this, value, offset, true)
  }
  return offset + 2
}

Buffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value >>> 8)
    this[offset + 1] = (value & 0xff)
  } else {
    objectWriteUInt16(this, value, offset, false)
  }
  return offset + 2
}

Buffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value & 0xff)
    this[offset + 1] = (value >>> 8)
    this[offset + 2] = (value >>> 16)
    this[offset + 3] = (value >>> 24)
  } else {
    objectWriteUInt32(this, value, offset, true)
  }
  return offset + 4
}

Buffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)
  if (value < 0) value = 0xffffffff + value + 1
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value >>> 24)
    this[offset + 1] = (value >>> 16)
    this[offset + 2] = (value >>> 8)
    this[offset + 3] = (value & 0xff)
  } else {
    objectWriteUInt32(this, value, offset, false)
  }
  return offset + 4
}

function checkIEEE754 (buf, value, offset, ext, max, min) {
  if (offset + ext > buf.length) throw new RangeError('Index out of range')
  if (offset < 0) throw new RangeError('Index out of range')
}

function writeFloat (buf, value, offset, littleEndian, noAssert) {
  if (!noAssert) {
    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)
  }
  ieee754.write(buf, value, offset, littleEndian, 23, 4)
  return offset + 4
}

Buffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {
  return writeFloat(this, value, offset, true, noAssert)
}

Buffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {
  return writeFloat(this, value, offset, false, noAssert)
}

function writeDouble (buf, value, offset, littleEndian, noAssert) {
  if (!noAssert) {
    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)
  }
  ieee754.write(buf, value, offset, littleEndian, 52, 8)
  return offset + 8
}

Buffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {
  return writeDouble(this, value, offset, true, noAssert)
}

Buffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {
  return writeDouble(this, value, offset, false, noAssert)
}

// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)
Buffer.prototype.copy = function copy (target, targetStart, start, end) {
  if (!start) start = 0
  if (!end && end !== 0) end = this.length
  if (targetStart >= target.length) targetStart = target.length
  if (!targetStart) targetStart = 0
  if (end > 0 && end < start) end = start

  // Copy 0 bytes; we're done
  if (end === start) return 0
  if (target.length === 0 || this.length === 0) return 0

  // Fatal error conditions
  if (targetStart < 0) {
    throw new RangeError('targetStart out of bounds')
  }
  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')
  if (end < 0) throw new RangeError('sourceEnd out of bounds')

  // Are we oob?
  if (end > this.length) end = this.length
  if (target.length - targetStart < end - start) {
    end = target.length - targetStart + start
  }

  var len = end - start
  var i

  if (this === target && start < targetStart && targetStart < end) {
    // descending copy from end
    for (i = len - 1; i >= 0; --i) {
      target[i + targetStart] = this[i + start]
    }
  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {
    // ascending copy from start
    for (i = 0; i < len; ++i) {
      target[i + targetStart] = this[i + start]
    }
  } else {
    Uint8Array.prototype.set.call(
      target,
      this.subarray(start, start + len),
      targetStart
    )
  }

  return len
}

// Usage:
//    buffer.fill(number[, offset[, end]])
//    buffer.fill(buffer[, offset[, end]])
//    buffer.fill(string[, offset[, end]][, encoding])
Buffer.prototype.fill = function fill (val, start, end, encoding) {
  // Handle string cases:
  if (typeof val === 'string') {
    if (typeof start === 'string') {
      encoding = start
      start = 0
      end = this.length
    } else if (typeof end === 'string') {
      encoding = end
      end = this.length
    }
    if (val.length === 1) {
      var code = val.charCodeAt(0)
      if (code < 256) {
        val = code
      }
    }
    if (encoding !== undefined && typeof encoding !== 'string') {
      throw new TypeError('encoding must be a string')
    }
    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {
      throw new TypeError('Unknown encoding: ' + encoding)
    }
  } else if (typeof val === 'number') {
    val = val & 255
  }

  // Invalid ranges are not set to a default, so can range check early.
  if (start < 0 || this.length < start || this.length < end) {
    throw new RangeError('Out of range index')
  }

  if (end <= start) {
    return this
  }

  start = start >>> 0
  end = end === undefined ? this.length : end >>> 0

  if (!val) val = 0

  var i
  if (typeof val === 'number') {
    for (i = start; i < end; ++i) {
      this[i] = val
    }
  } else {
    var bytes = Buffer.isBuffer(val)
      ? val
      : utf8ToBytes(new Buffer(val, encoding).toString())
    var len = bytes.length
    for (i = 0; i < end - start; ++i) {
      this[i + start] = bytes[i % len]
    }
  }

  return this
}

// HELPER FUNCTIONS
// ================

var INVALID_BASE64_RE = /[^+\/0-9A-Za-z-_]/g

function base64clean (str) {
  // Node strips out invalid characters like \n and \t from the string, base64-js does not
  str = stringtrim(str).replace(INVALID_BASE64_RE, '')
  // Node converts strings with length < 2 to ''
  if (str.length < 2) return ''
  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not
  while (str.length % 4 !== 0) {
    str = str + '='
  }
  return str
}

function stringtrim (str) {
  if (str.trim) return str.trim()
  return str.replace(/^\s+|\s+$/g, '')
}

function toHex (n) {
  if (n < 16) return '0' + n.toString(16)
  return n.toString(16)
}

function utf8ToBytes (string, units) {
  units = units || Infinity
  var codePoint
  var length = string.length
  var leadSurrogate = null
  var bytes = []

  for (var i = 0; i < length; ++i) {
    codePoint = string.charCodeAt(i)

    // is surrogate component
    if (codePoint > 0xD7FF && codePoint < 0xE000) {
      // last char was a lead
      if (!leadSurrogate) {
        // no lead yet
        if (codePoint > 0xDBFF) {
          // unexpected trail
          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)
          continue
        } else if (i + 1 === length) {
          // unpaired lead
          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)
          continue
        }

        // valid lead
        leadSurrogate = codePoint

        continue
      }

      // 2 leads in a row
      if (codePoint < 0xDC00) {
        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)
        leadSurrogate = codePoint
        continue
      }

      // valid surrogate pair
      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000
    } else if (leadSurrogate) {
      // valid bmp char, but last char was a lead
      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)
    }

    leadSurrogate = null

    // encode utf8
    if (codePoint < 0x80) {
      if ((units -= 1) < 0) break
      bytes.push(codePoint)
    } else if (codePoint < 0x800) {
      if ((units -= 2) < 0) break
      bytes.push(
        codePoint >> 0x6 | 0xC0,
        codePoint & 0x3F | 0x80
      )
    } else if (codePoint < 0x10000) {
      if ((units -= 3) < 0) break
      bytes.push(
        codePoint >> 0xC | 0xE0,
        codePoint >> 0x6 & 0x3F | 0x80,
        codePoint & 0x3F | 0x80
      )
    } else if (codePoint < 0x110000) {
      if ((units -= 4) < 0) break
      bytes.push(
        codePoint >> 0x12 | 0xF0,
        codePoint >> 0xC & 0x3F | 0x80,
        codePoint >> 0x6 & 0x3F | 0x80,
        codePoint & 0x3F | 0x80
      )
    } else {
      throw new Error('Invalid code point')
    }
  }

  return bytes
}

function asciiToBytes (str) {
  var byteArray = []
  for (var i = 0; i < str.length; ++i) {
    // Node's code seems to be doing this and not & 0x7F..
    byteArray.push(str.charCodeAt(i) & 0xFF)
  }
  return byteArray
}

function utf16leToBytes (str, units) {
  var c, hi, lo
  var byteArray = []
  for (var i = 0; i < str.length; ++i) {
    if ((units -= 2) < 0) break

    c = str.charCodeAt(i)
    hi = c >> 8
    lo = c % 256
    byteArray.push(lo)
    byteArray.push(hi)
  }

  return byteArray
}

function base64ToBytes (str) {
  return base64.toByteArray(base64clean(str))
}

function blitBuffer (src, dst, offset, length) {
  for (var i = 0; i < length; ++i) {
    if ((i + offset >= dst.length) || (i >= src.length)) break
    dst[i + offset] = src[i]
  }
  return i
}

function isnan (val) {
  return val !== val // eslint-disable-line no-self-compare
}


/***/ }),

/***/ "./node_modules/css-loader/dist/cjs.js??clonedRuleSet-10.use[1]!./node_modules/vue-loader/dist/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-10.use[2]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./resources/assets/js/video/LabRequestModal.vue?vue&type=style&index=0&id=0847a395&scoped=true&lang=css":
/*!**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js??clonedRuleSet-10.use[1]!./node_modules/vue-loader/dist/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-10.use[2]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./resources/assets/js/video/LabRequestModal.vue?vue&type=style&index=0&id=0847a395&scoped=true&lang=css ***!
  \**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../node_modules/css-loader/dist/runtime/api.js */ "./node_modules/css-loader/dist/runtime/api.js");
/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__);
// Imports

var ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default()(function(i){return i[1]});
// Module
___CSS_LOADER_EXPORT___.push([module.id, "\n#laboratorySearch[data-v-0847a395] {\r\n        margin-top: -1px;\n}\n.laboratory-check[data-v-0847a395] {\r\n        padding: 5px;\r\n        margin-left: 20px;\n}\n.form-check-label[data-v-0847a395] {\r\n        margin-left: 10px;\n}\n.form-check-input[data-v-0847a395] {\r\n        cursor: pointer;\r\n        transform: scale(1.5);\n}\n#modal-body-scroll[data-v-0847a395] {\r\n        max-height: 65vh; \r\n        overflow-y: auto;\n}\r\n", ""]);
// Exports
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (___CSS_LOADER_EXPORT___);


/***/ }),

/***/ "./node_modules/css-loader/dist/cjs.js??clonedRuleSet-10.use[1]!./node_modules/vue-loader/dist/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-10.use[2]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./resources/assets/js/video/PrescriptionModal.vue?vue&type=style&index=0&id=c2b74386&scoped=true&lang=css":
/*!****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js??clonedRuleSet-10.use[1]!./node_modules/vue-loader/dist/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-10.use[2]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./resources/assets/js/video/PrescriptionModal.vue?vue&type=style&index=0&id=c2b74386&scoped=true&lang=css ***!
  \****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../node_modules/css-loader/dist/runtime/api.js */ "./node_modules/css-loader/dist/runtime/api.js");
/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__);
// Imports

var ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default()(function(i){return i[1]});
// Module
___CSS_LOADER_EXPORT___.push([module.id, "\n.container[data-v-c2b74386] {\r\n        border: solid 1px lightgray;\r\n        padding-bottom: 12px;\n}\n.row-presLabel[data-v-c2b74386] {\r\n        display: flex;\n}\n.col-presLabel[data-v-c2b74386] {\r\n        flex: 1;\r\n        display: flex;\r\n        flex-direction: column;\r\n        align-items: center;\r\n        text-align: center;\n}\n.row-presLabel[data-v-c2b74386], .col-presLabel[data-v-c2b74386]{\r\n        font-size: 13px;\n}\nlabel[data-v-c2b74386] {\r\n        margin-bottom: 2px;\n}\n.col-Label[data-v-c2b74386] {\r\n        font-style: italic;\n}\n.underline[data-v-c2b74386] {\r\n        text-decoration: underline;\r\n        margin: 5px;\n}\n.row-circle[data-v-c2b74386] {\r\n        display: flex;\n}\n.circle1[data-v-c2b74386], .circle2[data-v-c2b74386], .circle3[data-v-c2b74386], .circle4[data-v-c2b74386], .circle5[data-v-c2b74386], .circle6[data-v-c2b74386], .circle7[data-v-c2b74386] {\r\n        width: 15px;\r\n        height: 15px;\r\n        border-radius: 50%;\r\n        border: solid 1px lightgrey;\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n        font-size: 9px;\r\n        font-weight: bold;\n}\n.circle1[data-v-c2b74386] {\r\n        margin-left: 28%;\n}\n.circle2[data-v-c2b74386] {\r\n        margin-left: 13%;\n}\n.circle3[data-v-c2b74386] {\r\n        margin-left: 9%;\n}\n.circle4[data-v-c2b74386] {\r\n        margin-left: 5%;\n}\n.circle5[data-v-c2b74386] {\r\n        margin-left: 5%;\n}\n.circle6[data-v-c2b74386] {\r\n        margin-top: 2%;\r\n        margin-left: 39%;\n}\n.circle7[data-v-c2b74386] {\r\n        margin-top: 2%;\r\n        margin-left: 15%;\n}\r\n", ""]);
// Exports
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (___CSS_LOADER_EXPORT___);


/***/ }),

/***/ "./node_modules/css-loader/dist/cjs.js??clonedRuleSet-10.use[1]!./node_modules/vue-loader/dist/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-10.use[2]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./resources/assets/js/video/VideoAppPregnant.vue?vue&type=style&index=0&id=1ef045ee&lang=css":
/*!***************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js??clonedRuleSet-10.use[1]!./node_modules/vue-loader/dist/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-10.use[2]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./resources/assets/js/video/VideoAppPregnant.vue?vue&type=style&index=0&id=1ef045ee&lang=css ***!
  \***************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../node_modules/css-loader/dist/runtime/api.js */ "./node_modules/css-loader/dist/runtime/api.js");
/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _node_modules_css_loader_dist_cjs_js_clonedRuleSet_10_use_1_css_index_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! -!../../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-10.use[1]!./css/index.css */ "./node_modules/css-loader/dist/cjs.js??clonedRuleSet-10.use[1]!./resources/assets/js/video/css/index.css");
// Imports


var ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default()(function(i){return i[1]});
___CSS_LOADER_EXPORT___.i(_node_modules_css_loader_dist_cjs_js_clonedRuleSet_10_use_1_css_index_css__WEBPACK_IMPORTED_MODULE_1__["default"]);
// Module
___CSS_LOADER_EXPORT___.push([module.id, "\n.padded-row td {\r\n        padding: 10px;\n}\n.padded-header {\r\n        padding: 10px;\n} \r\n", ""]);
// Exports
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (___CSS_LOADER_EXPORT___);


/***/ }),

/***/ "./node_modules/css-loader/dist/cjs.js??clonedRuleSet-10.use[1]!./resources/assets/js/video/css/index.css":
/*!****************************************************************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js??clonedRuleSet-10.use[1]!./resources/assets/js/video/css/index.css ***!
  \****************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../node_modules/css-loader/dist/runtime/api.js */ "./node_modules/css-loader/dist/runtime/api.js");
/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__);
// Imports

var ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default()(function(i){return i[1]});
// Module
___CSS_LOADER_EXPORT___.push([module.id, ".PrescripBorder {\r\n  border: 1px solid lightgrey;\r\n  margin-bottom: 10px;\r\n  padding-bottom: 10px;\r\n  margin-right: 15px;\r\n  margin-top: 3px;\r\n}\r\n.ExampleAscorbic {\r\n  font-size: 13px;\r\n}\r\n.row .examplePriscribe {\r\n  margin-bottom: -10px;\r\n  background-color: rgb(250, 246, 246);\r\n}\r\n.fade-enter,\r\n.fade-leave-to {\r\n  animation: fadeOut 2s;\r\n}\r\n.fade-in {\r\n  animation: fadeIn 2s;\r\n}\r\n@keyframes fadeIn {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n@keyframes fadeOut {\r\n  0% {\r\n    opacity: 1;\r\n  }\r\n  100% {\r\n    opacity: 0;\r\n  }\r\n}\r\n/*------------------------------------------*/\r\n\r\n.container-fluid {\r\n  border: 4px outset green;\r\n  /*height: 978px;\r\n    object-fit: cover;*/\r\n\r\n  width: 100vw;\r\n  height: 100vh;\r\n}\r\n#calling {\r\n  display: flex;\r\n  position: absolute;\r\n  text-align: center;\r\n  align-items: center;\r\n  justify-content: center;\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n.mainPic {\r\n  position: relative;\r\n  border: 2px outset transparent;\r\n  height: 100%;\r\n  width: 100%;\r\n}\r\n.img-fluid {\r\n  border: 3px outset transparent;\r\n  width: 100%;\r\n}\r\n.img2 {\r\n  border-radius: 30px;\r\n}\r\n.iconCall {\r\n  border: 1px outset transparent;\r\n  width: 100%;\r\n  bottom: 20px;\r\n  text-align: center;\r\n  opacity: 1;\r\n  transition: opacity 0.5s ease-in-out;\r\n}\r\n.iconCall.hidden {\r\n  display: none;\r\n  opacity: 0;\r\n}\r\n.mic-button {\r\n  border-radius: 50%;\r\n}\r\n.video-button {\r\n  border-radius: 50%;\r\n}\r\n.decline-button {\r\n  border-radius: 50%;\r\n  border: 0;\r\n}\r\n.upward-button {\r\n  border-radius: 50%;\r\n  border: 0;\r\n  margin-right: 8px;\r\n}\r\n.prescription-button {\r\n  border-radius: 50%;\r\n  margin-right: 8px;\r\n}\r\n.lab-button {\r\n  border-radius: 50%;\r\n}\r\n.telemedForm {\r\n  position: relative;\r\n  border: 2px outset black;\r\n  margin-top: 5px;\r\n  /* height: 917px;*/\r\n  padding: 0;\r\n  font-size: 14px;\r\n  font-family: Calibri;\r\n\r\n  height: 99%;\r\n}\r\n.tableForm {\r\n  position: relative;\r\n  border: 1px outset transparent;\r\n  /*max-height: 783px;*/\r\n  /*height: auto;*/\r\n  text-align: left;\r\n  line-height: 1.2;\r\n  font-size: 14px;\r\n  font-family: Calibri;\r\n  display: flex;\r\n  flex-direction: column;\r\n  overflow-y: auto;\r\n  overflow-x: hidden;\r\n\r\n  height: 83.5vh;\r\n}\r\n.dohLogo {\r\n  position: relative;\r\n  border: 1px outset transparent;\r\n  top: 10px;\r\n  left: 10px;\r\n  z-index: 2;\r\n  height: 72px;\r\n  width: 76px;\r\n}\r\n.formHeader {\r\n  position: absolute;\r\n  top: 15px;\r\n  left: 95px;\r\n  border: 1px outset transparent;\r\n  text-align: center;\r\n  line-height: 0.1px;\r\n  font-size: 13px;\r\n}\r\n.clinical {\r\n  position: relative;\r\n  text-align: center;\r\n  margin-top: 28px;\r\n  border: 1px outset transparent;\r\n  font-size: 18px;\r\n  font-family: Calibri;\r\n}\r\n\r\n.remotePlayerLayer {\r\n  /*height: 920px;*/\r\n  height: 98.5vh;\r\n}\r\n.remotePlayerDiv {\r\n  height: 960px;\r\n  width: 100%;\r\n}\r\n.localPlayerLayer {\r\n  height: 300px;\r\n  width: 250px;\r\n}\r\n\r\n.localPlayerLayer div {\r\n  border-radius: 10px;\r\n}\r\n.localPlayerDiv {\r\n  position: absolute;\r\n  /* right: 20px;\r\n    bottom: 10px;*/\r\n  bottom: 2%;\r\n  right: 2%;\r\n  border: 2px outset green;\r\n  border-radius: 11px;\r\n}\r\n/*------------------------------------------*/\r\n\r\n.prescription {\r\n  position: relative;\r\n  border: 2px outset transparent;\r\n  margin-top: 5px;\r\n  font-family: Calibri;\r\n}\r\n.textArea {\r\n  border: 1px outset black;\r\n}\r\n.btn {\r\n  position: relative;\r\n  margin-top: 5px;\r\n  margin-bottom: 5px;\r\n  /*margin-right: 5px;*/\r\n}\r\n.forDetails {\r\n  color: #e18e0b;\r\n}\r\n.caseforDetails {\r\n  color: #e18e0b;\r\n  line-height: 1.2;\r\n  white-space: pre-line;\r\n}\r\n.dateReferred {\r\n  color: #e18e0b;\r\n}\r\n.recoSummary {\r\n  color: #e18e0b;\r\n  line-height: 1.2;\r\n  white-space: pre-wrap;\r\n}\r\n.mdHcw {\r\n  color: #e18e0b;\r\n  line-height: 1.2;\r\n}\r\ntr:nth-child(odd) {\r\n  background-color: #f2f2f2;\r\n  border: 1px outset transparent;\r\n}\r\ntr:nth-child(even) {\r\n  background-color: white;\r\n  border: 1px outset transparent;\r\n}\r\n.mic-button-slash:before,\r\n.mic-button-slash:after {\r\n  content: \"\";\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 0;\r\n  right: 0;\r\n  transform: translateY(-50%);\r\n  height: 2px;\r\n  background-color: #ff0000;\r\n}\r\n.mic-button-slash:before {\r\n  transform: rotate(-45deg);\r\n  padding: 2px;\r\n}\r\n.mic-button-slash:after {\r\n  transform: rotate(-45deg);\r\n}\r\n.video-button-slash:before,\r\n.video-button-slash:after {\r\n  content: \"\";\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 0;\r\n  right: 0;\r\n  transform: translateY(-50%);\r\n  height: 2px;\r\n  background-color: #ff0000;\r\n}\r\n.video-button-slash:before {\r\n  transform: rotate(-45deg);\r\n  padding: 2px;\r\n}\r\n.video-button-slash:after {\r\n  transform: rotate(-45deg);\r\n}\r\n.video-button:hover,\r\n.mic-button:hover,\r\n.decline-button:hover,\r\n.upward-button:hover,\r\n.prescription-button:hover,\r\n.lab-button:hover {\r\n  background-color: rgba(2, 133, 221, 0.911);\r\n  box-shadow: 0 0.5rem 1rem rgba(2, 133, 221, 0.911);\r\n}\r\n\r\n/*MOBILE VIEWPORT*/\r\n\r\n@media only screen and (min-width: 280px) and (max-width: 280px) and (min-height: 653px) and (max-height: 653px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .telemedForm {\r\n    height: 766px;\r\n  }\r\n  .tableForm {\r\n    font-size: 8px;\r\n    height: 640px;\r\n    overflow-x: auto;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 32px;\r\n    width: 36px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    top: 6px;\r\n    left: 15px;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    font-size: 6.5px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 60px;\r\n    border: 1px outset transparent;\r\n    font-size: 11px;\r\n    font-family: Calibri;\r\n  }\r\n\r\n  .localPlayerDiv {\r\n    top: 20px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 120px;\r\n    width: 100px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 28vh;\r\n    width: 100%;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 601px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 649px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .img2 {\r\n    height: 120px;\r\n    width: 100px;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 653px) and (max-width: 653px) and (min-height: 280px) and (max-height: 280px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 15px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .formHeader {\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 120px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 100vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 228px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 276px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 320px) and (max-width: 320px) and (min-height: 480px) and (max-height: 480px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .telemedForm {\r\n    height: 766px;\r\n  }\r\n  .tableForm {\r\n    font-size: 9px;\r\n    height: 640px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 42px;\r\n    width: 46px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 5%;\r\n    right: 5%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 7px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 55px;\r\n    border: 1px outset transparent;\r\n    font-size: 11px;\r\n    font-family: Calibri;\r\n  }\r\n\r\n  .localPlayerDiv {\r\n    top: 20px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 114px;\r\n    width: 90px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 44vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 114px;\r\n    width: 90px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 428px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 476px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 480px) and (max-width: 480px) and (min-height: 320px) and (max-height: 320px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .telemedForm {\r\n    height: 766px;\r\n  }\r\n  .tableForm {\r\n    font-size: 11px;\r\n    height: 640px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 62px;\r\n    width: 66px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 5%;\r\n    right: 5%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 10px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 35px;\r\n    border: 1px outset transparent;\r\n    font-size: 14px;\r\n    font-family: Calibri;\r\n  }\r\n\r\n  .localPlayerDiv {\r\n    top: 20px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 114px;\r\n    width: 90px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 94vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 114px;\r\n    width: 90px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 268px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 316px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 320px) and (max-width: 320px) and (min-height: 568px) and (max-height: 568px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .telemedForm {\r\n    height: 766px;\r\n  }\r\n  .tableForm {\r\n    font-size: 9px;\r\n    height: 646px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 42px;\r\n    width: 46px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 5%;\r\n    right: 5%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 7px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 55px;\r\n    border: 1px outset transparent;\r\n    font-size: 11px;\r\n    font-family: Calibri;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 20px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 114px;\r\n    width: 90px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 38vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 114px;\r\n    width: 90px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 516px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 565px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 568px) and (max-width: 568px) and (min-height: 320px) and (max-height: 320px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .telemedForm {\r\n    height: 766px;\r\n  }\r\n  .tableForm {\r\n    font-size: 11px;\r\n    height: 645px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 62px;\r\n    width: 66px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 5%;\r\n    right: 5%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 11px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 35px;\r\n    border: 1px outset transparent;\r\n    font-size: 12px;\r\n    font-family: Calibri;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 20px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 114px;\r\n    width: 90px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 100vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 114px;\r\n    width: 90px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 268px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 316px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 320px) and (max-width: 320px) and (min-height: 640px) and (max-height: 640px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .telemedForm {\r\n    height: 766px;\r\n  }\r\n  .tableForm {\r\n    font-size: 9px;\r\n    height: 646px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 42px;\r\n    width: 46px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 5%;\r\n    right: 5%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 7px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 55px;\r\n    border: 1px outset transparent;\r\n    font-size: 11px;\r\n    font-family: Calibri;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 20px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 114px;\r\n    width: 90px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 34vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 114px;\r\n    width: 90px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 588px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 636px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 640px) and (max-width: 640px) and (min-height: 320px) and (max-height: 320px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 5px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 150px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 100vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 267px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 315px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 360px) and (max-width: 360px) and (min-height: 540px) and (max-height: 540px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .telemedForm {\r\n    height: 766px;\r\n  }\r\n  .tableForm {\r\n    font-size: 9px;\r\n    height: 646px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 42px;\r\n    width: 46px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 5%;\r\n    right: 5%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 8.5px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 55px;\r\n    border: 1px outset transparent;\r\n    font-size: 11px;\r\n    font-family: Calibri;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 20px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 114px;\r\n    width: 90px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 43vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 114px;\r\n    width: 90px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 488px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 536px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 540px) and (max-width: 540px) and (min-height: 360px) and (max-height: 360px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .telemedForm {\r\n    height: 766px;\r\n  }\r\n  .tableForm {\r\n    font-size: 11px;\r\n    height: 645px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 62px;\r\n    width: 66px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 5%;\r\n    right: 5%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 11px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 35px;\r\n    border: 1px outset transparent;\r\n    font-size: 12px;\r\n    font-family: Calibri;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 20px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 114px;\r\n    width: 90px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 100vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 114px;\r\n    width: 90px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 308px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 356px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 360px) and (max-width: 360px) and (min-height: 600px) and (max-height: 640px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .telemedForm {\r\n    height: 766px;\r\n  }\r\n  .tableForm {\r\n    font-size: 10px;\r\n    height: 640px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 42px;\r\n    width: 46px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    top: 11px;\r\n    left: 3px;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    font-size: 9px;\r\n  }\r\n\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 55px;\r\n    border: 1px outset transparent;\r\n    font-size: 15px;\r\n    font-family: Calibri;\r\n  }\r\n\r\n  .localPlayerDiv {\r\n    top: 20px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 36vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 590px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 638px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 600px) and (max-width: 640px) and (min-height: 360px) and (max-height: 360px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 5%;\r\n    right: 5%;\r\n    transform: translate(-0%, -50%);\r\n  }\r\n  .localPlayerDiv {\r\n    top: 195px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 100vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 308px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 356px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 360px) and (max-width: 360px) and (min-height: 641px) and (max-height: 740px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .telemedForm {\r\n    height: 766px;\r\n  }\r\n  .tableForm {\r\n    font-size: 10px;\r\n    height: 640px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 42px;\r\n    width: 46px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0;\r\n    top: 60px;\r\n    left: 5%;\r\n    right: 5%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 8px;\r\n  }\r\n\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 55px;\r\n    border: 1px outset transparent;\r\n    font-size: 15px;\r\n    font-family: Calibri;\r\n  }\r\n\r\n  .localPlayerDiv {\r\n    top: 20px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 34vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 688px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 736px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 641px) and (max-width: 740px) and (min-height: 360px) and (max-height: 360px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .formHeader {\r\n    left: 125px;\r\n    border: 1px outset transparent;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 195px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 100vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 308px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 356px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 360px) and (max-width: 360px) and (min-height: 741px) and (max-height: 760px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .telemedForm {\r\n    height: 766px;\r\n  }\r\n  .tableForm {\r\n    font-size: 10px;\r\n    height: 640px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 42px;\r\n    width: 46px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    top: 11px;\r\n    left: 3px;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    font-size: 9px;\r\n  }\r\n\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 55px;\r\n    border: 1px outset transparent;\r\n    font-size: 15px;\r\n    font-family: Calibri;\r\n  }\r\n\r\n  .localPlayerDiv {\r\n    top: 20px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 32vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 708px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 756px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 741px) and (max-width: 760px) and (min-height: 360px) and (max-height: 360px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .formHeader {\r\n    left: 140px;\r\n    border: 1px outset transparent;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 195px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 100vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 308px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 356px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 360px) and (max-width: 360px) and (min-height: 761px) and (max-height: 780px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .telemedForm {\r\n    height: 766px;\r\n  }\r\n  .tableForm {\r\n    font-size: 10px;\r\n    height: 640px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 42px;\r\n    width: 46px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    top: 11px;\r\n    left: 3px;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    font-size: 9px;\r\n  }\r\n\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 55px;\r\n    border: 1px outset transparent;\r\n    font-size: 15px;\r\n    font-family: Calibri;\r\n  }\r\n\r\n  .localPlayerDiv {\r\n    top: 20px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 32vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 728px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 776px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 761px) and (max-width: 780px) and (min-height: 360px) and (max-height: 360px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .formHeader {\r\n    left: 140px;\r\n    border: 1px outset transparent;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 195px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 100vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 308px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 356px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 360px) and (max-width: 360px) and (min-height: 781px) and (max-height: 800px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .telemedForm {\r\n    height: 766px;\r\n  }\r\n  .tableForm {\r\n    font-size: 10px;\r\n    height: 640px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 42px;\r\n    width: 46px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 2%;\r\n    right: 2%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 9px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 55px;\r\n    border: 1px outset transparent;\r\n    font-size: 15px;\r\n    font-family: Calibri;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 20px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 30vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 747px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 796px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 781px) and (max-width: 800px) and (min-height: 360px) and (max-height: 360px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .formHeader {\r\n    left: 175px;\r\n    border: 1px outset transparent;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 200px;\r\n    right: 10px;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 100vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 308px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 356px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 360px) and (max-width: 360px) and (min-height: 801px) and (max-height: 840px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .telemedForm {\r\n    height: 766px;\r\n  }\r\n  .tableForm {\r\n    font-size: 10px;\r\n    height: 640px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 42px;\r\n    width: 46px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 2%;\r\n    right: 2%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 9px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 55px;\r\n    border: 1px outset transparent;\r\n    font-size: 15px;\r\n    font-family: Calibri;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 20px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 30vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 787px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 836px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 801px) and (max-width: 840px) and (min-height: 360px) and (max-height: 360px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .formHeader {\r\n    left: 175px;\r\n    border: 1px outset transparent;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 200px;\r\n    right: 10px;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 100vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 308px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 356px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 375px) and (max-width: 375px) and (min-height: 640px) and (max-height: 667px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .telemedForm {\r\n    height: 766px;\r\n  }\r\n  .tableForm {\r\n    font-size: 10px;\r\n    height: 640px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 42px;\r\n    width: 46px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0;\r\n    top: 60px;\r\n    left: 5%;\r\n    right: 5%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 9px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 55px;\r\n    border: 1px outset transparent;\r\n    font-size: 15px;\r\n    font-family: Calibri;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 20px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 38vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 614px;\r\n    /*aspect-ratio: 4/3;*/\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 662px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    top: 50%;\r\n  }\r\n\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 640px) and (max-width: 667px) and (min-height: 375px) and (max-height: 375px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 210px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 100vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 323px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 371px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 375px) and (max-width: 375px) and (min-height: 720px) and (max-height: 812px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .telemedForm {\r\n    height: 766px;\r\n  }\r\n  .tableForm {\r\n    font-size: 10px;\r\n    height: 640px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 42px;\r\n    width: 46px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    top: 11px;\r\n    left: 11px;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    font-size: 9px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 55px;\r\n    border: 1px outset transparent;\r\n    font-size: 15px;\r\n    font-family: Calibri;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 40px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 32vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 762px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 810px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 720px) and (max-width: 812px) and (min-height: 375px) and (max-height: 375px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .tableForm {\r\n    font-size: 18px;\r\n    height: 639px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 10px;\r\n    left: 10px;\r\n    z-index: 2;\r\n    height: 92px;\r\n    width: 96px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    top: 15px;\r\n    left: 120px;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 1px;\r\n    font-size: 16px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 15px;\r\n    border: 1px outset transparent;\r\n    font-size: 24px;\r\n    font-family: Calibri;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 100vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 174px;\r\n    width: 150px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    top: auto;\r\n    right: 0;\r\n    bottom: 20px;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 174px;\r\n    width: 150px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 325px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 372px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 384px) and (max-width: 384px) and (min-height: 640px) and (max-height: 640px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .telemedForm {\r\n    height: 766px;\r\n  }\r\n  .tableForm {\r\n    font-size: 10px;\r\n    height: 640px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 42px;\r\n    width: 46px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 10px;\r\n  }\r\n\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 55px;\r\n    border: 1px outset transparent;\r\n    font-size: 15px;\r\n    font-family: Calibri;\r\n  }\r\n\r\n  .localPlayerDiv {\r\n    top: 20px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 40vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 587px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 635px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 640px) and (max-width: 640px) and (min-height: 384px) and (max-height: 384px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 5px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 230px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 100vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 331px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 380px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 384px) and (max-width: 385px) and (min-height: 854px) and (max-height: 854px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .telemedForm {\r\n    height: 766px;\r\n  }\r\n  .tableForm {\r\n    font-size: 10px;\r\n    height: 640px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 42px;\r\n    width: 46px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 10px;\r\n  }\r\n\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 55px;\r\n    border: 1px outset transparent;\r\n    font-size: 15px;\r\n    font-family: Calibri;\r\n  }\r\n\r\n  .localPlayerDiv {\r\n    top: 20px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 32vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 802px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 850px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 854px) and (max-width: 854px) and (min-height: 384px) and (max-height: 385px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .formHeader {\r\n    left: 175px;\r\n    border: 1px outset transparent;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 230px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 100vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 333px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 380px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 390px) and (max-width: 390px) and (min-height: 695px) and (max-height: 695px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .telemedForm {\r\n    height: 766px;\r\n  }\r\n  .tableForm {\r\n    font-size: 10px;\r\n    height: 640px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 42px;\r\n    width: 46px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 10px;\r\n  }\r\n\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 55px;\r\n    border: 1px outset transparent;\r\n    font-size: 15px;\r\n    font-family: Calibri;\r\n  }\r\n\r\n  .localPlayerDiv {\r\n    top: 20px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 38vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 643px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 690px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 695px) and (max-width: 695px) and (min-height: 390px) and (max-height: 390px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n  }\r\n  .localPlayerDiv {\r\n    top: 230px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 100vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 338px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 386px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 390px) and (max-width: 390px) and (min-height: 844px) and (max-height: 844px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .telemedForm {\r\n    height: 766px;\r\n  }\r\n  .tableForm {\r\n    font-size: 10px;\r\n    height: 640px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 42px;\r\n    width: 46px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0;\r\n    top: 60px;\r\n    left: 5%;\r\n    right: 5%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 9px;\r\n  }\r\n\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 55px;\r\n    border: 1px outset transparent;\r\n    font-size: 15px;\r\n    font-family: Calibri;\r\n  }\r\n\r\n  .localPlayerDiv {\r\n    top: 20px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 32vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 791px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 840px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 844px) and (max-width: 844px) and (min-height: 390px) and (max-height: 390px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .formHeader {\r\n    left: 175px;\r\n    border: 1px outset transparent;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 230px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 100vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 338px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 386px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 392px) and (max-width: 392px) and (min-height: 800px) and (max-height: 800px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .telemedForm {\r\n    height: 766px;\r\n  }\r\n  .tableForm {\r\n    font-size: 10px;\r\n    height: 640px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 42px;\r\n    width: 46px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 10px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 55px;\r\n    border: 1px outset transparent;\r\n    font-size: 15px;\r\n    font-family: Calibri;\r\n  }\r\n\r\n  .localPlayerDiv {\r\n    top: 20px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 33vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 748px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 796px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 800px) and (max-width: 800px) and (min-height: 392px) and (max-height: 392px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n  }\r\n  .localPlayerDiv {\r\n    top: 230px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 100vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 340px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 388px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 393px) and (max-width: 393px) and (min-height: 786px) and (max-height: 786px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .telemedForm {\r\n    height: 766px;\r\n  }\r\n  .tableForm {\r\n    font-size: 10px;\r\n    height: 640px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 42px;\r\n    width: 46px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 10px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 55px;\r\n    border: 1px outset transparent;\r\n    font-size: 15px;\r\n    font-family: Calibri;\r\n  }\r\n\r\n  .localPlayerDiv {\r\n    top: 20px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 33vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 734px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 782px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 786px) and (max-width: 786px) and (min-height: 393px) and (max-height: 393px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n  }\r\n  .localPlayerDiv {\r\n    top: 230px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 100vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 341px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 389px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 393px) and (max-width: 393px) and (min-height: 808px) and (max-height: 808px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .telemedForm {\r\n    height: 766px;\r\n  }\r\n  .tableForm {\r\n    font-size: 10px;\r\n    height: 640px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 42px;\r\n    width: 46px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 10px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 55px;\r\n    border: 1px outset transparent;\r\n    font-size: 15px;\r\n    font-family: Calibri;\r\n  }\r\n\r\n  .localPlayerDiv {\r\n    top: 20px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 33vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 756px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 804px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 808px) and (max-width: 808px) and (min-height: 393px) and (max-height: 393px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n  }\r\n  .localPlayerDiv {\r\n    top: 230px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 100vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 341px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 389px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 393px) and (max-width: 393px) and (min-height: 816px) and (max-height: 817px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .telemedForm {\r\n    height: 766px;\r\n  }\r\n  .tableForm {\r\n    font-size: 10px;\r\n    height: 640px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 42px;\r\n    width: 46px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 10px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 55px;\r\n    border: 1px outset transparent;\r\n    font-size: 15px;\r\n    font-family: Calibri;\r\n  }\r\n\r\n  .localPlayerDiv {\r\n    top: 20px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 33vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 764px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 812px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 816px) and (max-width: 817px) and (min-height: 393px) and (max-height: 393px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n  }\r\n  .localPlayerDiv {\r\n    top: 230px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 100vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 341px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 389px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 393px) and (max-width: 393px) and (min-height: 830px) and (max-height: 830px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .telemedForm {\r\n    height: 766px;\r\n  }\r\n  .tableForm {\r\n    font-size: 10px;\r\n    height: 640px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 42px;\r\n    width: 46px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 10px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 55px;\r\n    border: 1px outset transparent;\r\n    font-size: 15px;\r\n    font-family: Calibri;\r\n  }\r\n\r\n  .localPlayerDiv {\r\n    top: 20px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 33vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 778px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 826px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 830px) and (max-width: 830px) and (min-height: 393px) and (max-height: 393px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n  }\r\n  .localPlayerDiv {\r\n    top: 230px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 100vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 341px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 389px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 393px) and (max-width: 393px) and (min-height: 873px) and (max-height: 873px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .telemedForm {\r\n    height: 766px;\r\n  }\r\n  .tableForm {\r\n    font-size: 10px;\r\n    height: 640px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 42px;\r\n    width: 46px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 10px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 55px;\r\n    border: 1px outset transparent;\r\n    font-size: 15px;\r\n    font-family: Calibri;\r\n  }\r\n\r\n  .localPlayerDiv {\r\n    top: 20px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 31vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 820px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 868px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 873px) and (max-width: 873px) and (min-height: 393px) and (max-height: 393px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n  }\r\n  .localPlayerDiv {\r\n    top: 230px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 100vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 341px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 389px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 393px) and (max-width: 393px) and (min-height: 851px) and (max-height: 852px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .telemedForm {\r\n    height: 766px;\r\n  }\r\n  .tableForm {\r\n    font-size: 10px;\r\n    height: 640px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 42px;\r\n    width: 46px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0;\r\n    top: 60px;\r\n    left: 5%;\r\n    right: 5%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 9px;\r\n  }\r\n\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 55px;\r\n    border: 1px outset transparent;\r\n    font-size: 15px;\r\n    font-family: Calibri;\r\n  }\r\n\r\n  .localPlayerDiv {\r\n    top: 20px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 32vh;\r\n    width: 100%;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 799px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 847px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 851px) and (max-width: 852px) and (min-height: 393px) and (max-height: 393px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n  }\r\n  .localPlayerDiv {\r\n    top: 230px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 100vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 341px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 389px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 400px) and (max-width: 400px) and (min-height: 880px) and (max-height: 880px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .telemedForm {\r\n    height: 766px;\r\n  }\r\n  .tableForm {\r\n    font-size: 11px;\r\n    height: 640px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 52px;\r\n    width: 56px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 10px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 45px;\r\n    border: 1px outset transparent;\r\n    font-size: 15px;\r\n    font-family: Calibri;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 32vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 40px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 828px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 876px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 880px) and (max-width: 880px) and (min-height: 400px) and (max-height: 400px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n  }\r\n  .localPlayerDiv {\r\n    top: 235px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 100vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 348px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 396px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 411px) and (max-width: 412px) and (min-height: 731px) and (max-height: 732px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .telemedForm {\r\n    height: 766px;\r\n  }\r\n  .tableForm {\r\n    font-size: 11px;\r\n    height: 640px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 52px;\r\n    width: 56px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 10px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 45px;\r\n    border: 1px outset transparent;\r\n    font-size: 15px;\r\n    font-family: Calibri;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 38vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 20px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 679px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 727px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 731px) and (max-width: 732px) and (min-height: 411px) and (max-height: 412px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n  }\r\n  .localPlayerDiv {\r\n    top: 250px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 100vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 360px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 408px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 411px) and (max-width: 411px) and (min-height: 960px) and (max-height: 960px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .telemedForm {\r\n    height: 766px;\r\n  }\r\n  .tableForm {\r\n    font-size: 11px;\r\n    height: 640px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 52px;\r\n    width: 56px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 10px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 45px;\r\n    border: 1px outset transparent;\r\n    font-size: 15px;\r\n    font-family: Calibri;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 30vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 60px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 907px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 955px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 960px) and (max-width: 960px) and (min-height: 411px) and (max-height: 411px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 5%;\r\n    right: 5%;\r\n    transform: translate(-0%, -50%);\r\n  }\r\n  .localPlayerDiv {\r\n    top: 250px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 100vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 358px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 406px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 412px) and (max-width: 412px) and (min-height: 823px) and (max-height: 847px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .telemedForm {\r\n    height: 766px;\r\n  }\r\n  .tableForm {\r\n    height: 640px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 52px;\r\n    width: 56px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 10px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 45px;\r\n    border: 1px outset transparent;\r\n    font-size: 15px;\r\n    font-family: Calibri;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 34vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 20px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 794px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 843px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 823px) and (max-width: 847px) and (min-height: 412px) and (max-height: 412px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .telemedForm {\r\n    height: 766px;\r\n  }\r\n  .tableForm {\r\n    height: 640px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 52px;\r\n    width: 56px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 45px;\r\n    border: 1px outset transparent;\r\n    font-size: 15px;\r\n    font-family: Calibri;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 100vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 20px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 360px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 408px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 412px) and (max-width: 412px) and (min-height: 848px) and (max-height: 892px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .telemedForm {\r\n    height: 766px;\r\n  }\r\n  .tableForm {\r\n    font-size: 11px;\r\n    height: 640px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 52px;\r\n    width: 56px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 10px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 45px;\r\n    border: 1px outset transparent;\r\n    font-size: 15px;\r\n    font-family: Calibri;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 32vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 20px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 840px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 887px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 848px) and (max-width: 892px) and (min-height: 412px) and (max-height: 412px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n  }\r\n  .localPlayerDiv {\r\n    top: 250px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 100vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 362px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 409px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 412px) and (max-width: 412px) and (min-height: 906px) and (max-height: 915px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .telemedForm {\r\n    height: 766px;\r\n  }\r\n  .tableForm {\r\n    font-size: 11px;\r\n    height: 640px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 52px;\r\n    width: 56px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1;\r\n    top: 60px;\r\n    left: 5%;\r\n    right: 5%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 9px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 45px;\r\n    border: 1px outset transparent;\r\n    font-size: 15px;\r\n    font-family: Calibri;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 32vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 20px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 863px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 911px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 906px) and (max-width: 915px) and (min-height: 412px) and (max-height: 412px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .formHeader {\r\n    left: 220px;\r\n    border: 1px outset transparent;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 250px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 100vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 360px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 408px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 412px) and (max-width: 412px) and (min-height: 916px) and (max-height: 919px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .telemedForm {\r\n    height: 766px;\r\n  }\r\n  .tableForm {\r\n    font-size: 11px;\r\n    height: 640px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 52px;\r\n    width: 56px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 10px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 45px;\r\n    border: 1px outset transparent;\r\n    font-size: 15px;\r\n    font-family: Calibri;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 32vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 20px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 866px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 914px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 916px) and (max-width: 919px) and (min-height: 412px) and (max-height: 412px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n  }\r\n  .localPlayerDiv {\r\n    top: 250px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 100vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 360px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 408px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 412px) and (max-width: 412px) and (min-height: 1004px) and (max-height: 1004px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .telemedForm {\r\n    height: 766px;\r\n  }\r\n  .tableForm {\r\n    font-size: 11px;\r\n    height: 640px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 52px;\r\n    width: 56px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 10px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 45px;\r\n    border: 1px outset transparent;\r\n    font-size: 15px;\r\n    font-family: Calibri;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 28vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 20px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 936px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 984px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 1004px) and (max-width: 1004px) and (min-height: 412px) and (max-height: 412px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    top: 340px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .tableForm {\r\n    font-size: 9px;\r\n    height: 273px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 42px;\r\n    width: 46px;\r\n  }\r\n  .telemedForm {\r\n    height: 395px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 8px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 55px;\r\n    border: 1px outset transparent;\r\n    font-size: 12px;\r\n    font-family: Calibri;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 100vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 140px;\r\n    width: 114px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 250px;\r\n    right: 0px;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 140px;\r\n    width: 114px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 350px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 400px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 414px) and (max-width: 414px) and (min-height: 736px) and (max-height: 736px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .telemedForm {\r\n    height: 766px;\r\n  }\r\n  .tableForm {\r\n    font-size: 11px;\r\n    height: 640px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 52px;\r\n    width: 56px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 10px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 45px;\r\n    border: 1px outset transparent;\r\n    font-size: 15px;\r\n    font-family: Calibri;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 38vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 20px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 684px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 732px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 736px) and (max-width: 736px) and (min-height: 414px) and (max-height: 414px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n  }\r\n  .localPlayerDiv {\r\n    top: 250px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 100vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 362px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 410px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 414px) and (max-width: 414px) and (min-height: 896px) and (max-height: 896px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .telemedForm {\r\n    height: 766px;\r\n  }\r\n  .tableForm {\r\n    font-size: 11px;\r\n    height: 640px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 52px;\r\n    width: 56px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0;\r\n    top: 60px;\r\n    left: 5%;\r\n    right: 5%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 10px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 45px;\r\n    border: 1px outset transparent;\r\n    font-size: 15px;\r\n    font-family: Calibri;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 32vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 20px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 843px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 891px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 896px) and (max-width: 896px) and (min-height: 414px) and (max-height: 414px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .formHeader {\r\n    left: 200px;\r\n    border: 1px outset transparent;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 250px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 100vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 362px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 410px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 428px) and (max-width: 428px) and (min-height: 926px) and (max-height: 926px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .telemedForm {\r\n    height: 766px;\r\n  }\r\n  .tableForm {\r\n    font-size: 11px;\r\n    height: 640px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 52px;\r\n    width: 56px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 10px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 45px;\r\n    border: 1px outset transparent;\r\n    font-size: 15px;\r\n    font-family: Calibri;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 32vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 20px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 860px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 907px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 926px) and (max-width: 926px) and (min-height: 428px) and (max-height: 428px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n  }\r\n  .localPlayerDiv {\r\n    top: 250px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 100vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 370px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 418px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 430px) and (max-width: 430px) and (min-height: 932px) and (max-height: 932px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .telemedForm {\r\n    height: 766px;\r\n  }\r\n  .tableForm {\r\n    font-size: 11px;\r\n    height: 640px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 52px;\r\n    width: 56px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 10px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 45px;\r\n    border: 1px outset transparent;\r\n    font-size: 15px;\r\n    font-family: Calibri;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 32vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 20px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 880px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 914px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 932px) and (max-width: 932px) and (min-height: 430px) and (max-height: 430px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n  }\r\n  .localPlayerDiv {\r\n    top: 250px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 95vh;\r\n    width: 60%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 377px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 420px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 432px) and (max-width: 432px) and (min-height: 768px) and (max-height: 768px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .telemedForm {\r\n    height: 766px;\r\n  }\r\n  .tableForm {\r\n    font-size: 11px;\r\n    height: 640px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 52px;\r\n    width: 56px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 10px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 45px;\r\n    border: 1px outset transparent;\r\n    font-size: 15px;\r\n    font-family: Calibri;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 37vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 20px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 704px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 752px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 768px) and (max-width: 768px) and (min-height: 432px) and (max-height: 432px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 15px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n  }\r\n  .localPlayerDiv {\r\n    top: 260px;\r\n    right: 10px;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 100vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 374px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 422px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 540px) and (max-width: 540px) and (min-height: 960px) and (max-height: 960px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .telemedForm {\r\n    height: 766px;\r\n  }\r\n  .tableForm {\r\n    font-size: 11px;\r\n    height: 640px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 52px;\r\n    width: 56px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 10px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 45px;\r\n    border: 1px outset transparent;\r\n    font-size: 15px;\r\n    font-family: Calibri;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 40vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 140px;\r\n    width: 120px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    top: auto;\r\n    right: 0;\r\n    bottom: 20px;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 140px;\r\n    width: 120px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 893px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 941px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 960px) and (max-width: 962px) and (min-height: 540px) and (max-height: 540px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 5%;\r\n    right: 5%;\r\n    transform: translate(-0%, -50%);\r\n  }\r\n  .localPlayerDiv {\r\n    top: 370px;\r\n    right: 10px;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 100vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 480px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 528px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 768px) and (max-width: 768px) and (min-height: 1076px) and (max-height: 1076px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .tableForm {\r\n    font-size: 18px;\r\n    height: 648px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 10px;\r\n    left: 10px;\r\n    z-index: 2;\r\n    height: 92px;\r\n    width: 96px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 16px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 5px;\r\n    border: 1px outset transparent;\r\n    font-size: 24px;\r\n    font-family: Calibri;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 50vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 174px;\r\n    width: 150px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    top: auto;\r\n    right: 0;\r\n    bottom: 20px;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 174px;\r\n    width: 150px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 1008px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 1056px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 1076px) and (max-width: 1076px) and (min-height: 768px) and (max-height: 768px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 10px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .tableForm {\r\n    font-size: 10px;\r\n    height: 456px;\r\n  }\r\n  .telemedForm {\r\n    height: 582px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 9px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 42px;\r\n    width: 46px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 55px;\r\n    border: 1px outset transparent;\r\n    font-size: 14px;\r\n    font-family: Calibri;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 610px;\r\n    right: 10px;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 66vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 713px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 408px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    margin-top: 200px;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 884px) and (max-width: 884px) and (min-height: 1104px) and (max-height: 1104px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .formHeader {\r\n    left: 200px;\r\n    border: 1px outset transparent;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 880px;\r\n    right: 5px;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 204px;\r\n    width: 180px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 58vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 204px;\r\n    width: 180px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 1051px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 1100px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n/*TAB VIEWPORT*/\r\n\r\n@media only screen and (min-width: 540px) and (max-width: 540px) and (min-height: 720px) and (max-height: 720px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .telemedForm {\r\n    height: 766px;\r\n  }\r\n  .tableForm {\r\n    font-size: 11px;\r\n    height: 640px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 52px;\r\n    width: 56px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    top: 11px;\r\n    left: 95px;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    font-size: 10px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 45px;\r\n    border: 1px outset transparent;\r\n    font-size: 15px;\r\n    font-family: Calibri;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 52vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 140px;\r\n    width: 120px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    bottom: 560px;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 140px;\r\n    width: 120px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 668px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 716px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 720px) and (max-width: 720px) and (min-height: 540px) and (max-height: 540px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    top: 11px;\r\n    left: 125px;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 370px;\r\n    right: 20px;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 95vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 488px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 536px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 600px) and (max-width: 601px) and (min-height: 960px) and (max-height: 962px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .telemedForm {\r\n    height: 766px;\r\n  }\r\n  .tableForm {\r\n    height: 630px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 62px;\r\n    width: 66px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 5%;\r\n    right: 5%;\r\n    transform: translate(-0%, -50%);\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 45px;\r\n    border: 1px outset transparent;\r\n    font-size: 15px;\r\n    font-family: Calibri;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 42vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 20px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 910px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 958px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 960px) and (max-width: 962px) and (min-height: 600px) and (max-height: 601px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 5%;\r\n    right: 5%;\r\n    transform: translate(-0%, -50%);\r\n  }\r\n  .localPlayerDiv {\r\n    top: 430px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 100vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 550px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 597px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 768px) and (max-width: 768px) and (min-height: 1024px) and (max-height: 1024px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .tableForm {\r\n    font-size: 18px;\r\n    height: 635px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 10px;\r\n    left: 10px;\r\n    z-index: 2;\r\n    height: 92px;\r\n    width: 96px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    top: 18px;\r\n    left: 100px;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 1px;\r\n    font-size: 16px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 18px;\r\n    border: 1px outset transparent;\r\n    font-size: 24px;\r\n    font-family: Calibri;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 55vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 174px;\r\n    width: 150px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    top: auto;\r\n    right: 0;\r\n    bottom: 20px;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 174px;\r\n    width: 150px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 972px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 1020px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 1024px) and (max-width: 1024px) and (min-height: 768px) and (max-height: 768px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    top: 665px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .tableForm {\r\n    font-size: 11px;\r\n    height: 669px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 42px;\r\n    width: 46px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    top: 10px;\r\n    left: 20px;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    font-size: 8px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 55px;\r\n    border: 1px outset transparent;\r\n    font-size: 12px;\r\n    font-family: Calibri;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 65vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 140px;\r\n    width: 114px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 600px;\r\n    right: 0px;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 140px;\r\n    width: 114px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 690px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 740px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 800px) and (max-width: 800px) and (min-height: 1280px) and (max-height: 1280px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .tableForm {\r\n    font-size: 18px;\r\n    height: 639px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 10px;\r\n    left: 10px;\r\n    z-index: 2;\r\n    height: 92px;\r\n    width: 96px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    top: 15px;\r\n    left: 120px;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 1px;\r\n    font-size: 16px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 15px;\r\n    border: 1px outset transparent;\r\n    font-size: 24px;\r\n    font-family: Calibri;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 45vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 174px;\r\n    width: 150px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    top: auto;\r\n    right: 0;\r\n    bottom: 20px;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 174px;\r\n    width: 150px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 1228px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 1276px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 810px) and (max-width: 810px) and (min-height: 1080px) and (max-height: 1080px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .tableForm {\r\n    font-size: 18px;\r\n    height: 650px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 10px;\r\n    left: 10px;\r\n    z-index: 2;\r\n    height: 72px;\r\n    width: 76px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 5%;\r\n    right: 5%;\r\n    transform: translate(-0%, -50%);\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 25px;\r\n    border: 1px outset transparent;\r\n    font-size: 24px;\r\n    font-family: Calibri;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 50vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 174px;\r\n    width: 150px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    top: auto;\r\n    right: 0;\r\n    bottom: 20px;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 174px;\r\n    width: 150px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 1028px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 1076px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 1080px) and (max-width: 1080px) and (min-height: 810px) and (max-height: 810px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 170px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .tableForm {\r\n    font-size: 10px;\r\n    height: 667px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 9px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 42px;\r\n    width: 46px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 55px;\r\n    border: 1px outset transparent;\r\n    font-size: 14px;\r\n    font-family: Calibri;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 645px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 62vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 790px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 408px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    margin-top: 200px;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 820px) and (max-width: 820px) and (min-height: 1180px) and (max-height: 1180px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .tableForm {\r\n    font-size: 18px;\r\n    height: 639px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 10px;\r\n    left: 10px;\r\n    z-index: 2;\r\n    height: 92px;\r\n    width: 96px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0;\r\n    top: 60px;\r\n    left: 5%;\r\n    right: 5%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 16px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 15px;\r\n    border: 1px outset transparent;\r\n    font-size: 24px;\r\n    font-family: Calibri;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 50vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 174px;\r\n    width: 150px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    top: auto;\r\n    right: 0;\r\n    bottom: 20px;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 174px;\r\n    width: 150px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 1128px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 1176px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 1180px) and (max-width: 1180px) and (min-height: 820px) and (max-height: 820px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 170px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .tableForm {\r\n    font-size: 12px;\r\n    height: 665px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 5%;\r\n    right: 5%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 9.5px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 42px;\r\n    width: 46px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 55px;\r\n    border: 1px outset transparent;\r\n    font-size: 14px;\r\n    font-family: Calibri;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 655px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 70vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 790px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 408px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    margin-top: 200px;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 912px) and (max-width: 912px) and (min-height: 1368px) and (max-height: 1368px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 60px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .tableForm {\r\n    font-size: 18px;\r\n    height: 768px;\r\n    border: 1px outset transparent;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 10px;\r\n    left: 10px;\r\n    z-index: 2;\r\n    height: 92px;\r\n    width: 96px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    top: 15px;\r\n    left: 175px;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    font-size: 16px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 13px;\r\n    border: 1px outset transparent;\r\n    font-size: 24px;\r\n    font-family: Calibri;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 48vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 204px;\r\n    width: 180px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    top: auto;\r\n    right: 2%;\r\n    bottom: 100px;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 204px;\r\n    width: 180px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 1316px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 1323px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 1368px) and (max-width: 1368px) and (min-height: 912px) and (max-height: 912px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    top: 810px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .tableForm {\r\n    font-size: 12px;\r\n    height: 663px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 52px;\r\n    width: 56px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    top: 10px;\r\n    left: 30px;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    font-size: 11px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 45px;\r\n    border: 1px outset transparent;\r\n    font-size: 16px;\r\n    font-family: Calibri;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 70vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 180px;\r\n    width: 154px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 700px;\r\n    right: 10px;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 180px;\r\n    width: 154px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 850px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 900px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 1024px) and (max-width: 1024px) and (min-height: 600px) and (max-height: 600px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    top: 525px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .tableForm {\r\n    font-size: 8px;\r\n    height: 77vh;\r\n  }\r\n  .telemedForm {\r\n    height: 98%;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 42px;\r\n    width: 46px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    top: 10px;\r\n    left: 20px;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0;\r\n    font-size: 8px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 55px;\r\n    border: 1px outset transparent;\r\n    font-size: 12px;\r\n    font-family: Calibri;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 80vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 140px;\r\n    width: 114px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 430px;\r\n    right: 10px;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 140px;\r\n    width: 114px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 546px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 590px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 1024px) and (max-width: 1024px) and (min-height: 1366px) and (max-height: 1366px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n\r\n    position: relative; /* Add relative positioning to create a stacking context */\r\n  }\r\n  .iconCall {\r\n    bottom: 60px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .telemedForm {\r\n    position: absolute;\r\n    bottom: 0;\r\n    left: 0;\r\n    width: 100%;\r\n    border: 2px outset black;\r\n    margin-left: 2px;\r\n    margin-top: 2px;\r\n    margin-bottom: 9px;\r\n  }\r\n  .tableForm {\r\n    /*font-size: 18px;*/\r\n    /*height: 768px;*/\r\n    border: 1px outset transparent;\r\n\r\n    overflow-y: auto;\r\n    overflow-x: auto;\r\n    height: 88vh;\r\n  }\r\n  .dohLogo {\r\n    /* position: relative;\r\n        border: 1px outset transparent;\r\n        top: 10px;\r\n        left: 10px;\r\n        z-index: 2;*/\r\n\r\n    height: 12%;\r\n    width: 12%;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    top: 1%;\r\n    left: 1%;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    font-size: 10px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    border: 1px outset transparent;\r\n    margin-top: 20%;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 48vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 204px;\r\n    width: 180px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    /* top: auto;\r\n        right: 2%;*/\r\n    bottom: 12%;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 204px;\r\n    width: 180px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 1316px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 1323px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n/*DESKTOP VIEWPORT*/\r\n\r\n@media only screen and (min-width: 1920px) and (max-width: 1920px) and (min-height: 1080px) and (max-height: 1080px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 10px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .tableForm {\r\n    font-size: 18px;\r\n    height: 760px;\r\n  }\r\n  .telemedForm {\r\n    height: 900px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 10px;\r\n    left: 10px;\r\n    z-index: 2;\r\n    height: 72px;\r\n    width: 76px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 5%;\r\n    right: 5%;\r\n    transform: translate(-0%, -50%);\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 25px;\r\n    border: 1px outset transparent;\r\n    font-size: 24px;\r\n    font-family: Calibri;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 82vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 274px;\r\n    width: 250px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    top: auto;\r\n    right: 20px;\r\n    bottom: 15px;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 274px;\r\n    width: 250px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 1028px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 1070px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 1680px) and (max-width: 1680px) and (min-height: 1050px) and (max-height: 1050px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 10px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .tableForm {\r\n    height: 745px;\r\n  }\r\n  .telemedForm {\r\n    height: 870px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 52px;\r\n    width: 56px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 40px;\r\n    border: 1px outset transparent;\r\n    font-family: Calibri;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 76vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 204px;\r\n    width: 180px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    top: auto;\r\n    right: 20px;\r\n    bottom: 15px;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 204px;\r\n    width: 180px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 996px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 1044px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 1664px) and (max-width: 1664px) and (min-height: 1110px) and (max-height: 1110px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 10px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .tableForm {\r\n    height: 803px;\r\n  }\r\n  .telemedForm {\r\n    height: 931px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 52px;\r\n    width: 56px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 40px;\r\n    border: 1px outset transparent;\r\n    font-family: Calibri;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 72vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 204px;\r\n    width: 180px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    top: auto;\r\n    right: 20px;\r\n    bottom: 15px;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 204px;\r\n    width: 180px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 1050px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 1100px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 1620px) and (max-width: 1620px) and (min-height: 1080px) and (max-height: 1080px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 10px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .tableForm {\r\n    height: 773px;\r\n  }\r\n  .telemedForm {\r\n    height: 901px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 52px;\r\n    width: 56px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 40px;\r\n    border: 1px outset transparent;\r\n    font-family: Calibri;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 72vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 204px;\r\n    width: 180px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    top: auto;\r\n    right: 20px;\r\n    bottom: 15px;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 204px;\r\n    width: 180px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 1020px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 1072px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 1600px) and (max-width: 1600px) and (min-height: 1024px) and (max-height: 1024px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 10px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .tableForm {\r\n    height: 720px;\r\n  }\r\n  .telemedForm {\r\n    height: 845px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 52px;\r\n    width: 56px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 40px;\r\n    border: 1px outset transparent;\r\n    font-family: Calibri;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 76vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 204px;\r\n    width: 180px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    top: auto;\r\n    right: 20px;\r\n    bottom: 15px;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 204px;\r\n    width: 180px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 970px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 1010px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 1600px) and (max-width: 1600px) and (min-height: 900px) and (max-height: 900px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 10px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .tableForm {\r\n    height: 593px;\r\n  }\r\n  .telemedForm {\r\n    height: 721px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 52px;\r\n    width: 56px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 40px;\r\n    border: 1px outset transparent;\r\n    font-family: Calibri;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 82vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 204px;\r\n    width: 180px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    top: auto;\r\n    right: 20px;\r\n    bottom: 15px;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 204px;\r\n    width: 180px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 810px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 859px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 1536px) and (max-width: 1536px) and (min-height: 901px) and (max-height: 960px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 10px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .tableForm {\r\n    height: 652px;\r\n  }\r\n  .telemedForm {\r\n    height: 781px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 52px;\r\n    width: 56px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 40px;\r\n    border: 1px outset transparent;\r\n    font-family: Calibri;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 76vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 204px;\r\n    width: 180px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    top: auto;\r\n    right: 20px;\r\n    bottom: 15px;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 204px;\r\n    width: 180px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 890px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 940px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 1536px) and (max-width: 1536px) and (min-height: 864px) and (max-height: 864px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 10px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .tableForm {\r\n    height: 557px;\r\n  }\r\n  .telemedForm {\r\n    height: 685px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 52px;\r\n    width: 56px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 40px;\r\n    border: 1px outset transparent;\r\n    font-family: Calibri;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 82vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 204px;\r\n    width: 180px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    top: auto;\r\n    right: 20px;\r\n    bottom: 15px;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 204px;\r\n    width: 180px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 810px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 859px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 1500px) and (max-width: 1504px) and (min-height: 1000px) and (max-height: 1003px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 10px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .tableForm {\r\n    height: 695px;\r\n  }\r\n  .telemedForm {\r\n    height: 824px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 52px;\r\n    width: 56px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 40px;\r\n    border: 1px outset transparent;\r\n    font-family: Calibri;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 72vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 204px;\r\n    width: 180px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    top: auto;\r\n    right: 20px;\r\n    bottom: 15px;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 204px;\r\n    width: 180px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 940px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 995px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 1440px) and (max-width: 1440px) and (min-height: 901px) and (max-height: 960px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 10px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .tableForm {\r\n    height: 647px;\r\n  }\r\n  .telemedForm {\r\n    height: 781px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 52px;\r\n    width: 56px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 12px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 45px;\r\n    border: 1px outset transparent;\r\n    font-family: Calibri;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 72vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 204px;\r\n    width: 180px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    top: auto;\r\n    right: 20px;\r\n    bottom: 15px;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 204px;\r\n    width: 180px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 900px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 950px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 1440px) and (max-width: 1440px) and (min-height: 900px) and (max-height: 900px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 10px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .tableForm {\r\n    height: 590px;\r\n  }\r\n  .telemedForm {\r\n    height: 723px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 52px;\r\n    width: 56px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 12px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 45px;\r\n    border: 1px outset transparent;\r\n    font-family: Calibri;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 78vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 204px;\r\n    width: 180px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    top: auto;\r\n    right: 20px;\r\n    bottom: 15px;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 204px;\r\n    width: 180px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 847px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 860px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 1368px) and (max-width: 1368px) and (min-height: 912px) and (max-height: 912px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 10px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .tableForm {\r\n    height: 606px;\r\n  }\r\n  .telemedForm {\r\n    height: 733px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 52px;\r\n    width: 56px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 11px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 45px;\r\n    border: 1px outset transparent;\r\n    font-family: Calibri;\r\n    font-size: 16px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 74vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 204px;\r\n    width: 180px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    top: auto;\r\n    right: 20px;\r\n    bottom: 15px;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 204px;\r\n    width: 180px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 850px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 900px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 1360px) and (max-width: 1366px) and (min-height: 768px) and (max-height: 768px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 10px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .tableForm {\r\n    height: 462px;\r\n    font-size: 11px;\r\n  }\r\n  .telemedForm {\r\n    height: 590px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 52px;\r\n    width: 56px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 11px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 45px;\r\n    border: 1px outset transparent;\r\n    font-family: Calibri;\r\n    font-size: 16px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 84vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 204px;\r\n    width: 180px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    top: auto;\r\n    right: 20px;\r\n    bottom: 15px;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 204px;\r\n    width: 180px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 715px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 760px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 1280px) and (max-width: 1280px) and (min-height: 1024px) and (max-height: 1024px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 10px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .tableForm {\r\n    font-size: 11px;\r\n    height: 721px;\r\n  }\r\n  .telemedForm {\r\n    height: 845px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 56px;\r\n    width: 60px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    top: 10px;\r\n    left: 25px;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    font-size: 10px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 40px;\r\n    border: 1px outset transparent;\r\n    font-size: 13px;\r\n    font-family: Calibri;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 60vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 200px;\r\n    width: 174px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    top: auto;\r\n    right: 10px;\r\n    bottom: 15px;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 200px;\r\n    width: 174px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 960px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 1010px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 1280px) and (max-width: 1280px) and (min-height: 960px) and (max-height: 960px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 10px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .tableForm {\r\n    font-size: 11px;\r\n    height: 657px;\r\n  }\r\n  .telemedForm {\r\n    height: 781px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 56px;\r\n    width: 60px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    top: 10px;\r\n    left: 25px;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    font-size: 10px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 40px;\r\n    border: 1px outset transparent;\r\n    font-size: 13px;\r\n    font-family: Calibri;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 63vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 200px;\r\n    width: 174px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    top: auto;\r\n    right: 10px;\r\n    bottom: 15px;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 200px;\r\n    width: 174px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 906px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 950px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 1280px) and (max-width: 1280px) and (min-height: 920px) and (max-height: 920px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 10px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .tableForm {\r\n    font-size: 11px;\r\n    height: 617px;\r\n  }\r\n  .telemedForm {\r\n    height: 741px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 56px;\r\n    width: 60px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    top: 10px;\r\n    left: 25px;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    font-size: 10px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 40px;\r\n    border: 1px outset transparent;\r\n    font-size: 13px;\r\n    font-family: Calibri;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 64vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 200px;\r\n    width: 174px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    top: auto;\r\n    right: 10px;\r\n    bottom: 15px;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 200px;\r\n    width: 174px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 866px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 910px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 1280px) and (max-width: 1280px) and (min-height: 800px) and (max-height: 800px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 10px;\r\n  }\r\n  .container-fluid {\r\n    /* border: 1px outset green;\r\n        height: auto;*/\r\n  }\r\n  .tableForm {\r\n    font-size: 11px;\r\n    height: 82.5vh;\r\n  }\r\n  .telemedForm {\r\n    /*height: 621px;*/\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 56px;\r\n    width: 60px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    top: 10px;\r\n    left: 35px;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    font-size: 10px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 40px;\r\n    border: 1px outset transparent;\r\n    font-size: 13px;\r\n    font-family: Calibri;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 78vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 170px;\r\n    width: 144px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    top: auto;\r\n    right: 10px;\r\n    bottom: 20px;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 170px;\r\n    width: 144px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 740px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 790px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 1280px) and (max-width: 1280px) and (min-height: 768px) and (max-height: 768px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 10px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .tableForm {\r\n    font-size: 11px;\r\n    height: 467px;\r\n  }\r\n  .telemedForm {\r\n    height: 589px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 56px;\r\n    width: 60px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    top: 10px;\r\n    left: 35px;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    font-size: 10px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 40px;\r\n    border: 1px outset transparent;\r\n    font-size: 13px;\r\n    font-family: Calibri;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 79vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 170px;\r\n    width: 144px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    top: auto;\r\n    right: 10px;\r\n    bottom: 20px;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 170px;\r\n    width: 144px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 714px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 760px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 1280px) and (max-width: 1280px) and (min-height: 720px) and (max-height: 720px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 10px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .tableForm {\r\n    font-size: 11px;\r\n    height: 420px;\r\n  }\r\n  .telemedForm {\r\n    height: 542px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 52px;\r\n    width: 56px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 5%;\r\n    right: 5%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 9px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 45px;\r\n    border: 1px outset transparent;\r\n    font-size: 13px;\r\n    font-family: Calibri;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 84vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 170px;\r\n    width: 144px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 530px;\r\n    right: 10px;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 170px;\r\n    width: 144px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 667px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 715px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 1152px) and (max-width: 1152px) and (min-height: 864px) and (max-height: 864px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 10px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .tableForm {\r\n    font-size: 11px;\r\n    height: 562px;\r\n  }\r\n  .telemedForm {\r\n    height: 685px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 52px;\r\n    width: 56px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 5%;\r\n    right: 5%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 9px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 45px;\r\n    border: 1px outset transparent;\r\n    font-size: 13px;\r\n    font-family: Calibri;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 64vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 170px;\r\n    width: 144px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 675px;\r\n    right: 10px;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 170px;\r\n    width: 144px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 810px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 850px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 800px) and (max-width: 800px) and (min-height: 600px) and (max-height: 600px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 15px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .tableForm {\r\n    font-size: 15px;\r\n    height: 555px;\r\n  }\r\n  .telemedForm {\r\n    height: 685px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 15px;\r\n    left: 15px;\r\n    z-index: 2;\r\n    height: 72px;\r\n    width: 76px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 5%;\r\n    right: 5%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 13px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 25px;\r\n    border: 1px outset transparent;\r\n    font-size: 18px;\r\n    font-family: Calibri;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 90vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 170px;\r\n    width: 144px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 400px;\r\n    right: 10px;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 170px;\r\n    width: 144px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 547px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 596px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n.tooltip-text {\r\n  visibility: visible;\r\n  color: #fff;\r\n  text-align: center;\r\n  padding: 5px 10px;\r\n  border-radius: 5px;\r\n  position: absolute;\r\n  z-index: 1;\r\n  bottom: 100%; /* Position above the button */\r\n  left: 50%;\r\n  transform: translateX(-50%);\r\n  white-space: nowrap;\r\n}\r\n\r\n.tooltip-container:hover .tooltip-text {\r\n  visibility: visible;\r\n}\r\n", ""]);
// Exports
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (___CSS_LOADER_EXPORT___);


/***/ }),

/***/ "./node_modules/css-loader/dist/runtime/api.js":
/*!*****************************************************!*\
  !*** ./node_modules/css-loader/dist/runtime/api.js ***!
  \*****************************************************/
/***/ ((module) => {

"use strict";


/*
  MIT License http://www.opensource.org/licenses/mit-license.php
  Author Tobias Koppers @sokra
*/
// css base code, injected by the css-loader
// eslint-disable-next-line func-names
module.exports = function (cssWithMappingToString) {
  var list = []; // return the list of modules as css string

  list.toString = function toString() {
    return this.map(function (item) {
      var content = cssWithMappingToString(item);

      if (item[2]) {
        return "@media ".concat(item[2], " {").concat(content, "}");
      }

      return content;
    }).join("");
  }; // import a list of modules into the list
  // eslint-disable-next-line func-names


  list.i = function (modules, mediaQuery, dedupe) {
    if (typeof modules === "string") {
      // eslint-disable-next-line no-param-reassign
      modules = [[null, modules, ""]];
    }

    var alreadyImportedModules = {};

    if (dedupe) {
      for (var i = 0; i < this.length; i++) {
        // eslint-disable-next-line prefer-destructuring
        var id = this[i][0];

        if (id != null) {
          alreadyImportedModules[id] = true;
        }
      }
    }

    for (var _i = 0; _i < modules.length; _i++) {
      var item = [].concat(modules[_i]);

      if (dedupe && alreadyImportedModules[item[0]]) {
        // eslint-disable-next-line no-continue
        continue;
      }

      if (mediaQuery) {
        if (!item[2]) {
          item[2] = mediaQuery;
        } else {
          item[2] = "".concat(mediaQuery, " and ").concat(item[2]);
        }
      }

      list.push(item);
    }
  };

  return list;
};

/***/ }),

/***/ "./node_modules/ieee754/index.js":
/*!***************************************!*\
  !*** ./node_modules/ieee754/index.js ***!
  \***************************************/
/***/ ((__unused_webpack_module, exports) => {

/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
exports.read = function (buffer, offset, isLE, mLen, nBytes) {
  var e, m
  var eLen = (nBytes * 8) - mLen - 1
  var eMax = (1 << eLen) - 1
  var eBias = eMax >> 1
  var nBits = -7
  var i = isLE ? (nBytes - 1) : 0
  var d = isLE ? -1 : 1
  var s = buffer[offset + i]

  i += d

  e = s & ((1 << (-nBits)) - 1)
  s >>= (-nBits)
  nBits += eLen
  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}

  m = e & ((1 << (-nBits)) - 1)
  e >>= (-nBits)
  nBits += mLen
  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}

  if (e === 0) {
    e = 1 - eBias
  } else if (e === eMax) {
    return m ? NaN : ((s ? -1 : 1) * Infinity)
  } else {
    m = m + Math.pow(2, mLen)
    e = e - eBias
  }
  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)
}

exports.write = function (buffer, value, offset, isLE, mLen, nBytes) {
  var e, m, c
  var eLen = (nBytes * 8) - mLen - 1
  var eMax = (1 << eLen) - 1
  var eBias = eMax >> 1
  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)
  var i = isLE ? 0 : (nBytes - 1)
  var d = isLE ? 1 : -1
  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0

  value = Math.abs(value)

  if (isNaN(value) || value === Infinity) {
    m = isNaN(value) ? 1 : 0
    e = eMax
  } else {
    e = Math.floor(Math.log(value) / Math.LN2)
    if (value * (c = Math.pow(2, -e)) < 1) {
      e--
      c *= 2
    }
    if (e + eBias >= 1) {
      value += rt / c
    } else {
      value += rt * Math.pow(2, 1 - eBias)
    }
    if (value * c >= 2) {
      e++
      c /= 2
    }

    if (e + eBias >= eMax) {
      m = 0
      e = eMax
    } else if (e + eBias >= 1) {
      m = ((value * c) - 1) * Math.pow(2, mLen)
      e = e + eBias
    } else {
      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)
      e = 0
    }
  }

  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}

  e = (e << mLen) | m
  eLen += mLen
  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}

  buffer[offset + i - d] |= s * 128
}


/***/ }),

/***/ "./node_modules/isarray/index.js":
/*!***************************************!*\
  !*** ./node_modules/isarray/index.js ***!
  \***************************************/
/***/ ((module) => {

var toString = {}.toString;

module.exports = Array.isArray || function (arr) {
  return toString.call(arr) == '[object Array]';
};


/***/ }),

/***/ "./node_modules/process/browser.js":
/*!*****************************************!*\
  !*** ./node_modules/process/browser.js ***!
  \*****************************************/
/***/ ((module) => {

// shim for using process in browser
var process = module.exports = {};

// cached from whatever global is present so that test runners that stub it
// don't break things.  But we need to wrap it in a try catch in case it is
// wrapped in strict mode code which doesn't define any globals.  It's inside a
// function because try/catches deoptimize in certain engines.

var cachedSetTimeout;
var cachedClearTimeout;

function defaultSetTimout() {
    throw new Error('setTimeout has not been defined');
}
function defaultClearTimeout () {
    throw new Error('clearTimeout has not been defined');
}
(function () {
    try {
        if (typeof setTimeout === 'function') {
            cachedSetTimeout = setTimeout;
        } else {
            cachedSetTimeout = defaultSetTimout;
        }
    } catch (e) {
        cachedSetTimeout = defaultSetTimout;
    }
    try {
        if (typeof clearTimeout === 'function') {
            cachedClearTimeout = clearTimeout;
        } else {
            cachedClearTimeout = defaultClearTimeout;
        }
    } catch (e) {
        cachedClearTimeout = defaultClearTimeout;
    }
} ())
function runTimeout(fun) {
    if (cachedSetTimeout === setTimeout) {
        //normal enviroments in sane situations
        return setTimeout(fun, 0);
    }
    // if setTimeout wasn't available but was latter defined
    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {
        cachedSetTimeout = setTimeout;
        return setTimeout(fun, 0);
    }
    try {
        // when when somebody has screwed with setTimeout but no I.E. maddness
        return cachedSetTimeout(fun, 0);
    } catch(e){
        try {
            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally
            return cachedSetTimeout.call(null, fun, 0);
        } catch(e){
            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error
            return cachedSetTimeout.call(this, fun, 0);
        }
    }


}
function runClearTimeout(marker) {
    if (cachedClearTimeout === clearTimeout) {
        //normal enviroments in sane situations
        return clearTimeout(marker);
    }
    // if clearTimeout wasn't available but was latter defined
    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {
        cachedClearTimeout = clearTimeout;
        return clearTimeout(marker);
    }
    try {
        // when when somebody has screwed with setTimeout but no I.E. maddness
        return cachedClearTimeout(marker);
    } catch (e){
        try {
            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally
            return cachedClearTimeout.call(null, marker);
        } catch (e){
            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.
            // Some versions of I.E. have different rules for clearTimeout vs setTimeout
            return cachedClearTimeout.call(this, marker);
        }
    }



}
var queue = [];
var draining = false;
var currentQueue;
var queueIndex = -1;

function cleanUpNextTick() {
    if (!draining || !currentQueue) {
        return;
    }
    draining = false;
    if (currentQueue.length) {
        queue = currentQueue.concat(queue);
    } else {
        queueIndex = -1;
    }
    if (queue.length) {
        drainQueue();
    }
}

function drainQueue() {
    if (draining) {
        return;
    }
    var timeout = runTimeout(cleanUpNextTick);
    draining = true;

    var len = queue.length;
    while(len) {
        currentQueue = queue;
        queue = [];
        while (++queueIndex < len) {
            if (currentQueue) {
                currentQueue[queueIndex].run();
            }
        }
        queueIndex = -1;
        len = queue.length;
    }
    currentQueue = null;
    draining = false;
    runClearTimeout(timeout);
}

process.nextTick = function (fun) {
    var args = new Array(arguments.length - 1);
    if (arguments.length > 1) {
        for (var i = 1; i < arguments.length; i++) {
            args[i - 1] = arguments[i];
        }
    }
    queue.push(new Item(fun, args));
    if (queue.length === 1 && !draining) {
        runTimeout(drainQueue);
    }
};

// v8 likes predictible objects
function Item(fun, array) {
    this.fun = fun;
    this.array = array;
}
Item.prototype.run = function () {
    this.fun.apply(null, this.array);
};
process.title = 'browser';
process.browser = true;
process.env = {};
process.argv = [];
process.version = ''; // empty string to avoid regexp issues
process.versions = {};

function noop() {}

process.on = noop;
process.addListener = noop;
process.once = noop;
process.off = noop;
process.removeListener = noop;
process.removeAllListeners = noop;
process.emit = noop;
process.prependListener = noop;
process.prependOnceListener = noop;

process.listeners = function (name) { return [] }

process.binding = function (name) {
    throw new Error('process.binding is not supported');
};

process.cwd = function () { return '/' };
process.chdir = function (dir) {
    throw new Error('process.chdir is not supported');
};
process.umask = function() { return 0; };


/***/ }),

/***/ "./node_modules/regenerator-runtime/runtime.js":
/*!*****************************************************!*\
  !*** ./node_modules/regenerator-runtime/runtime.js ***!
  \*****************************************************/
/***/ ((module) => {

/**
 * Copyright (c) 2014-present, Facebook, Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */

var runtime = (function (exports) {
  "use strict";

  var Op = Object.prototype;
  var hasOwn = Op.hasOwnProperty;
  var undefined; // More compressible than void 0.
  var $Symbol = typeof Symbol === "function" ? Symbol : {};
  var iteratorSymbol = $Symbol.iterator || "@@iterator";
  var asyncIteratorSymbol = $Symbol.asyncIterator || "@@asyncIterator";
  var toStringTagSymbol = $Symbol.toStringTag || "@@toStringTag";

  function define(obj, key, value) {
    Object.defineProperty(obj, key, {
      value: value,
      enumerable: true,
      configurable: true,
      writable: true
    });
    return obj[key];
  }
  try {
    // IE 8 has a broken Object.defineProperty that only works on DOM objects.
    define({}, "");
  } catch (err) {
    define = function(obj, key, value) {
      return obj[key] = value;
    };
  }

  function wrap(innerFn, outerFn, self, tryLocsList) {
    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.
    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;
    var generator = Object.create(protoGenerator.prototype);
    var context = new Context(tryLocsList || []);

    // The ._invoke method unifies the implementations of the .next,
    // .throw, and .return methods.
    generator._invoke = makeInvokeMethod(innerFn, self, context);

    return generator;
  }
  exports.wrap = wrap;

  // Try/catch helper to minimize deoptimizations. Returns a completion
  // record like context.tryEntries[i].completion. This interface could
  // have been (and was previously) designed to take a closure to be
  // invoked without arguments, but in all the cases we care about we
  // already have an existing method we want to call, so there's no need
  // to create a new function object. We can even get away with assuming
  // the method takes exactly one argument, since that happens to be true
  // in every case, so we don't have to touch the arguments object. The
  // only additional allocation required is the completion record, which
  // has a stable shape and so hopefully should be cheap to allocate.
  function tryCatch(fn, obj, arg) {
    try {
      return { type: "normal", arg: fn.call(obj, arg) };
    } catch (err) {
      return { type: "throw", arg: err };
    }
  }

  var GenStateSuspendedStart = "suspendedStart";
  var GenStateSuspendedYield = "suspendedYield";
  var GenStateExecuting = "executing";
  var GenStateCompleted = "completed";

  // Returning this object from the innerFn has the same effect as
  // breaking out of the dispatch switch statement.
  var ContinueSentinel = {};

  // Dummy constructor functions that we use as the .constructor and
  // .constructor.prototype properties for functions that return Generator
  // objects. For full spec compliance, you may wish to configure your
  // minifier not to mangle the names of these two functions.
  function Generator() {}
  function GeneratorFunction() {}
  function GeneratorFunctionPrototype() {}

  // This is a polyfill for %IteratorPrototype% for environments that
  // don't natively support it.
  var IteratorPrototype = {};
  define(IteratorPrototype, iteratorSymbol, function () {
    return this;
  });

  var getProto = Object.getPrototypeOf;
  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));
  if (NativeIteratorPrototype &&
      NativeIteratorPrototype !== Op &&
      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {
    // This environment has a native %IteratorPrototype%; use it instead
    // of the polyfill.
    IteratorPrototype = NativeIteratorPrototype;
  }

  var Gp = GeneratorFunctionPrototype.prototype =
    Generator.prototype = Object.create(IteratorPrototype);
  GeneratorFunction.prototype = GeneratorFunctionPrototype;
  define(Gp, "constructor", GeneratorFunctionPrototype);
  define(GeneratorFunctionPrototype, "constructor", GeneratorFunction);
  GeneratorFunction.displayName = define(
    GeneratorFunctionPrototype,
    toStringTagSymbol,
    "GeneratorFunction"
  );

  // Helper for defining the .next, .throw, and .return methods of the
  // Iterator interface in terms of a single ._invoke method.
  function defineIteratorMethods(prototype) {
    ["next", "throw", "return"].forEach(function(method) {
      define(prototype, method, function(arg) {
        return this._invoke(method, arg);
      });
    });
  }

  exports.isGeneratorFunction = function(genFun) {
    var ctor = typeof genFun === "function" && genFun.constructor;
    return ctor
      ? ctor === GeneratorFunction ||
        // For the native GeneratorFunction constructor, the best we can
        // do is to check its .name property.
        (ctor.displayName || ctor.name) === "GeneratorFunction"
      : false;
  };

  exports.mark = function(genFun) {
    if (Object.setPrototypeOf) {
      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);
    } else {
      genFun.__proto__ = GeneratorFunctionPrototype;
      define(genFun, toStringTagSymbol, "GeneratorFunction");
    }
    genFun.prototype = Object.create(Gp);
    return genFun;
  };

  // Within the body of any async function, `await x` is transformed to
  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test
  // `hasOwn.call(value, "__await")` to determine if the yielded value is
  // meant to be awaited.
  exports.awrap = function(arg) {
    return { __await: arg };
  };

  function AsyncIterator(generator, PromiseImpl) {
    function invoke(method, arg, resolve, reject) {
      var record = tryCatch(generator[method], generator, arg);
      if (record.type === "throw") {
        reject(record.arg);
      } else {
        var result = record.arg;
        var value = result.value;
        if (value &&
            typeof value === "object" &&
            hasOwn.call(value, "__await")) {
          return PromiseImpl.resolve(value.__await).then(function(value) {
            invoke("next", value, resolve, reject);
          }, function(err) {
            invoke("throw", err, resolve, reject);
          });
        }

        return PromiseImpl.resolve(value).then(function(unwrapped) {
          // When a yielded Promise is resolved, its final value becomes
          // the .value of the Promise<{value,done}> result for the
          // current iteration.
          result.value = unwrapped;
          resolve(result);
        }, function(error) {
          // If a rejected Promise was yielded, throw the rejection back
          // into the async generator function so it can be handled there.
          return invoke("throw", error, resolve, reject);
        });
      }
    }

    var previousPromise;

    function enqueue(method, arg) {
      function callInvokeWithMethodAndArg() {
        return new PromiseImpl(function(resolve, reject) {
          invoke(method, arg, resolve, reject);
        });
      }

      return previousPromise =
        // If enqueue has been called before, then we want to wait until
        // all previous Promises have been resolved before calling invoke,
        // so that results are always delivered in the correct order. If
        // enqueue has not been called before, then it is important to
        // call invoke immediately, without waiting on a callback to fire,
        // so that the async generator function has the opportunity to do
        // any necessary setup in a predictable way. This predictability
        // is why the Promise constructor synchronously invokes its
        // executor callback, and why async functions synchronously
        // execute code before the first await. Since we implement simple
        // async functions in terms of async generators, it is especially
        // important to get this right, even though it requires care.
        previousPromise ? previousPromise.then(
          callInvokeWithMethodAndArg,
          // Avoid propagating failures to Promises returned by later
          // invocations of the iterator.
          callInvokeWithMethodAndArg
        ) : callInvokeWithMethodAndArg();
    }

    // Define the unified helper method that is used to implement .next,
    // .throw, and .return (see defineIteratorMethods).
    this._invoke = enqueue;
  }

  defineIteratorMethods(AsyncIterator.prototype);
  define(AsyncIterator.prototype, asyncIteratorSymbol, function () {
    return this;
  });
  exports.AsyncIterator = AsyncIterator;

  // Note that simple async functions are implemented on top of
  // AsyncIterator objects; they just return a Promise for the value of
  // the final result produced by the iterator.
  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {
    if (PromiseImpl === void 0) PromiseImpl = Promise;

    var iter = new AsyncIterator(
      wrap(innerFn, outerFn, self, tryLocsList),
      PromiseImpl
    );

    return exports.isGeneratorFunction(outerFn)
      ? iter // If outerFn is a generator, return the full iterator.
      : iter.next().then(function(result) {
          return result.done ? result.value : iter.next();
        });
  };

  function makeInvokeMethod(innerFn, self, context) {
    var state = GenStateSuspendedStart;

    return function invoke(method, arg) {
      if (state === GenStateExecuting) {
        throw new Error("Generator is already running");
      }

      if (state === GenStateCompleted) {
        if (method === "throw") {
          throw arg;
        }

        // Be forgiving, per 25.3.3.3.3 of the spec:
        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume
        return doneResult();
      }

      context.method = method;
      context.arg = arg;

      while (true) {
        var delegate = context.delegate;
        if (delegate) {
          var delegateResult = maybeInvokeDelegate(delegate, context);
          if (delegateResult) {
            if (delegateResult === ContinueSentinel) continue;
            return delegateResult;
          }
        }

        if (context.method === "next") {
          // Setting context._sent for legacy support of Babel's
          // function.sent implementation.
          context.sent = context._sent = context.arg;

        } else if (context.method === "throw") {
          if (state === GenStateSuspendedStart) {
            state = GenStateCompleted;
            throw context.arg;
          }

          context.dispatchException(context.arg);

        } else if (context.method === "return") {
          context.abrupt("return", context.arg);
        }

        state = GenStateExecuting;

        var record = tryCatch(innerFn, self, context);
        if (record.type === "normal") {
          // If an exception is thrown from innerFn, we leave state ===
          // GenStateExecuting and loop back for another invocation.
          state = context.done
            ? GenStateCompleted
            : GenStateSuspendedYield;

          if (record.arg === ContinueSentinel) {
            continue;
          }

          return {
            value: record.arg,
            done: context.done
          };

        } else if (record.type === "throw") {
          state = GenStateCompleted;
          // Dispatch the exception by looping back around to the
          // context.dispatchException(context.arg) call above.
          context.method = "throw";
          context.arg = record.arg;
        }
      }
    };
  }

  // Call delegate.iterator[context.method](context.arg) and handle the
  // result, either by returning a { value, done } result from the
  // delegate iterator, or by modifying context.method and context.arg,
  // setting context.delegate to null, and returning the ContinueSentinel.
  function maybeInvokeDelegate(delegate, context) {
    var method = delegate.iterator[context.method];
    if (method === undefined) {
      // A .throw or .return when the delegate iterator has no .throw
      // method always terminates the yield* loop.
      context.delegate = null;

      if (context.method === "throw") {
        // Note: ["return"] must be used for ES3 parsing compatibility.
        if (delegate.iterator["return"]) {
          // If the delegate iterator has a return method, give it a
          // chance to clean up.
          context.method = "return";
          context.arg = undefined;
          maybeInvokeDelegate(delegate, context);

          if (context.method === "throw") {
            // If maybeInvokeDelegate(context) changed context.method from
            // "return" to "throw", let that override the TypeError below.
            return ContinueSentinel;
          }
        }

        context.method = "throw";
        context.arg = new TypeError(
          "The iterator does not provide a 'throw' method");
      }

      return ContinueSentinel;
    }

    var record = tryCatch(method, delegate.iterator, context.arg);

    if (record.type === "throw") {
      context.method = "throw";
      context.arg = record.arg;
      context.delegate = null;
      return ContinueSentinel;
    }

    var info = record.arg;

    if (! info) {
      context.method = "throw";
      context.arg = new TypeError("iterator result is not an object");
      context.delegate = null;
      return ContinueSentinel;
    }

    if (info.done) {
      // Assign the result of the finished delegate to the temporary
      // variable specified by delegate.resultName (see delegateYield).
      context[delegate.resultName] = info.value;

      // Resume execution at the desired location (see delegateYield).
      context.next = delegate.nextLoc;

      // If context.method was "throw" but the delegate handled the
      // exception, let the outer generator proceed normally. If
      // context.method was "next", forget context.arg since it has been
      // "consumed" by the delegate iterator. If context.method was
      // "return", allow the original .return call to continue in the
      // outer generator.
      if (context.method !== "return") {
        context.method = "next";
        context.arg = undefined;
      }

    } else {
      // Re-yield the result returned by the delegate method.
      return info;
    }

    // The delegate iterator is finished, so forget it and continue with
    // the outer generator.
    context.delegate = null;
    return ContinueSentinel;
  }

  // Define Generator.prototype.{next,throw,return} in terms of the
  // unified ._invoke helper method.
  defineIteratorMethods(Gp);

  define(Gp, toStringTagSymbol, "Generator");

  // A Generator should always return itself as the iterator object when the
  // @@iterator function is called on it. Some browsers' implementations of the
  // iterator prototype chain incorrectly implement this, causing the Generator
  // object to not be returned from this call. This ensures that doesn't happen.
  // See https://github.com/facebook/regenerator/issues/274 for more details.
  define(Gp, iteratorSymbol, function() {
    return this;
  });

  define(Gp, "toString", function() {
    return "[object Generator]";
  });

  function pushTryEntry(locs) {
    var entry = { tryLoc: locs[0] };

    if (1 in locs) {
      entry.catchLoc = locs[1];
    }

    if (2 in locs) {
      entry.finallyLoc = locs[2];
      entry.afterLoc = locs[3];
    }

    this.tryEntries.push(entry);
  }

  function resetTryEntry(entry) {
    var record = entry.completion || {};
    record.type = "normal";
    delete record.arg;
    entry.completion = record;
  }

  function Context(tryLocsList) {
    // The root entry object (effectively a try statement without a catch
    // or a finally block) gives us a place to store values thrown from
    // locations where there is no enclosing try statement.
    this.tryEntries = [{ tryLoc: "root" }];
    tryLocsList.forEach(pushTryEntry, this);
    this.reset(true);
  }

  exports.keys = function(object) {
    var keys = [];
    for (var key in object) {
      keys.push(key);
    }
    keys.reverse();

    // Rather than returning an object with a next method, we keep
    // things simple and return the next function itself.
    return function next() {
      while (keys.length) {
        var key = keys.pop();
        if (key in object) {
          next.value = key;
          next.done = false;
          return next;
        }
      }

      // To avoid creating an additional object, we just hang the .value
      // and .done properties off the next function object itself. This
      // also ensures that the minifier will not anonymize the function.
      next.done = true;
      return next;
    };
  };

  function values(iterable) {
    if (iterable) {
      var iteratorMethod = iterable[iteratorSymbol];
      if (iteratorMethod) {
        return iteratorMethod.call(iterable);
      }

      if (typeof iterable.next === "function") {
        return iterable;
      }

      if (!isNaN(iterable.length)) {
        var i = -1, next = function next() {
          while (++i < iterable.length) {
            if (hasOwn.call(iterable, i)) {
              next.value = iterable[i];
              next.done = false;
              return next;
            }
          }

          next.value = undefined;
          next.done = true;

          return next;
        };

        return next.next = next;
      }
    }

    // Return an iterator with no values.
    return { next: doneResult };
  }
  exports.values = values;

  function doneResult() {
    return { value: undefined, done: true };
  }

  Context.prototype = {
    constructor: Context,

    reset: function(skipTempReset) {
      this.prev = 0;
      this.next = 0;
      // Resetting context._sent for legacy support of Babel's
      // function.sent implementation.
      this.sent = this._sent = undefined;
      this.done = false;
      this.delegate = null;

      this.method = "next";
      this.arg = undefined;

      this.tryEntries.forEach(resetTryEntry);

      if (!skipTempReset) {
        for (var name in this) {
          // Not sure about the optimal order of these conditions:
          if (name.charAt(0) === "t" &&
              hasOwn.call(this, name) &&
              !isNaN(+name.slice(1))) {
            this[name] = undefined;
          }
        }
      }
    },

    stop: function() {
      this.done = true;

      var rootEntry = this.tryEntries[0];
      var rootRecord = rootEntry.completion;
      if (rootRecord.type === "throw") {
        throw rootRecord.arg;
      }

      return this.rval;
    },

    dispatchException: function(exception) {
      if (this.done) {
        throw exception;
      }

      var context = this;
      function handle(loc, caught) {
        record.type = "throw";
        record.arg = exception;
        context.next = loc;

        if (caught) {
          // If the dispatched exception was caught by a catch block,
          // then let that catch block handle the exception normally.
          context.method = "next";
          context.arg = undefined;
        }

        return !! caught;
      }

      for (var i = this.tryEntries.length - 1; i >= 0; --i) {
        var entry = this.tryEntries[i];
        var record = entry.completion;

        if (entry.tryLoc === "root") {
          // Exception thrown outside of any try block that could handle
          // it, so set the completion value of the entire function to
          // throw the exception.
          return handle("end");
        }

        if (entry.tryLoc <= this.prev) {
          var hasCatch = hasOwn.call(entry, "catchLoc");
          var hasFinally = hasOwn.call(entry, "finallyLoc");

          if (hasCatch && hasFinally) {
            if (this.prev < entry.catchLoc) {
              return handle(entry.catchLoc, true);
            } else if (this.prev < entry.finallyLoc) {
              return handle(entry.finallyLoc);
            }

          } else if (hasCatch) {
            if (this.prev < entry.catchLoc) {
              return handle(entry.catchLoc, true);
            }

          } else if (hasFinally) {
            if (this.prev < entry.finallyLoc) {
              return handle(entry.finallyLoc);
            }

          } else {
            throw new Error("try statement without catch or finally");
          }
        }
      }
    },

    abrupt: function(type, arg) {
      for (var i = this.tryEntries.length - 1; i >= 0; --i) {
        var entry = this.tryEntries[i];
        if (entry.tryLoc <= this.prev &&
            hasOwn.call(entry, "finallyLoc") &&
            this.prev < entry.finallyLoc) {
          var finallyEntry = entry;
          break;
        }
      }

      if (finallyEntry &&
          (type === "break" ||
           type === "continue") &&
          finallyEntry.tryLoc <= arg &&
          arg <= finallyEntry.finallyLoc) {
        // Ignore the finally entry if control is not jumping to a
        // location outside the try/catch block.
        finallyEntry = null;
      }

      var record = finallyEntry ? finallyEntry.completion : {};
      record.type = type;
      record.arg = arg;

      if (finallyEntry) {
        this.method = "next";
        this.next = finallyEntry.finallyLoc;
        return ContinueSentinel;
      }

      return this.complete(record);
    },

    complete: function(record, afterLoc) {
      if (record.type === "throw") {
        throw record.arg;
      }

      if (record.type === "break" ||
          record.type === "continue") {
        this.next = record.arg;
      } else if (record.type === "return") {
        this.rval = this.arg = record.arg;
        this.method = "return";
        this.next = "end";
      } else if (record.type === "normal" && afterLoc) {
        this.next = afterLoc;
      }

      return ContinueSentinel;
    },

    finish: function(finallyLoc) {
      for (var i = this.tryEntries.length - 1; i >= 0; --i) {
        var entry = this.tryEntries[i];
        if (entry.finallyLoc === finallyLoc) {
          this.complete(entry.completion, entry.afterLoc);
          resetTryEntry(entry);
          return ContinueSentinel;
        }
      }
    },

    "catch": function(tryLoc) {
      for (var i = this.tryEntries.length - 1; i >= 0; --i) {
        var entry = this.tryEntries[i];
        if (entry.tryLoc === tryLoc) {
          var record = entry.completion;
          if (record.type === "throw") {
            var thrown = record.arg;
            resetTryEntry(entry);
          }
          return thrown;
        }
      }

      // The context.catch method must only be called with a location
      // argument that corresponds to a known catch block.
      throw new Error("illegal catch attempt");
    },

    delegateYield: function(iterable, resultName, nextLoc) {
      this.delegate = {
        iterator: values(iterable),
        resultName: resultName,
        nextLoc: nextLoc
      };

      if (this.method === "next") {
        // Deliberately forget the last sent value so that we don't
        // accidentally pass it on to the delegate.
        this.arg = undefined;
      }

      return ContinueSentinel;
    }
  };

  // Regardless of whether this script is executing as a CommonJS module
  // or not, return the runtime object so that we can declare the variable
  // regeneratorRuntime in the outer scope, which allows this module to be
  // injected easily by `bin/regenerator --include-runtime script.js`.
  return exports;

}(
  // If this script is executing as a CommonJS module, use module.exports
  // as the regeneratorRuntime namespace. Otherwise create a new empty
  // object. Either way, the resulting object will be used to initialize
  // the regeneratorRuntime variable at the top of this file.
   true ? module.exports : 0
));

try {
  regeneratorRuntime = runtime;
} catch (accidentalStrictMode) {
  // This module should not be running in strict mode, so the above
  // assignment should always work unless something is misconfigured. Just
  // in case runtime.js accidentally runs in strict mode, in modern engines
  // we can explicitly access globalThis. In older engines we can escape
  // strict mode using a global Function call. This could conceivably fail
  // if a Content Security Policy forbids using Function, but in that case
  // the proper solution is to fix the accidental strict mode problem. If
  // you've misconfigured your bundler to force strict mode and applied a
  // CSP to forbid Function, and you're not willing to fix either of those
  // problems, please detail your unique predicament in a GitHub issue.
  if (typeof globalThis === "object") {
    globalThis.regeneratorRuntime = runtime;
  } else {
    Function("r", "regeneratorRuntime = r")(runtime);
  }
}


/***/ }),

/***/ "./node_modules/style-loader/dist/cjs.js!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-10.use[1]!./node_modules/vue-loader/dist/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-10.use[2]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./resources/assets/js/video/LabRequestModal.vue?vue&type=style&index=0&id=0847a395&scoped=true&lang=css":
/*!******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/style-loader/dist/cjs.js!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-10.use[1]!./node_modules/vue-loader/dist/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-10.use[2]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./resources/assets/js/video/LabRequestModal.vue?vue&type=style&index=0&id=0847a395&scoped=true&lang=css ***!
  \******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! !../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ "./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js");
/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _node_modules_css_loader_dist_cjs_js_clonedRuleSet_10_use_1_node_modules_vue_loader_dist_stylePostLoader_js_node_modules_postcss_loader_dist_cjs_js_clonedRuleSet_10_use_2_node_modules_vue_loader_dist_index_js_ruleSet_0_use_0_LabRequestModal_vue_vue_type_style_index_0_id_0847a395_scoped_true_lang_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! !!../../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-10.use[1]!../../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-10.use[2]!../../../../node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./LabRequestModal.vue?vue&type=style&index=0&id=0847a395&scoped=true&lang=css */ "./node_modules/css-loader/dist/cjs.js??clonedRuleSet-10.use[1]!./node_modules/vue-loader/dist/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-10.use[2]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./resources/assets/js/video/LabRequestModal.vue?vue&type=style&index=0&id=0847a395&scoped=true&lang=css");

            

var options = {};

options.insert = "head";
options.singleton = false;

var update = _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default()(_node_modules_css_loader_dist_cjs_js_clonedRuleSet_10_use_1_node_modules_vue_loader_dist_stylePostLoader_js_node_modules_postcss_loader_dist_cjs_js_clonedRuleSet_10_use_2_node_modules_vue_loader_dist_index_js_ruleSet_0_use_0_LabRequestModal_vue_vue_type_style_index_0_id_0847a395_scoped_true_lang_css__WEBPACK_IMPORTED_MODULE_1__["default"], options);



/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_node_modules_css_loader_dist_cjs_js_clonedRuleSet_10_use_1_node_modules_vue_loader_dist_stylePostLoader_js_node_modules_postcss_loader_dist_cjs_js_clonedRuleSet_10_use_2_node_modules_vue_loader_dist_index_js_ruleSet_0_use_0_LabRequestModal_vue_vue_type_style_index_0_id_0847a395_scoped_true_lang_css__WEBPACK_IMPORTED_MODULE_1__["default"].locals || {});

/***/ }),

/***/ "./node_modules/style-loader/dist/cjs.js!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-10.use[1]!./node_modules/vue-loader/dist/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-10.use[2]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./resources/assets/js/video/PrescriptionModal.vue?vue&type=style&index=0&id=c2b74386&scoped=true&lang=css":
/*!********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/style-loader/dist/cjs.js!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-10.use[1]!./node_modules/vue-loader/dist/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-10.use[2]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./resources/assets/js/video/PrescriptionModal.vue?vue&type=style&index=0&id=c2b74386&scoped=true&lang=css ***!
  \********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! !../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ "./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js");
/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _node_modules_css_loader_dist_cjs_js_clonedRuleSet_10_use_1_node_modules_vue_loader_dist_stylePostLoader_js_node_modules_postcss_loader_dist_cjs_js_clonedRuleSet_10_use_2_node_modules_vue_loader_dist_index_js_ruleSet_0_use_0_PrescriptionModal_vue_vue_type_style_index_0_id_c2b74386_scoped_true_lang_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! !!../../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-10.use[1]!../../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-10.use[2]!../../../../node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./PrescriptionModal.vue?vue&type=style&index=0&id=c2b74386&scoped=true&lang=css */ "./node_modules/css-loader/dist/cjs.js??clonedRuleSet-10.use[1]!./node_modules/vue-loader/dist/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-10.use[2]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./resources/assets/js/video/PrescriptionModal.vue?vue&type=style&index=0&id=c2b74386&scoped=true&lang=css");

            

var options = {};

options.insert = "head";
options.singleton = false;

var update = _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default()(_node_modules_css_loader_dist_cjs_js_clonedRuleSet_10_use_1_node_modules_vue_loader_dist_stylePostLoader_js_node_modules_postcss_loader_dist_cjs_js_clonedRuleSet_10_use_2_node_modules_vue_loader_dist_index_js_ruleSet_0_use_0_PrescriptionModal_vue_vue_type_style_index_0_id_c2b74386_scoped_true_lang_css__WEBPACK_IMPORTED_MODULE_1__["default"], options);



/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_node_modules_css_loader_dist_cjs_js_clonedRuleSet_10_use_1_node_modules_vue_loader_dist_stylePostLoader_js_node_modules_postcss_loader_dist_cjs_js_clonedRuleSet_10_use_2_node_modules_vue_loader_dist_index_js_ruleSet_0_use_0_PrescriptionModal_vue_vue_type_style_index_0_id_c2b74386_scoped_true_lang_css__WEBPACK_IMPORTED_MODULE_1__["default"].locals || {});

/***/ }),

/***/ "./node_modules/style-loader/dist/cjs.js!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-10.use[1]!./node_modules/vue-loader/dist/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-10.use[2]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./resources/assets/js/video/VideoAppPregnant.vue?vue&type=style&index=0&id=1ef045ee&lang=css":
/*!*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/style-loader/dist/cjs.js!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-10.use[1]!./node_modules/vue-loader/dist/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-10.use[2]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./resources/assets/js/video/VideoAppPregnant.vue?vue&type=style&index=0&id=1ef045ee&lang=css ***!
  \*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! !../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ "./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js");
/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _node_modules_css_loader_dist_cjs_js_clonedRuleSet_10_use_1_node_modules_vue_loader_dist_stylePostLoader_js_node_modules_postcss_loader_dist_cjs_js_clonedRuleSet_10_use_2_node_modules_vue_loader_dist_index_js_ruleSet_0_use_0_VideoAppPregnant_vue_vue_type_style_index_0_id_1ef045ee_lang_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! !!../../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-10.use[1]!../../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-10.use[2]!../../../../node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./VideoAppPregnant.vue?vue&type=style&index=0&id=1ef045ee&lang=css */ "./node_modules/css-loader/dist/cjs.js??clonedRuleSet-10.use[1]!./node_modules/vue-loader/dist/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-10.use[2]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./resources/assets/js/video/VideoAppPregnant.vue?vue&type=style&index=0&id=1ef045ee&lang=css");

            

var options = {};

options.insert = "head";
options.singleton = false;

var update = _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default()(_node_modules_css_loader_dist_cjs_js_clonedRuleSet_10_use_1_node_modules_vue_loader_dist_stylePostLoader_js_node_modules_postcss_loader_dist_cjs_js_clonedRuleSet_10_use_2_node_modules_vue_loader_dist_index_js_ruleSet_0_use_0_VideoAppPregnant_vue_vue_type_style_index_0_id_1ef045ee_lang_css__WEBPACK_IMPORTED_MODULE_1__["default"], options);



/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_node_modules_css_loader_dist_cjs_js_clonedRuleSet_10_use_1_node_modules_vue_loader_dist_stylePostLoader_js_node_modules_postcss_loader_dist_cjs_js_clonedRuleSet_10_use_2_node_modules_vue_loader_dist_index_js_ruleSet_0_use_0_VideoAppPregnant_vue_vue_type_style_index_0_id_1ef045ee_lang_css__WEBPACK_IMPORTED_MODULE_1__["default"].locals || {});

/***/ }),

/***/ "./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js":
/*!****************************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js ***!
  \****************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";


var isOldIE = function isOldIE() {
  var memo;
  return function memorize() {
    if (typeof memo === 'undefined') {
      // Test for IE <= 9 as proposed by Browserhacks
      // @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805
      // Tests for existence of standard globals is to allow style-loader
      // to operate correctly into non-standard environments
      // @see https://github.com/webpack-contrib/style-loader/issues/177
      memo = Boolean(window && document && document.all && !window.atob);
    }

    return memo;
  };
}();

var getTarget = function getTarget() {
  var memo = {};
  return function memorize(target) {
    if (typeof memo[target] === 'undefined') {
      var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself

      if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {
        try {
          // This will throw an exception if access to iframe is blocked
          // due to cross-origin restrictions
          styleTarget = styleTarget.contentDocument.head;
        } catch (e) {
          // istanbul ignore next
          styleTarget = null;
        }
      }

      memo[target] = styleTarget;
    }

    return memo[target];
  };
}();

var stylesInDom = [];

function getIndexByIdentifier(identifier) {
  var result = -1;

  for (var i = 0; i < stylesInDom.length; i++) {
    if (stylesInDom[i].identifier === identifier) {
      result = i;
      break;
    }
  }

  return result;
}

function modulesToDom(list, options) {
  var idCountMap = {};
  var identifiers = [];

  for (var i = 0; i < list.length; i++) {
    var item = list[i];
    var id = options.base ? item[0] + options.base : item[0];
    var count = idCountMap[id] || 0;
    var identifier = "".concat(id, " ").concat(count);
    idCountMap[id] = count + 1;
    var index = getIndexByIdentifier(identifier);
    var obj = {
      css: item[1],
      media: item[2],
      sourceMap: item[3]
    };

    if (index !== -1) {
      stylesInDom[index].references++;
      stylesInDom[index].updater(obj);
    } else {
      stylesInDom.push({
        identifier: identifier,
        updater: addStyle(obj, options),
        references: 1
      });
    }

    identifiers.push(identifier);
  }

  return identifiers;
}

function insertStyleElement(options) {
  var style = document.createElement('style');
  var attributes = options.attributes || {};

  if (typeof attributes.nonce === 'undefined') {
    var nonce =  true ? __webpack_require__.nc : 0;

    if (nonce) {
      attributes.nonce = nonce;
    }
  }

  Object.keys(attributes).forEach(function (key) {
    style.setAttribute(key, attributes[key]);
  });

  if (typeof options.insert === 'function') {
    options.insert(style);
  } else {
    var target = getTarget(options.insert || 'head');

    if (!target) {
      throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");
    }

    target.appendChild(style);
  }

  return style;
}

function removeStyleElement(style) {
  // istanbul ignore if
  if (style.parentNode === null) {
    return false;
  }

  style.parentNode.removeChild(style);
}
/* istanbul ignore next  */


var replaceText = function replaceText() {
  var textStore = [];
  return function replace(index, replacement) {
    textStore[index] = replacement;
    return textStore.filter(Boolean).join('\n');
  };
}();

function applyToSingletonTag(style, index, remove, obj) {
  var css = remove ? '' : obj.media ? "@media ".concat(obj.media, " {").concat(obj.css, "}") : obj.css; // For old IE

  /* istanbul ignore if  */

  if (style.styleSheet) {
    style.styleSheet.cssText = replaceText(index, css);
  } else {
    var cssNode = document.createTextNode(css);
    var childNodes = style.childNodes;

    if (childNodes[index]) {
      style.removeChild(childNodes[index]);
    }

    if (childNodes.length) {
      style.insertBefore(cssNode, childNodes[index]);
    } else {
      style.appendChild(cssNode);
    }
  }
}

function applyToTag(style, options, obj) {
  var css = obj.css;
  var media = obj.media;
  var sourceMap = obj.sourceMap;

  if (media) {
    style.setAttribute('media', media);
  } else {
    style.removeAttribute('media');
  }

  if (sourceMap && typeof btoa !== 'undefined') {
    css += "\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), " */");
  } // For old IE

  /* istanbul ignore if  */


  if (style.styleSheet) {
    style.styleSheet.cssText = css;
  } else {
    while (style.firstChild) {
      style.removeChild(style.firstChild);
    }

    style.appendChild(document.createTextNode(css));
  }
}

var singleton = null;
var singletonCounter = 0;

function addStyle(obj, options) {
  var style;
  var update;
  var remove;

  if (options.singleton) {
    var styleIndex = singletonCounter++;
    style = singleton || (singleton = insertStyleElement(options));
    update = applyToSingletonTag.bind(null, style, styleIndex, false);
    remove = applyToSingletonTag.bind(null, style, styleIndex, true);
  } else {
    style = insertStyleElement(options);
    update = applyToTag.bind(null, style, options);

    remove = function remove() {
      removeStyleElement(style);
    };
  }

  update(obj);
  return function updateStyle(newObj) {
    if (newObj) {
      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap) {
        return;
      }

      update(obj = newObj);
    } else {
      remove();
    }
  };
}

module.exports = function (list, options) {
  options = options || {}; // Force single-tag solution on IE6-9, which has a hard limit on the # of <style>
  // tags it will allow on a page

  if (!options.singleton && typeof options.singleton !== 'boolean') {
    options.singleton = isOldIE();
  }

  list = list || [];
  var lastIdentifiers = modulesToDom(list, options);
  return function update(newList) {
    newList = newList || [];

    if (Object.prototype.toString.call(newList) !== '[object Array]') {
      return;
    }

    for (var i = 0; i < lastIdentifiers.length; i++) {
      var identifier = lastIdentifiers[i];
      var index = getIndexByIdentifier(identifier);
      stylesInDom[index].references--;
    }

    var newLastIdentifiers = modulesToDom(newList, options);

    for (var _i = 0; _i < lastIdentifiers.length; _i++) {
      var _identifier = lastIdentifiers[_i];

      var _index = getIndexByIdentifier(_identifier);

      if (stylesInDom[_index].references === 0) {
        stylesInDom[_index].updater();

        stylesInDom.splice(_index, 1);
      }
    }

    lastIdentifiers = newLastIdentifiers;
  };
};

/***/ }),

/***/ "./node_modules/vue-loader/dist/exportHelper.js":
/*!******************************************************!*\
  !*** ./node_modules/vue-loader/dist/exportHelper.js ***!
  \******************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
// runtime helper for setting properties on components
// in a tree-shakable way
exports["default"] = (sfc, props) => {
    const target = sfc.__vccOpts || sfc;
    for (const [key, val] of props) {
        target[key] = val;
    }
    return target;
};


/***/ }),

/***/ "./resources/assets/js/video/AppPregnant.vue":
/*!***************************************************!*\
  !*** ./resources/assets/js/video/AppPregnant.vue ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _AppPregnant_vue_vue_type_script_lang_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./AppPregnant.vue?vue&type=script&lang=js */ "./resources/assets/js/video/AppPregnant.vue?vue&type=script&lang=js");
/* harmony import */ var C_xampp_htdocs_referral_node_modules_vue_loader_dist_exportHelper_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./node_modules/vue-loader/dist/exportHelper.js */ "./node_modules/vue-loader/dist/exportHelper.js");



;
const __exports__ = /*#__PURE__*/(0,C_xampp_htdocs_referral_node_modules_vue_loader_dist_exportHelper_js__WEBPACK_IMPORTED_MODULE_1__["default"])(_AppPregnant_vue_vue_type_script_lang_js__WEBPACK_IMPORTED_MODULE_0__["default"], [['__file',"resources/assets/js/video/AppPregnant.vue"]])
/* hot reload */
if (false) {}


/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (__exports__);

/***/ }),

/***/ "./resources/assets/js/video/LabRequestModal.vue":
/*!*******************************************************!*\
  !*** ./resources/assets/js/video/LabRequestModal.vue ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _LabRequestModal_vue_vue_type_template_id_0847a395_scoped_true__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./LabRequestModal.vue?vue&type=template&id=0847a395&scoped=true */ "./resources/assets/js/video/LabRequestModal.vue?vue&type=template&id=0847a395&scoped=true");
/* harmony import */ var _LabRequestModal_vue_vue_type_script_lang_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./LabRequestModal.vue?vue&type=script&lang=js */ "./resources/assets/js/video/LabRequestModal.vue?vue&type=script&lang=js");
/* harmony import */ var _LabRequestModal_vue_vue_type_style_index_0_id_0847a395_scoped_true_lang_css__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./LabRequestModal.vue?vue&type=style&index=0&id=0847a395&scoped=true&lang=css */ "./resources/assets/js/video/LabRequestModal.vue?vue&type=style&index=0&id=0847a395&scoped=true&lang=css");
/* harmony import */ var C_xampp_htdocs_referral_node_modules_vue_loader_dist_exportHelper_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./node_modules/vue-loader/dist/exportHelper.js */ "./node_modules/vue-loader/dist/exportHelper.js");




;


const __exports__ = /*#__PURE__*/(0,C_xampp_htdocs_referral_node_modules_vue_loader_dist_exportHelper_js__WEBPACK_IMPORTED_MODULE_3__["default"])(_LabRequestModal_vue_vue_type_script_lang_js__WEBPACK_IMPORTED_MODULE_1__["default"], [['render',_LabRequestModal_vue_vue_type_template_id_0847a395_scoped_true__WEBPACK_IMPORTED_MODULE_0__.render],['__scopeId',"data-v-0847a395"],['__file',"resources/assets/js/video/LabRequestModal.vue"]])
/* hot reload */
if (false) {}


/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (__exports__);

/***/ }),

/***/ "./resources/assets/js/video/PrescriptionModal.vue":
/*!*********************************************************!*\
  !*** ./resources/assets/js/video/PrescriptionModal.vue ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _PrescriptionModal_vue_vue_type_template_id_c2b74386_scoped_true__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./PrescriptionModal.vue?vue&type=template&id=c2b74386&scoped=true */ "./resources/assets/js/video/PrescriptionModal.vue?vue&type=template&id=c2b74386&scoped=true");
/* harmony import */ var _PrescriptionModal_vue_vue_type_script_lang_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./PrescriptionModal.vue?vue&type=script&lang=js */ "./resources/assets/js/video/PrescriptionModal.vue?vue&type=script&lang=js");
/* harmony import */ var _PrescriptionModal_vue_vue_type_style_index_0_id_c2b74386_scoped_true_lang_css__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./PrescriptionModal.vue?vue&type=style&index=0&id=c2b74386&scoped=true&lang=css */ "./resources/assets/js/video/PrescriptionModal.vue?vue&type=style&index=0&id=c2b74386&scoped=true&lang=css");
/* harmony import */ var C_xampp_htdocs_referral_node_modules_vue_loader_dist_exportHelper_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./node_modules/vue-loader/dist/exportHelper.js */ "./node_modules/vue-loader/dist/exportHelper.js");




;


const __exports__ = /*#__PURE__*/(0,C_xampp_htdocs_referral_node_modules_vue_loader_dist_exportHelper_js__WEBPACK_IMPORTED_MODULE_3__["default"])(_PrescriptionModal_vue_vue_type_script_lang_js__WEBPACK_IMPORTED_MODULE_1__["default"], [['render',_PrescriptionModal_vue_vue_type_template_id_c2b74386_scoped_true__WEBPACK_IMPORTED_MODULE_0__.render],['__scopeId',"data-v-c2b74386"],['__file',"resources/assets/js/video/PrescriptionModal.vue"]])
/* hot reload */
if (false) {}


/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (__exports__);

/***/ }),

/***/ "./resources/assets/js/video/VideoAppPregnant.vue":
/*!********************************************************!*\
  !*** ./resources/assets/js/video/VideoAppPregnant.vue ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _VideoAppPregnant_vue_vue_type_template_id_1ef045ee__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./VideoAppPregnant.vue?vue&type=template&id=1ef045ee */ "./resources/assets/js/video/VideoAppPregnant.vue?vue&type=template&id=1ef045ee");
/* harmony import */ var _VideoAppPregnant_vue_vue_type_script_lang_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./VideoAppPregnant.vue?vue&type=script&lang=js */ "./resources/assets/js/video/VideoAppPregnant.vue?vue&type=script&lang=js");
/* harmony import */ var _VideoAppPregnant_vue_vue_type_style_index_0_id_1ef045ee_lang_css__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./VideoAppPregnant.vue?vue&type=style&index=0&id=1ef045ee&lang=css */ "./resources/assets/js/video/VideoAppPregnant.vue?vue&type=style&index=0&id=1ef045ee&lang=css");
/* harmony import */ var C_xampp_htdocs_referral_node_modules_vue_loader_dist_exportHelper_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./node_modules/vue-loader/dist/exportHelper.js */ "./node_modules/vue-loader/dist/exportHelper.js");




;


const __exports__ = /*#__PURE__*/(0,C_xampp_htdocs_referral_node_modules_vue_loader_dist_exportHelper_js__WEBPACK_IMPORTED_MODULE_3__["default"])(_VideoAppPregnant_vue_vue_type_script_lang_js__WEBPACK_IMPORTED_MODULE_1__["default"], [['render',_VideoAppPregnant_vue_vue_type_template_id_1ef045ee__WEBPACK_IMPORTED_MODULE_0__.render],['__file',"resources/assets/js/video/VideoAppPregnant.vue"]])
/* hot reload */
if (false) {}


/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (__exports__);

/***/ }),

/***/ "./resources/assets/js/video/AppPregnant.vue?vue&type=script&lang=js":
/*!***************************************************************************!*\
  !*** ./resources/assets/js/video/AppPregnant.vue?vue&type=script&lang=js ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* reexport safe */ _node_modules_babel_loader_lib_index_js_clonedRuleSet_5_use_0_node_modules_vue_loader_dist_index_js_ruleSet_0_use_0_AppPregnant_vue_vue_type_script_lang_js__WEBPACK_IMPORTED_MODULE_0__["default"])
/* harmony export */ });
/* harmony import */ var _node_modules_babel_loader_lib_index_js_clonedRuleSet_5_use_0_node_modules_vue_loader_dist_index_js_ruleSet_0_use_0_AppPregnant_vue_vue_type_script_lang_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-5.use[0]!../../../../node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./AppPregnant.vue?vue&type=script&lang=js */ "./node_modules/babel-loader/lib/index.js??clonedRuleSet-5.use[0]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./resources/assets/js/video/AppPregnant.vue?vue&type=script&lang=js");
 

/***/ }),

/***/ "./resources/assets/js/video/LabRequestModal.vue?vue&type=script&lang=js":
/*!*******************************************************************************!*\
  !*** ./resources/assets/js/video/LabRequestModal.vue?vue&type=script&lang=js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* reexport safe */ _node_modules_babel_loader_lib_index_js_clonedRuleSet_5_use_0_node_modules_vue_loader_dist_index_js_ruleSet_0_use_0_LabRequestModal_vue_vue_type_script_lang_js__WEBPACK_IMPORTED_MODULE_0__["default"])
/* harmony export */ });
/* harmony import */ var _node_modules_babel_loader_lib_index_js_clonedRuleSet_5_use_0_node_modules_vue_loader_dist_index_js_ruleSet_0_use_0_LabRequestModal_vue_vue_type_script_lang_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-5.use[0]!../../../../node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./LabRequestModal.vue?vue&type=script&lang=js */ "./node_modules/babel-loader/lib/index.js??clonedRuleSet-5.use[0]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./resources/assets/js/video/LabRequestModal.vue?vue&type=script&lang=js");
 

/***/ }),

/***/ "./resources/assets/js/video/PrescriptionModal.vue?vue&type=script&lang=js":
/*!*********************************************************************************!*\
  !*** ./resources/assets/js/video/PrescriptionModal.vue?vue&type=script&lang=js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* reexport safe */ _node_modules_babel_loader_lib_index_js_clonedRuleSet_5_use_0_node_modules_vue_loader_dist_index_js_ruleSet_0_use_0_PrescriptionModal_vue_vue_type_script_lang_js__WEBPACK_IMPORTED_MODULE_0__["default"])
/* harmony export */ });
/* harmony import */ var _node_modules_babel_loader_lib_index_js_clonedRuleSet_5_use_0_node_modules_vue_loader_dist_index_js_ruleSet_0_use_0_PrescriptionModal_vue_vue_type_script_lang_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-5.use[0]!../../../../node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./PrescriptionModal.vue?vue&type=script&lang=js */ "./node_modules/babel-loader/lib/index.js??clonedRuleSet-5.use[0]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./resources/assets/js/video/PrescriptionModal.vue?vue&type=script&lang=js");
 

/***/ }),

/***/ "./resources/assets/js/video/VideoAppPregnant.vue?vue&type=script&lang=js":
/*!********************************************************************************!*\
  !*** ./resources/assets/js/video/VideoAppPregnant.vue?vue&type=script&lang=js ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* reexport safe */ _node_modules_babel_loader_lib_index_js_clonedRuleSet_5_use_0_node_modules_vue_loader_dist_index_js_ruleSet_0_use_0_VideoAppPregnant_vue_vue_type_script_lang_js__WEBPACK_IMPORTED_MODULE_0__["default"])
/* harmony export */ });
/* harmony import */ var _node_modules_babel_loader_lib_index_js_clonedRuleSet_5_use_0_node_modules_vue_loader_dist_index_js_ruleSet_0_use_0_VideoAppPregnant_vue_vue_type_script_lang_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-5.use[0]!../../../../node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./VideoAppPregnant.vue?vue&type=script&lang=js */ "./node_modules/babel-loader/lib/index.js??clonedRuleSet-5.use[0]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./resources/assets/js/video/VideoAppPregnant.vue?vue&type=script&lang=js");
 

/***/ }),

/***/ "./resources/assets/js/video/LabRequestModal.vue?vue&type=template&id=0847a395&scoped=true":
/*!*************************************************************************************************!*\
  !*** ./resources/assets/js/video/LabRequestModal.vue?vue&type=template&id=0847a395&scoped=true ***!
  \*************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "render": () => (/* reexport safe */ _node_modules_babel_loader_lib_index_js_clonedRuleSet_5_use_0_node_modules_vue_loader_dist_templateLoader_js_ruleSet_1_rules_2_node_modules_vue_loader_dist_index_js_ruleSet_0_use_0_LabRequestModal_vue_vue_type_template_id_0847a395_scoped_true__WEBPACK_IMPORTED_MODULE_0__.render)
/* harmony export */ });
/* harmony import */ var _node_modules_babel_loader_lib_index_js_clonedRuleSet_5_use_0_node_modules_vue_loader_dist_templateLoader_js_ruleSet_1_rules_2_node_modules_vue_loader_dist_index_js_ruleSet_0_use_0_LabRequestModal_vue_vue_type_template_id_0847a395_scoped_true__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-5.use[0]!../../../../node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[2]!../../../../node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./LabRequestModal.vue?vue&type=template&id=0847a395&scoped=true */ "./node_modules/babel-loader/lib/index.js??clonedRuleSet-5.use[0]!./node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[2]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./resources/assets/js/video/LabRequestModal.vue?vue&type=template&id=0847a395&scoped=true");


/***/ }),

/***/ "./resources/assets/js/video/PrescriptionModal.vue?vue&type=template&id=c2b74386&scoped=true":
/*!***************************************************************************************************!*\
  !*** ./resources/assets/js/video/PrescriptionModal.vue?vue&type=template&id=c2b74386&scoped=true ***!
  \***************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "render": () => (/* reexport safe */ _node_modules_babel_loader_lib_index_js_clonedRuleSet_5_use_0_node_modules_vue_loader_dist_templateLoader_js_ruleSet_1_rules_2_node_modules_vue_loader_dist_index_js_ruleSet_0_use_0_PrescriptionModal_vue_vue_type_template_id_c2b74386_scoped_true__WEBPACK_IMPORTED_MODULE_0__.render)
/* harmony export */ });
/* harmony import */ var _node_modules_babel_loader_lib_index_js_clonedRuleSet_5_use_0_node_modules_vue_loader_dist_templateLoader_js_ruleSet_1_rules_2_node_modules_vue_loader_dist_index_js_ruleSet_0_use_0_PrescriptionModal_vue_vue_type_template_id_c2b74386_scoped_true__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-5.use[0]!../../../../node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[2]!../../../../node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./PrescriptionModal.vue?vue&type=template&id=c2b74386&scoped=true */ "./node_modules/babel-loader/lib/index.js??clonedRuleSet-5.use[0]!./node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[2]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./resources/assets/js/video/PrescriptionModal.vue?vue&type=template&id=c2b74386&scoped=true");


/***/ }),

/***/ "./resources/assets/js/video/VideoAppPregnant.vue?vue&type=template&id=1ef045ee":
/*!**************************************************************************************!*\
  !*** ./resources/assets/js/video/VideoAppPregnant.vue?vue&type=template&id=1ef045ee ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "render": () => (/* reexport safe */ _node_modules_babel_loader_lib_index_js_clonedRuleSet_5_use_0_node_modules_vue_loader_dist_templateLoader_js_ruleSet_1_rules_2_node_modules_vue_loader_dist_index_js_ruleSet_0_use_0_VideoAppPregnant_vue_vue_type_template_id_1ef045ee__WEBPACK_IMPORTED_MODULE_0__.render)
/* harmony export */ });
/* harmony import */ var _node_modules_babel_loader_lib_index_js_clonedRuleSet_5_use_0_node_modules_vue_loader_dist_templateLoader_js_ruleSet_1_rules_2_node_modules_vue_loader_dist_index_js_ruleSet_0_use_0_VideoAppPregnant_vue_vue_type_template_id_1ef045ee__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-5.use[0]!../../../../node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[2]!../../../../node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./VideoAppPregnant.vue?vue&type=template&id=1ef045ee */ "./node_modules/babel-loader/lib/index.js??clonedRuleSet-5.use[0]!./node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[2]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./resources/assets/js/video/VideoAppPregnant.vue?vue&type=template&id=1ef045ee");


/***/ }),

/***/ "./resources/assets/js/video/LabRequestModal.vue?vue&type=style&index=0&id=0847a395&scoped=true&lang=css":
/*!***************************************************************************************************************!*\
  !*** ./resources/assets/js/video/LabRequestModal.vue?vue&type=style&index=0&id=0847a395&scoped=true&lang=css ***!
  \***************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _node_modules_style_loader_dist_cjs_js_node_modules_css_loader_dist_cjs_js_clonedRuleSet_10_use_1_node_modules_vue_loader_dist_stylePostLoader_js_node_modules_postcss_loader_dist_cjs_js_clonedRuleSet_10_use_2_node_modules_vue_loader_dist_index_js_ruleSet_0_use_0_LabRequestModal_vue_vue_type_style_index_0_id_0847a395_scoped_true_lang_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../../../node_modules/style-loader/dist/cjs.js!../../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-10.use[1]!../../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-10.use[2]!../../../../node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./LabRequestModal.vue?vue&type=style&index=0&id=0847a395&scoped=true&lang=css */ "./node_modules/style-loader/dist/cjs.js!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-10.use[1]!./node_modules/vue-loader/dist/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-10.use[2]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./resources/assets/js/video/LabRequestModal.vue?vue&type=style&index=0&id=0847a395&scoped=true&lang=css");


/***/ }),

/***/ "./resources/assets/js/video/PrescriptionModal.vue?vue&type=style&index=0&id=c2b74386&scoped=true&lang=css":
/*!*****************************************************************************************************************!*\
  !*** ./resources/assets/js/video/PrescriptionModal.vue?vue&type=style&index=0&id=c2b74386&scoped=true&lang=css ***!
  \*****************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _node_modules_style_loader_dist_cjs_js_node_modules_css_loader_dist_cjs_js_clonedRuleSet_10_use_1_node_modules_vue_loader_dist_stylePostLoader_js_node_modules_postcss_loader_dist_cjs_js_clonedRuleSet_10_use_2_node_modules_vue_loader_dist_index_js_ruleSet_0_use_0_PrescriptionModal_vue_vue_type_style_index_0_id_c2b74386_scoped_true_lang_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../../../node_modules/style-loader/dist/cjs.js!../../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-10.use[1]!../../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-10.use[2]!../../../../node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./PrescriptionModal.vue?vue&type=style&index=0&id=c2b74386&scoped=true&lang=css */ "./node_modules/style-loader/dist/cjs.js!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-10.use[1]!./node_modules/vue-loader/dist/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-10.use[2]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./resources/assets/js/video/PrescriptionModal.vue?vue&type=style&index=0&id=c2b74386&scoped=true&lang=css");


/***/ }),

/***/ "./resources/assets/js/video/VideoAppPregnant.vue?vue&type=style&index=0&id=1ef045ee&lang=css":
/*!****************************************************************************************************!*\
  !*** ./resources/assets/js/video/VideoAppPregnant.vue?vue&type=style&index=0&id=1ef045ee&lang=css ***!
  \****************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _node_modules_style_loader_dist_cjs_js_node_modules_css_loader_dist_cjs_js_clonedRuleSet_10_use_1_node_modules_vue_loader_dist_stylePostLoader_js_node_modules_postcss_loader_dist_cjs_js_clonedRuleSet_10_use_2_node_modules_vue_loader_dist_index_js_ruleSet_0_use_0_VideoAppPregnant_vue_vue_type_style_index_0_id_1ef045ee_lang_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../../../node_modules/style-loader/dist/cjs.js!../../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-10.use[1]!../../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-10.use[2]!../../../../node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./VideoAppPregnant.vue?vue&type=style&index=0&id=1ef045ee&lang=css */ "./node_modules/style-loader/dist/cjs.js!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-10.use[1]!./node_modules/vue-loader/dist/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-10.use[2]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./resources/assets/js/video/VideoAppPregnant.vue?vue&type=style&index=0&id=1ef045ee&lang=css");


/***/ }),

/***/ "./node_modules/vue/dist/vue.esm-bundler.js":
/*!**************************************************!*\
  !*** ./node_modules/vue/dist/vue.esm-bundler.js ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "BaseTransition": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.BaseTransition),
/* harmony export */   "BaseTransitionPropsValidators": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.BaseTransitionPropsValidators),
/* harmony export */   "Comment": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.Comment),
/* harmony export */   "EffectScope": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.EffectScope),
/* harmony export */   "Fragment": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.Fragment),
/* harmony export */   "KeepAlive": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.KeepAlive),
/* harmony export */   "ReactiveEffect": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.ReactiveEffect),
/* harmony export */   "Static": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.Static),
/* harmony export */   "Suspense": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.Suspense),
/* harmony export */   "Teleport": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.Teleport),
/* harmony export */   "Text": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.Text),
/* harmony export */   "Transition": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.Transition),
/* harmony export */   "TransitionGroup": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.TransitionGroup),
/* harmony export */   "VueElement": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.VueElement),
/* harmony export */   "assertNumber": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.assertNumber),
/* harmony export */   "callWithAsyncErrorHandling": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.callWithAsyncErrorHandling),
/* harmony export */   "callWithErrorHandling": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.callWithErrorHandling),
/* harmony export */   "camelize": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.camelize),
/* harmony export */   "capitalize": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.capitalize),
/* harmony export */   "cloneVNode": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.cloneVNode),
/* harmony export */   "compatUtils": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.compatUtils),
/* harmony export */   "compile": () => (/* binding */ compileToFunction),
/* harmony export */   "computed": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.computed),
/* harmony export */   "createApp": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.createApp),
/* harmony export */   "createBlock": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.createBlock),
/* harmony export */   "createCommentVNode": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.createCommentVNode),
/* harmony export */   "createElementBlock": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.createElementBlock),
/* harmony export */   "createElementVNode": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.createElementVNode),
/* harmony export */   "createHydrationRenderer": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.createHydrationRenderer),
/* harmony export */   "createPropsRestProxy": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.createPropsRestProxy),
/* harmony export */   "createRenderer": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.createRenderer),
/* harmony export */   "createSSRApp": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.createSSRApp),
/* harmony export */   "createSlots": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.createSlots),
/* harmony export */   "createStaticVNode": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.createStaticVNode),
/* harmony export */   "createTextVNode": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.createTextVNode),
/* harmony export */   "createVNode": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.createVNode),
/* harmony export */   "customRef": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.customRef),
/* harmony export */   "defineAsyncComponent": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.defineAsyncComponent),
/* harmony export */   "defineComponent": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.defineComponent),
/* harmony export */   "defineCustomElement": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.defineCustomElement),
/* harmony export */   "defineEmits": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.defineEmits),
/* harmony export */   "defineExpose": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.defineExpose),
/* harmony export */   "defineModel": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.defineModel),
/* harmony export */   "defineOptions": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.defineOptions),
/* harmony export */   "defineProps": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.defineProps),
/* harmony export */   "defineSSRCustomElement": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.defineSSRCustomElement),
/* harmony export */   "defineSlots": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.defineSlots),
/* harmony export */   "devtools": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.devtools),
/* harmony export */   "effect": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.effect),
/* harmony export */   "effectScope": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.effectScope),
/* harmony export */   "getCurrentInstance": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.getCurrentInstance),
/* harmony export */   "getCurrentScope": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.getCurrentScope),
/* harmony export */   "getTransitionRawChildren": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.getTransitionRawChildren),
/* harmony export */   "guardReactiveProps": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.guardReactiveProps),
/* harmony export */   "h": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.h),
/* harmony export */   "handleError": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.handleError),
/* harmony export */   "hasInjectionContext": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.hasInjectionContext),
/* harmony export */   "hydrate": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.hydrate),
/* harmony export */   "initCustomFormatter": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.initCustomFormatter),
/* harmony export */   "initDirectivesForSSR": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.initDirectivesForSSR),
/* harmony export */   "inject": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.inject),
/* harmony export */   "isMemoSame": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.isMemoSame),
/* harmony export */   "isProxy": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.isProxy),
/* harmony export */   "isReactive": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.isReactive),
/* harmony export */   "isReadonly": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.isReadonly),
/* harmony export */   "isRef": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.isRef),
/* harmony export */   "isRuntimeOnly": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.isRuntimeOnly),
/* harmony export */   "isShallow": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.isShallow),
/* harmony export */   "isVNode": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.isVNode),
/* harmony export */   "markRaw": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.markRaw),
/* harmony export */   "mergeDefaults": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.mergeDefaults),
/* harmony export */   "mergeModels": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.mergeModels),
/* harmony export */   "mergeProps": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.mergeProps),
/* harmony export */   "nextTick": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.nextTick),
/* harmony export */   "normalizeClass": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.normalizeClass),
/* harmony export */   "normalizeProps": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.normalizeProps),
/* harmony export */   "normalizeStyle": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.normalizeStyle),
/* harmony export */   "onActivated": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.onActivated),
/* harmony export */   "onBeforeMount": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.onBeforeMount),
/* harmony export */   "onBeforeUnmount": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.onBeforeUnmount),
/* harmony export */   "onBeforeUpdate": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.onBeforeUpdate),
/* harmony export */   "onDeactivated": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.onDeactivated),
/* harmony export */   "onErrorCaptured": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.onErrorCaptured),
/* harmony export */   "onMounted": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.onMounted),
/* harmony export */   "onRenderTracked": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.onRenderTracked),
/* harmony export */   "onRenderTriggered": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.onRenderTriggered),
/* harmony export */   "onScopeDispose": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.onScopeDispose),
/* harmony export */   "onServerPrefetch": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.onServerPrefetch),
/* harmony export */   "onUnmounted": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.onUnmounted),
/* harmony export */   "onUpdated": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.onUpdated),
/* harmony export */   "openBlock": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.openBlock),
/* harmony export */   "popScopeId": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.popScopeId),
/* harmony export */   "provide": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.provide),
/* harmony export */   "proxyRefs": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.proxyRefs),
/* harmony export */   "pushScopeId": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.pushScopeId),
/* harmony export */   "queuePostFlushCb": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.queuePostFlushCb),
/* harmony export */   "reactive": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.reactive),
/* harmony export */   "readonly": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.readonly),
/* harmony export */   "ref": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.ref),
/* harmony export */   "registerRuntimeCompiler": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.registerRuntimeCompiler),
/* harmony export */   "render": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.render),
/* harmony export */   "renderList": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.renderList),
/* harmony export */   "renderSlot": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.renderSlot),
/* harmony export */   "resolveComponent": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.resolveComponent),
/* harmony export */   "resolveDirective": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.resolveDirective),
/* harmony export */   "resolveDynamicComponent": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.resolveDynamicComponent),
/* harmony export */   "resolveFilter": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.resolveFilter),
/* harmony export */   "resolveTransitionHooks": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.resolveTransitionHooks),
/* harmony export */   "setBlockTracking": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.setBlockTracking),
/* harmony export */   "setDevtoolsHook": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.setDevtoolsHook),
/* harmony export */   "setTransitionHooks": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.setTransitionHooks),
/* harmony export */   "shallowReactive": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.shallowReactive),
/* harmony export */   "shallowReadonly": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.shallowReadonly),
/* harmony export */   "shallowRef": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.shallowRef),
/* harmony export */   "ssrContextKey": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.ssrContextKey),
/* harmony export */   "ssrUtils": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.ssrUtils),
/* harmony export */   "stop": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.stop),
/* harmony export */   "toDisplayString": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.toDisplayString),
/* harmony export */   "toHandlerKey": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.toHandlerKey),
/* harmony export */   "toHandlers": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.toHandlers),
/* harmony export */   "toRaw": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.toRaw),
/* harmony export */   "toRef": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.toRef),
/* harmony export */   "toRefs": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.toRefs),
/* harmony export */   "toValue": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.toValue),
/* harmony export */   "transformVNodeArgs": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.transformVNodeArgs),
/* harmony export */   "triggerRef": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.triggerRef),
/* harmony export */   "unref": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.unref),
/* harmony export */   "useAttrs": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.useAttrs),
/* harmony export */   "useCssModule": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.useCssModule),
/* harmony export */   "useCssVars": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.useCssVars),
/* harmony export */   "useModel": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.useModel),
/* harmony export */   "useSSRContext": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.useSSRContext),
/* harmony export */   "useSlots": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.useSlots),
/* harmony export */   "useTransitionState": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.useTransitionState),
/* harmony export */   "vModelCheckbox": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.vModelCheckbox),
/* harmony export */   "vModelDynamic": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.vModelDynamic),
/* harmony export */   "vModelRadio": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.vModelRadio),
/* harmony export */   "vModelSelect": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.vModelSelect),
/* harmony export */   "vModelText": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.vModelText),
/* harmony export */   "vShow": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.vShow),
/* harmony export */   "version": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.version),
/* harmony export */   "warn": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.warn),
/* harmony export */   "watch": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.watch),
/* harmony export */   "watchEffect": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.watchEffect),
/* harmony export */   "watchPostEffect": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.watchPostEffect),
/* harmony export */   "watchSyncEffect": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.watchSyncEffect),
/* harmony export */   "withAsyncContext": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.withAsyncContext),
/* harmony export */   "withCtx": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.withCtx),
/* harmony export */   "withDefaults": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.withDefaults),
/* harmony export */   "withDirectives": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.withDirectives),
/* harmony export */   "withKeys": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.withKeys),
/* harmony export */   "withMemo": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.withMemo),
/* harmony export */   "withModifiers": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.withModifiers),
/* harmony export */   "withScopeId": () => (/* reexport safe */ _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__.withScopeId)
/* harmony export */ });
/* harmony import */ var _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @vue/runtime-dom */ "./node_modules/@vue/runtime-dom/dist/runtime-dom.esm-bundler.js");
/* harmony import */ var _vue_runtime_dom__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @vue/runtime-dom */ "./node_modules/@vue/runtime-core/dist/runtime-core.esm-bundler.js");
/* harmony import */ var _vue_compiler_dom__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @vue/compiler-dom */ "./node_modules/@vue/compiler-dom/dist/compiler-dom.esm-bundler.js");
/* harmony import */ var _vue_shared__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @vue/shared */ "./node_modules/@vue/shared/dist/shared.esm-bundler.js");






function initDev() {
  {
    (0,_vue_runtime_dom__WEBPACK_IMPORTED_MODULE_1__.initCustomFormatter)();
  }
}

if (true) {
  initDev();
}
const compileCache = /* @__PURE__ */ Object.create(null);
function compileToFunction(template, options) {
  if (!(0,_vue_shared__WEBPACK_IMPORTED_MODULE_2__.isString)(template)) {
    if (template.nodeType) {
      template = template.innerHTML;
    } else {
       true && (0,_vue_runtime_dom__WEBPACK_IMPORTED_MODULE_1__.warn)(`invalid template option: `, template);
      return _vue_shared__WEBPACK_IMPORTED_MODULE_2__.NOOP;
    }
  }
  const key = template;
  const cached = compileCache[key];
  if (cached) {
    return cached;
  }
  if (template[0] === "#") {
    const el = document.querySelector(template);
    if ( true && !el) {
      (0,_vue_runtime_dom__WEBPACK_IMPORTED_MODULE_1__.warn)(`Template element not found or is empty: ${template}`);
    }
    template = el ? el.innerHTML : ``;
  }
  const opts = (0,_vue_shared__WEBPACK_IMPORTED_MODULE_2__.extend)(
    {
      hoistStatic: true,
      onError:  true ? onError : 0,
      onWarn:  true ? (e) => onError(e, true) : 0
    },
    options
  );
  if (!opts.isCustomElement && typeof customElements !== "undefined") {
    opts.isCustomElement = (tag) => !!customElements.get(tag);
  }
  const { code } = (0,_vue_compiler_dom__WEBPACK_IMPORTED_MODULE_3__.compile)(template, opts);
  function onError(err, asWarning = false) {
    const message = asWarning ? err.message : `Template compilation error: ${err.message}`;
    const codeFrame = err.loc && (0,_vue_shared__WEBPACK_IMPORTED_MODULE_2__.generateCodeFrame)(
      template,
      err.loc.start.offset,
      err.loc.end.offset
    );
    (0,_vue_runtime_dom__WEBPACK_IMPORTED_MODULE_1__.warn)(codeFrame ? `${message}
${codeFrame}` : message);
  }
  const render = new Function("Vue", code)(_vue_runtime_dom__WEBPACK_IMPORTED_MODULE_0__);
  render._rc = true;
  return compileCache[key] = render;
}
(0,_vue_runtime_dom__WEBPACK_IMPORTED_MODULE_1__.registerRuntimeCompiler)(compileToFunction);




/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			id: moduleId,
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/global */
/******/ 	(() => {
/******/ 		__webpack_require__.g = (function() {
/******/ 			if (typeof globalThis === 'object') return globalThis;
/******/ 			try {
/******/ 				return this || new Function('return this')();
/******/ 			} catch (e) {
/******/ 				if (typeof window === 'object') return window;
/******/ 			}
/******/ 		})();
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/nonce */
/******/ 	(() => {
/******/ 		__webpack_require__.nc = undefined;
/******/ 	})();
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry need to be wrapped in an IIFE because it need to be in strict mode.
(() => {
"use strict";
/*!***************************************************!*\
  !*** ./resources/assets/js/app_video_pregnant.js ***!
  \***************************************************/
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var vue__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! vue */ "./node_modules/vue/dist/vue.esm-bundler.js");
/* harmony import */ var _video_AppPregnant_vue__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./video/AppPregnant.vue */ "./resources/assets/js/video/AppPregnant.vue");
/*require('./bootstrap');*/



(0,vue__WEBPACK_IMPORTED_MODULE_0__.createApp)(_video_AppPregnant_vue__WEBPACK_IMPORTED_MODULE_1__["default"]).mount('#app_video_pregnant');
})();

/******/ })()
;
/*! For license information please see app_video_pregnant.js.LICENSE.txt */
(()=>{var e={2505:(e,t,n)=>{e.exports=n(8015)},5592:(e,t,n)=>{"use strict";var r=n(9516),i=n(7522),o=n(3948),s=n(9106),a=n(9615),c=n(2012),d=n(4202),l=n(7763),h=n(4896),u=n(1928);e.exports=function(e){return new Promise((function(t,n){var p,f=e.data,m=e.headers,g=e.responseType;function _(){e.cancelToken&&e.cancelToken.unsubscribe(p),e.signal&&e.signal.removeEventListener("abort",p)}r.isFormData(f)&&delete m["Content-Type"];var E=new XMLHttpRequest;if(e.auth){var y=e.auth.username||"",v=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";m.Authorization="Basic "+btoa(y+":"+v)}var b=a(e.baseURL,e.url);function S(){if(E){var r="getAllResponseHeaders"in E?c(E.getAllResponseHeaders()):null,o={data:g&&"text"!==g&&"json"!==g?E.response:E.responseText,status:E.status,statusText:E.statusText,headers:r,config:e,request:E};i((function(e){t(e),_()}),(function(e){n(e),_()}),o),E=null}}if(E.open(e.method.toUpperCase(),s(b,e.params,e.paramsSerializer),!0),E.timeout=e.timeout,"onloadend"in E?E.onloadend=S:E.onreadystatechange=function(){E&&4===E.readyState&&(0!==E.status||E.responseURL&&0===E.responseURL.indexOf("file:"))&&setTimeout(S)},E.onabort=function(){E&&(n(l("Request aborted",e,"ECONNABORTED",E)),E=null)},E.onerror=function(){n(l("Network Error",e,null,E)),E=null},E.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",r=e.transitional||h;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(l(t,e,r.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",E)),E=null},r.isStandardBrowserEnv()){var T=(e.withCredentials||d(b))&&e.xsrfCookieName?o.read(e.xsrfCookieName):void 0;T&&(m[e.xsrfHeaderName]=T)}"setRequestHeader"in E&&r.forEach(m,(function(e,t){void 0===f&&"content-type"===t.toLowerCase()?delete m[t]:E.setRequestHeader(t,e)})),r.isUndefined(e.withCredentials)||(E.withCredentials=!!e.withCredentials),g&&"json"!==g&&(E.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&E.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&E.upload&&E.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(p=function(e){E&&(n(!e||e&&e.type?new u("canceled"):e),E.abort(),E=null)},e.cancelToken&&e.cancelToken.subscribe(p),e.signal&&(e.signal.aborted?p():e.signal.addEventListener("abort",p))),f||(f=null),E.send(f)}))}},8015:(e,t,n)=>{"use strict";var r=n(9516),i=n(9012),o=n(5155),s=n(5343);var a=function e(t){var n=new o(t),a=i(o.prototype.request,n);return r.extend(a,o.prototype,n),r.extend(a,n),a.create=function(n){return e(s(t,n))},a}(n(7412));a.Axios=o,a.Cancel=n(1928),a.CancelToken=n(3191),a.isCancel=n(3864),a.VERSION=n(9641).version,a.all=function(e){return Promise.all(e)},a.spread=n(7980),a.isAxiosError=n(5019),e.exports=a,e.exports.default=a},1928:e=>{"use strict";function t(e){this.message=e}t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,e.exports=t},3191:(e,t,n)=>{"use strict";var r=n(1928);function i(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;this.promise.then((function(e){if(n._listeners){var t,r=n._listeners.length;for(t=0;t<r;t++)n._listeners[t](e);n._listeners=null}})),this.promise.then=function(e){var t,r=new Promise((function(e){n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e){n.reason||(n.reason=new r(e),t(n.reason))}))}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},i.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},i.source=function(){var e;return{token:new i((function(t){e=t})),cancel:e}},e.exports=i},3864:e=>{"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},5155:(e,t,n)=>{"use strict";var r=n(9516),i=n(9106),o=n(3471),s=n(4490),a=n(5343),c=n(4841),d=c.validators;function l(e){this.defaults=e,this.interceptors={request:new o,response:new o}}l.prototype.request=function(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},(t=a(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var n=t.transitional;void 0!==n&&c.assertOptions(n,{silentJSONParsing:d.transitional(d.boolean),forcedJSONParsing:d.transitional(d.boolean),clarifyTimeoutError:d.transitional(d.boolean)},!1);var r=[],i=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(i=i&&e.synchronous,r.unshift(e.fulfilled,e.rejected))}));var o,l=[];if(this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)})),!i){var h=[s,void 0];for(Array.prototype.unshift.apply(h,r),h=h.concat(l),o=Promise.resolve(t);h.length;)o=o.then(h.shift(),h.shift());return o}for(var u=t;r.length;){var p=r.shift(),f=r.shift();try{u=p(u)}catch(e){f(e);break}}try{o=s(u)}catch(e){return Promise.reject(e)}for(;l.length;)o=o.then(l.shift(),l.shift());return o},l.prototype.getUri=function(e){return e=a(this.defaults,e),i(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],(function(e){l.prototype[e]=function(t,n){return this.request(a(n||{},{method:e,url:t,data:(n||{}).data}))}})),r.forEach(["post","put","patch"],(function(e){l.prototype[e]=function(t,n,r){return this.request(a(r||{},{method:e,url:t,data:n}))}})),e.exports=l},3471:(e,t,n)=>{"use strict";var r=n(9516);function i(){this.handlers=[]}i.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},i.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},i.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=i},9615:(e,t,n)=>{"use strict";var r=n(9137),i=n(4680);e.exports=function(e,t){return e&&!r(t)?i(e,t):t}},7763:(e,t,n)=>{"use strict";var r=n(5449);e.exports=function(e,t,n,i,o){var s=new Error(e);return r(s,t,n,i,o)}},4490:(e,t,n)=>{"use strict";var r=n(9516),i=n(2881),o=n(3864),s=n(7412),a=n(1928);function c(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new a("canceled")}e.exports=function(e){return c(e),e.headers=e.headers||{},e.data=i.call(e,e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||s.adapter)(e).then((function(t){return c(e),t.data=i.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return o(t)||(c(e),t&&t.response&&(t.response.data=i.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},5449:e=>{"use strict";e.exports=function(e,t,n,r,i){return e.config=t,n&&(e.code=n),e.request=r,e.response=i,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e}},5343:(e,t,n)=>{"use strict";var r=n(9516);e.exports=function(e,t){t=t||{};var n={};function i(e,t){return r.isPlainObject(e)&&r.isPlainObject(t)?r.merge(e,t):r.isPlainObject(t)?r.merge({},t):r.isArray(t)?t.slice():t}function o(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:i(void 0,e[n]):i(e[n],t[n])}function s(e){if(!r.isUndefined(t[e]))return i(void 0,t[e])}function a(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:i(void 0,e[n]):i(void 0,t[n])}function c(n){return n in t?i(e[n],t[n]):n in e?i(void 0,e[n]):void 0}var d={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:c};return r.forEach(Object.keys(e).concat(Object.keys(t)),(function(e){var t=d[e]||o,i=t(e);r.isUndefined(i)&&t!==c||(n[e]=i)})),n}},7522:(e,t,n)=>{"use strict";var r=n(7763);e.exports=function(e,t,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?t(r("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},2881:(e,t,n)=>{"use strict";var r=n(9516),i=n(7412);e.exports=function(e,t,n){var o=this||i;return r.forEach(n,(function(n){e=n.call(o,e,t)})),e}},7412:(e,t,n)=>{"use strict";var r=n(5606),i=n(9516),o=n(7018),s=n(5449),a=n(4896),c={"Content-Type":"application/x-www-form-urlencoded"};function d(e,t){!i.isUndefined(e)&&i.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var l,h={transitional:a,adapter:(("undefined"!=typeof XMLHttpRequest||void 0!==r&&"[object process]"===Object.prototype.toString.call(r))&&(l=n(5592)),l),transformRequest:[function(e,t){return o(t,"Accept"),o(t,"Content-Type"),i.isFormData(e)||i.isArrayBuffer(e)||i.isBuffer(e)||i.isStream(e)||i.isFile(e)||i.isBlob(e)?e:i.isArrayBufferView(e)?e.buffer:i.isURLSearchParams(e)?(d(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):i.isObject(e)||t&&"application/json"===t["Content-Type"]?(d(t,"application/json"),function(e,t,n){if(i.isString(e))try{return(t||JSON.parse)(e),i.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||h.transitional,n=t&&t.silentJSONParsing,r=t&&t.forcedJSONParsing,o=!n&&"json"===this.responseType;if(o||r&&i.isString(e)&&e.length)try{return JSON.parse(e)}catch(e){if(o){if("SyntaxError"===e.name)throw s(e,this,"E_JSON_PARSE");throw e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};i.forEach(["delete","get","head"],(function(e){h.headers[e]={}})),i.forEach(["post","put","patch"],(function(e){h.headers[e]=i.merge(c)})),e.exports=h},4896:e=>{"use strict";e.exports={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1}},9641:e=>{e.exports={version:"0.26.1"}},9012:e=>{"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},9106:(e,t,n)=>{"use strict";var r=n(9516);function i(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var o;if(n)o=n(t);else if(r.isURLSearchParams(t))o=t.toString();else{var s=[];r.forEach(t,(function(e,t){null!=e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),s.push(i(t)+"="+i(e))})))})),o=s.join("&")}if(o){var a=e.indexOf("#");-1!==a&&(e=e.slice(0,a)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}},4680:e=>{"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},3948:(e,t,n)=>{"use strict";var r=n(9516);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,i,o,s){var a=[];a.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),r.isString(i)&&a.push("path="+i),r.isString(o)&&a.push("domain="+o),!0===s&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},9137:e=>{"use strict";e.exports=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}},5019:(e,t,n)=>{"use strict";var r=n(9516);e.exports=function(e){return r.isObject(e)&&!0===e.isAxiosError}},4202:(e,t,n)=>{"use strict";var r=n(9516);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function i(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=i(window.location.href),function(t){var n=r.isString(t)?i(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},7018:(e,t,n)=>{"use strict";var r=n(9516);e.exports=function(e,t){r.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}},2012:(e,t,n)=>{"use strict";var r=n(9516),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,o,s={};return e?(r.forEach(e.split("\n"),(function(e){if(o=e.indexOf(":"),t=r.trim(e.substr(0,o)).toLowerCase(),n=r.trim(e.substr(o+1)),t){if(s[t]&&i.indexOf(t)>=0)return;s[t]="set-cookie"===t?(s[t]?s[t]:[]).concat([n]):s[t]?s[t]+", "+n:n}})),s):s}},7980:e=>{"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},4841:(e,t,n)=>{"use strict";var r=n(9641).version,i={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){i[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var o={};i.transitional=function(e,t,n){function i(e,t){return"[Axios v"+r+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,r,s){if(!1===e)throw new Error(i(r," has been removed"+(t?" in "+t:"")));return t&&!o[r]&&(o[r]=!0,console.warn(i(r," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,r,s)}},e.exports={assertOptions:function(e,t,n){if("object"!=typeof e)throw new TypeError("options must be an object");for(var r=Object.keys(e),i=r.length;i-- >0;){var o=r[i],s=t[o];if(s){var a=e[o],c=void 0===a||s(a,o,e);if(!0!==c)throw new TypeError("option "+o+" must be "+c)}else if(!0!==n)throw Error("Unknown option "+o)}},validators:i}},9516:(e,t,n)=>{"use strict";var r=n(9012),i=Object.prototype.toString;function o(e){return Array.isArray(e)}function s(e){return void 0===e}function a(e){return"[object ArrayBuffer]"===i.call(e)}function c(e){return null!==e&&"object"==typeof e}function d(e){if("[object Object]"!==i.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function l(e){return"[object Function]"===i.call(e)}function h(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),o(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}e.exports={isArray:o,isArrayBuffer:a,isBuffer:function(e){return null!==e&&!s(e)&&null!==e.constructor&&!s(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"[object FormData]"===i.call(e)},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&a(e.buffer)},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:c,isPlainObject:d,isUndefined:s,isDate:function(e){return"[object Date]"===i.call(e)},isFile:function(e){return"[object File]"===i.call(e)},isBlob:function(e){return"[object Blob]"===i.call(e)},isFunction:l,isStream:function(e){return c(e)&&l(e.pipe)},isURLSearchParams:function(e){return"[object URLSearchParams]"===i.call(e)},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:h,merge:function e(){var t={};function n(n,r){d(t[r])&&d(n)?t[r]=e(t[r],n):d(n)?t[r]=e({},n):o(n)?t[r]=n.slice():t[r]=n}for(var r=0,i=arguments.length;r<i;r++)h(arguments[r],n);return t},extend:function(e,t,n){return h(t,(function(t,i){e[i]=n&&"function"==typeof t?r(t,n):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}}},7526:(e,t)=>{"use strict";t.byteLength=function(e){var t=a(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,o=a(e),s=o[0],c=o[1],d=new i(function(e,t,n){return 3*(t+n)/4-n}(0,s,c)),l=0,h=c>0?s-4:s;for(n=0;n<h;n+=4)t=r[e.charCodeAt(n)]<<18|r[e.charCodeAt(n+1)]<<12|r[e.charCodeAt(n+2)]<<6|r[e.charCodeAt(n+3)],d[l++]=t>>16&255,d[l++]=t>>8&255,d[l++]=255&t;2===c&&(t=r[e.charCodeAt(n)]<<2|r[e.charCodeAt(n+1)]>>4,d[l++]=255&t);1===c&&(t=r[e.charCodeAt(n)]<<10|r[e.charCodeAt(n+1)]<<4|r[e.charCodeAt(n+2)]>>2,d[l++]=t>>8&255,d[l++]=255&t);return d},t.fromByteArray=function(e){for(var t,r=e.length,i=r%3,o=[],s=16383,a=0,d=r-i;a<d;a+=s)o.push(c(e,a,a+s>d?d:a+s));1===i?(t=e[r-1],o.push(n[t>>2]+n[t<<4&63]+"==")):2===i&&(t=(e[r-2]<<8)+e[r-1],o.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"="));return o.join("")};for(var n=[],r=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0;s<64;++s)n[s]=o[s],r[o.charCodeAt(s)]=s;function a(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function c(e,t,r){for(var i,o,s=[],a=t;a<r;a+=3)i=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),s.push(n[(o=i)>>18&63]+n[o>>12&63]+n[o>>6&63]+n[63&o]);return s.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},8287:(e,t,n)=>{"use strict";var r=n(7526),i=n(251),o=n(4634);function s(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(e,t){if(s()<t)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=c.prototype:(null===e&&(e=new c(t)),e.length=t),e}function c(e,t,n){if(!(c.TYPED_ARRAY_SUPPORT||this instanceof c))return new c(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return h(this,e)}return d(this,e,t,n)}function d(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r);c.TYPED_ARRAY_SUPPORT?(e=t).__proto__=c.prototype:e=u(e,t);return e}(e,t,n,r):"string"==typeof t?function(e,t,n){"string"==typeof n&&""!==n||(n="utf8");if(!c.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|f(t,n);e=a(e,r);var i=e.write(t,n);i!==r&&(e=e.slice(0,i));return e}(e,t,n):function(e,t){if(c.isBuffer(t)){var n=0|p(t.length);return 0===(e=a(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?a(e,0):u(e,t);if("Buffer"===t.type&&o(t.data))return u(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function h(e,t){if(l(t),e=a(e,t<0?0:0|p(t)),!c.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function u(e,t){var n=t.length<0?0:0|p(t.length);e=a(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function p(e){if(e>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|e}function f(e,t){if(c.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return B(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return G(e).length;default:if(r)return B(e).length;t=(""+t).toLowerCase(),r=!0}}function m(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return x(this,t,n);case"utf8":case"utf-8":return w(this,t,n);case"ascii":return A(this,t,n);case"latin1":case"binary":return O(this,t,n);case"base64":return C(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function g(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function _(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=c.from(t,r)),c.isBuffer(t))return 0===t.length?-1:E(e,t,n,r,i);if("number"==typeof t)return t&=255,c.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):E(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function E(e,t,n,r,i){var o,s=1,a=e.length,c=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s=2,a/=2,c/=2,n/=2}function d(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(i){var l=-1;for(o=n;o<a;o++)if(d(e,o)===d(t,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===c)return l*s}else-1!==l&&(o-=o-l),l=-1}else for(n+c>a&&(n=a-c),o=n;o>=0;o--){for(var h=!0,u=0;u<c;u++)if(d(e,o+u)!==d(t,u)){h=!1;break}if(h)return o}return-1}function y(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var s=0;s<r;++s){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))return s;e[n+s]=a}return s}function v(e,t,n,r){return H(B(t,e.length-n),e,n,r)}function b(e,t,n,r){return H(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function S(e,t,n,r){return b(e,t,n,r)}function T(e,t,n,r){return H(G(t),e,n,r)}function R(e,t,n,r){return H(function(e,t){for(var n,r,i,o=[],s=0;s<e.length&&!((t-=2)<0);++s)r=(n=e.charCodeAt(s))>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function C(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function w(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,s,a,c,d=e[i],l=null,h=d>239?4:d>223?3:d>191?2:1;if(i+h<=n)switch(h){case 1:d<128&&(l=d);break;case 2:128==(192&(o=e[i+1]))&&(c=(31&d)<<6|63&o)>127&&(l=c);break;case 3:o=e[i+1],s=e[i+2],128==(192&o)&&128==(192&s)&&(c=(15&d)<<12|(63&o)<<6|63&s)>2047&&(c<55296||c>57343)&&(l=c);break;case 4:o=e[i+1],s=e[i+2],a=e[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(c=(15&d)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&c<1114112&&(l=c)}null===l?(l=65533,h=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=h}return function(e){var t=e.length;if(t<=I)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=I));return n}(r)}t.hp=c,t.IS=50,c.TYPED_ARRAY_SUPPORT=void 0!==n.g.TYPED_ARRAY_SUPPORT?n.g.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),s(),c.poolSize=8192,c._augment=function(e){return e.__proto__=c.prototype,e},c.from=function(e,t,n){return d(null,e,t,n)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(e,t,n){return function(e,t,n,r){return l(t),t<=0?a(e,t):void 0!==n?"string"==typeof r?a(e,t).fill(n,r):a(e,t).fill(n):a(e,t)}(null,e,t,n)},c.allocUnsafe=function(e){return h(null,e)},c.allocUnsafeSlow=function(e){return h(null,e)},c.isBuffer=function(e){return!(null==e||!e._isBuffer)},c.compare=function(e,t){if(!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!o(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=c.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var s=e[n];if(!c.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,i),i+=s.length}return r},c.byteLength=f,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},c.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},c.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},c.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?w(this,0,e):m.apply(this,arguments)},c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){var e="",n=t.IS;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},c.prototype.compare=function(e,t,n,r,i){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),s=(n>>>=0)-(t>>>=0),a=Math.min(o,s),d=this.slice(r,i),l=e.slice(t,n),h=0;h<a;++h)if(d[h]!==l[h]){o=d[h],s=l[h];break}return o<s?-1:s<o?1:0},c.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},c.prototype.indexOf=function(e,t,n){return _(this,e,t,n,!0)},c.prototype.lastIndexOf=function(e,t,n){return _(this,e,t,n,!1)},c.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return y(this,e,t,n);case"utf8":case"utf-8":return v(this,e,t,n);case"ascii":return b(this,e,t,n);case"latin1":case"binary":return S(this,e,t,n);case"base64":return T(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var I=4096;function A(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function O(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function x(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=j(e[o]);return i}function N(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function P(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function D(e,t,n,r,i,o){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function L(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function k(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function M(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function U(e,t,n,r,o){return o||M(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function V(e,t,n,r,o){return o||M(e,0,n,8),i.write(e,t,n,r,52,8),n+8}c.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),c.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=c.prototype;else{var i=t-e;n=new c(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+e]}return n},c.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||P(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},c.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||P(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},c.prototype.readUInt8=function(e,t){return t||P(e,1,this.length),this[e]},c.prototype.readUInt16LE=function(e,t){return t||P(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUInt16BE=function(e,t){return t||P(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUInt32LE=function(e,t){return t||P(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUInt32BE=function(e,t){return t||P(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||P(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},c.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||P(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},c.prototype.readInt8=function(e,t){return t||P(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){t||P(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(e,t){t||P(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(e,t){return t||P(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return t||P(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readFloatLE=function(e,t){return t||P(e,4,this.length),i.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return t||P(e,4,this.length),i.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return t||P(e,8,this.length),i.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return t||P(e,8,this.length),i.read(this,e,!1,52,8)},c.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||D(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},c.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||D(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},c.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,1,255,0),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},c.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):L(this,e,t,!0),t+2},c.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):L(this,e,t,!1),t+2},c.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):k(this,e,t,!0),t+4},c.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):k(this,e,t,!1),t+4},c.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);D(this,e,t,n,i-1,-i)}var o=0,s=1,a=0;for(this[t]=255&e;++o<n&&(s*=256);)e<0&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/s|0)-a&255;return t+n},c.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);D(this,e,t,n,i-1,-i)}var o=n-1,s=1,a=0;for(this[t+o]=255&e;--o>=0&&(s*=256);)e<0&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/s|0)-a&255;return t+n},c.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,1,127,-128),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):L(this,e,t,!0),t+2},c.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):L(this,e,t,!1),t+2},c.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):k(this,e,t,!0),t+4},c.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):k(this,e,t,!1),t+4},c.prototype.writeFloatLE=function(e,t,n){return U(this,e,t,!0,n)},c.prototype.writeFloatBE=function(e,t,n){return U(this,e,t,!1,n)},c.prototype.writeDoubleLE=function(e,t,n){return V(this,e,t,!0,n)},c.prototype.writeDoubleBE=function(e,t,n){return V(this,e,t,!1,n)},c.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,o=r-n;if(this===e&&n<t&&t<r)for(i=o-1;i>=0;--i)e[i+t]=this[i+n];else if(o<1e3||!c.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},c.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!c.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var s=c.isBuffer(e)?e:B(new c(e,r).toString()),a=s.length;for(o=0;o<n-t;++o)this[o+t]=s[o%a]}return this};var F=/[^+\/0-9A-Za-z-_]/g;function j(e){return e<16?"0"+e.toString(16):e.toString(16)}function B(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],s=0;s<r;++s){if((n=e.charCodeAt(s))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function G(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(F,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function H(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}},2542:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(6314),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,"#laboratorySearch[data-v-0c45a2e6]{margin-top:-1px}.laboratory-check[data-v-0c45a2e6]{margin-left:20px;padding:5px}.form-check-label[data-v-0c45a2e6]{margin-left:10px}.form-check-input[data-v-0c45a2e6]{cursor:pointer;transform:scale(1.5)}#modal-body-scroll[data-v-0c45a2e6]{max-height:65vh;overflow-y:auto}",""]);const o=i},9036:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(6314),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,".container[data-v-2ef66500]{border:1px solid #d3d3d3;padding-bottom:12px}.row-presLabel[data-v-2ef66500]{display:flex}.col-presLabel[data-v-2ef66500]{align-items:center;display:flex;flex:1;flex-direction:column;text-align:center}.col-presLabel[data-v-2ef66500],.row-presLabel[data-v-2ef66500]{font-size:13px}label[data-v-2ef66500]{margin-bottom:2px}.col-Label[data-v-2ef66500]{font-style:italic}.underline[data-v-2ef66500]{margin:5px;text-decoration:underline}.row-circle[data-v-2ef66500]{display:flex}.circle1[data-v-2ef66500],.circle2[data-v-2ef66500],.circle3[data-v-2ef66500],.circle4[data-v-2ef66500],.circle5[data-v-2ef66500],.circle6[data-v-2ef66500],.circle7[data-v-2ef66500]{align-items:center;border:1px solid #d3d3d3;border-radius:50%;display:flex;font-size:9px;font-weight:700;height:15px;justify-content:center;width:15px}.circle1[data-v-2ef66500]{margin-left:28%}.circle2[data-v-2ef66500]{margin-left:13%}.circle3[data-v-2ef66500]{margin-left:9%}.circle4[data-v-2ef66500],.circle5[data-v-2ef66500]{margin-left:5%}.circle6[data-v-2ef66500]{margin-left:39%;margin-top:2%}.circle7[data-v-2ef66500]{margin-left:15%;margin-top:2%}",""]);const o=i},6953:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(6314),i=n.n(r),o=n(4571),s=i()((function(e){return e[1]}));s.i(o.A),s.push([e.id,".padded-header,.padded-row td{padding:10px}",""]);const a=s},4571:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(6314),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,'.PrescripBorder {\r\n  border: 1px solid lightgrey;\r\n  margin-bottom: 10px;\r\n  padding-bottom: 10px;\r\n  margin-right: 15px;\r\n  margin-top: 3px;\r\n}\r\n.ExampleAscorbic {\r\n  font-size: 13px;\r\n}\r\n.row .examplePriscribe {\r\n  margin-bottom: -10px;\r\n  background-color: rgb(250, 246, 246);\r\n}\r\n.fade-enter,\r\n.fade-leave-to {\r\n  animation: fadeOut 2s;\r\n}\r\n.fade-in {\r\n  animation: fadeIn 2s;\r\n}\r\n@keyframes fadeIn {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n@keyframes fadeOut {\r\n  0% {\r\n    opacity: 1;\r\n  }\r\n  100% {\r\n    opacity: 0;\r\n  }\r\n}\r\n/*------------------------------------------*/\r\n\r\n.container-fluid {\r\n  border: 4px outset green;\r\n  /*height: 978px;\r\n    object-fit: cover;*/\r\n\r\n  width: 100vw;\r\n  height: 100vh;\r\n}\r\n#calling {\r\n  display: flex;\r\n  position: absolute;\r\n  text-align: center;\r\n  align-items: center;\r\n  justify-content: center;\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n.mainPic {\r\n  position: relative;\r\n  border: 2px outset transparent;\r\n  height: 100%;\r\n  width: 100%;\r\n}\r\n.img-fluid {\r\n  border: 3px outset transparent;\r\n  width: 100%;\r\n}\r\n.img2 {\r\n  border-radius: 30px;\r\n}\r\n.iconCall {\r\n  border: 1px outset transparent;\r\n  width: 100%;\r\n  bottom: 20px;\r\n  text-align: center;\r\n  opacity: 1;\r\n  transition: opacity 0.5s ease-in-out;\r\n}\r\n.iconCall.hidden {\r\n  display: none;\r\n  opacity: 0;\r\n}\r\n.mic-button {\r\n  border-radius: 50%;\r\n}\r\n.video-button {\r\n  border-radius: 50%;\r\n}\r\n.decline-button {\r\n  border-radius: 50%;\r\n  border: 0;\r\n}\r\n.upward-button {\r\n  border-radius: 50%;\r\n  border: 0;\r\n  margin-right: 8px;\r\n}\r\n.prescription-button {\r\n  border-radius: 50%;\r\n  margin-right: 8px;\r\n}\r\n.lab-button {\r\n  border-radius: 50%;\r\n}\r\n.telemedForm {\r\n  position: relative;\r\n  border: 2px outset black;\r\n  margin-top: 5px;\r\n  /* height: 917px;*/\r\n  padding: 0;\r\n  font-size: 14px;\r\n  font-family: Calibri;\r\n\r\n  height: 99%;\r\n}\r\n.tableForm {\r\n  position: relative;\r\n  border: 1px outset transparent;\r\n  /*max-height: 783px;*/\r\n  /*height: auto;*/\r\n  text-align: left;\r\n  line-height: 1.2;\r\n  font-size: 14px;\r\n  font-family: Calibri;\r\n  display: flex;\r\n  flex-direction: column;\r\n  overflow-y: auto;\r\n  overflow-x: hidden;\r\n\r\n  height: 83.5vh;\r\n}\r\n.dohLogo {\r\n  position: relative;\r\n  border: 1px outset transparent;\r\n  top: 10px;\r\n  left: 10px;\r\n  z-index: 2;\r\n  height: 72px;\r\n  width: 76px;\r\n}\r\n.formHeader {\r\n  position: absolute;\r\n  top: 15px;\r\n  left: 95px;\r\n  border: 1px outset transparent;\r\n  text-align: center;\r\n  line-height: 0.1px;\r\n  font-size: 13px;\r\n}\r\n.clinical {\r\n  position: relative;\r\n  text-align: center;\r\n  margin-top: 28px;\r\n  border: 1px outset transparent;\r\n  font-size: 18px;\r\n  font-family: Calibri;\r\n}\r\n\r\n.remotePlayerLayer {\r\n  /*height: 920px;*/\r\n  height: 98.5vh;\r\n}\r\n.remotePlayerDiv {\r\n  height: 960px;\r\n  width: 100%;\r\n}\r\n.localPlayerLayer {\r\n  height: 300px;\r\n  width: 250px;\r\n}\r\n\r\n.localPlayerLayer div {\r\n  border-radius: 10px;\r\n}\r\n.localPlayerDiv {\r\n  position: absolute;\r\n  /* right: 20px;\r\n    bottom: 10px;*/\r\n  bottom: 2%;\r\n  right: 2%;\r\n  border: 2px outset green;\r\n  border-radius: 11px;\r\n}\r\n/*------------------------------------------*/\r\n\r\n.prescription {\r\n  position: relative;\r\n  border: 2px outset transparent;\r\n  margin-top: 5px;\r\n  font-family: Calibri;\r\n}\r\n.textArea {\r\n  border: 1px outset black;\r\n}\r\n.btn {\r\n  position: relative;\r\n  margin-top: 5px;\r\n  margin-bottom: 5px;\r\n  /*margin-right: 5px;*/\r\n}\r\n.forDetails {\r\n  color: #e18e0b;\r\n}\r\n.caseforDetails {\r\n  color: #e18e0b;\r\n  line-height: 1.2;\r\n  white-space: pre-line;\r\n}\r\n.dateReferred {\r\n  color: #e18e0b;\r\n}\r\n.recoSummary {\r\n  color: #e18e0b;\r\n  line-height: 1.2;\r\n  white-space: pre-wrap;\r\n}\r\n.mdHcw {\r\n  color: #e18e0b;\r\n  line-height: 1.2;\r\n}\r\ntr:nth-child(odd) {\r\n  background-color: #f2f2f2;\r\n  border: 1px outset transparent;\r\n}\r\ntr:nth-child(even) {\r\n  background-color: white;\r\n  border: 1px outset transparent;\r\n}\r\n.mic-button-slash:before,\r\n.mic-button-slash:after {\r\n  content: "";\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 0;\r\n  right: 0;\r\n  transform: translateY(-50%);\r\n  height: 2px;\r\n  background-color: #ff0000;\r\n}\r\n.mic-button-slash:before {\r\n  transform: rotate(-45deg);\r\n  padding: 2px;\r\n}\r\n.mic-button-slash:after {\r\n  transform: rotate(-45deg);\r\n}\r\n.video-button-slash:before,\r\n.video-button-slash:after {\r\n  content: "";\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 0;\r\n  right: 0;\r\n  transform: translateY(-50%);\r\n  height: 2px;\r\n  background-color: #ff0000;\r\n}\r\n.video-button-slash:before {\r\n  transform: rotate(-45deg);\r\n  padding: 2px;\r\n}\r\n.video-button-slash:after {\r\n  transform: rotate(-45deg);\r\n}\r\n.video-button:hover,\r\n.mic-button:hover,\r\n.decline-button:hover,\r\n.upward-button:hover,\r\n.prescription-button:hover,\r\n.lab-button:hover {\r\n  background-color: rgba(2, 133, 221, 0.911);\r\n  box-shadow: 0 0.5rem 1rem rgba(2, 133, 221, 0.911);\r\n}\r\n\r\n/*MOBILE VIEWPORT*/\r\n\r\n@media only screen and (min-width: 280px) and (max-width: 280px) and (min-height: 653px) and (max-height: 653px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .telemedForm {\r\n    height: 766px;\r\n  }\r\n  .tableForm {\r\n    font-size: 8px;\r\n    height: 640px;\r\n    overflow-x: auto;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 32px;\r\n    width: 36px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    top: 6px;\r\n    left: 15px;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    font-size: 6.5px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 60px;\r\n    border: 1px outset transparent;\r\n    font-size: 11px;\r\n    font-family: Calibri;\r\n  }\r\n\r\n  .localPlayerDiv {\r\n    top: 20px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 120px;\r\n    width: 100px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 28vh;\r\n    width: 100%;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 601px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 649px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .img2 {\r\n    height: 120px;\r\n    width: 100px;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 653px) and (max-width: 653px) and (min-height: 280px) and (max-height: 280px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 15px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .formHeader {\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 120px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 100vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 228px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 276px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 320px) and (max-width: 320px) and (min-height: 480px) and (max-height: 480px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .telemedForm {\r\n    height: 766px;\r\n  }\r\n  .tableForm {\r\n    font-size: 9px;\r\n    height: 640px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 42px;\r\n    width: 46px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 5%;\r\n    right: 5%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 7px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 55px;\r\n    border: 1px outset transparent;\r\n    font-size: 11px;\r\n    font-family: Calibri;\r\n  }\r\n\r\n  .localPlayerDiv {\r\n    top: 20px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 114px;\r\n    width: 90px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 44vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 114px;\r\n    width: 90px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 428px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 476px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 480px) and (max-width: 480px) and (min-height: 320px) and (max-height: 320px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .telemedForm {\r\n    height: 766px;\r\n  }\r\n  .tableForm {\r\n    font-size: 11px;\r\n    height: 640px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 62px;\r\n    width: 66px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 5%;\r\n    right: 5%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 10px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 35px;\r\n    border: 1px outset transparent;\r\n    font-size: 14px;\r\n    font-family: Calibri;\r\n  }\r\n\r\n  .localPlayerDiv {\r\n    top: 20px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 114px;\r\n    width: 90px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 94vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 114px;\r\n    width: 90px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 268px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 316px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 320px) and (max-width: 320px) and (min-height: 568px) and (max-height: 568px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .telemedForm {\r\n    height: 766px;\r\n  }\r\n  .tableForm {\r\n    font-size: 9px;\r\n    height: 646px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 42px;\r\n    width: 46px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 5%;\r\n    right: 5%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 7px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 55px;\r\n    border: 1px outset transparent;\r\n    font-size: 11px;\r\n    font-family: Calibri;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 20px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 114px;\r\n    width: 90px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 38vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 114px;\r\n    width: 90px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 516px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 565px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 568px) and (max-width: 568px) and (min-height: 320px) and (max-height: 320px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .telemedForm {\r\n    height: 766px;\r\n  }\r\n  .tableForm {\r\n    font-size: 11px;\r\n    height: 645px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 62px;\r\n    width: 66px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 5%;\r\n    right: 5%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 11px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 35px;\r\n    border: 1px outset transparent;\r\n    font-size: 12px;\r\n    font-family: Calibri;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 20px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 114px;\r\n    width: 90px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 100vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 114px;\r\n    width: 90px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 268px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 316px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 320px) and (max-width: 320px) and (min-height: 640px) and (max-height: 640px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .telemedForm {\r\n    height: 766px;\r\n  }\r\n  .tableForm {\r\n    font-size: 9px;\r\n    height: 646px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 42px;\r\n    width: 46px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 5%;\r\n    right: 5%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 7px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 55px;\r\n    border: 1px outset transparent;\r\n    font-size: 11px;\r\n    font-family: Calibri;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 20px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 114px;\r\n    width: 90px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 34vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 114px;\r\n    width: 90px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 588px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 636px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 640px) and (max-width: 640px) and (min-height: 320px) and (max-height: 320px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 5px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 150px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 100vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 267px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 315px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 360px) and (max-width: 360px) and (min-height: 540px) and (max-height: 540px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .telemedForm {\r\n    height: 766px;\r\n  }\r\n  .tableForm {\r\n    font-size: 9px;\r\n    height: 646px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 42px;\r\n    width: 46px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 5%;\r\n    right: 5%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 8.5px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 55px;\r\n    border: 1px outset transparent;\r\n    font-size: 11px;\r\n    font-family: Calibri;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 20px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 114px;\r\n    width: 90px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 43vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 114px;\r\n    width: 90px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 488px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 536px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 540px) and (max-width: 540px) and (min-height: 360px) and (max-height: 360px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .telemedForm {\r\n    height: 766px;\r\n  }\r\n  .tableForm {\r\n    font-size: 11px;\r\n    height: 645px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 62px;\r\n    width: 66px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 5%;\r\n    right: 5%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 11px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 35px;\r\n    border: 1px outset transparent;\r\n    font-size: 12px;\r\n    font-family: Calibri;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 20px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 114px;\r\n    width: 90px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 100vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 114px;\r\n    width: 90px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 308px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 356px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 360px) and (max-width: 360px) and (min-height: 600px) and (max-height: 640px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .telemedForm {\r\n    height: 766px;\r\n  }\r\n  .tableForm {\r\n    font-size: 10px;\r\n    height: 640px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 42px;\r\n    width: 46px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    top: 11px;\r\n    left: 3px;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    font-size: 9px;\r\n  }\r\n\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 55px;\r\n    border: 1px outset transparent;\r\n    font-size: 15px;\r\n    font-family: Calibri;\r\n  }\r\n\r\n  .localPlayerDiv {\r\n    top: 20px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 36vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 590px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 638px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 600px) and (max-width: 640px) and (min-height: 360px) and (max-height: 360px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 5%;\r\n    right: 5%;\r\n    transform: translate(-0%, -50%);\r\n  }\r\n  .localPlayerDiv {\r\n    top: 195px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 100vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 308px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 356px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 360px) and (max-width: 360px) and (min-height: 641px) and (max-height: 740px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .telemedForm {\r\n    height: 766px;\r\n  }\r\n  .tableForm {\r\n    font-size: 10px;\r\n    height: 640px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 42px;\r\n    width: 46px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0;\r\n    top: 60px;\r\n    left: 5%;\r\n    right: 5%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 8px;\r\n  }\r\n\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 55px;\r\n    border: 1px outset transparent;\r\n    font-size: 15px;\r\n    font-family: Calibri;\r\n  }\r\n\r\n  .localPlayerDiv {\r\n    top: 20px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 34vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 688px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 736px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 641px) and (max-width: 740px) and (min-height: 360px) and (max-height: 360px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .formHeader {\r\n    left: 125px;\r\n    border: 1px outset transparent;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 195px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 100vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 308px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 356px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 360px) and (max-width: 360px) and (min-height: 741px) and (max-height: 760px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .telemedForm {\r\n    height: 766px;\r\n  }\r\n  .tableForm {\r\n    font-size: 10px;\r\n    height: 640px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 42px;\r\n    width: 46px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    top: 11px;\r\n    left: 3px;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    font-size: 9px;\r\n  }\r\n\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 55px;\r\n    border: 1px outset transparent;\r\n    font-size: 15px;\r\n    font-family: Calibri;\r\n  }\r\n\r\n  .localPlayerDiv {\r\n    top: 20px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 32vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 708px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 756px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 741px) and (max-width: 760px) and (min-height: 360px) and (max-height: 360px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .formHeader {\r\n    left: 140px;\r\n    border: 1px outset transparent;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 195px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 100vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 308px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 356px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 360px) and (max-width: 360px) and (min-height: 761px) and (max-height: 780px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .telemedForm {\r\n    height: 766px;\r\n  }\r\n  .tableForm {\r\n    font-size: 10px;\r\n    height: 640px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 42px;\r\n    width: 46px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    top: 11px;\r\n    left: 3px;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    font-size: 9px;\r\n  }\r\n\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 55px;\r\n    border: 1px outset transparent;\r\n    font-size: 15px;\r\n    font-family: Calibri;\r\n  }\r\n\r\n  .localPlayerDiv {\r\n    top: 20px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 32vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 728px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 776px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 761px) and (max-width: 780px) and (min-height: 360px) and (max-height: 360px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .formHeader {\r\n    left: 140px;\r\n    border: 1px outset transparent;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 195px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 100vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 308px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 356px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 360px) and (max-width: 360px) and (min-height: 781px) and (max-height: 800px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .telemedForm {\r\n    height: 766px;\r\n  }\r\n  .tableForm {\r\n    font-size: 10px;\r\n    height: 640px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 42px;\r\n    width: 46px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 2%;\r\n    right: 2%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 9px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 55px;\r\n    border: 1px outset transparent;\r\n    font-size: 15px;\r\n    font-family: Calibri;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 20px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 30vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 747px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 796px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 781px) and (max-width: 800px) and (min-height: 360px) and (max-height: 360px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .formHeader {\r\n    left: 175px;\r\n    border: 1px outset transparent;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 200px;\r\n    right: 10px;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 100vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 308px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 356px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 360px) and (max-width: 360px) and (min-height: 801px) and (max-height: 840px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .telemedForm {\r\n    height: 766px;\r\n  }\r\n  .tableForm {\r\n    font-size: 10px;\r\n    height: 640px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 42px;\r\n    width: 46px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 2%;\r\n    right: 2%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 9px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 55px;\r\n    border: 1px outset transparent;\r\n    font-size: 15px;\r\n    font-family: Calibri;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 20px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 30vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 787px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 836px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 801px) and (max-width: 840px) and (min-height: 360px) and (max-height: 360px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .formHeader {\r\n    left: 175px;\r\n    border: 1px outset transparent;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 200px;\r\n    right: 10px;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 100vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 308px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 356px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 375px) and (max-width: 375px) and (min-height: 640px) and (max-height: 667px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .telemedForm {\r\n    height: 766px;\r\n  }\r\n  .tableForm {\r\n    font-size: 10px;\r\n    height: 640px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 42px;\r\n    width: 46px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0;\r\n    top: 60px;\r\n    left: 5%;\r\n    right: 5%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 9px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 55px;\r\n    border: 1px outset transparent;\r\n    font-size: 15px;\r\n    font-family: Calibri;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 20px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 38vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 614px;\r\n    /*aspect-ratio: 4/3;*/\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 662px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    top: 50%;\r\n  }\r\n\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 640px) and (max-width: 667px) and (min-height: 375px) and (max-height: 375px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 210px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 100vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 323px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 371px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 375px) and (max-width: 375px) and (min-height: 720px) and (max-height: 812px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .telemedForm {\r\n    height: 766px;\r\n  }\r\n  .tableForm {\r\n    font-size: 10px;\r\n    height: 640px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 42px;\r\n    width: 46px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    top: 11px;\r\n    left: 11px;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    font-size: 9px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 55px;\r\n    border: 1px outset transparent;\r\n    font-size: 15px;\r\n    font-family: Calibri;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 40px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 32vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 762px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 810px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 720px) and (max-width: 812px) and (min-height: 375px) and (max-height: 375px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .tableForm {\r\n    font-size: 18px;\r\n    height: 639px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 10px;\r\n    left: 10px;\r\n    z-index: 2;\r\n    height: 92px;\r\n    width: 96px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    top: 15px;\r\n    left: 120px;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 1px;\r\n    font-size: 16px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 15px;\r\n    border: 1px outset transparent;\r\n    font-size: 24px;\r\n    font-family: Calibri;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 100vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 174px;\r\n    width: 150px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    top: auto;\r\n    right: 0;\r\n    bottom: 20px;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 174px;\r\n    width: 150px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 325px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 372px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 384px) and (max-width: 384px) and (min-height: 640px) and (max-height: 640px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .telemedForm {\r\n    height: 766px;\r\n  }\r\n  .tableForm {\r\n    font-size: 10px;\r\n    height: 640px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 42px;\r\n    width: 46px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 10px;\r\n  }\r\n\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 55px;\r\n    border: 1px outset transparent;\r\n    font-size: 15px;\r\n    font-family: Calibri;\r\n  }\r\n\r\n  .localPlayerDiv {\r\n    top: 20px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 40vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 587px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 635px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 640px) and (max-width: 640px) and (min-height: 384px) and (max-height: 384px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 5px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 230px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 100vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 331px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 380px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 384px) and (max-width: 385px) and (min-height: 854px) and (max-height: 854px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .telemedForm {\r\n    height: 766px;\r\n  }\r\n  .tableForm {\r\n    font-size: 10px;\r\n    height: 640px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 42px;\r\n    width: 46px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 10px;\r\n  }\r\n\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 55px;\r\n    border: 1px outset transparent;\r\n    font-size: 15px;\r\n    font-family: Calibri;\r\n  }\r\n\r\n  .localPlayerDiv {\r\n    top: 20px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 32vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 802px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 850px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 854px) and (max-width: 854px) and (min-height: 384px) and (max-height: 385px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .formHeader {\r\n    left: 175px;\r\n    border: 1px outset transparent;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 230px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 100vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 333px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 380px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 390px) and (max-width: 390px) and (min-height: 695px) and (max-height: 695px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .telemedForm {\r\n    height: 766px;\r\n  }\r\n  .tableForm {\r\n    font-size: 10px;\r\n    height: 640px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 42px;\r\n    width: 46px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 10px;\r\n  }\r\n\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 55px;\r\n    border: 1px outset transparent;\r\n    font-size: 15px;\r\n    font-family: Calibri;\r\n  }\r\n\r\n  .localPlayerDiv {\r\n    top: 20px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 38vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 643px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 690px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 695px) and (max-width: 695px) and (min-height: 390px) and (max-height: 390px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n  }\r\n  .localPlayerDiv {\r\n    top: 230px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 100vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 338px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 386px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 390px) and (max-width: 390px) and (min-height: 844px) and (max-height: 844px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .telemedForm {\r\n    height: 766px;\r\n  }\r\n  .tableForm {\r\n    font-size: 10px;\r\n    height: 640px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 42px;\r\n    width: 46px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0;\r\n    top: 60px;\r\n    left: 5%;\r\n    right: 5%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 9px;\r\n  }\r\n\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 55px;\r\n    border: 1px outset transparent;\r\n    font-size: 15px;\r\n    font-family: Calibri;\r\n  }\r\n\r\n  .localPlayerDiv {\r\n    top: 20px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 32vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 791px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 840px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 844px) and (max-width: 844px) and (min-height: 390px) and (max-height: 390px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .formHeader {\r\n    left: 175px;\r\n    border: 1px outset transparent;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 230px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 100vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 338px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 386px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 392px) and (max-width: 392px) and (min-height: 800px) and (max-height: 800px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .telemedForm {\r\n    height: 766px;\r\n  }\r\n  .tableForm {\r\n    font-size: 10px;\r\n    height: 640px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 42px;\r\n    width: 46px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 10px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 55px;\r\n    border: 1px outset transparent;\r\n    font-size: 15px;\r\n    font-family: Calibri;\r\n  }\r\n\r\n  .localPlayerDiv {\r\n    top: 20px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 33vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 748px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 796px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 800px) and (max-width: 800px) and (min-height: 392px) and (max-height: 392px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n  }\r\n  .localPlayerDiv {\r\n    top: 230px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 100vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 340px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 388px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 393px) and (max-width: 393px) and (min-height: 786px) and (max-height: 786px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .telemedForm {\r\n    height: 766px;\r\n  }\r\n  .tableForm {\r\n    font-size: 10px;\r\n    height: 640px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 42px;\r\n    width: 46px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 10px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 55px;\r\n    border: 1px outset transparent;\r\n    font-size: 15px;\r\n    font-family: Calibri;\r\n  }\r\n\r\n  .localPlayerDiv {\r\n    top: 20px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 33vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 734px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 782px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 786px) and (max-width: 786px) and (min-height: 393px) and (max-height: 393px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n  }\r\n  .localPlayerDiv {\r\n    top: 230px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 100vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 341px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 389px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 393px) and (max-width: 393px) and (min-height: 808px) and (max-height: 808px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .telemedForm {\r\n    height: 766px;\r\n  }\r\n  .tableForm {\r\n    font-size: 10px;\r\n    height: 640px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 42px;\r\n    width: 46px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 10px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 55px;\r\n    border: 1px outset transparent;\r\n    font-size: 15px;\r\n    font-family: Calibri;\r\n  }\r\n\r\n  .localPlayerDiv {\r\n    top: 20px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 33vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 756px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 804px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 808px) and (max-width: 808px) and (min-height: 393px) and (max-height: 393px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n  }\r\n  .localPlayerDiv {\r\n    top: 230px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 100vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 341px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 389px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 393px) and (max-width: 393px) and (min-height: 816px) and (max-height: 817px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .telemedForm {\r\n    height: 766px;\r\n  }\r\n  .tableForm {\r\n    font-size: 10px;\r\n    height: 640px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 42px;\r\n    width: 46px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 10px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 55px;\r\n    border: 1px outset transparent;\r\n    font-size: 15px;\r\n    font-family: Calibri;\r\n  }\r\n\r\n  .localPlayerDiv {\r\n    top: 20px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 33vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 764px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 812px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 816px) and (max-width: 817px) and (min-height: 393px) and (max-height: 393px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n  }\r\n  .localPlayerDiv {\r\n    top: 230px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 100vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 341px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 389px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 393px) and (max-width: 393px) and (min-height: 830px) and (max-height: 830px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .telemedForm {\r\n    height: 766px;\r\n  }\r\n  .tableForm {\r\n    font-size: 10px;\r\n    height: 640px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 42px;\r\n    width: 46px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 10px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 55px;\r\n    border: 1px outset transparent;\r\n    font-size: 15px;\r\n    font-family: Calibri;\r\n  }\r\n\r\n  .localPlayerDiv {\r\n    top: 20px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 33vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 778px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 826px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 830px) and (max-width: 830px) and (min-height: 393px) and (max-height: 393px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n  }\r\n  .localPlayerDiv {\r\n    top: 230px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 100vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 341px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 389px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 393px) and (max-width: 393px) and (min-height: 873px) and (max-height: 873px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .telemedForm {\r\n    height: 766px;\r\n  }\r\n  .tableForm {\r\n    font-size: 10px;\r\n    height: 640px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 42px;\r\n    width: 46px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 10px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 55px;\r\n    border: 1px outset transparent;\r\n    font-size: 15px;\r\n    font-family: Calibri;\r\n  }\r\n\r\n  .localPlayerDiv {\r\n    top: 20px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 31vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 820px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 868px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 873px) and (max-width: 873px) and (min-height: 393px) and (max-height: 393px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n  }\r\n  .localPlayerDiv {\r\n    top: 230px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 100vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 341px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 389px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 393px) and (max-width: 393px) and (min-height: 851px) and (max-height: 852px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .telemedForm {\r\n    height: 766px;\r\n  }\r\n  .tableForm {\r\n    font-size: 10px;\r\n    height: 640px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 42px;\r\n    width: 46px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0;\r\n    top: 60px;\r\n    left: 5%;\r\n    right: 5%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 9px;\r\n  }\r\n\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 55px;\r\n    border: 1px outset transparent;\r\n    font-size: 15px;\r\n    font-family: Calibri;\r\n  }\r\n\r\n  .localPlayerDiv {\r\n    top: 20px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 32vh;\r\n    width: 100%;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 799px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 847px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 851px) and (max-width: 852px) and (min-height: 393px) and (max-height: 393px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n  }\r\n  .localPlayerDiv {\r\n    top: 230px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 100vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 341px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 389px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 400px) and (max-width: 400px) and (min-height: 880px) and (max-height: 880px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .telemedForm {\r\n    height: 766px;\r\n  }\r\n  .tableForm {\r\n    font-size: 11px;\r\n    height: 640px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 52px;\r\n    width: 56px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 10px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 45px;\r\n    border: 1px outset transparent;\r\n    font-size: 15px;\r\n    font-family: Calibri;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 32vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 40px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 828px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 876px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 880px) and (max-width: 880px) and (min-height: 400px) and (max-height: 400px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n  }\r\n  .localPlayerDiv {\r\n    top: 235px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 100vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 348px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 396px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 411px) and (max-width: 412px) and (min-height: 731px) and (max-height: 732px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .telemedForm {\r\n    height: 766px;\r\n  }\r\n  .tableForm {\r\n    font-size: 11px;\r\n    height: 640px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 52px;\r\n    width: 56px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 10px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 45px;\r\n    border: 1px outset transparent;\r\n    font-size: 15px;\r\n    font-family: Calibri;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 38vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 20px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 679px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 727px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 731px) and (max-width: 732px) and (min-height: 411px) and (max-height: 412px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n  }\r\n  .localPlayerDiv {\r\n    top: 250px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 100vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 360px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 408px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 411px) and (max-width: 411px) and (min-height: 960px) and (max-height: 960px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .telemedForm {\r\n    height: 766px;\r\n  }\r\n  .tableForm {\r\n    font-size: 11px;\r\n    height: 640px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 52px;\r\n    width: 56px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 10px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 45px;\r\n    border: 1px outset transparent;\r\n    font-size: 15px;\r\n    font-family: Calibri;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 30vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 60px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 907px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 955px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 960px) and (max-width: 960px) and (min-height: 411px) and (max-height: 411px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 5%;\r\n    right: 5%;\r\n    transform: translate(-0%, -50%);\r\n  }\r\n  .localPlayerDiv {\r\n    top: 250px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 100vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 358px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 406px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 412px) and (max-width: 412px) and (min-height: 823px) and (max-height: 847px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .telemedForm {\r\n    height: 766px;\r\n  }\r\n  .tableForm {\r\n    height: 640px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 52px;\r\n    width: 56px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 10px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 45px;\r\n    border: 1px outset transparent;\r\n    font-size: 15px;\r\n    font-family: Calibri;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 34vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 20px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 794px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 843px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 823px) and (max-width: 847px) and (min-height: 412px) and (max-height: 412px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .telemedForm {\r\n    height: 766px;\r\n  }\r\n  .tableForm {\r\n    height: 640px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 52px;\r\n    width: 56px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 45px;\r\n    border: 1px outset transparent;\r\n    font-size: 15px;\r\n    font-family: Calibri;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 100vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 20px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 360px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 408px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 412px) and (max-width: 412px) and (min-height: 848px) and (max-height: 892px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .telemedForm {\r\n    height: 766px;\r\n  }\r\n  .tableForm {\r\n    font-size: 11px;\r\n    height: 640px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 52px;\r\n    width: 56px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 10px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 45px;\r\n    border: 1px outset transparent;\r\n    font-size: 15px;\r\n    font-family: Calibri;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 32vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 20px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 840px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 887px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 848px) and (max-width: 892px) and (min-height: 412px) and (max-height: 412px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n  }\r\n  .localPlayerDiv {\r\n    top: 250px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 100vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 362px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 409px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 412px) and (max-width: 412px) and (min-height: 906px) and (max-height: 915px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .telemedForm {\r\n    height: 766px;\r\n  }\r\n  .tableForm {\r\n    font-size: 11px;\r\n    height: 640px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 52px;\r\n    width: 56px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1;\r\n    top: 60px;\r\n    left: 5%;\r\n    right: 5%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 9px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 45px;\r\n    border: 1px outset transparent;\r\n    font-size: 15px;\r\n    font-family: Calibri;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 32vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 20px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 863px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 911px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 906px) and (max-width: 915px) and (min-height: 412px) and (max-height: 412px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .formHeader {\r\n    left: 220px;\r\n    border: 1px outset transparent;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 250px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 100vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 360px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 408px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 412px) and (max-width: 412px) and (min-height: 916px) and (max-height: 919px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .telemedForm {\r\n    height: 766px;\r\n  }\r\n  .tableForm {\r\n    font-size: 11px;\r\n    height: 640px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 52px;\r\n    width: 56px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 10px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 45px;\r\n    border: 1px outset transparent;\r\n    font-size: 15px;\r\n    font-family: Calibri;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 32vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 20px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 866px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 914px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 916px) and (max-width: 919px) and (min-height: 412px) and (max-height: 412px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n  }\r\n  .localPlayerDiv {\r\n    top: 250px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 100vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 360px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 408px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 412px) and (max-width: 412px) and (min-height: 1004px) and (max-height: 1004px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .telemedForm {\r\n    height: 766px;\r\n  }\r\n  .tableForm {\r\n    font-size: 11px;\r\n    height: 640px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 52px;\r\n    width: 56px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 10px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 45px;\r\n    border: 1px outset transparent;\r\n    font-size: 15px;\r\n    font-family: Calibri;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 28vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 20px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 936px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 984px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 1004px) and (max-width: 1004px) and (min-height: 412px) and (max-height: 412px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    top: 340px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .tableForm {\r\n    font-size: 9px;\r\n    height: 273px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 42px;\r\n    width: 46px;\r\n  }\r\n  .telemedForm {\r\n    height: 395px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 8px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 55px;\r\n    border: 1px outset transparent;\r\n    font-size: 12px;\r\n    font-family: Calibri;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 100vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 140px;\r\n    width: 114px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 250px;\r\n    right: 0px;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 140px;\r\n    width: 114px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 350px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 400px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 414px) and (max-width: 414px) and (min-height: 736px) and (max-height: 736px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .telemedForm {\r\n    height: 766px;\r\n  }\r\n  .tableForm {\r\n    font-size: 11px;\r\n    height: 640px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 52px;\r\n    width: 56px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 10px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 45px;\r\n    border: 1px outset transparent;\r\n    font-size: 15px;\r\n    font-family: Calibri;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 38vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 20px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 684px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 732px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 736px) and (max-width: 736px) and (min-height: 414px) and (max-height: 414px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n  }\r\n  .localPlayerDiv {\r\n    top: 250px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 100vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 362px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 410px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 414px) and (max-width: 414px) and (min-height: 896px) and (max-height: 896px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .telemedForm {\r\n    height: 766px;\r\n  }\r\n  .tableForm {\r\n    font-size: 11px;\r\n    height: 640px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 52px;\r\n    width: 56px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0;\r\n    top: 60px;\r\n    left: 5%;\r\n    right: 5%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 10px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 45px;\r\n    border: 1px outset transparent;\r\n    font-size: 15px;\r\n    font-family: Calibri;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 32vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 20px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 843px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 891px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 896px) and (max-width: 896px) and (min-height: 414px) and (max-height: 414px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .formHeader {\r\n    left: 200px;\r\n    border: 1px outset transparent;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 250px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 100vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 362px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 410px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 428px) and (max-width: 428px) and (min-height: 926px) and (max-height: 926px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .telemedForm {\r\n    height: 766px;\r\n  }\r\n  .tableForm {\r\n    font-size: 11px;\r\n    height: 640px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 52px;\r\n    width: 56px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 10px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 45px;\r\n    border: 1px outset transparent;\r\n    font-size: 15px;\r\n    font-family: Calibri;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 32vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 20px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 860px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 907px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 926px) and (max-width: 926px) and (min-height: 428px) and (max-height: 428px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n  }\r\n  .localPlayerDiv {\r\n    top: 250px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 100vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 370px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 418px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 430px) and (max-width: 430px) and (min-height: 932px) and (max-height: 932px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .telemedForm {\r\n    height: 766px;\r\n  }\r\n  .tableForm {\r\n    font-size: 11px;\r\n    height: 640px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 52px;\r\n    width: 56px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 10px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 45px;\r\n    border: 1px outset transparent;\r\n    font-size: 15px;\r\n    font-family: Calibri;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 32vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 20px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 880px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 914px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 932px) and (max-width: 932px) and (min-height: 430px) and (max-height: 430px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n  }\r\n  .localPlayerDiv {\r\n    top: 250px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 95vh;\r\n    width: 60%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 377px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 420px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 432px) and (max-width: 432px) and (min-height: 768px) and (max-height: 768px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .telemedForm {\r\n    height: 766px;\r\n  }\r\n  .tableForm {\r\n    font-size: 11px;\r\n    height: 640px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 52px;\r\n    width: 56px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 10px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 45px;\r\n    border: 1px outset transparent;\r\n    font-size: 15px;\r\n    font-family: Calibri;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 37vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 20px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 704px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 752px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 768px) and (max-width: 768px) and (min-height: 432px) and (max-height: 432px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 15px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n  }\r\n  .localPlayerDiv {\r\n    top: 260px;\r\n    right: 10px;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 100vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 374px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 422px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 540px) and (max-width: 540px) and (min-height: 960px) and (max-height: 960px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .telemedForm {\r\n    height: 766px;\r\n  }\r\n  .tableForm {\r\n    font-size: 11px;\r\n    height: 640px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 52px;\r\n    width: 56px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 10px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 45px;\r\n    border: 1px outset transparent;\r\n    font-size: 15px;\r\n    font-family: Calibri;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 40vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 140px;\r\n    width: 120px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    top: auto;\r\n    right: 0;\r\n    bottom: 20px;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 140px;\r\n    width: 120px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 893px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 941px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 960px) and (max-width: 962px) and (min-height: 540px) and (max-height: 540px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 5%;\r\n    right: 5%;\r\n    transform: translate(-0%, -50%);\r\n  }\r\n  .localPlayerDiv {\r\n    top: 370px;\r\n    right: 10px;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 100vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 480px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 528px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 768px) and (max-width: 768px) and (min-height: 1076px) and (max-height: 1076px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .tableForm {\r\n    font-size: 18px;\r\n    height: 648px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 10px;\r\n    left: 10px;\r\n    z-index: 2;\r\n    height: 92px;\r\n    width: 96px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 16px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 5px;\r\n    border: 1px outset transparent;\r\n    font-size: 24px;\r\n    font-family: Calibri;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 50vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 174px;\r\n    width: 150px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    top: auto;\r\n    right: 0;\r\n    bottom: 20px;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 174px;\r\n    width: 150px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 1008px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 1056px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 1076px) and (max-width: 1076px) and (min-height: 768px) and (max-height: 768px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 10px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .tableForm {\r\n    font-size: 10px;\r\n    height: 456px;\r\n  }\r\n  .telemedForm {\r\n    height: 582px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 9px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 42px;\r\n    width: 46px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 55px;\r\n    border: 1px outset transparent;\r\n    font-size: 14px;\r\n    font-family: Calibri;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 610px;\r\n    right: 10px;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 66vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 713px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 408px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    margin-top: 200px;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 884px) and (max-width: 884px) and (min-height: 1104px) and (max-height: 1104px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .formHeader {\r\n    left: 200px;\r\n    border: 1px outset transparent;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 880px;\r\n    right: 5px;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 204px;\r\n    width: 180px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 58vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 204px;\r\n    width: 180px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 1051px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 1100px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n/*TAB VIEWPORT*/\r\n\r\n@media only screen and (min-width: 540px) and (max-width: 540px) and (min-height: 720px) and (max-height: 720px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .telemedForm {\r\n    height: 766px;\r\n  }\r\n  .tableForm {\r\n    font-size: 11px;\r\n    height: 640px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 52px;\r\n    width: 56px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    top: 11px;\r\n    left: 95px;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    font-size: 10px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 45px;\r\n    border: 1px outset transparent;\r\n    font-size: 15px;\r\n    font-family: Calibri;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 52vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 140px;\r\n    width: 120px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    bottom: 560px;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 140px;\r\n    width: 120px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 668px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 716px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 720px) and (max-width: 720px) and (min-height: 540px) and (max-height: 540px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    top: 11px;\r\n    left: 125px;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 370px;\r\n    right: 20px;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 95vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 488px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 536px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 600px) and (max-width: 601px) and (min-height: 960px) and (max-height: 962px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .telemedForm {\r\n    height: 766px;\r\n  }\r\n  .tableForm {\r\n    height: 630px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 62px;\r\n    width: 66px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 5%;\r\n    right: 5%;\r\n    transform: translate(-0%, -50%);\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 45px;\r\n    border: 1px outset transparent;\r\n    font-size: 15px;\r\n    font-family: Calibri;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 42vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 20px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 910px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 958px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 960px) and (max-width: 962px) and (min-height: 600px) and (max-height: 601px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 5%;\r\n    right: 5%;\r\n    transform: translate(-0%, -50%);\r\n  }\r\n  .localPlayerDiv {\r\n    top: 430px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 100vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 550px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 597px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 768px) and (max-width: 768px) and (min-height: 1024px) and (max-height: 1024px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .tableForm {\r\n    font-size: 18px;\r\n    height: 635px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 10px;\r\n    left: 10px;\r\n    z-index: 2;\r\n    height: 92px;\r\n    width: 96px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    top: 18px;\r\n    left: 100px;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 1px;\r\n    font-size: 16px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 18px;\r\n    border: 1px outset transparent;\r\n    font-size: 24px;\r\n    font-family: Calibri;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 55vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 174px;\r\n    width: 150px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    top: auto;\r\n    right: 0;\r\n    bottom: 20px;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 174px;\r\n    width: 150px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 972px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 1020px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 1024px) and (max-width: 1024px) and (min-height: 768px) and (max-height: 768px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    top: 665px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .tableForm {\r\n    font-size: 11px;\r\n    height: 669px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 42px;\r\n    width: 46px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    top: 10px;\r\n    left: 20px;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    font-size: 8px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 55px;\r\n    border: 1px outset transparent;\r\n    font-size: 12px;\r\n    font-family: Calibri;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 65vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 140px;\r\n    width: 114px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 600px;\r\n    right: 0px;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 140px;\r\n    width: 114px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 690px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 740px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 800px) and (max-width: 800px) and (min-height: 1280px) and (max-height: 1280px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .tableForm {\r\n    font-size: 18px;\r\n    height: 639px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 10px;\r\n    left: 10px;\r\n    z-index: 2;\r\n    height: 92px;\r\n    width: 96px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    top: 15px;\r\n    left: 120px;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 1px;\r\n    font-size: 16px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 15px;\r\n    border: 1px outset transparent;\r\n    font-size: 24px;\r\n    font-family: Calibri;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 45vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 174px;\r\n    width: 150px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    top: auto;\r\n    right: 0;\r\n    bottom: 20px;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 174px;\r\n    width: 150px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 1228px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 1276px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 810px) and (max-width: 810px) and (min-height: 1080px) and (max-height: 1080px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .tableForm {\r\n    font-size: 18px;\r\n    height: 650px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 10px;\r\n    left: 10px;\r\n    z-index: 2;\r\n    height: 72px;\r\n    width: 76px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 5%;\r\n    right: 5%;\r\n    transform: translate(-0%, -50%);\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 25px;\r\n    border: 1px outset transparent;\r\n    font-size: 24px;\r\n    font-family: Calibri;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 50vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 174px;\r\n    width: 150px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    top: auto;\r\n    right: 0;\r\n    bottom: 20px;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 174px;\r\n    width: 150px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 1028px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 1076px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 1080px) and (max-width: 1080px) and (min-height: 810px) and (max-height: 810px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 170px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .tableForm {\r\n    font-size: 10px;\r\n    height: 667px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 9px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 42px;\r\n    width: 46px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 55px;\r\n    border: 1px outset transparent;\r\n    font-size: 14px;\r\n    font-family: Calibri;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 645px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 62vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 790px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 408px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    margin-top: 200px;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 820px) and (max-width: 820px) and (min-height: 1180px) and (max-height: 1180px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 20px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .tableForm {\r\n    font-size: 18px;\r\n    height: 639px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 10px;\r\n    left: 10px;\r\n    z-index: 2;\r\n    height: 92px;\r\n    width: 96px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0;\r\n    top: 60px;\r\n    left: 5%;\r\n    right: 5%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 16px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 15px;\r\n    border: 1px outset transparent;\r\n    font-size: 24px;\r\n    font-family: Calibri;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 50vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 174px;\r\n    width: 150px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    top: auto;\r\n    right: 0;\r\n    bottom: 20px;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 174px;\r\n    width: 150px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 1128px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 1176px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 1180px) and (max-width: 1180px) and (min-height: 820px) and (max-height: 820px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 170px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .tableForm {\r\n    font-size: 12px;\r\n    height: 665px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 5%;\r\n    right: 5%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 9.5px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 42px;\r\n    width: 46px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 55px;\r\n    border: 1px outset transparent;\r\n    font-size: 14px;\r\n    font-family: Calibri;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 655px;\r\n    right: 0;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 70vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 134px;\r\n    width: 110px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 790px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 408px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    margin-top: 200px;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 912px) and (max-width: 912px) and (min-height: 1368px) and (max-height: 1368px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 60px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .tableForm {\r\n    font-size: 18px;\r\n    height: 768px;\r\n    border: 1px outset transparent;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 10px;\r\n    left: 10px;\r\n    z-index: 2;\r\n    height: 92px;\r\n    width: 96px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    top: 15px;\r\n    left: 175px;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    font-size: 16px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 13px;\r\n    border: 1px outset transparent;\r\n    font-size: 24px;\r\n    font-family: Calibri;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 48vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 204px;\r\n    width: 180px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    top: auto;\r\n    right: 2%;\r\n    bottom: 100px;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 204px;\r\n    width: 180px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 1316px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 1323px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 1368px) and (max-width: 1368px) and (min-height: 912px) and (max-height: 912px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    top: 810px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .tableForm {\r\n    font-size: 12px;\r\n    height: 663px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 52px;\r\n    width: 56px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    top: 10px;\r\n    left: 30px;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    font-size: 11px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 45px;\r\n    border: 1px outset transparent;\r\n    font-size: 16px;\r\n    font-family: Calibri;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 70vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 180px;\r\n    width: 154px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 700px;\r\n    right: 10px;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 180px;\r\n    width: 154px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 850px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 900px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 1024px) and (max-width: 1024px) and (min-height: 600px) and (max-height: 600px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    top: 525px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .tableForm {\r\n    font-size: 8px;\r\n    height: 77vh;\r\n  }\r\n  .telemedForm {\r\n    height: 98%;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 42px;\r\n    width: 46px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    top: 10px;\r\n    left: 20px;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0;\r\n    font-size: 8px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 55px;\r\n    border: 1px outset transparent;\r\n    font-size: 12px;\r\n    font-family: Calibri;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 80vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 140px;\r\n    width: 114px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 430px;\r\n    right: 10px;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 140px;\r\n    width: 114px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 546px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 590px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 1024px) and (max-width: 1024px) and (min-height: 1366px) and (max-height: 1366px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n\r\n    position: relative; /* Add relative positioning to create a stacking context */\r\n  }\r\n  .iconCall {\r\n    bottom: 60px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .telemedForm {\r\n    position: absolute;\r\n    bottom: 0;\r\n    left: 0;\r\n    width: 100%;\r\n    border: 2px outset black;\r\n    margin-left: 2px;\r\n    margin-top: 2px;\r\n    margin-bottom: 9px;\r\n  }\r\n  .tableForm {\r\n    /*font-size: 18px;*/\r\n    /*height: 768px;*/\r\n    border: 1px outset transparent;\r\n\r\n    overflow-y: auto;\r\n    overflow-x: auto;\r\n    height: 88vh;\r\n  }\r\n  .dohLogo {\r\n    /* position: relative;\r\n        border: 1px outset transparent;\r\n        top: 10px;\r\n        left: 10px;\r\n        z-index: 2;*/\r\n\r\n    height: 12%;\r\n    width: 12%;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    top: 1%;\r\n    left: 1%;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    font-size: 10px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    border: 1px outset transparent;\r\n    margin-top: 20%;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 48vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 204px;\r\n    width: 180px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    /* top: auto;\r\n        right: 2%;*/\r\n    bottom: 12%;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 204px;\r\n    width: 180px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 1316px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 1323px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n/*DESKTOP VIEWPORT*/\r\n\r\n@media only screen and (min-width: 1920px) and (max-width: 1920px) and (min-height: 1080px) and (max-height: 1080px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 10px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .tableForm {\r\n    font-size: 18px;\r\n    height: 760px;\r\n  }\r\n  .telemedForm {\r\n    height: 900px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 10px;\r\n    left: 10px;\r\n    z-index: 2;\r\n    height: 72px;\r\n    width: 76px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 5%;\r\n    right: 5%;\r\n    transform: translate(-0%, -50%);\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 25px;\r\n    border: 1px outset transparent;\r\n    font-size: 24px;\r\n    font-family: Calibri;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 82vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 274px;\r\n    width: 250px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    top: auto;\r\n    right: 20px;\r\n    bottom: 15px;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 274px;\r\n    width: 250px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 1028px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 1070px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 1680px) and (max-width: 1680px) and (min-height: 1050px) and (max-height: 1050px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 10px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .tableForm {\r\n    height: 745px;\r\n  }\r\n  .telemedForm {\r\n    height: 870px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 52px;\r\n    width: 56px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 40px;\r\n    border: 1px outset transparent;\r\n    font-family: Calibri;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 76vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 204px;\r\n    width: 180px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    top: auto;\r\n    right: 20px;\r\n    bottom: 15px;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 204px;\r\n    width: 180px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 996px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 1044px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 1664px) and (max-width: 1664px) and (min-height: 1110px) and (max-height: 1110px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 10px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .tableForm {\r\n    height: 803px;\r\n  }\r\n  .telemedForm {\r\n    height: 931px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 52px;\r\n    width: 56px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 40px;\r\n    border: 1px outset transparent;\r\n    font-family: Calibri;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 72vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 204px;\r\n    width: 180px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    top: auto;\r\n    right: 20px;\r\n    bottom: 15px;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 204px;\r\n    width: 180px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 1050px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 1100px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 1620px) and (max-width: 1620px) and (min-height: 1080px) and (max-height: 1080px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 10px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .tableForm {\r\n    height: 773px;\r\n  }\r\n  .telemedForm {\r\n    height: 901px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 52px;\r\n    width: 56px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 40px;\r\n    border: 1px outset transparent;\r\n    font-family: Calibri;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 72vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 204px;\r\n    width: 180px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    top: auto;\r\n    right: 20px;\r\n    bottom: 15px;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 204px;\r\n    width: 180px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 1020px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 1072px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 1600px) and (max-width: 1600px) and (min-height: 1024px) and (max-height: 1024px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 10px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .tableForm {\r\n    height: 720px;\r\n  }\r\n  .telemedForm {\r\n    height: 845px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 52px;\r\n    width: 56px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 40px;\r\n    border: 1px outset transparent;\r\n    font-family: Calibri;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 76vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 204px;\r\n    width: 180px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    top: auto;\r\n    right: 20px;\r\n    bottom: 15px;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 204px;\r\n    width: 180px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 970px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 1010px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 1600px) and (max-width: 1600px) and (min-height: 900px) and (max-height: 900px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 10px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .tableForm {\r\n    height: 593px;\r\n  }\r\n  .telemedForm {\r\n    height: 721px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 52px;\r\n    width: 56px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 40px;\r\n    border: 1px outset transparent;\r\n    font-family: Calibri;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 82vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 204px;\r\n    width: 180px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    top: auto;\r\n    right: 20px;\r\n    bottom: 15px;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 204px;\r\n    width: 180px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 810px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 859px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 1536px) and (max-width: 1536px) and (min-height: 901px) and (max-height: 960px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 10px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .tableForm {\r\n    height: 652px;\r\n  }\r\n  .telemedForm {\r\n    height: 781px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 52px;\r\n    width: 56px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 40px;\r\n    border: 1px outset transparent;\r\n    font-family: Calibri;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 76vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 204px;\r\n    width: 180px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    top: auto;\r\n    right: 20px;\r\n    bottom: 15px;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 204px;\r\n    width: 180px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 890px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 940px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 1536px) and (max-width: 1536px) and (min-height: 864px) and (max-height: 864px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 10px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .tableForm {\r\n    height: 557px;\r\n  }\r\n  .telemedForm {\r\n    height: 685px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 52px;\r\n    width: 56px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 40px;\r\n    border: 1px outset transparent;\r\n    font-family: Calibri;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 82vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 204px;\r\n    width: 180px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    top: auto;\r\n    right: 20px;\r\n    bottom: 15px;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 204px;\r\n    width: 180px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 810px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 859px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 1500px) and (max-width: 1504px) and (min-height: 1000px) and (max-height: 1003px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 10px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .tableForm {\r\n    height: 695px;\r\n  }\r\n  .telemedForm {\r\n    height: 824px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 52px;\r\n    width: 56px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 40px;\r\n    border: 1px outset transparent;\r\n    font-family: Calibri;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 72vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 204px;\r\n    width: 180px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    top: auto;\r\n    right: 20px;\r\n    bottom: 15px;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 204px;\r\n    width: 180px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 940px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 995px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 1440px) and (max-width: 1440px) and (min-height: 901px) and (max-height: 960px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 10px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .tableForm {\r\n    height: 647px;\r\n  }\r\n  .telemedForm {\r\n    height: 781px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 52px;\r\n    width: 56px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 12px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 45px;\r\n    border: 1px outset transparent;\r\n    font-family: Calibri;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 72vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 204px;\r\n    width: 180px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    top: auto;\r\n    right: 20px;\r\n    bottom: 15px;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 204px;\r\n    width: 180px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 900px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 950px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 1440px) and (max-width: 1440px) and (min-height: 900px) and (max-height: 900px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 10px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .tableForm {\r\n    height: 590px;\r\n  }\r\n  .telemedForm {\r\n    height: 723px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 52px;\r\n    width: 56px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 12px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 45px;\r\n    border: 1px outset transparent;\r\n    font-family: Calibri;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 78vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 204px;\r\n    width: 180px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    top: auto;\r\n    right: 20px;\r\n    bottom: 15px;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 204px;\r\n    width: 180px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 847px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 860px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 1368px) and (max-width: 1368px) and (min-height: 912px) and (max-height: 912px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 10px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .tableForm {\r\n    height: 606px;\r\n  }\r\n  .telemedForm {\r\n    height: 733px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 52px;\r\n    width: 56px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 11px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 45px;\r\n    border: 1px outset transparent;\r\n    font-family: Calibri;\r\n    font-size: 16px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 74vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 204px;\r\n    width: 180px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    top: auto;\r\n    right: 20px;\r\n    bottom: 15px;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 204px;\r\n    width: 180px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 850px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 900px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 1360px) and (max-width: 1366px) and (min-height: 768px) and (max-height: 768px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 10px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .tableForm {\r\n    height: 462px;\r\n    font-size: 11px;\r\n  }\r\n  .telemedForm {\r\n    height: 590px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 52px;\r\n    width: 56px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 1%;\r\n    right: 1%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 11px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 45px;\r\n    border: 1px outset transparent;\r\n    font-family: Calibri;\r\n    font-size: 16px;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 84vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 204px;\r\n    width: 180px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    top: auto;\r\n    right: 20px;\r\n    bottom: 15px;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 204px;\r\n    width: 180px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 715px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 760px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 1280px) and (max-width: 1280px) and (min-height: 1024px) and (max-height: 1024px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 10px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .tableForm {\r\n    font-size: 11px;\r\n    height: 721px;\r\n  }\r\n  .telemedForm {\r\n    height: 845px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 56px;\r\n    width: 60px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    top: 10px;\r\n    left: 25px;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    font-size: 10px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 40px;\r\n    border: 1px outset transparent;\r\n    font-size: 13px;\r\n    font-family: Calibri;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 60vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 200px;\r\n    width: 174px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    top: auto;\r\n    right: 10px;\r\n    bottom: 15px;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 200px;\r\n    width: 174px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 960px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 1010px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 1280px) and (max-width: 1280px) and (min-height: 960px) and (max-height: 960px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 10px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .tableForm {\r\n    font-size: 11px;\r\n    height: 657px;\r\n  }\r\n  .telemedForm {\r\n    height: 781px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 56px;\r\n    width: 60px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    top: 10px;\r\n    left: 25px;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    font-size: 10px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 40px;\r\n    border: 1px outset transparent;\r\n    font-size: 13px;\r\n    font-family: Calibri;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 63vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 200px;\r\n    width: 174px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    top: auto;\r\n    right: 10px;\r\n    bottom: 15px;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 200px;\r\n    width: 174px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 906px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 950px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 1280px) and (max-width: 1280px) and (min-height: 920px) and (max-height: 920px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 10px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .tableForm {\r\n    font-size: 11px;\r\n    height: 617px;\r\n  }\r\n  .telemedForm {\r\n    height: 741px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 56px;\r\n    width: 60px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    top: 10px;\r\n    left: 25px;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    font-size: 10px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 40px;\r\n    border: 1px outset transparent;\r\n    font-size: 13px;\r\n    font-family: Calibri;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 64vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 200px;\r\n    width: 174px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    top: auto;\r\n    right: 10px;\r\n    bottom: 15px;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 200px;\r\n    width: 174px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 866px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 910px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 1280px) and (max-width: 1280px) and (min-height: 800px) and (max-height: 800px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 10px;\r\n  }\r\n  .container-fluid {\r\n    /* border: 1px outset green;\r\n        height: auto;*/\r\n  }\r\n  .tableForm {\r\n    font-size: 11px;\r\n    height: 82.5vh;\r\n  }\r\n  .telemedForm {\r\n    /*height: 621px;*/\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 56px;\r\n    width: 60px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    top: 10px;\r\n    left: 35px;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    font-size: 10px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 40px;\r\n    border: 1px outset transparent;\r\n    font-size: 13px;\r\n    font-family: Calibri;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 78vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 170px;\r\n    width: 144px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    top: auto;\r\n    right: 10px;\r\n    bottom: 20px;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 170px;\r\n    width: 144px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 740px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 790px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 1280px) and (max-width: 1280px) and (min-height: 768px) and (max-height: 768px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 10px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .tableForm {\r\n    font-size: 11px;\r\n    height: 467px;\r\n  }\r\n  .telemedForm {\r\n    height: 589px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 56px;\r\n    width: 60px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    top: 10px;\r\n    left: 35px;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    font-size: 10px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 40px;\r\n    border: 1px outset transparent;\r\n    font-size: 13px;\r\n    font-family: Calibri;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 79vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 170px;\r\n    width: 144px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    top: auto;\r\n    right: 10px;\r\n    bottom: 20px;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 170px;\r\n    width: 144px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 714px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 760px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 1280px) and (max-width: 1280px) and (min-height: 720px) and (max-height: 720px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 10px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .tableForm {\r\n    font-size: 11px;\r\n    height: 420px;\r\n  }\r\n  .telemedForm {\r\n    height: 542px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 52px;\r\n    width: 56px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 5%;\r\n    right: 5%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 9px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 45px;\r\n    border: 1px outset transparent;\r\n    font-size: 13px;\r\n    font-family: Calibri;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 84vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 170px;\r\n    width: 144px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 530px;\r\n    right: 10px;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 170px;\r\n    width: 144px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 667px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 715px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 1152px) and (max-width: 1152px) and (min-height: 864px) and (max-height: 864px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 10px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .tableForm {\r\n    font-size: 11px;\r\n    height: 562px;\r\n  }\r\n  .telemedForm {\r\n    height: 685px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 5px;\r\n    left: 5px;\r\n    z-index: 2;\r\n    height: 52px;\r\n    width: 56px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 5%;\r\n    right: 5%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 9px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 45px;\r\n    border: 1px outset transparent;\r\n    font-size: 13px;\r\n    font-family: Calibri;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 64vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 170px;\r\n    width: 144px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 675px;\r\n    right: 10px;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 170px;\r\n    width: 144px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 810px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 850px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 800px) and (max-width: 800px) and (min-height: 600px) and (max-height: 600px) {\r\n  .col-lg-8 {\r\n    background-color: black;\r\n  }\r\n  .iconCall {\r\n    bottom: 15px;\r\n  }\r\n  .container-fluid {\r\n    border: 1px outset green;\r\n    height: auto;\r\n  }\r\n  .tableForm {\r\n    font-size: 15px;\r\n    height: 555px;\r\n  }\r\n  .telemedForm {\r\n    height: 685px;\r\n  }\r\n  .dohLogo {\r\n    position: relative;\r\n    border: 1px outset transparent;\r\n    top: 15px;\r\n    left: 15px;\r\n    z-index: 2;\r\n    height: 72px;\r\n    width: 76px;\r\n  }\r\n  .formHeader {\r\n    position: absolute;\r\n    border: 1px outset transparent;\r\n    text-align: center;\r\n    line-height: 0.1px;\r\n    top: 60px;\r\n    left: 5%;\r\n    right: 5%;\r\n    transform: translate(-0%, -50%);\r\n    font-size: 13px;\r\n  }\r\n  .clinical {\r\n    position: relative;\r\n    text-align: center;\r\n    margin-top: 25px;\r\n    border: 1px outset transparent;\r\n    font-size: 18px;\r\n    font-family: Calibri;\r\n  }\r\n  .img-fluid {\r\n    position: relative;\r\n    height: 90vh;\r\n    width: 100%;\r\n  }\r\n  .img2 {\r\n    height: 170px;\r\n    width: 144px;\r\n  }\r\n  .btn {\r\n    margin-bottom: 10px;\r\n  }\r\n  .localPlayerDiv {\r\n    top: 400px;\r\n    right: 10px;\r\n    bottom: auto;\r\n  }\r\n  .localPlayerLayer {\r\n    height: 170px;\r\n    width: 144px;\r\n  }\r\n  .remotePlayerLayer {\r\n    height: 547px;\r\n  }\r\n  .remotePlayerDiv {\r\n    height: 596px;\r\n    width: 100%;\r\n    border: 2px outset transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .remotePlayerLayer div video {\r\n    object-fit: contain !important;\r\n  }\r\n}\r\n\r\n.tooltip-text {\r\n  visibility: visible;\r\n  color: #fff;\r\n  text-align: center;\r\n  padding: 5px 10px;\r\n  border-radius: 5px;\r\n  position: absolute;\r\n  z-index: 1;\r\n  bottom: 100%;\r\n  left: 50%;\r\n  transform: translateX(-50%);\r\n  white-space: nowrap;\r\n}\r\n\r\n/* I am adding this  */\r\n.tooltip-text::after {\r\n  content: "";\r\n  position: absolute;\r\n  top: 100%; /* Arrow position just below the tooltip */\r\n  left: 50%;\r\n  transform: translateX(-50%);\r\n  border-width: 5px;\r\n  border-style: solid;\r\n  border-color: rgba(0, 0, 0, 0.75) transparent transparent transparent; /* Arrow color matching the tooltip background */\r\n}\r\n\r\n.tooltip-container:hover .tooltip-text {\r\n  visibility: visible;\r\n}\r\n\r\n.button-container {\r\n  display: inline-block;\r\n  position: relative;\r\n}\r\n',""]);const o=i},6314:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=e(t);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,r){"string"==typeof e&&(e=[[null,e,""]]);var i={};if(r)for(var o=0;o<this.length;o++){var s=this[o][0];null!=s&&(i[s]=!0)}for(var a=0;a<e.length;a++){var c=[].concat(e[a]);r&&i[c[0]]||(n&&(c[2]?c[2]="".concat(n," and ").concat(c[2]):c[2]=n),t.push(c))}},t}},251:(e,t)=>{t.read=function(e,t,n,r,i){var o,s,a=8*i-r-1,c=(1<<a)-1,d=c>>1,l=-7,h=n?i-1:0,u=n?-1:1,p=e[t+h];for(h+=u,o=p&(1<<-l)-1,p>>=-l,l+=a;l>0;o=256*o+e[t+h],h+=u,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=r;l>0;s=256*s+e[t+h],h+=u,l-=8);if(0===o)o=1-d;else{if(o===c)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,r),o-=d}return(p?-1:1)*s*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var s,a,c,d=8*o-i-1,l=(1<<d)-1,h=l>>1,u=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,f=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=l):(s=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-s))<1&&(s--,c*=2),(t+=s+h>=1?u/c:u*Math.pow(2,1-h))*c>=2&&(s++,c/=2),s+h>=l?(a=0,s=l):s+h>=1?(a=(t*c-1)*Math.pow(2,i),s+=h):(a=t*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;e[n+p]=255&a,p+=f,a/=256,i-=8);for(s=s<<i|a,d+=i;d>0;e[n+p]=255&s,p+=f,s/=256,d-=8);e[n+p-f]|=128*m}},4634:e=>{var t={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==t.call(e)}},5606:e=>{var t,n,r=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(e){if(t===setTimeout)return setTimeout(e,0);if((t===i||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:i}catch(e){t=i}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(e){n=o}}();var a,c=[],d=!1,l=-1;function h(){d&&a&&(d=!1,a.length?c=a.concat(c):l=-1,c.length&&u())}function u(){if(!d){var e=s(h);d=!0;for(var t=c.length;t;){for(a=c,c=[];++l<t;)a&&a[l].run();l=-1,t=c.length}a=null,d=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{return n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function f(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new p(e,t)),1!==c.length||d||s(u)},p.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=f,r.addListener=f,r.once=f,r.off=f,r.removeListener=f,r.removeAllListeners=f,r.emit=f,r.prependListener=f,r.prependOnceListener=f,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},5072:(e,t,n)=>{"use strict";var r,i=function(){return void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r},o=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),s=[];function a(e){for(var t=-1,n=0;n<s.length;n++)if(s[n].identifier===e){t=n;break}return t}function c(e,t){for(var n={},r=[],i=0;i<e.length;i++){var o=e[i],c=t.base?o[0]+t.base:o[0],d=n[c]||0,l="".concat(c," ").concat(d);n[c]=d+1;var h=a(l),u={css:o[1],media:o[2],sourceMap:o[3]};-1!==h?(s[h].references++,s[h].updater(u)):s.push({identifier:l,updater:g(u,t),references:1}),r.push(l)}return r}function d(e){var t=document.createElement("style"),r=e.attributes||{};if(void 0===r.nonce){var i=n.nc;i&&(r.nonce=i)}if(Object.keys(r).forEach((function(e){t.setAttribute(e,r[e])})),"function"==typeof e.insert)e.insert(t);else{var s=o(e.insert||"head");if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(t)}return t}var l,h=(l=[],function(e,t){return l[e]=t,l.filter(Boolean).join("\n")});function u(e,t,n,r){var i=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(e.styleSheet)e.styleSheet.cssText=h(t,i);else{var o=document.createTextNode(i),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(o,s[t]):e.appendChild(o)}}function p(e,t,n){var r=n.css,i=n.media,o=n.sourceMap;if(i?e.setAttribute("media",i):e.removeAttribute("media"),o&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var f=null,m=0;function g(e,t){var n,r,i;if(t.singleton){var o=m++;n=f||(f=d(t)),r=u.bind(null,n,o,!1),i=u.bind(null,n,o,!0)}else n=d(t),r=p.bind(null,n,t),i=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=i());var n=c(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var r=0;r<n.length;r++){var i=a(n[r]);s[i].references--}for(var o=c(e,t),d=0;d<n.length;d++){var l=a(n[d]);0===s[l].references&&(s[l].updater(),s.splice(l,1))}n=o}}}},6262:(e,t)=>{"use strict";t.A=(e,t)=>{const n=e.__vccOpts||e;for(const[e,r]of t)n[e]=r;return n}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={id:r,exports:{}};return e[r](o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nc=void 0,(()=>{"use strict";var e={};function t(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return e=>e in t}n.r(e),n.d(e,{BaseTransition:()=>Lr,BaseTransitionPropsValidators:()=>xr,Comment:()=>Ls,DeprecationTypes:()=>Ja,EffectScope:()=>Ee,ErrorCodes:()=>kn,ErrorTypeStrings:()=>Ha,Fragment:()=>Ps,KeepAlive:()=>pi,ReactiveEffect:()=>Te,Static:()=>ks,Suspense:()=>ws,Teleport:()=>Tr,Text:()=>Ds,TrackOpTypes:()=>bn,Transition:()=>cc,TransitionGroup:()=>od,TriggerOpTypes:()=>Sn,VueElement:()=>Jc,assertNumber:()=>Ln,callWithAsyncErrorHandling:()=>Vn,callWithErrorHandling:()=>Un,camelize:()=>N,capitalize:()=>L,cloneVNode:()=>ta,compatUtils:()=>Ya,computed:()=>Ma,createApp:()=>Md,createBlock:()=>Ks,createCommentVNode:()=>ia,createElementBlock:()=>Ws,createElementVNode:()=>Qs,createHydrationRenderer:()=>Xo,createPropsRestProxy:()=>ho,createRenderer:()=>Jo,createSSRApp:()=>Ud,createSlots:()=>Gi,createStaticVNode:()=>ra,createTextVNode:()=>na,createVNode:()=>$s,customRef:()=>fn,defineAsyncComponent:()=>di,defineComponent:()=>Br,defineCustomElement:()=>zc,defineEmits:()=>$i,defineExpose:()=>Zi,defineModel:()=>no,defineOptions:()=>eo,defineProps:()=>Qi,defineSSRCustomElement:()=>qc,defineSlots:()=>to,devtools:()=>Wa,effect:()=>ke,effectScope:()=>ye,getCurrentInstance:()=>fa,getCurrentScope:()=>ve,getCurrentWatcher:()=>wn,getTransitionRawChildren:()=>jr,guardReactiveProps:()=>ea,h:()=>Ua,handleError:()=>Fn,hasInjectionContext:()=>No,hydrate:()=>kd,hydrateOnIdle:()=>ii,hydrateOnInteraction:()=>ai,hydrateOnMediaQuery:()=>si,hydrateOnVisible:()=>oi,initCustomFormatter:()=>Va,initDirectivesForSSR:()=>Bd,inject:()=>xo,isMemoSame:()=>ja,isProxy:()=>Qt,isReactive:()=>Yt,isReadonly:()=>Jt,isRef:()=>nn,isRuntimeOnly:()=>wa,isShallow:()=>Xt,isVNode:()=>zs,markRaw:()=>Zt,mergeDefaults:()=>co,mergeModels:()=>lo,mergeProps:()=>ca,nextTick:()=>Jn,normalizeClass:()=>J,normalizeProps:()=>X,normalizeStyle:()=>W,onActivated:()=>mi,onBeforeMount:()=>Ti,onBeforeUnmount:()=>Ii,onBeforeUpdate:()=>Ci,onDeactivated:()=>gi,onErrorCaptured:()=>Pi,onMounted:()=>Ri,onRenderTracked:()=>Ni,onRenderTriggered:()=>xi,onScopeDispose:()=>be,onServerPrefetch:()=>Oi,onUnmounted:()=>Ai,onUpdated:()=>wi,onWatcherCleanup:()=>In,openBlock:()=>Vs,popScopeId:()=>lr,provide:()=>Oo,proxyRefs:()=>un,pushScopeId:()=>dr,queuePostFlushCb:()=>$n,reactive:()=>Ht,readonly:()=>Kt,ref:()=>rn,registerRuntimeCompiler:()=>Ca,render:()=>Ld,renderList:()=>Bi,renderSlot:()=>Hi,resolveComponent:()=>ki,resolveDirective:()=>Vi,resolveDynamicComponent:()=>Ui,resolveFilter:()=>qa,resolveTransitionHooks:()=>Mr,setBlockTracking:()=>Gs,setDevtoolsHook:()=>Ka,setTransitionHooks:()=>Fr,shallowReactive:()=>Wt,shallowReadonly:()=>zt,shallowRef:()=>on,ssrContextKey:()=>is,ssrUtils:()=>za,stop:()=>Me,toDisplayString:()=>pe,toHandlerKey:()=>k,toHandlers:()=>Ki,toRaw:()=>$t,toRef:()=>En,toRefs:()=>mn,toValue:()=>ln,transformVNodeArgs:()=>Ys,triggerRef:()=>cn,unref:()=>dn,useAttrs:()=>oo,useCssModule:()=>$c,useCssVars:()=>Ic,useHost:()=>Xc,useId:()=>Gr,useModel:()=>ps,useSSRContext:()=>os,useShadowRoot:()=>Qc,useSlots:()=>io,useTemplateRef:()=>Wr,useTransitionState:()=>Ar,vModelCheckbox:()=>fd,vModelDynamic:()=>bd,vModelRadio:()=>gd,vModelSelect:()=>_d,vModelText:()=>pd,vShow:()=>Rc,version:()=>Ba,warn:()=>Ga,watch:()=>ds,watchEffect:()=>ss,watchPostEffect:()=>as,watchSyncEffect:()=>cs,withAsyncContext:()=>uo,withCtx:()=>ur,withDefaults:()=>ro,withDirectives:()=>pr,withKeys:()=>Ad,withMemo:()=>Fa,withModifiers:()=>wd,withScopeId:()=>hr});const r={},i=[],o=()=>{},s=()=>!1,a=e=>111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),c=e=>e.startsWith("onUpdate:"),d=Object.assign,l=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},h=Object.prototype.hasOwnProperty,u=(e,t)=>h.call(e,t),p=Array.isArray,f=e=>"[object Map]"===T(e),m=e=>"[object Set]"===T(e),g=e=>"[object Date]"===T(e),_=e=>"function"==typeof e,E=e=>"string"==typeof e,y=e=>"symbol"==typeof e,v=e=>null!==e&&"object"==typeof e,b=e=>(v(e)||_(e))&&_(e.then)&&_(e.catch),S=Object.prototype.toString,T=e=>S.call(e),R=e=>T(e).slice(8,-1),C=e=>"[object Object]"===T(e),w=e=>E(e)&&"NaN"!==e&&"-"!==e[0]&&""+parseInt(e,10)===e,I=t(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),A=t("bind,cloak,else-if,else,for,html,if,model,on,once,pre,show,slot,text,memo"),O=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},x=/-(\w)/g,N=O((e=>e.replace(x,((e,t)=>t?t.toUpperCase():"")))),P=/\B([A-Z])/g,D=O((e=>e.replace(P,"-$1").toLowerCase())),L=O((e=>e.charAt(0).toUpperCase()+e.slice(1))),k=O((e=>e?`on${L(e)}`:"")),M=(e,t)=>!Object.is(e,t),U=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},V=(e,t,n,r=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:r,value:n})},F=e=>{const t=parseFloat(e);return isNaN(t)?e:t},j=e=>{const t=E(e)?Number(e):NaN;return isNaN(t)?e:t};let B;const G=()=>B||(B="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n.g?n.g:{});const H=t("Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console,Error,Symbol");function W(e){if(p(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],i=E(r)?Y(r):W(r);if(i)for(const e in i)t[e]=i[e]}return t}if(E(e)||v(e))return e}const K=/;(?![^(]*\))/g,z=/:([^]+)/,q=/\/\*[^]*?\*\//g;function Y(e){const t={};return e.replace(q,"").split(K).forEach((e=>{if(e){const n=e.split(z);n.length>1&&(t[n[0].trim()]=n[1].trim())}})),t}function J(e){let t="";if(E(e))t=e;else if(p(e))for(let n=0;n<e.length;n++){const r=J(e[n]);r&&(t+=r+" ")}else if(v(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}function X(e){if(!e)return null;let{class:t,style:n}=e;return t&&!E(t)&&(e.class=J(t)),n&&(e.style=W(n)),e}const Q=t("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,hgroup,h1,h2,h3,h4,h5,h6,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,summary,template,blockquote,iframe,tfoot"),Z=t("svg,animate,animateMotion,animateTransform,circle,clipPath,color-profile,defs,desc,discard,ellipse,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feDistantLight,feDropShadow,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,filter,foreignObject,g,hatch,hatchpath,image,line,linearGradient,marker,mask,mesh,meshgradient,meshpatch,meshrow,metadata,mpath,path,pattern,polygon,polyline,radialGradient,rect,set,solidcolor,stop,switch,symbol,text,textPath,title,tspan,unknown,use,view"),ee=t("annotation,annotation-xml,maction,maligngroup,malignmark,math,menclose,merror,mfenced,mfrac,mfraction,mglyph,mi,mlabeledtr,mlongdiv,mmultiscripts,mn,mo,mover,mpadded,mphantom,mprescripts,mroot,mrow,ms,mscarries,mscarry,msgroup,msline,mspace,msqrt,msrow,mstack,mstyle,msub,msubsup,msup,mtable,mtd,mtext,mtr,munder,munderover,none,semantics"),te=t("area,base,br,col,embed,hr,img,input,link,meta,param,source,track,wbr"),ne="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",re=t(ne),ie=t(ne+",async,autofocus,autoplay,controls,default,defer,disabled,hidden,inert,loop,open,required,reversed,scoped,seamless,checked,muted,multiple,selected");function oe(e){return!!e||""===e}const se=t("accept,accept-charset,accesskey,action,align,allow,alt,async,autocapitalize,autocomplete,autofocus,autoplay,background,bgcolor,border,buffered,capture,challenge,charset,checked,cite,class,code,codebase,color,cols,colspan,content,contenteditable,contextmenu,controls,coords,crossorigin,csp,data,datetime,decoding,default,defer,dir,dirname,disabled,download,draggable,dropzone,enctype,enterkeyhint,for,form,formaction,formenctype,formmethod,formnovalidate,formtarget,headers,height,hidden,high,href,hreflang,http-equiv,icon,id,importance,inert,integrity,ismap,itemprop,keytype,kind,label,lang,language,loading,list,loop,low,manifest,max,maxlength,minlength,media,min,multiple,muted,name,novalidate,open,optimum,pattern,ping,placeholder,poster,preload,radiogroup,readonly,referrerpolicy,rel,required,reversed,rows,rowspan,sandbox,scope,scoped,selected,shape,size,sizes,slot,span,spellcheck,src,srcdoc,srclang,srcset,start,step,style,summary,tabindex,target,title,translate,type,usemap,value,width,wrap"),ae=t("xmlns,accent-height,accumulate,additive,alignment-baseline,alphabetic,amplitude,arabic-form,ascent,attributeName,attributeType,azimuth,baseFrequency,baseline-shift,baseProfile,bbox,begin,bias,by,calcMode,cap-height,class,clip,clipPathUnits,clip-path,clip-rule,color,color-interpolation,color-interpolation-filters,color-profile,color-rendering,contentScriptType,contentStyleType,crossorigin,cursor,cx,cy,d,decelerate,descent,diffuseConstant,direction,display,divisor,dominant-baseline,dur,dx,dy,edgeMode,elevation,enable-background,end,exponent,fill,fill-opacity,fill-rule,filter,filterRes,filterUnits,flood-color,flood-opacity,font-family,font-size,font-size-adjust,font-stretch,font-style,font-variant,font-weight,format,from,fr,fx,fy,g1,g2,glyph-name,glyph-orientation-horizontal,glyph-orientation-vertical,glyphRef,gradientTransform,gradientUnits,hanging,height,href,hreflang,horiz-adv-x,horiz-origin-x,id,ideographic,image-rendering,in,in2,intercept,k,k1,k2,k3,k4,kernelMatrix,kernelUnitLength,kerning,keyPoints,keySplines,keyTimes,lang,lengthAdjust,letter-spacing,lighting-color,limitingConeAngle,local,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mask,maskContentUnits,maskUnits,mathematical,max,media,method,min,mode,name,numOctaves,offset,opacity,operator,order,orient,orientation,origin,overflow,overline-position,overline-thickness,panose-1,paint-order,path,pathLength,patternContentUnits,patternTransform,patternUnits,ping,pointer-events,points,pointsAtX,pointsAtY,pointsAtZ,preserveAlpha,preserveAspectRatio,primitiveUnits,r,radius,referrerPolicy,refX,refY,rel,rendering-intent,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,result,rotate,rx,ry,scale,seed,shape-rendering,slope,spacing,specularConstant,specularExponent,speed,spreadMethod,startOffset,stdDeviation,stemh,stemv,stitchTiles,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,string,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,style,surfaceScale,systemLanguage,tabindex,tableValues,target,targetX,targetY,text-anchor,text-decoration,text-rendering,textLength,to,transform,transform-origin,type,u1,u2,underline-position,underline-thickness,unicode,unicode-bidi,unicode-range,units-per-em,v-alphabetic,v-hanging,v-ideographic,v-mathematical,values,vector-effect,version,vert-adv-y,vert-origin-x,vert-origin-y,viewBox,viewTarget,visibility,width,widths,word-spacing,writing-mode,x,x-height,x1,x2,xChannelSelector,xlink:actuate,xlink:arcrole,xlink:href,xlink:role,xlink:show,xlink:title,xlink:type,xmlns:xlink,xml:base,xml:lang,xml:space,y,y1,y2,yChannelSelector,z,zoomAndPan");const ce=/[ !"#$%&'()*+,./:;<=>?@[\\\]^`{|}~]/g;function de(e,t){return e.replace(ce,(e=>t?'"'===e?'\\\\\\"':`\\\\${e}`:`\\${e}`))}function le(e,t){if(e===t)return!0;let n=g(e),r=g(t);if(n||r)return!(!n||!r)&&e.getTime()===t.getTime();if(n=y(e),r=y(t),n||r)return e===t;if(n=p(e),r=p(t),n||r)return!(!n||!r)&&function(e,t){if(e.length!==t.length)return!1;let n=!0;for(let r=0;n&&r<e.length;r++)n=le(e[r],t[r]);return n}(e,t);if(n=v(e),r=v(t),n||r){if(!n||!r)return!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e){const r=e.hasOwnProperty(n),i=t.hasOwnProperty(n);if(r&&!i||!r&&i||!le(e[n],t[n]))return!1}}return String(e)===String(t)}function he(e,t){return e.findIndex((e=>le(e,t)))}const ue=e=>!(!e||!0!==e.__v_isRef),pe=e=>E(e)?e:null==e?"":p(e)||v(e)&&(e.toString===S||!_(e.toString))?ue(e)?pe(e.value):JSON.stringify(e,fe,2):String(e),fe=(e,t)=>ue(t)?fe(e,t.value):f(t)?{[`Map(${t.size})`]:[...t.entries()].reduce(((e,[t,n],r)=>(e[me(t,r)+" =>"]=n,e)),{})}:m(t)?{[`Set(${t.size})`]:[...t.values()].map((e=>me(e)))}:y(t)?me(t):!v(t)||p(t)||C(t)?t:String(t),me=(e,t="")=>{var n;return y(e)?`Symbol(${null!=(n=e.description)?n:t})`:e};let ge,_e;class Ee{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=ge,!e&&ge&&(this.index=(ge.scopes||(ge.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){let e,t;if(this._isPaused=!0,this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].pause();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){let e,t;if(this._isPaused=!1,this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].resume();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].resume()}}run(e){if(this._active){const t=ge;try{return ge=this,e()}finally{ge=t}}else 0}on(){ge=this}off(){ge=this.parent}stop(e){if(this._active){let t,n;for(t=0,n=this.effects.length;t<n;t++)this.effects[t].stop();for(t=0,n=this.cleanups.length;t<n;t++)this.cleanups[t]();if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].stop(!0);if(!this.detached&&this.parent&&!e){const e=this.parent.scopes.pop();e&&e!==this&&(this.parent.scopes[this.index]=e,e.index=this.index)}this.parent=void 0,this._active=!1}}}function ye(e){return new Ee(e)}function ve(){return ge}function be(e,t=!1){ge&&ge.cleanups.push(e)}const Se=new WeakSet;class Te{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,ge&&ge.active&&ge.effects.push(this)}pause(){this.flags|=64}resume(){64&this.flags&&(this.flags&=-65,Se.has(this)&&(Se.delete(this),this.trigger()))}notify(){2&this.flags&&!(32&this.flags)||8&this.flags||we(this)}run(){if(!(1&this.flags))return this.fn();this.flags|=2,Be(this),Oe(this);const e=_e,t=Ue;_e=this,Ue=!0;try{return this.fn()}finally{0,xe(this),_e=e,Ue=t,this.flags&=-3}}stop(){if(1&this.flags){for(let e=this.deps;e;e=e.nextDep)De(e);this.deps=this.depsTail=void 0,Be(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){64&this.flags?Se.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Ne(this)&&this.run()}get dirty(){return Ne(this)}}let Re,Ce=0;function we(e){e.flags|=8,e.next=Re,Re=e}function Ie(){Ce++}function Ae(){if(--Ce>0)return;let e;for(;Re;){let t=Re;for(Re=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,1&t.flags)try{t.trigger()}catch(t){e||(e=t)}t=n}}if(e)throw e}function Oe(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function xe(e){let t,n=e.depsTail,r=n;for(;r;){const e=r.prevDep;-1===r.version?(r===n&&(n=e),De(r),Le(r)):t=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=e}e.deps=t,e.depsTail=n}function Ne(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Pe(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Pe(e){if(4&e.flags&&!(16&e.flags))return;if(e.flags&=-17,e.globalVersion===Ge)return;e.globalVersion=Ge;const t=e.dep;if(e.flags|=2,t.version>0&&!e.isSSR&&e.deps&&!Ne(e))return void(e.flags&=-3);const n=_e,r=Ue;_e=e,Ue=!0;try{Oe(e);const n=e.fn(e._value);(0===t.version||M(n,e._value))&&(e._value=n,t.version++)}catch(e){throw t.version++,e}finally{_e=n,Ue=r,xe(e),e.flags&=-3}}function De(e){const{dep:t,prevSub:n,nextSub:r}=e;if(n&&(n.nextSub=r,e.prevSub=void 0),r&&(r.prevSub=n,e.nextSub=void 0),t.subs===e&&(t.subs=n),!t.subs&&t.computed){t.computed.flags&=-5;for(let e=t.computed.deps;e;e=e.nextDep)De(e)}}function Le(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}function ke(e,t){e.effect instanceof Te&&(e=e.effect.fn);const n=new Te(e);t&&d(n,t);try{n.run()}catch(e){throw n.stop(),e}const r=n.run.bind(n);return r.effect=n,r}function Me(e){e.effect.stop()}let Ue=!0;const Ve=[];function Fe(){Ve.push(Ue),Ue=!1}function je(){const e=Ve.pop();Ue=void 0===e||e}function Be(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const e=_e;_e=void 0;try{t()}finally{_e=e}}}let Ge=0;class He{constructor(e,t){this.sub=e,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class We{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0}track(e){if(!_e||!Ue||_e===this.computed)return;let t=this.activeLink;if(void 0===t||t.sub!==_e)t=this.activeLink=new He(_e,this),_e.deps?(t.prevDep=_e.depsTail,_e.depsTail.nextDep=t,_e.depsTail=t):_e.deps=_e.depsTail=t,4&_e.flags&&Ke(t);else if(-1===t.version&&(t.version=this.version,t.nextDep)){const e=t.nextDep;e.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=e),t.prevDep=_e.depsTail,t.nextDep=void 0,_e.depsTail.nextDep=t,_e.depsTail=t,_e.deps===t&&(_e.deps=e)}return t}trigger(e){this.version++,Ge++,this.notify(e)}notify(e){Ie();try{0;for(let e=this.subs;e;e=e.prevSub)e.sub.notify()&&e.sub.dep.notify()}finally{Ae()}}}function Ke(e){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let e=t.deps;e;e=e.nextDep)Ke(e)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}const ze=new WeakMap,qe=Symbol(""),Ye=Symbol(""),Je=Symbol("");function Xe(e,t,n){if(Ue&&_e){let t=ze.get(e);t||ze.set(e,t=new Map);let r=t.get(n);r||t.set(n,r=new We),r.track()}}function Qe(e,t,n,r,i,o){const s=ze.get(e);if(!s)return void Ge++;const a=e=>{e&&e.trigger()};if(Ie(),"clear"===t)s.forEach(a);else{const i=p(e),o=i&&w(n);if(i&&"length"===n){const e=Number(r);s.forEach(((t,n)=>{("length"===n||n===Je||!y(n)&&n>=e)&&a(t)}))}else switch(void 0!==n&&a(s.get(n)),o&&a(s.get(Je)),t){case"add":i?o&&a(s.get("length")):(a(s.get(qe)),f(e)&&a(s.get(Ye)));break;case"delete":i||(a(s.get(qe)),f(e)&&a(s.get(Ye)));break;case"set":f(e)&&a(s.get(qe))}}Ae()}function $e(e){const t=$t(e);return t===e?t:(Xe(t,0,Je),Xt(e)?t:t.map(en))}function Ze(e){return Xe(e=$t(e),0,Je),e}const et={__proto__:null,[Symbol.iterator](){return tt(this,Symbol.iterator,en)},concat(...e){return $e(this).concat(...e.map((e=>p(e)?$e(e):e)))},entries(){return tt(this,"entries",(e=>(e[1]=en(e[1]),e)))},every(e,t){return rt(this,"every",e,t,void 0,arguments)},filter(e,t){return rt(this,"filter",e,t,(e=>e.map(en)),arguments)},find(e,t){return rt(this,"find",e,t,en,arguments)},findIndex(e,t){return rt(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return rt(this,"findLast",e,t,en,arguments)},findLastIndex(e,t){return rt(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return rt(this,"forEach",e,t,void 0,arguments)},includes(...e){return ot(this,"includes",e)},indexOf(...e){return ot(this,"indexOf",e)},join(e){return $e(this).join(e)},lastIndexOf(...e){return ot(this,"lastIndexOf",e)},map(e,t){return rt(this,"map",e,t,void 0,arguments)},pop(){return st(this,"pop")},push(...e){return st(this,"push",e)},reduce(e,...t){return it(this,"reduce",e,t)},reduceRight(e,...t){return it(this,"reduceRight",e,t)},shift(){return st(this,"shift")},some(e,t){return rt(this,"some",e,t,void 0,arguments)},splice(...e){return st(this,"splice",e)},toReversed(){return $e(this).toReversed()},toSorted(e){return $e(this).toSorted(e)},toSpliced(...e){return $e(this).toSpliced(...e)},unshift(...e){return st(this,"unshift",e)},values(){return tt(this,"values",en)}};function tt(e,t,n){const r=Ze(e),i=r[t]();return r===e||Xt(e)||(i._next=i.next,i.next=()=>{const e=i._next();return e.value&&(e.value=n(e.value)),e}),i}const nt=Array.prototype;function rt(e,t,n,r,i,o){const s=Ze(e),a=s!==e&&!Xt(e),c=s[t];if(c!==nt[t]){const t=c.apply(e,o);return a?en(t):t}let d=n;s!==e&&(a?d=function(t,r){return n.call(this,en(t),r,e)}:n.length>2&&(d=function(t,r){return n.call(this,t,r,e)}));const l=c.call(s,d,r);return a&&i?i(l):l}function it(e,t,n,r){const i=Ze(e);let o=n;return i!==e&&(Xt(e)?n.length>3&&(o=function(t,r,i){return n.call(this,t,r,i,e)}):o=function(t,r,i){return n.call(this,t,en(r),i,e)}),i[t](o,...r)}function ot(e,t,n){const r=$t(e);Xe(r,0,Je);const i=r[t](...n);return-1!==i&&!1!==i||!Qt(n[0])?i:(n[0]=$t(n[0]),r[t](...n))}function st(e,t,n=[]){Fe(),Ie();const r=$t(e)[t].apply(e,n);return Ae(),je(),r}const at=t("__proto__,__v_isRef,__isVue"),ct=new Set(Object.getOwnPropertyNames(Symbol).filter((e=>"arguments"!==e&&"caller"!==e)).map((e=>Symbol[e])).filter(y));function dt(e){y(e)||(e=String(e));const t=$t(this);return Xe(t,0,e),t.hasOwnProperty(e)}class lt{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,n){const r=this._isReadonly,i=this._isShallow;if("__v_isReactive"===t)return!r;if("__v_isReadonly"===t)return r;if("__v_isShallow"===t)return i;if("__v_raw"===t)return n===(r?i?Gt:Bt:i?jt:Ft).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(n)?e:void 0;const o=p(e);if(!r){let e;if(o&&(e=et[t]))return e;if("hasOwnProperty"===t)return dt}const s=Reflect.get(e,t,nn(e)?e:n);return(y(t)?ct.has(t):at(t))?s:(r||Xe(e,0,t),i?s:nn(s)?o&&w(t)?s:s.value:v(s)?r?Kt(s):Ht(s):s)}}class ht extends lt{constructor(e=!1){super(!1,e)}set(e,t,n,r){let i=e[t];if(!this._isShallow){const t=Jt(i);if(Xt(n)||Jt(n)||(i=$t(i),n=$t(n)),!p(e)&&nn(i)&&!nn(n))return!t&&(i.value=n,!0)}const o=p(e)&&w(t)?Number(t)<e.length:u(e,t),s=Reflect.set(e,t,n,nn(e)?e:r);return e===$t(r)&&(o?M(n,i)&&Qe(e,"set",t,n):Qe(e,"add",t,n)),s}deleteProperty(e,t){const n=u(e,t),r=(e[t],Reflect.deleteProperty(e,t));return r&&n&&Qe(e,"delete",t,void 0),r}has(e,t){const n=Reflect.has(e,t);return y(t)&&ct.has(t)||Xe(e,0,t),n}ownKeys(e){return Xe(e,0,p(e)?"length":qe),Reflect.ownKeys(e)}}class ut extends lt{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const pt=new ht,ft=new ut,mt=new ht(!0),gt=new ut(!0),_t=e=>e,Et=e=>Reflect.getPrototypeOf(e);function yt(e,t,n=!1,r=!1){const i=$t(e=e.__v_raw),o=$t(t);n||(M(t,o)&&Xe(i,0,t),Xe(i,0,o));const{has:s}=Et(i),a=r?_t:n?tn:en;return s.call(i,t)?a(e.get(t)):s.call(i,o)?a(e.get(o)):void(e!==i&&e.get(t))}function vt(e,t=!1){const n=this.__v_raw,r=$t(n),i=$t(e);return t||(M(e,i)&&Xe(r,0,e),Xe(r,0,i)),e===i?n.has(e):n.has(e)||n.has(i)}function bt(e,t=!1){return e=e.__v_raw,!t&&Xe($t(e),0,qe),Reflect.get(e,"size",e)}function St(e,t=!1){t||Xt(e)||Jt(e)||(e=$t(e));const n=$t(this);return Et(n).has.call(n,e)||(n.add(e),Qe(n,"add",e,e)),this}function Tt(e,t,n=!1){n||Xt(t)||Jt(t)||(t=$t(t));const r=$t(this),{has:i,get:o}=Et(r);let s=i.call(r,e);s||(e=$t(e),s=i.call(r,e));const a=o.call(r,e);return r.set(e,t),s?M(t,a)&&Qe(r,"set",e,t):Qe(r,"add",e,t),this}function Rt(e){const t=$t(this),{has:n,get:r}=Et(t);let i=n.call(t,e);i||(e=$t(e),i=n.call(t,e));r&&r.call(t,e);const o=t.delete(e);return i&&Qe(t,"delete",e,void 0),o}function Ct(){const e=$t(this),t=0!==e.size,n=e.clear();return t&&Qe(e,"clear",void 0,void 0),n}function wt(e,t){return function(n,r){const i=this,o=i.__v_raw,s=$t(o),a=t?_t:e?tn:en;return!e&&Xe(s,0,qe),o.forEach(((e,t)=>n.call(r,a(e),a(t),i)))}}function It(e,t,n){return function(...r){const i=this.__v_raw,o=$t(i),s=f(o),a="entries"===e||e===Symbol.iterator&&s,c="keys"===e&&s,d=i[e](...r),l=n?_t:t?tn:en;return!t&&Xe(o,0,c?Ye:qe),{next(){const{value:e,done:t}=d.next();return t?{value:e,done:t}:{value:a?[l(e[0]),l(e[1])]:l(e),done:t}},[Symbol.iterator](){return this}}}}function At(e){return function(...t){return"delete"!==e&&("clear"===e?void 0:this)}}function Ot(){const e={get(e){return yt(this,e)},get size(){return bt(this)},has:vt,add:St,set:Tt,delete:Rt,clear:Ct,forEach:wt(!1,!1)},t={get(e){return yt(this,e,!1,!0)},get size(){return bt(this)},has:vt,add(e){return St.call(this,e,!0)},set(e,t){return Tt.call(this,e,t,!0)},delete:Rt,clear:Ct,forEach:wt(!1,!0)},n={get(e){return yt(this,e,!0)},get size(){return bt(this,!0)},has(e){return vt.call(this,e,!0)},add:At("add"),set:At("set"),delete:At("delete"),clear:At("clear"),forEach:wt(!0,!1)},r={get(e){return yt(this,e,!0,!0)},get size(){return bt(this,!0)},has(e){return vt.call(this,e,!0)},add:At("add"),set:At("set"),delete:At("delete"),clear:At("clear"),forEach:wt(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach((i=>{e[i]=It(i,!1,!1),n[i]=It(i,!0,!1),t[i]=It(i,!1,!0),r[i]=It(i,!0,!0)})),[e,n,t,r]}const[xt,Nt,Pt,Dt]=Ot();function Lt(e,t){const n=t?e?Dt:Pt:e?Nt:xt;return(t,r,i)=>"__v_isReactive"===r?!e:"__v_isReadonly"===r?e:"__v_raw"===r?t:Reflect.get(u(n,r)&&r in t?n:t,r,i)}const kt={get:Lt(!1,!1)},Mt={get:Lt(!1,!0)},Ut={get:Lt(!0,!1)},Vt={get:Lt(!0,!0)};const Ft=new WeakMap,jt=new WeakMap,Bt=new WeakMap,Gt=new WeakMap;function Ht(e){return Jt(e)?e:qt(e,!1,pt,kt,Ft)}function Wt(e){return qt(e,!1,mt,Mt,jt)}function Kt(e){return qt(e,!0,ft,Ut,Bt)}function zt(e){return qt(e,!0,gt,Vt,Gt)}function qt(e,t,n,r,i){if(!v(e))return e;if(e.__v_raw&&(!t||!e.__v_isReactive))return e;const o=i.get(e);if(o)return o;const s=(a=e).__v_skip||!Object.isExtensible(a)?0:function(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}(R(a));var a;if(0===s)return e;const c=new Proxy(e,2===s?r:n);return i.set(e,c),c}function Yt(e){return Jt(e)?Yt(e.__v_raw):!(!e||!e.__v_isReactive)}function Jt(e){return!(!e||!e.__v_isReadonly)}function Xt(e){return!(!e||!e.__v_isShallow)}function Qt(e){return!!e&&!!e.__v_raw}function $t(e){const t=e&&e.__v_raw;return t?$t(t):e}function Zt(e){return!u(e,"__v_skip")&&Object.isExtensible(e)&&V(e,"__v_skip",!0),e}const en=e=>v(e)?Ht(e):e,tn=e=>v(e)?Kt(e):e;function nn(e){return!!e&&!0===e.__v_isRef}function rn(e){return sn(e,!1)}function on(e){return sn(e,!0)}function sn(e,t){return nn(e)?e:new an(e,t)}class an{constructor(e,t){this.dep=new We,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=t?e:$t(e),this._value=t?e:en(e),this.__v_isShallow=t}get value(){return this.dep.track(),this._value}set value(e){const t=this._rawValue,n=this.__v_isShallow||Xt(e)||Jt(e);e=n?e:$t(e),M(e,t)&&(this._rawValue=e,this._value=n?e:en(e),this.dep.trigger())}}function cn(e){e.dep.trigger()}function dn(e){return nn(e)?e.value:e}function ln(e){return _(e)?e():dn(e)}const hn={get:(e,t,n)=>"__v_raw"===t?e:dn(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const i=e[t];return nn(i)&&!nn(n)?(i.value=n,!0):Reflect.set(e,t,n,r)}};function un(e){return Yt(e)?e:new Proxy(e,hn)}class pn{constructor(e){this.__v_isRef=!0,this._value=void 0;const t=this.dep=new We,{get:n,set:r}=e(t.track.bind(t),t.trigger.bind(t));this._get=n,this._set=r}get value(){return this._value=this._get()}set value(e){this._set(e)}}function fn(e){return new pn(e)}function mn(e){const t=p(e)?new Array(e.length):{};for(const n in e)t[n]=yn(e,n);return t}class gn{constructor(e,t,n){this._object=e,this._key=t,this._defaultValue=n,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=void 0===e?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return function(e,t){var n;return null==(n=ze.get(e))?void 0:n.get(t)}($t(this._object),this._key)}}class _n{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function En(e,t,n){return nn(e)?e:_(e)?new _n(e):v(e)&&arguments.length>1?yn(e,t,n):rn(e)}function yn(e,t,n){const r=e[t];return nn(r)?r:new gn(e,t,n)}class vn{constructor(e,t,n){this.fn=e,this.setter=t,this._value=void 0,this.dep=new We(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ge-1,this.effect=this,this.__v_isReadonly=!t,this.isSSR=n}notify(){if(this.flags|=16,!(8&this.flags||_e===this))return we(this),!0}get value(){const e=this.dep.track();return Pe(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}const bn={GET:"get",HAS:"has",ITERATE:"iterate"},Sn={SET:"set",ADD:"add",DELETE:"delete",CLEAR:"clear"},Tn={},Rn=new WeakMap;let Cn;function wn(){return Cn}function In(e,t=!1,n=Cn){if(n){let t=Rn.get(n);t||Rn.set(n,t=[]),t.push(e)}else 0}function An(e,t=1/0,n){if(t<=0||!v(e)||e.__v_skip)return e;if((n=n||new Set).has(e))return e;if(n.add(e),t--,nn(e))An(e.value,t,n);else if(p(e))for(let r=0;r<e.length;r++)An(e[r],t,n);else if(m(e)||f(e))e.forEach((e=>{An(e,t,n)}));else if(C(e)){for(const r in e)An(e[r],t,n);for(const r of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,r)&&An(e[r],t,n)}return e}const On=[];let xn=!1;function Nn(e,...t){if(xn)return;xn=!0,Fe();const n=On.length?On[On.length-1].component:null,r=n&&n.appContext.config.warnHandler,i=function(){let e=On[On.length-1];if(!e)return[];const t=[];for(;e;){const n=t[0];n&&n.vnode===e?n.recurseCount++:t.push({vnode:e,recurseCount:0});const r=e.component&&e.component.parent;e=r&&r.vnode}return t}();if(r)Un(r,n,11,[e+t.map((e=>{var t,n;return null!=(n=null==(t=e.toString)?void 0:t.call(e))?n:JSON.stringify(e)})).join(""),n&&n.proxy,i.map((({vnode:e})=>`at <${La(n,e.type)}>`)).join("\n"),i]);else{const n=[`[Vue warn]: ${e}`,...t];i.length&&n.push("\n",...function(e){const t=[];return e.forEach(((e,n)=>{t.push(...0===n?[]:["\n"],...function({vnode:e,recurseCount:t}){const n=t>0?`... (${t} recursive calls)`:"",r=!!e.component&&null==e.component.parent,i=` at <${La(e.component,e.type,r)}`,o=">"+n;return e.props?[i,...Pn(e.props),o]:[i+o]}(e))})),t}(i)),console.warn(...n)}je(),xn=!1}function Pn(e){const t=[],n=Object.keys(e);return n.slice(0,3).forEach((n=>{t.push(...Dn(n,e[n]))})),n.length>3&&t.push(" ..."),t}function Dn(e,t,n){return E(t)?(t=JSON.stringify(t),n?t:[`${e}=${t}`]):"number"==typeof t||"boolean"==typeof t||null==t?n?t:[`${e}=${t}`]:nn(t)?(t=Dn(e,$t(t.value),!0),n?t:[`${e}=Ref<`,t,">"]):_(t)?[`${e}=fn${t.name?`<${t.name}>`:""}`]:(t=$t(t),n?t:[`${e}=`,t])}function Ln(e,t){}const kn={SETUP_FUNCTION:0,0:"SETUP_FUNCTION",RENDER_FUNCTION:1,1:"RENDER_FUNCTION",NATIVE_EVENT_HANDLER:5,5:"NATIVE_EVENT_HANDLER",COMPONENT_EVENT_HANDLER:6,6:"COMPONENT_EVENT_HANDLER",VNODE_HOOK:7,7:"VNODE_HOOK",DIRECTIVE_HOOK:8,8:"DIRECTIVE_HOOK",TRANSITION_HOOK:9,9:"TRANSITION_HOOK",APP_ERROR_HANDLER:10,10:"APP_ERROR_HANDLER",APP_WARN_HANDLER:11,11:"APP_WARN_HANDLER",FUNCTION_REF:12,12:"FUNCTION_REF",ASYNC_COMPONENT_LOADER:13,13:"ASYNC_COMPONENT_LOADER",SCHEDULER:14,14:"SCHEDULER",COMPONENT_UPDATE:15,15:"COMPONENT_UPDATE",APP_UNMOUNT_CLEANUP:16,16:"APP_UNMOUNT_CLEANUP"},Mn={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",0:"setup function",1:"render function",2:"watcher getter",3:"watcher callback",4:"watcher cleanup function",5:"native event handler",6:"component event handler",7:"vnode hook",8:"directive hook",9:"transition hook",10:"app errorHandler",11:"app warnHandler",12:"ref function",13:"async component loader",14:"scheduler flush",15:"component update",16:"app unmount cleanup function"};function Un(e,t,n,r){try{return r?e(...r):e()}catch(e){Fn(e,t,n)}}function Vn(e,t,n,r){if(_(e)){const i=Un(e,t,n,r);return i&&b(i)&&i.catch((e=>{Fn(e,t,n)})),i}if(p(e)){const i=[];for(let o=0;o<e.length;o++)i.push(Vn(e[o],t,n,r));return i}}function Fn(e,t,n,i=!0){t&&t.vnode;const{errorHandler:o,throwUnhandledErrorInProduction:s}=t&&t.appContext.config||r;if(t){let r=t.parent;const i=t.proxy,s=`https://vuejs.org/error-reference/#runtime-${n}`;for(;r;){const t=r.ec;if(t)for(let n=0;n<t.length;n++)if(!1===t[n](e,i,s))return;r=r.parent}if(o)return Fe(),Un(o,null,10,[e,i,s]),void je()}!function(e,t,n,r=!0,i=!1){if(i)throw e;console.error(e)}(e,0,0,i,s)}let jn=!1,Bn=!1;const Gn=[];let Hn=0;const Wn=[];let Kn=null,zn=0;const qn=Promise.resolve();let Yn=null;function Jn(e){const t=Yn||qn;return e?t.then(this?e.bind(this):e):t}function Xn(e){if(!(1&e.flags)){const t=tr(e),n=Gn[Gn.length-1];!n||!(2&e.flags)&&t>=tr(n)?Gn.push(e):Gn.splice(function(e){let t=jn?Hn+1:0,n=Gn.length;for(;t<n;){const r=t+n>>>1,i=Gn[r],o=tr(i);o<e||o===e&&2&i.flags?t=r+1:n=r}return t}(t),0,e),e.flags|=1,Qn()}}function Qn(){jn||Bn||(Bn=!0,Yn=qn.then(nr))}function $n(e){p(e)?Wn.push(...e):Kn&&-1===e.id?Kn.splice(zn+1,0,e):1&e.flags||(Wn.push(e),e.flags|=1),Qn()}function Zn(e,t,n=(jn?Hn+1:0)){for(0;n<Gn.length;n++){const t=Gn[n];if(t&&2&t.flags){if(e&&t.id!==e.uid)continue;0,Gn.splice(n,1),n--,4&t.flags&&(t.flags&=-2),t(),t.flags&=-2}}}function er(e){if(Wn.length){const e=[...new Set(Wn)].sort(((e,t)=>tr(e)-tr(t)));if(Wn.length=0,Kn)return void Kn.push(...e);for(Kn=e,zn=0;zn<Kn.length;zn++){const e=Kn[zn];0,4&e.flags&&(e.flags&=-2),8&e.flags||e(),e.flags&=-2}Kn=null,zn=0}}const tr=e=>null==e.id?2&e.flags?-1:1/0:e.id;function nr(e){Bn=!1,jn=!0;try{for(Hn=0;Hn<Gn.length;Hn++){const e=Gn[Hn];!e||8&e.flags||(4&e.flags&&(e.flags&=-2),Un(e,e.i,e.i?15:14),e.flags&=-2)}}finally{for(;Hn<Gn.length;Hn++){const e=Gn[Hn];e&&(e.flags&=-2)}Hn=0,Gn.length=0,er(),jn=!1,Yn=null,(Gn.length||Wn.length)&&nr(e)}}let rr,ir=[],or=!1;let sr=null,ar=null;function cr(e){const t=sr;return sr=e,ar=e&&e.type.__scopeId||null,t}function dr(e){ar=e}function lr(){ar=null}const hr=e=>ur;function ur(e,t=sr,n){if(!t)return e;if(e._n)return e;const r=(...n)=>{r._d&&Gs(-1);const i=cr(t);let o;try{o=e(...n)}finally{cr(i),r._d&&Gs(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function pr(e,t){if(null===sr)return e;const n=xa(sr),i=e.dirs||(e.dirs=[]);for(let e=0;e<t.length;e++){let[o,s,a,c=r]=t[e];o&&(_(o)&&(o={mounted:o,updated:o}),o.deep&&An(s),i.push({dir:o,instance:n,value:s,oldValue:void 0,arg:a,modifiers:c}))}return e}function fr(e,t,n,r){const i=e.dirs,o=t&&t.dirs;for(let s=0;s<i.length;s++){const a=i[s];o&&(a.oldValue=o[s].value);let c=a.dir[r];c&&(Fe(),Vn(c,n,8,[e.el,a,e,t]),je())}}const mr=Symbol("_vte"),gr=e=>e.__isTeleport,_r=e=>e&&(e.disabled||""===e.disabled),Er=e=>"undefined"!=typeof SVGElement&&e instanceof SVGElement,yr=e=>"function"==typeof MathMLElement&&e instanceof MathMLElement,vr=(e,t)=>{const n=e&&e.to;if(E(n)){if(t){return t(n)}return null}return n},br={name:"Teleport",__isTeleport:!0,process(e,t,n,r,i,o,s,a,c,d){const{mc:l,pc:h,pbc:u,o:{insert:p,querySelector:f,createText:m,createComment:g}}=d,_=_r(t.props);let{shapeFlag:E,children:y,dynamicChildren:v}=t;if(null==e){const e=t.el=m(""),d=t.anchor=m("");p(e,n,r),p(d,n,r);const h=(e,t)=>{16&E&&(i&&i.isCE&&(i.ce._teleportTarget=e),l(y,e,t,i,o,s,a,c))},u=()=>{const e=t.target=vr(t.props,f),n=Cr(e,t,m,p);e&&("svg"!==s&&Er(e)?s="svg":"mathml"!==s&&yr(e)&&(s="mathml"),_||(h(e,n),Rr(t)))};_&&(h(n,d),Rr(t)),(b=t.props)&&(b.defer||""===b.defer)?Yo(u,o):u()}else{t.el=e.el,t.targetStart=e.targetStart;const r=t.anchor=e.anchor,l=t.target=e.target,p=t.targetAnchor=e.targetAnchor,m=_r(e.props),g=m?n:l,E=m?r:p;if("svg"===s||Er(l)?s="svg":("mathml"===s||yr(l))&&(s="mathml"),v?(u(e.dynamicChildren,v,g,i,o,s,a),ts(e,t,!0)):c||h(e,t,g,E,i,o,s,a,!1),_)m?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):Sr(t,n,r,d,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const e=t.target=vr(t.props,f);e&&Sr(t,e,null,d,0)}else m&&Sr(t,l,p,d,1);Rr(t)}var b},remove(e,t,n,{um:r,o:{remove:i}},o){const{shapeFlag:s,children:a,anchor:c,targetStart:d,targetAnchor:l,target:h,props:u}=e;if(h&&(i(d),i(l)),o&&i(c),16&s){const e=o||!_r(u);for(let i=0;i<a.length;i++){const o=a[i];r(o,t,n,e,!!o.dynamicChildren)}}},move:Sr,hydrate:function(e,t,n,r,i,o,{o:{nextSibling:s,parentNode:a,querySelector:c,insert:d,createText:l}},h){const u=t.target=vr(t.props,c);if(u){const c=u._lpa||u.firstChild;if(16&t.shapeFlag)if(_r(t.props))t.anchor=h(s(e),t,a(e),n,r,i,o),t.targetStart=c,t.targetAnchor=c&&s(c);else{t.anchor=s(e);let a=c;for(;a;){if(a&&8===a.nodeType)if("teleport start anchor"===a.data)t.targetStart=a;else if("teleport anchor"===a.data){t.targetAnchor=a,u._lpa=t.targetAnchor&&s(t.targetAnchor);break}a=s(a)}t.targetAnchor||Cr(u,t,l,d),h(c&&s(c),t,u,n,r,i,o)}Rr(t)}return t.anchor&&s(t.anchor)}};function Sr(e,t,n,{o:{insert:r},m:i},o=2){0===o&&r(e.targetAnchor,t,n);const{el:s,anchor:a,shapeFlag:c,children:d,props:l}=e,h=2===o;if(h&&r(s,t,n),(!h||_r(l))&&16&c)for(let e=0;e<d.length;e++)i(d[e],t,n,2);h&&r(a,t,n)}const Tr=br;function Rr(e){const t=e.ctx;if(t&&t.ut){let n=e.targetStart;for(;n&&n!==e.targetAnchor;)1===n.nodeType&&n.setAttribute("data-v-owner",t.uid),n=n.nextSibling;t.ut()}}function Cr(e,t,n,r){const i=t.targetStart=n(""),o=t.targetAnchor=n("");return i[mr]=o,e&&(r(i,e),r(o,e)),o}const wr=Symbol("_leaveCb"),Ir=Symbol("_enterCb");function Ar(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Ri((()=>{e.isMounted=!0})),Ii((()=>{e.isUnmounting=!0})),e}const Or=[Function,Array],xr={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Or,onEnter:Or,onAfterEnter:Or,onEnterCancelled:Or,onBeforeLeave:Or,onLeave:Or,onAfterLeave:Or,onLeaveCancelled:Or,onBeforeAppear:Or,onAppear:Or,onAfterAppear:Or,onAppearCancelled:Or},Nr=e=>{const t=e.subTree;return t.component?Nr(t.component):t},Pr={name:"BaseTransition",props:xr,setup(e,{slots:t}){const n=fa(),r=Ar();return()=>{const i=t.default&&jr(t.default(),!0);if(!i||!i.length)return;const o=Dr(i),s=$t(e),{mode:a}=s;if(r.isLeaving)return Ur(o);const c=Vr(o);if(!c)return Ur(o);let d=Mr(c,s,r,n,(e=>d=e));c.type!==Ls&&Fr(c,d);const l=n.subTree,h=l&&Vr(l);if(h&&h.type!==Ls&&!qs(c,h)&&Nr(n).type!==Ls){const e=Mr(h,s,r,n);if(Fr(h,e),"out-in"===a&&c.type!==Ls)return r.isLeaving=!0,e.afterLeave=()=>{r.isLeaving=!1,8&n.job.flags||n.update(),delete e.afterLeave},Ur(o);"in-out"===a&&c.type!==Ls&&(e.delayLeave=(e,t,n)=>{kr(r,h)[String(h.key)]=h,e[wr]=()=>{t(),e[wr]=void 0,delete d.delayedLeave},d.delayedLeave=n})}return o}}};function Dr(e){let t=e[0];if(e.length>1){let n=!1;for(const r of e)if(r.type!==Ls){0,t=r,n=!0;break}}return t}const Lr=Pr;function kr(e,t){const{leavingVNodes:n}=e;let r=n.get(t.type);return r||(r=Object.create(null),n.set(t.type,r)),r}function Mr(e,t,n,r,i){const{appear:o,mode:s,persisted:a=!1,onBeforeEnter:c,onEnter:d,onAfterEnter:l,onEnterCancelled:h,onBeforeLeave:u,onLeave:f,onAfterLeave:m,onLeaveCancelled:g,onBeforeAppear:_,onAppear:E,onAfterAppear:y,onAppearCancelled:v}=t,b=String(e.key),S=kr(n,e),T=(e,t)=>{e&&Vn(e,r,9,t)},R=(e,t)=>{const n=t[1];T(e,t),p(e)?e.every((e=>e.length<=1))&&n():e.length<=1&&n()},C={mode:s,persisted:a,beforeEnter(t){let r=c;if(!n.isMounted){if(!o)return;r=_||c}t[wr]&&t[wr](!0);const i=S[b];i&&qs(e,i)&&i.el[wr]&&i.el[wr](),T(r,[t])},enter(e){let t=d,r=l,i=h;if(!n.isMounted){if(!o)return;t=E||d,r=y||l,i=v||h}let s=!1;const a=e[Ir]=t=>{s||(s=!0,T(t?i:r,[e]),C.delayedLeave&&C.delayedLeave(),e[Ir]=void 0)};t?R(t,[e,a]):a()},leave(t,r){const i=String(e.key);if(t[Ir]&&t[Ir](!0),n.isUnmounting)return r();T(u,[t]);let o=!1;const s=t[wr]=n=>{o||(o=!0,r(),T(n?g:m,[t]),t[wr]=void 0,S[i]===e&&delete S[i])};S[i]=e,f?R(f,[t,s]):s()},clone(e){const o=Mr(e,t,n,r,i);return i&&i(o),o}};return C}function Ur(e){if(hi(e))return(e=ta(e)).children=null,e}function Vr(e){if(!hi(e))return gr(e.type)&&e.children?Dr(e.children):e;const{shapeFlag:t,children:n}=e;if(n){if(16&t)return n[0];if(32&t&&_(n.default))return n.default()}}function Fr(e,t){6&e.shapeFlag&&e.component?(e.transition=t,Fr(e.component.subTree,t)):128&e.shapeFlag?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function jr(e,t=!1,n){let r=[],i=0;for(let o=0;o<e.length;o++){let s=e[o];const a=null==n?s.key:String(n)+String(null!=s.key?s.key:o);s.type===Ps?(128&s.patchFlag&&i++,r=r.concat(jr(s.children,t,a))):(t||s.type!==Ls)&&r.push(null!=a?ta(s,{key:a}):s)}if(i>1)for(let e=0;e<r.length;e++)r[e].patchFlag=-2;return r}function Br(e,t){return _(e)?(()=>d({name:e.name},t,{setup:e}))():e}function Gr(){const e=fa();if(e)return(e.appContext.config.idPrefix||"v")+"-"+e.ids[0]+e.ids[1]++}function Hr(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function Wr(e){const t=fa(),n=on(null);if(t){const i=t.refs===r?t.refs={}:t.refs;Object.defineProperty(i,e,{enumerable:!0,get:()=>n.value,set:e=>n.value=e})}else 0;return n}function Kr(e,t,n,i,o=!1){if(p(e))return void e.forEach(((e,r)=>Kr(e,t&&(p(t)?t[r]:t),n,i,o)));if(ci(i)&&!o)return;const s=4&i.shapeFlag?xa(i.component):i.el,a=o?null:s,{i:c,r:d}=e;const h=t&&t.r,f=c.refs===r?c.refs={}:c.refs,m=c.setupState,g=$t(m),y=m===r?()=>!1:e=>u(g,e);if(null!=h&&h!==d&&(E(h)?(f[h]=null,y(h)&&(m[h]=null)):nn(h)&&(h.value=null)),_(d))Un(d,c,12,[a,f]);else{const t=E(d),r=nn(d);if(t||r){const i=()=>{if(e.f){const n=t?y(d)?m[d]:f[d]:d.value;o?p(n)&&l(n,s):p(n)?n.includes(s)||n.push(s):t?(f[d]=[s],y(d)&&(m[d]=f[d])):(d.value=[s],e.k&&(f[e.k]=d.value))}else t?(f[d]=a,y(d)&&(m[d]=a)):r&&(d.value=a,e.k&&(f[e.k]=a))};a?(i.id=-1,Yo(i,n)):i()}else 0}}let zr=!1;const qr=()=>{zr||(console.error("Hydration completed but contains mismatches."),zr=!0)},Yr=e=>{if(1===e.nodeType)return(e=>e.namespaceURI.includes("svg")&&"foreignObject"!==e.tagName)(e)?"svg":(e=>e.namespaceURI.includes("MathML"))(e)?"mathml":void 0},Jr=e=>8===e.nodeType;function Xr(e){const{mt:t,p:n,o:{patchProp:r,createText:i,nextSibling:o,parentNode:s,remove:c,insert:d,createComment:l}}=e,h=(n,r,a,c,l,y=!1)=>{y=y||!!r.dynamicChildren;const v=Jr(n)&&"["===n.data,b=()=>m(n,r,a,c,l,v),{type:S,ref:T,shapeFlag:R,patchFlag:C}=r;let w=n.nodeType;r.el=n,-2===C&&(y=!1,r.dynamicChildren=null);let I=null;switch(S){case Ds:3!==w?""===r.children?(d(r.el=i(""),s(n),n),I=n):I=b():(n.data!==r.children&&(__VUE_PROD_HYDRATION_MISMATCH_DETAILS__&&Nn("Hydration text mismatch in",n.parentNode,`\n  - rendered on server: ${JSON.stringify(n.data)}\n  - expected on client: ${JSON.stringify(r.children)}`),qr(),n.data=r.children),I=o(n));break;case Ls:E(n)?(I=o(n),_(r.el=n.content.firstChild,n,a)):I=8!==w||v?b():o(n);break;case ks:if(v&&(w=(n=o(n)).nodeType),1===w||3===w){I=n;const e=!r.children.length;for(let t=0;t<r.staticCount;t++)e&&(r.children+=1===I.nodeType?I.outerHTML:I.data),t===r.staticCount-1&&(r.anchor=I),I=o(I);return v?o(I):I}b();break;case Ps:I=v?f(n,r,a,c,l,y):b();break;default:if(1&R)I=1===w&&r.type.toLowerCase()===n.tagName.toLowerCase()||E(n)?u(n,r,a,c,l,y):b();else if(6&R){r.slotScopeIds=l;const e=s(n);if(I=v?g(n):Jr(n)&&"teleport start"===n.data?g(n,n.data,"teleport end"):o(n),t(r,e,null,a,c,Yr(e),y),ci(r)){let t;v?(t=$s(Ps),t.anchor=I?I.previousSibling:e.lastChild):t=3===n.nodeType?na(""):$s("div"),t.el=n,r.component.subTree=t}}else 64&R?I=8!==w?b():r.type.hydrate(n,r,a,c,l,y,e,p):128&R?I=r.type.hydrate(n,r,a,c,Yr(s(n)),l,y,e,h):__VUE_PROD_HYDRATION_MISMATCH_DETAILS__&&Nn("Invalid HostVNode type:",S,`(${typeof S})`)}return null!=T&&Kr(T,null,c,r),I},u=(e,t,n,i,o,s)=>{s=s||!!t.dynamicChildren;const{type:d,props:l,patchFlag:h,shapeFlag:u,dirs:f,transition:m}=t,g="input"===d||"option"===d;if(g||-1!==h){f&&fr(t,null,n,"created");let d,y=!1;if(E(e)){y=es(i,m)&&n&&n.vnode.props&&n.vnode.props.appear;const r=e.content.firstChild;y&&m.beforeEnter(r),_(r,e,n),t.el=e=r}if(16&u&&(!l||!l.innerHTML&&!l.textContent)){let r=p(e.firstChild,t,e,n,i,o,s),a=!1;for(;r;){ri(e,1)||(__VUE_PROD_HYDRATION_MISMATCH_DETAILS__&&!a&&(Nn("Hydration children mismatch on",e,"\nServer rendered element contains more child nodes than client vdom."),a=!0),qr());const t=r;r=r.nextSibling,c(t)}}else if(8&u){let n=t.children;"\n"!==n[0]||"PRE"!==e.tagName&&"TEXTAREA"!==e.tagName||(n=n.slice(1)),e.textContent!==n&&(ri(e,0)||(__VUE_PROD_HYDRATION_MISMATCH_DETAILS__&&Nn("Hydration text content mismatch on",e,`\n  - rendered on server: ${e.textContent}\n  - expected on client: ${t.children}`),qr()),e.textContent=t.children)}if(l)if(__VUE_PROD_HYDRATION_MISMATCH_DETAILS__||g||!s||48&h){const i=e.tagName.includes("-");for(const o in l)!__VUE_PROD_HYDRATION_MISMATCH_DETAILS__||f&&f.some((e=>e.dir.created))||!Qr(e,o,l[o],t,n)||qr(),(g&&(o.endsWith("value")||"indeterminate"===o)||a(o)&&!I(o)||"."===o[0]||i)&&r(e,o,null,l[o],void 0,n)}else if(l.onClick)r(e,"onClick",null,l.onClick,void 0,n);else if(4&h&&Yt(l.style))for(const e in l.style)l.style[e];(d=l&&l.onVnodeBeforeMount)&&da(d,n,t),f&&fr(t,null,n,"beforeMount"),((d=l&&l.onVnodeMounted)||f||y)&&xs((()=>{d&&da(d,n,t),y&&m.enter(e),f&&fr(t,null,n,"mounted")}),i)}return e.nextSibling},p=(e,t,r,s,a,c,l)=>{l=l||!!t.dynamicChildren;const u=t.children,p=u.length;let f=!1;for(let t=0;t<p;t++){const m=l?u[t]:u[t]=oa(u[t]),g=m.type===Ds;e?(g&&!l&&t+1<p&&oa(u[t+1]).type===Ds&&(d(i(e.data.slice(m.children.length)),r,o(e)),e.data=m.children),e=h(e,m,s,a,c,l)):g&&!m.children?d(m.el=i(""),r):(ri(r,1)||(__VUE_PROD_HYDRATION_MISMATCH_DETAILS__&&!f&&(Nn("Hydration children mismatch on",r,"\nServer rendered element contains fewer child nodes than client vdom."),f=!0),qr()),n(null,m,r,null,s,a,Yr(r),c))}return e},f=(e,t,n,r,i,a)=>{const{slotScopeIds:c}=t;c&&(i=i?i.concat(c):c);const h=s(e),u=p(o(e),t,h,n,r,i,a);return u&&Jr(u)&&"]"===u.data?o(t.anchor=u):(qr(),d(t.anchor=l("]"),h,u),u)},m=(e,t,r,i,a,d)=>{if(ri(e.parentElement,1)||(__VUE_PROD_HYDRATION_MISMATCH_DETAILS__&&Nn("Hydration node mismatch:\n- rendered on server:",e,3===e.nodeType?"(text)":Jr(e)&&"["===e.data?"(start of fragment)":"","\n- expected on client:",t.type),qr()),t.el=null,d){const t=g(e);for(;;){const n=o(e);if(!n||n===t)break;c(n)}}const l=o(e),h=s(e);return c(e),n(null,t,h,l,r,i,Yr(h),a),l},g=(e,t="[",n="]")=>{let r=0;for(;e;)if((e=o(e))&&Jr(e)&&(e.data===t&&r++,e.data===n)){if(0===r)return o(e);r--}return e},_=(e,t,n)=>{const r=t.parentNode;r&&r.replaceChild(e,t);let i=n;for(;i;)i.vnode.el===t&&(i.vnode.el=i.subTree.el=e),i=i.parent},E=e=>1===e.nodeType&&"TEMPLATE"===e.tagName;return[(e,t)=>{if(!t.hasChildNodes())return __VUE_PROD_HYDRATION_MISMATCH_DETAILS__&&Nn("Attempting to hydrate existing markup but container is empty. Performing full mount instead."),n(null,e,t),er(),void(t._vnode=e);h(t.firstChild,e,null,null,null),er(),t._vnode=e},h]}function Qr(e,t,n,r,i){let o,s,a,c;if("class"===t)a=e.getAttribute("class"),c=J(n),function(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}($r(a||""),$r(c))||(o=2,s="class");else if("style"===t){a=e.getAttribute("style")||"",c=E(n)?n:function(e){let t="";if(!e||E(e))return t;for(const n in e){const r=e[n];(E(r)||"number"==typeof r)&&(t+=`${n.startsWith("--")?n:D(n)}:${r};`)}return t}(W(n));const t=Zr(a),d=Zr(c);if(r.dirs)for(const{dir:e,value:t}of r.dirs)"show"!==e.name||t||d.set("display","none");i&&ei(i,r,d),function(e,t){if(e.size!==t.size)return!1;for(const[n,r]of e)if(r!==t.get(n))return!1;return!0}(t,d)||(o=3,s="style")}else(e instanceof SVGElement&&ae(t)||e instanceof HTMLElement&&(ie(t)||se(t)))&&(ie(t)?(a=e.hasAttribute(t),c=oe(n)):null==n?(a=e.hasAttribute(t),c=!1):(a=e.hasAttribute(t)?e.getAttribute(t):"value"===t&&"TEXTAREA"===e.tagName&&e.value,c=!!function(e){if(null==e)return!1;const t=typeof e;return"string"===t||"number"===t||"boolean"===t}(n)&&String(n)),a!==c&&(o=4,s=t));if(null!=o&&!ri(e,o)){const t=e=>!1===e?"(not rendered)":`${s}="${e}"`;return Nn(`Hydration ${ni[o]} mismatch on`,e,`\n  - rendered on server: ${t(a)}\n  - expected on client: ${t(c)}\n  Note: this mismatch is check-only. The DOM will not be rectified in production due to performance overhead.\n  You should fix the source of the mismatch.`),!0}return!1}function $r(e){return new Set(e.trim().split(/\s+/))}function Zr(e){const t=new Map;for(const n of e.split(";")){let[e,r]=n.split(":");e=e.trim(),r=r&&r.trim(),e&&r&&t.set(e,r)}return t}function ei(e,t,n){const r=e.subTree;if(e.getCssVars&&(t===r||r&&r.type===Ps&&r.children.includes(t))){const t=e.getCssVars();for(const e in t)n.set(`--${de(e,!1)}`,String(t[e]))}t===r&&e.parent&&ei(e.parent,e.vnode,n)}const ti="data-allow-mismatch",ni={0:"text",1:"children",2:"class",3:"style",4:"attribute"};function ri(e,t){if(0===t||1===t)for(;e&&!e.hasAttribute(ti);)e=e.parentElement;const n=e&&e.getAttribute(ti);if(null==n)return!1;if(""===n)return!0;{const e=n.split(",");return!(0!==t||!e.includes("children"))||n.split(",").includes(ni[t])}}const ii=(e=1e4)=>t=>{const n=requestIdleCallback(t,{timeout:e});return()=>cancelIdleCallback(n)},oi=e=>(t,n)=>{const r=new IntersectionObserver((e=>{for(const n of e)if(n.isIntersecting){r.disconnect(),t();break}}),e);return n((e=>r.observe(e))),()=>r.disconnect()},si=e=>t=>{if(e){const n=matchMedia(e);if(!n.matches)return n.addEventListener("change",t,{once:!0}),()=>n.removeEventListener("change",t);t()}},ai=(e=[])=>(t,n)=>{E(e)&&(e=[e]);let r=!1;const i=e=>{r||(r=!0,o(),t(),e.target.dispatchEvent(new e.constructor(e.type,e)))},o=()=>{n((t=>{for(const n of e)t.removeEventListener(n,i)}))};return n((t=>{for(const n of e)t.addEventListener(n,i,{once:!0})})),o};const ci=e=>!!e.type.__asyncLoader;function di(e){_(e)&&(e={loader:e});const{loader:t,loadingComponent:n,errorComponent:r,delay:i=200,hydrate:o,timeout:s,suspensible:a=!0,onError:c}=e;let d,l=null,h=0;const u=()=>{let e;return l||(e=l=t().catch((e=>{if(e=e instanceof Error?e:new Error(String(e)),c)return new Promise(((t,n)=>{c(e,(()=>t((h++,l=null,u()))),(()=>n(e)),h+1)}));throw e})).then((t=>e!==l&&l?l:(t&&(t.__esModule||"Module"===t[Symbol.toStringTag])&&(t=t.default),d=t,t))))};return Br({name:"AsyncComponentWrapper",__asyncLoader:u,__asyncHydrate(e,t,n){const r=o?()=>{const r=o(n,(t=>function(e,t){if(Jr(e)&&"["===e.data){let n=1,r=e.nextSibling;for(;r;){if(1===r.nodeType)t(r);else if(Jr(r))if("]"===r.data){if(0==--n)break}else"["===r.data&&n++;r=r.nextSibling}}else t(e)}(e,t)));r&&(t.bum||(t.bum=[])).push(r)}:n;d?r():u().then((()=>!t.isUnmounted&&r()))},get __asyncResolved(){return d},setup(){const e=pa;if(Hr(e),d)return()=>li(d,e);const t=t=>{l=null,Fn(t,e,13,!r)};if(a&&e.suspense||Sa)return u().then((t=>()=>li(t,e))).catch((e=>(t(e),()=>r?$s(r,{error:e}):null)));const o=rn(!1),c=rn(),h=rn(!!i);return i&&setTimeout((()=>{h.value=!1}),i),null!=s&&setTimeout((()=>{if(!o.value&&!c.value){const e=new Error(`Async component timed out after ${s}ms.`);t(e),c.value=e}}),s),u().then((()=>{o.value=!0,e.parent&&hi(e.parent.vnode)&&e.parent.update()})).catch((e=>{t(e),c.value=e})),()=>o.value&&d?li(d,e):c.value&&r?$s(r,{error:c.value}):n&&!h.value?$s(n):void 0}})}function li(e,t){const{ref:n,props:r,children:i,ce:o}=t.vnode,s=$s(e,r,i);return s.ref=n,s.ce=o,delete t.vnode.ce,s}const hi=e=>e.type.__isKeepAlive,ui={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(e,{slots:t}){const n=fa(),r=n.ctx;if(!r.renderer)return()=>{const e=t.default&&t.default();return e&&1===e.length?e[0]:e};const i=new Map,o=new Set;let s=null;const a=n.suspense,{renderer:{p:c,m:d,um:l,o:{createElement:h}}}=r,u=h("div");function p(e){yi(e),l(e,n,a,!0)}function f(e){i.forEach(((t,n)=>{const r=Da(t.type);r&&!e(r)&&m(n)}))}function m(e){const t=i.get(e);!t||s&&qs(t,s)?s&&yi(s):p(t),i.delete(e),o.delete(e)}r.activate=(e,t,n,r,i)=>{const o=e.component;d(e,t,n,0,a),c(o.vnode,e,t,n,o,a,r,e.slotScopeIds,i),Yo((()=>{o.isDeactivated=!1,o.a&&U(o.a);const t=e.props&&e.props.onVnodeMounted;t&&da(t,o.parent,e)}),a)},r.deactivate=e=>{const t=e.component;rs(t.m),rs(t.a),d(e,u,null,1,a),Yo((()=>{t.da&&U(t.da);const n=e.props&&e.props.onVnodeUnmounted;n&&da(n,t.parent,e),t.isDeactivated=!0}),a)},ds((()=>[e.include,e.exclude]),(([e,t])=>{e&&f((t=>fi(e,t))),t&&f((e=>!fi(t,e)))}),{flush:"post",deep:!0});let g=null;const _=()=>{null!=g&&(Rs(n.subTree.type)?Yo((()=>{i.set(g,vi(n.subTree))}),n.subTree.suspense):i.set(g,vi(n.subTree)))};return Ri(_),wi(_),Ii((()=>{i.forEach((e=>{const{subTree:t,suspense:r}=n,i=vi(t);if(e.type!==i.type||e.key!==i.key)p(e);else{yi(i);const e=i.component.da;e&&Yo(e,r)}}))})),()=>{if(g=null,!t.default)return s=null;const n=t.default(),r=n[0];if(n.length>1)return s=null,n;if(!(zs(r)&&(4&r.shapeFlag||128&r.shapeFlag)))return s=null,r;let a=vi(r);if(a.type===Ls)return s=null,a;const c=a.type,d=Da(ci(a)?a.type.__asyncResolved||{}:c),{include:l,exclude:h,max:u}=e;if(l&&(!d||!fi(l,d))||h&&d&&fi(h,d))return a.shapeFlag&=-257,s=a,r;const p=null==a.key?c:a.key,f=i.get(p);return a.el&&(a=ta(a),128&r.shapeFlag&&(r.ssContent=a)),g=p,f?(a.el=f.el,a.component=f.component,a.transition&&Fr(a,a.transition),a.shapeFlag|=512,o.delete(p),o.add(p)):(o.add(p),u&&o.size>parseInt(u,10)&&m(o.values().next().value)),a.shapeFlag|=256,s=a,Rs(r.type)?r:a}}},pi=ui;function fi(e,t){return p(e)?e.some((e=>fi(e,t))):E(e)?e.split(",").includes(t):"[object RegExp]"===T(e)&&(e.lastIndex=0,e.test(t))}function mi(e,t){_i(e,"a",t)}function gi(e,t){_i(e,"da",t)}function _i(e,t,n=pa){const r=e.__wdc||(e.__wdc=()=>{let t=n;for(;t;){if(t.isDeactivated)return;t=t.parent}return e()});if(bi(t,r,n),n){let e=n.parent;for(;e&&e.parent;)hi(e.parent.vnode)&&Ei(r,t,n,e),e=e.parent}}function Ei(e,t,n,r){const i=bi(t,e,r,!0);Ai((()=>{l(r[t],i)}),n)}function yi(e){e.shapeFlag&=-257,e.shapeFlag&=-513}function vi(e){return 128&e.shapeFlag?e.ssContent:e}function bi(e,t,n=pa,r=!1){if(n){const i=n[e]||(n[e]=[]),o=t.__weh||(t.__weh=(...r)=>{Fe();const i=_a(n),o=Vn(t,n,e,r);return i(),je(),o});return r?i.unshift(o):i.push(o),o}}const Si=e=>(t,n=pa)=>{Sa&&"sp"!==e||bi(e,((...e)=>t(...e)),n)},Ti=Si("bm"),Ri=Si("m"),Ci=Si("bu"),wi=Si("u"),Ii=Si("bum"),Ai=Si("um"),Oi=Si("sp"),xi=Si("rtg"),Ni=Si("rtc");function Pi(e,t=pa){bi("ec",e,t)}const Di="components",Li="directives";function ki(e,t){return Fi(Di,e,!0,t)||e}const Mi=Symbol.for("v-ndc");function Ui(e){return E(e)?Fi(Di,e,!1)||e:e||Mi}function Vi(e){return Fi(Li,e)}function Fi(e,t,n=!0,r=!1){const i=sr||pa;if(i){const n=i.type;if(e===Di){const e=Da(n,!1);if(e&&(e===t||e===N(t)||e===L(N(t))))return n}const o=ji(i[e]||n[e],t)||ji(i.appContext[e],t);return!o&&r?n:o}}function ji(e,t){return e&&(e[t]||e[N(t)]||e[L(N(t))])}function Bi(e,t,n,r){let i;const o=n&&n[r],s=p(e);if(s||E(e)){let n=!1;s&&Yt(e)&&(n=!Xt(e),e=Ze(e)),i=new Array(e.length);for(let r=0,s=e.length;r<s;r++)i[r]=t(n?en(e[r]):e[r],r,void 0,o&&o[r])}else if("number"==typeof e){0,i=new Array(e);for(let n=0;n<e;n++)i[n]=t(n+1,n,void 0,o&&o[n])}else if(v(e))if(e[Symbol.iterator])i=Array.from(e,((e,n)=>t(e,n,void 0,o&&o[n])));else{const n=Object.keys(e);i=new Array(n.length);for(let r=0,s=n.length;r<s;r++){const s=n[r];i[r]=t(e[s],s,r,o&&o[r])}}else i=[];return n&&(n[r]=i),i}function Gi(e,t){for(let n=0;n<t.length;n++){const r=t[n];if(p(r))for(let t=0;t<r.length;t++)e[r[t].name]=r[t].fn;else r&&(e[r.name]=r.key?(...e)=>{const t=r.fn(...e);return t&&(t.key=r.key),t}:r.fn)}return e}function Hi(e,t,n={},r,i){if(sr.ce||sr.parent&&ci(sr.parent)&&sr.parent.ce)return"default"!==t&&(n.name=t),Vs(),Ks(Ps,null,[$s("slot",n,r&&r())],64);let o=e[t];o&&o._c&&(o._d=!1),Vs();const s=o&&Wi(o(n)),a=Ks(Ps,{key:(n.key||s&&s.key||`_${t}`)+(!s&&r?"_fb":"")},s||(r?r():[]),s&&1===e._?64:-2);return!i&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),o&&o._c&&(o._d=!0),a}function Wi(e){return e.some((e=>!zs(e)||e.type!==Ls&&!(e.type===Ps&&!Wi(e.children))))?e:null}function Ki(e,t){const n={};for(const r in e)n[t&&/[A-Z]/.test(r)?`on:${r}`:k(r)]=e[r];return n}const zi=e=>e?ya(e)?xa(e):zi(e.parent):null,qi=d(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>zi(e.parent),$root:e=>zi(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>_o(e),$forceUpdate:e=>e.f||(e.f=()=>{Xn(e.update)}),$nextTick:e=>e.n||(e.n=Jn.bind(e.proxy)),$watch:e=>hs.bind(e)}),Yi=(e,t)=>e!==r&&!e.__isScriptSetup&&u(e,t),Ji={get({_:e},t){if("__v_skip"===t)return!0;const{ctx:n,setupState:i,data:o,props:s,accessCache:a,type:c,appContext:d}=e;let l;if("$"!==t[0]){const c=a[t];if(void 0!==c)switch(c){case 1:return i[t];case 2:return o[t];case 4:return n[t];case 3:return s[t]}else{if(Yi(i,t))return a[t]=1,i[t];if(o!==r&&u(o,t))return a[t]=2,o[t];if((l=e.propsOptions[0])&&u(l,t))return a[t]=3,s[t];if(n!==r&&u(n,t))return a[t]=4,n[t];po&&(a[t]=0)}}const h=qi[t];let p,f;return h?("$attrs"===t&&Xe(e.attrs,0,""),h(e)):(p=c.__cssModules)&&(p=p[t])?p:n!==r&&u(n,t)?(a[t]=4,n[t]):(f=d.config.globalProperties,u(f,t)?f[t]:void 0)},set({_:e},t,n){const{data:i,setupState:o,ctx:s}=e;return Yi(o,t)?(o[t]=n,!0):i!==r&&u(i,t)?(i[t]=n,!0):!u(e.props,t)&&(("$"!==t[0]||!(t.slice(1)in e))&&(s[t]=n,!0))},has({_:{data:e,setupState:t,accessCache:n,ctx:i,appContext:o,propsOptions:s}},a){let c;return!!n[a]||e!==r&&u(e,a)||Yi(t,a)||(c=s[0])&&u(c,a)||u(i,a)||u(qi,a)||u(o.config.globalProperties,a)},defineProperty(e,t,n){return null!=n.get?e._.accessCache[t]=0:u(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};const Xi=d({},Ji,{get(e,t){if(t!==Symbol.unscopables)return Ji.get(e,t,e)},has:(e,t)=>"_"!==t[0]&&!H(t)});function Qi(){return null}function $i(){return null}function Zi(e){0}function eo(e){0}function to(){return null}function no(){0}function ro(e,t){return null}function io(){return so().slots}function oo(){return so().attrs}function so(){const e=fa();return e.setupContext||(e.setupContext=Oa(e))}function ao(e){return p(e)?e.reduce(((e,t)=>(e[t]=null,e)),{}):e}function co(e,t){const n=ao(e);for(const e in t){if(e.startsWith("__skip"))continue;let r=n[e];r?p(r)||_(r)?r=n[e]={type:r,default:t[e]}:r.default=t[e]:null===r&&(r=n[e]={default:t[e]}),r&&t[`__skip_${e}`]&&(r.skipFactory=!0)}return n}function lo(e,t){return e&&t?p(e)&&p(t)?e.concat(t):d({},ao(e),ao(t)):e||t}function ho(e,t){const n={};for(const r in e)t.includes(r)||Object.defineProperty(n,r,{enumerable:!0,get:()=>e[r]});return n}function uo(e){const t=fa();let n=e();return Ea(),b(n)&&(n=n.catch((e=>{throw _a(t),e}))),[n,()=>_a(t)]}let po=!0;function fo(e){const t=_o(e),n=e.proxy,r=e.ctx;po=!1,t.beforeCreate&&mo(t.beforeCreate,e,"bc");const{data:i,computed:s,methods:a,watch:c,provide:d,inject:l,created:h,beforeMount:u,mounted:f,beforeUpdate:m,updated:g,activated:E,deactivated:y,beforeDestroy:b,beforeUnmount:S,destroyed:T,unmounted:R,render:C,renderTracked:w,renderTriggered:I,errorCaptured:A,serverPrefetch:O,expose:x,inheritAttrs:N,components:P,directives:D,filters:L}=t;if(l&&function(e,t){p(e)&&(e=bo(e));for(const n in e){const r=e[n];let i;i=v(r)?"default"in r?xo(r.from||n,r.default,!0):xo(r.from||n):xo(r),nn(i)?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>i.value,set:e=>i.value=e}):t[n]=i}}(l,r,null),a)for(const e in a){const t=a[e];_(t)&&(r[e]=t.bind(n))}if(i){0;const t=i.call(n,n);0,v(t)&&(e.data=Ht(t))}if(po=!0,s)for(const e in s){const t=s[e],i=_(t)?t.bind(n,n):_(t.get)?t.get.bind(n,n):o;0;const a=!_(t)&&_(t.set)?t.set.bind(n):o,c=Ma({get:i,set:a});Object.defineProperty(r,e,{enumerable:!0,configurable:!0,get:()=>c.value,set:e=>c.value=e})}if(c)for(const e in c)go(c[e],r,n,e);if(d){const e=_(d)?d.call(n):d;Reflect.ownKeys(e).forEach((t=>{Oo(t,e[t])}))}function k(e,t){p(t)?t.forEach((t=>e(t.bind(n)))):t&&e(t.bind(n))}if(h&&mo(h,e,"c"),k(Ti,u),k(Ri,f),k(Ci,m),k(wi,g),k(mi,E),k(gi,y),k(Pi,A),k(Ni,w),k(xi,I),k(Ii,S),k(Ai,R),k(Oi,O),p(x))if(x.length){const t=e.exposed||(e.exposed={});x.forEach((e=>{Object.defineProperty(t,e,{get:()=>n[e],set:t=>n[e]=t})}))}else e.exposed||(e.exposed={});C&&e.render===o&&(e.render=C),null!=N&&(e.inheritAttrs=N),P&&(e.components=P),D&&(e.directives=D),O&&Hr(e)}function mo(e,t,n){Vn(p(e)?e.map((e=>e.bind(t.proxy))):e.bind(t.proxy),t,n)}function go(e,t,n,r){let i=r.includes(".")?us(n,r):()=>n[r];if(E(e)){const n=t[e];_(n)&&ds(i,n)}else if(_(e))ds(i,e.bind(n));else if(v(e))if(p(e))e.forEach((e=>go(e,t,n,r)));else{const r=_(e.handler)?e.handler.bind(n):t[e.handler];_(r)&&ds(i,r,e)}else 0}function _o(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:i,optionsCache:o,config:{optionMergeStrategies:s}}=e.appContext,a=o.get(t);let c;return a?c=a:i.length||n||r?(c={},i.length&&i.forEach((e=>Eo(c,e,s,!0))),Eo(c,t,s)):c=t,v(t)&&o.set(t,c),c}function Eo(e,t,n,r=!1){const{mixins:i,extends:o}=t;o&&Eo(e,o,n,!0),i&&i.forEach((t=>Eo(e,t,n,!0)));for(const i in t)if(r&&"expose"===i);else{const r=yo[i]||n&&n[i];e[i]=r?r(e[i],t[i]):t[i]}return e}const yo={data:vo,props:Ro,emits:Ro,methods:To,computed:To,beforeCreate:So,created:So,beforeMount:So,mounted:So,beforeUpdate:So,updated:So,beforeDestroy:So,beforeUnmount:So,destroyed:So,unmounted:So,activated:So,deactivated:So,errorCaptured:So,serverPrefetch:So,components:To,directives:To,watch:function(e,t){if(!e)return t;if(!t)return e;const n=d(Object.create(null),e);for(const r in t)n[r]=So(e[r],t[r]);return n},provide:vo,inject:function(e,t){return To(bo(e),bo(t))}};function vo(e,t){return t?e?function(){return d(_(e)?e.call(this,this):e,_(t)?t.call(this,this):t)}:t:e}function bo(e){if(p(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function So(e,t){return e?[...new Set([].concat(e,t))]:t}function To(e,t){return e?d(Object.create(null),e,t):t}function Ro(e,t){return e?p(e)&&p(t)?[...new Set([...e,...t])]:d(Object.create(null),ao(e),ao(null!=t?t:{})):t}function Co(){return{app:null,config:{isNativeTag:s,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let wo=0;function Io(e,t){return function(n,r=null){_(n)||(n=d({},n)),null==r||v(r)||(r=null);const i=Co(),o=new WeakSet,s=[];let a=!1;const c=i.app={_uid:wo++,_component:n,_props:r,_container:null,_context:i,_instance:null,version:Ba,get config(){return i.config},set config(e){0},use:(e,...t)=>(o.has(e)||(e&&_(e.install)?(o.add(e),e.install(c,...t)):_(e)&&(o.add(e),e(c,...t))),c),mixin:e=>(i.mixins.includes(e)||i.mixins.push(e),c),component:(e,t)=>t?(i.components[e]=t,c):i.components[e],directive:(e,t)=>t?(i.directives[e]=t,c):i.directives[e],mount(o,s,d){if(!a){0;const l=c._ceVNode||$s(n,r);return l.appContext=i,!0===d?d="svg":!1===d&&(d=void 0),s&&t?t(l,o):e(l,o,d),a=!0,c._container=o,o.__vue_app__=c,xa(l.component)}},onUnmount(e){s.push(e)},unmount(){a&&(Vn(s,c._instance,16),e(null,c._container),delete c._container.__vue_app__)},provide:(e,t)=>(i.provides[e]=t,c),runWithContext(e){const t=Ao;Ao=c;try{return e()}finally{Ao=t}}};return c}}let Ao=null;function Oo(e,t){if(pa){let n=pa.provides;const r=pa.parent&&pa.parent.provides;r===n&&(n=pa.provides=Object.create(r)),n[e]=t}else 0}function xo(e,t,n=!1){const r=pa||sr;if(r||Ao){const i=Ao?Ao._context.provides:r?null==r.parent?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(i&&e in i)return i[e];if(arguments.length>1)return n&&_(t)?t.call(r&&r.proxy):t}else 0}function No(){return!!(pa||sr||Ao)}const Po={},Do=()=>Object.create(Po),Lo=e=>Object.getPrototypeOf(e)===Po;function ko(e,t,n,i){const[o,s]=e.propsOptions;let a,c=!1;if(t)for(let r in t){if(I(r))continue;const d=t[r];let l;o&&u(o,l=N(r))?s&&s.includes(l)?(a||(a={}))[l]=d:n[l]=d:_s(e.emitsOptions,r)||r in i&&d===i[r]||(i[r]=d,c=!0)}if(s){const t=$t(n),i=a||r;for(let r=0;r<s.length;r++){const a=s[r];n[a]=Mo(o,t,a,i[a],e,!u(i,a))}}return c}function Mo(e,t,n,r,i,o){const s=e[n];if(null!=s){const e=u(s,"default");if(e&&void 0===r){const e=s.default;if(s.type!==Function&&!s.skipFactory&&_(e)){const{propsDefaults:o}=i;if(n in o)r=o[n];else{const s=_a(i);r=o[n]=e.call(null,t),s()}}else r=e;i.ce&&i.ce._setProp(n,r)}s[0]&&(o&&!e?r=!1:!s[1]||""!==r&&r!==D(n)||(r=!0))}return r}const Uo=new WeakMap;function Vo(e,t,n=!1){const o=n?Uo:t.propsCache,s=o.get(e);if(s)return s;const a=e.props,c={},l=[];let h=!1;if(!_(e)){const r=e=>{h=!0;const[n,r]=Vo(e,t,!0);d(c,n),r&&l.push(...r)};!n&&t.mixins.length&&t.mixins.forEach(r),e.extends&&r(e.extends),e.mixins&&e.mixins.forEach(r)}if(!a&&!h)return v(e)&&o.set(e,i),i;if(p(a))for(let e=0;e<a.length;e++){0;const t=N(a[e]);Fo(t)&&(c[t]=r)}else if(a){0;for(const e in a){const t=N(e);if(Fo(t)){const n=a[e],r=c[t]=p(n)||_(n)?{type:n}:d({},n),i=r.type;let o=!1,s=!0;if(p(i))for(let e=0;e<i.length;++e){const t=i[e],n=_(t)&&t.name;if("Boolean"===n){o=!0;break}"String"===n&&(s=!1)}else o=_(i)&&"Boolean"===i.name;r[0]=o,r[1]=s,(o||u(r,"default"))&&l.push(t)}}}const f=[c,l];return v(e)&&o.set(e,f),f}function Fo(e){return"$"!==e[0]&&!I(e)}const jo=e=>"_"===e[0]||"$stable"===e,Bo=e=>p(e)?e.map(oa):[oa(e)],Go=(e,t,n)=>{if(t._n)return t;const r=ur(((...e)=>Bo(t(...e))),n);return r._c=!1,r},Ho=(e,t,n)=>{const r=e._ctx;for(const n in e){if(jo(n))continue;const i=e[n];if(_(i))t[n]=Go(0,i,r);else if(null!=i){0;const e=Bo(i);t[n]=()=>e}}},Wo=(e,t)=>{const n=Bo(t);e.slots.default=()=>n},Ko=(e,t,n)=>{for(const r in t)(n||"_"!==r)&&(e[r]=t[r])},zo=(e,t,n)=>{const r=e.slots=Do();if(32&e.vnode.shapeFlag){const e=t._;e?(Ko(r,t,n),n&&V(r,"_",e,!0)):Ho(t,r)}else t&&Wo(e,t)},qo=(e,t,n)=>{const{vnode:i,slots:o}=e;let s=!0,a=r;if(32&i.shapeFlag){const e=t._;e?n&&1===e?s=!1:Ko(o,t,n):(s=!t.$stable,Ho(t,o)),a=t}else t&&(Wo(e,t),a={default:1});if(s)for(const e in o)jo(e)||null!=a[e]||delete o[e]};const Yo=xs;function Jo(e){return Qo(e)}function Xo(e){return Qo(e,Xr)}function Qo(e,t){"boolean"!=typeof __VUE_PROD_HYDRATION_MISMATCH_DETAILS__&&(G().__VUE_PROD_HYDRATION_MISMATCH_DETAILS__=!1);G().__VUE__=!0;const{insert:n,remove:s,patchProp:a,createElement:c,createText:d,createComment:l,setText:h,setElementText:p,parentNode:f,nextSibling:m,setScopeId:g=o,insertStaticContent:_}=e,E=(e,t,n,r=null,i=null,o=null,s=void 0,a=null,c=!!t.dynamicChildren)=>{if(e===t)return;e&&!qs(e,t)&&(r=X(e),K(e,i,o,!0),e=null),-2===t.patchFlag&&(c=!1,t.dynamicChildren=null);const{type:d,ref:l,shapeFlag:h}=t;switch(d){case Ds:y(e,t,n,r);break;case Ls:v(e,t,n,r);break;case ks:null==e&&b(t,n,r,s);break;case Ps:P(e,t,n,r,i,o,s,a,c);break;default:1&h?T(e,t,n,r,i,o,s,a,c):6&h?L(e,t,n,r,i,o,s,a,c):(64&h||128&h)&&d.process(e,t,n,r,i,o,s,a,c,Z)}null!=l&&i&&Kr(l,e&&e.ref,o,t||e,!t)},y=(e,t,r,i)=>{if(null==e)n(t.el=d(t.children),r,i);else{const n=t.el=e.el;t.children!==e.children&&h(n,t.children)}},v=(e,t,r,i)=>{null==e?n(t.el=l(t.children||""),r,i):t.el=e.el},b=(e,t,n,r)=>{[e.el,e.anchor]=_(e.children,t,n,r,e.el,e.anchor)},S=({el:e,anchor:t})=>{let n;for(;e&&e!==t;)n=m(e),s(e),e=n;s(t)},T=(e,t,n,r,i,o,s,a,c)=>{"svg"===t.type?s="svg":"math"===t.type&&(s="mathml"),null==e?R(t,n,r,i,o,s,a,c):A(e,t,i,o,s,a,c)},R=(e,t,r,i,o,s,d,l)=>{let h,u;const{props:f,shapeFlag:m,transition:g,dirs:_}=e;if(h=e.el=c(e.type,s,f&&f.is,f),8&m?p(h,e.children):16&m&&w(e.children,h,null,i,o,$o(e,s),d,l),_&&fr(e,null,i,"created"),C(h,e,e.scopeId,d,i),f){for(const e in f)"value"===e||I(e)||a(h,e,null,f[e],s,i);"value"in f&&a(h,"value",null,f.value,s),(u=f.onVnodeBeforeMount)&&da(u,i,e)}_&&fr(e,null,i,"beforeMount");const E=es(o,g);E&&g.beforeEnter(h),n(h,t,r),((u=f&&f.onVnodeMounted)||E||_)&&Yo((()=>{u&&da(u,i,e),E&&g.enter(h),_&&fr(e,null,i,"mounted")}),o)},C=(e,t,n,r,i)=>{if(n&&g(e,n),r)for(let t=0;t<r.length;t++)g(e,r[t]);if(i){let n=i.subTree;if(t===n||Rs(n.type)&&(n.ssContent===t||n.ssFallback===t)){const t=i.vnode;C(e,t,t.scopeId,t.slotScopeIds,i.parent)}}},w=(e,t,n,r,i,o,s,a,c=0)=>{for(let d=c;d<e.length;d++){const c=e[d]=a?sa(e[d]):oa(e[d]);E(null,c,t,n,r,i,o,s,a)}},A=(e,t,n,i,o,s,c)=>{const d=t.el=e.el;let{patchFlag:l,dynamicChildren:h,dirs:u}=t;l|=16&e.patchFlag;const f=e.props||r,m=t.props||r;let g;if(n&&Zo(n,!1),(g=m.onVnodeBeforeUpdate)&&da(g,n,t,e),u&&fr(t,e,n,"beforeUpdate"),n&&Zo(n,!0),(f.innerHTML&&null==m.innerHTML||f.textContent&&null==m.textContent)&&p(d,""),h?O(e.dynamicChildren,h,d,n,i,$o(t,o),s):c||j(e,t,d,null,n,i,$o(t,o),s,!1),l>0){if(16&l)x(d,f,m,n,o);else if(2&l&&f.class!==m.class&&a(d,"class",null,m.class,o),4&l&&a(d,"style",f.style,m.style,o),8&l){const e=t.dynamicProps;for(let t=0;t<e.length;t++){const r=e[t],i=f[r],s=m[r];s===i&&"value"!==r||a(d,r,i,s,o,n)}}1&l&&e.children!==t.children&&p(d,t.children)}else c||null!=h||x(d,f,m,n,o);((g=m.onVnodeUpdated)||u)&&Yo((()=>{g&&da(g,n,t,e),u&&fr(t,e,n,"updated")}),i)},O=(e,t,n,r,i,o,s)=>{for(let a=0;a<t.length;a++){const c=e[a],d=t[a],l=c.el&&(c.type===Ps||!qs(c,d)||70&c.shapeFlag)?f(c.el):n;E(c,d,l,null,r,i,o,s,!0)}},x=(e,t,n,i,o)=>{if(t!==n){if(t!==r)for(const r in t)I(r)||r in n||a(e,r,t[r],null,o,i);for(const r in n){if(I(r))continue;const s=n[r],c=t[r];s!==c&&"value"!==r&&a(e,r,c,s,o,i)}"value"in n&&a(e,"value",t.value,n.value,o)}},P=(e,t,r,i,o,s,a,c,l)=>{const h=t.el=e?e.el:d(""),u=t.anchor=e?e.anchor:d("");let{patchFlag:p,dynamicChildren:f,slotScopeIds:m}=t;m&&(c=c?c.concat(m):m),null==e?(n(h,r,i),n(u,r,i),w(t.children||[],r,u,o,s,a,c,l)):p>0&&64&p&&f&&e.dynamicChildren?(O(e.dynamicChildren,f,r,o,s,a,c),(null!=t.key||o&&t===o.subTree)&&ts(e,t,!0)):j(e,t,r,u,o,s,a,c,l)},L=(e,t,n,r,i,o,s,a,c)=>{t.slotScopeIds=a,null==e?512&t.shapeFlag?i.ctx.activate(t,n,r,s,c):k(t,n,r,i,o,s,c):M(e,t,c)},k=(e,t,n,r,i,o,s)=>{const a=e.component=ua(e,r,i);if(hi(e)&&(a.ctx.renderer=Z),Ta(a,!1,s),a.asyncDep){if(i&&i.registerDep(a,V,s),!e.el){const e=a.subTree=$s(Ls);v(null,e,t,n)}}else V(a,e,t,n,i,o,s)},M=(e,t,n)=>{const r=t.component=e.component;if(function(e,t,n){const{props:r,children:i,component:o}=e,{props:s,children:a,patchFlag:c}=t,d=o.emitsOptions;0;if(t.dirs||t.transition)return!0;if(!(n&&c>=0))return!(!i&&!a||a&&a.$stable)||r!==s&&(r?!s||Ss(r,s,d):!!s);if(1024&c)return!0;if(16&c)return r?Ss(r,s,d):!!s;if(8&c){const e=t.dynamicProps;for(let t=0;t<e.length;t++){const n=e[t];if(s[n]!==r[n]&&!_s(d,n))return!0}}return!1}(e,t,n)){if(r.asyncDep&&!r.asyncResolved)return void F(r,t,n);r.next=t,r.update()}else t.el=e.el,r.vnode=t},V=(e,t,n,r,i,o,s)=>{const a=()=>{if(e.isMounted){let{next:t,bu:n,u:r,parent:c,vnode:d}=e;{const n=ns(e);if(n)return t&&(t.el=d.el,F(e,t,s)),void n.asyncDep.then((()=>{e.isUnmounted||a()}))}let l,h=t;0,Zo(e,!1),t?(t.el=d.el,F(e,t,s)):t=d,n&&U(n),(l=t.props&&t.props.onVnodeBeforeUpdate)&&da(l,c,t,d),Zo(e,!0);const u=Es(e);0;const p=e.subTree;e.subTree=u,E(p,u,f(p.el),X(p),e,i,o),t.el=u.el,null===h&&Ts(e,u.el),r&&Yo(r,i),(l=t.props&&t.props.onVnodeUpdated)&&Yo((()=>da(l,c,t,d)),i)}else{let s;const{el:a,props:c}=t,{bm:d,m:l,parent:h,root:u,type:p}=e,f=ci(t);if(Zo(e,!1),d&&U(d),!f&&(s=c&&c.onVnodeBeforeMount)&&da(s,h,t),Zo(e,!0),a&&te){const t=()=>{e.subTree=Es(e),te(a,e.subTree,e,i,null)};f&&p.__asyncHydrate?p.__asyncHydrate(a,e,t):t()}else{u.ce&&u.ce._injectChildStyle(p);const s=e.subTree=Es(e);0,E(null,s,n,r,e,i,o),t.el=s.el}if(l&&Yo(l,i),!f&&(s=c&&c.onVnodeMounted)){const e=t;Yo((()=>da(s,h,e)),i)}(256&t.shapeFlag||h&&ci(h.vnode)&&256&h.vnode.shapeFlag)&&e.a&&Yo(e.a,i),e.isMounted=!0,t=n=r=null}};e.scope.on();const c=e.effect=new Te(a);e.scope.off();const d=e.update=c.run.bind(c),l=e.job=c.runIfDirty.bind(c);l.i=e,l.id=e.uid,c.scheduler=()=>Xn(l),Zo(e,!0),d()},F=(e,t,n)=>{t.component=e;const r=e.vnode.props;e.vnode=t,e.next=null,function(e,t,n,r){const{props:i,attrs:o,vnode:{patchFlag:s}}=e,a=$t(i),[c]=e.propsOptions;let d=!1;if(!(r||s>0)||16&s){let r;ko(e,t,i,o)&&(d=!0);for(const o in a)t&&(u(t,o)||(r=D(o))!==o&&u(t,r))||(c?!n||void 0===n[o]&&void 0===n[r]||(i[o]=Mo(c,a,o,void 0,e,!0)):delete i[o]);if(o!==a)for(const e in o)t&&u(t,e)||(delete o[e],d=!0)}else if(8&s){const n=e.vnode.dynamicProps;for(let r=0;r<n.length;r++){let s=n[r];if(_s(e.emitsOptions,s))continue;const l=t[s];if(c)if(u(o,s))l!==o[s]&&(o[s]=l,d=!0);else{const t=N(s);i[t]=Mo(c,a,t,l,e,!1)}else l!==o[s]&&(o[s]=l,d=!0)}}d&&Qe(e.attrs,"set","")}(e,t.props,r,n),qo(e,t.children,n),Fe(),Zn(e),je()},j=(e,t,n,r,i,o,s,a,c=!1)=>{const d=e&&e.children,l=e?e.shapeFlag:0,h=t.children,{patchFlag:u,shapeFlag:f}=t;if(u>0){if(128&u)return void H(d,h,n,r,i,o,s,a,c);if(256&u)return void B(d,h,n,r,i,o,s,a,c)}8&f?(16&l&&J(d,i,o),h!==d&&p(n,h)):16&l?16&f?H(d,h,n,r,i,o,s,a,c):J(d,i,o,!0):(8&l&&p(n,""),16&f&&w(h,n,r,i,o,s,a,c))},B=(e,t,n,r,o,s,a,c,d)=>{t=t||i;const l=(e=e||i).length,h=t.length,u=Math.min(l,h);let p;for(p=0;p<u;p++){const r=t[p]=d?sa(t[p]):oa(t[p]);E(e[p],r,n,null,o,s,a,c,d)}l>h?J(e,o,s,!0,!1,u):w(t,n,r,o,s,a,c,d,u)},H=(e,t,n,r,o,s,a,c,d)=>{let l=0;const h=t.length;let u=e.length-1,p=h-1;for(;l<=u&&l<=p;){const r=e[l],i=t[l]=d?sa(t[l]):oa(t[l]);if(!qs(r,i))break;E(r,i,n,null,o,s,a,c,d),l++}for(;l<=u&&l<=p;){const r=e[u],i=t[p]=d?sa(t[p]):oa(t[p]);if(!qs(r,i))break;E(r,i,n,null,o,s,a,c,d),u--,p--}if(l>u){if(l<=p){const e=p+1,i=e<h?t[e].el:r;for(;l<=p;)E(null,t[l]=d?sa(t[l]):oa(t[l]),n,i,o,s,a,c,d),l++}}else if(l>p)for(;l<=u;)K(e[l],o,s,!0),l++;else{const f=l,m=l,g=new Map;for(l=m;l<=p;l++){const e=t[l]=d?sa(t[l]):oa(t[l]);null!=e.key&&g.set(e.key,l)}let _,y=0;const v=p-m+1;let b=!1,S=0;const T=new Array(v);for(l=0;l<v;l++)T[l]=0;for(l=f;l<=u;l++){const r=e[l];if(y>=v){K(r,o,s,!0);continue}let i;if(null!=r.key)i=g.get(r.key);else for(_=m;_<=p;_++)if(0===T[_-m]&&qs(r,t[_])){i=_;break}void 0===i?K(r,o,s,!0):(T[i-m]=l+1,i>=S?S=i:b=!0,E(r,t[i],n,null,o,s,a,c,d),y++)}const R=b?function(e){const t=e.slice(),n=[0];let r,i,o,s,a;const c=e.length;for(r=0;r<c;r++){const c=e[r];if(0!==c){if(i=n[n.length-1],e[i]<c){t[r]=i,n.push(r);continue}for(o=0,s=n.length-1;o<s;)a=o+s>>1,e[n[a]]<c?o=a+1:s=a;c<e[n[o]]&&(o>0&&(t[r]=n[o-1]),n[o]=r)}}o=n.length,s=n[o-1];for(;o-- >0;)n[o]=s,s=t[s];return n}(T):i;for(_=R.length-1,l=v-1;l>=0;l--){const e=m+l,i=t[e],u=e+1<h?t[e+1].el:r;0===T[l]?E(null,i,n,u,o,s,a,c,d):b&&(_<0||l!==R[_]?W(i,n,u,2):_--)}}},W=(e,t,r,i,o=null)=>{const{el:s,type:a,transition:c,children:d,shapeFlag:l}=e;if(6&l)return void W(e.component.subTree,t,r,i);if(128&l)return void e.suspense.move(t,r,i);if(64&l)return void a.move(e,t,r,Z);if(a===Ps){n(s,t,r);for(let e=0;e<d.length;e++)W(d[e],t,r,i);return void n(e.anchor,t,r)}if(a===ks)return void(({el:e,anchor:t},r,i)=>{let o;for(;e&&e!==t;)o=m(e),n(e,r,i),e=o;n(t,r,i)})(e,t,r);if(2!==i&&1&l&&c)if(0===i)c.beforeEnter(s),n(s,t,r),Yo((()=>c.enter(s)),o);else{const{leave:e,delayLeave:i,afterLeave:o}=c,a=()=>n(s,t,r),d=()=>{e(s,(()=>{a(),o&&o()}))};i?i(s,a,d):d()}else n(s,t,r)},K=(e,t,n,r=!1,i=!1)=>{const{type:o,props:s,ref:a,children:c,dynamicChildren:d,shapeFlag:l,patchFlag:h,dirs:u,cacheIndex:p}=e;if(-2===h&&(i=!1),null!=a&&Kr(a,null,n,e,!0),null!=p&&(t.renderCache[p]=void 0),256&l)return void t.ctx.deactivate(e);const f=1&l&&u,m=!ci(e);let g;if(m&&(g=s&&s.onVnodeBeforeUnmount)&&da(g,t,e),6&l)Y(e.component,n,r);else{if(128&l)return void e.suspense.unmount(n,r);f&&fr(e,null,t,"beforeUnmount"),64&l?e.type.remove(e,t,n,Z,r):d&&!d.hasOnce&&(o!==Ps||h>0&&64&h)?J(d,t,n,!1,!0):(o===Ps&&384&h||!i&&16&l)&&J(c,t,n),r&&z(e)}(m&&(g=s&&s.onVnodeUnmounted)||f)&&Yo((()=>{g&&da(g,t,e),f&&fr(e,null,t,"unmounted")}),n)},z=e=>{const{type:t,el:n,anchor:r,transition:i}=e;if(t===Ps)return void q(n,r);if(t===ks)return void S(e);const o=()=>{s(n),i&&!i.persisted&&i.afterLeave&&i.afterLeave()};if(1&e.shapeFlag&&i&&!i.persisted){const{leave:t,delayLeave:r}=i,s=()=>t(n,o);r?r(e.el,o,s):s()}else o()},q=(e,t)=>{let n;for(;e!==t;)n=m(e),s(e),e=n;s(t)},Y=(e,t,n)=>{const{bum:r,scope:i,job:o,subTree:s,um:a,m:c,a:d}=e;rs(c),rs(d),r&&U(r),i.stop(),o&&(o.flags|=8,K(s,e,t,n)),a&&Yo(a,t),Yo((()=>{e.isUnmounted=!0}),t),t&&t.pendingBranch&&!t.isUnmounted&&e.asyncDep&&!e.asyncResolved&&e.suspenseId===t.pendingId&&(t.deps--,0===t.deps&&t.resolve())},J=(e,t,n,r=!1,i=!1,o=0)=>{for(let s=o;s<e.length;s++)K(e[s],t,n,r,i)},X=e=>{if(6&e.shapeFlag)return X(e.component.subTree);if(128&e.shapeFlag)return e.suspense.next();const t=m(e.anchor||e.el),n=t&&t[mr];return n?m(n):t};let Q=!1;const $=(e,t,n)=>{null==e?t._vnode&&K(t._vnode,null,null,!0):E(t._vnode||null,e,t,null,null,null,n),t._vnode=e,Q||(Q=!0,Zn(),er(),Q=!1)},Z={p:E,um:K,m:W,r:z,mt:k,mc:w,pc:j,pbc:O,n:X,o:e};let ee,te;return t&&([ee,te]=t(Z)),{render:$,hydrate:ee,createApp:Io($,ee)}}function $o({type:e,props:t},n){return"svg"===n&&"foreignObject"===e||"mathml"===n&&"annotation-xml"===e&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function Zo({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function es(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function ts(e,t,n=!1){const r=e.children,i=t.children;if(p(r)&&p(i))for(let e=0;e<r.length;e++){const t=r[e];let o=i[e];1&o.shapeFlag&&!o.dynamicChildren&&((o.patchFlag<=0||32===o.patchFlag)&&(o=i[e]=sa(i[e]),o.el=t.el),n||-2===o.patchFlag||ts(t,o)),o.type===Ds&&(o.el=t.el)}}function ns(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:ns(t)}function rs(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const is=Symbol.for("v-scx"),os=()=>{{const e=xo(is);return e}};function ss(e,t){return ls(e,null,t)}function as(e,t){return ls(e,null,{flush:"post"})}function cs(e,t){return ls(e,null,{flush:"sync"})}function ds(e,t,n){return ls(e,t,n)}function ls(e,t,n=r){const{immediate:i,deep:s,flush:a,once:c}=n;const h=d({},n);let u;if(Sa)if("sync"===a){const e=os();u=e.__watcherHandles||(e.__watcherHandles=[])}else{if(t&&!i){const e=()=>{};return e.stop=o,e.resume=o,e.pause=o,e}h.once=!0}const f=pa;h.call=(e,t,n)=>Vn(e,f,t,n);let m=!1;"post"===a?h.scheduler=e=>{Yo(e,f&&f.suspense)}:"sync"!==a&&(m=!0,h.scheduler=(e,t)=>{t?e():Xn(e)}),h.augmentJob=e=>{t&&(e.flags|=4),m&&(e.flags|=2,f&&(e.id=f.uid,e.i=f))};const g=function(e,t,n=r){const{immediate:i,deep:s,once:a,scheduler:c,augmentJob:d,call:h}=n,u=e=>s?e:Xt(e)||!1===s||0===s?An(e,1):An(e);let f,m,g,E,y=!1,v=!1;if(nn(e)?(m=()=>e.value,y=Xt(e)):Yt(e)?(m=()=>u(e),y=!0):p(e)?(v=!0,y=e.some((e=>Yt(e)||Xt(e))),m=()=>e.map((e=>nn(e)?e.value:Yt(e)?u(e):_(e)?h?h(e,2):e():void 0))):m=_(e)?t?h?()=>h(e,2):e:()=>{if(g){Fe();try{g()}finally{je()}}const t=Cn;Cn=f;try{return h?h(e,3,[E]):e(E)}finally{Cn=t}}:o,t&&s){const e=m,t=!0===s?1/0:s;m=()=>An(e(),t)}const b=ve(),S=()=>{f.stop(),b&&l(b.effects,f)};if(a&&t){const e=t;t=(...t)=>{e(...t),S()}}let T=v?new Array(e.length).fill(Tn):Tn;const R=e=>{if(1&f.flags&&(f.dirty||e))if(t){const e=f.run();if(s||y||(v?e.some(((e,t)=>M(e,T[t]))):M(e,T))){g&&g();const n=Cn;Cn=f;try{const n=[e,T===Tn?void 0:v&&T[0]===Tn?[]:T,E];h?h(t,3,n):t(...n),T=e}finally{Cn=n}}}else f.run()};return d&&d(R),f=new Te(m),f.scheduler=c?()=>c(R,!1):R,E=e=>In(e,!1,f),g=f.onStop=()=>{const e=Rn.get(f);if(e){if(h)h(e,4);else for(const t of e)t();Rn.delete(f)}},t?i?R(!0):T=f.run():c?c(R.bind(null,!0),!0):f.run(),S.pause=f.pause.bind(f),S.resume=f.resume.bind(f),S.stop=S,S}(e,t,h);return u&&u.push(g),g}function hs(e,t,n){const r=this.proxy,i=E(e)?e.includes(".")?us(r,e):()=>r[e]:e.bind(r,r);let o;_(t)?o=t:(o=t.handler,n=t);const s=_a(this),a=ls(i,o.bind(r),n);return s(),a}function us(e,t){const n=t.split(".");return()=>{let t=e;for(let e=0;e<n.length&&t;e++)t=t[n[e]];return t}}function ps(e,t,n=r){const i=fa();const o=N(t),s=D(t),a=fs(e,t),c=fn(((a,c)=>{let d,l,h=r;return cs((()=>{const n=e[t];M(d,n)&&(d=n,c())})),{get:()=>(a(),n.get?n.get(d):d),set(e){const a=n.set?n.set(e):e;if(!(M(a,d)||h!==r&&M(e,h)))return;const u=i.vnode.props;u&&(t in u||o in u||s in u)&&(`onUpdate:${t}`in u||`onUpdate:${o}`in u||`onUpdate:${s}`in u)||(d=e,c()),i.emit(`update:${t}`,a),M(e,a)&&M(e,h)&&!M(a,l)&&c(),h=e,l=a}}}));return c[Symbol.iterator]=()=>{let e=0;return{next:()=>e<2?{value:e++?a||r:c,done:!1}:{done:!0}}},c}const fs=(e,t)=>"modelValue"===t||"model-value"===t?e.modelModifiers:e[`${t}Modifiers`]||e[`${N(t)}Modifiers`]||e[`${D(t)}Modifiers`];function ms(e,t,...n){if(e.isUnmounted)return;const i=e.vnode.props||r;let o=n;const s=t.startsWith("update:"),a=s&&fs(i,t.slice(7));let c;a&&(a.trim&&(o=n.map((e=>E(e)?e.trim():e))),a.number&&(o=n.map(F)));let d=i[c=k(t)]||i[c=k(N(t))];!d&&s&&(d=i[c=k(D(t))]),d&&Vn(d,e,6,o);const l=i[c+"Once"];if(l){if(e.emitted){if(e.emitted[c])return}else e.emitted={};e.emitted[c]=!0,Vn(l,e,6,o)}}function gs(e,t,n=!1){const r=t.emitsCache,i=r.get(e);if(void 0!==i)return i;const o=e.emits;let s={},a=!1;if(!_(e)){const r=e=>{const n=gs(e,t,!0);n&&(a=!0,d(s,n))};!n&&t.mixins.length&&t.mixins.forEach(r),e.extends&&r(e.extends),e.mixins&&e.mixins.forEach(r)}return o||a?(p(o)?o.forEach((e=>s[e]=null)):d(s,o),v(e)&&r.set(e,s),s):(v(e)&&r.set(e,null),null)}function _s(e,t){return!(!e||!a(t))&&(t=t.slice(2).replace(/Once$/,""),u(e,t[0].toLowerCase()+t.slice(1))||u(e,D(t))||u(e,t))}function Es(e){const{type:t,vnode:n,proxy:r,withProxy:i,propsOptions:[o],slots:s,attrs:a,emit:d,render:l,renderCache:h,props:u,data:p,setupState:f,ctx:m,inheritAttrs:g}=e,_=cr(e);let E,y;try{if(4&n.shapeFlag){const e=i||r,t=e;E=oa(l.call(t,e,h,u,f,p,m)),y=a}else{const e=t;0,E=oa(e.length>1?e(u,{attrs:a,slots:s,emit:d}):e(u,null)),y=t.props?a:vs(a)}}catch(t){Ms.length=0,Fn(t,e,1),E=$s(Ls)}let v=E;if(y&&!1!==g){const e=Object.keys(y),{shapeFlag:t}=v;e.length&&7&t&&(o&&e.some(c)&&(y=bs(y,o)),v=ta(v,y,!1,!0))}return n.dirs&&(v=ta(v,null,!1,!0),v.dirs=v.dirs?v.dirs.concat(n.dirs):n.dirs),n.transition&&Fr(v,n.transition),E=v,cr(_),E}function ys(e,t=!0){let n;for(let t=0;t<e.length;t++){const r=e[t];if(!zs(r))return;if(r.type!==Ls||"v-if"===r.children){if(n)return;n=r}}return n}const vs=e=>{let t;for(const n in e)("class"===n||"style"===n||a(n))&&((t||(t={}))[n]=e[n]);return t},bs=(e,t)=>{const n={};for(const r in e)c(r)&&r.slice(9)in t||(n[r]=e[r]);return n};function Ss(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let i=0;i<r.length;i++){const o=r[i];if(t[o]!==e[o]&&!_s(n,o))return!0}return!1}function Ts({vnode:e,parent:t},n){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r!==e)break;(e=t.vnode).el=n,t=t.parent}}const Rs=e=>e.__isSuspense;let Cs=0;const ws={name:"Suspense",__isSuspense:!0,process(e,t,n,r,i,o,s,a,c,d){if(null==e)!function(e,t,n,r,i,o,s,a,c){const{p:d,o:{createElement:l}}=c,h=l("div"),u=e.suspense=As(e,i,r,t,h,n,o,s,a,c);d(null,u.pendingBranch=e.ssContent,h,null,r,u,o,s),u.deps>0?(Is(e,"onPending"),Is(e,"onFallback"),d(null,e.ssFallback,t,n,r,null,o,s),Ns(u,e.ssFallback)):u.resolve(!1,!0)}(t,n,r,i,o,s,a,c,d);else{if(o&&o.deps>0&&!e.suspense.isInFallback)return t.suspense=e.suspense,t.suspense.vnode=t,void(t.el=e.el);!function(e,t,n,r,i,o,s,a,{p:c,um:d,o:{createElement:l}}){const h=t.suspense=e.suspense;h.vnode=t,t.el=e.el;const u=t.ssContent,p=t.ssFallback,{activeBranch:f,pendingBranch:m,isInFallback:g,isHydrating:_}=h;if(m)h.pendingBranch=u,qs(u,m)?(c(m,u,h.hiddenContainer,null,i,h,o,s,a),h.deps<=0?h.resolve():g&&(_||(c(f,p,n,r,i,null,o,s,a),Ns(h,p)))):(h.pendingId=Cs++,_?(h.isHydrating=!1,h.activeBranch=m):d(m,i,h),h.deps=0,h.effects.length=0,h.hiddenContainer=l("div"),g?(c(null,u,h.hiddenContainer,null,i,h,o,s,a),h.deps<=0?h.resolve():(c(f,p,n,r,i,null,o,s,a),Ns(h,p))):f&&qs(u,f)?(c(f,u,n,r,i,h,o,s,a),h.resolve(!0)):(c(null,u,h.hiddenContainer,null,i,h,o,s,a),h.deps<=0&&h.resolve()));else if(f&&qs(u,f))c(f,u,n,r,i,h,o,s,a),Ns(h,u);else if(Is(t,"onPending"),h.pendingBranch=u,512&u.shapeFlag?h.pendingId=u.component.suspenseId:h.pendingId=Cs++,c(null,u,h.hiddenContainer,null,i,h,o,s,a),h.deps<=0)h.resolve();else{const{timeout:e,pendingId:t}=h;e>0?setTimeout((()=>{h.pendingId===t&&h.fallback(p)}),e):0===e&&h.fallback(p)}}(e,t,n,r,i,s,a,c,d)}},hydrate:function(e,t,n,r,i,o,s,a,c){const d=t.suspense=As(t,r,n,e.parentNode,document.createElement("div"),null,i,o,s,a,!0),l=c(e,d.pendingBranch=t.ssContent,n,d,o,s);0===d.deps&&d.resolve(!1,!0);return l},normalize:function(e){const{shapeFlag:t,children:n}=e,r=32&t;e.ssContent=Os(r?n.default:n),e.ssFallback=r?Os(n.fallback):$s(Ls)}};function Is(e,t){const n=e.props&&e.props[t];_(n)&&n()}function As(e,t,n,r,i,o,s,a,c,d,l=!1){const{p:h,m:u,um:p,n:f,o:{parentNode:m,remove:g}}=d;let _;const E=function(e){const t=e.props&&e.props.suspensible;return null!=t&&!1!==t}(e);E&&t&&t.pendingBranch&&(_=t.pendingId,t.deps++);const y=e.props?j(e.props.timeout):void 0;const v=o,b={vnode:e,parent:t,parentComponent:n,namespace:s,container:r,hiddenContainer:i,deps:0,pendingId:Cs++,timeout:"number"==typeof y?y:-1,activeBranch:null,pendingBranch:null,isInFallback:!l,isHydrating:l,isUnmounted:!1,effects:[],resolve(e=!1,n=!1){const{vnode:r,activeBranch:i,pendingBranch:s,pendingId:a,effects:c,parentComponent:d,container:l}=b;let h=!1;b.isHydrating?b.isHydrating=!1:e||(h=i&&s.transition&&"out-in"===s.transition.mode,h&&(i.transition.afterLeave=()=>{a===b.pendingId&&(u(s,l,o===v?f(i):o,0),$n(c))}),i&&(m(i.el)===l&&(o=f(i)),p(i,d,b,!0)),h||u(s,l,o,0)),Ns(b,s),b.pendingBranch=null,b.isInFallback=!1;let g=b.parent,y=!1;for(;g;){if(g.pendingBranch){g.effects.push(...c),y=!0;break}g=g.parent}y||h||$n(c),b.effects=[],E&&t&&t.pendingBranch&&_===t.pendingId&&(t.deps--,0!==t.deps||n||t.resolve()),Is(r,"onResolve")},fallback(e){if(!b.pendingBranch)return;const{vnode:t,activeBranch:n,parentComponent:r,container:i,namespace:o}=b;Is(t,"onFallback");const s=f(n),d=()=>{b.isInFallback&&(h(null,e,i,s,r,null,o,a,c),Ns(b,e))},l=e.transition&&"out-in"===e.transition.mode;l&&(n.transition.afterLeave=d),b.isInFallback=!0,p(n,r,null,!0),l||d()},move(e,t,n){b.activeBranch&&u(b.activeBranch,e,t,n),b.container=e},next:()=>b.activeBranch&&f(b.activeBranch),registerDep(e,t,n){const r=!!b.pendingBranch;r&&b.deps++;const i=e.vnode.el;e.asyncDep.catch((t=>{Fn(t,e,0)})).then((o=>{if(e.isUnmounted||b.isUnmounted||b.pendingId!==e.suspenseId)return;e.asyncResolved=!0;const{vnode:a}=e;Ra(e,o,!1),i&&(a.el=i);const c=!i&&e.subTree.el;t(e,a,m(i||e.subTree.el),i?null:f(e.subTree),b,s,n),c&&g(c),Ts(e,a.el),r&&0==--b.deps&&b.resolve()}))},unmount(e,t){b.isUnmounted=!0,b.activeBranch&&p(b.activeBranch,n,e,t),b.pendingBranch&&p(b.pendingBranch,n,e,t)}};return b}function Os(e){let t;if(_(e)){const n=Bs&&e._c;n&&(e._d=!1,Vs()),e=e(),n&&(e._d=!0,t=Us,Fs())}if(p(e)){const t=ys(e);0,e=t}return e=oa(e),t&&!e.dynamicChildren&&(e.dynamicChildren=t.filter((t=>t!==e))),e}function xs(e,t){t&&t.pendingBranch?p(e)?t.effects.push(...e):t.effects.push(e):$n(e)}function Ns(e,t){e.activeBranch=t;const{vnode:n,parentComponent:r}=e;let i=t.el;for(;!i&&t.component;)i=(t=t.component.subTree).el;n.el=i,r&&r.subTree===n&&(r.vnode.el=i,Ts(r,i))}const Ps=Symbol.for("v-fgt"),Ds=Symbol.for("v-txt"),Ls=Symbol.for("v-cmt"),ks=Symbol.for("v-stc"),Ms=[];let Us=null;function Vs(e=!1){Ms.push(Us=e?null:[])}function Fs(){Ms.pop(),Us=Ms[Ms.length-1]||null}let js,Bs=1;function Gs(e){Bs+=e,e<0&&Us&&(Us.hasOnce=!0)}function Hs(e){return e.dynamicChildren=Bs>0?Us||i:null,Fs(),Bs>0&&Us&&Us.push(e),e}function Ws(e,t,n,r,i,o){return Hs(Qs(e,t,n,r,i,o,!0))}function Ks(e,t,n,r,i){return Hs($s(e,t,n,r,i,!0))}function zs(e){return!!e&&!0===e.__v_isVNode}function qs(e,t){return e.type===t.type&&e.key===t.key}function Ys(e){js=e}const Js=({key:e})=>null!=e?e:null,Xs=({ref:e,ref_key:t,ref_for:n})=>("number"==typeof e&&(e=""+e),null!=e?E(e)||nn(e)||_(e)?{i:sr,r:e,k:t,f:!!n}:e:null);function Qs(e,t=null,n=null,r=0,i=null,o=(e===Ps?0:1),s=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Js(t),ref:t&&Xs(t),scopeId:ar,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:sr};return a?(aa(c,n),128&o&&e.normalize(c)):n&&(c.shapeFlag|=E(n)?8:16),Bs>0&&!s&&Us&&(c.patchFlag>0||6&o)&&32!==c.patchFlag&&Us.push(c),c}const $s=Zs;function Zs(e,t=null,n=null,r=0,i=null,o=!1){if(e&&e!==Mi||(e=Ls),zs(e)){const r=ta(e,t,!0);return n&&aa(r,n),Bs>0&&!o&&Us&&(6&r.shapeFlag?Us[Us.indexOf(e)]=r:Us.push(r)),r.patchFlag=-2,r}if(ka(e)&&(e=e.__vccOpts),t){t=ea(t);let{class:e,style:n}=t;e&&!E(e)&&(t.class=J(e)),v(n)&&(Qt(n)&&!p(n)&&(n=d({},n)),t.style=W(n))}return Qs(e,t,n,r,i,E(e)?1:Rs(e)?128:gr(e)?64:v(e)?4:_(e)?2:0,o,!0)}function ea(e){return e?Qt(e)||Lo(e)?d({},e):e:null}function ta(e,t,n=!1,r=!1){const{props:i,ref:o,patchFlag:s,children:a,transition:c}=e,d=t?ca(i||{},t):i,l={__v_isVNode:!0,__v_skip:!0,type:e.type,props:d,key:d&&Js(d),ref:t&&t.ref?n&&o?p(o)?o.concat(Xs(t)):[o,Xs(t)]:Xs(t):o,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Ps?-1===s?16:16|s:s,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:c,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&ta(e.ssContent),ssFallback:e.ssFallback&&ta(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return c&&r&&Fr(l,c.clone(l)),l}function na(e=" ",t=0){return $s(Ds,null,e,t)}function ra(e,t){const n=$s(ks,null,e);return n.staticCount=t,n}function ia(e="",t=!1){return t?(Vs(),Ks(Ls,null,e)):$s(Ls,null,e)}function oa(e){return null==e||"boolean"==typeof e?$s(Ls):p(e)?$s(Ps,null,e.slice()):"object"==typeof e?sa(e):$s(Ds,null,String(e))}function sa(e){return null===e.el&&-1!==e.patchFlag||e.memo?e:ta(e)}function aa(e,t){let n=0;const{shapeFlag:r}=e;if(null==t)t=null;else if(p(t))n=16;else if("object"==typeof t){if(65&r){const n=t.default;return void(n&&(n._c&&(n._d=!1),aa(e,n()),n._c&&(n._d=!0)))}{n=32;const r=t._;r||Lo(t)?3===r&&sr&&(1===sr.slots._?t._=1:(t._=2,e.patchFlag|=1024)):t._ctx=sr}}else _(t)?(t={default:t,_ctx:sr},n=32):(t=String(t),64&r?(n=16,t=[na(t)]):n=8);e.children=t,e.shapeFlag|=n}function ca(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const e in r)if("class"===e)t.class!==r.class&&(t.class=J([t.class,r.class]));else if("style"===e)t.style=W([t.style,r.style]);else if(a(e)){const n=t[e],i=r[e];!i||n===i||p(n)&&n.includes(i)||(t[e]=n?[].concat(n,i):i)}else""!==e&&(t[e]=r[e])}return t}function da(e,t,n,r=null){Vn(e,t,7,[n,r])}const la=Co();let ha=0;function ua(e,t,n){const i=e.type,o=(t?t.appContext:e.appContext)||la,s={uid:ha++,vnode:e,type:i,parent:t,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Ee(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(o.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Vo(i,o),emitsOptions:gs(i,o),emit:null,emitted:null,propsDefaults:r,inheritAttrs:i.inheritAttrs,ctx:r,data:r,props:r,attrs:r,slots:r,refs:r,setupState:r,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=t?t.root:s,s.emit=ms.bind(null,s),e.ce&&e.ce(s),s}let pa=null;const fa=()=>pa||sr;let ma,ga;{const e=G(),t=(t,n)=>{let r;return(r=e[t])||(r=e[t]=[]),r.push(n),e=>{r.length>1?r.forEach((t=>t(e))):r[0](e)}};ma=t("__VUE_INSTANCE_SETTERS__",(e=>pa=e)),ga=t("__VUE_SSR_SETTERS__",(e=>Sa=e))}const _a=e=>{const t=pa;return ma(e),e.scope.on(),()=>{e.scope.off(),ma(t)}},Ea=()=>{pa&&pa.scope.off(),ma(null)};function ya(e){return 4&e.vnode.shapeFlag}let va,ba,Sa=!1;function Ta(e,t=!1,n=!1){t&&ga(t);const{props:r,children:i}=e.vnode,o=ya(e);!function(e,t,n,r=!1){const i={},o=Do();e.propsDefaults=Object.create(null),ko(e,t,i,o);for(const t in e.propsOptions[0])t in i||(i[t]=void 0);n?e.props=r?i:Wt(i):e.type.props?e.props=i:e.props=o,e.attrs=o}(e,r,o,t),zo(e,i,n);const s=o?function(e,t){const n=e.type;0;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Ji),!1;const{setup:r}=n;if(r){const n=e.setupContext=r.length>1?Oa(e):null,i=_a(e);Fe();const o=Un(r,e,0,[e.props,n]);if(je(),i(),b(o)){if(ci(e)||Hr(e),o.then(Ea,Ea),t)return o.then((n=>{Ra(e,n,t)})).catch((t=>{Fn(t,e,0)}));e.asyncDep=o}else Ra(e,o,t)}else Ia(e,t)}(e,t):void 0;return t&&ga(!1),s}function Ra(e,t,n){_(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:v(t)&&(e.setupState=un(t)),Ia(e,n)}function Ca(e){va=e,ba=e=>{e.render._rc&&(e.withProxy=new Proxy(e.ctx,Xi))}}const wa=()=>!va;function Ia(e,t,n){const r=e.type;if(!e.render){if(!t&&va&&!r.render){const t=r.template||_o(e).template;if(t){0;const{isCustomElement:n,compilerOptions:i}=e.appContext.config,{delimiters:o,compilerOptions:s}=r,a=d(d({isCustomElement:n,delimiters:o},i),s);r.render=va(t,a)}}e.render=r.render||o,ba&&ba(e)}{const t=_a(e);Fe();try{fo(e)}finally{je(),t()}}}const Aa={get:(e,t)=>(Xe(e,0,""),e[t])};function Oa(e){const t=t=>{e.exposed=t||{}};return{attrs:new Proxy(e.attrs,Aa),slots:e.slots,emit:e.emit,expose:t}}function xa(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(un(Zt(e.exposed)),{get:(t,n)=>n in t?t[n]:n in qi?qi[n](e):void 0,has:(e,t)=>t in e||t in qi})):e.proxy}const Na=/(?:^|[-_])(\w)/g,Pa=e=>e.replace(Na,(e=>e.toUpperCase())).replace(/[-_]/g,"");function Da(e,t=!0){return _(e)?e.displayName||e.name:e.name||t&&e.__name}function La(e,t,n=!1){let r=Da(t);if(!r&&t.__file){const e=t.__file.match(/([^/\\]+)\.\w+$/);e&&(r=e[1])}if(!r&&e&&e.parent){const n=e=>{for(const n in e)if(e[n]===t)return n};r=n(e.components||e.parent.type.components)||n(e.appContext.components)}return r?Pa(r):n?"App":"Anonymous"}function ka(e){return _(e)&&"__vccOpts"in e}const Ma=(e,t)=>{const n=function(e,t,n=!1){let r,i;return _(e)?r=e:(r=e.get,i=e.set),new vn(r,i,n)}(e,0,Sa);return n};function Ua(e,t,n){const r=arguments.length;return 2===r?v(t)&&!p(t)?zs(t)?$s(e,null,[t]):$s(e,t):$s(e,null,t):(r>3?n=Array.prototype.slice.call(arguments,2):3===r&&zs(n)&&(n=[n]),$s(e,t,n))}function Va(){return void 0}function Fa(e,t,n,r){const i=n[r];if(i&&ja(i,e))return i;const o=t();return o.memo=e.slice(),o.cacheIndex=r,n[r]=o}function ja(e,t){const n=e.memo;if(n.length!=t.length)return!1;for(let e=0;e<n.length;e++)if(M(n[e],t[e]))return!1;return Bs>0&&Us&&Us.push(e),!0}const Ba="3.5.6",Ga=o,Ha=Mn,Wa=rr,Ka=function e(t,n){var r,i;if(rr=t,rr)rr.enabled=!0,ir.forEach((({event:e,args:t})=>rr.emit(e,...t))),ir=[];else if("undefined"!=typeof window&&window.HTMLElement&&!(null==(i=null==(r=window.navigator)?void 0:r.userAgent)?void 0:i.includes("jsdom"))){(n.__VUE_DEVTOOLS_HOOK_REPLAY__=n.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push((t=>{e(t,n)})),setTimeout((()=>{rr||(n.__VUE_DEVTOOLS_HOOK_REPLAY__=null,or=!0,ir=[])}),3e3)}else or=!0,ir=[]},za={createComponentInstance:ua,setupComponent:Ta,renderComponentRoot:Es,setCurrentRenderingInstance:cr,isVNode:zs,normalizeVNode:oa,getComponentPublicInstance:xa,ensureValidVNode:Wi,pushWarningContext:function(e){On.push(e)},popWarningContext:function(){On.pop()}},qa=null,Ya=null,Ja=null;let Xa;const Qa="undefined"!=typeof window&&window.trustedTypes;if(Qa)try{Xa=Qa.createPolicy("vue",{createHTML:e=>e})}catch(e){}const $a=Xa?e=>Xa.createHTML(e):e=>e,Za="undefined"!=typeof document?document:null,ec=Za&&Za.createElement("template"),tc={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const i="svg"===t?Za.createElementNS("http://www.w3.org/2000/svg",e):"mathml"===t?Za.createElementNS("http://www.w3.org/1998/Math/MathML",e):n?Za.createElement(e,{is:n}):Za.createElement(e);return"select"===e&&r&&null!=r.multiple&&i.setAttribute("multiple",r.multiple),i},createText:e=>Za.createTextNode(e),createComment:e=>Za.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Za.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,i,o){const s=n?n.previousSibling:t.lastChild;if(i&&(i===o||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),n),i!==o&&(i=i.nextSibling););else{ec.innerHTML=$a("svg"===r?`<svg>${e}</svg>`:"mathml"===r?`<math>${e}</math>`:e);const i=ec.content;if("svg"===r||"mathml"===r){const e=i.firstChild;for(;e.firstChild;)i.appendChild(e.firstChild);i.removeChild(e)}t.insertBefore(i,n)}return[s?s.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},nc="transition",rc="animation",ic=Symbol("_vtc"),oc={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},sc=d({},xr,oc),ac=e=>(e.displayName="Transition",e.props=sc,e),cc=ac(((e,{slots:t})=>Ua(Lr,hc(e),t))),dc=(e,t=[])=>{p(e)?e.forEach((e=>e(...t))):e&&e(...t)},lc=e=>!!e&&(p(e)?e.some((e=>e.length>1)):e.length>1);function hc(e){const t={};for(const n in e)n in oc||(t[n]=e[n]);if(!1===e.css)return t;const{name:n="v",type:r,duration:i,enterFromClass:o=`${n}-enter-from`,enterActiveClass:s=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:c=o,appearActiveClass:l=s,appearToClass:h=a,leaveFromClass:u=`${n}-leave-from`,leaveActiveClass:p=`${n}-leave-active`,leaveToClass:f=`${n}-leave-to`}=e,m=function(e){if(null==e)return null;if(v(e))return[uc(e.enter),uc(e.leave)];{const t=uc(e);return[t,t]}}(i),g=m&&m[0],_=m&&m[1],{onBeforeEnter:E,onEnter:y,onEnterCancelled:b,onLeave:S,onLeaveCancelled:T,onBeforeAppear:R=E,onAppear:C=y,onAppearCancelled:w=b}=t,I=(e,t,n)=>{fc(e,t?h:a),fc(e,t?l:s),n&&n()},A=(e,t)=>{e._isLeaving=!1,fc(e,u),fc(e,f),fc(e,p),t&&t()},O=e=>(t,n)=>{const i=e?C:y,s=()=>I(t,e,n);dc(i,[t,s]),mc((()=>{fc(t,e?c:o),pc(t,e?h:a),lc(i)||_c(t,r,g,s)}))};return d(t,{onBeforeEnter(e){dc(E,[e]),pc(e,o),pc(e,s)},onBeforeAppear(e){dc(R,[e]),pc(e,c),pc(e,l)},onEnter:O(!1),onAppear:O(!0),onLeave(e,t){e._isLeaving=!0;const n=()=>A(e,t);pc(e,u),pc(e,p),bc(),mc((()=>{e._isLeaving&&(fc(e,u),pc(e,f),lc(S)||_c(e,r,_,n))})),dc(S,[e,n])},onEnterCancelled(e){I(e,!1),dc(b,[e])},onAppearCancelled(e){I(e,!0),dc(w,[e])},onLeaveCancelled(e){A(e),dc(T,[e])}})}function uc(e){return j(e)}function pc(e,t){t.split(/\s+/).forEach((t=>t&&e.classList.add(t))),(e[ic]||(e[ic]=new Set)).add(t)}function fc(e,t){t.split(/\s+/).forEach((t=>t&&e.classList.remove(t)));const n=e[ic];n&&(n.delete(t),n.size||(e[ic]=void 0))}function mc(e){requestAnimationFrame((()=>{requestAnimationFrame(e)}))}let gc=0;function _c(e,t,n,r){const i=e._endId=++gc,o=()=>{i===e._endId&&r()};if(n)return setTimeout(o,n);const{type:s,timeout:a,propCount:c}=Ec(e,t);if(!s)return r();const d=s+"end";let l=0;const h=()=>{e.removeEventListener(d,u),o()},u=t=>{t.target===e&&++l>=c&&h()};setTimeout((()=>{l<c&&h()}),a+1),e.addEventListener(d,u)}function Ec(e,t){const n=window.getComputedStyle(e),r=e=>(n[e]||"").split(", "),i=r(`${nc}Delay`),o=r(`${nc}Duration`),s=yc(i,o),a=r(`${rc}Delay`),c=r(`${rc}Duration`),d=yc(a,c);let l=null,h=0,u=0;t===nc?s>0&&(l=nc,h=s,u=o.length):t===rc?d>0&&(l=rc,h=d,u=c.length):(h=Math.max(s,d),l=h>0?s>d?nc:rc:null,u=l?l===nc?o.length:c.length:0);return{type:l,timeout:h,propCount:u,hasTransform:l===nc&&/\b(transform|all)(,|$)/.test(r(`${nc}Property`).toString())}}function yc(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map(((t,n)=>vc(t)+vc(e[n]))))}function vc(e){return"auto"===e?0:1e3*Number(e.slice(0,-1).replace(",","."))}function bc(){return document.body.offsetHeight}const Sc=Symbol("_vod"),Tc=Symbol("_vsh"),Rc={beforeMount(e,{value:t},{transition:n}){e[Sc]="none"===e.style.display?"":e.style.display,n&&t?n.beforeEnter(e):Cc(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:r}){!t!=!n&&(r?t?(r.beforeEnter(e),Cc(e,!0),r.enter(e)):r.leave(e,(()=>{Cc(e,!1)})):Cc(e,t))},beforeUnmount(e,{value:t}){Cc(e,t)}};function Cc(e,t){e.style.display=t?e[Sc]:"none",e[Tc]=!t}const wc=Symbol("");function Ic(e){const t=fa();if(!t)return;const n=t.ut=(n=e(t.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${t.uid}"]`)).forEach((e=>Oc(e,n)))};const r=()=>{const r=e(t.proxy);t.ce?Oc(t.ce,r):Ac(t.subTree,r),n(r)};Ti((()=>{as(r)})),Ri((()=>{const e=new MutationObserver(r);e.observe(t.subTree.el.parentNode,{childList:!0}),Ai((()=>e.disconnect()))}))}function Ac(e,t){if(128&e.shapeFlag){const n=e.suspense;e=n.activeBranch,n.pendingBranch&&!n.isHydrating&&n.effects.push((()=>{Ac(n.activeBranch,t)}))}for(;e.component;)e=e.component.subTree;if(1&e.shapeFlag&&e.el)Oc(e.el,t);else if(e.type===Ps)e.children.forEach((e=>Ac(e,t)));else if(e.type===ks){let{el:n,anchor:r}=e;for(;n&&(Oc(n,t),n!==r);)n=n.nextSibling}}function Oc(e,t){if(1===e.nodeType){const n=e.style;let r="";for(const e in t)n.setProperty(`--${e}`,t[e]),r+=`--${e}: ${t[e]};`;n[wc]=r}}const xc=/(^|;)\s*display\s*:/;const Nc=/\s*!important$/;function Pc(e,t,n){if(p(n))n.forEach((n=>Pc(e,t,n)));else if(null==n&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=function(e,t){const n=Lc[t];if(n)return n;let r=N(t);if("filter"!==r&&r in e)return Lc[t]=r;r=L(r);for(let n=0;n<Dc.length;n++){const i=Dc[n]+r;if(i in e)return Lc[t]=i}return t}(e,t);Nc.test(n)?e.setProperty(D(r),n.replace(Nc,""),"important"):e[r]=n}}const Dc=["Webkit","Moz","ms"],Lc={};const kc="http://www.w3.org/1999/xlink";function Mc(e,t,n,r,i,o=re(t)){r&&t.startsWith("xlink:")?null==n?e.removeAttributeNS(kc,t.slice(6,t.length)):e.setAttributeNS(kc,t,n):null==n||o&&!oe(n)?e.removeAttribute(t):e.setAttribute(t,o?"":y(n)?String(n):n)}function Uc(e,t,n,r){e.addEventListener(t,n,r)}const Vc=Symbol("_vei");function Fc(e,t,n,r,i=null){const o=e[Vc]||(e[Vc]={}),s=o[t];if(r&&s)s.value=r;else{const[n,a]=function(e){let t;if(jc.test(e)){let n;for(t={};n=e.match(jc);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}const n=":"===e[2]?e.slice(3):D(e.slice(2));return[n,t]}(t);if(r){const s=o[t]=function(e,t){const n=e=>{if(e._vts){if(e._vts<=n.attached)return}else e._vts=Date.now();Vn(function(e,t){if(p(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map((e=>t=>!t._stopped&&e&&e(t)))}return t}(e,n.value),t,5,[e])};return n.value=e,n.attached=Hc(),n}(r,i);Uc(e,n,s,a)}else s&&(!function(e,t,n,r){e.removeEventListener(t,n,r)}(e,n,s,a),o[t]=void 0)}}const jc=/(?:Once|Passive|Capture)$/;let Bc=0;const Gc=Promise.resolve(),Hc=()=>Bc||(Gc.then((()=>Bc=0)),Bc=Date.now());const Wc=e=>111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123;const Kc={};function zc(e,t,n){const r=Br(e,t);C(r)&&d(r,t);class i extends Jc{constructor(e){super(r,e,n)}}return i.def=r,i}const qc=(e,t)=>zc(e,t,Ud),Yc="undefined"!=typeof HTMLElement?HTMLElement:class{};class Jc extends Yc{constructor(e,t={},n=Md){super(),this._def=e,this._props=t,this._createApp=n,this._isVueCE=!0,this._instance=null,this._app=null,this._nonce=this._def.nonce,this._connected=!1,this._resolved=!1,this._numberProps=null,this._styleChildren=new WeakSet,this._ob=null,this.shadowRoot&&n!==Md?this._root=this.shadowRoot:!1!==e.shadowRoot?(this.attachShadow({mode:"open"}),this._root=this.shadowRoot):this._root=this,this._def.__asyncLoader||this._resolveProps(this._def)}connectedCallback(){if(!this.isConnected)return;this.shadowRoot||this._parseSlots(),this._connected=!0;let e=this;for(;e=e&&(e.parentNode||e.host);)if(e instanceof Jc){this._parent=e;break}this._instance||(this._resolved?(this._setParent(),this._update()):e&&e._pendingResolve?this._pendingResolve=e._pendingResolve.then((()=>{this._pendingResolve=void 0,this._resolveDef()})):this._resolveDef())}_setParent(e=this._parent){e&&(this._instance.parent=e._instance,this._instance.provides=e._instance.provides)}disconnectedCallback(){this._connected=!1,Jn((()=>{this._connected||(this._ob&&(this._ob.disconnect(),this._ob=null),this._app&&this._app.unmount(),this._instance&&(this._instance.ce=void 0),this._app=this._instance=null)}))}_resolveDef(){if(this._pendingResolve)return;for(let e=0;e<this.attributes.length;e++)this._setAttr(this.attributes[e].name);this._ob=new MutationObserver((e=>{for(const t of e)this._setAttr(t.attributeName)})),this._ob.observe(this,{attributes:!0});const e=(e,t=!1)=>{this._resolved=!0,this._pendingResolve=void 0;const{props:n,styles:r}=e;let i;if(n&&!p(n))for(const e in n){const t=n[e];(t===Number||t&&t.type===Number)&&(e in this._props&&(this._props[e]=j(this._props[e])),(i||(i=Object.create(null)))[N(e)]=!0)}this._numberProps=i,t&&this._resolveProps(e),this.shadowRoot&&this._applyStyles(r),this._mount(e)},t=this._def.__asyncLoader;t?this._pendingResolve=t().then((t=>e(this._def=t,!0))):e(this._def)}_mount(e){this._app=this._createApp(e),e.configureApp&&e.configureApp(this._app),this._app._ceVNode=this._createVNode(),this._app.mount(this._root);const t=this._instance&&this._instance.exposed;if(t)for(const e in t)u(this,e)||Object.defineProperty(this,e,{get:()=>dn(t[e])})}_resolveProps(e){const{props:t}=e,n=p(t)?t:Object.keys(t||{});for(const e of Object.keys(this))"_"!==e[0]&&n.includes(e)&&this._setProp(e,this[e]);for(const e of n.map(N))Object.defineProperty(this,e,{get(){return this._getProp(e)},set(t){this._setProp(e,t,!0,!0)}})}_setAttr(e){if(e.startsWith("data-v-"))return;const t=this.hasAttribute(e);let n=t?this.getAttribute(e):Kc;const r=N(e);t&&this._numberProps&&this._numberProps[r]&&(n=j(n)),this._setProp(r,n,!1,!0)}_getProp(e){return this._props[e]}_setProp(e,t,n=!0,r=!1){t!==this._props[e]&&(t===Kc?delete this._props[e]:(this._props[e]=t,"key"===e&&this._app&&(this._app._ceVNode.key=t)),r&&this._instance&&this._update(),n&&(!0===t?this.setAttribute(D(e),""):"string"==typeof t||"number"==typeof t?this.setAttribute(D(e),t+""):t||this.removeAttribute(D(e))))}_update(){Ld(this._createVNode(),this._root)}_createVNode(){const e={};this.shadowRoot||(e.onVnodeMounted=e.onVnodeUpdated=this._renderSlots.bind(this));const t=$s(this._def,d(e,this._props));return this._instance||(t.ce=e=>{this._instance=e,e.ce=this,e.isCE=!0;const t=(e,t)=>{this.dispatchEvent(new CustomEvent(e,C(t[0])?d({detail:t},t[0]):{detail:t}))};e.emit=(e,...n)=>{t(e,n),D(e)!==e&&t(D(e),n)},this._setParent()}),t}_applyStyles(e,t){if(!e)return;if(t){if(t===this._def||this._styleChildren.has(t))return;this._styleChildren.add(t)}const n=this._nonce;for(let t=e.length-1;t>=0;t--){const r=document.createElement("style");n&&r.setAttribute("nonce",n),r.textContent=e[t],this.shadowRoot.prepend(r)}}_parseSlots(){const e=this._slots={};let t;for(;t=this.firstChild;){const n=1===t.nodeType&&t.getAttribute("slot")||"default";(e[n]||(e[n]=[])).push(t),this.removeChild(t)}}_renderSlots(){const e=(this._teleportTarget||this).querySelectorAll("slot"),t=this._instance.type.__scopeId;for(let n=0;n<e.length;n++){const r=e[n],i=r.getAttribute("name")||"default",o=this._slots[i],s=r.parentNode;if(o)for(const e of o){if(t&&1===e.nodeType){const n=t+"-s",r=document.createTreeWalker(e,1);let i;for(e.setAttribute(n,"");i=r.nextNode();)i.setAttribute(n,"")}s.insertBefore(e,r)}else for(;r.firstChild;)s.insertBefore(r.firstChild,r);s.removeChild(r)}}_injectChildStyle(e){this._applyStyles(e.styles,e)}_removeChildStyle(e){0}}function Xc(e){const t=fa(),n=t&&t.ce;return n||null}function Qc(){const e=Xc();return e&&e.shadowRoot}function $c(e="$style"){{const t=fa();if(!t)return r;const n=t.type.__cssModules;if(!n)return r;const i=n[e];return i||r}}const Zc=new WeakMap,ed=new WeakMap,td=Symbol("_moveCb"),nd=Symbol("_enterCb"),rd=e=>(delete e.props.mode,e),id=rd({name:"TransitionGroup",props:d({},sc,{tag:String,moveClass:String}),setup(e,{slots:t}){const n=fa(),r=Ar();let i,o;return wi((()=>{if(!i.length)return;const t=e.moveClass||`${e.name||"v"}-move`;if(!function(e,t,n){const r=e.cloneNode(),i=e[ic];i&&i.forEach((e=>{e.split(/\s+/).forEach((e=>e&&r.classList.remove(e)))}));n.split(/\s+/).forEach((e=>e&&r.classList.add(e))),r.style.display="none";const o=1===t.nodeType?t:t.parentNode;o.appendChild(r);const{hasTransform:s}=Ec(r);return o.removeChild(r),s}(i[0].el,n.vnode.el,t))return;i.forEach(sd),i.forEach(ad);const r=i.filter(cd);bc(),r.forEach((e=>{const n=e.el,r=n.style;pc(n,t),r.transform=r.webkitTransform=r.transitionDuration="";const i=n[td]=e=>{e&&e.target!==n||e&&!/transform$/.test(e.propertyName)||(n.removeEventListener("transitionend",i),n[td]=null,fc(n,t))};n.addEventListener("transitionend",i)}))})),()=>{const s=$t(e),a=hc(s);let c=s.tag||Ps;if(i=[],o)for(let e=0;e<o.length;e++){const t=o[e];t.el&&t.el instanceof Element&&(i.push(t),Fr(t,Mr(t,a,r,n)),Zc.set(t,t.el.getBoundingClientRect()))}o=t.default?jr(t.default()):[];for(let e=0;e<o.length;e++){const t=o[e];null!=t.key&&Fr(t,Mr(t,a,r,n))}return $s(c,null,o)}}}),od=id;function sd(e){const t=e.el;t[td]&&t[td](),t[nd]&&t[nd]()}function ad(e){ed.set(e,e.el.getBoundingClientRect())}function cd(e){const t=Zc.get(e),n=ed.get(e),r=t.left-n.left,i=t.top-n.top;if(r||i){const t=e.el.style;return t.transform=t.webkitTransform=`translate(${r}px,${i}px)`,t.transitionDuration="0s",e}}const dd=e=>{const t=e.props["onUpdate:modelValue"]||!1;return p(t)?e=>U(t,e):t};function ld(e){e.target.composing=!0}function hd(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const ud=Symbol("_assign"),pd={created(e,{modifiers:{lazy:t,trim:n,number:r}},i){e[ud]=dd(i);const o=r||i.props&&"number"===i.props.type;Uc(e,t?"change":"input",(t=>{if(t.target.composing)return;let r=e.value;n&&(r=r.trim()),o&&(r=F(r)),e[ud](r)})),n&&Uc(e,"change",(()=>{e.value=e.value.trim()})),t||(Uc(e,"compositionstart",ld),Uc(e,"compositionend",hd),Uc(e,"change",hd))},mounted(e,{value:t}){e.value=null==t?"":t},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:r,trim:i,number:o}},s){if(e[ud]=dd(s),e.composing)return;const a=null==t?"":t;if((!o&&"number"!==e.type||/^0\d/.test(e.value)?e.value:F(e.value))!==a){if(document.activeElement===e&&"range"!==e.type){if(r&&t===n)return;if(i&&e.value.trim()===a)return}e.value=a}}},fd={deep:!0,created(e,t,n){e[ud]=dd(n),Uc(e,"change",(()=>{const t=e._modelValue,n=yd(e),r=e.checked,i=e[ud];if(p(t)){const e=he(t,n),o=-1!==e;if(r&&!o)i(t.concat(n));else if(!r&&o){const n=[...t];n.splice(e,1),i(n)}}else if(m(t)){const e=new Set(t);r?e.add(n):e.delete(n),i(e)}else i(vd(e,r))}))},mounted:md,beforeUpdate(e,t,n){e[ud]=dd(n),md(e,t,n)}};function md(e,{value:t,oldValue:n},r){let i;e._modelValue=t,i=p(t)?he(t,r.props.value)>-1:m(t)?t.has(r.props.value):le(t,vd(e,!0)),e.checked!==i&&(e.checked=i)}const gd={created(e,{value:t},n){e.checked=le(t,n.props.value),e[ud]=dd(n),Uc(e,"change",(()=>{e[ud](yd(e))}))},beforeUpdate(e,{value:t,oldValue:n},r){e[ud]=dd(r),t!==n&&(e.checked=le(t,r.props.value))}},_d={deep:!0,created(e,{value:t,modifiers:{number:n}},r){const i=m(t);Uc(e,"change",(()=>{const t=Array.prototype.filter.call(e.options,(e=>e.selected)).map((e=>n?F(yd(e)):yd(e)));e[ud](e.multiple?i?new Set(t):t:t[0]),e._assigning=!0,Jn((()=>{e._assigning=!1}))})),e[ud]=dd(r)},mounted(e,{value:t,modifiers:{number:n}}){Ed(e,t)},beforeUpdate(e,t,n){e[ud]=dd(n)},updated(e,{value:t,modifiers:{number:n}}){e._assigning||Ed(e,t)}};function Ed(e,t,n){const r=e.multiple,i=p(t);if(!r||i||m(t)){for(let n=0,o=e.options.length;n<o;n++){const o=e.options[n],s=yd(o);if(r)if(i){const e=typeof s;o.selected="string"===e||"number"===e?t.some((e=>String(e)===String(s))):he(t,s)>-1}else o.selected=t.has(s);else if(le(yd(o),t))return void(e.selectedIndex!==n&&(e.selectedIndex=n))}r||-1===e.selectedIndex||(e.selectedIndex=-1)}}function yd(e){return"_value"in e?e._value:e.value}function vd(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const bd={created(e,t,n){Td(e,t,n,null,"created")},mounted(e,t,n){Td(e,t,n,null,"mounted")},beforeUpdate(e,t,n,r){Td(e,t,n,r,"beforeUpdate")},updated(e,t,n,r){Td(e,t,n,r,"updated")}};function Sd(e,t){switch(e){case"SELECT":return _d;case"TEXTAREA":return pd;default:switch(t){case"checkbox":return fd;case"radio":return gd;default:return pd}}}function Td(e,t,n,r,i){const o=Sd(e.tagName,n.props&&n.props.type)[i];o&&o(e,t,n,r)}const Rd=["ctrl","shift","alt","meta"],Cd={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&0!==e.button,middle:e=>"button"in e&&1!==e.button,right:e=>"button"in e&&2!==e.button,exact:(e,t)=>Rd.some((n=>e[`${n}Key`]&&!t.includes(n)))},wd=(e,t)=>{const n=e._withMods||(e._withMods={}),r=t.join(".");return n[r]||(n[r]=(n,...r)=>{for(let e=0;e<t.length;e++){const r=Cd[t[e]];if(r&&r(n,t))return}return e(n,...r)})},Id={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Ad=(e,t)=>{const n=e._withKeys||(e._withKeys={}),r=t.join(".");return n[r]||(n[r]=n=>{if(!("key"in n))return;const r=D(n.key);return t.some((e=>e===r||Id[e]===r))?e(n):void 0})},Od=d({patchProp:(e,t,n,r,i,o)=>{const s="svg"===i;"class"===t?function(e,t,n){const r=e[ic];r&&(t=(t?[t,...r]:[...r]).join(" ")),null==t?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}(e,r,s):"style"===t?function(e,t,n){const r=e.style,i=E(n);let o=!1;if(n&&!i){if(t)if(E(t))for(const e of t.split(";")){const t=e.slice(0,e.indexOf(":")).trim();null==n[t]&&Pc(r,t,"")}else for(const e in t)null==n[e]&&Pc(r,e,"");for(const e in n)"display"===e&&(o=!0),Pc(r,e,n[e])}else if(i){if(t!==n){const e=r[wc];e&&(n+=";"+e),r.cssText=n,o=xc.test(n)}}else t&&e.removeAttribute("style");Sc in e&&(e[Sc]=o?r.display:"",e[Tc]&&(r.display="none"))}(e,n,r):a(t)?c(t)||Fc(e,t,0,r,o):("."===t[0]?(t=t.slice(1),1):"^"===t[0]?(t=t.slice(1),0):function(e,t,n,r){if(r)return"innerHTML"===t||"textContent"===t||!!(t in e&&Wc(t)&&_(n));if("spellcheck"===t||"draggable"===t||"translate"===t)return!1;if("form"===t)return!1;if("list"===t&&"INPUT"===e.tagName)return!1;if("type"===t&&"TEXTAREA"===e.tagName)return!1;if("width"===t||"height"===t){const t=e.tagName;if("IMG"===t||"VIDEO"===t||"CANVAS"===t||"SOURCE"===t)return!1}if(Wc(t)&&E(n))return!1;if(t in e)return!0;if(e._isVueCE&&(/[A-Z]/.test(t)||!E(n)))return!0;return!1}(e,t,r,s))?(!function(e,t,n){if("innerHTML"===t||"textContent"===t)return void(null!=n&&(e[t]="innerHTML"===t?$a(n):n));const r=e.tagName;if("value"===t&&"PROGRESS"!==r&&!r.includes("-")){const i="OPTION"===r?e.getAttribute("value")||"":e.value,o=null==n?"checkbox"===e.type?"on":"":String(n);return i===o&&"_value"in e||(e.value=o),null==n&&e.removeAttribute(t),void(e._value=n)}let i=!1;if(""===n||null==n){const r=typeof e[t];"boolean"===r?n=oe(n):null==n&&"string"===r?(n="",i=!0):"number"===r&&(n=0,i=!0)}try{e[t]=n}catch(e){}i&&e.removeAttribute(t)}(e,t,r),e.tagName.includes("-")||"value"!==t&&"checked"!==t&&"selected"!==t||Mc(e,t,r,s,0,"value"!==t)):("true-value"===t?e._trueValue=r:"false-value"===t&&(e._falseValue=r),Mc(e,t,r,s))}},tc);let xd,Nd=!1;function Pd(){return xd||(xd=Jo(Od))}function Dd(){return xd=Nd?xd:Xo(Od),Nd=!0,xd}const Ld=(...e)=>{Pd().render(...e)},kd=(...e)=>{Dd().hydrate(...e)},Md=(...e)=>{const t=Pd().createApp(...e);const{mount:n}=t;return t.mount=e=>{const r=Fd(e);if(!r)return;const i=t._component;_(i)||i.render||i.template||(i.template=r.innerHTML),1===r.nodeType&&(r.textContent="");const o=n(r,!1,Vd(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},t},Ud=(...e)=>{const t=Dd().createApp(...e);const{mount:n}=t;return t.mount=e=>{const t=Fd(e);if(t)return n(t,!0,Vd(t))},t};function Vd(e){return e instanceof SVGElement?"svg":"function"==typeof MathMLElement&&e instanceof MathMLElement?"mathml":void 0}function Fd(e){if(E(e)){return document.querySelector(e)}return e}let jd=!1;const Bd=()=>{jd||(jd=!0,pd.getSSRProps=({value:e})=>({value:e}),gd.getSSRProps=({value:e},t)=>{if(t.props&&le(t.props.value,e))return{checked:!0}},fd.getSSRProps=({value:e},t)=>{if(p(e)){if(t.props&&he(e,t.props.value)>-1)return{checked:!0}}else if(m(e)){if(t.props&&e.has(t.props.value))return{checked:!0}}else if(e)return{checked:!0}},bd.getSSRProps=(e,t)=>{if("string"!=typeof t.type)return;const n=Sd(t.type.toUpperCase(),t.props&&t.props.type);return n.getSSRProps?n.getSSRProps(e,t):void 0},Rc.getSSRProps=({value:e})=>{if(!e)return{style:{display:"none"}}})},Gd=Symbol(""),Hd=Symbol(""),Wd=Symbol(""),Kd=Symbol(""),zd=Symbol(""),qd=Symbol(""),Yd=Symbol(""),Jd=Symbol(""),Xd=Symbol(""),Qd=Symbol(""),$d=Symbol(""),Zd=Symbol(""),el=Symbol(""),tl=Symbol(""),nl=Symbol(""),rl=Symbol(""),il=Symbol(""),ol=Symbol(""),sl=Symbol(""),al=Symbol(""),cl=Symbol(""),dl=Symbol(""),ll=Symbol(""),hl=Symbol(""),ul=Symbol(""),pl=Symbol(""),fl=Symbol(""),ml=Symbol(""),gl=Symbol(""),_l=Symbol(""),El=Symbol(""),yl=Symbol(""),vl=Symbol(""),bl=Symbol(""),Sl=Symbol(""),Tl=Symbol(""),Rl=Symbol(""),Cl=Symbol(""),wl=Symbol(""),Il={[Gd]:"Fragment",[Hd]:"Teleport",[Wd]:"Suspense",[Kd]:"KeepAlive",[zd]:"BaseTransition",[qd]:"openBlock",[Yd]:"createBlock",[Jd]:"createElementBlock",[Xd]:"createVNode",[Qd]:"createElementVNode",[$d]:"createCommentVNode",[Zd]:"createTextVNode",[el]:"createStaticVNode",[tl]:"resolveComponent",[nl]:"resolveDynamicComponent",[rl]:"resolveDirective",[il]:"resolveFilter",[ol]:"withDirectives",[sl]:"renderList",[al]:"renderSlot",[cl]:"createSlots",[dl]:"toDisplayString",[ll]:"mergeProps",[hl]:"normalizeClass",[ul]:"normalizeStyle",[pl]:"normalizeProps",[fl]:"guardReactiveProps",[ml]:"toHandlers",[gl]:"camelize",[_l]:"capitalize",[El]:"toHandlerKey",[yl]:"setBlockTracking",[vl]:"pushScopeId",[bl]:"popScopeId",[Sl]:"withCtx",[Tl]:"unref",[Rl]:"isRef",[Cl]:"withMemo",[wl]:"isMemoSame"};const Al={start:{line:1,column:1,offset:0},end:{line:1,column:1,offset:0},source:""};function Ol(e,t,n,r,i,o,s,a=!1,c=!1,d=!1,l=Al){return e&&(a?(e.helper(qd),e.helper(Fl(e.inSSR,d))):e.helper(Vl(e.inSSR,d)),s&&e.helper(ol)),{type:13,tag:t,props:n,children:r,patchFlag:i,dynamicProps:o,directives:s,isBlock:a,disableTracking:c,isComponent:d,loc:l}}function xl(e,t=Al){return{type:17,loc:t,elements:e}}function Nl(e,t=Al){return{type:15,loc:t,properties:e}}function Pl(e,t){return{type:16,loc:Al,key:E(e)?Dl(e,!0):e,value:t}}function Dl(e,t=!1,n=Al,r=0){return{type:4,loc:n,content:e,isStatic:t,constType:t?3:r}}function Ll(e,t=Al){return{type:8,loc:t,children:e}}function kl(e,t=[],n=Al){return{type:14,loc:n,callee:e,arguments:t}}function Ml(e,t=void 0,n=!1,r=!1,i=Al){return{type:18,params:e,returns:t,newline:n,isSlot:r,loc:i}}function Ul(e,t,n,r=!0){return{type:19,test:e,consequent:t,alternate:n,newline:r,loc:Al}}function Vl(e,t){return e||t?Xd:Qd}function Fl(e,t){return e||t?Yd:Jd}function jl(e,{helper:t,removeHelper:n,inSSR:r}){e.isBlock||(e.isBlock=!0,n(Vl(r,e.isComponent)),t(qd),t(Fl(r,e.isComponent)))}const Bl=new Uint8Array([123,123]),Gl=new Uint8Array([125,125]);function Hl(e){return e>=97&&e<=122||e>=65&&e<=90}function Wl(e){return 32===e||10===e||9===e||12===e||13===e}function Kl(e){return 47===e||62===e||Wl(e)}function zl(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}const ql={Cdata:new Uint8Array([67,68,65,84,65,91]),CdataEnd:new Uint8Array([93,93,62]),CommentEnd:new Uint8Array([45,45,62]),ScriptEnd:new Uint8Array([60,47,115,99,114,105,112,116]),StyleEnd:new Uint8Array([60,47,115,116,121,108,101]),TitleEnd:new Uint8Array([60,47,116,105,116,108,101]),TextareaEnd:new Uint8Array([60,47,116,101,120,116,97,114,101,97])};function Yl(e,{compatConfig:t}){const n=t&&t[e];return"MODE"===e?n||3:n}function Jl(e,t){const n=Yl("MODE",t),r=Yl(e,t);return 3===n?!0===r:!1!==r}function Xl(e,t,n,...r){return Jl(e,t)}function Ql(e){throw e}function $l(e){}function Zl(e,t,n,r){const i=new SyntaxError(String(`https://vuejs.org/error-reference/#compiler-${e}`));return i.code=e,i.loc=t,i}const eh=e=>4===e.type&&e.isStatic;function th(e){switch(e){case"Teleport":case"teleport":return Hd;case"Suspense":case"suspense":return Wd;case"KeepAlive":case"keep-alive":return Kd;case"BaseTransition":case"base-transition":return zd}}const nh=/^\d|[^\$\w\xA0-\uFFFF]/,rh=e=>!nh.test(e),ih=/[A-Za-z_$\xA0-\uFFFF]/,oh=/[\.\?\w$\xA0-\uFFFF]/,sh=/\s+[.[]\s*|\s*[.[]\s+/g,ah=e=>4===e.type?e.content:e.loc.source,ch=e=>{const t=ah(e).trim().replace(sh,(e=>e.trim()));let n=0,r=[],i=0,o=0,s=null;for(let e=0;e<t.length;e++){const a=t.charAt(e);switch(n){case 0:if("["===a)r.push(n),n=1,i++;else if("("===a)r.push(n),n=2,o++;else if(!(0===e?ih:oh).test(a))return!1;break;case 1:"'"===a||'"'===a||"`"===a?(r.push(n),n=3,s=a):"["===a?i++:"]"===a&&(--i||(n=r.pop()));break;case 2:if("'"===a||'"'===a||"`"===a)r.push(n),n=3,s=a;else if("("===a)o++;else if(")"===a){if(e===t.length-1)return!1;--o||(n=r.pop())}break;case 3:a===s&&(n=r.pop(),s=null)}}return!i&&!o},dh=/^\s*(async\s*)?(\([^)]*?\)|[\w$_]+)\s*(:[^=]+)?=>|^\s*(async\s+)?function(?:\s+[\w$]+)?\s*\(/,lh=e=>dh.test(ah(e));function hh(e,t,n=!1){for(let r=0;r<e.props.length;r++){const i=e.props[r];if(7===i.type&&(n||i.exp)&&(E(t)?i.name===t:t.test(i.name)))return i}}function uh(e,t,n=!1,r=!1){for(let i=0;i<e.props.length;i++){const o=e.props[i];if(6===o.type){if(n)continue;if(o.name===t&&(o.value||r))return o}else if("bind"===o.name&&(o.exp||r)&&ph(o.arg,t))return o}}function ph(e,t){return!(!e||!eh(e)||e.content!==t)}function fh(e){return 5===e.type||2===e.type}function mh(e){return 7===e.type&&"slot"===e.name}function gh(e){return 1===e.type&&3===e.tagType}function _h(e){return 1===e.type&&2===e.tagType}const Eh=new Set([pl,fl]);function yh(e,t=[]){if(e&&!E(e)&&14===e.type){const n=e.callee;if(!E(n)&&Eh.has(n))return yh(e.arguments[0],t.concat(e))}return[e,t]}function vh(e,t,n){let r,i,o=13===e.type?e.props:e.arguments[2],s=[];if(o&&!E(o)&&14===o.type){const e=yh(o);o=e[0],s=e[1],i=s[s.length-1]}if(null==o||E(o))r=Nl([t]);else if(14===o.type){const e=o.arguments[0];E(e)||15!==e.type?o.callee===ml?r=kl(n.helper(ll),[Nl([t]),o]):o.arguments.unshift(Nl([t])):bh(t,e)||e.properties.unshift(t),!r&&(r=o)}else 15===o.type?(bh(t,o)||o.properties.unshift(t),r=o):(r=kl(n.helper(ll),[Nl([t]),o]),i&&i.callee===fl&&(i=s[s.length-2]));13===e.type?i?i.arguments[0]=r:e.props=r:i?i.arguments[0]=r:e.arguments[2]=r}function bh(e,t){let n=!1;if(4===e.key.type){const r=e.key.content;n=t.properties.some((e=>4===e.key.type&&e.key.content===r))}return n}function Sh(e,t){return`_${t}_${e.replace(/[^\w]/g,((t,n)=>"-"===t?"_":e.charCodeAt(n).toString()))}`}const Th=/([\s\S]*?)\s+(?:in|of)\s+(\S[\s\S]*)/,Rh={parseMode:"base",ns:0,delimiters:["{{","}}"],getNamespace:()=>0,isVoidTag:s,isPreTag:s,isIgnoreNewlineTag:s,isCustomElement:s,onError:Ql,onWarn:$l,comments:!1,prefixIdentifiers:!1};let Ch=Rh,wh=null,Ih="",Ah=null,Oh=null,xh="",Nh=-1,Ph=-1,Dh=0,Lh=!1,kh=null;const Mh=[],Uh=new class{constructor(e,t){this.stack=e,this.cbs=t,this.state=1,this.buffer="",this.sectionStart=0,this.index=0,this.entityStart=0,this.baseState=1,this.inRCDATA=!1,this.inXML=!1,this.inVPre=!1,this.newlines=[],this.mode=0,this.delimiterOpen=Bl,this.delimiterClose=Gl,this.delimiterIndex=-1,this.currentSequence=void 0,this.sequenceIndex=0}get inSFCRoot(){return 2===this.mode&&0===this.stack.length}reset(){this.state=1,this.mode=0,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=1,this.inRCDATA=!1,this.currentSequence=void 0,this.newlines.length=0,this.delimiterOpen=Bl,this.delimiterClose=Gl}getPos(e){let t=1,n=e+1;for(let r=this.newlines.length-1;r>=0;r--){const i=this.newlines[r];if(e>i){t=r+2,n=e-i;break}}return{column:n,line:t,offset:e}}peek(){return this.buffer.charCodeAt(this.index+1)}stateText(e){60===e?(this.index>this.sectionStart&&this.cbs.ontext(this.sectionStart,this.index),this.state=5,this.sectionStart=this.index):this.inVPre||e!==this.delimiterOpen[0]||(this.state=2,this.delimiterIndex=0,this.stateInterpolationOpen(e))}stateInterpolationOpen(e){if(e===this.delimiterOpen[this.delimiterIndex])if(this.delimiterIndex===this.delimiterOpen.length-1){const e=this.index+1-this.delimiterOpen.length;e>this.sectionStart&&this.cbs.ontext(this.sectionStart,e),this.state=3,this.sectionStart=e}else this.delimiterIndex++;else this.inRCDATA?(this.state=32,this.stateInRCDATA(e)):(this.state=1,this.stateText(e))}stateInterpolation(e){e===this.delimiterClose[0]&&(this.state=4,this.delimiterIndex=0,this.stateInterpolationClose(e))}stateInterpolationClose(e){e===this.delimiterClose[this.delimiterIndex]?this.delimiterIndex===this.delimiterClose.length-1?(this.cbs.oninterpolation(this.sectionStart,this.index+1),this.inRCDATA?this.state=32:this.state=1,this.sectionStart=this.index+1):this.delimiterIndex++:(this.state=3,this.stateInterpolation(e))}stateSpecialStartSequence(e){const t=this.sequenceIndex===this.currentSequence.length;if(t?Kl(e):(32|e)===this.currentSequence[this.sequenceIndex]){if(!t)return void this.sequenceIndex++}else this.inRCDATA=!1;this.sequenceIndex=0,this.state=6,this.stateInTagName(e)}stateInRCDATA(e){if(this.sequenceIndex===this.currentSequence.length){if(62===e||Wl(e)){const t=this.index-this.currentSequence.length;if(this.sectionStart<t){const e=this.index;this.index=t,this.cbs.ontext(this.sectionStart,t),this.index=e}return this.sectionStart=t+2,this.stateInClosingTagName(e),void(this.inRCDATA=!1)}this.sequenceIndex=0}(32|e)===this.currentSequence[this.sequenceIndex]?this.sequenceIndex+=1:0===this.sequenceIndex?this.currentSequence===ql.TitleEnd||this.currentSequence===ql.TextareaEnd&&!this.inSFCRoot?this.inVPre||e!==this.delimiterOpen[0]||(this.state=2,this.delimiterIndex=0,this.stateInterpolationOpen(e)):this.fastForwardTo(60)&&(this.sequenceIndex=1):this.sequenceIndex=Number(60===e)}stateCDATASequence(e){e===ql.Cdata[this.sequenceIndex]?++this.sequenceIndex===ql.Cdata.length&&(this.state=28,this.currentSequence=ql.CdataEnd,this.sequenceIndex=0,this.sectionStart=this.index+1):(this.sequenceIndex=0,this.state=23,this.stateInDeclaration(e))}fastForwardTo(e){for(;++this.index<this.buffer.length;){const t=this.buffer.charCodeAt(this.index);if(10===t&&this.newlines.push(this.index),t===e)return!0}return this.index=this.buffer.length-1,!1}stateInCommentLike(e){e===this.currentSequence[this.sequenceIndex]?++this.sequenceIndex===this.currentSequence.length&&(this.currentSequence===ql.CdataEnd?this.cbs.oncdata(this.sectionStart,this.index-2):this.cbs.oncomment(this.sectionStart,this.index-2),this.sequenceIndex=0,this.sectionStart=this.index+1,this.state=1):0===this.sequenceIndex?this.fastForwardTo(this.currentSequence[0])&&(this.sequenceIndex=1):e!==this.currentSequence[this.sequenceIndex-1]&&(this.sequenceIndex=0)}startSpecial(e,t){this.enterRCDATA(e,t),this.state=31}enterRCDATA(e,t){this.inRCDATA=!0,this.currentSequence=e,this.sequenceIndex=t}stateBeforeTagName(e){33===e?(this.state=22,this.sectionStart=this.index+1):63===e?(this.state=24,this.sectionStart=this.index+1):Hl(e)?(this.sectionStart=this.index,0===this.mode?this.state=6:this.inSFCRoot?this.state=34:this.inXML?this.state=6:this.state=116===e?30:115===e?29:6):47===e?this.state=8:(this.state=1,this.stateText(e))}stateInTagName(e){Kl(e)&&this.handleTagName(e)}stateInSFCRootTagName(e){if(Kl(e)){const t=this.buffer.slice(this.sectionStart,this.index);"template"!==t&&this.enterRCDATA(zl("</"+t),0),this.handleTagName(e)}}handleTagName(e){this.cbs.onopentagname(this.sectionStart,this.index),this.sectionStart=-1,this.state=11,this.stateBeforeAttrName(e)}stateBeforeClosingTagName(e){Wl(e)||(62===e?(this.state=1,this.sectionStart=this.index+1):(this.state=Hl(e)?9:27,this.sectionStart=this.index))}stateInClosingTagName(e){(62===e||Wl(e))&&(this.cbs.onclosetag(this.sectionStart,this.index),this.sectionStart=-1,this.state=10,this.stateAfterClosingTagName(e))}stateAfterClosingTagName(e){62===e&&(this.state=1,this.sectionStart=this.index+1)}stateBeforeAttrName(e){62===e?(this.cbs.onopentagend(this.index),this.inRCDATA?this.state=32:this.state=1,this.sectionStart=this.index+1):47===e?this.state=7:60===e&&47===this.peek()?(this.cbs.onopentagend(this.index),this.state=5,this.sectionStart=this.index):Wl(e)||this.handleAttrStart(e)}handleAttrStart(e){118===e&&45===this.peek()?(this.state=13,this.sectionStart=this.index):46===e||58===e||64===e||35===e?(this.cbs.ondirname(this.index,this.index+1),this.state=14,this.sectionStart=this.index+1):(this.state=12,this.sectionStart=this.index)}stateInSelfClosingTag(e){62===e?(this.cbs.onselfclosingtag(this.index),this.state=1,this.sectionStart=this.index+1,this.inRCDATA=!1):Wl(e)||(this.state=11,this.stateBeforeAttrName(e))}stateInAttrName(e){(61===e||Kl(e))&&(this.cbs.onattribname(this.sectionStart,this.index),this.handleAttrNameEnd(e))}stateInDirName(e){61===e||Kl(e)?(this.cbs.ondirname(this.sectionStart,this.index),this.handleAttrNameEnd(e)):58===e?(this.cbs.ondirname(this.sectionStart,this.index),this.state=14,this.sectionStart=this.index+1):46===e&&(this.cbs.ondirname(this.sectionStart,this.index),this.state=16,this.sectionStart=this.index+1)}stateInDirArg(e){61===e||Kl(e)?(this.cbs.ondirarg(this.sectionStart,this.index),this.handleAttrNameEnd(e)):91===e?this.state=15:46===e&&(this.cbs.ondirarg(this.sectionStart,this.index),this.state=16,this.sectionStart=this.index+1)}stateInDynamicDirArg(e){93===e?this.state=14:(61===e||Kl(e))&&(this.cbs.ondirarg(this.sectionStart,this.index+1),this.handleAttrNameEnd(e))}stateInDirModifier(e){61===e||Kl(e)?(this.cbs.ondirmodifier(this.sectionStart,this.index),this.handleAttrNameEnd(e)):46===e&&(this.cbs.ondirmodifier(this.sectionStart,this.index),this.sectionStart=this.index+1)}handleAttrNameEnd(e){this.sectionStart=this.index,this.state=17,this.cbs.onattribnameend(this.index),this.stateAfterAttrName(e)}stateAfterAttrName(e){61===e?this.state=18:47===e||62===e?(this.cbs.onattribend(0,this.sectionStart),this.sectionStart=-1,this.state=11,this.stateBeforeAttrName(e)):Wl(e)||(this.cbs.onattribend(0,this.sectionStart),this.handleAttrStart(e))}stateBeforeAttrValue(e){34===e?(this.state=19,this.sectionStart=this.index+1):39===e?(this.state=20,this.sectionStart=this.index+1):Wl(e)||(this.sectionStart=this.index,this.state=21,this.stateInAttrValueNoQuotes(e))}handleInAttrValue(e,t){(e===t||this.fastForwardTo(t))&&(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(34===t?3:2,this.index+1),this.state=11)}stateInAttrValueDoubleQuotes(e){this.handleInAttrValue(e,34)}stateInAttrValueSingleQuotes(e){this.handleInAttrValue(e,39)}stateInAttrValueNoQuotes(e){Wl(e)||62===e?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(1,this.index),this.state=11,this.stateBeforeAttrName(e)):39!==e&&60!==e&&61!==e&&96!==e||this.cbs.onerr(18,this.index)}stateBeforeDeclaration(e){91===e?(this.state=26,this.sequenceIndex=0):this.state=45===e?25:23}stateInDeclaration(e){(62===e||this.fastForwardTo(62))&&(this.state=1,this.sectionStart=this.index+1)}stateInProcessingInstruction(e){(62===e||this.fastForwardTo(62))&&(this.cbs.onprocessinginstruction(this.sectionStart,this.index),this.state=1,this.sectionStart=this.index+1)}stateBeforeComment(e){45===e?(this.state=28,this.currentSequence=ql.CommentEnd,this.sequenceIndex=2,this.sectionStart=this.index+1):this.state=23}stateInSpecialComment(e){(62===e||this.fastForwardTo(62))&&(this.cbs.oncomment(this.sectionStart,this.index),this.state=1,this.sectionStart=this.index+1)}stateBeforeSpecialS(e){e===ql.ScriptEnd[3]?this.startSpecial(ql.ScriptEnd,4):e===ql.StyleEnd[3]?this.startSpecial(ql.StyleEnd,4):(this.state=6,this.stateInTagName(e))}stateBeforeSpecialT(e){e===ql.TitleEnd[3]?this.startSpecial(ql.TitleEnd,4):e===ql.TextareaEnd[3]?this.startSpecial(ql.TextareaEnd,4):(this.state=6,this.stateInTagName(e))}startEntity(){}stateInEntity(){}parse(e){for(this.buffer=e;this.index<this.buffer.length;){const e=this.buffer.charCodeAt(this.index);switch(10===e&&this.newlines.push(this.index),this.state){case 1:this.stateText(e);break;case 2:this.stateInterpolationOpen(e);break;case 3:this.stateInterpolation(e);break;case 4:this.stateInterpolationClose(e);break;case 31:this.stateSpecialStartSequence(e);break;case 32:this.stateInRCDATA(e);break;case 26:this.stateCDATASequence(e);break;case 19:this.stateInAttrValueDoubleQuotes(e);break;case 12:this.stateInAttrName(e);break;case 13:this.stateInDirName(e);break;case 14:this.stateInDirArg(e);break;case 15:this.stateInDynamicDirArg(e);break;case 16:this.stateInDirModifier(e);break;case 28:this.stateInCommentLike(e);break;case 27:this.stateInSpecialComment(e);break;case 11:this.stateBeforeAttrName(e);break;case 6:this.stateInTagName(e);break;case 34:this.stateInSFCRootTagName(e);break;case 9:this.stateInClosingTagName(e);break;case 5:this.stateBeforeTagName(e);break;case 17:this.stateAfterAttrName(e);break;case 20:this.stateInAttrValueSingleQuotes(e);break;case 18:this.stateBeforeAttrValue(e);break;case 8:this.stateBeforeClosingTagName(e);break;case 10:this.stateAfterClosingTagName(e);break;case 29:this.stateBeforeSpecialS(e);break;case 30:this.stateBeforeSpecialT(e);break;case 21:this.stateInAttrValueNoQuotes(e);break;case 7:this.stateInSelfClosingTag(e);break;case 23:this.stateInDeclaration(e);break;case 22:this.stateBeforeDeclaration(e);break;case 25:this.stateBeforeComment(e);break;case 24:this.stateInProcessingInstruction(e);break;case 33:this.stateInEntity()}this.index++}this.cleanup(),this.finish()}cleanup(){this.sectionStart!==this.index&&(1===this.state||32===this.state&&0===this.sequenceIndex?(this.cbs.ontext(this.sectionStart,this.index),this.sectionStart=this.index):19!==this.state&&20!==this.state&&21!==this.state||(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=this.index))}finish(){this.handleTrailingData(),this.cbs.onend()}handleTrailingData(){const e=this.buffer.length;this.sectionStart>=e||(28===this.state?this.currentSequence===ql.CdataEnd?this.cbs.oncdata(this.sectionStart,e):this.cbs.oncomment(this.sectionStart,e):6===this.state||11===this.state||18===this.state||17===this.state||12===this.state||13===this.state||14===this.state||15===this.state||16===this.state||20===this.state||19===this.state||21===this.state||9===this.state||this.cbs.ontext(this.sectionStart,e))}emitCodePoint(e,t){}}(Mh,{onerr:ru,ontext(e,t){Gh(jh(e,t),e,t)},ontextentity(e,t,n){Gh(e,t,n)},oninterpolation(e,t){if(Lh)return Gh(jh(e,t),e,t);let n=e+Uh.delimiterOpen.length,r=t-Uh.delimiterClose.length;for(;Wl(Ih.charCodeAt(n));)n++;for(;Wl(Ih.charCodeAt(r-1));)r--;let i=jh(n,r);i.includes("&")&&(i=Ch.decodeEntities(i,!1)),$h({type:5,content:nu(i,!1,Zh(n,r)),loc:Zh(e,t)})},onopentagname(e,t){const n=jh(e,t);Ah={type:1,tag:n,ns:Ch.getNamespace(n,Mh[0],Ch.ns),tagType:0,props:[],children:[],loc:Zh(e-1,t),codegenNode:void 0}},onopentagend(e){Bh(e)},onclosetag(e,t){const n=jh(e,t);if(!Ch.isVoidTag(n)){let r=!1;for(let e=0;e<Mh.length;e++){if(Mh[e].tag.toLowerCase()===n.toLowerCase()){r=!0,e>0&&ru(24,Mh[0].loc.start.offset);for(let n=0;n<=e;n++){Hh(Mh.shift(),t,n<e)}break}}r||ru(23,Wh(e,60))}},onselfclosingtag(e){const t=Ah.tag;Ah.isSelfClosing=!0,Bh(e),Mh[0]&&Mh[0].tag===t&&Hh(Mh.shift(),e)},onattribname(e,t){Oh={type:6,name:jh(e,t),nameLoc:Zh(e,t),value:void 0,loc:Zh(e)}},ondirname(e,t){const n=jh(e,t),r="."===n||":"===n?"bind":"@"===n?"on":"#"===n?"slot":n.slice(2);if(Lh||""!==r||ru(26,e),Lh||""===r)Oh={type:6,name:n,nameLoc:Zh(e,t),value:void 0,loc:Zh(e)};else if(Oh={type:7,name:r,rawName:n,exp:void 0,arg:void 0,modifiers:"."===n?[Dl("prop")]:[],loc:Zh(e)},"pre"===r){Lh=Uh.inVPre=!0,kh=Ah;const e=Ah.props;for(let t=0;t<e.length;t++)7===e[t].type&&(e[t]=tu(e[t]))}},ondirarg(e,t){if(e===t)return;const n=jh(e,t);if(Lh)Oh.name+=n,eu(Oh.nameLoc,t);else{const r="["!==n[0];Oh.arg=nu(r?n:n.slice(1,-1),r,Zh(e,t),r?3:0)}},ondirmodifier(e,t){const n=jh(e,t);if(Lh)Oh.name+="."+n,eu(Oh.nameLoc,t);else if("slot"===Oh.name){const e=Oh.arg;e&&(e.content+="."+n,eu(e.loc,t))}else{const r=Dl(n,!0,Zh(e,t));Oh.modifiers.push(r)}},onattribdata(e,t){xh+=jh(e,t),Nh<0&&(Nh=e),Ph=t},onattribentity(e,t,n){xh+=e,Nh<0&&(Nh=t),Ph=n},onattribnameend(e){const t=Oh.loc.start.offset,n=jh(t,e);7===Oh.type&&(Oh.rawName=n),Ah.props.some((e=>(7===e.type?e.rawName:e.name)===n))&&ru(2,t)},onattribend(e,t){if(Ah&&Oh){if(eu(Oh.loc,t),0!==e)if(xh.includes("&")&&(xh=Ch.decodeEntities(xh,!0)),6===Oh.type)"class"===Oh.name&&(xh=Qh(xh).trim()),1!==e||xh||ru(13,t),Oh.value={type:2,content:xh,loc:1===e?Zh(Nh,Ph):Zh(Nh-1,Ph+1)},Uh.inSFCRoot&&"template"===Ah.tag&&"lang"===Oh.name&&xh&&"html"!==xh&&Uh.enterRCDATA(zl("</template"),0);else{let e=0;Oh.exp=nu(xh,!1,Zh(Nh,Ph),0,e),"for"===Oh.name&&(Oh.forParseResult=function(e){const t=e.loc,n=e.content,r=n.match(Th);if(!r)return;const[,i,o]=r,s=(e,n,r=!1)=>{const i=t.start.offset+n;return nu(e,!1,Zh(i,i+e.length),0,r?1:0)},a={source:s(o.trim(),n.indexOf(o,i.length)),value:void 0,key:void 0,index:void 0,finalized:!1};let c=i.trim().replace(Fh,"").trim();const d=i.indexOf(c),l=c.match(Vh);if(l){c=c.replace(Vh,"").trim();const e=l[1].trim();let t;if(e&&(t=n.indexOf(e,d+c.length),a.key=s(e,t,!0)),l[2]){const r=l[2].trim();r&&(a.index=s(r,n.indexOf(r,a.key?t+e.length:d+c.length),!0))}}c&&(a.value=s(c,d,!0));return a}(Oh.exp));let t=-1;"bind"===Oh.name&&(t=Oh.modifiers.findIndex((e=>"sync"===e.content)))>-1&&Xl("COMPILER_V_BIND_SYNC",Ch,Oh.loc,Oh.rawName)&&(Oh.name="model",Oh.modifiers.splice(t,1))}7===Oh.type&&"pre"===Oh.name||Ah.props.push(Oh)}xh="",Nh=Ph=-1},oncomment(e,t){Ch.comments&&$h({type:3,content:jh(e,t),loc:Zh(e-4,t+3)})},onend(){const e=Ih.length;for(let t=0;t<Mh.length;t++)Hh(Mh[t],e-1),ru(24,Mh[t].loc.start.offset)},oncdata(e,t){0!==Mh[0].ns?Gh(jh(e,t),e,t):ru(1,e-9)},onprocessinginstruction(e){0===(Mh[0]?Mh[0].ns:Ch.ns)&&ru(21,e-1)}}),Vh=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,Fh=/^\(|\)$/g;function jh(e,t){return Ih.slice(e,t)}function Bh(e){Uh.inSFCRoot&&(Ah.innerLoc=Zh(e+1,e+1)),$h(Ah);const{tag:t,ns:n}=Ah;0===n&&Ch.isPreTag(t)&&Dh++,Ch.isVoidTag(t)?Hh(Ah,e):(Mh.unshift(Ah),1!==n&&2!==n||(Uh.inXML=!0)),Ah=null}function Gh(e,t,n){{const t=Mh[0]&&Mh[0].tag;"script"!==t&&"style"!==t&&e.includes("&")&&(e=Ch.decodeEntities(e,!1))}const r=Mh[0]||wh,i=r.children[r.children.length-1];i&&2===i.type?(i.content+=e,eu(i.loc,n)):r.children.push({type:2,content:e,loc:Zh(t,n)})}function Hh(e,t,n=!1){eu(e.loc,n?Wh(t,60):function(e,t){let n=e;for(;Ih.charCodeAt(n)!==t&&n<Ih.length-1;)n++;return n}(t,62)+1),Uh.inSFCRoot&&(e.children.length?e.innerLoc.end=d({},e.children[e.children.length-1].loc.end):e.innerLoc.end=d({},e.innerLoc.start),e.innerLoc.source=jh(e.innerLoc.start.offset,e.innerLoc.end.offset));const{tag:r,ns:i,children:o}=e;if(Lh||("slot"===r?e.tagType=2:zh(e)?e.tagType=3:function({tag:e,props:t}){if(Ch.isCustomElement(e))return!1;if("component"===e||function(e){return e>64&&e<91}(e.charCodeAt(0))||th(e)||Ch.isBuiltInComponent&&Ch.isBuiltInComponent(e)||Ch.isNativeTag&&!Ch.isNativeTag(e))return!0;for(let e=0;e<t.length;e++){const n=t[e];if(6===n.type){if("is"===n.name&&n.value){if(n.value.content.startsWith("vue:"))return!0;if(Xl("COMPILER_IS_ON_ELEMENT",Ch,n.loc))return!0}}else if("bind"===n.name&&ph(n.arg,"is")&&Xl("COMPILER_IS_ON_ELEMENT",Ch,n.loc))return!0}return!1}(e)&&(e.tagType=1)),Uh.inRCDATA||(e.children=Yh(o)),0===i&&Ch.isIgnoreNewlineTag(r)){const e=o[0];e&&2===e.type&&(e.content=e.content.replace(/^\r?\n/,""))}0===i&&Ch.isPreTag(r)&&Dh--,kh===e&&(Lh=Uh.inVPre=!1,kh=null),Uh.inXML&&0===(Mh[0]?Mh[0].ns:Ch.ns)&&(Uh.inXML=!1);{const t=e.props;if(!Uh.inSFCRoot&&Jl("COMPILER_NATIVE_TEMPLATE",Ch)&&"template"===e.tag&&!zh(e)){const t=Mh[0]||wh,n=t.children.indexOf(e);t.children.splice(n,1,...e.children)}const n=t.find((e=>6===e.type&&"inline-template"===e.name));n&&Xl("COMPILER_INLINE_TEMPLATE",Ch,n.loc)&&e.children.length&&(n.value={type:2,content:jh(e.children[0].loc.start.offset,e.children[e.children.length-1].loc.end.offset),loc:n.loc})}}function Wh(e,t){let n=e;for(;Ih.charCodeAt(n)!==t&&n>=0;)n--;return n}const Kh=new Set(["if","else","else-if","for","slot"]);function zh({tag:e,props:t}){if("template"===e)for(let e=0;e<t.length;e++)if(7===t[e].type&&Kh.has(t[e].name))return!0;return!1}const qh=/\r\n/g;function Yh(e,t){const n="preserve"!==Ch.whitespace;let r=!1;for(let t=0;t<e.length;t++){const i=e[t];if(2===i.type)if(Dh)i.content=i.content.replace(qh,"\n");else if(Jh(i.content)){const o=e[t-1]&&e[t-1].type,s=e[t+1]&&e[t+1].type;!o||!s||n&&(3===o&&(3===s||1===s)||1===o&&(3===s||1===s&&Xh(i.content)))?(r=!0,e[t]=null):i.content=" "}else n&&(i.content=Qh(i.content))}return r?e.filter(Boolean):e}function Jh(e){for(let t=0;t<e.length;t++)if(!Wl(e.charCodeAt(t)))return!1;return!0}function Xh(e){for(let t=0;t<e.length;t++){const n=e.charCodeAt(t);if(10===n||13===n)return!0}return!1}function Qh(e){let t="",n=!1;for(let r=0;r<e.length;r++)Wl(e.charCodeAt(r))?n||(t+=" ",n=!0):(t+=e[r],n=!1);return t}function $h(e){(Mh[0]||wh).children.push(e)}function Zh(e,t){return{start:Uh.getPos(e),end:null==t?t:Uh.getPos(t),source:null==t?t:jh(e,t)}}function eu(e,t){e.end=Uh.getPos(t),e.source=jh(e.start.offset,t)}function tu(e){const t={type:6,name:e.rawName,nameLoc:Zh(e.loc.start.offset,e.loc.start.offset+e.rawName.length),value:void 0,loc:e.loc};if(e.exp){const n=e.exp.loc;n.end.offset<e.loc.end.offset&&(n.start.offset--,n.start.column--,n.end.offset++,n.end.column++),t.value={type:2,content:e.exp.content,loc:n}}return t}function nu(e,t=!1,n,r=0,i=0){return Dl(e,t,n,r)}function ru(e,t,n){Ch.onError(Zl(e,Zh(t,t)))}function iu(e,t){if(Uh.reset(),Ah=null,Oh=null,xh="",Nh=-1,Ph=-1,Mh.length=0,Ih=e,Ch=d({},Rh),t){let e;for(e in t)null!=t[e]&&(Ch[e]=t[e])}Uh.mode="html"===Ch.parseMode?1:"sfc"===Ch.parseMode?2:0,Uh.inXML=1===Ch.ns||2===Ch.ns;const n=t&&t.delimiters;n&&(Uh.delimiterOpen=zl(n[0]),Uh.delimiterClose=zl(n[1]));const r=wh=function(e,t=""){return{type:0,source:t,children:e,helpers:new Set,components:[],directives:[],hoists:[],imports:[],cached:[],temps:0,codegenNode:void 0,loc:Al}}([],e);return Uh.parse(Ih),r.loc=Zh(0,e.length),r.children=Yh(r.children),wh=null,r}function ou(e,t){au(e,void 0,t,su(e,e.children[0]))}function su(e,t){const{children:n}=e;return 1===n.length&&1===t.type&&!_h(t)}function au(e,t,n,r=!1,i=!1){const{children:o}=e,s=[];for(let t=0;t<o.length;t++){const a=o[t];if(1===a.type&&0===a.tagType){const e=r?0:cu(a,n);if(e>0){if(e>=2){a.codegenNode.patchFlag=-1,s.push(a);continue}}else{const e=a.codegenNode;if(13===e.type){const t=e.patchFlag;if((void 0===t||512===t||1===t)&&hu(a,n)>=2){const t=uu(a);t&&(e.props=n.hoist(t))}e.dynamicProps&&(e.dynamicProps=n.hoist(e.dynamicProps))}}}else if(12===a.type){if((r?0:cu(a,n))>=2){s.push(a);continue}}if(1===a.type){const t=1===a.tagType;t&&n.scopes.vSlot++,au(a,e,n,!1,i),t&&n.scopes.vSlot--}else if(11===a.type)au(a,e,n,1===a.children.length,!0);else if(9===a.type)for(let t=0;t<a.branches.length;t++)au(a.branches[t],e,n,1===a.branches[t].children.length,i)}let a=!1;if(s.length===o.length&&1===e.type)if(0===e.tagType&&e.codegenNode&&13===e.codegenNode.type&&p(e.codegenNode.children))e.codegenNode.children=c(xl(e.codegenNode.children)),a=!0;else if(1===e.tagType&&e.codegenNode&&13===e.codegenNode.type&&e.codegenNode.children&&!p(e.codegenNode.children)&&15===e.codegenNode.children.type){const t=d(e.codegenNode,"default");t&&(t.returns=c(xl(t.returns)),a=!0)}else if(3===e.tagType&&t&&1===t.type&&1===t.tagType&&t.codegenNode&&13===t.codegenNode.type&&t.codegenNode.children&&!p(t.codegenNode.children)&&15===t.codegenNode.children.type){const n=hh(e,"slot",!0),r=n&&n.arg&&d(t.codegenNode,n.arg);r&&(r.returns=c(xl(r.returns)),a=!0)}if(!a)for(const e of s)e.codegenNode=n.cache(e.codegenNode);function c(e){const t=n.cache(e);return i&&n.hmr&&(t.needArraySpread=!0),t}function d(e,t){if(e.children&&!p(e.children)&&15===e.children.type){const n=e.children.properties.find((e=>e.key===t||e.key.content===t));return n&&n.value}}s.length&&n.transformHoist&&n.transformHoist(o,n,e)}function cu(e,t){const{constantCache:n}=t;switch(e.type){case 1:if(0!==e.tagType)return 0;const r=n.get(e);if(void 0!==r)return r;const i=e.codegenNode;if(13!==i.type)return 0;if(i.isBlock&&"svg"!==e.tag&&"foreignObject"!==e.tag&&"math"!==e.tag)return 0;if(void 0===i.patchFlag){let r=3;const o=hu(e,t);if(0===o)return n.set(e,0),0;o<r&&(r=o);for(let i=0;i<e.children.length;i++){const o=cu(e.children[i],t);if(0===o)return n.set(e,0),0;o<r&&(r=o)}if(r>1)for(let i=0;i<e.props.length;i++){const o=e.props[i];if(7===o.type&&"bind"===o.name&&o.exp){const i=cu(o.exp,t);if(0===i)return n.set(e,0),0;i<r&&(r=i)}}if(i.isBlock){for(let t=0;t<e.props.length;t++){if(7===e.props[t].type)return n.set(e,0),0}t.removeHelper(qd),t.removeHelper(Fl(t.inSSR,i.isComponent)),i.isBlock=!1,t.helper(Vl(t.inSSR,i.isComponent))}return n.set(e,r),r}return n.set(e,0),0;case 2:case 3:return 3;case 9:case 11:case 10:default:return 0;case 5:case 12:return cu(e.content,t);case 4:return e.constType;case 8:let o=3;for(let n=0;n<e.children.length;n++){const r=e.children[n];if(E(r)||y(r))continue;const i=cu(r,t);if(0===i)return 0;i<o&&(o=i)}return o;case 20:return 2}}const du=new Set([hl,ul,pl,fl]);function lu(e,t){if(14===e.type&&!E(e.callee)&&du.has(e.callee)){const n=e.arguments[0];if(4===n.type)return cu(n,t);if(14===n.type)return lu(n,t)}return 0}function hu(e,t){let n=3;const r=uu(e);if(r&&15===r.type){const{properties:e}=r;for(let r=0;r<e.length;r++){const{key:i,value:o}=e[r],s=cu(i,t);if(0===s)return s;let a;if(s<n&&(n=s),a=4===o.type?cu(o,t):14===o.type?lu(o,t):0,0===a)return a;a<n&&(n=a)}}return n}function uu(e){const t=e.codegenNode;if(13===t.type)return t.props}function pu(e,{filename:t="",prefixIdentifiers:n=!1,hoistStatic:i=!1,hmr:s=!1,cacheHandlers:a=!1,nodeTransforms:c=[],directiveTransforms:d={},transformHoist:l=null,isBuiltInComponent:h=o,isCustomElement:u=o,expressionPlugins:p=[],scopeId:f=null,slotted:m=!0,ssr:g=!1,inSSR:_=!1,ssrCssVars:y="",bindingMetadata:v=r,inline:b=!1,isTS:S=!1,onError:T=Ql,onWarn:R=$l,compatConfig:C}){const w=t.replace(/\?.*$/,"").match(/([^/\\]+)\.\w+$/),I={filename:t,selfName:w&&L(N(w[1])),prefixIdentifiers:n,hoistStatic:i,hmr:s,cacheHandlers:a,nodeTransforms:c,directiveTransforms:d,transformHoist:l,isBuiltInComponent:h,isCustomElement:u,expressionPlugins:p,scopeId:f,slotted:m,ssr:g,inSSR:_,ssrCssVars:y,bindingMetadata:v,inline:b,isTS:S,onError:T,onWarn:R,compatConfig:C,root:e,helpers:new Map,components:new Set,directives:new Set,hoists:[],imports:[],cached:[],constantCache:new WeakMap,temps:0,identifiers:Object.create(null),scopes:{vFor:0,vSlot:0,vPre:0,vOnce:0},parent:null,grandParent:null,currentNode:e,childIndex:0,inVOnce:!1,helper(e){const t=I.helpers.get(e)||0;return I.helpers.set(e,t+1),e},removeHelper(e){const t=I.helpers.get(e);if(t){const n=t-1;n?I.helpers.set(e,n):I.helpers.delete(e)}},helperString:e=>`_${Il[I.helper(e)]}`,replaceNode(e){I.parent.children[I.childIndex]=I.currentNode=e},removeNode(e){const t=I.parent.children,n=e?t.indexOf(e):I.currentNode?I.childIndex:-1;e&&e!==I.currentNode?I.childIndex>n&&(I.childIndex--,I.onNodeRemoved()):(I.currentNode=null,I.onNodeRemoved()),I.parent.children.splice(n,1)},onNodeRemoved:o,addIdentifiers(e){},removeIdentifiers(e){},hoist(e){E(e)&&(e=Dl(e)),I.hoists.push(e);const t=Dl(`_hoisted_${I.hoists.length}`,!1,e.loc,2);return t.hoisted=e,t},cache(e,t=!1){const n=function(e,t,n=!1){return{type:20,index:e,value:t,needPauseTracking:n,needArraySpread:!1,loc:Al}}(I.cached.length,e,t);return I.cached.push(n),n}};return I.filters=new Set,I}function fu(e,t){const n=pu(e,t);mu(e,n),t.hoistStatic&&ou(e,n),t.ssr||function(e,t){const{helper:n}=t,{children:r}=e;if(1===r.length){const n=r[0];if(su(e,n)&&n.codegenNode){const r=n.codegenNode;13===r.type&&jl(r,t),e.codegenNode=r}else e.codegenNode=n}else if(r.length>1){let r=64;0,e.codegenNode=Ol(t,n(Gd),void 0,e.children,r,void 0,void 0,!0,void 0,!1)}}(e,n),e.helpers=new Set([...n.helpers.keys()]),e.components=[...n.components],e.directives=[...n.directives],e.imports=n.imports,e.hoists=n.hoists,e.temps=n.temps,e.cached=n.cached,e.transformed=!0,e.filters=[...n.filters]}function mu(e,t){t.currentNode=e;const{nodeTransforms:n}=t,r=[];for(let i=0;i<n.length;i++){const o=n[i](e,t);if(o&&(p(o)?r.push(...o):r.push(o)),!t.currentNode)return;e=t.currentNode}switch(e.type){case 3:t.ssr||t.helper($d);break;case 5:t.ssr||t.helper(dl);break;case 9:for(let n=0;n<e.branches.length;n++)mu(e.branches[n],t);break;case 10:case 11:case 1:case 0:!function(e,t){let n=0;const r=()=>{n--};for(;n<e.children.length;n++){const i=e.children[n];E(i)||(t.grandParent=t.parent,t.parent=e,t.childIndex=n,t.onNodeRemoved=r,mu(i,t))}}(e,t)}t.currentNode=e;let i=r.length;for(;i--;)r[i]()}function gu(e,t){const n=E(e)?t=>t===e:t=>e.test(t);return(e,r)=>{if(1===e.type){const{props:i}=e;if(3===e.tagType&&i.some(mh))return;const o=[];for(let s=0;s<i.length;s++){const a=i[s];if(7===a.type&&n(a.name)){i.splice(s,1),s--;const n=t(e,a,r);n&&o.push(n)}}return o}}}const _u="/*@__PURE__*/",Eu=e=>`${Il[e]}: _${Il[e]}`;function yu(e,t={}){const n=function(e,{mode:t="function",prefixIdentifiers:n="module"===t,sourceMap:r=!1,filename:i="template.vue.html",scopeId:o=null,optimizeImports:s=!1,runtimeGlobalName:a="Vue",runtimeModuleName:c="vue",ssrRuntimeModuleName:d="vue/server-renderer",ssr:l=!1,isTS:h=!1,inSSR:u=!1}){const p={mode:t,prefixIdentifiers:n,sourceMap:r,filename:i,scopeId:o,optimizeImports:s,runtimeGlobalName:a,runtimeModuleName:c,ssrRuntimeModuleName:d,ssr:l,isTS:h,inSSR:u,source:e.source,code:"",column:1,line:1,offset:0,indentLevel:0,pure:!1,map:void 0,helper:e=>`_${Il[e]}`,push(e,t=-2,n){p.code+=e},indent(){f(++p.indentLevel)},deindent(e=!1){e?--p.indentLevel:f(--p.indentLevel)},newline(){f(p.indentLevel)}};function f(e){p.push("\n"+"  ".repeat(e),0)}return p}(e,t);t.onContextCreated&&t.onContextCreated(n);const{mode:r,push:i,prefixIdentifiers:o,indent:s,deindent:a,newline:c,scopeId:d,ssr:l}=n,h=Array.from(e.helpers),u=h.length>0,p=!o&&"module"!==r;!function(e,t){const{ssr:n,prefixIdentifiers:r,push:i,newline:o,runtimeModuleName:s,runtimeGlobalName:a,ssrRuntimeModuleName:c}=t,d=a,l=Array.from(e.helpers);if(l.length>0&&(i(`const _Vue = ${d}\n`,-1),e.hoists.length)){i(`const { ${[Xd,Qd,$d,Zd,el].filter((e=>l.includes(e))).map(Eu).join(", ")} } = _Vue\n`,-1)}(function(e,t){if(!e.length)return;t.pure=!0;const{push:n,newline:r}=t;r();for(let i=0;i<e.length;i++){const o=e[i];o&&(n(`const _hoisted_${i+1} = `),Tu(o,t),r())}t.pure=!1})(e.hoists,t),o(),i("return ")}(e,n);if(i(`function ${l?"ssrRender":"render"}(${(l?["_ctx","_push","_parent","_attrs"]:["_ctx","_cache"]).join(", ")}) {`),s(),p&&(i("with (_ctx) {"),s(),u&&(i(`const { ${h.map(Eu).join(", ")} } = _Vue\n`,-1),c())),e.components.length&&(vu(e.components,"component",n),(e.directives.length||e.temps>0)&&c()),e.directives.length&&(vu(e.directives,"directive",n),e.temps>0&&c()),e.filters&&e.filters.length&&(c(),vu(e.filters,"filter",n),c()),e.temps>0){i("let ");for(let t=0;t<e.temps;t++)i(`${t>0?", ":""}_temp${t}`)}return(e.components.length||e.directives.length||e.temps)&&(i("\n",0),c()),l||i("return "),e.codegenNode?Tu(e.codegenNode,n):i("null"),p&&(a(),i("}")),a(),i("}"),{ast:e,code:n.code,preamble:"",map:n.map?n.map.toJSON():void 0}}function vu(e,t,{helper:n,push:r,newline:i,isTS:o}){const s=n("filter"===t?il:"component"===t?tl:rl);for(let n=0;n<e.length;n++){let a=e[n];const c=a.endsWith("__self");c&&(a=a.slice(0,-6)),r(`const ${Sh(a,t)} = ${s}(${JSON.stringify(a)}${c?", true":""})${o?"!":""}`),n<e.length-1&&i()}}function bu(e,t){const n=e.length>3||!1;t.push("["),n&&t.indent(),Su(e,t,n),n&&t.deindent(),t.push("]")}function Su(e,t,n=!1,r=!0){const{push:i,newline:o}=t;for(let s=0;s<e.length;s++){const a=e[s];E(a)?i(a,-3):p(a)?bu(a,t):Tu(a,t),s<e.length-1&&(n?(r&&i(","),o()):r&&i(", "))}}function Tu(e,t){if(E(e))t.push(e,-3);else if(y(e))t.push(t.helper(e));else switch(e.type){case 1:case 9:case 11:case 12:Tu(e.codegenNode,t);break;case 2:!function(e,t){t.push(JSON.stringify(e.content),-3,e)}(e,t);break;case 4:Ru(e,t);break;case 5:!function(e,t){const{push:n,helper:r,pure:i}=t;i&&n(_u);n(`${r(dl)}(`),Tu(e.content,t),n(")")}(e,t);break;case 8:Cu(e,t);break;case 3:!function(e,t){const{push:n,helper:r,pure:i}=t;i&&n(_u);n(`${r($d)}(${JSON.stringify(e.content)})`,-3,e)}(e,t);break;case 13:!function(e,t){const{push:n,helper:r,pure:i}=t,{tag:o,props:s,children:a,patchFlag:c,dynamicProps:d,directives:l,isBlock:h,disableTracking:u,isComponent:p}=e;let f;c&&(f=String(c));l&&n(r(ol)+"(");h&&n(`(${r(qd)}(${u?"true":""}), `);i&&n(_u);const m=h?Fl(t.inSSR,p):Vl(t.inSSR,p);n(r(m)+"(",-2,e),Su(function(e){let t=e.length;for(;t--&&null==e[t];);return e.slice(0,t+1).map((e=>e||"null"))}([o,s,a,f,d]),t),n(")"),h&&n(")");l&&(n(", "),Tu(l,t),n(")"))}(e,t);break;case 14:!function(e,t){const{push:n,helper:r,pure:i}=t,o=E(e.callee)?e.callee:r(e.callee);i&&n(_u);n(o+"(",-2,e),Su(e.arguments,t),n(")")}(e,t);break;case 15:!function(e,t){const{push:n,indent:r,deindent:i,newline:o}=t,{properties:s}=e;if(!s.length)return void n("{}",-2,e);const a=s.length>1||!1;n(a?"{":"{ "),a&&r();for(let e=0;e<s.length;e++){const{key:r,value:i}=s[e];wu(r,t),n(": "),Tu(i,t),e<s.length-1&&(n(","),o())}a&&i(),n(a?"}":" }")}(e,t);break;case 17:!function(e,t){bu(e.elements,t)}(e,t);break;case 18:!function(e,t){const{push:n,indent:r,deindent:i}=t,{params:o,returns:s,body:a,newline:c,isSlot:d}=e;d&&n(`_${Il[Sl]}(`);n("(",-2,e),p(o)?Su(o,t):o&&Tu(o,t);n(") => "),(c||a)&&(n("{"),r());s?(c&&n("return "),p(s)?bu(s,t):Tu(s,t)):a&&Tu(a,t);(c||a)&&(i(),n("}"));d&&(e.isNonScopedSlot&&n(", undefined, true"),n(")"))}(e,t);break;case 19:!function(e,t){const{test:n,consequent:r,alternate:i,newline:o}=e,{push:s,indent:a,deindent:c,newline:d}=t;if(4===n.type){const e=!rh(n.content);e&&s("("),Ru(n,t),e&&s(")")}else s("("),Tu(n,t),s(")");o&&a(),t.indentLevel++,o||s(" "),s("? "),Tu(r,t),t.indentLevel--,o&&d(),o||s(" "),s(": ");const l=19===i.type;l||t.indentLevel++;Tu(i,t),l||t.indentLevel--;o&&c(!0)}(e,t);break;case 20:!function(e,t){const{push:n,helper:r,indent:i,deindent:o,newline:s}=t,{needPauseTracking:a,needArraySpread:c}=e;c&&n("[...(");n(`_cache[${e.index}] || (`),a&&(i(),n(`${r(yl)}(-1),`),s(),n("("));n(`_cache[${e.index}] = `),Tu(e.value,t),a&&(n(`).cacheIndex = ${e.index},`),s(),n(`${r(yl)}(1),`),s(),n(`_cache[${e.index}]`),o());n(")"),c&&n(")]")}(e,t);break;case 21:Su(e.body,t,!0,!1)}}function Ru(e,t){const{content:n,isStatic:r}=e;t.push(r?JSON.stringify(n):n,-3,e)}function Cu(e,t){for(let n=0;n<e.children.length;n++){const r=e.children[n];E(r)?t.push(r,-3):Tu(r,t)}}function wu(e,t){const{push:n}=t;if(8===e.type)n("["),Cu(e,t),n("]");else if(e.isStatic){n(rh(e.content)?e.content:JSON.stringify(e.content),-2,e)}else n(`[${e.content}]`,-3,e)}new RegExp("\\b"+"arguments,await,break,case,catch,class,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,let,new,return,super,switch,throw,try,var,void,while,with,yield".split(",").join("\\b|\\b")+"\\b");const Iu=gu(/^(if|else|else-if)$/,((e,t,n)=>function(e,t,n,r){if(!("else"===t.name||t.exp&&t.exp.content.trim())){const r=t.exp?t.exp.loc:e.loc;n.onError(Zl(28,t.loc)),t.exp=Dl("true",!1,r)}0;if("if"===t.name){const i=Au(e,t),o={type:9,loc:e.loc,branches:[i]};if(n.replaceNode(o),r)return r(o,i,!0)}else{const i=n.parent.children;let o=i.indexOf(e);for(;o-- >=-1;){const s=i[o];if(s&&3===s.type)n.removeNode(s);else{if(!s||2!==s.type||s.content.trim().length){if(s&&9===s.type){"else-if"===t.name&&void 0===s.branches[s.branches.length-1].condition&&n.onError(Zl(30,e.loc)),n.removeNode();const i=Au(e,t);0,s.branches.push(i);const o=r&&r(s,i,!1);mu(i,n),o&&o(),n.currentNode=null}else n.onError(Zl(30,e.loc));break}n.removeNode(s)}}}}(e,t,n,((e,t,r)=>{const i=n.parent.children;let o=i.indexOf(e),s=0;for(;o-- >=0;){const e=i[o];e&&9===e.type&&(s+=e.branches.length)}return()=>{if(r)e.codegenNode=Ou(t,s,n);else{const r=function(e){for(;;)if(19===e.type){if(19!==e.alternate.type)return e;e=e.alternate}else 20===e.type&&(e=e.value)}(e.codegenNode);r.alternate=Ou(t,s+e.branches.length-1,n)}}}))));function Au(e,t){const n=3===e.tagType;return{type:10,loc:e.loc,condition:"else"===t.name?void 0:t.exp,children:n&&!hh(e,"for")?e.children:[e],userKey:uh(e,"key"),isTemplateIf:n}}function Ou(e,t,n){return e.condition?Ul(e.condition,xu(e,t,n),kl(n.helper($d),['""',"true"])):xu(e,t,n)}function xu(e,t,n){const{helper:r}=n,i=Pl("key",Dl(`${t}`,!1,Al,2)),{children:o}=e,s=o[0];if(1!==o.length||1!==s.type){if(1===o.length&&11===s.type){const e=s.codegenNode;return vh(e,i,n),e}{let t=64;return Ol(n,r(Gd),Nl([i]),o,t,void 0,void 0,!0,!1,!1,e.loc)}}{const e=s.codegenNode,t=14===(a=e).type&&a.callee===Cl?a.arguments[1].returns:a;return 13===t.type&&jl(t,n),vh(t,i,n),e}var a}const Nu=(e,t,n)=>{const{modifiers:r,loc:i}=e,o=e.arg;let{exp:s}=e;if(s&&4===s.type&&!s.content.trim()&&(s=void 0),!s){if(4!==o.type||!o.isStatic)return n.onError(Zl(52,o.loc)),{props:[Pl(o,Dl("",!0,i))]};Pu(e),s=e.exp}return 4!==o.type?(o.children.unshift("("),o.children.push(') || ""')):o.isStatic||(o.content=`${o.content} || ""`),r.some((e=>"camel"===e.content))&&(4===o.type?o.isStatic?o.content=N(o.content):o.content=`${n.helperString(gl)}(${o.content})`:(o.children.unshift(`${n.helperString(gl)}(`),o.children.push(")"))),n.inSSR||(r.some((e=>"prop"===e.content))&&Du(o,"."),r.some((e=>"attr"===e.content))&&Du(o,"^")),{props:[Pl(o,s)]}},Pu=(e,t)=>{const n=e.arg,r=N(n.content);e.exp=Dl(r,!1,n.loc)},Du=(e,t)=>{4===e.type?e.isStatic?e.content=t+e.content:e.content=`\`${t}\${${e.content}}\``:(e.children.unshift(`'${t}' + (`),e.children.push(")"))},Lu=gu("for",((e,t,n)=>{const{helper:r,removeHelper:i}=n;return function(e,t,n,r){if(!t.exp)return void n.onError(Zl(31,t.loc));const i=t.forParseResult;if(!i)return void n.onError(Zl(32,t.loc));ku(i,n);const{addIdentifiers:o,removeIdentifiers:s,scopes:a}=n,{source:c,value:d,key:l,index:h}=i,u={type:11,loc:t.loc,source:c,valueAlias:d,keyAlias:l,objectIndexAlias:h,parseResult:i,children:gh(e)?e.children:[e]};n.replaceNode(u),a.vFor++;const p=r&&r(u);return()=>{a.vFor--,p&&p()}}(e,t,n,(t=>{const o=kl(r(sl),[t.source]),s=gh(e),a=hh(e,"memo"),c=uh(e,"key",!1,!0);c&&7===c.type&&!c.exp&&Pu(c);const d=c&&(6===c.type?c.value?Dl(c.value.content,!0):void 0:c.exp),l=c&&d?Pl("key",d):null,h=4===t.source.type&&t.source.constType>0,u=h?64:c?128:256;return t.codegenNode=Ol(n,r(Gd),void 0,o,u,void 0,void 0,!0,!h,!1,e.loc),()=>{let c;const{children:u}=t;const p=1!==u.length||1!==u[0].type,f=_h(e)?e:s&&1===e.children.length&&_h(e.children[0])?e.children[0]:null;if(f?(c=f.codegenNode,s&&l&&vh(c,l,n)):p?c=Ol(n,r(Gd),l?Nl([l]):void 0,e.children,64,void 0,void 0,!0,void 0,!1):(c=u[0].codegenNode,s&&l&&vh(c,l,n),c.isBlock!==!h&&(c.isBlock?(i(qd),i(Fl(n.inSSR,c.isComponent))):i(Vl(n.inSSR,c.isComponent))),c.isBlock=!h,c.isBlock?(r(qd),r(Fl(n.inSSR,c.isComponent))):r(Vl(n.inSSR,c.isComponent))),a){const e=Ml(Mu(t.parseResult,[Dl("_cached")]));e.body={type:21,body:[Ll(["const _memo = (",a.exp,")"]),Ll(["if (_cached",...d?[" && _cached.key === ",d]:[],` && ${n.helperString(wl)}(_cached, _memo)) return _cached`]),Ll(["const _item = ",c]),Dl("_item.memo = _memo"),Dl("return _item")],loc:Al},o.arguments.push(e,Dl("_cache"),Dl(String(n.cached.length))),n.cached.push(null)}else o.arguments.push(Ml(Mu(t.parseResult),c,!0))}}))}));function ku(e,t){e.finalized||(e.finalized=!0)}function Mu({value:e,key:t,index:n},r=[]){return function(e){let t=e.length;for(;t--&&!e[t];);return e.slice(0,t+1).map(((e,t)=>e||Dl("_".repeat(t+1),!1)))}([e,t,n,...r])}const Uu=Dl("undefined",!1),Vu=(e,t)=>{if(1===e.type&&(1===e.tagType||3===e.tagType)){const n=hh(e,"slot");if(n)return n.exp,t.scopes.vSlot++,()=>{t.scopes.vSlot--}}},Fu=(e,t,n,r)=>Ml(e,n,!1,!0,n.length?n[0].loc:r);function ju(e,t,n=Fu){t.helper(Sl);const{children:r,loc:i}=e,o=[],s=[];let a=t.scopes.vSlot>0||t.scopes.vFor>0;const c=hh(e,"slot",!0);if(c){const{arg:e,exp:t}=c;e&&!eh(e)&&(a=!0),o.push(Pl(e||Dl("default",!0),n(t,void 0,r,i)))}let d=!1,l=!1;const h=[],u=new Set;let p=0;for(let e=0;e<r.length;e++){const i=r[e];let f;if(!gh(i)||!(f=hh(i,"slot",!0))){3!==i.type&&h.push(i);continue}if(c){t.onError(Zl(37,f.loc));break}d=!0;const{children:m,loc:g}=i,{arg:_=Dl("default",!0),exp:E,loc:y}=f;let v;eh(_)?v=_?_.content:"default":a=!0;const b=hh(i,"for"),S=n(E,b,m,g);let T,R;if(T=hh(i,"if"))a=!0,s.push(Ul(T.exp,Bu(_,S,p++),Uu));else if(R=hh(i,/^else(-if)?$/,!0)){let n,i=e;for(;i--&&(n=r[i],3===n.type););if(n&&gh(n)&&hh(n,/^(else-)?if$/)){let e=s[s.length-1];for(;19===e.alternate.type;)e=e.alternate;e.alternate=R.exp?Ul(R.exp,Bu(_,S,p++),Uu):Bu(_,S,p++)}else t.onError(Zl(30,R.loc))}else if(b){a=!0;const e=b.forParseResult;e?(ku(e),s.push(kl(t.helper(sl),[e.source,Ml(Mu(e),Bu(_,S),!0)]))):t.onError(Zl(32,b.loc))}else{if(v){if(u.has(v)){t.onError(Zl(38,y));continue}u.add(v),"default"===v&&(l=!0)}o.push(Pl(_,S))}}if(!c){const e=(e,r)=>{const o=n(e,void 0,r,i);return t.compatConfig&&(o.isNonScopedSlot=!0),Pl("default",o)};d?h.length&&h.some((e=>Hu(e)))&&(l?t.onError(Zl(39,h[0].loc)):o.push(e(void 0,h))):o.push(e(void 0,r))}const f=a?2:Gu(e.children)?3:1;let m=Nl(o.concat(Pl("_",Dl(f+"",!1))),i);return s.length&&(m=kl(t.helper(cl),[m,xl(s)])),{slots:m,hasDynamicSlots:a}}function Bu(e,t,n){const r=[Pl("name",e),Pl("fn",t)];return null!=n&&r.push(Pl("key",Dl(String(n),!0))),Nl(r)}function Gu(e){for(let t=0;t<e.length;t++){const n=e[t];switch(n.type){case 1:if(2===n.tagType||Gu(n.children))return!0;break;case 9:if(Gu(n.branches))return!0;break;case 10:case 11:if(Gu(n.children))return!0}}return!1}function Hu(e){return 2!==e.type&&12!==e.type||(2===e.type?!!e.content.trim():Hu(e.content))}const Wu=new WeakMap,Ku=(e,t)=>function(){if(1!==(e=t.currentNode).type||0!==e.tagType&&1!==e.tagType)return;const{tag:n,props:r}=e,i=1===e.tagType;let o=i?function(e,t,n=!1){let{tag:r}=e;const i=Ju(r),o=uh(e,"is",!1,!0);if(o)if(i||Jl("COMPILER_IS_ON_ELEMENT",t)){let e;if(6===o.type?e=o.value&&Dl(o.value.content,!0):(e=o.exp,e||(e=Dl("is",!1,o.arg.loc))),e)return kl(t.helper(nl),[e])}else 6===o.type&&o.value.content.startsWith("vue:")&&(r=o.value.content.slice(4));const s=th(r)||t.isBuiltInComponent(r);if(s)return n||t.helper(s),s;return t.helper(tl),t.components.add(r),Sh(r,"component")}(e,t):`"${n}"`;const s=v(o)&&o.callee===nl;let a,c,d,l,h,u=0,p=s||o===Hd||o===Wd||!i&&("svg"===n||"foreignObject"===n||"math"===n);if(r.length>0){const n=zu(e,t,void 0,i,s);a=n.props,u=n.patchFlag,l=n.dynamicPropNames;const r=n.directives;h=r&&r.length?xl(r.map((e=>function(e,t){const n=[],r=Wu.get(e);r?n.push(t.helperString(r)):(t.helper(rl),t.directives.add(e.name),n.push(Sh(e.name,"directive")));const{loc:i}=e;e.exp&&n.push(e.exp);e.arg&&(e.exp||n.push("void 0"),n.push(e.arg));if(Object.keys(e.modifiers).length){e.arg||(e.exp||n.push("void 0"),n.push("void 0"));const t=Dl("true",!1,i);n.push(Nl(e.modifiers.map((e=>Pl(e,t))),i))}return xl(n,e.loc)}(e,t)))):void 0,n.shouldUseBlock&&(p=!0)}if(e.children.length>0){o===Kd&&(p=!0,u|=1024);if(i&&o!==Hd&&o!==Kd){const{slots:n,hasDynamicSlots:r}=ju(e,t);c=n,r&&(u|=1024)}else if(1===e.children.length&&o!==Hd){const n=e.children[0],r=n.type,i=5===r||8===r;i&&0===cu(n,t)&&(u|=1),c=i||2===r?n:e.children}else c=e.children}l&&l.length&&(d=function(e){let t="[";for(let n=0,r=e.length;n<r;n++)t+=JSON.stringify(e[n]),n<r-1&&(t+=", ");return t+"]"}(l)),e.codegenNode=Ol(t,o,a,c,0===u?void 0:u,d,h,!!p,!1,i,e.loc)};function zu(e,t,n=e.props,r,i,o=!1){const{tag:s,loc:c,children:d}=e;let l=[];const h=[],u=[],p=d.length>0;let f=!1,m=0,g=!1,_=!1,E=!1,v=!1,b=!1,S=!1;const T=[],R=e=>{l.length&&(h.push(Nl(qu(l),c)),l=[]),e&&h.push(e)},C=()=>{t.scopes.vFor>0&&l.push(Pl(Dl("ref_for",!0),Dl("true")))},w=({key:e,value:n})=>{if(eh(e)){const o=e.content,s=a(o);if(!s||r&&!i||"onclick"===o.toLowerCase()||"onUpdate:modelValue"===o||I(o)||(v=!0),s&&I(o)&&(S=!0),s&&14===n.type&&(n=n.arguments[0]),20===n.type||(4===n.type||8===n.type)&&cu(n,t)>0)return;"ref"===o?g=!0:"class"===o?_=!0:"style"===o?E=!0:"key"===o||T.includes(o)||T.push(o),!r||"class"!==o&&"style"!==o||T.includes(o)||T.push(o)}else b=!0};for(let i=0;i<n.length;i++){const a=n[i];if(6===a.type){const{loc:e,name:n,nameLoc:r,value:i}=a;let o=!0;if("ref"===n&&(g=!0,C()),"is"===n&&(Ju(s)||i&&i.content.startsWith("vue:")||Jl("COMPILER_IS_ON_ELEMENT",t)))continue;l.push(Pl(Dl(n,!0,r),Dl(i?i.content:"",o,i?i.loc:e)))}else{const{name:n,arg:i,exp:d,loc:g,modifiers:_}=a,E="bind"===n,v="on"===n;if("slot"===n){r||t.onError(Zl(40,g));continue}if("once"===n||"memo"===n)continue;if("is"===n||E&&ph(i,"is")&&(Ju(s)||Jl("COMPILER_IS_ON_ELEMENT",t)))continue;if(v&&o)continue;if((E&&ph(i,"key")||v&&p&&ph(i,"vue:before-update"))&&(f=!0),E&&ph(i,"ref")&&C(),!i&&(E||v)){if(b=!0,d)if(E){if(C(),R(),Jl("COMPILER_V_BIND_OBJECT_ORDER",t)){h.unshift(d);continue}h.push(d)}else R({type:14,loc:g,callee:t.helper(ml),arguments:r?[d]:[d,"true"]});else t.onError(Zl(E?34:35,g));continue}E&&_.some((e=>"prop"===e.content))&&(m|=32);const S=t.directiveTransforms[n];if(S){const{props:n,needRuntime:r}=S(a,e,t);!o&&n.forEach(w),v&&i&&!eh(i)?R(Nl(n,c)):l.push(...n),r&&(u.push(a),y(r)&&Wu.set(a,r))}else A(n)||(u.push(a),p&&(f=!0))}}let O;if(h.length?(R(),O=h.length>1?kl(t.helper(ll),h,c):h[0]):l.length&&(O=Nl(qu(l),c)),b?m|=16:(_&&!r&&(m|=2),E&&!r&&(m|=4),T.length&&(m|=8),v&&(m|=32)),f||0!==m&&32!==m||!(g||S||u.length>0)||(m|=512),!t.inSSR&&O)switch(O.type){case 15:let e=-1,n=-1,r=!1;for(let t=0;t<O.properties.length;t++){const i=O.properties[t].key;eh(i)?"class"===i.content?e=t:"style"===i.content&&(n=t):i.isHandlerKey||(r=!0)}const i=O.properties[e],o=O.properties[n];r?O=kl(t.helper(pl),[O]):(i&&!eh(i.value)&&(i.value=kl(t.helper(hl),[i.value])),o&&(E||4===o.value.type&&"["===o.value.content.trim()[0]||17===o.value.type)&&(o.value=kl(t.helper(ul),[o.value])));break;case 14:break;default:O=kl(t.helper(pl),[kl(t.helper(fl),[O])])}return{props:O,directives:u,patchFlag:m,dynamicPropNames:T,shouldUseBlock:f}}function qu(e){const t=new Map,n=[];for(let r=0;r<e.length;r++){const i=e[r];if(8===i.key.type||!i.key.isStatic){n.push(i);continue}const o=i.key.content,s=t.get(o);s?("style"===o||"class"===o||a(o))&&Yu(s,i):(t.set(o,i),n.push(i))}return n}function Yu(e,t){17===e.value.type?e.value.elements.push(t.value):e.value=xl([e.value,t.value],e.loc)}function Ju(e){return"component"===e||"Component"===e}const Xu=(e,t)=>{if(_h(e)){const{children:n,loc:r}=e,{slotName:i,slotProps:o}=function(e,t){let n,r='"default"';const i=[];for(let t=0;t<e.props.length;t++){const n=e.props[t];if(6===n.type)n.value&&("name"===n.name?r=JSON.stringify(n.value.content):(n.name=N(n.name),i.push(n)));else if("bind"===n.name&&ph(n.arg,"name")){if(n.exp)r=n.exp;else if(n.arg&&4===n.arg.type){const e=N(n.arg.content);r=n.exp=Dl(e,!1,n.arg.loc)}}else"bind"===n.name&&n.arg&&eh(n.arg)&&(n.arg.content=N(n.arg.content)),i.push(n)}if(i.length>0){const{props:r,directives:o}=zu(e,t,i,!1,!1);n=r,o.length&&t.onError(Zl(36,o[0].loc))}return{slotName:r,slotProps:n}}(e,t),s=[t.prefixIdentifiers?"_ctx.$slots":"$slots",i,"{}","undefined","true"];let a=2;o&&(s[2]=o,a=3),n.length&&(s[3]=Ml([],n,!1,!1,r),a=4),t.scopeId&&!t.slotted&&(a=5),s.splice(a),e.codegenNode=kl(t.helper(al),s,r)}};const Qu=(e,t,n,r)=>{const{loc:i,modifiers:o,arg:s}=e;let a;if(e.exp||o.length||n.onError(Zl(35,i)),4===s.type)if(s.isStatic){let e=s.content;0,e.startsWith("vue:")&&(e=`vnode-${e.slice(4)}`);a=Dl(0!==t.tagType||e.startsWith("vnode")||!/[A-Z]/.test(e)?k(N(e)):`on:${e}`,!0,s.loc)}else a=Ll([`${n.helperString(El)}(`,s,")"]);else a=s,a.children.unshift(`${n.helperString(El)}(`),a.children.push(")");let c=e.exp;c&&!c.content.trim()&&(c=void 0);let d=n.cacheHandlers&&!c&&!n.inVOnce;if(c){const e=ch(c),t=!(e||lh(c)),n=c.content.includes(";");0,(t||d&&e)&&(c=Ll([`${t?"$event":"(...args)"} => ${n?"{":"("}`,c,n?"}":")"]))}let l={props:[Pl(a,c||Dl("() => {}",!1,i))]};return r&&(l=r(l)),d&&(l.props[0].value=n.cache(l.props[0].value)),l.props.forEach((e=>e.key.isHandlerKey=!0)),l},$u=(e,t)=>{if(0===e.type||1===e.type||11===e.type||10===e.type)return()=>{const n=e.children;let r,i=!1;for(let e=0;e<n.length;e++){const t=n[e];if(fh(t)){i=!0;for(let i=e+1;i<n.length;i++){const o=n[i];if(!fh(o)){r=void 0;break}r||(r=n[e]=Ll([t],t.loc)),r.children.push(" + ",o),n.splice(i,1),i--}}}if(i&&(1!==n.length||0!==e.type&&(1!==e.type||0!==e.tagType||e.props.find((e=>7===e.type&&!t.directiveTransforms[e.name]))||"template"===e.tag)))for(let e=0;e<n.length;e++){const r=n[e];if(fh(r)||8===r.type){const i=[];2===r.type&&" "===r.content||i.push(r),t.ssr||0!==cu(r,t)||i.push("1"),n[e]={type:12,content:r,loc:r.loc,codegenNode:kl(t.helper(Zd),i)}}}}},Zu=new WeakSet,ep=(e,t)=>{if(1===e.type&&hh(e,"once",!0)){if(Zu.has(e)||t.inVOnce||t.inSSR)return;return Zu.add(e),t.inVOnce=!0,t.helper(yl),()=>{t.inVOnce=!1;const e=t.currentNode;e.codegenNode&&(e.codegenNode=t.cache(e.codegenNode,!0))}}},tp=(e,t,n)=>{const{exp:r,arg:i}=e;if(!r)return n.onError(Zl(41,e.loc)),np();const o=r.loc.source,s=4===r.type?r.content:o,a=n.bindingMetadata[o];if("props"===a||"props-aliased"===a)return n.onError(Zl(44,r.loc)),np();if(!s.trim()||!ch(r))return n.onError(Zl(42,r.loc)),np();const c=i||Dl("modelValue",!0),d=i?eh(i)?`onUpdate:${N(i.content)}`:Ll(['"onUpdate:" + ',i]):"onUpdate:modelValue";let l;l=Ll([`${n.isTS?"($event: any)":"$event"} => ((`,r,") = $event)"]);const h=[Pl(c,e.exp),Pl(d,l)];if(e.modifiers.length&&1===t.tagType){const t=e.modifiers.map((e=>e.content)).map((e=>(rh(e)?e:JSON.stringify(e))+": true")).join(", "),n=i?eh(i)?`${i.content}Modifiers`:Ll([i,' + "Modifiers"']):"modelModifiers";h.push(Pl(n,Dl(`{ ${t} }`,!1,e.loc,2)))}return np(h)};function np(e=[]){return{props:e}}const rp=/[\w).+\-_$\]]/,ip=(e,t)=>{Jl("COMPILER_FILTERS",t)&&(5===e.type?op(e.content,t):1===e.type&&e.props.forEach((e=>{7===e.type&&"for"!==e.name&&e.exp&&op(e.exp,t)})))};function op(e,t){if(4===e.type)sp(e,t);else for(let n=0;n<e.children.length;n++){const r=e.children[n];"object"==typeof r&&(4===r.type?sp(r,t):8===r.type?op(e,t):5===r.type&&op(r.content,t))}}function sp(e,t){const n=e.content;let r,i,o,s,a=!1,c=!1,d=!1,l=!1,h=0,u=0,p=0,f=0,m=[];for(o=0;o<n.length;o++)if(i=r,r=n.charCodeAt(o),a)39===r&&92!==i&&(a=!1);else if(c)34===r&&92!==i&&(c=!1);else if(d)96===r&&92!==i&&(d=!1);else if(l)47===r&&92!==i&&(l=!1);else if(124!==r||124===n.charCodeAt(o+1)||124===n.charCodeAt(o-1)||h||u||p){switch(r){case 34:c=!0;break;case 39:a=!0;break;case 96:d=!0;break;case 40:p++;break;case 41:p--;break;case 91:u++;break;case 93:u--;break;case 123:h++;break;case 125:h--}if(47===r){let e,t=o-1;for(;t>=0&&(e=n.charAt(t)," "===e);t--);e&&rp.test(e)||(l=!0)}}else void 0===s?(f=o+1,s=n.slice(0,o).trim()):g();function g(){m.push(n.slice(f,o).trim()),f=o+1}if(void 0===s?s=n.slice(0,o).trim():0!==f&&g(),m.length){for(o=0;o<m.length;o++)s=ap(s,m[o],t);e.content=s,e.ast=void 0}}function ap(e,t,n){n.helper(il);const r=t.indexOf("(");if(r<0)return n.filters.add(t),`${Sh(t,"filter")}(${e})`;{const i=t.slice(0,r),o=t.slice(r+1);return n.filters.add(i),`${Sh(i,"filter")}(${e}${")"!==o?","+o:o}`}}const cp=new WeakSet,dp=(e,t)=>{if(1===e.type){const n=hh(e,"memo");if(!n||cp.has(e))return;return cp.add(e),()=>{const r=e.codegenNode||t.currentNode.codegenNode;r&&13===r.type&&(1!==e.tagType&&jl(r,t),e.codegenNode=kl(t.helper(Cl),[n.exp,Ml(void 0,r),"_cache",String(t.cached.length)]),t.cached.push(null))}}};function lp(e,t={}){const n=t.onError||Ql,r="module"===t.mode;!0===t.prefixIdentifiers?n(Zl(47)):r&&n(Zl(48));t.cacheHandlers&&n(Zl(49)),t.scopeId&&!r&&n(Zl(50));const i=d({},t,{prefixIdentifiers:!1}),o=E(e)?iu(e,i):e,[s,a]=[[ep,Iu,dp,Lu,ip,Xu,Ku,Vu,$u],{on:Qu,bind:Nu,model:tp}];return fu(o,d({},i,{nodeTransforms:[...s,...t.nodeTransforms||[]],directiveTransforms:d({},a,t.directiveTransforms||{})})),yu(o,i)}const hp=Symbol(""),up=Symbol(""),pp=Symbol(""),fp=Symbol(""),mp=Symbol(""),gp=Symbol(""),_p=Symbol(""),Ep=Symbol(""),yp=Symbol(""),vp=Symbol("");var bp;let Sp;bp={[hp]:"vModelRadio",[up]:"vModelCheckbox",[pp]:"vModelText",[fp]:"vModelSelect",[mp]:"vModelDynamic",[gp]:"withModifiers",[_p]:"withKeys",[Ep]:"vShow",[yp]:"Transition",[vp]:"TransitionGroup"},Object.getOwnPropertySymbols(bp).forEach((e=>{Il[e]=bp[e]}));const Tp={parseMode:"html",isVoidTag:te,isNativeTag:e=>Q(e)||Z(e)||ee(e),isPreTag:e=>"pre"===e,isIgnoreNewlineTag:e=>"pre"===e||"textarea"===e,decodeEntities:function(e,t=!1){return Sp||(Sp=document.createElement("div")),t?(Sp.innerHTML=`<div foo="${e.replace(/"/g,"&quot;")}">`,Sp.children[0].getAttribute("foo")):(Sp.innerHTML=e,Sp.textContent)},isBuiltInComponent:e=>"Transition"===e||"transition"===e?yp:"TransitionGroup"===e||"transition-group"===e?vp:void 0,getNamespace(e,t,n){let r=t?t.ns:n;if(t&&2===r)if("annotation-xml"===t.tag){if("svg"===e)return 1;t.props.some((e=>6===e.type&&"encoding"===e.name&&null!=e.value&&("text/html"===e.value.content||"application/xhtml+xml"===e.value.content)))&&(r=0)}else/^m(?:[ions]|text)$/.test(t.tag)&&"mglyph"!==e&&"malignmark"!==e&&(r=0);else t&&1===r&&("foreignObject"!==t.tag&&"desc"!==t.tag&&"title"!==t.tag||(r=0));if(0===r){if("svg"===e)return 1;if("math"===e)return 2}return r}},Rp=(e,t)=>{const n=Y(e);return Dl(JSON.stringify(n),!1,t,3)};function Cp(e,t){return Zl(e,t)}const wp=t("passive,once,capture"),Ip=t("stop,prevent,self,ctrl,shift,alt,meta,exact,middle"),Ap=t("left,right"),Op=t("onkeyup,onkeydown,onkeypress"),xp=(e,t)=>eh(e)&&"onclick"===e.content.toLowerCase()?Dl(t,!0):4!==e.type?Ll(["(",e,`) === "onClick" ? "${t}" : (`,e,")"]):e;const Np=(e,t)=>{1!==e.type||0!==e.tagType||"script"!==e.tag&&"style"!==e.tag||t.removeNode()};const Pp=[e=>{1===e.type&&e.props.forEach(((t,n)=>{6===t.type&&"style"===t.name&&t.value&&(e.props[n]={type:7,name:"bind",arg:Dl("style",!0,t.loc),exp:Rp(t.value.content,t.loc),modifiers:[],loc:t.loc})}))}],Dp={cloak:()=>({props:[]}),html:(e,t,n)=>{const{exp:r,loc:i}=e;return r||n.onError(Cp(53,i)),t.children.length&&(n.onError(Cp(54,i)),t.children.length=0),{props:[Pl(Dl("innerHTML",!0,i),r||Dl("",!0))]}},text:(e,t,n)=>{const{exp:r,loc:i}=e;return r||n.onError(Cp(55,i)),t.children.length&&(n.onError(Cp(56,i)),t.children.length=0),{props:[Pl(Dl("textContent",!0),r?cu(r,n)>0?r:kl(n.helperString(dl),[r],i):Dl("",!0))]}},model:(e,t,n)=>{const r=tp(e,t,n);if(!r.props.length||1===t.tagType)return r;e.arg&&n.onError(Cp(58,e.arg.loc));const{tag:i}=t,o=n.isCustomElement(i);if("input"===i||"textarea"===i||"select"===i||o){let s=pp,a=!1;if("input"===i||o){const r=uh(t,"type");if(r){if(7===r.type)s=mp;else if(r.value)switch(r.value.content){case"radio":s=hp;break;case"checkbox":s=up;break;case"file":a=!0,n.onError(Cp(59,e.loc))}}else(function(e){return e.props.some((e=>!(7!==e.type||"bind"!==e.name||e.arg&&4===e.arg.type&&e.arg.isStatic)))})(t)&&(s=mp)}else"select"===i&&(s=fp);a||(r.needRuntime=n.helper(s))}else n.onError(Cp(57,e.loc));return r.props=r.props.filter((e=>!(4===e.key.type&&"modelValue"===e.key.content))),r},on:(e,t,n)=>Qu(e,t,n,(t=>{const{modifiers:r}=e;if(!r.length)return t;let{key:i,value:o}=t.props[0];const{keyModifiers:s,nonKeyModifiers:a,eventOptionModifiers:c}=((e,t,n)=>{const r=[],i=[],o=[];for(let s=0;s<t.length;s++){const a=t[s].content;"native"===a&&Xl("COMPILER_V_ON_NATIVE",n)||wp(a)?o.push(a):Ap(a)?eh(e)?Op(e.content.toLowerCase())?r.push(a):i.push(a):(r.push(a),i.push(a)):Ip(a)?i.push(a):r.push(a)}return{keyModifiers:r,nonKeyModifiers:i,eventOptionModifiers:o}})(i,r,n,e.loc);if(a.includes("right")&&(i=xp(i,"onContextmenu")),a.includes("middle")&&(i=xp(i,"onMouseup")),a.length&&(o=kl(n.helper(gp),[o,JSON.stringify(a)])),!s.length||eh(i)&&!Op(i.content.toLowerCase())||(o=kl(n.helper(_p),[o,JSON.stringify(s)])),c.length){const e=c.map(L).join("");i=eh(i)?Dl(`${i.content}${e}`,!0):Ll(["(",i,`) + "${e}"`])}return{props:[Pl(i,o)]}})),show:(e,t,n)=>{const{exp:r,loc:i}=e;return r||n.onError(Cp(61,i)),{props:[],needRuntime:n.helper(Ep)}}};const Lp=new WeakMap;Ca((function(t,n){if(!E(t)){if(!t.nodeType)return o;t=t.innerHTML}const i=t,s=function(e){let t=Lp.get(null!=e?e:r);return t||(t=Object.create(null),Lp.set(null!=e?e:r,t)),t}(n),a=s[i];if(a)return a;if("#"===t[0]){const e=document.querySelector(t);0,t=e?e.innerHTML:""}const c=d({hoistStatic:!0,onError:void 0,onWarn:o},n);c.isCustomElement||"undefined"==typeof customElements||(c.isCustomElement=e=>!!customElements.get(e));const{code:l}=function(e,t={}){return lp(e,d({},Tp,t,{nodeTransforms:[Np,...Pp,...t.nodeTransforms||[]],directiveTransforms:d({},Dp,t.directiveTransforms||{}),transformHoist:null}))}(t,c),h=new Function("Vue",l)(e);return h._rc=!0,s[i]=h}));var kp=["src"],Mp={class:"container-fluid"},Up={class:"row"},Vp={class:"col-lg-8"},Fp={class:"mainPic"},jp={class:"remotePlayerDiv"},Bp=["src"],Gp={key:0,class:"iconCall position-absolute fade-in"},Hp={class:"button-container"},Wp={key:0,class:"tooltip-text",style:{"background-color":"#218838"}},Kp={class:"button-container"},zp={key:0,class:"tooltip-text",style:{"background-color":"#218838"}},qp={class:"button-container"},Yp={key:0,class:"tooltip-text",style:{"background-color":"#c82333"}},Jp={class:"button-container"},Xp={key:0,class:"tooltip-text",style:{"background-color":"#e0a800"}},Qp={class:"button-container"},$p={key:0,class:"tooltip-text",style:{"background-color":"#218838"}},Zp={class:"button-container"},ef={key:0,class:"tooltip-text",style:{"background-color":"#138ada"}},tf={class:"localPlayerDiv"},nf=["src"],rf={class:"col-lg-4"},of={class:"telemedForm"},sf={class:"row-fluid"},af=["src"],cf={class:"tableForm"},df={class:"table table-striped form-label formTable"},lf={colspan:"6"},hf={class:"forDetails"},uf={colspan:"12"},pf={class:"forDetails"},ff={colspan:"6"},mf={class:"forDetails"},gf={colspan:"6"},_f={class:"forDetails"},Ef={colspan:"12"},yf={class:"forDetails"},vf={colspan:"12"},bf={class:"forDetails"},Sf={colspan:"12"},Tf={class:"forDetails"},Rf={colspan:"12"},Cf={class:"forDetails"},wf={colspan:"6"},If={class:"forDetails"},Af={colspan:"6"},Of={class:"forDetails"},xf={colspan:"12"},Nf={class:"forDetails"},Pf={colspan:"12"},Df={class:"forDetails"},Lf={colspan:"12"},kf={class:"forDetails"},Mf={class:"row"},Uf={class:"col"},Vf={class:"padded-row"},Ff={colspan:"3"},jf={class:"forDetails"},Bf={class:"padded-row"},Gf={colspan:"6"},Hf={class:"forDetails"},Wf={class:"padded-row"},Kf={colspan:"6"},zf={class:"forDetails"},qf={class:"padded-row"},Yf={colspan:"6"},Jf={class:"forDetails"},Xf={class:"padded-row"},Qf={colspan:"6"},$f={class:"forDetails",style:{"white-space":"pre-line"}},Zf={class:"padded-row"},em={colspan:"6"},tm={class:"forDetails"},nm={class:"forDetails"},rm={class:"padded-row"},im={colspan:"6"},om={class:"forDetails"},sm={class:"forDetails"},am={class:"padded-row"},cm={colspan:"6"},dm={class:"forDetails",style:{"white-space":"pre-line"}},lm={key:0,class:"padded-row"},hm={colspan:"6"},um={class:"forDetails"},pm={key:1,class:"padded-row"},fm={colspan:"6"},mm={class:"forDetails",style:{"white-space":"pre-line"}},gm={key:2,class:"padded-row"},_m={colspan:"6"},Em={class:"forDetails",style:{"white-space":"pre-line"}},ym={key:3,class:"padded-row"},vm={colspan:"6"},bm={class:"forDetails",style:{"white-space":"pre-line"}},Sm={key:4,class:"padded-row"},Tm={colspan:"6"},Rm={class:"forDetails",style:{"white-space":"pre-line"}},Cm={key:5,class:"padded-row"},wm={colspan:"6"},Im={key:0},Am={key:1},Om=["href"],xm={key:0},Nm={class:"col"},Pm={class:"padded-row"},Dm={colspan:"6"},Lm={class:"forDetails"},km={class:"padded-row"},Mm={colspan:"6"},Um={class:"forDetails"},Vm={class:"padded-row"},Fm={colspan:"6"},jm={class:"forDetails"},Bm={class:"padded-row"},Gm={colspan:"6"},Hm={class:"forDetails"},Wm={class:"padded-row"},Km={colspan:"6"},zm={class:"forDetails"},qm={class:"padded-row"},Ym={colspan:"6"},Jm={class:"forDetails",style:{"white-space":"pre-line"}},Xm={class:"padded-row"},Qm={colspan:"6"},$m={class:"forDetails"},Zm={class:"padded-row"},eg={colspan:"6"},tg={class:"forDetails"},ng={class:"forDetails"},rg={class:"padded-row"},ig={colspan:"6"},og={class:"forDetails"},sg={class:"forDetails"},ag={class:"padded-row"},cg={colspan:"6"},dg={class:"forDetails",style:{"white-space":"pre-line"}},lg={key:0};var hg=n(2505),ug=n.n(hg),pg=n(5606),fg=n(8287).hp;var mg="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function gg(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var _g=function(e){try{return!!e()}catch(e){return!0}},Eg=!_g((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")})),yg=Eg,vg=Function.prototype,bg=vg.call,Sg=yg&&vg.bind.bind(bg,bg),Tg=yg?Sg:function(e){return function(){return bg.apply(e,arguments)}},Rg=Tg({}.isPrototypeOf),Cg=function(e){return e&&e.Math==Math&&e},wg=Cg("object"==typeof globalThis&&globalThis)||Cg("object"==typeof window&&window)||Cg("object"==typeof self&&self)||Cg("object"==typeof mg&&mg)||function(){return this}()||mg||Function("return this")(),Ig=Eg,Ag=Function.prototype,Og=Ag.apply,xg=Ag.call,Ng="object"==typeof Reflect&&Reflect.apply||(Ig?xg.bind(Og):function(){return xg.apply(Og,arguments)}),Pg=Tg,Dg=Pg({}.toString),Lg=Pg("".slice),kg=function(e){return Lg(Dg(e),8,-1)},Mg=kg,Ug=Tg,Vg=function(e){if("Function"===Mg(e))return Ug(e)},Fg="object"==typeof document&&document.all,jg={all:Fg,IS_HTMLDDA:void 0===Fg&&void 0!==Fg},Bg=jg.all,Gg=jg.IS_HTMLDDA?function(e){return"function"==typeof e||e===Bg}:function(e){return"function"==typeof e},Hg={},Wg=!_g((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),Kg=Eg,zg=Function.prototype.call,qg=Kg?zg.bind(zg):function(){return zg.apply(zg,arguments)},Yg={},Jg={}.propertyIsEnumerable,Xg=Object.getOwnPropertyDescriptor,Qg=Xg&&!Jg.call({1:2},1);Yg.f=Qg?function(e){var t=Xg(this,e);return!!t&&t.enumerable}:Jg;var $g,Zg,e_=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},t_=_g,n_=kg,r_=Object,i_=Tg("".split),o_=t_((function(){return!r_("z").propertyIsEnumerable(0)}))?function(e){return"String"==n_(e)?i_(e,""):r_(e)}:r_,s_=function(e){return null==e},a_=s_,c_=TypeError,d_=function(e){if(a_(e))throw c_("Can't call method on "+e);return e},l_=o_,h_=d_,u_=function(e){return l_(h_(e))},p_=Gg,f_=jg.all,m_=jg.IS_HTMLDDA?function(e){return"object"==typeof e?null!==e:p_(e)||e===f_}:function(e){return"object"==typeof e?null!==e:p_(e)},g_={},__=g_,E_=wg,y_=Gg,v_=function(e){return y_(e)?e:void 0},b_=function(e,t){return arguments.length<2?v_(__[e])||v_(E_[e]):__[e]&&__[e][t]||E_[e]&&E_[e][t]},S_="undefined"!=typeof navigator&&String(navigator.userAgent)||"",T_=wg,R_=S_,C_=T_.process,w_=T_.Deno,I_=C_&&C_.versions||w_&&w_.version,A_=I_&&I_.v8;A_&&(Zg=($g=A_.split("."))[0]>0&&$g[0]<4?1:+($g[0]+$g[1])),!Zg&&R_&&(!($g=R_.match(/Edge\/(\d+)/))||$g[1]>=74)&&($g=R_.match(/Chrome\/(\d+)/))&&(Zg=+$g[1]);var O_=Zg,x_=O_,N_=_g,P_=wg.String,D_=!!Object.getOwnPropertySymbols&&!N_((function(){var e=Symbol();return!P_(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&x_&&x_<41})),L_=D_&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,k_=b_,M_=Gg,U_=Rg,V_=Object,F_=L_?function(e){return"symbol"==typeof e}:function(e){var t=k_("Symbol");return M_(t)&&U_(t.prototype,V_(e))},j_=String,B_=function(e){try{return j_(e)}catch(e){return"Object"}},G_=Gg,H_=B_,W_=TypeError,K_=function(e){if(G_(e))return e;throw W_(H_(e)+" is not a function")},z_=K_,q_=s_,Y_=function(e,t){var n=e[t];return q_(n)?void 0:z_(n)},J_=qg,X_=Gg,Q_=m_,$_=TypeError,Z_={exports:{}},eE=wg,tE=Object.defineProperty,nE="__core-js_shared__",rE=wg[nE]||function(e,t){try{tE(eE,e,{value:t,configurable:!0,writable:!0})}catch(n){eE[e]=t}return t}(nE,{}),iE=rE;(Z_.exports=function(e,t){return iE[e]||(iE[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.31.1",mode:"pure",copyright:"© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.31.1/LICENSE",source:"https://github.com/zloirock/core-js"});var oE=Z_.exports,sE=d_,aE=Object,cE=function(e){return aE(sE(e))},dE=cE,lE=Tg({}.hasOwnProperty),hE=Object.hasOwn||function(e,t){return lE(dE(e),t)},uE=Tg,pE=0,fE=Math.random(),mE=uE(1..toString),gE=function(e){return"Symbol("+(void 0===e?"":e)+")_"+mE(++pE+fE,36)},_E=oE,EE=hE,yE=gE,vE=D_,bE=L_,SE=wg.Symbol,TE=_E("wks"),RE=bE?SE.for||SE:SE&&SE.withoutSetter||yE,CE=function(e){return EE(TE,e)||(TE[e]=vE&&EE(SE,e)?SE[e]:RE("Symbol."+e)),TE[e]},wE=qg,IE=m_,AE=F_,OE=Y_,xE=TypeError,NE=CE("toPrimitive"),PE=function(e,t){if(!IE(e)||AE(e))return e;var n,r=OE(e,NE);if(r){if(void 0===t&&(t="default"),n=wE(r,e,t),!IE(n)||AE(n))return n;throw xE("Can't convert object to primitive value")}return void 0===t&&(t="number"),function(e,t){var n,r;if("string"===t&&X_(n=e.toString)&&!Q_(r=J_(n,e)))return r;if(X_(n=e.valueOf)&&!Q_(r=J_(n,e)))return r;if("string"!==t&&X_(n=e.toString)&&!Q_(r=J_(n,e)))return r;throw $_("Can't convert object to primitive value")}(e,t)},DE=F_,LE=function(e){var t=PE(e,"string");return DE(t)?t:t+""},kE=m_,ME=wg.document,UE=kE(ME)&&kE(ME.createElement),VE=function(e){return UE?ME.createElement(e):{}},FE=VE,jE=!Wg&&!_g((function(){return 7!=Object.defineProperty(FE("div"),"a",{get:function(){return 7}}).a})),BE=Wg,GE=qg,HE=Yg,WE=e_,KE=u_,zE=LE,qE=hE,YE=jE,JE=Object.getOwnPropertyDescriptor;Hg.f=BE?JE:function(e,t){if(e=KE(e),t=zE(t),YE)try{return JE(e,t)}catch(e){}if(qE(e,t))return WE(!GE(HE.f,e,t),e[t])};var XE=_g,QE=Gg,$E=/#|\.prototype\./,ZE=function(e,t){var n=ty[ey(e)];return n==ry||n!=ny&&(QE(t)?XE(t):!!t)},ey=ZE.normalize=function(e){return String(e).replace($E,".").toLowerCase()},ty=ZE.data={},ny=ZE.NATIVE="N",ry=ZE.POLYFILL="P",iy=ZE,oy=K_,sy=Eg,ay=Vg(Vg.bind),cy=function(e,t){return oy(e),void 0===t?e:sy?ay(e,t):function(){return e.apply(t,arguments)}},dy={},ly=Wg&&_g((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),hy=m_,uy=String,py=TypeError,fy=function(e){if(hy(e))return e;throw py(uy(e)+" is not an object")},my=Wg,gy=jE,_y=ly,Ey=fy,yy=LE,vy=TypeError,by=Object.defineProperty,Sy=Object.getOwnPropertyDescriptor,Ty="enumerable",Ry="configurable",Cy="writable";dy.f=my?_y?function(e,t,n){if(Ey(e),t=yy(t),Ey(n),"function"==typeof e&&"prototype"===t&&"value"in n&&Cy in n&&!n[Cy]){var r=Sy(e,t);r&&r[Cy]&&(e[t]=n.value,n={configurable:Ry in n?n[Ry]:r[Ry],enumerable:Ty in n?n[Ty]:r[Ty],writable:!1})}return by(e,t,n)}:by:function(e,t,n){if(Ey(e),t=yy(t),Ey(n),gy)try{return by(e,t,n)}catch(e){}if("get"in n||"set"in n)throw vy("Accessors not supported");return"value"in n&&(e[t]=n.value),e};var wy=dy,Iy=e_,Ay=Wg?function(e,t,n){return wy.f(e,t,Iy(1,n))}:function(e,t,n){return e[t]=n,e},Oy=wg,xy=Ng,Ny=Vg,Py=Gg,Dy=Hg.f,Ly=iy,ky=g_,My=cy,Uy=Ay,Vy=hE,Fy=function(e){var t=function(n,r,i){if(this instanceof t){switch(arguments.length){case 0:return new e;case 1:return new e(n);case 2:return new e(n,r)}return new e(n,r,i)}return xy(e,this,arguments)};return t.prototype=e.prototype,t},jy=function(e,t){var n,r,i,o,s,a,c,d,l,h=e.target,u=e.global,p=e.stat,f=e.proto,m=u?Oy:p?Oy[h]:(Oy[h]||{}).prototype,g=u?ky:ky[h]||Uy(ky,h,{})[h],_=g.prototype;for(o in t)r=!(n=Ly(u?o:h+(p?".":"#")+o,e.forced))&&m&&Vy(m,o),a=g[o],r&&(c=e.dontCallGetSet?(l=Dy(m,o))&&l.value:m[o]),s=r&&c?c:t[o],r&&typeof a==typeof s||(d=e.bind&&r?My(s,Oy):e.wrap&&r?Fy(s):f&&Py(s)?Ny(s):s,(e.sham||s&&s.sham||a&&a.sham)&&Uy(d,"sham",!0),Uy(g,o,d),f&&(Vy(ky,i=h+"Prototype")||Uy(ky,i,{}),Uy(ky[i],o,s),e.real&&_&&(n||!_[o])&&Uy(_,o,s)))},By=Math.ceil,Gy=Math.floor,Hy=Math.trunc||function(e){var t=+e;return(t>0?Gy:By)(t)},Wy=Hy,Ky=function(e){var t=+e;return t!=t||0===t?0:Wy(t)},zy=Ky,qy=Math.max,Yy=Math.min,Jy=function(e,t){var n=zy(e);return n<0?qy(n+t,0):Yy(n,t)},Xy=Ky,Qy=Math.min,$y=function(e){return e>0?Qy(Xy(e),9007199254740991):0},Zy=$y,ev=function(e){return Zy(e.length)},tv=u_,nv=Jy,rv=ev,iv=function(e){return function(t,n,r){var i,o=tv(t),s=rv(o),a=nv(r,s);if(e&&n!=n){for(;s>a;)if((i=o[a++])!=i)return!0}else for(;s>a;a++)if((e||a in o)&&o[a]===n)return e||a||0;return!e&&-1}},ov={includes:iv(!0),indexOf:iv(!1)},sv=ov.includes;jy({target:"Array",proto:!0,forced:_g((function(){return!Array(1).includes()}))},{includes:function(e){return sv(this,e,arguments.length>1?arguments[1]:void 0)}});var av=g_,cv=function(e){return av[e+"Prototype"]},dv=cv("Array").includes,lv=m_,hv=kg,uv=CE("match"),pv=function(e){var t;return lv(e)&&(void 0!==(t=e[uv])?!!t:"RegExp"==hv(e))},fv=pv,mv=TypeError,gv={};gv[CE("toStringTag")]="z";var _v="[object z]"===String(gv),Ev=_v,yv=Gg,vv=kg,bv=CE("toStringTag"),Sv=Object,Tv="Arguments"==vv(function(){return arguments}()),Rv=Ev?vv:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Sv(e),bv))?n:Tv?vv(t):"Object"==(r=vv(t))&&yv(t.callee)?"Arguments":r},Cv=Rv,wv=String,Iv=function(e){if("Symbol"===Cv(e))throw TypeError("Cannot convert a Symbol value to a string");return wv(e)},Av=CE("match"),Ov=jy,xv=d_,Nv=Iv,Pv=Tg("".indexOf);Ov({target:"String",proto:!0,forced:!function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[Av]=!1,"/./"[e](t)}catch(e){}}return!1}("includes")},{includes:function(e){return!!~Pv(Nv(xv(this)),Nv(function(e){if(fv(e))throw mv("The method doesn't accept regular expressions");return e}(e)),arguments.length>1?arguments[1]:void 0)}});var Dv=cv("String").includes,Lv=Rg,kv=dv,Mv=Dv,Uv=Array.prototype,Vv=String.prototype,Fv=gg((function(e){var t=e.includes;return e===Uv||Lv(Uv,e)&&t===Uv.includes?kv:"string"==typeof e||e===Vv||Lv(Vv,e)&&t===Vv.includes?Mv:t})),jv=K_,Bv=cE,Gv=o_,Hv=ev,Wv=TypeError,Kv=function(e){return function(t,n,r,i){jv(n);var o=Bv(t),s=Gv(o),a=Hv(o),c=e?a-1:0,d=e?-1:1;if(r<2)for(;;){if(c in s){i=s[c],c+=d;break}if(c+=d,e?c<0:a<=c)throw Wv("Reduce of empty array with no initial value")}for(;e?c>=0:a>c;c+=d)c in s&&(i=n(i,s[c],c,o));return i}},zv={left:Kv(!1),right:Kv(!0)},qv=_g,Yv=function(e,t){var n=[][e];return!!n&&qv((function(){n.call(null,t||function(){return 1},1)}))},Jv=void 0!==pg&&"process"==kg(pg),Xv=zv.left;jy({target:"Array",proto:!0,forced:!Jv&&O_>79&&O_<83||!Yv("reduce")},{reduce:function(e){var t=arguments.length;return Xv(this,e,t,t>1?arguments[1]:void 0)}});var Qv=cv("Array").reduce,$v=Rg,Zv=Qv,eb=Array.prototype,tb=function(e){var t=e.reduce;return e===eb||$v(eb,e)&&t===eb.reduce?Zv:t},nb=gg(tb);let rb=!0,ib=!0;function ob(e,t,n){const r=e.match(t);return r&&r.length>=n&&parseInt(r[n],10)}function sb(e,t,n){if(!e.RTCPeerConnection)return;const r=e.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(e,r){if(e!==t)return i.apply(this,arguments);const o=e=>{const t=n(e);t&&(r.handleEvent?r.handleEvent(t):r(t))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(r,o),i.apply(this,[e,o])};const o=r.removeEventListener;r.removeEventListener=function(e,n){if(e!==t||!this._eventMap||!this._eventMap[t])return o.apply(this,arguments);if(!this._eventMap[t].has(n))return o.apply(this,arguments);const r=this._eventMap[t].get(n);return this._eventMap[t].delete(n),0===this._eventMap[t].size&&delete this._eventMap[t],0===Object.keys(this._eventMap).length&&delete this._eventMap,o.apply(this,[e,r])},Object.defineProperty(r,"on"+t,{get(){return this["_on"+t]},set(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}function ab(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(rb=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function cb(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(ib=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function db(){if("object"==typeof window){if(rb)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}}function lb(e,t){ib&&console.warn(e+" is deprecated, please use "+t+" instead.")}function hb(e){return"[object Object]"===Object.prototype.toString.call(e)}function ub(e){var t;return hb(e)?nb(t=Object.keys(e)).call(t,(function(t,n){const r=hb(e[n]),i=r?ub(e[n]):e[n],o=r&&!Object.keys(i).length;return void 0===i||o?t:Object.assign(t,{[n]:i})}),{}):e}function pb(e,t,n){t&&!n.has(t.id)&&(n.set(t.id,t),Object.keys(t).forEach((r=>{r.endsWith("Id")?pb(e,e.get(t[r]),n):r.endsWith("Ids")&&t[r].forEach((t=>{pb(e,e.get(t),n)}))})))}function fb(e,t,n){const r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(null===t)return i;const o=[];return e.forEach((e=>{"track"===e.type&&e.trackIdentifier===t.id&&o.push(e)})),o.forEach((t=>{e.forEach((n=>{n.type===r&&n.trackId===t.id&&pb(e,n,i)}))})),i}var mb=gE,gb=oE("keys"),_b=function(e){return gb[e]||(gb[e]=mb(e))},Eb=!_g((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),yb=hE,vb=Gg,bb=cE,Sb=Eb,Tb=_b("IE_PROTO"),Rb=Object,Cb=Rb.prototype,wb=Sb?Rb.getPrototypeOf:function(e){var t=bb(e);if(yb(t,Tb))return t[Tb];var n=t.constructor;return vb(n)&&t instanceof n?n.prototype:t instanceof Rb?Cb:null},Ib=Tg,Ab=K_,Ob=Gg,xb=String,Nb=TypeError,Pb=fy,Db=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=function(e,t,n){try{return Ib(Ab(Object.getOwnPropertyDescriptor(e,t)[n]))}catch(e){}}(Object.prototype,"__proto__","set"))(n,[]),t=n instanceof Array}catch(e){}return function(n,r){return Pb(n),function(e){if("object"==typeof e||Ob(e))return e;throw Nb("Can't set "+xb(e)+" as a prototype")}(r),t?e(n,r):n.__proto__=r,n}}():void 0),Lb={},kb={},Mb=hE,Ub=u_,Vb=ov.indexOf,Fb=kb,jb=Tg([].push),Bb=function(e,t){var n,r=Ub(e),i=0,o=[];for(n in r)!Mb(Fb,n)&&Mb(r,n)&&jb(o,n);for(;t.length>i;)Mb(r,n=t[i++])&&(~Vb(o,n)||jb(o,n));return o},Gb=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Hb=Bb,Wb=Gb.concat("length","prototype");Lb.f=Object.getOwnPropertyNames||function(e){return Hb(e,Wb)};var Kb={};Kb.f=Object.getOwnPropertySymbols;var zb=b_,qb=Lb,Yb=Kb,Jb=fy,Xb=Tg([].concat),Qb=zb("Reflect","ownKeys")||function(e){var t=qb.f(Jb(e)),n=Yb.f;return n?Xb(t,n(e)):t},$b=hE,Zb=Qb,eS=Hg,tS=dy,nS={},rS=Bb,iS=Gb,oS=Object.keys||function(e){return rS(e,iS)},sS=Wg,aS=ly,cS=dy,dS=fy,lS=u_,hS=oS;nS.f=sS&&!aS?Object.defineProperties:function(e,t){dS(e);for(var n,r=lS(t),i=hS(t),o=i.length,s=0;o>s;)cS.f(e,n=i[s++],r[n]);return e};var uS,pS=b_("document","documentElement"),fS=fy,mS=nS,gS=Gb,_S=kb,ES=pS,yS=VE,vS="prototype",bS="script",SS=_b("IE_PROTO"),TS=function(){},RS=function(e){return"<"+bS+">"+e+"</"+bS+">"},CS=function(e){e.write(RS("")),e.close();var t=e.parentWindow.Object;return e=null,t},wS=function(){try{uS=new ActiveXObject("htmlfile")}catch(e){}var e,t,n;wS="undefined"!=typeof document?document.domain&&uS?CS(uS):(t=yS("iframe"),n="java"+bS+":",t.style.display="none",ES.appendChild(t),t.src=String(n),(e=t.contentWindow.document).open(),e.write(RS("document.F=Object")),e.close(),e.F):CS(uS);for(var r=gS.length;r--;)delete wS[vS][gS[r]];return wS()};_S[SS]=!0;var IS=Object.create||function(e,t){var n;return null!==e?(TS[vS]=fS(e),n=new TS,TS[vS]=null,n[SS]=e):n=wS(),void 0===t?n:mS.f(n,t)},AS=m_,OS=Ay,xS=Error,NS=Tg("".replace),PS=String(xS("zxcasd").stack),DS=/\n\s*at [^:]*:[^\n]*/,LS=DS.test(PS),kS=e_,MS=!_g((function(){var e=Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",kS(1,7)),7!==e.stack)})),US=Ay,VS=MS,FS=Error.captureStackTrace,jS={},BS=jS,GS=CE("iterator"),HS=Array.prototype,WS=function(e){return void 0!==e&&(BS.Array===e||HS[GS]===e)},KS=Rv,zS=Y_,qS=s_,YS=jS,JS=CE("iterator"),XS=function(e){if(!qS(e))return zS(e,JS)||zS(e,"@@iterator")||YS[KS(e)]},QS=qg,$S=K_,ZS=fy,eT=B_,tT=XS,nT=TypeError,rT=function(e,t){var n=arguments.length<2?tT(e):t;if($S(n))return ZS(QS(n,e));throw nT(eT(e)+" is not iterable")},iT=qg,oT=fy,sT=Y_,aT=function(e,t,n){var r,i;oT(e);try{if(!(r=sT(e,"return"))){if("throw"===t)throw n;return n}r=iT(r,e)}catch(e){i=!0,r=e}if("throw"===t)throw n;if(i)throw r;return oT(r),n},cT=cy,dT=qg,lT=fy,hT=B_,uT=WS,pT=ev,fT=Rg,mT=rT,gT=XS,_T=aT,ET=TypeError,yT=function(e,t){this.stopped=e,this.result=t},vT=yT.prototype,bT=function(e,t,n){var r,i,o,s,a,c,d,l=n&&n.that,h=!(!n||!n.AS_ENTRIES),u=!(!n||!n.IS_RECORD),p=!(!n||!n.IS_ITERATOR),f=!(!n||!n.INTERRUPTED),m=cT(t,l),g=function(e){return r&&_T(r,"normal",e),new yT(!0,e)},_=function(e){return h?(lT(e),f?m(e[0],e[1],g):m(e[0],e[1])):f?m(e,g):m(e)};if(u)r=e.iterator;else if(p)r=e;else{if(!(i=gT(e)))throw ET(hT(e)+" is not iterable");if(uT(i)){for(o=0,s=pT(e);s>o;o++)if((a=_(e[o]))&&fT(vT,a))return a;return new yT(!1)}r=mT(e,i)}for(c=u?e.next:r.next;!(d=dT(c,r)).done;){try{a=_(d.value)}catch(e){_T(r,"throw",e)}if("object"==typeof a&&a&&fT(vT,a))return a}return new yT(!1)},ST=Iv,TT=jy,RT=Rg,CT=wb,wT=Db,IT=IS,AT=Ay,OT=e_,xT=function(e,t,n,r){VS&&(FS?FS(e,t):US(e,"stack",function(e,t){if(LS&&"string"==typeof e&&!xS.prepareStackTrace)for(;t--;)e=NS(e,DS,"");return e}(n,r)))},NT=bT,PT=CE("toStringTag"),DT=Error,LT=[].push,kT=function(e,t){var n,r=RT(MT,this);wT?n=wT(DT(),r?CT(this):MT):(n=r?this:IT(MT),AT(n,PT,"Error")),void 0!==t&&AT(n,"message",function(e,t){return void 0===e?arguments.length<2?"":t:ST(e)}(t)),xT(n,kT,n.stack,1),arguments.length>2&&function(e,t){AS(t)&&"cause"in t&&OS(e,"cause",t.cause)}(n,arguments[2]);var i=[];return NT(e,LT,{that:i}),AT(n,"errors",i),n};wT?wT(kT,DT):function(e,t,n){for(var r=Zb(t),i=tS.f,o=eS.f,s=0;s<r.length;s++){var a=r[s];$b(e,a)||n&&$b(n,a)||i(e,a,o(t,a))}}(kT,DT,{name:!0});var MT=kT.prototype=IT(DT.prototype,{constructor:OT(1,kT),message:OT(1,""),name:OT(1,"AggregateError")});TT({global:!0,constructor:!0,arity:2},{AggregateError:kT});var UT,VT,FT,jT=Gg,BT=wg.WeakMap,GT=jT(BT)&&/native code/.test(String(BT)),HT=wg,WT=m_,KT=Ay,zT=hE,qT=rE,YT=_b,JT=kb,XT="Object already initialized",QT=HT.TypeError,$T=HT.WeakMap;if(GT||qT.state){var ZT=qT.state||(qT.state=new $T);ZT.get=ZT.get,ZT.has=ZT.has,ZT.set=ZT.set,UT=function(e,t){if(ZT.has(e))throw QT(XT);return t.facade=e,ZT.set(e,t),t},VT=function(e){return ZT.get(e)||{}},FT=function(e){return ZT.has(e)}}else{var eR=YT("state");JT[eR]=!0,UT=function(e,t){if(zT(e,eR))throw QT(XT);return t.facade=e,KT(e,eR,t),t},VT=function(e){return zT(e,eR)?e[eR]:{}},FT=function(e){return zT(e,eR)}}var tR,nR,rR,iR={set:UT,get:VT,has:FT,enforce:function(e){return FT(e)?VT(e):UT(e,{})},getterFor:function(e){return function(t){var n;if(!WT(t)||(n=VT(t)).type!==e)throw QT("Incompatible receiver, "+e+" required");return n}}},oR=Wg,sR=hE,aR=Function.prototype,cR=oR&&Object.getOwnPropertyDescriptor,dR=sR(aR,"name"),lR={EXISTS:dR,PROPER:dR&&"something"===function(){}.name,CONFIGURABLE:dR&&(!oR||oR&&cR(aR,"name").configurable)},hR=Ay,uR=function(e,t,n,r){return r&&r.enumerable?e[t]=n:hR(e,t,n),e},pR=_g,fR=Gg,mR=m_,gR=IS,_R=wb,ER=uR,yR=CE("iterator"),vR=!1;[].keys&&("next"in(rR=[].keys())?(nR=_R(_R(rR)))!==Object.prototype&&(tR=nR):vR=!0);var bR=!mR(tR)||pR((function(){var e={};return tR[yR].call(e)!==e}));fR((tR=bR?{}:gR(tR))[yR])||ER(tR,yR,(function(){return this}));var SR={IteratorPrototype:tR,BUGGY_SAFARI_ITERATORS:vR},TR=Rv,RR=_v?{}.toString:function(){return"[object "+TR(this)+"]"},CR=_v,wR=dy.f,IR=Ay,AR=hE,OR=RR,xR=CE("toStringTag"),NR=function(e,t,n,r){if(e){var i=n?e:e.prototype;AR(i,xR)||wR(i,xR,{configurable:!0,value:t}),r&&!CR&&IR(i,"toString",OR)}},PR=SR.IteratorPrototype,DR=IS,LR=e_,kR=NR,MR=jS,UR=function(){return this},VR=function(e,t,n,r){var i=t+" Iterator";return e.prototype=DR(PR,{next:LR(+!r,n)}),kR(e,i,!1,!0),MR[i]=UR,e},FR=jy,jR=qg,BR=VR,GR=wb,HR=NR,WR=uR,KR=jS,zR=lR.PROPER,qR=SR.BUGGY_SAFARI_ITERATORS,YR=CE("iterator"),JR="keys",XR="values",QR="entries",$R=function(){return this},ZR=function(e,t,n,r,i,o,s){BR(n,t,r);var a,c,d,l=function(e){if(e===i&&m)return m;if(!qR&&e in p)return p[e];switch(e){case JR:case XR:case QR:return function(){return new n(this,e)}}return function(){return new n(this)}},h=t+" Iterator",u=!1,p=e.prototype,f=p[YR]||p["@@iterator"]||i&&p[i],m=!qR&&f||l(i),g="Array"==t&&p.entries||f;if(g&&(a=GR(g.call(new e)))!==Object.prototype&&a.next&&(HR(a,h,!0,!0),KR[h]=$R),zR&&i==XR&&f&&f.name!==XR&&(u=!0,m=function(){return jR(f,this)}),i)if(c={values:l(XR),keys:o?m:l(JR),entries:l(QR)},s)for(d in c)(qR||u||!(d in p))&&WR(p,d,c[d]);else FR({target:t,proto:!0,forced:qR||u},c);return s&&p[YR]!==m&&WR(p,YR,m,{name:i}),KR[t]=m,c},eC=function(e,t){return{value:e,done:t}},tC=u_,nC=jS,rC=iR;dy.f;var iC=ZR,oC=eC,sC="Array Iterator",aC=rC.set,cC=rC.getterFor(sC);iC(Array,"Array",(function(e,t){aC(this,{type:sC,target:tC(e),index:0,kind:t})}),(function(){var e=cC(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,oC(void 0,!0)):oC("keys"==n?r:"values"==n?t[r]:[r,t[r]],!1)}),"values"),nC.Arguments=nC.Array;var dC=dy,lC=function(e,t,n){return dC.f(e,t,n)},hC=b_,uC=lC,pC=Wg,fC=CE("species"),mC=Rg,gC=TypeError,_C=function(e,t){if(mC(t,e))return e;throw gC("Incorrect invocation")},EC=Gg,yC=rE,vC=Tg(Function.toString);EC(yC.inspectSource)||(yC.inspectSource=function(e){return vC(e)});var bC=yC.inspectSource,SC=Tg,TC=_g,RC=Gg,CC=Rv,wC=bC,IC=function(){},AC=[],OC=b_("Reflect","construct"),xC=/^\s*(?:class|function)\b/,NC=SC(xC.exec),PC=!xC.exec(IC),DC=function(e){if(!RC(e))return!1;try{return OC(IC,AC,e),!0}catch(e){return!1}},LC=function(e){if(!RC(e))return!1;switch(CC(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return PC||!!NC(xC,wC(e))}catch(e){return!0}};LC.sham=!0;var kC,MC,UC,VC,FC=!OC||TC((function(){var e;return DC(DC.call)||!DC(Object)||!DC((function(){e=!0}))||e}))?LC:DC,jC=FC,BC=B_,GC=TypeError,HC=fy,WC=s_,KC=CE("species"),zC=function(e,t){var n,r=HC(e).constructor;return void 0===r||WC(n=HC(r)[KC])?t:function(e){if(jC(e))return e;throw GC(BC(e)+" is not a constructor")}(n)},qC=Tg([].slice),YC=TypeError,JC=function(e,t){if(e<t)throw YC("Not enough arguments");return e},XC=/(?:ipad|iphone|ipod).*applewebkit/i.test(S_),QC=wg,$C=Ng,ZC=cy,ew=Gg,tw=hE,nw=_g,rw=pS,iw=qC,ow=VE,sw=JC,aw=XC,cw=Jv,dw=QC.setImmediate,lw=QC.clearImmediate,hw=QC.process,uw=QC.Dispatch,pw=QC.Function,fw=QC.MessageChannel,mw=QC.String,gw=0,_w={},Ew="onreadystatechange";nw((function(){kC=QC.location}));var yw=function(e){if(tw(_w,e)){var t=_w[e];delete _w[e],t()}},vw=function(e){return function(){yw(e)}},bw=function(e){yw(e.data)},Sw=function(e){QC.postMessage(mw(e),kC.protocol+"//"+kC.host)};dw&&lw||(dw=function(e){sw(arguments.length,1);var t=ew(e)?e:pw(e),n=iw(arguments,1);return _w[++gw]=function(){$C(t,void 0,n)},MC(gw),gw},lw=function(e){delete _w[e]},cw?MC=function(e){hw.nextTick(vw(e))}:uw&&uw.now?MC=function(e){uw.now(vw(e))}:fw&&!aw?(VC=(UC=new fw).port2,UC.port1.onmessage=bw,MC=ZC(VC.postMessage,VC)):QC.addEventListener&&ew(QC.postMessage)&&!QC.importScripts&&kC&&"file:"!==kC.protocol&&!nw(Sw)?(MC=Sw,QC.addEventListener("message",bw,!1)):MC=Ew in ow("script")?function(e){rw.appendChild(ow("script"))[Ew]=function(){rw.removeChild(this),yw(e)}}:function(e){setTimeout(vw(e),0)});var Tw={set:dw,clear:lw},Rw=function(){this.head=null,this.tail=null};Rw.prototype={add:function(e){var t={item:e,next:null},n=this.tail;n?n.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e)return null===(this.head=e.next)&&(this.tail=null),e.item}};var Cw,ww,Iw,Aw,Ow,xw=Rw,Nw=/ipad|iphone|ipod/i.test(S_)&&"undefined"!=typeof Pebble,Pw=/web0s(?!.*chrome)/i.test(S_),Dw=wg,Lw=cy,kw=Hg.f,Mw=Tw.set,Uw=xw,Vw=XC,Fw=Nw,jw=Pw,Bw=Jv,Gw=Dw.MutationObserver||Dw.WebKitMutationObserver,Hw=Dw.document,Ww=Dw.process,Kw=Dw.Promise,zw=kw(Dw,"queueMicrotask"),qw=zw&&zw.value;if(!qw){var Yw=new Uw,Jw=function(){var e,t;for(Bw&&(e=Ww.domain)&&e.exit();t=Yw.get();)try{t()}catch(e){throw Yw.head&&Cw(),e}e&&e.enter()};Vw||Bw||jw||!Gw||!Hw?!Fw&&Kw&&Kw.resolve?((Aw=Kw.resolve(void 0)).constructor=Kw,Ow=Lw(Aw.then,Aw),Cw=function(){Ow(Jw)}):Bw?Cw=function(){Ww.nextTick(Jw)}:(Mw=Lw(Mw,Dw),Cw=function(){Mw(Jw)}):(ww=!0,Iw=Hw.createTextNode(""),new Gw(Jw).observe(Iw,{characterData:!0}),Cw=function(){Iw.data=ww=!ww}),qw=function(e){Yw.head||Cw(),Yw.add(e)}}var Xw=qw,Qw=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}},$w=wg.Promise,Zw="object"==typeof Deno&&Deno&&"object"==typeof Deno.version,eI=!Zw&&!Jv&&"object"==typeof window&&"object"==typeof document,tI=wg,nI=$w,rI=Gg,iI=iy,oI=bC,sI=CE,aI=eI,cI=Zw,dI=O_,lI=nI&&nI.prototype,hI=sI("species"),uI=!1,pI=rI(tI.PromiseRejectionEvent),fI=iI("Promise",(function(){var e=oI(nI),t=e!==String(nI);if(!t&&66===dI)return!0;if(!lI.catch||!lI.finally)return!0;if(!dI||dI<51||!/native code/.test(e)){var n=new nI((function(e){e(1)})),r=function(e){e((function(){}),(function(){}))};if((n.constructor={})[hI]=r,!(uI=n.then((function(){}))instanceof r))return!0}return!t&&(aI||cI)&&!pI})),mI={CONSTRUCTOR:fI,REJECTION_EVENT:pI,SUBCLASSING:uI},gI={},_I=K_,EI=TypeError,yI=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw EI("Bad Promise constructor");t=e,n=r})),this.resolve=_I(t),this.reject=_I(n)};gI.f=function(e){return new yI(e)};var vI,bI,SI=jy,TI=Jv,RI=wg,CI=qg,wI=uR,II=NR,AI=K_,OI=Gg,xI=m_,NI=_C,PI=zC,DI=Tw.set,LI=Xw,kI=Qw,MI=xw,UI=iR,VI=$w,FI=gI,jI="Promise",BI=mI.CONSTRUCTOR,GI=mI.REJECTION_EVENT,HI=UI.getterFor(jI),WI=UI.set,KI=VI&&VI.prototype,zI=VI,qI=KI,YI=RI.TypeError,JI=RI.document,XI=RI.process,QI=FI.f,$I=QI,ZI=!!(JI&&JI.createEvent&&RI.dispatchEvent),eA="unhandledrejection",tA=function(e){var t;return!(!xI(e)||!OI(t=e.then))&&t},nA=function(e,t){var n,r,i,o=t.value,s=1==t.state,a=s?e.ok:e.fail,c=e.resolve,d=e.reject,l=e.domain;try{a?(s||(2===t.rejection&&aA(t),t.rejection=1),!0===a?n=o:(l&&l.enter(),n=a(o),l&&(l.exit(),i=!0)),n===e.promise?d(YI("Promise-chain cycle")):(r=tA(n))?CI(r,n,c,d):c(n)):d(o)}catch(e){l&&!i&&l.exit(),d(e)}},rA=function(e,t){e.notified||(e.notified=!0,LI((function(){for(var n,r=e.reactions;n=r.get();)nA(n,e);e.notified=!1,t&&!e.rejection&&oA(e)})))},iA=function(e,t,n){var r,i;ZI?((r=JI.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),RI.dispatchEvent(r)):r={promise:t,reason:n},!GI&&(i=RI["on"+e])?i(r):e===eA&&function(e,t){try{1==arguments.length?console.error(e):console.error(e,t)}catch(e){}}("Unhandled promise rejection",n)},oA=function(e){CI(DI,RI,(function(){var t,n=e.facade,r=e.value;if(sA(e)&&(t=kI((function(){TI?XI.emit("unhandledRejection",r,n):iA(eA,n,r)})),e.rejection=TI||sA(e)?2:1,t.error))throw t.value}))},sA=function(e){return 1!==e.rejection&&!e.parent},aA=function(e){CI(DI,RI,(function(){var t=e.facade;TI?XI.emit("rejectionHandled",t):iA("rejectionhandled",t,e.value)}))},cA=function(e,t,n){return function(r){e(t,r,n)}},dA=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,rA(e,!0))},lA=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw YI("Promise can't be resolved itself");var r=tA(t);r?LI((function(){var n={done:!1};try{CI(r,t,cA(lA,n,e),cA(dA,n,e))}catch(t){dA(n,t,e)}})):(e.value=t,e.state=1,rA(e,!1))}catch(t){dA({done:!1},t,e)}}};BI&&(qI=(zI=function(e){NI(this,qI),AI(e),CI(vI,this);var t=HI(this);try{e(cA(lA,t),cA(dA,t))}catch(e){dA(t,e)}}).prototype,(vI=function(e){WI(this,{type:jI,done:!1,notified:!1,parent:!1,reactions:new MI,rejection:!1,state:0,value:void 0})}).prototype=wI(qI,"then",(function(e,t){var n=HI(this),r=QI(PI(this,zI));return n.parent=!0,r.ok=!OI(e)||e,r.fail=OI(t)&&t,r.domain=TI?XI.domain:void 0,0==n.state?n.reactions.add(r):LI((function(){nA(r,n)})),r.promise})),bI=function(){var e=new vI,t=HI(e);this.promise=e,this.resolve=cA(lA,t),this.reject=cA(dA,t)},FI.f=QI=function(e){return e===zI||void 0===e?new bI(e):$I(e)}),SI({global:!0,constructor:!0,wrap:!0,forced:BI},{Promise:zI}),II(zI,jI,!1,!0),function(e){var t=hC(e);pC&&t&&!t[fC]&&uC(t,fC,{configurable:!0,get:function(){return this}})}(jI);var hA=CE("iterator"),uA=!1;try{var pA=0,fA={next:function(){return{done:!!pA++}},return:function(){uA=!0}};fA[hA]=function(){return this},Array.from(fA,(function(){throw 2}))}catch(e){}var mA=$w,gA=mI.CONSTRUCTOR||!function(e,t){if(!t&&!uA)return!1;var n=!1;try{var r={};r[hA]=function(){return{next:function(){return{done:n=!0}}}},e(r)}catch(e){}return n}((function(e){mA.all(e).then(void 0,(function(){}))})),_A=qg,EA=K_,yA=gI,vA=Qw,bA=bT;jy({target:"Promise",stat:!0,forced:gA},{all:function(e){var t=this,n=yA.f(t),r=n.resolve,i=n.reject,o=vA((function(){var n=EA(t.resolve),o=[],s=0,a=1;bA(e,(function(e){var c=s++,d=!1;a++,_A(n,t,e).then((function(e){d||(d=!0,o[c]=e,--a||r(o))}),i)})),--a||r(o)}));return o.error&&i(o.value),n.promise}});var SA=jy,TA=mI.CONSTRUCTOR;$w&&$w.prototype,SA({target:"Promise",proto:!0,forced:TA,real:!0},{catch:function(e){return this.then(void 0,e)}});var RA=qg,CA=K_,wA=gI,IA=Qw,AA=bT;jy({target:"Promise",stat:!0,forced:gA},{race:function(e){var t=this,n=wA.f(t),r=n.reject,i=IA((function(){var i=CA(t.resolve);AA(e,(function(e){RA(i,t,e).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}});var OA=qg,xA=gI;jy({target:"Promise",stat:!0,forced:mI.CONSTRUCTOR},{reject:function(e){var t=xA.f(this);return OA(t.reject,void 0,e),t.promise}});var NA=fy,PA=m_,DA=gI,LA=function(e,t){if(NA(e),PA(t)&&t.constructor===e)return t;var n=DA.f(e);return(0,n.resolve)(t),n.promise},kA=jy,MA=$w,UA=mI.CONSTRUCTOR,VA=LA,FA=b_("Promise"),jA=!UA;kA({target:"Promise",stat:!0,forced:!0},{resolve:function(e){return VA(jA&&this===FA?MA:this,e)}});var BA=qg,GA=K_,HA=gI,WA=Qw,KA=bT;jy({target:"Promise",stat:!0,forced:gA},{allSettled:function(e){var t=this,n=HA.f(t),r=n.resolve,i=n.reject,o=WA((function(){var n=GA(t.resolve),i=[],o=0,s=1;KA(e,(function(e){var a=o++,c=!1;s++,BA(n,t,e).then((function(e){c||(c=!0,i[a]={status:"fulfilled",value:e},--s||r(i))}),(function(e){c||(c=!0,i[a]={status:"rejected",reason:e},--s||r(i))}))})),--s||r(i)}));return o.error&&i(o.value),n.promise}});var zA=qg,qA=K_,YA=b_,JA=gI,XA=Qw,QA=bT,$A="No one promise resolved";jy({target:"Promise",stat:!0,forced:gA},{any:function(e){var t=this,n=YA("AggregateError"),r=JA.f(t),i=r.resolve,o=r.reject,s=XA((function(){var r=qA(t.resolve),s=[],a=0,c=1,d=!1;QA(e,(function(e){var l=a++,h=!1;c++,zA(r,t,e).then((function(e){h||d||(d=!0,i(e))}),(function(e){h||d||(h=!0,s[l]=e,--c||o(new n(s,$A)))}))})),--c||o(new n(s,$A))}));return s.error&&o(s.value),r.promise}});var ZA=jy,eO=$w,tO=_g,nO=b_,rO=Gg,iO=zC,oO=LA,sO=eO&&eO.prototype;ZA({target:"Promise",proto:!0,real:!0,forced:!!eO&&tO((function(){sO.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var t=iO(this,nO("Promise")),n=rO(e);return this.then(n?function(n){return oO(t,e()).then((function(){return n}))}:e,n?function(n){return oO(t,e()).then((function(){throw n}))}:e)}});var aO=Tg,cO=Ky,dO=Iv,lO=d_,hO=aO("".charAt),uO=aO("".charCodeAt),pO=aO("".slice),fO=function(e){return function(t,n){var r,i,o=dO(lO(t)),s=cO(n),a=o.length;return s<0||s>=a?e?"":void 0:(r=uO(o,s))<55296||r>56319||s+1===a||(i=uO(o,s+1))<56320||i>57343?e?hO(o,s):r:e?pO(o,s,s+2):i-56320+(r-55296<<10)+65536}},mO={codeAt:fO(!1),charAt:fO(!0)},gO=mO.charAt,_O=Iv,EO=iR,yO=ZR,vO=eC,bO="String Iterator",SO=EO.set,TO=EO.getterFor(bO);yO(String,"String",(function(e){SO(this,{type:bO,string:_O(e),index:0})}),(function(){var e,t=TO(this),n=t.string,r=t.index;return r>=n.length?vO(void 0,!0):(e=gO(n,r),t.index+=e.length,vO(e,!1))}));var RO=g_.Promise,CO=wg,wO=Rv,IO=Ay,AO=jS,OO=CE("toStringTag");for(var xO in{CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}){var NO=CO[xO],PO=NO&&NO.prototype;PO&&wO(PO)!==OO&&IO(PO,OO,xO),AO[xO]=AO.Array}var DO=RO,LO=gg(DO);const kO=db;function MO(e,t){const n=e&&e.navigator;if(!n.mediaDevices)return;const r=function(e){if("object"!=typeof e||e.mandatory||e.optional)return e;const t={};return Object.keys(e).forEach((n=>{if("require"===n||"advanced"===n||"mediaSource"===n)return;const r="object"==typeof e[n]?e[n]:{ideal:e[n]};void 0!==r.exact&&"number"==typeof r.exact&&(r.min=r.max=r.exact);const i=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==r.ideal){t.optional=t.optional||[];let e={};"number"==typeof r.ideal?(e[i("min",n)]=r.ideal,t.optional.push(e),e={},e[i("max",n)]=r.ideal,t.optional.push(e)):(e[i("",n)]=r.ideal,t.optional.push(e))}void 0!==r.exact&&"number"!=typeof r.exact?(t.mandatory=t.mandatory||{},t.mandatory[i("",n)]=r.exact):["min","max"].forEach((e=>{void 0!==r[e]&&(t.mandatory=t.mandatory||{},t.mandatory[i(e,n)]=r[e])}))})),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},i=function(e,i){if(t.version>=61)return i(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"==typeof e.audio){const t=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])};t((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),t(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=r(e.audio)}if(e&&"object"==typeof e.video){let o=e.video.facingMode;o=o&&("object"==typeof o?o:{ideal:o});const s=t.version<66;if(o&&("user"===o.exact||"environment"===o.exact||"user"===o.ideal||"environment"===o.ideal)&&(!n.mediaDevices.getSupportedConstraints||!n.mediaDevices.getSupportedConstraints().facingMode||s)){let t;if(delete e.video.facingMode,"environment"===o.exact||"environment"===o.ideal?t=["back","rear"]:"user"!==o.exact&&"user"!==o.ideal||(t=["front"]),t)return n.mediaDevices.enumerateDevices().then((n=>{let s=(n=n.filter((e=>"videoinput"===e.kind))).find((e=>t.some((t=>{var n;return Fv(n=e.label.toLowerCase()).call(n,t)}))));return!s&&n.length&&Fv(t).call(t,"back")&&(s=n[n.length-1]),s&&(e.video.deviceId=o.exact?{exact:s.deviceId}:{ideal:s.deviceId}),e.video=r(e.video),kO("chrome: "+JSON.stringify(e)),i(e)}))}e.video=r(e.video)}return kO("chrome: "+JSON.stringify(e)),i(e)},o=function(e){return t.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(n.getUserMedia=function(e,t,r){i(e,(e=>{n.webkitGetUserMedia(e,t,(e=>{r&&r(o(e))}))}))}.bind(n),n.mediaDevices.getUserMedia){const e=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(t){return i(t,(t=>e(t).then((e=>{if(t.audio&&!e.getAudioTracks().length||t.video&&!e.getVideoTracks().length)throw e.getTracks().forEach((e=>{e.stop()})),new DOMException("","NotFoundError");return e}),(e=>LO.reject(o(e))))))}}}function UO(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function VO(e){if("object"==typeof e&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=t=>{t.stream.addEventListener("addtrack",(n=>{let r;r=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find((e=>e.track&&e.track.id===n.track.id)):{track:n.track};const i=new Event("track");i.track=n.track,i.receiver=r,i.transceiver={receiver:r},i.streams=[t.stream],this.dispatchEvent(i)})),t.stream.getTracks().forEach((n=>{let r;r=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find((e=>e.track&&e.track.id===n.id)):{track:n};const i=new Event("track");i.track=n,i.receiver=r,i.transceiver={receiver:r},i.streams=[t.stream],this.dispatchEvent(i)}))},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else sb(e,"track",(e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e)))}function FO(e){if("object"==typeof e&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,r){let i=n.apply(this,arguments);return i||(i=t(this,e),this._senders.push(i)),i};const r=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){r.apply(this,arguments);const t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._senders=this._senders||[],n.apply(this,[e]),e.getTracks().forEach((e=>{this._senders.push(t(this,e))}))};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._senders=this._senders||[],r.apply(this,[e]),e.getTracks().forEach((e=>{const t=this._senders.find((t=>t.track===e));t&&this._senders.splice(this._senders.indexOf(t),1)}))}}else if("object"==typeof e&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function jO(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,n,r]=arguments;if(arguments.length>0&&"function"==typeof e)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!=typeof e))return t.apply(this,[]);const i=function(e){const t={};return e.result().forEach((e=>{const n={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach((t=>{n[t]=e.stat(t)})),t[n.id]=n})),t},o=function(e){return new Map(Object.keys(e).map((t=>[t,e[t]])))};if(arguments.length>=2){const r=function(e){n(o(i(e)))};return t.apply(this,[r,e])}return new LO(((e,n)=>{t.apply(this,[function(t){e(o(i(t)))},n])})).then(n,r)}}function BO(e){if(!("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){const e=this;return this._pc.getStats().then((t=>fb(t,e.track,!0)))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e}),sb(e,"track",(e=>(e.receiver._pc=e.srcElement,e))),e.RTCRtpReceiver.prototype.getStats=function(){const e=this;return this._pc.getStats().then((t=>fb(t,e.track,!1)))}}if(!("getStats"in e.RTCRtpSender.prototype)||!("getStats"in e.RTCRtpReceiver.prototype))return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const e=arguments[0];let t,n,r;return this.getSenders().forEach((n=>{n.track===e&&(t?r=!0:t=n)})),this.getReceivers().forEach((t=>(t.track===e&&(n?r=!0:n=t),t.track===e))),r||t&&n?LO.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):t?t.getStats():n?n.getStats():LO.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function GO(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map((e=>this._shimmedLocalStreams[e][0]))};const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){if(!n)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const r=t.apply(this,arguments);return this._shimmedLocalStreams[n.id]?-1===this._shimmedLocalStreams[n.id].indexOf(r)&&this._shimmedLocalStreams[n.id].push(r):this._shimmedLocalStreams[n.id]=[n,r],r};const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach((e=>{if(this.getSenders().find((t=>t.track===e)))throw new DOMException("Track already exists.","InvalidAccessError")}));const t=this.getSenders();n.apply(this,arguments);const r=this.getSenders().filter((e=>-1===t.indexOf(e)));this._shimmedLocalStreams[e.id]=[e].concat(r)};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],r.apply(this,arguments)};const i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach((t=>{const n=this._shimmedLocalStreams[t].indexOf(e);-1!==n&&this._shimmedLocalStreams[t].splice(n,1),1===this._shimmedLocalStreams[t].length&&delete this._shimmedLocalStreams[t]})),i.apply(this,arguments)}}function HO(e,t){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return GO(e);const n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const e=n.apply(this);return this._reverseStreams=this._reverseStreams||{},e.map((e=>this._reverseStreams[e.id]))};const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach((e=>{if(this.getSenders().find((t=>t.track===e)))throw new DOMException("Track already exists.","InvalidAccessError")})),!this._reverseStreams[t.id]){const n=new e.MediaStream(t.getTracks());this._streams[t.id]=n,this._reverseStreams[n.id]=t,t=n}r.apply(this,[t])};const i=e.RTCPeerConnection.prototype.removeStream;function o(e,t){let n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((t=>{const r=e._reverseStreams[t],i=e._streams[r.id];n=n.replace(new RegExp(i.id,"g"),r.id)})),new RTCSessionDescription({type:t.type,sdp:n})}e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,n){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const r=[].slice.call(arguments,1);if(1!==r.length||!r[0].getTracks().find((e=>e===t)))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");const i=this.getSenders().find((e=>e.track===t));if(i)throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const o=this._streams[n.id];if(o)o.addTrack(t),LO.resolve().then((()=>{this.dispatchEvent(new Event("negotiationneeded"))}));else{const r=new e.MediaStream([t]);this._streams[n.id]=r,this._reverseStreams[r.id]=n,this.addStream(r)}return this.getSenders().find((e=>e.track===t))},["createOffer","createAnswer"].forEach((function(t){const n=e.RTCPeerConnection.prototype[t],r={[t](){const e=arguments;return arguments.length&&"function"==typeof arguments[0]?n.apply(this,[t=>{const n=o(this,t);e[0].apply(null,[n])},t=>{e[1]&&e[1].apply(null,t)},arguments[2]]):n.apply(this,arguments).then((e=>o(this,e)))}};e.RTCPeerConnection.prototype[t]=r[t]}));const s=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=function(e,t){let n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((t=>{const r=e._reverseStreams[t],i=e._streams[r.id];n=n.replace(new RegExp(r.id,"g"),i.id)})),new RTCSessionDescription({type:t.type,sdp:n})}(this,arguments[0]),s.apply(this,arguments)):s.apply(this,arguments)};const a=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const e=a.get.apply(this);return""===e.type?e:o(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(e._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let t;this._streams=this._streams||{},Object.keys(this._streams).forEach((n=>{this._streams[n].getTracks().find((t=>e.track===t))&&(t=this._streams[n])})),t&&(1===t.getTracks().length?this.removeStream(this._reverseStreams[t.id]):t.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}function WO(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){const n=e.RTCPeerConnection.prototype[t],r={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=r[t]}))}function KO(e,t){sb(e,"negotiationneeded",(e=>{const n=e.target;if(!(t.version<72||n.getConfiguration&&"plan-b"===n.getConfiguration().sdpSemantics)||"stable"===n.signalingState)return e}))}var zO=Object.freeze({__proto__:null,fixNegotiationNeeded:KO,shimAddTrackRemoveTrack:HO,shimAddTrackRemoveTrackWithNative:GO,shimGetDisplayMedia:function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&("function"==typeof t?e.navigator.mediaDevices.getDisplayMedia=function(n){return t(n).then((t=>{const r=n.video&&n.video.width,i=n.video&&n.video.height,o=n.video&&n.video.frameRate;return n.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:o||3}},r&&(n.video.mandatory.maxWidth=r),i&&(n.video.mandatory.maxHeight=i),e.navigator.mediaDevices.getUserMedia(n)}))}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))},shimGetSendersWithDtmf:FO,shimGetStats:jO,shimGetUserMedia:MO,shimMediaStream:UO,shimOnTrack:VO,shimPeerConnection:WO,shimSenderReceiverGetStats:BO});function qO(e,t){const n=e&&e.navigator,r=e&&e.MediaStreamTrack;if(n.getUserMedia=function(e,t,r){lb("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(e).then(t,r)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const e=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])},t=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(n){return"object"==typeof n&&"object"==typeof n.audio&&(n=JSON.parse(JSON.stringify(n)),e(n.audio,"autoGainControl","mozAutoGainControl"),e(n.audio,"noiseSuppression","mozNoiseSuppression")),t(n)},r&&r.prototype.getSettings){const t=r.prototype.getSettings;r.prototype.getSettings=function(){const n=t.apply(this,arguments);return e(n,"mozAutoGainControl","autoGainControl"),e(n,"mozNoiseSuppression","noiseSuppression"),n}}if(r&&r.prototype.applyConstraints){const t=r.prototype.applyConstraints;r.prototype.applyConstraints=function(n){return"audio"===this.kind&&"object"==typeof n&&(n=JSON.parse(JSON.stringify(n)),e(n,"autoGainControl","mozAutoGainControl"),e(n,"noiseSuppression","mozNoiseSuppression")),t.apply(this,[n])}}}}function YO(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function JO(e,t){if("object"!=typeof e||!e.RTCPeerConnection&&!e.mozRTCPeerConnection)return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){const n=e.RTCPeerConnection.prototype[t],r={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=r[t]}));const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,i,o]=arguments;return r.apply(this,[e||null]).then((e=>{if(t.version<53&&!i)try{e.forEach((e=>{e.type=n[e.type]||e.type}))}catch(t){if("TypeError"!==t.name)throw t;e.forEach(((t,r)=>{e.set(r,Object.assign({},t,{type:n[t.type]||t.type}))}))}return e})).then(i,o)}}function XO(e){if("object"!=typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):LO.resolve(new Map)}}function QO(e){if("object"!=typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e}),sb(e,"track",(e=>(e.receiver._pc=e.srcElement,e))),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function $O(e){e.RTCPeerConnection&&!("removeStream"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(e){lb("removeStream","removeTrack"),this.getSenders().forEach((t=>{var n;t.track&&Fv(n=e.getTracks()).call(n,t.track)&&this.removeTrack(t)}))})}function ZO(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function ex(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let e=arguments[1]&&arguments[1].sendEncodings;void 0===e&&(e=[]),e=[...e];const n=e.length>0;n&&e.forEach((e=>{if("rid"in e&&!/^[a-z0-9]{0,16}$/i.test(e.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in e&&!(parseFloat(e.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(parseFloat(e.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")}));const r=t.apply(this,arguments);if(n){const{sender:t}=r,n=t.getParameters();(!("encodings"in n)||1===n.encodings.length&&0===Object.keys(n.encodings[0]).length)&&(n.encodings=e,t.sendEncodings=e,this.setParametersPromises.push(t.setParameters(n).then((()=>{delete t.sendEncodings})).catch((()=>{delete t.sendEncodings}))))}return r})}function tx(e){if("object"!=typeof e||!e.RTCRtpSender)return;const t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){const e=t.apply(this,arguments);return"encodings"in e||(e.encodings=[].concat(this.sendEncodings||[{}])),e})}function nx(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?LO.all(this.setParametersPromises).then((()=>t.apply(this,arguments))).finally((()=>{this.setParametersPromises=[]})):t.apply(this,arguments)}}function rx(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?LO.all(this.setParametersPromises).then((()=>t.apply(this,arguments))).finally((()=>{this.setParametersPromises=[]})):t.apply(this,arguments)}}var ix=Object.freeze({__proto__:null,shimAddTransceiver:ex,shimCreateAnswer:rx,shimCreateOffer:nx,shimGetDisplayMedia:function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(n){if(!n||!n.video){const e=new DOMException("getDisplayMedia without video constraints is undefined");return e.name="NotFoundError",e.code=8,LO.reject(e)}return!0===n.video?n.video={mediaSource:t}:n.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(n)})},shimGetParameters:tx,shimGetUserMedia:qO,shimOnTrack:YO,shimPeerConnection:JO,shimRTCDataChannel:ZO,shimReceiverGetStats:QO,shimRemoveStream:$O,shimSenderGetStats:XO});function ox(e){if("object"==typeof e&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){var n;this._localStreams||(this._localStreams=[]),Fv(n=this._localStreams).call(n,e)||this._localStreams.push(e),e.getAudioTracks().forEach((n=>t.call(this,n,e))),e.getVideoTracks().forEach((n=>t.call(this,n,e)))},e.RTCPeerConnection.prototype.addTrack=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r&&r.forEach((e=>{var t;this._localStreams?Fv(t=this._localStreams).call(t,e)||this._localStreams.push(e):this._localStreams=[e]})),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){this._localStreams||(this._localStreams=[]);const t=this._localStreams.indexOf(e);if(-1===t)return;this._localStreams.splice(t,1);const n=e.getTracks();this.getSenders().forEach((e=>{Fv(n).call(n,e.track)&&this.removeTrack(e)}))})}}function sx(e){if("object"==typeof e&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(e){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=e=>{e.streams.forEach((e=>{var t;if(this._remoteStreams||(this._remoteStreams=[]),Fv(t=this._remoteStreams).call(t,e))return;this._remoteStreams.push(e);const n=new Event("addstream");n.stream=e,this.dispatchEvent(n)}))})}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach((t=>{if(e._remoteStreams||(e._remoteStreams=[]),e._remoteStreams.indexOf(t)>=0)return;e._remoteStreams.push(t);const n=new Event("addstream");n.stream=t,e.dispatchEvent(n)}))}),t.apply(e,arguments)}}}function ax(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype,n=t.createOffer,r=t.createAnswer,i=t.setLocalDescription,o=t.setRemoteDescription,s=t.addIceCandidate;t.createOffer=function(e,t){const r=arguments.length>=2?arguments[2]:arguments[0],i=n.apply(this,[r]);return t?(i.then(e,t),LO.resolve()):i},t.createAnswer=function(e,t){const n=arguments.length>=2?arguments[2]:arguments[0],i=r.apply(this,[n]);return t?(i.then(e,t),LO.resolve()):i};let a=function(e,t,n){const r=i.apply(this,[e]);return n?(r.then(t,n),LO.resolve()):r};t.setLocalDescription=a,a=function(e,t,n){const r=o.apply(this,[e]);return n?(r.then(t,n),LO.resolve()):r},t.setRemoteDescription=a,a=function(e,t,n){const r=s.apply(this,[e]);return n?(r.then(t,n),LO.resolve()):r},t.addIceCandidate=a}function cx(e){const t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const e=t.mediaDevices,n=e.getUserMedia.bind(e);t.mediaDevices.getUserMedia=e=>n(dx(e))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,n,r){t.mediaDevices.getUserMedia(e).then(n,r)}.bind(t))}function dx(e){return e&&void 0!==e.video?Object.assign({},e,{video:ub(e.video)}):e}function lx(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,n){if(e&&e.iceServers){const t=[];for(let n=0;n<e.iceServers.length;n++){let r=e.iceServers[n];!r.hasOwnProperty("urls")&&r.hasOwnProperty("url")?(lb("RTCIceServer.url","RTCIceServer.urls"),r=JSON.parse(JSON.stringify(r)),r.urls=r.url,delete r.url,t.push(r)):t.push(e.iceServers[n])}e.iceServers=t}return new t(e,n)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:()=>t.generateCertificate})}function hx(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function ux(e){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);const t=this.getTransceivers().find((e=>"audio"===e.receiver.track.kind));!1===e.offerToReceiveAudio&&t?"sendrecv"===t.direction?t.setDirection?t.setDirection("sendonly"):t.direction="sendonly":"recvonly"===t.direction&&(t.setDirection?t.setDirection("inactive"):t.direction="inactive"):!0!==e.offerToReceiveAudio||t||this.addTransceiver("audio",{direction:"recvonly"}),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);const n=this.getTransceivers().find((e=>"video"===e.receiver.track.kind));!1===e.offerToReceiveVideo&&n?"sendrecv"===n.direction?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":"recvonly"===n.direction&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):!0!==e.offerToReceiveVideo||n||this.addTransceiver("video",{direction:"recvonly"})}return t.apply(this,arguments)}}function px(e){"object"!=typeof e||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}var fx=Object.freeze({__proto__:null,shimAudioContext:px,shimCallbacksAPI:ax,shimConstraints:dx,shimCreateOfferLegacy:ux,shimGetUserMedia:cx,shimLocalStreamsAPI:ox,shimRTCIceServerUrls:lx,shimRemoteStreamsAPI:sx,shimTrackEventTransceiver:hx}),mx="\t\n\v\f\r                　\u2028\u2029\ufeff",gx=d_,_x=Iv,Ex=mx,yx=Tg("".replace),vx=RegExp("^["+Ex+"]+"),bx=RegExp("(^|[^"+Ex+"])["+Ex+"]+$"),Sx=function(e){return function(t){var n=_x(gx(t));return 1&e&&(n=yx(n,vx,"")),2&e&&(n=yx(n,bx,"$1")),n}},Tx={start:Sx(1),end:Sx(2),trim:Sx(3)},Rx=lR.PROPER,Cx=_g,wx=mx,Ix=Tx.trim;jy({target:"String",proto:!0,forced:function(e){return Cx((function(){return!!wx[e]()||"​᠎"!=="​᠎"[e]()||Rx&&wx[e].name!==e}))}("trim")},{trim:function(){return Ix(this)}});var Ax=cv("String").trim,Ox=Rg,xx=Ax,Nx=String.prototype,Px=gg((function(e){var t=e.trim;return"string"==typeof e||e===Nx||Ox(Nx,e)&&t===Nx.trim?xx:t})),Dx={exports:{}};!function(e){const t={generateIdentifier:function(){return Math.random().toString(36).substring(2,12)}};t.localCName=t.generateIdentifier(),t.splitLines=function(e){return e.trim().split("\n").map((e=>e.trim()))},t.splitSections=function(e){return e.split("\nm=").map(((e,t)=>(t>0?"m="+e:e).trim()+"\r\n"))},t.getDescription=function(e){const n=t.splitSections(e);return n&&n[0]},t.getMediaSections=function(e){const n=t.splitSections(e);return n.shift(),n},t.matchPrefix=function(e,n){return t.splitLines(e).filter((e=>0===e.indexOf(n)))},t.parseCandidate=function(e){let t;t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" ");const n={foundation:t[0],component:{1:"rtp",2:"rtcp"}[t[1]]||t[1],protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]};for(let e=8;e<t.length;e+=2)switch(t[e]){case"raddr":n.relatedAddress=t[e+1];break;case"rport":n.relatedPort=parseInt(t[e+1],10);break;case"tcptype":n.tcpType=t[e+1];break;case"ufrag":n.ufrag=t[e+1],n.usernameFragment=t[e+1];break;default:void 0===n[t[e]]&&(n[t[e]]=t[e+1])}return n},t.writeCandidate=function(e){const t=[];t.push(e.foundation);const n=e.component;"rtp"===n?t.push(1):"rtcp"===n?t.push(2):t.push(n),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);const r=e.type;return t.push("typ"),t.push(r),"host"!==r&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},t.parseIceOptions=function(e){return e.substring(14).split(" ")},t.parseRtpMap=function(e){let t=e.substring(9).split(" ");const n={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.channels=3===t.length?parseInt(t[2],10):1,n.numChannels=n.channels,n},t.writeRtpMap=function(e){let t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);const n=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==n?"/"+n:"")+"\r\n"},t.parseExtmap=function(e){const t=e.substring(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1],attributes:t.slice(2).join(" ")}},t.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+(e.attributes?" "+e.attributes:"")+"\r\n"},t.parseFmtp=function(e){const t={};let n;const r=e.substring(e.indexOf(" ")+1).split(";");for(let e=0;e<r.length;e++)n=r[e].trim().split("="),t[n[0].trim()]=n[1];return t},t.writeFmtp=function(e){let t="",n=e.payloadType;if(void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){const r=[];Object.keys(e.parameters).forEach((t=>{void 0!==e.parameters[t]?r.push(t+"="+e.parameters[t]):r.push(t)})),t+="a=fmtp:"+n+" "+r.join(";")+"\r\n"}return t},t.parseRtcpFb=function(e){const t=e.substring(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},t.writeRtcpFb=function(e){let t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach((e=>{t+="a=rtcp-fb:"+n+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"})),t},t.parseSsrcMedia=function(e){const t=e.indexOf(" "),n={ssrc:parseInt(e.substring(7,t),10)},r=e.indexOf(":",t);return r>-1?(n.attribute=e.substring(t+1,r),n.value=e.substring(r+1)):n.attribute=e.substring(t+1),n},t.parseSsrcGroup=function(e){const t=e.substring(13).split(" ");return{semantics:t.shift(),ssrcs:t.map((e=>parseInt(e,10)))}},t.getMid=function(e){const n=t.matchPrefix(e,"a=mid:")[0];if(n)return n.substring(6)},t.parseFingerprint=function(e){const t=e.substring(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1].toUpperCase()}},t.getDtlsParameters=function(e,n){return{role:"auto",fingerprints:t.matchPrefix(e+n,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(e,t){let n="a=setup:"+t+"\r\n";return e.fingerprints.forEach((e=>{n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"})),n},t.parseCryptoLine=function(e){const t=e.substring(9).split(" ");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},t.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"==typeof e.keyParams?t.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},t.parseCryptoKeyParams=function(e){if(0!==e.indexOf("inline:"))return null;const t=e.substring(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:void 0,mkiLength:t[2]?t[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(e){return e.keyMethod+":"+e.keySalt+(e.lifeTime?"|"+e.lifeTime:"")+(e.mkiValue&&e.mkiLength?"|"+e.mkiValue+":"+e.mkiLength:"")},t.getCryptoParameters=function(e,n){return t.matchPrefix(e+n,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(e,n){const r=t.matchPrefix(e+n,"a=ice-ufrag:")[0],i=t.matchPrefix(e+n,"a=ice-pwd:")[0];return r&&i?{usernameFragment:r.substring(12),password:i.substring(10)}:null},t.writeIceParameters=function(e){let t="a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n";return e.iceLite&&(t+="a=ice-lite\r\n"),t},t.parseRtpParameters=function(e){const n={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},r=t.splitLines(e)[0].split(" ");n.profile=r[2];for(let i=3;i<r.length;i++){const o=r[i],s=t.matchPrefix(e,"a=rtpmap:"+o+" ")[0];if(s){const r=t.parseRtpMap(s),i=t.matchPrefix(e,"a=fmtp:"+o+" ");switch(r.parameters=i.length?t.parseFmtp(i[0]):{},r.rtcpFeedback=t.matchPrefix(e,"a=rtcp-fb:"+o+" ").map(t.parseRtcpFb),n.codecs.push(r),r.name.toUpperCase()){case"RED":case"ULPFEC":n.fecMechanisms.push(r.name.toUpperCase())}}}t.matchPrefix(e,"a=extmap:").forEach((e=>{n.headerExtensions.push(t.parseExtmap(e))}));const i=t.matchPrefix(e,"a=rtcp-fb:* ").map(t.parseRtcpFb);return n.codecs.forEach((e=>{i.forEach((t=>{e.rtcpFeedback.find((e=>e.type===t.type&&e.parameter===t.parameter))||e.rtcpFeedback.push(t)}))})),n},t.writeRtpDescription=function(e,n){let r="";r+="m="+e+" ",r+=n.codecs.length>0?"9":"0",r+=" "+(n.profile||"UDP/TLS/RTP/SAVPF")+" ",r+=n.codecs.map((e=>void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType)).join(" ")+"\r\n",r+="c=IN IP4 0.0.0.0\r\n",r+="a=rtcp:9 IN IP4 0.0.0.0\r\n",n.codecs.forEach((e=>{r+=t.writeRtpMap(e),r+=t.writeFmtp(e),r+=t.writeRtcpFb(e)}));let i=0;return n.codecs.forEach((e=>{e.maxptime>i&&(i=e.maxptime)})),i>0&&(r+="a=maxptime:"+i+"\r\n"),n.headerExtensions&&n.headerExtensions.forEach((e=>{r+=t.writeExtmap(e)})),r},t.parseRtpEncodingParameters=function(e){const n=[],r=t.parseRtpParameters(e),i=-1!==r.fecMechanisms.indexOf("RED"),o=-1!==r.fecMechanisms.indexOf("ULPFEC"),s=t.matchPrefix(e,"a=ssrc:").map((e=>t.parseSsrcMedia(e))).filter((e=>"cname"===e.attribute)),a=s.length>0&&s[0].ssrc;let c;const d=t.matchPrefix(e,"a=ssrc-group:FID").map((e=>e.substring(17).split(" ").map((e=>parseInt(e,10)))));d.length>0&&d[0].length>1&&d[0][0]===a&&(c=d[0][1]),r.codecs.forEach((e=>{if("RTX"===e.name.toUpperCase()&&e.parameters.apt){let t={ssrc:a,codecPayloadType:parseInt(e.parameters.apt,10)};a&&c&&(t.rtx={ssrc:c}),n.push(t),i&&(t=JSON.parse(JSON.stringify(t)),t.fec={ssrc:a,mechanism:o?"red+ulpfec":"red"},n.push(t))}})),0===n.length&&a&&n.push({ssrc:a});let l=t.matchPrefix(e,"b=");return l.length&&(l=0===l[0].indexOf("b=TIAS:")?parseInt(l[0].substring(7),10):0===l[0].indexOf("b=AS:")?1e3*parseInt(l[0].substring(5),10)*.95-16e3:void 0,n.forEach((e=>{e.maxBitrate=l}))),n},t.parseRtcpParameters=function(e){const n={},r=t.matchPrefix(e,"a=ssrc:").map((e=>t.parseSsrcMedia(e))).filter((e=>"cname"===e.attribute))[0];r&&(n.cname=r.value,n.ssrc=r.ssrc);const i=t.matchPrefix(e,"a=rtcp-rsize");n.reducedSize=i.length>0,n.compound=0===i.length;const o=t.matchPrefix(e,"a=rtcp-mux");return n.mux=o.length>0,n},t.writeRtcpParameters=function(e){let t="";return e.reducedSize&&(t+="a=rtcp-rsize\r\n"),e.mux&&(t+="a=rtcp-mux\r\n"),void 0!==e.ssrc&&e.cname&&(t+="a=ssrc:"+e.ssrc+" cname:"+e.cname+"\r\n"),t},t.parseMsid=function(e){let n;const r=t.matchPrefix(e,"a=msid:");if(1===r.length)return n=r[0].substring(7).split(" "),{stream:n[0],track:n[1]};const i=t.matchPrefix(e,"a=ssrc:").map((e=>t.parseSsrcMedia(e))).filter((e=>"msid"===e.attribute));return i.length>0?(n=i[0].value.split(" "),{stream:n[0],track:n[1]}):void 0},t.parseSctpDescription=function(e){const n=t.parseMLine(e),r=t.matchPrefix(e,"a=max-message-size:");let i;r.length>0&&(i=parseInt(r[0].substring(19),10)),isNaN(i)&&(i=65536);const o=t.matchPrefix(e,"a=sctp-port:");if(o.length>0)return{port:parseInt(o[0].substring(12),10),protocol:n.fmt,maxMessageSize:i};const s=t.matchPrefix(e,"a=sctpmap:");if(s.length>0){const e=s[0].substring(10).split(" ");return{port:parseInt(e[0],10),protocol:e[1],maxMessageSize:i}}},t.writeSctpDescription=function(e,t){let n=[];return n="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&n.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),n.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,22)},t.writeSessionBoilerplate=function(e,n,r){let i;const o=void 0!==n?n:2;return i=e||t.generateSessionId(),"v=0\r\no="+(r||"thisisadapterortc")+" "+i+" "+o+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},t.getDirection=function(e,n){const r=t.splitLines(e);for(let e=0;e<r.length;e++)switch(r[e]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return r[e].substring(2)}return n?t.getDirection(n):"sendrecv"},t.getKind=function(e){return t.splitLines(e)[0].split(" ")[0].substring(2)},t.isRejected=function(e){return"0"===e.split(" ",2)[1]},t.parseMLine=function(e){const n=t.splitLines(e)[0].substring(2).split(" ");return{kind:n[0],port:parseInt(n[1],10),protocol:n[2],fmt:n.slice(3).join(" ")}},t.parseOLine=function(e){const n=t.matchPrefix(e,"o=")[0].substring(2).split(" ");return{username:n[0],sessionId:n[1],sessionVersion:parseInt(n[2],10),netType:n[3],addressType:n[4],address:n[5]}},t.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;const n=t.splitLines(e);for(let e=0;e<n.length;e++)if(n[e].length<2||"="!==n[e].charAt(1))return!1;return!0},e.exports=t}(Dx);var Lx=Dx.exports,kx=gg(Lx),Mx=function(e,t){return t.forEach((function(t){t&&"string"!=typeof t&&!Array.isArray(t)&&Object.keys(t).forEach((function(n){if("default"!==n&&!(n in e)){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})}}))})),Object.freeze(e)}({__proto__:null,default:kx},[Lx]);function Ux(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"==typeof e&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){const n=new t(e),r=kx.parseCandidate(e.candidate),i=Object.assign(n,r);return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,sb(e,"icecandidate",(t=>(t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t)))}function Vx(e){!e.RTCIceCandidate||e.RTCIceCandidate&&"relayProtocol"in e.RTCIceCandidate.prototype||sb(e,"icecandidate",(e=>{if(e.candidate){const t=kx.parseCandidate(e.candidate.candidate);"relay"===t.type&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[t.priority>>24])}return e}))}function Fx(e,t){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return void 0===this._sctp?null:this._sctp}});const n=function(e){let n=65536;return"firefox"===t.browser&&(n=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),n},r=function(e,n){let r=65536;"firefox"===t.browser&&57===t.version&&(r=65535);const i=kx.matchPrefix(e.sdp,"a=max-message-size:");return i.length>0?r=parseInt(i[0].substr(19),10):"firefox"===t.browser&&-1!==n&&(r=2147483637),r},i=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===t.browser&&t.version>=76){const{sdpSemantics:e}=this.getConfiguration();"plan-b"===e&&Object.defineProperty(this,"sctp",{get(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(function(e){if(!e||!e.sdp)return!1;const t=kx.splitSections(e.sdp);return t.shift(),t.some((e=>{const t=kx.parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")}))}(arguments[0])){const e=function(e){const t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;const n=parseInt(t[1],10);return n!=n?-1:n}(arguments[0]),t=n(e),i=r(arguments[0],e);let o;o=0===t&&0===i?Number.POSITIVE_INFINITY:0===t||0===i?Math.max(t,i):Math.min(t,i);const s={};Object.defineProperty(s,"maxMessageSize",{get:()=>o}),this._sctp=s}return i.apply(this,arguments)}}function jx(e){if(!e.RTCPeerConnection||!("createDataChannel"in e.RTCPeerConnection.prototype))return;function t(e,t){const n=e.send;e.send=function(){const r=arguments[0],i=r.length||r.size||r.byteLength;if("open"===e.readyState&&t.sctp&&i>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return n.apply(e,arguments)}}const n=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const e=n.apply(this,arguments);return t(e,this),e},sb(e,"datachannel",(e=>(t(e.channel,e.target),e)))}function Bx(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach((e=>{const n=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=e=>{const t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;const n=new Event("connectionstatechange",e);t.dispatchEvent(n)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}}))}function Gx(e,t){if(!e.RTCPeerConnection)return;if("chrome"===t.browser&&t.version>=71)return;if("safari"===t.browser&&t.version>=605)return;const n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(t){if(t&&t.sdp&&-1!==t.sdp.indexOf("\na=extmap-allow-mixed")){const n=t.sdp.split("\n").filter((e=>"a=extmap-allow-mixed"!==Px(e).call(e))).join("\n");e.RTCSessionDescription&&t instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:t.type,sdp:n}):t.sdp=n}return n.apply(this,arguments)}}function Hx(e,t){if(!e.RTCPeerConnection||!e.RTCPeerConnection.prototype)return;const n=e.RTCPeerConnection.prototype.addIceCandidate;n&&0!==n.length&&(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===t.browser&&t.version<78||"firefox"===t.browser&&t.version<68||"safari"===t.browser)&&arguments[0]&&""===arguments[0].candidate?LO.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),LO.resolve())})}function Wx(e,t){if(!e.RTCPeerConnection||!e.RTCPeerConnection.prototype)return;const n=e.RTCPeerConnection.prototype.setLocalDescription;n&&0!==n.length&&(e.RTCPeerConnection.prototype.setLocalDescription=function(){let e=arguments[0]||{};if("object"!=typeof e||e.type&&e.sdp)return n.apply(this,arguments);if(e={type:e.type,sdp:e.sdp},!e.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":e.type="offer";break;default:e.type="answer"}return e.sdp||"offer"!==e.type&&"answer"!==e.type?n.apply(this,[e]):("offer"===e.type?this.createOffer:this.createAnswer).apply(this).then((e=>n.apply(this,[e])))})}var Kx=Object.freeze({__proto__:null,removeExtmapAllowMixed:Gx,shimAddIceCandidateNullOrEmpty:Hx,shimConnectionState:Bx,shimMaxMessageSize:Fx,shimParameterlessSetLocalDescription:Wx,shimRTCIceCandidate:Ux,shimRTCIceCandidateRelayProtocol:Vx,shimSendThrowTypeError:jx});!function(){let{window:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimSafari:!0};const n=db,r=function(e){const t={browser:null,version:null};if(void 0===e||!e.navigator)return t.browser="Not a browser.",t;const{navigator:n}=e;if(n.mozGetUserMedia)t.browser="firefox",t.version=ob(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection)t.browser="chrome",t.version=ob(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else{if(!e.RTCPeerConnection||!n.userAgent.match(/AppleWebKit\/(\d+)\./))return t.browser="Not a supported browser.",t;t.browser="safari",t.version=ob(n.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return t}(e),i={browserDetails:r,commonShim:Kx,extractVersion:ob,disableLog:ab,disableWarnings:cb,sdp:Mx};switch(r.browser){case"chrome":if(!zO||!WO||!t.shimChrome)return n("Chrome shim is not included in this adapter release."),i;if(null===r.version)return n("Chrome shim can not determine version, not shimming."),i;n("adapter.js shimming chrome."),i.browserShim=zO,Hx(e,r),Wx(e),MO(e,r),UO(e),WO(e,r),VO(e),HO(e,r),FO(e),jO(e),BO(e),KO(e,r),Ux(e),Vx(e),Bx(e),Fx(e,r),jx(e),Gx(e,r);break;case"firefox":if(!ix||!JO||!t.shimFirefox)return n("Firefox shim is not included in this adapter release."),i;n("adapter.js shimming firefox."),i.browserShim=ix,Hx(e,r),Wx(e),qO(e,r),JO(e,r),YO(e),$O(e),XO(e),QO(e),ZO(e),ex(e),tx(e),nx(e),rx(e),Ux(e),Bx(e),Fx(e,r),jx(e);break;case"safari":if(!fx||!t.shimSafari)return n("Safari shim is not included in this adapter release."),i;n("adapter.js shimming safari."),i.browserShim=fx,Hx(e,r),Wx(e),lx(e),ux(e),ax(e),ox(e),sx(e),hx(e),cx(e),px(e),Ux(e),Vx(e),Fx(e,r),jx(e),Gx(e,r);break;default:n("Unsupported browser!")}}({window:"undefined"==typeof window?void 0:window});var zx=cv("Array").keys,qx=Rv,Yx=hE,Jx=Rg,Xx=zx,Qx=Array.prototype,$x={DOMTokenList:!0,NodeList:!0},Zx=gg((function(e){var t=e.keys;return e===Qx||Jx(Qx,e)&&t===Qx.keys||Yx($x,qx(e))?Xx:t})),eN=B_,tN=TypeError,nN=LE,rN=dy,iN=e_,oN=function(e,t,n){var r=nN(t);r in e?rN.f(e,r,iN(0,n)):e[r]=n},sN=Jy,aN=ev,cN=oN,dN=Array,lN=Math.max,hN=function(e,t,n){for(var r=aN(e),i=sN(t,r),o=sN(void 0===n?r:n,r),s=dN(lN(o-i,0)),a=0;i<o;i++,a++)cN(s,a,e[i]);return s.length=a,s},uN=hN,pN=Math.floor,fN=function(e,t){var n=e.length,r=pN(n/2);return n<8?mN(e,t):gN(e,fN(uN(e,0,r),t),fN(uN(e,r),t),t)},mN=function(e,t){for(var n,r,i=e.length,o=1;o<i;){for(r=o,n=e[o];r&&t(e[r-1],n)>0;)e[r]=e[--r];r!==o++&&(e[r]=n)}return e},gN=function(e,t,n,r){for(var i=t.length,o=n.length,s=0,a=0;s<i||a<o;)e[s+a]=s<i&&a<o?r(t[s],n[a])<=0?t[s++]:n[a++]:s<i?t[s++]:n[a++];return e},_N=fN,EN=S_.match(/firefox\/(\d+)/i),yN=!!EN&&+EN[1],vN=/MSIE|Trident/.test(S_),bN=S_.match(/AppleWebKit\/(\d+)\./),SN=!!bN&&+bN[1],TN=jy,RN=Tg,CN=K_,wN=cE,IN=ev,AN=function(e,t){if(!delete e[t])throw tN("Cannot delete property "+eN(t)+" of "+eN(e))},ON=Iv,xN=_g,NN=_N,PN=Yv,DN=yN,LN=vN,kN=O_,MN=SN,UN=[],VN=RN(UN.sort),FN=RN(UN.push),jN=xN((function(){UN.sort(void 0)})),BN=xN((function(){UN.sort(null)})),GN=PN("sort"),HN=!xN((function(){if(kN)return kN<70;if(!(DN&&DN>3)){if(LN)return!0;if(MN)return MN<603;var e,t,n,r,i="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(r=0;r<47;r++)UN.push({k:t+r,v:n})}for(UN.sort((function(e,t){return t.v-e.v})),r=0;r<UN.length;r++)t=UN[r].k.charAt(0),i.charAt(i.length-1)!==t&&(i+=t);return"DGBEFHACIJK"!==i}}));TN({target:"Array",proto:!0,forced:jN||!BN||!GN||!HN},{sort:function(e){void 0!==e&&CN(e);var t=wN(this);if(HN)return void 0===e?VN(t):VN(t,e);var n,r,i=[],o=IN(t);for(r=0;r<o;r++)r in t&&FN(i,t[r]);for(NN(i,function(e){return function(t,n){return void 0===n?-1:void 0===t?1:void 0!==e?+e(t,n)||0:ON(t)>ON(n)?1:-1}}(e)),n=IN(i),r=0;r<n;)t[r]=i[r++];for(;r<o;)AN(t,r++);return t}});var WN,KN,zN=cv("Array").sort,qN=Rg,YN=zN,JN=Array.prototype,XN=gg((function(e){var t=e.sort;return e===JN||qN(JN,e)&&t===JN.sort?YN:t})),QN={exports:{}};WN=QN,KN=QN.exports,function(e,t){var n="function",r="undefined",i="object",o="string",s="major",a="model",c="name",d="type",l="vendor",h="version",u="architecture",p="console",f="mobile",m="tablet",g="smarttv",_="wearable",E="embedded",y="Amazon",v="Apple",b="ASUS",S="BlackBerry",T="Browser",R="Chrome",C="Firefox",w="Google",I="Huawei",A="LG",O="Microsoft",x="Motorola",N="Opera",P="Samsung",D="Sharp",L="Sony",k="Xiaomi",M="Zebra",U="Facebook",V="Chromium OS",F="Mac OS",j=function(e){for(var t={},n=0;n<e.length;n++)t[e[n].toUpperCase()]=e[n];return t},B=function(e,t){return typeof e===o&&-1!==G(t).indexOf(G(e))},G=function(e){return e.toLowerCase()},H=function(e,t){if(typeof e===o)return e=e.replace(/^\s\s*/,""),typeof t===r?e:e.substring(0,350)},W=function(e,r){for(var o,s,a,c,d,l,h=0;h<r.length&&!d;){var u=r[h],p=r[h+1];for(o=s=0;o<u.length&&!d&&u[o];)if(d=u[o++].exec(e))for(a=0;a<p.length;a++)l=d[++s],typeof(c=p[a])===i&&c.length>0?2===c.length?typeof c[1]==n?this[c[0]]=c[1].call(this,l):this[c[0]]=c[1]:3===c.length?typeof c[1]!==n||c[1].exec&&c[1].test?this[c[0]]=l?l.replace(c[1],c[2]):t:this[c[0]]=l?c[1].call(this,l,c[2]):t:4===c.length&&(this[c[0]]=l?c[3].call(this,l.replace(c[1],c[2])):t):this[c]=l||t;h+=2}},K=function(e,n){for(var r in n)if(typeof n[r]===i&&n[r].length>0){for(var o=0;o<n[r].length;o++)if(B(n[r][o],e))return"?"===r?t:r}else if(B(n[r],e))return"?"===r?t:r;return e},z={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},q={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[h,[c,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[h,[c,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[c,h],[/opios[\/ ]+([\w\.]+)/i],[h,[c,N+" Mini"]],[/\bopr\/([\w\.]+)/i],[h,[c,N]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[c,h],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[h,[c,"UC"+T]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[h,[c,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[h,[c,"WeChat"]],[/konqueror\/([\w\.]+)/i],[h,[c,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[h,[c,"IE"]],[/yabrowser\/([\w\.]+)/i],[h,[c,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[c,/(.+)/,"$1 Secure "+T],h],[/\bfocus\/([\w\.]+)/i],[h,[c,C+" Focus"]],[/\bopt\/([\w\.]+)/i],[h,[c,N+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[h,[c,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[h,[c,"Dolphin"]],[/coast\/([\w\.]+)/i],[h,[c,N+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[h,[c,"MIUI "+T]],[/fxios\/([-\w\.]+)/i],[h,[c,C]],[/\bqihu|(qi?ho?o?|360)browser/i],[[c,"360 "+T]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[c,/(.+)/,"$1 "+T],h],[/(comodo_dragon)\/([\w\.]+)/i],[[c,/_/g," "],h],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[c,h],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[c],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[c,U],h],[/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[c,h],[/\bgsa\/([\w\.]+) .*safari\//i],[h,[c,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[h,[c,R+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[c,R+" WebView"],h],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[h,[c,"Android "+T]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[c,h],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[h,[c,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[h,c],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[c,[h,K,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[c,h],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[c,"Netscape"],h],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[h,[c,C+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[c,h],[/(cobalt)\/([\w\.]+)/i],[c,[h,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[u,"amd64"]],[/(ia32(?=;))/i],[[u,G]],[/((?:i[346]|x)86)[;\)]/i],[[u,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[u,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[u,"armhf"]],[/windows (ce|mobile); ppc;/i],[[u,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[u,/ower/,"",G]],[/(sun4\w)[;\)]/i],[[u,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[u,G]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[a,[l,P],[d,m]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[a,[l,P],[d,f]],[/\((ip(?:hone|od)[\w ]*);/i],[a,[l,v],[d,f]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[a,[l,v],[d,m]],[/(macintosh);/i],[a,[l,v]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[a,[l,D],[d,f]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[a,[l,I],[d,m]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[a,[l,I],[d,f]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[a,/_/g," "],[l,k],[d,f]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[a,/_/g," "],[l,k],[d,m]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[a,[l,"OPPO"],[d,f]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[a,[l,"Vivo"],[d,f]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[a,[l,"Realme"],[d,f]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[a,[l,x],[d,f]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[a,[l,x],[d,m]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[a,[l,A],[d,m]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[a,[l,A],[d,f]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[a,[l,"Lenovo"],[d,m]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[a,/_/g," "],[l,"Nokia"],[d,f]],[/(pixel c)\b/i],[a,[l,w],[d,m]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[a,[l,w],[d,f]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[a,[l,L],[d,f]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[a,"Xperia Tablet"],[l,L],[d,m]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[a,[l,"OnePlus"],[d,f]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[a,[l,y],[d,m]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[a,/(.+)/g,"Fire Phone $1"],[l,y],[d,f]],[/(playbook);[-\w\),; ]+(rim)/i],[a,l,[d,m]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[a,[l,S],[d,f]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[a,[l,b],[d,m]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[a,[l,b],[d,f]],[/(nexus 9)/i],[a,[l,"HTC"],[d,m]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[l,[a,/_/g," "],[d,f]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[a,[l,"Acer"],[d,m]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[a,[l,"Meizu"],[d,f]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[l,a,[d,f]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[l,a,[d,m]],[/(surface duo)/i],[a,[l,O],[d,m]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[a,[l,"Fairphone"],[d,f]],[/(u304aa)/i],[a,[l,"AT&T"],[d,f]],[/\bsie-(\w*)/i],[a,[l,"Siemens"],[d,f]],[/\b(rct\w+) b/i],[a,[l,"RCA"],[d,m]],[/\b(venue[\d ]{2,7}) b/i],[a,[l,"Dell"],[d,m]],[/\b(q(?:mv|ta)\w+) b/i],[a,[l,"Verizon"],[d,m]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[a,[l,"Barnes & Noble"],[d,m]],[/\b(tm\d{3}\w+) b/i],[a,[l,"NuVision"],[d,m]],[/\b(k88) b/i],[a,[l,"ZTE"],[d,m]],[/\b(nx\d{3}j) b/i],[a,[l,"ZTE"],[d,f]],[/\b(gen\d{3}) b.+49h/i],[a,[l,"Swiss"],[d,f]],[/\b(zur\d{3}) b/i],[a,[l,"Swiss"],[d,m]],[/\b((zeki)?tb.*\b) b/i],[a,[l,"Zeki"],[d,m]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[l,"Dragon Touch"],a,[d,m]],[/\b(ns-?\w{0,9}) b/i],[a,[l,"Insignia"],[d,m]],[/\b((nxa|next)-?\w{0,9}) b/i],[a,[l,"NextBook"],[d,m]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[l,"Voice"],a,[d,f]],[/\b(lvtel\-)?(v1[12]) b/i],[[l,"LvTel"],a,[d,f]],[/\b(ph-1) /i],[a,[l,"Essential"],[d,f]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[a,[l,"Envizen"],[d,m]],[/\b(trio[-\w\. ]+) b/i],[a,[l,"MachSpeed"],[d,m]],[/\btu_(1491) b/i],[a,[l,"Rotor"],[d,m]],[/(shield[\w ]+) b/i],[a,[l,"Nvidia"],[d,m]],[/(sprint) (\w+)/i],[l,a,[d,f]],[/(kin\.[onetw]{3})/i],[[a,/\./g," "],[l,O],[d,f]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[a,[l,M],[d,m]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[a,[l,M],[d,f]],[/smart-tv.+(samsung)/i],[l,[d,g]],[/hbbtv.+maple;(\d+)/i],[[a,/^/,"SmartTV"],[l,P],[d,g]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[l,A],[d,g]],[/(apple) ?tv/i],[l,[a,v+" TV"],[d,g]],[/crkey/i],[[a,R+"cast"],[l,w],[d,g]],[/droid.+aft(\w)( bui|\))/i],[a,[l,y],[d,g]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[a,[l,D],[d,g]],[/(bravia[\w ]+)( bui|\))/i],[a,[l,L],[d,g]],[/(mitv-\w{5}) bui/i],[a,[l,k],[d,g]],[/Hbbtv.*(technisat) (.*);/i],[l,a,[d,g]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[l,H],[a,H],[d,g]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[d,g]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[l,a,[d,p]],[/droid.+; (shield) bui/i],[a,[l,"Nvidia"],[d,p]],[/(playstation [345portablevi]+)/i],[a,[l,L],[d,p]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[a,[l,O],[d,p]],[/((pebble))app/i],[l,a,[d,_]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[a,[l,v],[d,_]],[/droid.+; (glass) \d/i],[a,[l,w],[d,_]],[/droid.+; (wt63?0{2,3})\)/i],[a,[l,M],[d,_]],[/(quest( 2| pro)?)/i],[a,[l,U],[d,_]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[l,[d,E]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[a,[d,f]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[a,[d,m]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[d,m]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[d,f]],[/(android[-\w\. ]{0,9});.+buil/i],[a,[l,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[h,[c,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[h,[c,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[c,h],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[h,c]],os:[[/microsoft (windows) (vista|xp)/i],[c,h],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[c,[h,K,z]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[c,"Windows"],[h,K,z]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[h,/_/g,"."],[c,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[c,F],[h,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[h,c],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[c,h],[/\(bb(10);/i],[h,[c,S]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[h,[c,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[h,[c,C+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[h,[c,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[h,[c,"watchOS"]],[/crkey\/([\d\.]+)/i],[h,[c,R+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[c,V],h],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[c,h],[/(sunos) ?([\w\.\d]*)/i],[[c,"Solaris"],h],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[c,h]]},Y=function(p,g){if(typeof p===i&&(g=p,p=t),!(this instanceof Y))return new Y(p,g).getResult();var _=typeof e!==r&&e.navigator?e.navigator:t,E=p||(_&&_.userAgent?_.userAgent:""),y=_&&_.userAgentData?_.userAgentData:t,v=g?function(e,t){var n={};for(var r in e)t[r]&&t[r].length%2==0?n[r]=t[r].concat(e[r]):n[r]=e[r];return n}(q,g):q;return this.getBrowser=function(){var e={};return e[c]=t,e[h]=t,W.call(e,E,v.browser),e[s]=function(e){return typeof e===o?e.replace(/[^\d\.]/g,"").split(".")[0]:t}(e[h]),_&&_.brave&&typeof _.brave.isBrave==n&&(e[c]="Brave"),e},this.getCPU=function(){var e={};return e[u]=t,W.call(e,E,v.cpu),e},this.getDevice=function(){var e={};return e[l]=t,e[a]=t,e[d]=t,W.call(e,E,v.device),!e[d]&&y&&y.mobile&&(e[d]=f),"Macintosh"==e[a]&&_&&typeof _.standalone!==r&&_.maxTouchPoints&&_.maxTouchPoints>2&&(e[a]="iPad",e[d]=m),e},this.getEngine=function(){var e={};return e[c]=t,e[h]=t,W.call(e,E,v.engine),e},this.getOS=function(){var e={};return e[c]=t,e[h]=t,W.call(e,E,v.os),!e[c]&&y&&"Unknown"!=y.platform&&(e[c]=y.platform.replace(/chrome os/i,V).replace(/macos/i,F)),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return E},this.setUA=function(e){return E=typeof e===o&&e.length>350?H(e,350):e,this},this.setUA(E),this};Y.VERSION="0.7.34",Y.BROWSER=j([c,h,s]),Y.CPU=j([u]),Y.DEVICE=j([a,l,d,p,f,g,m,_,E]),Y.ENGINE=Y.OS=j([c,h]),WN.exports&&(KN=WN.exports=Y),KN.UAParser=Y;var J=typeof e!==r&&(e.jQuery||e.Zepto);if(J&&!J.ua){var X=new Y;J.ua=X.getResult(),J.ua.get=function(){return X.getUA()},J.ua.set=function(e){X.setUA(e);var t=X.getResult();for(var n in t)J.ua[n]=t[n]}}}("object"==typeof window?window:mg);var $N=gg(QN.exports),ZN=Rv,eP=hE,tP=s_,nP=jS,rP=CE("iterator"),iP=Object,oP=gg((function(e){if(tP(e))return!1;var t=iP(e);return void 0!==t[rP]||"@@iterator"in t||eP(nP,ZN(t))})),sP=wg;jy({global:!0,forced:sP.globalThis!==sP},{globalThis:sP});var aP=gg(wg),cP=Tw.clear;jy({global:!0,bind:!0,enumerable:!0,forced:wg.clearImmediate!==cP},{clearImmediate:cP});var dP="function"==typeof Bun&&Bun&&"string"==typeof Bun.version,lP=wg,hP=Ng,uP=Gg,pP=dP,fP=S_,mP=qC,gP=JC,_P=lP.Function,EP=/MSIE .\./.test(fP)||pP&&function(){var e=lP.Bun.version.split(".");return e.length<3||0==e[0]&&(e[1]<3||3==e[1]&&0==e[2])}(),yP=jy,vP=wg,bP=Tw.set,SP=vP.setImmediate?function(e,t){var n=t?2:1;return EP?function(r,i){var o=gP(arguments.length,1)>n,s=uP(r)?r:_P(r),a=o?mP(arguments,n):[],c=o?function(){hP(s,this,a)}:s;return t?e(c,i):e(c)}:e}(bP,!1):bP;yP({global:!0,bind:!0,enumerable:!0,forced:vP.setImmediate!==SP},{setImmediate:SP});var TP=gg(g_.setImmediate),RP=jy,CP=Xw,wP=K_,IP=JC,AP=Jv,OP=wg.process;RP({global:!0,enumerable:!0,dontCallGetSet:!0},{queueMicrotask:function(e){IP(arguments.length,1),wP(e);var t=AP&&OP.domain;CP(t?t.bind(e):e)}});var xP=gg(g_.queueMicrotask);function NP(e,t){return function(){return e.apply(t,arguments)}}const{toString:PP}=Object.prototype,{getPrototypeOf:DP}=Object,LP=(kP=Object.create(null),e=>{const t=PP.call(e);return kP[t]||(kP[t]=t.slice(8,-1).toLowerCase())});var kP;const MP=e=>(e=e.toLowerCase(),t=>LP(t)===e),UP=e=>t=>typeof t===e,{isArray:VP}=Array,FP=UP("undefined"),jP=MP("ArrayBuffer"),BP=UP("string"),GP=UP("function"),HP=UP("number"),WP=e=>null!==e&&"object"==typeof e,KP=e=>{if("object"!==LP(e))return!1;const t=DP(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||oP(e))},zP=MP("Date"),qP=MP("File"),YP=MP("Blob"),JP=MP("FileList"),XP=MP("URLSearchParams"),[QP,$P,ZP,eD]=["ReadableStream","Request","Response","Headers"].map(MP);function tD(e,t){let n,r,{allOwnKeys:i=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!=e)if("object"!=typeof e&&(e=[e]),VP(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{const r=i?Object.getOwnPropertyNames(e):Object.keys(e),o=r.length;let s;for(n=0;n<o;n++)s=r[n],t.call(null,e[s],s,e)}}function nD(e,t){t=t.toLowerCase();const n=Object.keys(e);let r,i=n.length;for(;i-- >0;)if(r=n[i],t===r.toLowerCase())return r;return null}const rD=void 0!==aP?aP:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,iD=e=>!FP(e)&&e!==rD,oD=(sD="undefined"!=typeof Uint8Array&&DP(Uint8Array),e=>sD&&e instanceof sD);var sD;const aD=MP("HTMLFormElement"),cD=(e=>{let{hasOwnProperty:t}=e;return(e,n)=>t.call(e,n)})(Object.prototype),dD=MP("RegExp"),lD=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};tD(n,((n,i)=>{let o;!1!==(o=t(n,i,e))&&(r[i]=o||n)})),Object.defineProperties(e,r)},hD="abcdefghijklmnopqrstuvwxyz",uD="0123456789",pD={DIGIT:uD,ALPHA:hD,ALPHA_DIGIT:hD+hD.toUpperCase()+uD},fD=MP("AsyncFunction"),mD=(gD="function"==typeof TP,_D=GP(rD.postMessage),gD?TP:_D?(ED="axios@".concat(Math.random()),yD=[],rD.addEventListener("message",(e=>{let{source:t,data:n}=e;t===rD&&n===ED&&yD.length&&yD.shift()()}),!1),e=>{yD.push(e),rD.postMessage(ED,"*")}):e=>setTimeout(e));var gD,_D,ED,yD;const vD=void 0!==xP?xP.bind(rD):void 0!==pg&&pg.nextTick||mD;var bD={isArray:VP,isArrayBuffer:jP,isBuffer:function(e){return null!==e&&!FP(e)&&null!==e.constructor&&!FP(e.constructor)&&GP(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||GP(e.append)&&("formdata"===(t=LP(e))||"object"===t&&GP(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&jP(e.buffer),t},isString:BP,isNumber:HP,isBoolean:e=>!0===e||!1===e,isObject:WP,isPlainObject:KP,isReadableStream:QP,isRequest:$P,isResponse:ZP,isHeaders:eD,isUndefined:FP,isDate:zP,isFile:qP,isBlob:YP,isRegExp:dD,isFunction:GP,isStream:e=>WP(e)&&GP(e.pipe),isURLSearchParams:XP,isTypedArray:oD,isFileList:JP,forEach:tD,merge:function e(){const{caseless:t}=iD(this)&&this||{},n={},r=(r,i)=>{const o=t&&nD(n,i)||i;KP(n[o])&&KP(r)?n[o]=e(n[o],r):KP(r)?n[o]=e({},r):VP(r)?n[o]=r.slice():n[o]=r};for(let e=0,t=arguments.length;e<t;e++)arguments[e]&&tD(arguments[e],r);return n},extend:function(e,t,n){let{allOwnKeys:r}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return tD(t,((t,r)=>{n&&GP(t)?e[r]=NP(t,n):e[r]=t}),{allOwnKeys:r}),e},trim:e=>Px(e)?Px(e).call(e):e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let i,o,s;const a={};if(t=t||{},null==e)return t;do{for(i=Object.getOwnPropertyNames(e),o=i.length;o-- >0;)s=i[o],r&&!r(s,e,t)||a[s]||(t[s]=e[s],a[s]=!0);e=!1!==n&&DP(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:LP,kindOfTest:MP,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return-1!==r&&r===n},toArray:e=>{if(!e)return null;if(VP(e))return e;let t=e.length;if(!HP(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let r;for(;(r=n.next())&&!r.done;){const n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:aD,hasOwnProperty:cD,hasOwnProp:cD,reduceDescriptors:lD,freezeMethods:e=>{lD(e,((t,n)=>{if(GP(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=e[n];GP(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},r=e=>{e.forEach((e=>{n[e]=!0}))};return VP(e)?r(e):r(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:nD,global:rD,isContextDefined:iD,ALPHABET:pD,generateString:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:pD.ALPHA_DIGIT,n="";const{length:r}=t;for(;e--;)n+=t[Math.random()*r|0];return n},isSpecCompliantForm:function(e){return!!(e&&GP(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const t=new Array(10),n=(e,r)=>{if(WP(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[r]=e;const i=VP(e)?[]:{};return tD(e,((e,t)=>{const o=n(e,r+1);!FP(o)&&(i[t]=o)})),t[r]=void 0,i}}return e};return n(e,0)},isAsyncFn:fD,isThenable:e=>e&&(WP(e)||GP(e))&&GP(e.then)&&GP(e.catch),setImmediate:mD,asap:vD};function SD(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}bD.inherits(SD,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:bD.toJSONObject(this.config),code:this.code,status:this.status}}});const TD=SD.prototype,RD={};function CD(e){return bD.isPlainObject(e)||bD.isArray(e)}function wD(e){return bD.endsWith(e,"[]")?e.slice(0,-2):e}function ID(e,t,n){return e?e.concat(t).map((function(e,t){return e=wD(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{RD[e]={value:e}})),Object.defineProperties(SD,RD),Object.defineProperty(TD,"isAxiosError",{value:!0}),SD.from=(e,t,n,r,i,o)=>{const s=Object.create(TD);return bD.toFlatObject(e,s,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),SD.call(s,e.message,t,n,r,i),s.cause=e,s.name=e.name,o&&Object.assign(s,o),s};const AD=bD.toFlatObject(bD,{},null,(function(e){return/^is[A-Z]/.test(e)}));function OD(e,t,n){if(!bD.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(n=bD.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!bD.isUndefined(t[e])}))).metaTokens,i=n.visitor||d,o=n.dots,s=n.indexes,a=(n.Blob||"undefined"!=typeof Blob&&Blob)&&bD.isSpecCompliantForm(t);if(!bD.isFunction(i))throw new TypeError("visitor must be a function");function c(e){if(null===e)return"";if(bD.isDate(e))return e.toISOString();if(!a&&bD.isBlob(e))throw new SD("Blob is not supported. Use a Buffer instead.");return bD.isArrayBuffer(e)||bD.isTypedArray(e)?a&&"function"==typeof Blob?new Blob([e]):fg.from(e):e}function d(e,n,i){let a=e;if(e&&!i&&"object"==typeof e)if(bD.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(bD.isArray(e)&&function(e){return bD.isArray(e)&&!e.some(CD)}(e)||(bD.isFileList(e)||bD.endsWith(n,"[]"))&&(a=bD.toArray(e)))return n=wD(n),a.forEach((function(e,r){!bD.isUndefined(e)&&null!==e&&t.append(!0===s?ID([n],r,o):null===s?n:n+"[]",c(e))})),!1;return!!CD(e)||(t.append(ID(i,n,o),c(e)),!1)}const l=[],h=Object.assign(AD,{defaultVisitor:d,convertValue:c,isVisitable:CD});if(!bD.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!bD.isUndefined(n)){if(-1!==l.indexOf(n))throw Error("Circular reference detected in "+r.join("."));l.push(n),bD.forEach(n,(function(n,o){!0===(!(bD.isUndefined(n)||null===n)&&i.call(t,n,bD.isString(o)?Px(o).call(o):o,r,h))&&e(n,r?r.concat(o):[o])})),l.pop()}}(e),t}function xD(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function ND(e,t){this._pairs=[],e&&OD(e,this,t)}const PD=ND.prototype;function DD(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function LD(e,t,n){if(!t)return e;const r=n&&n.encode||DD,i=n&&n.serialize;let o;if(o=i?i(t,n):bD.isURLSearchParams(t)?t.toString():new ND(t,n).toString(r),o){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}PD.append=function(e,t){this._pairs.push([e,t])},PD.toString=function(e){const t=e?function(t){return e.call(this,t,xD)}:xD;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};var kD=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){bD.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},MD={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},UD={exports:{}},VD=jy,FD=Wg,jD=dy.f;VD({target:"Object",stat:!0,forced:Object.defineProperty!==jD,sham:!FD},{defineProperty:jD});var BD=g_.Object,GD=UD.exports=function(e,t,n){return BD.defineProperty(e,t,n)};BD.defineProperty.sham&&(GD.sham=!0);var HD=gg(UD.exports),WD=kg,KD=Array.isArray||function(e){return"Array"==WD(e)},zD=TypeError,qD=KD,YD=FC,JD=m_,XD=CE("species"),QD=Array,$D=function(e,t){return new(function(e){var t;return qD(e)&&(t=e.constructor,(YD(t)&&(t===QD||qD(t.prototype))||JD(t)&&null===(t=t[XD]))&&(t=void 0)),void 0===t?QD:t}(e))(0===t?0:t)},ZD=_g,eL=O_,tL=CE("species"),nL=function(e){return eL>=51||!ZD((function(){var t=[];return(t.constructor={})[tL]=function(){return{foo:1}},1!==t[e](Boolean).foo}))},rL=jy,iL=_g,oL=KD,sL=m_,aL=cE,cL=ev,dL=function(e){if(e>9007199254740991)throw zD("Maximum allowed index exceeded");return e},lL=oN,hL=$D,uL=nL,pL=O_,fL=CE("isConcatSpreadable"),mL=pL>=51||!iL((function(){var e=[];return e[fL]=!1,e.concat()[0]!==e})),gL=function(e){if(!sL(e))return!1;var t=e[fL];return void 0!==t?!!t:oL(e)};rL({target:"Array",proto:!0,arity:1,forced:!mL||!uL("concat")},{concat:function(e){var t,n,r,i,o,s=aL(this),a=hL(s,0),c=0;for(t=-1,r=arguments.length;t<r;t++)if(gL(o=-1===t?s:arguments[t]))for(i=cL(o),dL(c+i),n=0;n<i;n++,c++)n in o&&lL(a,c,o[n]);else dL(c+1),lL(a,c++,o);return a.length=c,a}});var _L={},EL=kg,yL=u_,vL=Lb.f,bL=hN,SL="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];_L.f=function(e){return SL&&"Window"==EL(e)?function(e){try{return vL(e)}catch(e){return bL(SL)}}(e):vL(yL(e))};var TL={},RL=CE;TL.f=RL;var CL=g_,wL=hE,IL=TL,AL=dy.f,OL=function(e){var t=CL.Symbol||(CL.Symbol={});wL(t,e)||AL(t,e,{value:IL.f(e)})},xL=qg,NL=b_,PL=CE,DL=uR,LL=function(){var e=NL("Symbol"),t=e&&e.prototype,n=t&&t.valueOf,r=PL("toPrimitive");t&&!t[r]&&DL(t,r,(function(e){return xL(n,this)}),{arity:1})},kL=cy,ML=o_,UL=cE,VL=ev,FL=$D,jL=Tg([].push),BL=function(e){var t=1==e,n=2==e,r=3==e,i=4==e,o=6==e,s=7==e,a=5==e||o;return function(c,d,l,h){for(var u,p,f=UL(c),m=ML(f),g=kL(d,l),_=VL(m),E=0,y=h||FL,v=t?y(c,_):n||s?y(c,0):void 0;_>E;E++)if((a||E in m)&&(p=g(u=m[E],E,f),e))if(t)v[E]=p;else if(p)switch(e){case 3:return!0;case 5:return u;case 6:return E;case 2:jL(v,u)}else switch(e){case 4:return!1;case 7:jL(v,u)}return o?-1:r||i?i:v}},GL={forEach:BL(0),map:BL(1),filter:BL(2),some:BL(3),every:BL(4),find:BL(5),findIndex:BL(6),filterReject:BL(7)},HL=jy,WL=wg,KL=qg,zL=Tg,qL=Wg,YL=D_,JL=_g,XL=hE,QL=Rg,$L=fy,ZL=u_,ek=LE,tk=Iv,nk=e_,rk=IS,ik=oS,ok=Lb,sk=_L,ak=Kb,ck=Hg,dk=dy,lk=nS,hk=Yg,uk=uR,pk=lC,fk=oE,mk=kb,gk=gE,_k=CE,Ek=TL,yk=OL,vk=LL,bk=NR,Sk=iR,Tk=GL.forEach,Rk=_b("hidden"),Ck="Symbol",wk="prototype",Ik=Sk.set,Ak=Sk.getterFor(Ck),Ok=Object[wk],xk=WL.Symbol,Nk=xk&&xk[wk],Pk=WL.TypeError,Dk=WL.QObject,Lk=ck.f,kk=dk.f,Mk=sk.f,Uk=hk.f,Vk=zL([].push),Fk=fk("symbols"),jk=fk("op-symbols"),Bk=fk("wks"),Gk=!Dk||!Dk[wk]||!Dk[wk].findChild,Hk=qL&&JL((function(){return 7!=rk(kk({},"a",{get:function(){return kk(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=Lk(Ok,t);r&&delete Ok[t],kk(e,t,n),r&&e!==Ok&&kk(Ok,t,r)}:kk,Wk=function(e,t){var n=Fk[e]=rk(Nk);return Ik(n,{type:Ck,tag:e,description:t}),qL||(n.description=t),n},Kk=function(e,t,n){e===Ok&&Kk(jk,t,n),$L(e);var r=ek(t);return $L(n),XL(Fk,r)?(n.enumerable?(XL(e,Rk)&&e[Rk][r]&&(e[Rk][r]=!1),n=rk(n,{enumerable:nk(0,!1)})):(XL(e,Rk)||kk(e,Rk,nk(1,{})),e[Rk][r]=!0),Hk(e,r,n)):kk(e,r,n)},zk=function(e,t){$L(e);var n=ZL(t),r=ik(n).concat(Xk(n));return Tk(r,(function(t){qL&&!KL(qk,n,t)||Kk(e,t,n[t])})),e},qk=function(e){var t=ek(e),n=KL(Uk,this,t);return!(this===Ok&&XL(Fk,t)&&!XL(jk,t))&&(!(n||!XL(this,t)||!XL(Fk,t)||XL(this,Rk)&&this[Rk][t])||n)},Yk=function(e,t){var n=ZL(e),r=ek(t);if(n!==Ok||!XL(Fk,r)||XL(jk,r)){var i=Lk(n,r);return!i||!XL(Fk,r)||XL(n,Rk)&&n[Rk][r]||(i.enumerable=!0),i}},Jk=function(e){var t=Mk(ZL(e)),n=[];return Tk(t,(function(e){XL(Fk,e)||XL(mk,e)||Vk(n,e)})),n},Xk=function(e){var t=e===Ok,n=Mk(t?jk:ZL(e)),r=[];return Tk(n,(function(e){!XL(Fk,e)||t&&!XL(Ok,e)||Vk(r,Fk[e])})),r};YL||(uk(Nk=(xk=function(){if(QL(Nk,this))throw Pk("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?tk(arguments[0]):void 0,t=gk(e),n=function(e){this===Ok&&KL(n,jk,e),XL(this,Rk)&&XL(this[Rk],t)&&(this[Rk][t]=!1),Hk(this,t,nk(1,e))};return qL&&Gk&&Hk(Ok,t,{configurable:!0,set:n}),Wk(t,e)})[wk],"toString",(function(){return Ak(this).tag})),uk(xk,"withoutSetter",(function(e){return Wk(gk(e),e)})),hk.f=qk,dk.f=Kk,lk.f=zk,ck.f=Yk,ok.f=sk.f=Jk,ak.f=Xk,Ek.f=function(e){return Wk(_k(e),e)},qL&&pk(Nk,"description",{configurable:!0,get:function(){return Ak(this).description}})),HL({global:!0,constructor:!0,wrap:!0,forced:!YL,sham:!YL},{Symbol:xk}),Tk(ik(Bk),(function(e){yk(e)})),HL({target:Ck,stat:!0,forced:!YL},{useSetter:function(){Gk=!0},useSimple:function(){Gk=!1}}),HL({target:"Object",stat:!0,forced:!YL,sham:!qL},{create:function(e,t){return void 0===t?rk(e):zk(rk(e),t)},defineProperty:Kk,defineProperties:zk,getOwnPropertyDescriptor:Yk}),HL({target:"Object",stat:!0,forced:!YL},{getOwnPropertyNames:Jk}),vk(),bk(xk,Ck),mk[Rk]=!0;var Qk=D_&&!!Symbol.for&&!!Symbol.keyFor,$k=jy,Zk=b_,eM=hE,tM=Iv,nM=oE,rM=Qk,iM=nM("string-to-symbol-registry"),oM=nM("symbol-to-string-registry");$k({target:"Symbol",stat:!0,forced:!rM},{for:function(e){var t=tM(e);if(eM(iM,t))return iM[t];var n=Zk("Symbol")(t);return iM[t]=n,oM[n]=t,n}});var sM=jy,aM=hE,cM=F_,dM=B_,lM=Qk,hM=oE("symbol-to-string-registry");sM({target:"Symbol",stat:!0,forced:!lM},{keyFor:function(e){if(!cM(e))throw TypeError(dM(e)+" is not a symbol");if(aM(hM,e))return hM[e]}});var uM=KD,pM=Gg,fM=kg,mM=Iv,gM=Tg([].push),_M=jy,EM=b_,yM=Ng,vM=qg,bM=Tg,SM=_g,TM=Gg,RM=F_,CM=qC,wM=D_,IM=String,AM=EM("JSON","stringify"),OM=bM(/./.exec),xM=bM("".charAt),NM=bM("".charCodeAt),PM=bM("".replace),DM=bM(1..toString),LM=/[\uD800-\uDFFF]/g,kM=/^[\uD800-\uDBFF]$/,MM=/^[\uDC00-\uDFFF]$/,UM=!wM||SM((function(){var e=EM("Symbol")();return"[null]"!=AM([e])||"{}"!=AM({a:e})||"{}"!=AM(Object(e))})),VM=SM((function(){return'"\\udf06\\ud834"'!==AM("\udf06\ud834")||'"\\udead"'!==AM("\udead")})),FM=function(e,t){var n=CM(arguments),r=function(e){if(pM(e))return e;if(uM(e)){for(var t=e.length,n=[],r=0;r<t;r++){var i=e[r];"string"==typeof i?gM(n,i):"number"!=typeof i&&"Number"!=fM(i)&&"String"!=fM(i)||gM(n,mM(i))}var o=n.length,s=!0;return function(e,t){if(s)return s=!1,t;if(uM(this))return t;for(var r=0;r<o;r++)if(n[r]===e)return t}}}(t);if(TM(r)||void 0!==e&&!RM(e))return n[1]=function(e,t){if(TM(r)&&(t=vM(r,this,IM(e),t)),!RM(t))return t},yM(AM,null,n)},jM=function(e,t,n){var r=xM(n,t-1),i=xM(n,t+1);return OM(kM,e)&&!OM(MM,i)||OM(MM,e)&&!OM(kM,r)?"\\u"+DM(NM(e,0),16):e};AM&&_M({target:"JSON",stat:!0,arity:3,forced:UM||VM},{stringify:function(e,t,n){var r=CM(arguments),i=yM(UM?FM:AM,null,r);return VM&&"string"==typeof i?PM(i,LM,jM):i}});var BM=Kb,GM=cE;jy({target:"Object",stat:!0,forced:!D_||_g((function(){BM.f(1)}))},{getOwnPropertySymbols:function(e){var t=BM.f;return t?t(GM(e)):[]}}),OL("asyncIterator"),OL("hasInstance"),OL("isConcatSpreadable"),OL("iterator"),OL("match"),OL("matchAll"),OL("replace"),OL("search"),OL("species"),OL("split");var HM=LL;OL("toPrimitive"),HM();var WM=b_,KM=NR;OL("toStringTag"),KM(WM("Symbol"),"Symbol"),OL("unscopables"),NR(wg.JSON,"JSON",!0);var zM=g_.Symbol,qM=CE,YM=dy.f,JM=qM("metadata"),XM=Function.prototype;void 0===XM[JM]&&YM(XM,JM,{value:null}),OL("dispose"),OL("metadata");var QM=zM;OL("asyncDispose");var $M=Tg,ZM=b_("Symbol"),eU=ZM.keyFor,tU=$M(ZM.prototype.valueOf),nU=ZM.isRegisteredSymbol||function(e){try{return void 0!==eU(tU(e))}catch(e){return!1}};jy({target:"Symbol",stat:!0},{isRegisteredSymbol:nU});for(var rU=oE,iU=b_,oU=Tg,sU=F_,aU=CE,cU=iU("Symbol"),dU=cU.isWellKnownSymbol,lU=iU("Object","getOwnPropertyNames"),hU=oU(cU.prototype.valueOf),uU=rU("wks"),pU=0,fU=lU(cU),mU=fU.length;pU<mU;pU++)try{var gU=fU[pU];sU(cU[gU])&&aU(gU)}catch(e){}var _U=function(e){if(dU&&dU(e))return!0;try{for(var t=hU(e),n=0,r=lU(uU),i=r.length;n<i;n++)if(uU[r[n]]==t)return!0}catch(e){}return!1};jy({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:_U}),OL("matcher"),OL("observable"),jy({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:nU}),jy({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:_U}),OL("metadataKey"),OL("patternMatch"),OL("replaceAll");var EU=gg(QM),yU=gg(TL.f("iterator"));function vU(e){return vU="function"==typeof EU&&"symbol"==typeof yU?function(e){return typeof e}:function(e){return e&&"function"==typeof EU&&e.constructor===EU&&e!==EU.prototype?"symbol":typeof e},vU(e)}var bU=gg(TL.f("toPrimitive"));function SU(e,t,n){return(t=function(e){var t=function(e){if("object"!==vU(e)||null===e)return e;var t=e[bU];if(void 0!==t){var n=t.call(e,"string");if("object"!==vU(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===vU(t)?t:String(t)}(t))in e?HD(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var TU=_g,RU=CE("iterator"),CU=!TU((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,n=new URLSearchParams("a=1&a=2"),r="";return e.pathname="c%20d",t.forEach((function(e,n){t.delete("b"),r+=n+e})),n.delete("a",2),!e.toJSON||!n.has("a",1)||n.has("a",2)||!t.size&&!0||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[RU]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==r||"x"!==new URL("http://x",void 0).host})),wU=uR,IU=jy,AU=wg,OU=qg,xU=Tg,NU=Wg,PU=CU,DU=uR,LU=lC,kU=NR,MU=VR,UU=iR,VU=_C,FU=Gg,jU=hE,BU=cy,GU=Rv,HU=fy,WU=m_,KU=Iv,zU=IS,qU=e_,YU=rT,JU=XS,XU=JC,QU=_N,$U=CE("iterator"),ZU="URLSearchParams",eV=ZU+"Iterator",tV=UU.set,nV=UU.getterFor(ZU),rV=UU.getterFor(eV),iV=Object.getOwnPropertyDescriptor,oV=function(e){if(!NU)return AU[e];var t=iV(AU,e);return t&&t.value},sV=oV("fetch"),aV=oV("Request"),cV=oV("Headers"),dV=aV&&aV.prototype,lV=cV&&cV.prototype,hV=AU.RegExp,uV=AU.TypeError,pV=AU.decodeURIComponent,fV=AU.encodeURIComponent,mV=xU("".charAt),gV=xU([].join),_V=xU([].push),EV=xU("".replace),yV=xU([].shift),vV=xU([].splice),bV=xU("".split),SV=xU("".slice),TV=/\+/g,RV=Array(4),CV=function(e){return RV[e-1]||(RV[e-1]=hV("((?:%[\\da-f]{2}){"+e+"})","gi"))},wV=function(e){try{return pV(e)}catch(t){return e}},IV=function(e){var t=EV(e,TV," "),n=4;try{return pV(t)}catch(e){for(;n;)t=EV(t,CV(n--),wV);return t}},AV=/[!'()~]|%20/g,OV={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},xV=function(e){return OV[e]},NV=function(e){return EV(fV(e),AV,xV)},PV=MU((function(e,t){tV(this,{type:eV,iterator:YU(nV(e).entries),kind:t})}),"Iterator",(function(){var e=rV(this),t=e.kind,n=e.iterator.next(),r=n.value;return n.done||(n.value="keys"===t?r.key:"values"===t?r.value:[r.key,r.value]),n}),!0),DV=function(e){this.entries=[],this.url=null,void 0!==e&&(WU(e)?this.parseObject(e):this.parseQuery("string"==typeof e?"?"===mV(e,0)?SV(e,1):e:KU(e)))};DV.prototype={type:ZU,bindURL:function(e){this.url=e,this.update()},parseObject:function(e){var t,n,r,i,o,s,a,c=JU(e);if(c)for(n=(t=YU(e,c)).next;!(r=OU(n,t)).done;){if(o=(i=YU(HU(r.value))).next,(s=OU(o,i)).done||(a=OU(o,i)).done||!OU(o,i).done)throw uV("Expected sequence with length 2");_V(this.entries,{key:KU(s.value),value:KU(a.value)})}else for(var d in e)jU(e,d)&&_V(this.entries,{key:d,value:KU(e[d])})},parseQuery:function(e){if(e)for(var t,n,r=bV(e,"&"),i=0;i<r.length;)(t=r[i++]).length&&(n=bV(t,"="),_V(this.entries,{key:IV(yV(n)),value:IV(gV(n,"="))}))},serialize:function(){for(var e,t=this.entries,n=[],r=0;r<t.length;)e=t[r++],_V(n,NV(e.key)+"="+NV(e.value));return gV(n,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var LV=function(){VU(this,kV);var e=tV(this,new DV(arguments.length>0?arguments[0]:void 0));NU||(this.size=e.entries.length)},kV=LV.prototype;if(function(e,t,n){for(var r in t)n&&n.unsafe&&e[r]?e[r]=t[r]:wU(e,r,t[r],n)}(kV,{append:function(e,t){var n=nV(this);XU(arguments.length,2),_V(n.entries,{key:KU(e),value:KU(t)}),NU||this.length++,n.updateURL()},delete:function(e){for(var t=nV(this),n=XU(arguments.length,1),r=t.entries,i=KU(e),o=n<2?void 0:arguments[1],s=void 0===o?o:KU(o),a=0;a<r.length;){var c=r[a];if(c.key!==i||void 0!==s&&c.value!==s)a++;else if(vV(r,a,1),void 0!==s)break}NU||(this.size=r.length),t.updateURL()},get:function(e){var t=nV(this).entries;XU(arguments.length,1);for(var n=KU(e),r=0;r<t.length;r++)if(t[r].key===n)return t[r].value;return null},getAll:function(e){var t=nV(this).entries;XU(arguments.length,1);for(var n=KU(e),r=[],i=0;i<t.length;i++)t[i].key===n&&_V(r,t[i].value);return r},has:function(e){for(var t=nV(this).entries,n=XU(arguments.length,1),r=KU(e),i=n<2?void 0:arguments[1],o=void 0===i?i:KU(i),s=0;s<t.length;){var a=t[s++];if(a.key===r&&(void 0===o||a.value===o))return!0}return!1},set:function(e,t){var n=nV(this);XU(arguments.length,1);for(var r,i=n.entries,o=!1,s=KU(e),a=KU(t),c=0;c<i.length;c++)(r=i[c]).key===s&&(o?vV(i,c--,1):(o=!0,r.value=a));o||_V(i,{key:s,value:a}),NU||(this.size=i.length),n.updateURL()},sort:function(){var e=nV(this);QU(e.entries,(function(e,t){return e.key>t.key?1:-1})),e.updateURL()},forEach:function(e){for(var t,n=nV(this).entries,r=BU(e,arguments.length>1?arguments[1]:void 0),i=0;i<n.length;)r((t=n[i++]).value,t.key,this)},keys:function(){return new PV(this,"keys")},values:function(){return new PV(this,"values")},entries:function(){return new PV(this,"entries")}},{enumerable:!0}),DU(kV,$U,kV.entries,{name:"entries"}),DU(kV,"toString",(function(){return nV(this).serialize()}),{enumerable:!0}),NU&&LU(kV,"size",{get:function(){return nV(this).entries.length},configurable:!0,enumerable:!0}),kU(LV,ZU),IU({global:!0,constructor:!0,forced:!PU},{URLSearchParams:LV}),!PU&&FU(cV)){var MV=xU(lV.has),UV=xU(lV.set),VV=function(e){if(WU(e)){var t,n=e.body;if(GU(n)===ZU)return t=e.headers?new cV(e.headers):new cV,MV(t,"content-type")||UV(t,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),zU(e,{body:qU(0,KU(n)),headers:qU(0,t)})}return e};if(FU(sV)&&IU({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(e){return sV(e,arguments.length>1?VV(arguments[1]):{})}}),FU(aV)){var FV=function(e){return VU(this,dV),new aV(e,arguments.length>1?VV(arguments[1]):{})};dV.constructor=FV,FV.prototype=dV,IU({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:FV})}}var jV={URLSearchParams:LV,getState:nV},BV=gg(g_.URLSearchParams),GV={isBrowser:!0,classes:{URLSearchParams:void 0!==BV?BV:ND,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]};const HV="undefined"!=typeof window&&"undefined"!=typeof document,WV="object"==typeof navigator&&navigator||void 0,KV=HV&&(!WV||["ReactNative","NativeScript","NS"].indexOf(WV.product)<0),zV="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,qV=HV&&window.location.href||"http://localhost";function YV(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function JV(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?YV(Object(n),!0).forEach((function(t){SU(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):YV(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var XV=JV(JV({},Object.freeze({__proto__:null,hasBrowserEnv:HV,hasStandardBrowserEnv:KV,hasStandardBrowserWebWorkerEnv:zV,navigator:WV,origin:qV})),GV),QV=fy,$V=qg,ZV=hE,eF=Rg,tF=function(){var e=QV(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t},nF=RegExp.prototype,rF=function(e){var t=e.flags;return void 0!==t||"flags"in nF||ZV(e,"flags")||!eF(nF,e)?t:$V(tF,e)},iF=mO.charAt,oF=qg,sF=fy,aF=Gg,cF=kg,dF=/./.exec,lF=TypeError,hF=jy,uF=qg,pF=Vg,fF=VR,mF=eC,gF=d_,_F=$y,EF=Iv,yF=fy,vF=s_,bF=kg,SF=pv,TF=rF,RF=Y_,CF=_g,wF=zC,IF=iR,AF=CE("matchAll"),OF="RegExp String",xF=OF+" Iterator",NF=IF.set,PF=IF.getterFor(xF),DF=TypeError,LF=pF("".indexOf),kF=pF("".matchAll),MF=!!kF&&!CF((function(){kF("a",/./)})),UF=fF((function(e,t,n,r){NF(this,{type:xF,regexp:e,string:t,global:n,unicode:r,done:!1})}),OF,(function(){var e=PF(this);if(e.done)return mF(void 0,!0);var t=e.regexp,n=e.string,r=function(e,t){var n=e.exec;if(aF(n)){var r=oF(n,e,t);return null!==r&&sF(r),r}if("RegExp"===cF(e))return oF(dF,e,t);throw lF("RegExp#exec called on incompatible receiver")}(t,n);return null===r?(e.done=!0,mF(void 0,!0)):e.global?(""===EF(r[0])&&(t.lastIndex=function(e,t,n){return t+(n?iF(e,t).length:1)}(n,_F(t.lastIndex),e.unicode)),mF(r,!1)):(e.done=!0,mF(r,!1))})),VF=function(e){var t,n,r,i=yF(this),o=EF(e),s=wF(i,RegExp),a=EF(TF(i));return t=new s(s===RegExp?i.source:i,a),n=!!~LF(a,"g"),r=!!~LF(a,"u"),t.lastIndex=_F(i.lastIndex),new UF(t,o,n,r)};hF({target:"String",proto:!0,forced:MF},{matchAll:function(e){var t,n,r,i,o=gF(this);if(vF(e)){if(MF)return kF(o,e)}else{if(SF(e)&&(t=EF(gF(TF(e))),!~LF(t,"g")))throw DF("`.matchAll` does not allow non-global regexes");if(MF)return kF(o,e);if(void 0===(r=RF(e,AF))&&"RegExp"==bF(e)&&(r=VF),r)return uF(r,e,o)}return n=EF(o),i=new RegExp(e,"g"),uF(VF,i,n)}});var FF=cv("String").matchAll,jF=Rg,BF=FF,GF=String.prototype,HF=gg((function(e){var t=e.matchAll;return"string"==typeof e||e===GF||jF(GF,e)&&t===GF.matchAll?BF:t}));function WF(e){function t(e,n,r,i){let o=e[i++];if("__proto__"===o)return!0;const s=Number.isFinite(+o),a=i>=e.length;return o=!o&&bD.isArray(r)?r.length:o,a?(bD.hasOwnProp(r,o)?r[o]=[r[o],n]:r[o]=n,!s):(r[o]&&bD.isObject(r[o])||(r[o]=[]),t(e,n,r[o],i)&&bD.isArray(r[o])&&(r[o]=function(e){const t={},n=Object.keys(e);let r;const i=n.length;let o;for(r=0;r<i;r++)o=n[r],t[o]=e[o];return t}(r[o])),!s)}if(bD.isFormData(e)&&bD.isFunction(e.entries)){const n={};return bD.forEachEntry(e,((e,r)=>{t(function(e){return HF(bD).call(bD,/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),r,n,0)})),n}return null}const KF={transitional:MD,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,i=bD.isObject(e);if(i&&bD.isHTMLForm(e)&&(e=new FormData(e)),bD.isFormData(e))return r?JSON.stringify(WF(e)):e;if(bD.isArrayBuffer(e)||bD.isBuffer(e)||bD.isStream(e)||bD.isFile(e)||bD.isBlob(e)||bD.isReadableStream(e))return e;if(bD.isArrayBufferView(e))return e.buffer;if(bD.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return OD(e,new XV.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return XV.isNode&&bD.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((o=bD.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return OD(o?{"files[]":e}:e,t&&new t,this.formSerializer)}}return i||r?(t.setContentType("application/json",!1),function(e){if(bD.isString(e))try{return(0,JSON.parse)(e),Px(bD).call(bD,e)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||KF.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(bD.isResponse(e)||bD.isReadableStream(e))return e;if(e&&bD.isString(e)&&(n&&!this.responseType||r)){const n=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(e){if(n){if("SyntaxError"===e.name)throw SD.from(e,SD.ERR_BAD_RESPONSE,this,null,this.response);throw e}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:XV.classes.FormData,Blob:XV.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};bD.forEach(["delete","get","head","post","put","patch"],(e=>{KF.headers[e]={}}));var zF=KF;const qF=bD.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),YF=Symbol("internals");function JF(e){var t;return e&&Px(t=String(e)).call(t).toLowerCase()}function XF(e){return!1===e||null==e?e:bD.isArray(e)?e.map(XF):String(e)}function QF(e,t,n,r,i){return bD.isFunction(r)?r.call(this,t,n):(i&&(t=n),bD.isString(t)?bD.isString(r)?-1!==t.indexOf(r):bD.isRegExp(r)?r.test(t):void 0:void 0)}class $F{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function i(e,t,n){const i=JF(t);if(!i)throw new Error("header name must be a non-empty string");const o=bD.findKey(r,i);(!o||void 0===r[o]||!0===n||void 0===n&&!1!==r[o])&&(r[o||t]=XF(e))}const o=(e,t)=>bD.forEach(e,((e,n)=>i(e,n,t)));if(bD.isPlainObject(e)||e instanceof this.constructor)o(e,t);else if(bD.isString(e)&&(e=Px(e).call(e))&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(Px(s=e).call(s)))o((e=>{const t={};let n,r,i;return e&&e.split("\n").forEach((function(e){var o,s;i=e.indexOf(":"),n=Px(o=e.substring(0,i)).call(o).toLowerCase(),r=Px(s=e.substring(i+1)).call(s),!n||t[n]&&qF[n]||("set-cookie"===n?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)})),t})(e),t);else if(bD.isHeaders(e))for(const[t,r]of e.entries())i(r,t,n);else null!=e&&i(t,e,n);var s;return this}get(e,t){if(e=JF(e)){const n=bD.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}(e);if(bD.isFunction(t))return t.call(this,e,n);if(bD.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=JF(e)){const n=bD.findKey(this,e);return!(!n||void 0===this[n]||t&&!QF(0,this[n],n,t))}return!1}delete(e,t){const n=this;let r=!1;function i(e){if(e=JF(e)){const i=bD.findKey(n,e);!i||t&&!QF(0,n[i],i,t)||(delete n[i],r=!0)}}return bD.isArray(e)?e.forEach(i):i(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const i=t[n];e&&!QF(0,this[i],i,e,!0)||(delete this[i],r=!0)}return r}normalize(e){const t=this,n={};return bD.forEach(this,((r,i)=>{var o;const s=bD.findKey(n,i);if(s)return t[s]=XF(r),void delete t[i];const a=e?function(e){return Px(e).call(e).toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(i):Px(o=String(i)).call(o);a!==i&&delete t[i],t[a]=XF(r),n[a]=!0})),this}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return bD.forEach(this,((n,r)=>{null!=n&&!1!==n&&(t[r]=e&&bD.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((e=>{let[t,n]=e;return t+": "+n})).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.forEach((e=>t.set(e))),t}static accessor(e){const t=(this[YF]=this[YF]={accessors:{}}).accessors,n=this.prototype;function r(e){const r=JF(e);t[r]||(function(e,t){const n=bD.toCamelCase(" "+t);["get","set","has"].forEach((r=>{Object.defineProperty(e,r+n,{value:function(e,n,i){return this[r].call(this,t,e,n,i)},configurable:!0})}))}(n,e),t[r]=!0)}return bD.isArray(e)?e.forEach(r):r(e),this}}$F.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),bD.reduceDescriptors($F.prototype,((e,t)=>{let{value:n}=e,r=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(e){this[r]=e}}})),bD.freezeMethods($F);var ZF=$F;function ej(e,t){const n=this||zF,r=t||n,i=ZF.from(r.headers);let o=r.data;return bD.forEach(e,(function(e){o=e.call(n,o,i.normalize(),t?t.status:void 0)})),i.normalize(),o}function tj(e){return!(!e||!e.__CANCEL__)}function nj(e,t,n){SD.call(this,null==e?"canceled":e,SD.ERR_CANCELED,t,n),this.name="CanceledError"}function rj(e,t,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new SD("Request failed with status code "+n.status,[SD.ERR_BAD_REQUEST,SD.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}bD.inherits(nj,SD,{__CANCEL__:!0});const ij=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=0;const i=function(e,t){e=e||10;const n=new Array(e),r=new Array(e);let i,o=0,s=0;return t=void 0!==t?t:1e3,function(a){const c=Date.now(),d=r[s];i||(i=c),n[o]=a,r[o]=c;let l=s,h=0;for(;l!==o;)h+=n[l++],l%=e;if(o=(o+1)%e,o===s&&(s=(s+1)%e),c-i<t)return;const u=d&&c-d;return u?Math.round(1e3*h/u):void 0}}(50,250);return function(e,t){let n,r,i=0,o=1e3/t;const s=function(t){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();i=o,n=null,r&&(clearTimeout(r),r=null),e.apply(null,t)};return[function(){const e=Date.now(),t=e-i;for(var a=arguments.length,c=new Array(a),d=0;d<a;d++)c[d]=arguments[d];t>=o?s(c,e):(n=c,r||(r=setTimeout((()=>{r=null,s(n)}),o-t)))},()=>n&&s(n)]}((n=>{const o=n.loaded,s=n.lengthComputable?n.total:void 0,a=o-r,c=i(a);r=o,e({loaded:o,total:s,progress:s?o/s:void 0,bytes:a,rate:c||void 0,estimated:c&&s&&o<=s?(s-o)/c:void 0,event:n,lengthComputable:null!=s,[t?"download":"upload"]:!0})}),n)},oj=(e,t)=>{const n=null!=e;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},sj=e=>function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return bD.asap((()=>e(...n)))};var aj=XV.hasStandardBrowserEnv?function(){const e=XV.navigator&&/(msie|trident)/i.test(XV.navigator.userAgent),t=document.createElement("a");let n;function r(n){let r=n;return e&&(t.setAttribute("href",r),r=t.href),t.setAttribute("href",r),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:"/"===t.pathname.charAt(0)?t.pathname:"/"+t.pathname}}return n=r(window.location.href),function(e){const t=bD.isString(e)?r(e):e;return t.protocol===n.protocol&&t.host===n.host}}():function(){return!0},cj=XV.hasStandardBrowserEnv?{write(e,t,n,r,i,o){const s=[e+"="+encodeURIComponent(t)];bD.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),bD.isString(r)&&s.push("path="+r),bD.isString(i)&&s.push("domain="+i),!0===o&&s.push("secure"),document.cookie=s.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function dj(e,t){return e&&!function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}(t)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}function lj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}const hj=e=>e instanceof ZF?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lj(Object(n),!0).forEach((function(t){SU(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lj(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e):e;function uj(e,t){t=t||{};const n={};function r(e,t,n){return bD.isPlainObject(e)&&bD.isPlainObject(t)?bD.merge.call({caseless:n},e,t):bD.isPlainObject(t)?bD.merge({},t):bD.isArray(t)?t.slice():t}function i(e,t,n){return bD.isUndefined(t)?bD.isUndefined(e)?void 0:r(void 0,e,n):r(e,t,n)}function o(e,t){if(!bD.isUndefined(t))return r(void 0,t)}function s(e,t){return bD.isUndefined(t)?bD.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function a(n,i,o){return o in t?r(n,i):o in e?r(void 0,n):void 0}const c={url:o,method:o,data:o,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:a,headers:(e,t)=>i(hj(e),hj(t),!0)};return bD.forEach(Object.keys(Object.assign({},e,t)),(function(r){const o=c[r]||i,s=o(e[r],t[r],r);bD.isUndefined(s)&&o!==a||(n[r]=s)})),n}var pj=e=>{const t=uj({},e);let n,{data:r,withXSRFToken:i,xsrfHeaderName:o,xsrfCookieName:s,headers:a,auth:c}=t;if(t.headers=a=ZF.from(a),t.url=LD(dj(t.baseURL,t.url),e.params,e.paramsSerializer),c&&a.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):""))),bD.isFormData(r))if(XV.hasStandardBrowserEnv||XV.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(!1!==(n=a.getContentType())){const[e,...t]=n?n.split(";").map((e=>Px(e).call(e))).filter(Boolean):[];a.setContentType([e||"multipart/form-data",...t].join("; "))}if(XV.hasStandardBrowserEnv&&(i&&bD.isFunction(i)&&(i=i(t)),i||!1!==i&&aj(t.url))){const e=o&&s&&cj.read(s);e&&a.set(o,e)}return t},fj="undefined"!=typeof XMLHttpRequest&&function(e){return new LO((function(t,n){const r=pj(e);let i=r.data;const o=ZF.from(r.headers).normalize();let s,a,c,d,l,{responseType:h,onUploadProgress:u,onDownloadProgress:p}=r;function f(){d&&d(),l&&l(),r.cancelToken&&r.cancelToken.unsubscribe(s),r.signal&&r.signal.removeEventListener("abort",s)}let m=new XMLHttpRequest;function g(){if(!m)return;const r=ZF.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders());rj((function(e){t(e),f()}),(function(e){n(e),f()}),{data:h&&"text"!==h&&"json"!==h?m.response:m.responseText,status:m.status,statusText:m.statusText,headers:r,config:e,request:m}),m=null}m.open(r.method.toUpperCase(),r.url,!0),m.timeout=r.timeout,"onloadend"in m?m.onloadend=g:m.onreadystatechange=function(){m&&4===m.readyState&&(0!==m.status||m.responseURL&&0===m.responseURL.indexOf("file:"))&&setTimeout(g)},m.onabort=function(){m&&(n(new SD("Request aborted",SD.ECONNABORTED,e,m)),m=null)},m.onerror=function(){n(new SD("Network Error",SD.ERR_NETWORK,e,m)),m=null},m.ontimeout=function(){let t=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const i=r.transitional||MD;r.timeoutErrorMessage&&(t=r.timeoutErrorMessage),n(new SD(t,i.clarifyTimeoutError?SD.ETIMEDOUT:SD.ECONNABORTED,e,m)),m=null},void 0===i&&o.setContentType(null),"setRequestHeader"in m&&bD.forEach(o.toJSON(),(function(e,t){m.setRequestHeader(t,e)})),bD.isUndefined(r.withCredentials)||(m.withCredentials=!!r.withCredentials),h&&"json"!==h&&(m.responseType=r.responseType),p&&([c,l]=ij(p,!0),m.addEventListener("progress",c)),u&&m.upload&&([a,d]=ij(u),m.upload.addEventListener("progress",a),m.upload.addEventListener("loadend",d)),(r.cancelToken||r.signal)&&(s=t=>{m&&(n(!t||t.type?new nj(null,e,m):t),m.abort(),m=null)},r.cancelToken&&r.cancelToken.subscribe(s),r.signal&&(r.signal.aborted?s():r.signal.addEventListener("abort",s)));const _=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(r.url);_&&-1===XV.protocols.indexOf(_)?n(new SD("Unsupported protocol "+_+":",SD.ERR_BAD_REQUEST,e)):m.send(i||null)}))},mj=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let n,r=new AbortController;const i=function(e){if(!n){n=!0,s();const t=e instanceof Error?e:this.reason;r.abort(t instanceof SD?t:new nj(t instanceof Error?t.message:t))}};let o=t&&setTimeout((()=>{o=null,i(new SD("timeout ".concat(t," of ms exceeded"),SD.ETIMEDOUT))}),t);const s=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach((e=>{e.unsubscribe?e.unsubscribe(i):e.removeEventListener("abort",i)})),e=null)};e.forEach((e=>e.addEventListener("abort",i)));const{signal:a}=r;return a.unsubscribe=()=>bD.asap(s),a}},gj=DO,_j=gI;jy({target:"Promise",stat:!0,forced:!0},{withResolvers:function(){var e=_j.f(this);return{promise:e.promise,resolve:e.resolve,reject:e.reject}}});var Ej=gI,yj=Qw;jy({target:"Promise",stat:!0,forced:!0},{try:function(e){var t=Ej.f(this),n=yj(e);return(n.error?t.reject:t.resolve)(n.value),t.promise}});var vj=gg(gj),bj=TL.f("asyncIterator"),Sj=gg(bj);function Tj(e,t){this.v=e,this.k=t}function Rj(e){var t,n;function r(t,n){try{var o=e[t](n),s=o.value,a=s instanceof Tj;vj.resolve(a?s.v:s).then((function(n){if(a){var c="return"===t?"return":"next";if(!s.k||n.done)return r(c,n);n=e[c](n).value}i(o.done?"return":"normal",n)}),(function(e){r("throw",e)}))}catch(e){i("throw",e)}}function i(e,i){switch(e){case"return":t.resolve({value:i,done:!0});break;case"throw":t.reject(i);break;default:t.resolve({value:i,done:!1})}(t=t.next)?r(t.key,t.arg):n=null}this._invoke=function(e,i){return new vj((function(o,s){var a={key:e,arg:i,resolve:o,reject:s,next:null};n?n=n.next=a:(t=n=a,r(e,i))}))},"function"!=typeof e.return&&(this.return=void 0)}function Cj(e){return function(){return new Rj(e.apply(this,arguments))}}function wj(e){return new Tj(e,0)}function Ij(e){var t={},n=!1;function r(t,r){return n=!0,{done:!1,value:new Tj(r=new vj((function(n){n(e[t](r))})),1)}}return t[void 0!==EU&&yU||"@@iterator"]=function(){return this},t.next=function(e){return n?(n=!1,e):r("next",e)},"function"==typeof e.throw&&(t.throw=function(e){if(n)throw n=!1,e;return r("throw",e)}),"function"==typeof e.return&&(t.return=function(e){return n?(n=!1,e):r("return",e)}),t}Rj.prototype["function"==typeof EU&&Sj||"@@asyncIterator"]=function(){return this},Rj.prototype.next=function(e){return this._invoke("next",e)},Rj.prototype.throw=function(e){return this._invoke("throw",e)},Rj.prototype.return=function(e){return this._invoke("return",e)};var Aj=gg(bj);function Oj(e){var t,n,r,i=2;for("undefined"!=typeof Symbol&&(n=Aj,r=Symbol.iterator);i--;){if(n&&null!=(t=e[n]))return t.call(e);if(r&&null!=(t=e[r]))return new xj(t.call(e));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function xj(e){function t(e){if(Object(e)!==e)return LO.reject(new TypeError(e+" is not an object."));var t=e.done;return LO.resolve(e.value).then((function(e){return{value:e,done:t}}))}return xj=function(e){this.s=e,this.n=e.next},xj.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?LO.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?LO.reject(e):t(n.apply(this.s,arguments))}},new xj(e)}const Nj=function*(e,t){let n=e.byteLength;if(!t||n<t)return void(yield e);let r,i=0;for(;i<n;)r=i+t,yield e.slice(i,r),i=r},Pj=function(){var e=Cj((function*(e,t){var n,r=!1,i=!1;try{for(var o,s=Oj(Dj(e));r=!(o=yield wj(s.next())).done;r=!1){const e=o.value;yield*Ij(Oj(Nj(e,t)))}}catch(e){i=!0,n=e}finally{try{r&&null!=s.return&&(yield wj(s.return()))}finally{if(i)throw n}}}));return function(t,n){return e.apply(this,arguments)}}(),Dj=function(){var e=Cj((function*(e){if(e[Aj])return void(yield*Ij(Oj(e)));const t=e.getReader();try{for(;;){const{done:e,value:n}=yield wj(t.read());if(e)break;yield n}}finally{yield wj(t.cancel())}}));return function(t){return e.apply(this,arguments)}}(),Lj=(e,t,n,r)=>{const i=Pj(e,t);let o,s=0,a=e=>{o||(o=!0,r&&r(e))};return new ReadableStream({async pull(e){try{const{done:t,value:r}=await i.next();if(t)return a(),void e.close();let o=r.byteLength;if(n){let e=s+=o;n(e)}e.enqueue(new Uint8Array(r))}catch(e){throw a(e),e}},cancel:e=>(a(e),i.return())},{highWaterMark:2})};function kj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Mj(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kj(Object(n),!0).forEach((function(t){SU(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kj(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Uj="function"==typeof fetch&&"function"==typeof Request&&"function"==typeof Response,Vj=Uj&&"function"==typeof ReadableStream,Fj=Uj&&("function"==typeof TextEncoder?(jj=new TextEncoder,e=>jj.encode(e)):async e=>new Uint8Array(await new Response(e).arrayBuffer()));var jj;const Bj=function(e){try{for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return!!e(...n)}catch(e){return!1}},Gj=Vj&&Bj((()=>{let e=!1;const t=new Request(XV.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})),Hj=Vj&&Bj((()=>bD.isReadableStream(new Response("").body))),Wj={stream:Hj&&(e=>e.body)};var Kj;Uj&&(Kj=new Response,["text","arrayBuffer","blob","formData","stream"].forEach((e=>{!Wj[e]&&(Wj[e]=bD.isFunction(Kj[e])?t=>t[e]():(t,n)=>{throw new SD("Response type '".concat(e,"' is not supported"),SD.ERR_NOT_SUPPORT,n)})})));var zj=Uj&&(async e=>{let{url:t,method:n,data:r,signal:i,cancelToken:o,timeout:s,onDownloadProgress:a,onUploadProgress:c,responseType:d,headers:l,withCredentials:h="same-origin",fetchOptions:u}=pj(e);d=d?(d+"").toLowerCase():"text";let p,f=mj([i,o&&o.toAbortSignal()],s);const m=f&&f.unsubscribe&&(()=>{f.unsubscribe()});let g;try{if(c&&Gj&&"get"!==n&&"head"!==n&&0!==(g=await(async(e,t)=>{const n=bD.toFiniteNumber(e.getContentLength());return null==n?(async e=>{if(null==e)return 0;if(bD.isBlob(e))return e.size;if(bD.isSpecCompliantForm(e)){const t=new Request(XV.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return bD.isArrayBufferView(e)||bD.isArrayBuffer(e)?e.byteLength:(bD.isURLSearchParams(e)&&(e+=""),bD.isString(e)?(await Fj(e)).byteLength:void 0)})(t):n})(l,r))){let e,n=new Request(t,{method:"POST",body:r,duplex:"half"});if(bD.isFormData(r)&&(e=n.headers.get("content-type"))&&l.setContentType(e),n.body){const[e,t]=oj(g,ij(sj(c)));r=Lj(n.body,65536,e,t)}}bD.isString(h)||(h=h?"include":"omit");const i="credentials"in Request.prototype;p=new Request(t,Mj(Mj({},u),{},{signal:f,method:n.toUpperCase(),headers:l.normalize().toJSON(),body:r,duplex:"half",credentials:i?h:void 0}));let o=await fetch(p);const s=Hj&&("stream"===d||"response"===d);if(Hj&&(a||s&&m)){const e={};["status","statusText","headers"].forEach((t=>{e[t]=o[t]}));const t=bD.toFiniteNumber(o.headers.get("content-length")),[n,r]=a&&oj(t,ij(sj(a),!0))||[];o=new Response(Lj(o.body,65536,n,(()=>{r&&r(),m&&m()})),e)}d=d||"text";let _=await Wj[bD.findKey(Wj,d)||"text"](o,e);return!s&&m&&m(),await new LO(((t,n)=>{rj(t,n,{data:_,headers:ZF.from(o.headers),status:o.status,statusText:o.statusText,config:e,request:p})}))}catch(t){if(m&&m(),t&&"TypeError"===t.name&&/fetch/i.test(t.message))throw Object.assign(new SD("Network Error",SD.ERR_NETWORK,e,p),{cause:t.cause||t});throw SD.from(t,t&&t.code,e,p)}});const qj={http:null,xhr:fj,fetch:zj};bD.forEach(qj,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(e){}Object.defineProperty(e,"adapterName",{value:t})}}));const Yj=e=>"- ".concat(e),Jj=e=>bD.isFunction(e)||null===e||!1===e;var Xj=e=>{e=bD.isArray(e)?e:[e];const{length:t}=e;let n,r;const i={};for(let o=0;o<t;o++){let t;if(n=e[o],r=n,!Jj(n)&&(r=qj[(t=String(n)).toLowerCase()],void 0===r))throw new SD("Unknown adapter '".concat(t,"'"));if(r)break;i[t||"#"+o]=r}if(!r){const e=Object.entries(i).map((e=>{let[t,n]=e;return"adapter ".concat(t," ")+(!1===n?"is not supported by the environment":"is not available in the build")}));throw new SD("There is no suitable adapter to dispatch the request "+(t?e.length>1?"since :\n"+e.map(Yj).join("\n"):" "+Yj(e[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return r};function Qj(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new nj(null,e)}function $j(e){return Qj(e),e.headers=ZF.from(e.headers),e.data=ej.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Xj(e.adapter||zF.adapter)(e).then((function(t){return Qj(e),t.data=ej.call(e,e.transformResponse,t),t.headers=ZF.from(t.headers),t}),(function(t){return tj(t)||(Qj(e),t&&t.response&&(t.response.data=ej.call(e,e.transformResponse,t.response),t.response.headers=ZF.from(t.response.headers))),LO.reject(t)}))}const Zj="1.7.7",eB={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{eB[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const tB={};eB.transitional=function(e,t,n){function r(e,t){return"[Axios v1.7.7] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,i,o)=>{if(!1===e)throw new SD(r(i," has been removed"+(t?" in "+t:"")),SD.ERR_DEPRECATED);return t&&!tB[i]&&(tB[i]=!0,console.warn(r(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,o)}};var nB={assertOptions:function(e,t,n){if("object"!=typeof e)throw new SD("options must be an object",SD.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const o=r[i],s=t[o];if(s){const t=e[o],n=void 0===t||s(t,o,e);if(!0!==n)throw new SD("option "+o+" must be "+n,SD.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new SD("Unknown option "+o,SD.ERR_BAD_OPTION)}},validators:eB};const rB=nB.validators;let iB=class{constructor(e){this.defaults=e,this.interceptors={request:new kD,response:new kD}}async request(e,t){try{return await this._request(e,t)}catch(e){if(e instanceof Error){let t;Error.captureStackTrace?Error.captureStackTrace(t={}):t=new Error;const n=t.stack?t.stack.replace(/^.+\n/,""):"";try{e.stack?n&&!String(e.stack).endsWith(n.replace(/^.+\n.+\n/,""))&&(e.stack+="\n"+n):e.stack=n}catch(e){}}throw e}}_request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=uj(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:i}=t;void 0!==n&&nB.assertOptions(n,{silentJSONParsing:rB.transitional(rB.boolean),forcedJSONParsing:rB.transitional(rB.boolean),clarifyTimeoutError:rB.transitional(rB.boolean)},!1),null!=r&&(bD.isFunction(r)?t.paramsSerializer={serialize:r}:nB.assertOptions(r,{encode:rB.function,serialize:rB.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=i&&bD.merge(i.common,i[t.method]);i&&bD.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete i[e]})),t.headers=ZF.concat(o,i);const s=[];let a=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(a=a&&e.synchronous,s.unshift(e.fulfilled,e.rejected))}));const c=[];let d;this.interceptors.response.forEach((function(e){c.push(e.fulfilled,e.rejected)}));let l,h=0;if(!a){const e=[$j.bind(this),void 0];for(e.unshift.apply(e,s),e.push.apply(e,c),l=e.length,d=LO.resolve(t);h<l;)d=d.then(e[h++],e[h++]);return d}l=s.length;let u=t;for(h=0;h<l;){const t=s[h++],n=s[h++];try{u=t(u)}catch(e){n.call(this,e);break}}try{d=$j.call(this,u)}catch(e){return LO.reject(e)}for(h=0,l=c.length;h<l;)d=d.then(c[h++],c[h++]);return d}getUri(e){return LD(dj((e=uj(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}};bD.forEach(["delete","get","head","options"],(function(e){iB.prototype[e]=function(t,n){return this.request(uj(n||{},{method:e,url:t,data:(n||{}).data}))}})),bD.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,i){return this.request(uj(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}iB.prototype[e]=t(),iB.prototype[e+"Form"]=t(!0)}));var oB=iB;class sB{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new LO((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const r=new LO((e=>{n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e,r,i){n.reason||(n.reason=new nj(e,r,i),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new sB((function(t){e=t})),cancel:e}}}var aB=sB;const cB={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(cB).forEach((e=>{let[t,n]=e;cB[n]=t}));var dB=cB;const lB=function e(t){const n=new oB(t),r=NP(oB.prototype.request,n);return bD.extend(r,oB.prototype,n,{allOwnKeys:!0}),bD.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(uj(t,n))},r}(zF);lB.Axios=oB,lB.CanceledError=nj,lB.CancelToken=aB,lB.isCancel=tj,lB.VERSION=Zj,lB.toFormData=OD,lB.AxiosError=SD,lB.Cancel=lB.CanceledError,lB.all=function(e){return LO.all(e)},lB.spread=function(e){return function(t){return e.apply(null,t)}},lB.isAxiosError=function(e){return bD.isObject(e)&&!0===e.isAxiosError},lB.mergeConfig=uj,lB.AxiosHeaders=ZF,lB.formToJSON=e=>WF(bD.isHTMLForm(e)?new FormData(e):e),lB.getAdapter=Xj,lB.HttpStatusCode=dB,lB.default=lB;var hB=lB;const uB=()=>{};function pB(){const e={promise:void 0,isResolved:!1,isRejected:!1,isFinished:!1,resolve:void 0,reject:void 0,cancel:uB};return e.promise=new LO(((t,n)=>{e.resolve=n=>{e.isFinished||(e.isResolved=!0,e.isFinished=!0,t(n),e.value=n)},e.reject=t=>{e.isFinished||(e.isRejected=!0,e.isFinished=!0,n(t))}})),e}const fB=new Map,mB=new Map,gB=new Map;let _B=function(e){return e.WIN_10="Windows 10",e.WIN_81="Windows 8.1",e.WIN_8="Windows 8",e.WIN_7="Windows 7",e.WIN_VISTA="Windows Vista",e.WIN_SERVER_2003="Windows Server 2003",e.WIN_XP="Windows XP",e.WIN_2000="Windows 2000",e.ANDROID="Android",e.HARMONY_OS="HarmonyOS",e.OPEN_BSD="Open BSD",e.SUN_OS="Sun OS",e.LINUX="Linux",e.IOS="iOS",e.MAC_OS="Mac OS",e.CHROMIUM_OS="Chromium OS",e.QNX="QNX",e.UNIX="UNIX",e.BEOS="BeOS",e.OS_2="OS/2",e.SEARCH_BOT="Search Bot",e}({}),EB=function(e){return e.CHROME="Chrome",e.SAFARI="Safari",e.EDGE="Edge",e.FIREFOX="Firefox",e.OPERA="OPR",e.QQ="QQBrowser",e.WECHAT="MicroMessenger",e}({});const yB=new $N;let vB=yB.getResult(),bB=null;function SB(e){if(!bB){e&&yB.setUA(e),vB=yB.getResult();const t=function(e){if("Blink"===e.engine.name&&"WeChat"!==e.browser.name)return EB.CHROME;switch(e.browser.name){case"Chrome Headless":case"Chrome":case"Chromium":return EB.CHROME;case"Safari":case"Mobile Safari":return EB.SAFARI;case"Edge":return EB.EDGE;case"Firefox":return EB.FIREFOX;case"QQ":case"QQBrowser":return EB.QQ;case"Opera":return EB.OPERA;case"WeChat":return EB.WECHAT;default:return e.browser.name||""}}(vB),n=TB(vB),r=function(e){return"Windows"===e.os.name?e.os.version?e.os.name+" "+e.os.version:e.os.name:e.os.name||""}(vB),i=vB.os.version,o=TB(vB,!1),s=vB.device.type;if(!(t&&n&&r&&i))return{name:t,version:n,os:r,osVersion:i,browserVersion:o,deviceType:s};bB={name:t,version:n,os:r,osVersion:i,browserVersion:o,deviceType:s}}return bB}function TB(e){let t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t="Blink"===e.engine.name?e.engine.version||"":e.browser.version||"",n?t.split(".")[0]:t}function RB(){return SB().os}function CB(){const e=SB();return"".concat(e.os," ").concat(e.osVersion)}function wB(){const e=SB();return!!("WebKit"===vB.engine.name&&e.os===_B.MAC_OS&&navigator.maxTouchPoints&&navigator.maxTouchPoints>0&&e.name!==EB.SAFARI||NB()&&e.name!==EB.SAFARI)}function IB(){return SB().name===EB.CHROME}function AB(){return SB().name===EB.SAFARI}function OB(){return SB().name===EB.EDGE}function xB(){return SB().name===EB.FIREFOX}function NB(){return SB().os===_B.IOS}function PB(e){const t=SB();return!(t.name!==EB.CHROME||!t.osVersion)&&Number(t.version)>=e}function DB(e){const t=SB();return!(t.name!==EB.CHROME||!t.osVersion)&&Number(t.version)<e}function LB(e){const t=SB();return!(t.name!==EB.EDGE||!t.osVersion)&&Number(t.version)>=e}function kB(e){const t=SB();return!(t.name!==EB.SAFARI||!t.osVersion)&&Number(t.version)>=e}function MB(e,t,n){const r=SB();if(r.os!==_B.IOS||!r.osVersion)return!1;const i=r.osVersion.split(".");return n?t&&Number(i[0])===e&&Number(i[1])<t||Number(i[0])<e:t?Number(i[0])===e&&Number(i[1])<=t||Number(i[0])<e:Number(i[0])<=e}function UB(e,t,n){const r=SB();if(r.name!==EB.SAFARI||!r.osVersion||!r.browserVersion)return!1;const i=r.browserVersion.split(".");return n?t&&Number(i[0])===e&&Number(i[1])<t||Number(i[0])<e:t?Number(i[0])===e&&Number(i[1])<=t||Number(i[0])<e:Number(i[0])<=e}function VB(e){const t=SB();return!(t.name!==EB.OPERA||!t.osVersion)&&Number(t.version)>=e}function FB(){const e=SB();if(e.os!==_B.IOS||!e.osVersion)return!1;const t=e.osVersion.split(".");return Number(t[0])<14||14===Number(t[0])&&Number(t[1])<=6}function jB(){const e=SB();if(e.os!==_B.IOS||!e.osVersion)return!1;const t=e.osVersion.split(".");return 15===Number(t[0])}function BB(){const e=SB();if(e.os!==_B.IOS||!e.osVersion)return!1;const t=e.osVersion.split(".");return 16===Number(t[0])}function GB(){const e=SB();if(e.os!==_B.IOS||!e.osVersion)return!1;const t=e.osVersion.split(".");return 15===Number(t[0])&&Number(t[1])>=1}function HB(){return AB()&&navigator.maxTouchPoints>0}function WB(){return SB().name===EB.WECHAT}function KB(){return window.navigator.appVersion&&null!==window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)&&window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)[1]<=35}function zB(){const e=RB();return function(){const{deviceType:e}=SB();return"mobile"===e||"tablet"===e}()||e===_B.ANDROID||e===_B.IOS||e===_B.HARMONY_OS}function qB(){const e=SB();return e.name!==EB.EDGE&&e.name!==EB.SAFARI&&!!navigator.userAgent.toLocaleLowerCase().match(/chrome\/[\d]./i)}function YB(){return RB()===_B.ANDROID}function JB(){const e=SB();return YB()&&(e.name===EB.CHROME||e.name===EB.WECHAT||/chrome|chromium/i.test(navigator.userAgent))}function XB(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function QB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?QB(Object(n),!0).forEach((function(t){XB(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):QB(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}let ZB=function(e){return e.UNEXPECTED_ERROR="UNEXPECTED_ERROR",e.UNEXPECTED_RESPONSE="UNEXPECTED_RESPONSE",e.TIMEOUT="TIMEOUT",e.INVALID_PARAMS="INVALID_PARAMS",e.NOT_READABLE="NOT_READABLE",e.NOT_SUPPORTED="NOT_SUPPORTED",e.INVALID_OPERATION="INVALID_OPERATION",e.OPERATION_ABORTED="OPERATION_ABORTED",e.WEB_SECURITY_RESTRICT="WEB_SECURITY_RESTRICT",e.EXCHANGE_SDP_FAILED="EXCHANGE_SDP_FAILED",e.ADD_CANDIDATE_FAILED="ADD_CANDIDATE_FAILED",e.DATACHANNEL_FAILED="DATACHANNEL_FAILED",e.NETWORK_ERROR="NETWORK_ERROR",e.NETWORK_TIMEOUT="NETWORK_TIMEOUT",e.NETWORK_RESPONSE_ERROR="NETWORK_RESPONSE_ERROR",e.API_INVOKE_TIMEOUT="API_INVOKE_TIMEOUT",e.ENUMERATE_DEVICES_FAILED="ENUMERATE_DEVICES_FAILED",e.DEVICE_NOT_FOUND="DEVICE_NOT_FOUND",e.ELECTRON_IS_NULL="ELECTRON_IS_NULL",e.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR="ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR",e.CHROME_PLUGIN_NO_RESPONSE="CHROME_PLUGIN_NO_RESPONSE",e.CHROME_PLUGIN_NOT_INSTALL="CHROME_PLUGIN_NOT_INSTALL",e.MEDIA_OPTION_INVALID="MEDIA_OPTION_INVALID",e.PERMISSION_DENIED="PERMISSION_DENIED",e.CONSTRAINT_NOT_SATISFIED="CONSTRAINT_NOT_SATISFIED",e.TRACK_IS_DISABLED="TRACK_IS_DISABLED",e.GET_VIDEO_ELEMENT_VISIBLE_ERROR="GET_VIDEO_ELEMENT_VISIBLE_ERROR",e.SHARE_AUDIO_NOT_ALLOWED="SHARE_AUDIO_NOT_ALLOWED",e.LOW_STREAM_ENCODING_ERROR="LOW_STREAM_ENCODING_ERROR",e.SET_ENCODING_PARAMETER_ERROR="SET_ENCODING_PARAMETER_ERROR",e.TRACK_STATE_UNREACHABLE="TRACK_STATE_UNREACHABLE",e.INVALID_UINT_UID_FROM_STRING_UID="INVALID_UINT_UID_FROM_STRING_UID",e.CAN_NOT_GET_PROXY_SERVER="CAN_NOT_GET_PROXY_SERVER",e.CAN_NOT_GET_GATEWAY_SERVER="CAN_NOT_GET_GATEWAY_SERVER",e.VOID_GATEWAY_ADDRESS="VOID_GATEWAY_ADDRESS",e.UID_CONFLICT="UID_CONFLICT",e.MULTI_UNILBS_RESPONSE_ERROR="MULTI_UNILBS_RESPONSE_ERROR",e.UPDATE_TICKET_FAILED="UPDATE_TICKET_FAILED",e.INVALID_LOCAL_TRACK="INVALID_LOCAL_TRACK",e.INVALID_TRACK="INVALID_TRACK",e.SENDER_NOT_FOUND="SENDER_NOT_FOUND",e.CREATE_OFFER_FAILED="CREATE_OFFER_FAILED",e.SET_ANSWER_FAILED="SET_ANSWER_FAILED",e.ICE_FAILED="ICE_FAILED",e.PC_CLOSED="PC_CLOSED",e.SENDER_REPLACE_FAILED="SENDER_REPLACE_FAILED",e.GET_LOCAL_CAPABILITIES_FAILED="GET_LOCAL_CAPABILITIES_FAILED",e.GET_LOCAL_CONNECTION_PARAMS_FAILED="GET_LOCAL_CONNECTION_PARAMS_FAILED",e.SUBSCRIBE_FAILED="SUBSCRIBE_FAILED",e.UNSUBSCRIBE_FAILED="UNSUBSCRIBE_FAILED",e.GATEWAY_P2P_LOST="GATEWAY_P2P_LOST",e.NO_ICE_CANDIDATE="NO_ICE_CANDIDATE",e.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS="CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS",e.EXIST_DISABLED_VIDEO_TRACK="EXIST_DISABLED_VIDEO_TRACK",e.INVALID_REMOTE_USER="INVALID_REMOTE_USER",e.REMOTE_USER_IS_NOT_PUBLISHED="REMOTE_USER_IS_NOT_PUBLISHED",e.CUSTOM_REPORT_SEND_FAILED="CUSTOM_REPORT_SEND_FAILED",e.CUSTOM_REPORT_FREQUENCY_TOO_HIGH="CUSTOM_REPORT_FREQUENCY_TOO_HIGH",e.FETCH_AUDIO_FILE_FAILED="FETCH_AUDIO_FILE_FAILED",e.READ_LOCAL_AUDIO_FILE_ERROR="READ_LOCAL_AUDIO_FILE_ERROR",e.DECODE_AUDIO_FILE_FAILED="DECODE_AUDIO_FILE_FAILED",e.WS_ABORT="WS_ABORT",e.WS_DISCONNECT="WS_DISCONNECT",e.WS_ERR="WS_ERR",e.EXTERNAL_SIGNAL_ABORT="EXTERNAL_SIGNAL_ABORT",e.LIVE_STREAMING_TASK_CONFLICT="LIVE_STREAMING_TASK_CONFLICT",e.LIVE_STREAMING_INVALID_ARGUMENT="LIVE_STREAMING_INVALID_ARGUMENT",e.LIVE_STREAMING_INTERNAL_SERVER_ERROR="LIVE_STREAMING_INTERNAL_SERVER_ERROR",e.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED="LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED",e.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED="LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED",e.LIVE_STREAMING_CDN_ERROR="LIVE_STREAMING_CDN_ERROR",e.LIVE_STREAMING_INVALID_RAW_STREAM="LIVE_STREAMING_INVALID_RAW_STREAM",e.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT="LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT",e.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE="LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE",e.LIVE_STREAMING_WARN_FREQUENT_REQUEST="LIVE_STREAMING_WARN_FREQUENT_REQUEST",e.WEBGL_INTERNAL_ERROR="WEBGL_INTERNAL_ERROR",e.BEAUTY_PROCESSOR_INTERNAL_ERROR="BEAUTY_PROCESSOR_INTERNAL_ERROR",e.CROSS_CHANNEL_WAIT_STATUS_ERROR="CROSS_CHANNEL_WAIT_STATUS_ERROR",e.CROSS_CHANNEL_FAILED_JOIN_SRC="CROSS_CHANNEL_FAILED_JOIN_SEC",e.CROSS_CHANNEL_FAILED_JOIN_DEST="CROSS_CHANNEL_FAILED_JOIN_DEST",e.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST="CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST",e.CROSS_CHANNEL_SERVER_ERROR_RESPONSE="CROSS_CHANNEL_SERVER_ERROR_RESPONSE",e.METADATA_OUT_OF_RANGE="METADATA_OUT_OF_RANGE",e.LOCAL_AEC_ERROR="LOCAL_AEC_ERROR",e.INVALID_PLUGIN="INVALID_PLUGIN",e.DISCONNECT_P2P="DISCONNECT_P2P",e.CONVERTING_IMAGEDATA_TO_BLOB_FAILED="CONVERTING_IMAGEDATA_TO_BLOB_FAILED",e.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED="CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED",e.INIT_DATACHANNEL_TIMEOUT="INIT_DATACHANNEL_TIMEOUT",e.CREATE_DATACHANNEL_ERROR="CREATE_DATACHANNEL_ERROR",e.DATACHANNEL_CONNECTION_TIMEOUT="DATACHANNEL_CONNECTION_TIMEOUT",e.PROHIBITED_OPERATION="PROHIBITED_OPERATION",e.IMAGE_MODERATION_UPLOAD_FAILED="IMAGE_MODERATION_UPLOAD_FAILED",e.P2P_MESSAGE_FAILED="P2P_MESSAGE_FAILED",e}({}),eG=class extends Error{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0;super(t),XB(this,"code",void 0),XB(this,"message",void 0),XB(this,"data",void 0),XB(this,"name","AgoraRTCException"),this.code=e,this.message="AgoraRTCError ".concat(this.code,": ").concat(t),this.data=n}toString(){return this.data?"data: ".concat(JSON.stringify(this.data),"\n").concat(this.stack):"".concat(this.stack)}print(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"error",t=arguments.length>1?arguments[1]:void 0;return"error"===e&&(t||console).error(this.toString()),"warning"===e&&(t||console).warn(this.toString()),this}throw(e){throw this.print("error",e),this}};function tG(e,t){if("boolean"!=typeof e)throw new eG(ZB.INVALID_PARAMS,"Invalid ".concat(t,": The value is of the boolean type."))}function nG(e,t,n){if(!Fv(n).call(n,e))throw new eG(ZB.INVALID_PARAMS,"".concat(t," can only be set as ").concat(JSON.stringify(n)))}function rG(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e4;if(e<n||e>r||(!(arguments.length>4&&void 0!==arguments[4])||arguments[4])&&!function(e){return"number"==typeof e&&e%1==0}(e))throw new eG(ZB.INVALID_PARAMS,"invalid ".concat(t,": the value range is [").concat(n,", ").concat(r,"]. integer only"))}function iG(e,t){if("number"!=typeof e){if(!(e.min||e.max||e.ideal||e.exact))throw new eG(ZB.INVALID_PARAMS,"".concat(t," is not a valid ConstrainLong"));void 0!==e.min&&rG(e.min,"".concat(t,".min"),0,1/0),void 0!==e.max&&rG(e.max,"".concat(t,".max"),1,1/0),void 0!==e.exact&&rG(e.exact,"".concat(t,".exact"),1,1/0),void 0!==e.ideal&&rG(e.ideal,"".concat(t,".ideal"),1,1/0)}else rG(e,t,1,1/0)}function oG(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:255,i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(null==e)throw new eG(ZB.INVALID_PARAMS,"".concat(t||"param"," cannot be empty"));if(!cG(e,n,r,i))throw new eG(ZB.INVALID_PARAMS,"Invalid ".concat(t||"string param",": Length of the string: [").concat(n,",").concat(r,"].").concat(i?" ASCII characters only.":""))}function sG(e,t){if(!Array.isArray(e))throw new eG(ZB.INVALID_PARAMS,"".concat(t," should be an array"))}function aG(e){return null==e}function cG(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:255,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return"string"==typeof e&&e.length<=n&&e.length>=t&&(!r||function(e){if("string"!=typeof e)return!1;for(let t=0;t<e.length;t+=1){const n=e.charCodeAt(t);if(n<0||n>255)return!1}return!0}(e))}var dG=function(e){return e.COVERED="COVERED",e.POSITION="POSITION",e.SIZE="SIZE",e.STYLE="STYLE",e}(dG||{}),lG=function(e){return e.UNMOUNTED="UNMOUNTED",e.INVALID_HTML_ELEMENT="INVALID_HTML_ELEMENT",e}(lG||{});const hG=new class{constructor(){XB(this,"_clientSize",null),XB(this,"getClientWidth",(()=>document.documentElement?document.documentElement.clientWidth:document.body.clientWidth)),XB(this,"getClientHeight",(()=>document.documentElement?document.documentElement.clientHeight:document.body.clientHeight)),XB(this,"getStyle",(e=>window.getComputedStyle(e,null))),XB(this,"checkCssVisibleProperty",(e=>{var t;let n=!0;const r=this.getStyle(e),{display:i,visibility:o,opacity:s,filter:a}=r;return("none"===i||Fv(t=["hidden","collapse"]).call(t,o)||Number(s)<.1)&&(n=!1),!!n&&(a&&a.split(" ").filter((e=>{var t;const n=e.split("(")[0];return Fv(t=["brightness","blur","opacity"]).call(t,n)})).map((e=>{const[t,n]=e.split(/\(|\)/);return[t,Number(n.match(/^[0-9\.]+/))]})).forEach((e=>{const[t,r]=e;switch(t){case"brightness":(r<.1||r>3)&&(n=!1);break;case"blur":r>3&&(n=!1);break;case"opacity":r<.1&&(n=!1)}})),n)})),XB(this,"checkPropertyUpToAllParentNodes",((e,t)=>{let n=!0,r=!0;const i=e=>t(e);let o=e;for(;o&&r;)i(o)||(n=!1,r=!1),o=o.parentElement,o||(r=!1);return n})),XB(this,"checkActualCssVisibleIncludeInherit",(e=>this.checkPropertyUpToAllParentNodes(e,this.checkCssVisibleProperty))),XB(this,"getSizeAboutClient",(e=>{const{width:t,height:n,left:r,right:i,top:o,bottom:s}=e.getBoundingClientRect(),a=this.getClientWidth(),c=this.getClientHeight();return{width:t,height:n,left:r,right:i,top:o,bottom:s,clientWidth:a,clientHeight:c,clientMin:Math.min(a,c)}})),XB(this,"checkActualSize",(()=>{const{width:e,height:t,clientMin:n}=this._clientSize;return this.checkSizeIsVisible(e,t,n)})),XB(this,"elementFromPoint",((e,t)=>document.elementFromPoint?document.elementFromPoint(e,t):null)),XB(this,"checkCoverForAPoint",((e,t,n)=>{const r=this.elementFromPoint(e,t);return null!==r&&r!==n})),XB(this,"getPointPositionList",(()=>{const{width:e,height:t,left:n,top:r}=this._clientSize,i=e/6,o=t/6,s=[],a=10**6;for(let e=0;e<5;e++)for(let t=0;t<5;t++){const c=(n*a+(0===e?.1:4===e?(i*e*a-1e5)/a:i*e)*a)/a,d=(r*a+(0===t?.1:4===t?(o*t*a-1e5)/a:o*t)*a)/a;s.push({x:c,y:d})}return[...s]})),XB(this,"checkElementCover",(e=>this.getPointPositionList().map((t=>this.checkCoverForAPoint(t.x,t.y,e))).filter((e=>!!e)).length>6)),XB(this,"checkSizeIsVisible",((e,t,n)=>(e>50||n/e<=10)&&(t>50||n/t<=10))),XB(this,"checkSizeOfPartInClient",(()=>{const{left:e,right:t,top:n,bottom:r,clientHeight:i,clientWidth:o,clientMin:s}=this._clientSize;let a,c,d,l;if(e<0)a=0;else{if(!(e<o))return!1;a=e}if(t<0)return!1;if(c=t<o?t:o,n<0)d=0;else{if(!(n<i))return!1;d=n}if(r<0)return!1;l=r<i?r:i;const h=c-a,u=l-d;return this.checkSizeIsVisible(h,u,s)})),XB(this,"returnHiddenResult",(e=>(this._clientSize=null,{visible:!1,reason:e}))),XB(this,"checkOneElementVisible",(e=>{if(e instanceof HTMLElement){if(this.checkElementIsMountedOnDom(e)){if(this.checkActualCssVisibleIncludeInherit(e)){if(this._clientSize=this.getSizeAboutClient(e),this.checkElementCover(e))return this.returnHiddenResult(dG.COVERED);{const e=this.checkActualSize(),t=this.checkSizeOfPartInClient();return e&&!t?this.returnHiddenResult(dG.POSITION):e?(this._clientSize=null,{visible:!0}):this.returnHiddenResult(dG.SIZE)}}return this.returnHiddenResult(dG.STYLE)}return this.returnHiddenResult(lG.UNMOUNTED)}return this.returnHiddenResult(lG.INVALID_HTML_ELEMENT)})),XB(this,"checkElementIsMountedOnDom",(e=>this.checkPropertyUpToAllParentNodes(e,(e=>"HTML"!==e.nodeName.toUpperCase()?null!==e.parentElement:!!document.documentElement))))}};function uG(e){return(new TextEncoder).encode(e)}const pG=function(e,t){const n=new Uint8Array(e.byteLength+t.byteLength);return n.set(new Uint8Array(e),0),n.set(new Uint8Array(t),e.byteLength),n},fG=async e=>function(e){let t="";return new Uint8Array(e).forEach((e=>{t+=e.toString(16).padStart(2,"0")})),t}(await crypto.subtle.digest("SHA-256",uG(e)));class mG{constructor(){XB(this,"_events",{}),XB(this,"addListener",this.on)}getListeners(e){return this._events[e]?this._events[e].map((e=>e.listener)):[]}on(e,t){this._events[e]||(this._events[e]=[]);const n=this._events[e];-1===this._indexOfListener(n,t)&&n.push({listener:t,once:!1})}once(e,t){this._events[e]||(this._events[e]=[]);const n=this._events[e];-1===this._indexOfListener(n,t)&&n.push({listener:t,once:!0})}off(e,t){if(!this._events[e])return;const n=this._events[e],r=this._indexOfListener(n,t);-1!==r&&n.splice(r,1),0===this._events[e].length&&delete this._events[e]}removeAllListeners(e){e?delete this._events[e]:this._events={}}emit(e){this._events[e]||(this._events[e]=[]);const t=this._events[e].map((e=>e));for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(let n=0;n<t.length;n+=1){const i=t[n];i.once&&this.off(e,i.listener),i.listener.apply(this,r||[])}}safeEmit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];[...this._events[e]||[]].forEach((t=>{t.once&&this.off(e,t.listener);try{t.listener.apply(this,n)}catch(t){console.error("safeEmit event:".concat(e," error ").concat(null==t?void 0:t.toString()))}}))}_indexOfListener(e,t){let n=e.length;for(;n--;)if(e[n].listener===t)return n;return-1}}let gG=null;function _G(){if(gG)return gG;if(window.electron)return gG=window.electron;if(!window.require)return null;try{return gG=window.require("electron"),gG}catch(e){return null}}let EG=function(e){return e.CREATE_CLIENT="createClient",e.CHECK_SYSTEM_REQUIREMENTS="checkSystemRequirements",e.SET_AREA="setArea",e.PRELOAD="PRELOAD",e.CHECK_VIDEO_TRACK_IS_ACTIVE="checkVideoTrackIsActive",e.CHECK_AUDIO_TRACK_IS_ACTIVE="checkAudioTrackIsActive",e.CREATE_MIC_AUDIO_TRACK="createMicrophoneAudioTrack",e.CREATE_CUSTOM_AUDIO_TRACK="createCustomAudioTrack",e.CREATE_BUFFER_AUDIO_TRACK="createBufferSourceAudioTrack",e.CREATE_CAM_VIDEO_TRACK="createCameraVideoTrack",e.CREATE_CUSTOM_VIDEO_TRACK="createCustomVideoTrack",e.CREATE_MIC_AND_CAM_TRACKS="createMicrophoneAndCameraTracks",e.CREATE_SCREEN_VIDEO_TRACK="createScreenVideoTrack",e.SET_ENCRYPTION_CONFIG="Client.setEncryptionConfig",e.START_PROXY_SERVER="Client.startProxyServer",e.STOP_PROXY_SERVER="Client.stopProxyServer",e.SET_PROXY_SERVER="Client.setProxyServer",e.SET_TURN_SERVER="Client.setTurnServer",e.SET_CLIENT_ROLE="Client.setClientRole",e.SET_LOW_STREAM_PARAMETER="Client.setLowStreamParameter",e.ENABLE_DUAL_STREAM="Client.enableDualStream",e.DISABLE_DUAL_STREAM="Client.disableDualStream",e.JOIN="Client.join",e.LEAVE="Client.leave",e.PUBLISH="Client.publish",e.UNPUBLISH="Client.unpublish",e.SUBSCRIBE="Client.subscribe",e.MASS_SUBSCRIBE="Client.massSubscribe",e.MASS_UNSUBSCRIBE="Client.massUnsubscribe",e.UNSUBSCRIBE="Client.unsubscribe",e.RENEW_TOKEN="Client.renewToken",e.SET_REMOTE_VIDEO_STREAM_TYPE="Client.setRemoteVideoStreamType",e.SET_STREAM_FALLBACK_OPTION="Client.setStreamFallbackOption",e.ENABLE_AUDIO_VOLUME_INDICATOR="Client.enableAudioVolumeIndicator",e.SEND_CUSTOM_REPORT_MESSAGE="Client.sendCustomReportMessage",e.INSPECT_VIDEO_CONTENT="Client.inspectVideoContent",e.STOP_INSPECT_VIDEO_CONTENT="Client.stopInspectVideoContent",e.JOIN_FALLBACK_TO_PROXY="Client._joinFallbackToProxy",e.ON_LIVE_STREAM_WARNING="Client.onLiveStreamWarning",e.ON_LIVE_STREAM_ERROR="Client.onLiveStreamingError",e.START_LIVE_STREAMING="Client.startLiveStreaming",e.SET_LIVE_TRANSCODING="Client.setLiveTranscoding",e.STOP_LIVE_STREAMING="Client.stopLiveStreaming",e.START_CHANNEL_MEDIA_RELAY="Client.startChannelMediaRelay",e.UPDATE_CHANNEL_MEDIA_RELAY="Client.updateChannelMediaRelay",e.STOP_CHANNEL_MEDIA_RELAY="Client.stopChannelMediaRelay",e.REQUEST_CONFIG_DISTRIBUTE="_config-distribute-request",e.SET_CONFIG_DISTRIBUTE="_configDistribute",e.LOCAL_TRACK_SET_MUTED="LocalTrack.setMute",e.LOCAL_AUDIO_TRACK_PLAY="LocalAudioTrack.play",e.LOCAL_AUDIO_TRACK_PLAY_IN_ELEMENT="LocalAudioTrack.playInElement",e.LOCAL_AUDIO_TRACK_STOP="LocalAudioTrack.stop",e.LOCAL_AUDIO_TRACK_SET_VOLUME="LocalAudioTrack.setVolume",e.MIC_AUDIO_TRACK_SET_DEVICE="MicrophoneAudioTrack.setDevice",e.BUFFER_AUDIO_TRACK_START="BufferSourceAudioTrack.startProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_STOP="BufferSourceAudioTrack.stopProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_PAUSE="BufferSourceAudioTrack.pauseProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_RESUME="BufferSourceAudioTrack.resumeProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_SEEK="BufferSourceAudioTrack.seekAudioBuffer",e.LOCAL_VIDEO_TRACK_PLAY="LocalVideoTrack.play",e.LOCAL_VIDEO_TRACK_STOP="LocalVideoTrack.stop",e.LOCAL_VIDEO_TRACK_GET_VIDEO_VISIBLE="LocalVideoTrack.getVideoElementVisibleStatus",e.LOCAL_VIDEO_TRACK_BEAUTY="LocalVideoTrack.setBeautyEffect",e.LOCAL_VIDEO_SEND_SEI_DATA="LocalVideoTrack.sendSeiData",e.CAM_VIDEO_TRACK_SET_DEVICE="CameraVideoTrack.setDevice",e.CAM_VIDEO_TRACK_SET_ENCODER_CONFIG="CameraVideoTrack.setEncoderConfiguration",e.REMOTE_VIDEO_TRACK_PLAY="RemoteVideoTrack.play",e.REMOTE_VIDEO_TRACK_STOP="RemoteVideoTrack.stop",e.REMOTE_VIDEO_TRACK_GET_VIDEO_VISIBLE="RemoteVideoTrack.getVideoElementVisibleStatus",e.REMOTE_AUDIO_TRACK_PLAY="RemoteAudioTrack.play",e.REMOTE_AUDIO_TRACK_STOP="RemoteAudioTrack.stop",e.REMOTE_AUDIO_SET_VOLUME="RemoteAudioTrack.setVolume",e.REMOTE_AUDIO_SET_OUTPUT_DEVICE="RemoteAudioTrack.setOutputDevice",e.GET_MEDIA_STREAM_TRACK="Track.getMediaStreamTrack",e.STREAM_TYPE_CHANGE="streamTypeChange",e.CONNECTION_STATE_CHANGE="connectionStateChange",e.LOAD_CONFIG_FROM_LOCALSTORAGE="loadConfigFromLocalStorage",e.IMAGE_MODERATION_UPLOAD="imageModerationUpload",e}({}),yG=function(e){return e.TRACER="tracer",e}({});function vG(e){return rG(e.timeout,"config.timeout",0,1e5),rG(e.timeoutFactor,"config.timeoutFactor",0,100,!1),rG(e.maxRetryCount,"config.maxRetryConfig",0,1/0),rG(e.maxRetryTimeout,"config.maxRetryTimeout",0,1/0),!0}let bG=function(e){return e[e.AUDIENCE_LEVEL_LOW_LATENCY=1]="AUDIENCE_LEVEL_LOW_LATENCY",e[e.AUDIENCE_LEVEL_ULTRA_LOW_LATENCY=2]="AUDIENCE_LEVEL_ULTRA_LOW_LATENCY",e[e.AUDIENCE_LEVEL_SYNC_LATENCY=3]="AUDIENCE_LEVEL_SYNC_LATENCY",e}({}),SG=function(e){return e.LEAVE="LEAVE",e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.UID_BANNED="UID_BANNED",e.FALLBACK="FALLBACK",e.IP_BANNED="IP_BANNED",e.CHANNEL_BANNED="CHANNEL_BANNED",e.LICENSE_MISSING="LICENSE_MISSING",e.LICENSE_EXPIRED="LICENSE_EXPIRED",e.LICENSE_MINUTES_EXCEEDED="LICENSE_MINUTES_EXCEEDED",e.LICENSE_PERIOD_INVALID="LICENSE_PERIOD_INVALID",e.LICENSE_MULTIPLE_SDK_SERVICE="LICENSE_MULTIPLE_SDK_SERVICE",e.LICENSE_ILLEGAL="LICENSE_ILLEGAL",e.TOKEN_EXPIRE="TOKEN_EXPIRE",e}({});function TG(e){if(!Array.isArray(e)||e.length<1)return!1;try{e.forEach((e=>{if(!e.urls)throw Error()}))}catch(e){return!1}return!0}function RG(e){return oG(e.turnServerURL,"turnServerURL"),oG(e.username,"username"),oG(e.password,"password"),e.udpport&&rG(e.udpport,"udpport",1,99999,!0),e.forceturn&&tG(e.forceturn,"forceturn"),e.security&&tG(e.security,"security"),e.tcpport&&rG(e.tcpport,"tcpport",1,99999,!0),!0}function CG(e){return void 0!==e.level&&nG(e.level,"level",[1,2,3]),void 0!==e.delay&&rG(e.delay,"delay",0,3e3,!0),!0}let wG=function(e){return e.CONNECTION_STATE_CHANGE="connection-state-change",e.MEDIA_RECONNECT_START="media-reconnect-start",e.MEDIA_RECONNECT_END="media-reconnect-end",e.IS_USING_CLOUD_PROXY="is-using-cloud-proxy",e.USER_JOINED="user-joined",e.USER_LEAVED="user-left",e.USER_PUBLISHED="user-published",e.USER_UNPUBLISHED="user-unpublished",e.USER_INFO_UPDATED="user-info-updated",e.CLIENT_BANNED="client-banned",e.CHANNEL_MEDIA_RELAY_STATE="channel-media-relay-state",e.CHANNEL_MEDIA_RELAY_EVENT="channel-media-relay-event",e.VOLUME_INDICATOR="volume-indicator",e.CRYPT_ERROR="crypt-error",e.ON_TOKEN_PRIVILEGE_WILL_EXPIRE="token-privilege-will-expire",e.ON_TOKEN_PRIVILEGE_DID_EXPIRE="token-privilege-did-expire",e.NETWORK_QUALITY="network-quality",e.STREAM_TYPE_CHANGED="stream-type-changed",e.STREAM_FALLBACK="stream-fallback",e.RECEIVE_METADATA="receive-metadata",e.STREAM_MESSAGE="stream-message",e.LIVE_STREAMING_ERROR="live-streaming-error",e.LIVE_STREAMING_WARNING="live-streaming-warning",e.EXCEPTION="exception",e.ERROR="error",e.P2P_LOST="p2p_lost",e.JOIN_FALLBACK_TO_PROXY="join-fallback-to-proxy",e.CHANNEL_FALLBACK_TO_WEBSOCKET="channel-fallback-to-websocket",e.MEDIA_CONNECTION_TYPE_CHANGE="media-connection-type-change",e.PUBLISHED_USER_LIST="published-user-list",e.CONTENT_INSPECT_CONNECTION_STATE_CHANGE="content-inspect-connection-state-change",e.CONTENT_INSPECT_ERROR="content-inspect-error",e.CONTENT_INSPECT_RESULT="content-inspect-result",e.IMAGE_MODERATION_CONNECTION_STATE_CHANGE="image-moderation-connection-state-change",e}({}),IG=function(e){return e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.MULTI_IP="MULTI_IP",e.TIMEOUT="TIMEOUT",e.OFFLINE="OFFLINE",e.LEAVE="LEAVE",e.P2P_FAILED="P2P_FAILED",e.FALLBACK="FALLBACK",e}({}),AG=function(e){return e.ONLINE="ONLINE",e.OFFLINE="OFFLINE",e}({}),OG=function(e){return e.NETWORK_STATE_CHANGE="NETWORK_STATE_CHANGE",e.ONLINE="ONLINE",e.OFFLINE="OFFLINE",e}({});function xG(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return 0===e.getListeners(t).length?LO.reject(new eG(ZB.UNEXPECTED_ERROR,"can not emit promise")):new LO(((n,i)=>{e.emit(t,...r,n,i)}))}function NG(e,t){if(0===e.getListeners(t).length)return LO.resolve();for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return xG(e,t,...r)}function PG(e,t){if(0===e.getListeners(t).length)return null;for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return DG(e,t,...r)}function DG(e,t){let n=null,r=null;for(var i=arguments.length,o=new Array(i>2?i-2:0),s=2;s<i;s++)o[s-2]=arguments[s];if(e.emit(t,...o,(e=>{n=e}),(e=>{r=e})),null!==r)throw r;if(null===n)throw new eG(ZB.UNEXPECTED_ERROR,"handler is not sync");return n}const LG=new class extends mG{set networkState(e){this.emit(OG.NETWORK_STATE_CHANGE,e,this._networkState),e===AG.ONLINE?this.emit(OG.ONLINE):e===AG.OFFLINE&&(this.onlineWaiter=new LO((e=>{this.once(OG.ONLINE,(()=>{this.onlineWaiter=void 0,e(AG.ONLINE)}))})),this.emit(OG.OFFLINE)),this._networkState=e}get networkState(){return this._networkState}get isOnline(){return this._networkState===AG.ONLINE}constructor(){super(),XB(this,"_moduleName","network-indicator"),XB(this,"_networkState",AG.ONLINE),XB(this,"onlineWaiter",void 0),window.addEventListener("online",(()=>{this.networkState=AG.ONLINE})),window.addEventListener("offline",(()=>{this.networkState=AG.OFFLINE}))}};function kG(e,t){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}function MG(e){const t=[];return e.forEach((e=>{-1===t.indexOf(e)&&t.push(e)})),t}function UG(e){void 0!==LO?LO.resolve().then(e):setTimeout(e,0)}function VG(e){return JSON.parse(JSON.stringify(e))}function FG(e){try{return VG(e)}catch(t){return e}}const jG={};function BG(e,t){jG[t]||(jG[t]=!0,e())}function GG(e){const t=window.atob(e),n=new Uint8Array(new ArrayBuffer(t.length));for(let e=0;e<t.length;e+=1)n[e]=t.charCodeAt(e);return n}function HG(e){let t="";for(let n=0;n<e.length;n+=1)t+=String.fromCharCode(e[n]);return window.btoa(t)}function WG(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,n=(new TextEncoder).encode(e);if(n.length>t)n=n.slice(0,t);else if(n.length<t){const e=new Uint8Array(t);e.set(n),n=e}return n}function KG(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=nb(t).call(t,((e,t)=>e+t.length),0),i=new Uint8Array(new ArrayBuffer(r));let o=0;return t.forEach((e=>{i.set(e,o),o+=e.length})),i}function zG(e){return window.TextEncoder?(new TextEncoder).encode(e).length:e.length}function qG(e){let t=0;return(/DingTalk/i.test(navigator.userAgent)||/AliApp/i.test(navigator.userAgent))&&e.realFormData&&(e=e.realFormData),e.forEach((e=>{t+="string"==typeof e?zG(e):e.size})),t+138}function YG(e){const t=new eG(ZB.TIMEOUT,"timeout");return new LO(((n,r)=>{window.setTimeout((()=>r(t)),e)}))}function JG(e){return new LO((t=>{window.setTimeout(t,e)}))}function XG(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7,t=arguments.length>1?arguments[1]:void 0;const n=Math.random().toString(16).substr(2,e).toLowerCase();return n.length===e?"".concat(t).concat(n):"".concat(t).concat(n)+XG(e-n.length,"")}function QG(){return XG(32,"").toUpperCase()}const $G=()=>{},ZG=new class{constructor(){XB(this,"fnMap",new Map)}throttleByKey(e,t,n,r){for(var i=arguments.length,o=new Array(i>4?i-4:0),s=4;s<i;s++)o[s-4]=arguments[s];if(this.fnMap.has(t)){const i=this.fnMap.get(t);if(i.threshold!==n){i.fn(...i.args),clearTimeout(i.timer);const s=window.setTimeout((()=>{const e=this.fnMap.get(t);e&&e.fn(...e.args),this.fnMap.delete(t)}),n);this.fnMap.set(t,{fn:e,threshold:n,timer:s,args:o,skipFn:r})}else i.skipFn&&i.skipFn(...i.args),this.fnMap.set(t,$B($B({},i),{},{fn:e,args:o,skipFn:r}))}else{const i=window.setTimeout((()=>{const e=this.fnMap.get(t);e&&e.fn(...e.args),this.fnMap.delete(t)}),n);this.fnMap.set(t,{fn:e,threshold:n,timer:i,args:o,skipFn:r})}}},eH=ZG.throttleByKey.bind(ZG);function tH(e){return"object"==typeof e&&null!==e&&!(e instanceof RegExp)}function nH(e,t){if(!tH(e)||!tH(t))return t;if(Array.isArray(e)&&!Array.isArray(t)||!Array.isArray(e)&&Array.isArray(t))return t;if(Array.isArray(t)&&Array.isArray(e)){const n=[...e];for(let r=0;r<t.length;r++)n[r]=nH(e[r],t[r]);return n}{const n=$B({},e);for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(Object.prototype.hasOwnProperty.call(e,r)?n[r]=nH(e[r],t[r]):n[r]=t[r]);return n}}function rH(e,t){let n=[0];if(t&&(n=new Array(t).fill(0)),0===e)return n;let r=0;for(;e>0&&(n[r]=255&e,e>>=8,r++,!t||r!==t););return n}function iH(e){return"number"==typeof e?e:e.exact||e.ideal||e.max||e.min||0}function oH(e){const t="0123456789abcdef";function n(e){let n,r="";for(n=0;n<=3;n++)r+=t.charAt(e>>8*n+4&15)+t.charAt(e>>8*n&15);return r}function r(e,t){const n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function i(e,t,n,i,o,s){return r(function(e,t){return e<<t|e>>>32-t}(r(r(t,e),r(i,s)),o),n)}function o(e,t,n,r,o,s,a){return i(t&n|~t&r,e,t,o,s,a)}function s(e,t,n,r,o,s,a){return i(t&r|n&~r,e,t,o,s,a)}function a(e,t,n,r,o,s,a){return i(t^n^r,e,t,o,s,a)}function c(e,t,n,r,o,s,a){return i(n^(t|~r),e,t,o,s,a)}const d=function(e){let t;const n=1+(e.length+8>>6),r=new Array(16*n);for(t=0;t<16*n;t++)r[t]=0;for(t=0;t<e.length;t++)r[t>>2]|=e.charCodeAt(t)<<t%4*8;return r[t>>2]|=128<<t%4*8,r[16*n-2]=8*e.length,r}(e);let l,h,u,p,f,m=1732584193,g=-271733879,_=-1732584194,E=271733878;for(l=0;l<d.length;l+=16)h=m,u=g,p=_,f=E,m=o(m,g,_,E,d[l+0],7,-680876936),E=o(E,m,g,_,d[l+1],12,-389564586),_=o(_,E,m,g,d[l+2],17,606105819),g=o(g,_,E,m,d[l+3],22,-1044525330),m=o(m,g,_,E,d[l+4],7,-176418897),E=o(E,m,g,_,d[l+5],12,1200080426),_=o(_,E,m,g,d[l+6],17,-1473231341),g=o(g,_,E,m,d[l+7],22,-45705983),m=o(m,g,_,E,d[l+8],7,1770035416),E=o(E,m,g,_,d[l+9],12,-1958414417),_=o(_,E,m,g,d[l+10],17,-42063),g=o(g,_,E,m,d[l+11],22,-1990404162),m=o(m,g,_,E,d[l+12],7,1804603682),E=o(E,m,g,_,d[l+13],12,-40341101),_=o(_,E,m,g,d[l+14],17,-1502002290),g=o(g,_,E,m,d[l+15],22,1236535329),m=s(m,g,_,E,d[l+1],5,-165796510),E=s(E,m,g,_,d[l+6],9,-1069501632),_=s(_,E,m,g,d[l+11],14,643717713),g=s(g,_,E,m,d[l+0],20,-373897302),m=s(m,g,_,E,d[l+5],5,-701558691),E=s(E,m,g,_,d[l+10],9,38016083),_=s(_,E,m,g,d[l+15],14,-660478335),g=s(g,_,E,m,d[l+4],20,-405537848),m=s(m,g,_,E,d[l+9],5,568446438),E=s(E,m,g,_,d[l+14],9,-1019803690),_=s(_,E,m,g,d[l+3],14,-187363961),g=s(g,_,E,m,d[l+8],20,1163531501),m=s(m,g,_,E,d[l+13],5,-1444681467),E=s(E,m,g,_,d[l+2],9,-51403784),_=s(_,E,m,g,d[l+7],14,1735328473),g=s(g,_,E,m,d[l+12],20,-1926607734),m=a(m,g,_,E,d[l+5],4,-378558),E=a(E,m,g,_,d[l+8],11,-2022574463),_=a(_,E,m,g,d[l+11],16,1839030562),g=a(g,_,E,m,d[l+14],23,-35309556),m=a(m,g,_,E,d[l+1],4,-1530992060),E=a(E,m,g,_,d[l+4],11,1272893353),_=a(_,E,m,g,d[l+7],16,-155497632),g=a(g,_,E,m,d[l+10],23,-1094730640),m=a(m,g,_,E,d[l+13],4,681279174),E=a(E,m,g,_,d[l+0],11,-358537222),_=a(_,E,m,g,d[l+3],16,-722521979),g=a(g,_,E,m,d[l+6],23,76029189),m=a(m,g,_,E,d[l+9],4,-640364487),E=a(E,m,g,_,d[l+12],11,-421815835),_=a(_,E,m,g,d[l+15],16,530742520),g=a(g,_,E,m,d[l+2],23,-995338651),m=c(m,g,_,E,d[l+0],6,-198630844),E=c(E,m,g,_,d[l+7],10,1126891415),_=c(_,E,m,g,d[l+14],15,-1416354905),g=c(g,_,E,m,d[l+5],21,-57434055),m=c(m,g,_,E,d[l+12],6,1700485571),E=c(E,m,g,_,d[l+3],10,-1894986606),_=c(_,E,m,g,d[l+10],15,-1051523),g=c(g,_,E,m,d[l+1],21,-2054922799),m=c(m,g,_,E,d[l+8],6,1873313359),E=c(E,m,g,_,d[l+15],10,-30611744),_=c(_,E,m,g,d[l+6],15,-1560198380),g=c(g,_,E,m,d[l+13],21,1309151649),m=c(m,g,_,E,d[l+4],6,-145523070),E=c(E,m,g,_,d[l+11],10,-1120210379),_=c(_,E,m,g,d[l+2],15,718787259),g=c(g,_,E,m,d[l+9],21,-343485551),m=r(m,h),g=r(g,u),_=r(_,p),E=r(E,f);return n(m)+n(g)+n(_)+n(E)}let sH=1,aH=console,cH=class{static setLogger(e){aH=e}constructor(e){XB(this,"lockingPromise",LO.resolve()),XB(this,"locks",0),XB(this,"name",""),XB(this,"lockId",void 0),this.lockId=sH++,e&&(this.name=e),aH.debug("[lock-".concat(this.name,"-").concat(this.lockId,"] is created."))}get isLocked(){return this.locks>0}lock(e){let t;this.locks+=1,aH.debug("[lock-".concat(this.name,"-").concat(this.lockId,"] is locked, current queue ").concat(this.locks,". ").concat("string"==typeof e?e:""));const n=new LO((n=>{t=()=>{this.locks-=1,aH.debug("[lock-".concat(this.name,"-").concat(this.lockId,"] is not locked, current queue ").concat(this.locks,". ").concat("string"==typeof e?e:"")),n()}})),r=this.lockingPromise.then((()=>t));return this.lockingPromise=this.lockingPromise.then((()=>n)),r}};function dH(e,t){return function(n,r,i){const o=i.value;if("function"!=typeof o)throw new Error("Cannot use mutex on object property.");return i.value=async function(){const n=this[t];if(!n)throw new Error("mutex property key ".concat(t," doesn't exist on ").concat(e));const i=await n.lock("From ".concat(e,".").concat(r));try{for(var s=arguments.length,a=new Array(s),c=0;c<s;c++)a[c]=arguments[c];return await o.apply(this,a)}finally{i()}},i}}const lH={timeout:500,timeoutFactor:1.5,maxRetryCount:1/0,maxRetryTimeout:1e4};function hH(e,t){const n=Math.floor(t.timeout*Math.pow(t.timeoutFactor,e));return Math.min(t.maxRetryTimeout,n)}function uH(e,t,n,r){const i=Object.assign({},lH,r);let o=i.timeout;const s=async()=>{await function(e){return new LO((t=>{window.setTimeout(t,e)}))}(o),o*=i.timeoutFactor,o=Math.min(i.maxRetryTimeout,o)};let a=!1;const c=new LO((async(r,o)=>{t=t||(()=>!1),n=n||(()=>!0);for(let c=0;c<i.maxRetryCount;c+=1){if(a)return o(new eG(ZB.OPERATION_ABORTED));try{const n=await e();if(!t(n,c))return r(n);if(c+1===i.maxRetryCount)return r(n);await s()}catch(e){if(!n(e,c))return o(e);if(c+1===i.maxRetryCount)return o(e);await s()}}}));return c.cancel=()=>a=!0,c}class pH{constructor(e){XB(this,"input",[]),XB(this,"size",void 0),this.size=e}add(e){this.input.push(e),this.input.length>this.size&&this.input.splice(0,1)}mean(){var e;return 0===this.input.length?0:nb(e=this.input).call(e,((e,t)=>e+t))/this.input.length}}let fH,mH=0,gH=0;function _H(e,t,n,r){return new LO(((i,o)=>{t.responseType=t.responseType||"json",t.data&&!n?(t.data=JSON.stringify(t.data),mH+=zG(t.data)):n&&(t.data.size?mH+=t.data.size:t.data instanceof FormData?mH+=qG(t.data):mH+=zG(JSON.stringify(t.data))),t.headers=t.headers||{},t.headers["Content-Type"]=t.headers["Content-Type"]||"application/json",t.method="POST",t.url=e,hB.request(t).then((e=>{"string"==typeof e.data?gH+=zG(e.data):e.data instanceof ArrayBuffer||e.data instanceof Uint8Array?gH+=e.data.byteLength:gH+=zG(JSON.stringify(e.data)),r&&i({data:e.data,headers:e.headers}),i(e.data)})).catch((e=>{hB.isCancel(e)?o(new eG(ZB.OPERATION_ABORTED,"cancel token canceled")):"ECONNABORTED"===e.code?o(new eG(ZB.NETWORK_TIMEOUT,e.message)):e.response?o(new eG(ZB.NETWORK_RESPONSE_ERROR,e.response.status)):o(new eG(ZB.NETWORK_ERROR,e.message))}))}))}async function EH(e,t){const n=new Blob([t.data],{type:"buffer"});return await _H(e,$B($B({},t),{},{data:n,headers:{"Content-Type":"application/octet-stream"}}),!0)}const yH=()=>void 0!==window.isSecureContext,vH=function(e){if(e.match(/[0-9]+\.[0-9]+\.[0-9]+$/))return e;const t=e.match(/([0-9]+\.[0-9]+\.[0-9]+)\-([0-9]+)/);if(t&&t[1]&&t[2]){const e=t[1],n=t[2];return"".concat(e,".").concat(n)}return"4.0.0.999"}("4.22.1"),bH=function(){try{return!0===JSON.parse("true")}catch(e){return!0}}();let SH=function(e){return e.Default="default",e.Auto="auto",e.Relay="relay",e.SdRtn="sd-rtn",e}({});const TH=function(){const e="us".concat("erna","me"),t="pa".concat("sswo","rd"),n=["t","s","t"];n.splice(1,0,"e");const r=n.join(""),i=[];for(let e=0;e<6;e++)i.push("1");const o=i.join(""),s={};return s[e]=r,s[t]=o,Object.assign(s,{turnServerURL:"",tcpport:3433,udpport:3478,forceturn:!1})}();window.DEFAULT_TURN_CONFIG=TH;const RH={MIN_FRAME_RATE:1,MAX_FRAME_RATE:30,MAX_THRESHOLD_FRAMERATE:30,BITRATE_MIN_THRESHOLD:100,BITRATE_MAX_THRESHOLD:100,MAX_SCALE:5,BWE_SCALE_UP_THRESHOLD:.6,BWE_SCALE_DOWN_THRESHOLD:.6,PERF_SCALE_UP_THRESHOLD:.7,PERF_SCALE_DOWN_THRESHOLD:.6,MOTION_RESOLUTION_FACTOR:.8,MOTION_BITRATE_FACTOR:.6,DETAIL_FRAMERATE_FACTOR:.8,DETAIL_BITRATE_FACTOR:.6,BALANCE_RESOLUTION_FACTOR:.9,BALANCE_FRAMERATE_FACTOR:.9,BALANCE_BITRATE_FACTOR:.6,OVERUSE_TIMES_THRESHOLD:10,UNDERUSE_TIMES_THRESHOLD:40},CH="v4.22.1-0-g1c8e27e9(9/19/2024, 2:23:30 PM)",wH=$B($B({PROCESS_ID:"",ENCRYPT_AES:!0,AREAS:["CHINA","GLOBAL"],WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io","webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io","webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-web-2.ap.sd-rtn.com","cds-ap-web-3.agora.io","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-web-2.ap.sd-rtn.com","sua-ap-web-3.agora.io","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-ap-web-1.agora.io","uap-web-2.ap.sd-rtn.com","uap-ap-web-3.agora.io","uap-web-4.ap.sd-rtn.com"],LOG_UPLOAD_SERVER:"logservice.agora.io",EVENT_REPORT_DOMAIN:"statscollector-1.agora.io",EVENT_REPORT_BACKUP_DOMAIN:"web-2.statscollector.sd-rtn.com",ENABLE_EVENT_REPORT:!0,GATEWAY_ADDRESS:[],GATEWAY_WSS_ADDRESS:"",LIVE_STREAMING_ADDRESS:"",HTTP_CONNECT_TIMEOUT:5e3,SIGNAL_REQUEST_TIMEOUT:1e4,REPORT_STATS:!0,UPLOAD_LOG:!1,NOT_REPORT_EVENT:[],PING_PONG_TIME_OUT:10,WEBSOCKET_TIMEOUT_MIN:1e4,EVENT_REPORT_SEND_INTERVAL:3e3,CONFIG_DISTRIBUTE_INTERVAL:3e5,ENABLE_CONFIG_DISTRIBUTE:!0,CANDIDATE_TIMEOUT:5e3,SHOW_REPORT_INVOKER_LOG:!1,JOIN_EXTEND:"",PUB_EXTEND:"",SUB_EXTEND:"",FORCE_TURN:!1,TURN_ENABLE_TCP:!0,TURN_ENABLE_UDP:!0,MAX_UPLOAD_CACHE:50,UPLOAD_CACHE_INTERVAL:2e3,AJAX_REQUEST_CONCURRENT:3,REPORT_APP_SCENARIO:void 0,GATEWAY_DOMAINS:["edge.agora.io","edge.sd-rtn.com"],CONNECT_GATEWAY_WITHOUT_DOMAIN:!1,WORKER_DOMAIN:"edge.agora.io",TURN_DOMAIN:"edge.agora.io",EVENT_REPORT_RETRY:!0,CHROME_FORCE_PLAN_B:!1,AUDIO_SOURCE_VOLUME_UPDATE_INTERVAL:400,AUDIO_SOURCE_AVG_VOLUME_DURATION:3e3,AUDIO_VOLUME_INDICATION_INTERVAL:2e3,VOLUME_VOICE_WEIGHT:10,GET_VOLUME_OF_MUTED_AUDIO_TRACK:!1,STATS_UPDATE_INTERVAL:250,NORMAL_EVENT_QUEUE_CAPACITY:100,CUSTOM_REPORT:!0,CUSTOM_REPORT_LIMIT:20,PROXY_SERVER_TYPE2:"webnginx-proxy.agora.io",PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.sd-rtn.com","webrtc-cloud-proxy.agora.io"],CUSTOM_PUB_ANSWER_MODIFIER:null,CUSTOM_SUB_ANSWER_MODIFIER:null,CUSTOM_PUB_OFFER_MODIFIER:null,CUSTOM_SUB_OFFER_MODIFIER:null,DSCP_TYPE:"high",REMOVE_NEW_CODECS:!0,FRAGEMENT_LENGTH:3,WEBSOCKET_COMPRESS:!1,SIMULCAST:!1,PRELOAD_MEDIA_COUNT:0,CHECK_VIDEO_VISIBLE_INTERVAL:3e4,CHECK_LOCAL_STATS_INTERVAL:250,PROFILE_SWITCH_INTERVAL:2e3,UNSUPPORTED_VIDEO_CODEC:[],ENUMERATE_DEVICES_INTERVAL:!1,ENUMERATE_DEVICES_INTERVAL_TIME:1e4,USE_NEW_TOKEN:!1,CLOSE_AFB_FOR_LOCAL_AP:!0,JOIN_MAX_CONCURRENCY:6,JOIN_WITH_FALLBACK_SIGNAL_PROXY:!0,JOIN_WITH_FALLBACK_MEDIA_PROXY:!0,JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE:!1,JOIN_GATEWAY_TRY_443PORT_DURATION:2e3,JOIN_GATEWAY_USE_443PORT_ONLY:!1,JOIN_GATEWAY_USE_DUAL_DOMAIN:!0,JOIN_GATEWAY_FALLBACK_PORT:443,USE_TURN_SERVER_OF_GATEWAY:!1,H264_PROFILE_LEVEL_ID:"",USE_NEW_LOG:!1,LOG_VERSION:3,MEDIA_DEVICE_CONSTRAINTS:null,ENCRYPT_PROXY_USERNAME_AND_PSW:!0,SDP_LOGGING:!1,CSP_DETECTED_HOSTNAME_LIST:["agora.io","sd-rtn.com"],REMOTE_AUDIO_TRACK_USES_WEB_AUDIO:!1,LOCAL_AUDIO_TRACK_USES_WEB_AUDIO:!1,BITRATE_ADAPTER_TYPE:"STANDARD_BITRATE",AI_DENOISER_PARAMETERS:{excludedLinks:[]},ADJUST_3A_FROM_PLUGINS:!0,RAISE_H264_BASELINE_PRIORITY:!0,FILTER_SEND_H264_BASELINE:!1,X_GOOGLE_START_BITRATE:void 0,NEW_REPORT_SERVER:!1,NEW_REPORT_SERVER_DOMAINS:["data-reporting.agora.io","data-reporting.agora.io"],VIDEO_INSPECT_WORKER_MESSAGE_LENGTH_LIMIT:3e5,VIDEO_INSPECT_INTERVAL_MINIMUM:1e3,VIDEO_INSPECT_QUALITY_RATIO:.9,VIDEO_INSPECT_WORKER_MANAGER_HOST:"edge.agora.io",VIDEO_INSPECT_WORKER_MANAGER_PORT:"",VIDEO_INSPECT_WORKER_PORT:"",SHOW_VIDEO_INSPECT_WORKER_MESSAGE:!1,STATS_COLLECTOR_PORT:443,FORCE_TURN_TCP:!1,WEBAUDIO_INIT_OPTIONS:void 0,FILTER_VIDEO_FEC:!0,FILTER_AUDIO_FEC:!1,CHROME_DUAL_STREAM_USE_ENCODING:!0,DISABLE_DUAL_STREAM_USE_ENCODING:!1,EXTENSION_USAGE_UPLOAD_INTERVAL:1e4,ICE_RESTART:!0,ICE_RESTART_INTERVAL:1e4,NEW_ICE_RESTART:!1,TRANSMITTER_INITIAL_RTT:30,TRANSMITTER_INITIAL_RTO:30,TRANSMITTER_MAX_BATCH_ACK_COUNT:2,TRANSMITTER_MAX_RTO:500,DATACHANNEL_COMPRESS:!1,FINGERPRINT:null,DC_JOIN_WITH_FAILBACK:5e3,ENABLE_VIDEO_FRAME_CALLBACK:!0,VIDEO_FREEZE_DURATION:500,SPATIALIZER_PARAMETERS:{},UPLOAD_LOG_INTERVAL:3e3,UPLOAD_LOG_REQUEST_RETRY_INTERVAL:2e3,UPLOAD_LOG_REQUEST_MAX_RETRY_INTERVAL:2e4,UPLOAD_LOG_TRY_INTERVAL_WHILE_OFF:5e3,UPLOAD_LOG_RETRY_INTERVAL_V1:1e4,UPLOAD_LOG_TWICE_RETRY_INTERVAL_V1:200,UPLOAD_LOG_LENGTH_EACH_TIME:10,APP_TYPE:0,DISABLE_WEBAUDIO:!1,CHANNEL_MEDIA_RELAY_SERVERS:void 0,KEEP_LAST_FRAME:!0,FORWARD_P2P_CREATION:!0,SYNC_GROUP:!0,BLOCK_LOCAL_CLIENT:!1,AP_AREA:!0,ENABLE_ENCODED_TRANSFORM:!1,ENABLE_VIDEO_SEI:!1,IMAGE_MODERATION_WORKER_HOST:"edge.agora.io",IMAGE_MODERATION_WORKER_MESSAGE_LENGTH_LIMIT:3e5,IMAGE_MODERATION_INTERVAL_MINIMUM:1e3,SHOW_IMAGE_MODERATION_WORKER_MESSAGE:!1,IMAGE_MODERATION_QUALITY_RATIO:.9,IMAGE_MODERATION_UPLOAD_REPORT_INTERVAL:5e3,SHOW_GLOBAL_CLIENT_LIST:!1,DATASTREAM_MAX_RETRANSMITS:10,TCP_CANDIDATE_ONLY:!1,EXTERNAL_SIGNAL_REQUEST_TIMEOUT:3e3,SHOW_P2P_LOG:!1,MAX_P2P_TIMEOUT:3e4,P2P_TOKEN_INTERVAL:1e3,SHOW_DATASTREAM2_LOG:!1,RESTRICTION_SET_PLAYBACK_DEVICE:!0,USE_PURE_ENCRYPTION_MASTER_KEY:!1,ACCOUNT_REGISTER_RETRY_TIMEOUT:1,ACCOUNT_REGISTER_RETRY_RATIO:2,ACCOUNT_REGISTER_RETRY_TIMEOUT_MAX:6e4,ACCOUNT_REGISTER_RETRY_COUNT_MAX:1e5,AUDIO_CONTEXT:null,WEBCS_BACKUP_CONNECT_TIMEOUT:6e3,PLAYER_STATE_DEFER:2e3,SIGNAL_REQUEST_WATCH_INTERVAL:1e3,FILEPATH_LENMAX:255,DUALSTREAM_OPERATION_CHECK:!0,MEDIA_ELEMENT_EXISTS_DEPTH:3,SHIM_CANDIDATE:!1,LEAVE_MSG_TIMEOUT:2e3,STATS_FILTER:{transportId:!0,googTrackId:!0},FILTER_VIDEO_CODEC:[],USE_NEW_NETWORK_CONFIG:!1,AUTO_RESET_AUDIO_ROUTE:!1,PLUGIN_INFO:[],OVERUSE_DETECTOR_PARAMS:RH,ENABLE_AG_ADAPTATION:!0,FORCE_AG_HIGH_FRAMERATE:!1,FORCE_SUPPORT_AG_ADAPTATION:!1,CUSTOM_ADAPTATION_DEFAULT_MODE:"",ENCODER_CONFIG_LIMIT:{},CAMERA_CAPTURE_CONFIG:void 0,HIDE_NO_POSTER:!1,AP_CACHE_NUM:10,AP_UPDATE_INTERVAL:12e4,AP_CACHE_LIFETIME:12e4,MAX_PRELOAD_ASYNC_LENGTH:3,ENABLE_PRELOAD:!0,DISABLE_SCREEN_SHARE_REMB:!1},{ENABLE_PUBLISHED_USER_LIST:!0,MAX_SUBSCRIPTION:50,SUBSCRIBE_AUDIO_FILTER_TOPN:void 0,ENABLE_PUBLISH_AUDIO_FILTER:void 0,ENABLE_USER_LICENSE_CHECK:!0,USE_PUB_RTX:!0,USE_SUB_RTX:!0,DISABLE_FEC:void 0,ENABLE_NTP_REPORT:!1,ENABLE_INSTANT_VIDEO:!1,ENABLE_DATASTREAM_2:!1,ENABLE_USER_AUTO_REBALANCE_CHECK:!0,USE_XR:!0,ENABLE_LOSSBASED_BWE:!0,ENABLE_AUT_CC:!1,ENABLE_CC_FALLBACK:void 0,ENABLE_PREALLOC_PC:!1,SUBSCRIBE_TWCC:!0,PUBLISH_TWCC:!1,ENABLE_SVC:!1,ENABLE_SVC_DEFAULT_CODECS:["H264","VP8","VP9","AV1"],SVC:[],ENABLE_FULL_LINK_AV_SYNC:!1,SVC_MODE:null,PRE_SUB_NUM:2,ENABLE_PRE_SUB:!1,ENABLE_AUT_FEEDBACK:!1}),{},{USE_CANDIDATE_FROM_AP_DETAIL:!1,AP_REQUEST_DETAIL:void 0});function IH(e,t,n){var r,i,o;Fv(r=Object.keys(wH)).call(r,e)&&(!n&&Fv(i=Object.keys(OH)).call(i,e)||(wH[e]=t,"ENABLE_VIDEO_SEI"===e&&!0===t&&(wH.ENABLE_ENCODED_TRANSFORM=!0),"USE_NEW_NETWORK_CONFIG"===e&&t&&(o=!!t,wH.USE_NEW_NETWORK_CONFIG=o,o&&(wH.WEBCS_DOMAIN=["webrtc2-2.ap.sd-rtn.com"],wH.WEBCS_DOMAIN_BACKUP_LIST=["webrtc2-4.ap.sd-rtn.com"],wH.CDS_AP=["cds-web-2.ap.sd-rtn.com","cds-web-4.ap.sd-rtn.com"],wH.ACCOUNT_REGISTER=["sua-web-2.ap.sd-rtn.com","sua-web-4.ap.sd-rtn.com"],wH.EVENT_REPORT_DOMAIN="web-2.statscollector.sd-rtn.com",wH.EVENT_REPORT_BACKUP_DOMAIN="statscollector-1.agora.io",wH.GATEWAY_DOMAINS=["edge.sd-rtn.com"])),"ENABLE_PRE_SUB"===e&&t&&(wH.ENABLE_INSTANT_VIDEO=!0,wH.ENABLE_PREALLOC_PC=!0),"ENABLE_SVC"===e&&t&&(wH.ENABLE_AUT_CC=!0)))}function AH(e){return wH[e]}bH||(wH.WEBCS_DOMAIN=["ap-web-1-oversea.agora.io","ap-web-1-north-america.agora.io"],wH.WEBCS_DOMAIN_BACKUP_LIST=["ap-web-2-oversea.agora.io","ap-web-2-north-america.agora.io"],wH.PROXY_CS=["proxy-ap-web-oversea.agora.io","proxy-ap-web-america.agora.io"],wH.CDS_AP=["cds-ap-web-oversea.agora.io","cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],wH.ACCOUNT_REGISTER=["sua-ap-web-oversea.agora.io","sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],wH.UAP_AP=["uap-ap-web-oversea.agora.io","uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],wH.LOG_UPLOAD_SERVER="logservice-oversea.agora.io",wH.EVENT_REPORT_DOMAIN="statscollector-1-oversea.agora.io",wH.EVENT_REPORT_BACKUP_DOMAIN="statscollector-2-oversea.agora.io",wH.PROXY_SERVER_TYPE3="webrtc-cloud-proxy.agora.io",wH.AREAS=["NORTH_AMERICA","OVERSEA"]);const OH={};var xH=function(e){return e.SET_SESSION_ID="SET_SESSION_ID",e.SET_P2P_ID="SET_P2P_id",e.SET_DC_ID="SET_DC_id",e.SET_UID="SET_UID",e.SET_INT_UID="SET_INT_UID",e.SET_PUB_ID="SET_PUB_ID",e.SET_CLOUD_PROXY_SERVER_MODE="SET_CLOUD_PROXY_SERVER_MODE",e.KEY_METRIC_CLIENT_CREATED="KEY_METRIC_CLIENT_CREATED",e.KEY_METRIC_JOIN_START="KEY_METRIC_JOIN_START",e.AVOID_JOIN_START="AVOID_JOIN_START",e.KEY_METRIC_JOIN_END="KEY_METRIC_JOIN_END",e.KEY_METRIC_REQUEST_AP_START="KEY_METRIC_REQUEST_AP_START",e.KEY_METRIC_REQUEST_AP_END="KEY_METRIC_REQUEST_AP_END",e.KEY_METRIC_JOIN_GATEWAY_START="KEY_METRIC_JOIN_GATEWAY_START",e.KEY_METRIC_JOIN_GATEWAY_END="KEY_METRIC_JOIN_GATEWAY_END",e.KEY_METRIC_PEER_CONNECTION_START="KEY_METRIC_PEER_CONNECTION_START",e.KEY_METRIC_PEER_CONNECTION_END="KEY_METRIC_PEER_CONNECTION_END",e.KEY_METRIC_DESCRIPTION_START="KEY_METRIC_DESCRIPTION_START",e.KEY_METRIC_ICE_CONNECTION_END="KEY_METRIC_ICE_CONNECTION_END",e.KEY_METRIC_SIGNAL_CHANNEL_OPEN="KEY_METRIC_SIGNAL_CHANNEL_OPEN",e.KEY_METRIC_PUBLISH="KEY_METRIC_PUBLISH",e.KEY_METRIC_SUBSCRIBE="KEY_METRIC_SUBSCRIBE",e.RECORD_JOIN_CHANNEL_SERVICE="RECORD_JOIN_CHANNEL_SERVICE",e.RESET_JOIN_CHANNEL_SERVICE_RECORDS="RESET_JOIN_CHANNEL_SERVICE_RECORDS",e.RESET_KEY_METRICS="RESET_KEY_METRICS",e.SET_USE_P2P="SET_USE_P2P",e.SET_TRANSPORT_TYPE="SET_TRANSPORT_TYPE",e}(xH||{});class NH{constructor(e,t,n,r){XB(this,"state",void 0),this.state={codec:e,audioCodec:t,mode:n,clientId:r,sessionId:null,p2pId:0,dcId:0,pubId:0,subId:0,avoidJoinStart:0,keyMetrics:{publish:[],subscribe:[]},joinChannelServiceRecords:[],cloudProxyServerMode:"disabled",useP2P:!1,p2pTransport:SH.Default}}dispatch(e){this.state=function(e,t){switch(t.type){case xH.SET_SESSION_ID:return $B($B({},e),{},{sessionId:t.sessionId});case xH.SET_P2P_ID:return $B($B({},e),{},{p2pId:t.p2pId});case xH.SET_UID:return $B($B({},e),{},{uid:t.uid});case xH.SET_INT_UID:return $B($B({},e),{},{intUid:t.intUid});case xH.SET_PUB_ID:return $B($B({},e),{},{pubId:t.pubId});case xH.KEY_METRIC_CLIENT_CREATED:return $B($B({},e),{},{keyMetrics:$B($B({},e.keyMetrics),{},{clientCreated:t.metric})});case xH.KEY_METRIC_JOIN_START:return $B($B({},e),{},{keyMetrics:$B($B({},e.keyMetrics),{},{joinStart:t.metric})});case xH.AVOID_JOIN_START:return $B($B({},e),{},{avoidJoinStart:t.avoidJoinStart});case xH.KEY_METRIC_JOIN_END:return $B($B({},e),{},{keyMetrics:$B($B({},e.keyMetrics),{},{joinEnd:t.metric})});case xH.KEY_METRIC_REQUEST_AP_START:return $B($B({},e),{},{keyMetrics:$B($B({},e.keyMetrics),{},{requestAPStart:t.metric})});case xH.KEY_METRIC_REQUEST_AP_END:return $B($B({},e),{},{keyMetrics:$B($B({},e.keyMetrics),{},{requestAPEnd:t.metric})});case xH.KEY_METRIC_JOIN_GATEWAY_START:return $B($B({},e),{},{keyMetrics:$B($B({},e.keyMetrics),{},{joinGatewayStart:t.metric})});case xH.KEY_METRIC_JOIN_GATEWAY_END:return $B($B({},e),{},{keyMetrics:$B($B({},e.keyMetrics),{},{joinGatewayEnd:t.metric})});case xH.KEY_METRIC_PEER_CONNECTION_START:return $B($B({},e),{},{keyMetrics:$B($B({},e.keyMetrics),{},{peerConnectionStart:t.metric})});case xH.KEY_METRIC_PEER_CONNECTION_END:return $B($B({},e),{},{keyMetrics:$B($B({},e.keyMetrics),{},{peerConnectionEnd:t.metric})});case xH.KEY_METRIC_DESCRIPTION_START:return $B($B({},e),{},{keyMetrics:$B($B({},e.keyMetrics),{},{descriptionStart:t.metric})});case xH.KEY_METRIC_SIGNAL_CHANNEL_OPEN:return $B($B({},e),{},{keyMetrics:$B($B({},e.keyMetrics),{},{signalChannelOpen:t.metric})});case xH.KEY_METRIC_ICE_CONNECTION_END:return $B($B({},e),{},{keyMetrics:$B($B({},e.keyMetrics),{},{iceConnectionEnd:t.metric})});case xH.KEY_METRIC_PUBLISH:{const n=e.keyMetrics.publish,r=n.findIndex((e=>e.trackId===t.metric.trackId));return-1!==r?(n[r]=$B($B({},n[r]),t.metric),$B($B({},e),{},{keyMetrics:$B($B({},e.keyMetrics),{},{publish:[...n]})})):$B($B({},e),{},{keyMetrics:$B($B({},e.keyMetrics),{},{publish:[...e.keyMetrics.publish,t.metric]})})}case xH.KEY_METRIC_SUBSCRIBE:{const n=e.keyMetrics.subscribe,r=n.findIndex((e=>e.userId===t.metric.userId&&e.type===t.metric.type));return-1!==r?(n[r]=$B($B({},n[r]),t.metric),$B($B({},e),{},{keyMetrics:$B($B({},e.keyMetrics),{},{subscribe:[...n]})})):$B($B({},e),{},{keyMetrics:$B($B({},e.keyMetrics),{},{subscribe:[...e.keyMetrics.subscribe,t.metric]})})}case xH.SET_CLOUD_PROXY_SERVER_MODE:return e.cloudProxyServerMode=t.mode,e;case xH.RECORD_JOIN_CHANNEL_SERVICE:return"number"!=typeof t.index?e.joinChannelServiceRecords=[...e.joinChannelServiceRecords,t.record]:(e.joinChannelServiceRecords[t.index]=$B($B({},e.joinChannelServiceRecords[t.index]),t.record),e.joinChannelServiceRecords=[...e.joinChannelServiceRecords]),e;case xH.RESET_JOIN_CHANNEL_SERVICE_RECORDS:return e.joinChannelServiceRecords=[],e;case xH.RESET_KEY_METRICS:return e.keyMetrics={publish:[],subscribe:[]},e;case xH.SET_USE_P2P:return $B($B({},e),{},{useP2P:t.val});case xH.SET_TRANSPORT_TYPE:return $B($B({},e),{},{p2pTransport:t.val});default:return e}}(this.state,e)}set sessionId(e){this.dispatch({type:xH.SET_SESSION_ID,sessionId:e})}get sessionId(){return this.state.sessionId}set codec(e){this.state.codec=e}get codec(){return this.state.codec}get mode(){return this.state.mode}get audioCodec(){return this.state.audioCodec}get clientId(){return this.state.clientId}set p2pId(e){this.dispatch({type:xH.SET_P2P_ID,p2pId:e})}get p2pId(){return this.state.p2pId}set dcId(e){this.dispatch({type:xH.SET_DC_ID,dcId:e})}get dcId(){return this.state.dcId}set uid(e){this.dispatch({type:xH.SET_UID,uid:e})}get uid(){return this.state.uid}set intUid(e){this.dispatch({type:xH.SET_INT_UID,intUid:e})}get intUid(){return this.state.intUid}set pubId(e){this.dispatch({type:xH.SET_PUB_ID,pubId:e})}get pubId(){return this.state.pubId}set cloudProxyServerMode(e){this.dispatch({type:xH.SET_CLOUD_PROXY_SERVER_MODE,mode:e})}get cloudProxyServerMode(){return this.state.cloudProxyServerMode}set useP2P(e){this.dispatch({type:xH.SET_USE_P2P,val:e})}get useP2P(){return this.state.useP2P}set p2pTransport(e){this.dispatch({type:xH.SET_TRANSPORT_TYPE,val:e})}get p2pTransport(){return this.state.p2pTransport}clientCreated(){this.dispatch({type:xH.KEY_METRIC_CLIENT_CREATED,metric:Date.now()})}joinStart(){this.dispatch({type:xH.KEY_METRIC_JOIN_START,metric:Date.now()})}joinEnd(){this.dispatch({type:xH.KEY_METRIC_JOIN_END,metric:Date.now()})}requestAPStart(){this.dispatch({type:xH.KEY_METRIC_REQUEST_AP_START,metric:Date.now()})}requestAPEnd(){this.dispatch({type:xH.KEY_METRIC_REQUEST_AP_END,metric:Date.now()})}joinGatewayStart(){this.dispatch({type:xH.KEY_METRIC_JOIN_GATEWAY_START,metric:Date.now()})}joinGatewayEnd(){this.dispatch({type:xH.KEY_METRIC_JOIN_GATEWAY_END,metric:Date.now()})}peerConnectionStart(){this.dispatch({type:xH.KEY_METRIC_PEER_CONNECTION_START,metric:Date.now()})}peerConnectionEnd(){this.dispatch({type:xH.KEY_METRIC_PEER_CONNECTION_END,metric:Date.now()})}descriptionStart(){this.dispatch({type:xH.KEY_METRIC_DESCRIPTION_START,metric:Date.now()})}signalChannelOpen(){this.dispatch({type:xH.KEY_METRIC_SIGNAL_CHANNEL_OPEN,metric:Date.now()})}iceConnectionEnd(){this.dispatch({type:xH.KEY_METRIC_ICE_CONNECTION_END,metric:Date.now()})}publish(e,t,n,r){this.dispatch({type:xH.KEY_METRIC_PUBLISH,metric:$B($B({trackId:e,type:t},n&&{publishStart:n}),r&&{publishEnd:r})})}subscribe(e,t,n,r,i,o,s){this.dispatch({type:xH.KEY_METRIC_SUBSCRIBE,metric:$B($B($B($B($B({userId:e,type:t},n&&{subscribeStart:n}),r&&{subscribeEnd:r}),i&&{firstFrame:i}),o&&{streamAdded:o}),s&&{firstDecoded:s})})}massSubscribe(e,t,n,r){e.forEach((e=>{this.dispatch({type:xH.KEY_METRIC_SUBSCRIBE,metric:$B($B($B({userId:e.userId,type:e.type},t&&{subscribeStart:t}),n&&{subscribeEnd:n}),r&&{firstFrame:r})})}))}get keyMetrics(){return this.state.keyMetrics}recordJoinChannelService(e,t){"gateway"===e.service&&Array.isArray(e.urls)&&(e.urls=e.urls.map((e=>e.replace(/(\d+)-\d+-\d+-(\d+)/,"$1-*-*-$2"))));try{return"number"!=typeof t?(this.dispatch({type:xH.RECORD_JOIN_CHANNEL_SERVICE,record:$B($B({},e),{},{sessionId:this.sessionId,cloudProxyMode:this.cloudProxyServerMode,uid:this.uid})}),this.state.joinChannelServiceRecords.length-1):(t<0||t>=this.state.joinChannelServiceRecords.length||this.dispatch({type:xH.RECORD_JOIN_CHANNEL_SERVICE,record:e,index:t}),t)}catch(e){return 0}}resetJoinChannelServiceRecords(){this.dispatch({type:xH.RESET_JOIN_CHANNEL_SERVICE_RECORDS})}resetKeyMetrics(){this.dispatch({type:xH.RESET_KEY_METRICS})}get joinChannelServiceRecords(){try{return this.state.joinChannelServiceRecords}catch(e){return[]}}get avoidJoinStart(){return this.state.avoidJoinStart}set avoidJoinStart(e){this.dispatch({type:xH.AVOID_JOIN_START,avoidJoinStart:e})}}let PH=function(e){return e.h264="h264",e.h265="h265",e.vp8="vp8",e.vp9="vp9",e.av1="av1",e}({});!function(e){e.opus="opus",e.pcma="pcma",e.pcmu="pcmu",e.g722="g722"}({});const DH=10;let LH=0;function kH(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function MH(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function UH(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?MH(Object(n),!0).forEach((function(t){kH(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):MH(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const VH=new class extends mG{constructor(){super(...arguments),kH(this,"currentUploadLogID",0)}reportLogUploadError(e){const{errorRange:t}=e;t[t.length-1]&&t[t.length-1]>this.currentUploadLogID&&(this.currentUploadLogID=t[t.length-1],this.emit("REPORT_LOG_UPLOAD",e))}};class FH{constructor(e){kH(this,"logger",void 0),kH(this,"prefixLists",[]),this.logger=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger.debug(...this.prefixLists,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger.info(...this.prefixLists,...t)}warning(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger.warning(...this.prefixLists,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger.error(...this.prefixLists,...t)}prefix(e){return this.prefixLists.push(e),this}popPrefix(){return this.prefixLists.pop(),this}}function jH(){const e=new Date;return e.toTimeString().split(" ")[0]+":"+e.getMilliseconds()}function BH(){const e=new Date,t=/((\d+:){2}\d+)/.exec((new Date).toUTCString());return t?(null==t?void 0:t[0])+":"+e.getUTCMilliseconds():e.toTimeString().split(" ")[0]+":"+e.getMilliseconds()}const GH={DEBUG:0,INFO:1,WARNING:2,ERROR:3,NONE:4},HH=Date.now(),WH=e=>{for(const t in GH)if(Object.prototype.hasOwnProperty.call(GH,t)&&GH[t]===e)return t;return"DEFAULT"},KH=new class{constructor(){kH(this,"proxyServerURL",void 0),kH(this,"logLevel",GH.DEBUG),kH(this,"uploadState","collecting"),kH(this,"uploadLogWaitingList",[]),kH(this,"uploadLogUploadingList",[]),kH(this,"uploadErrorCount",0),kH(this,"currentLogID",0),kH(this,"url",void 0),kH(this,"extLog",((e,t)=>{this.appendLogToWaitingList(e,...t)}))}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=[GH.DEBUG].concat(t);this.log.apply(this,r)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=[GH.INFO].concat(t);this.log.apply(this,r)}warning(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=[GH.WARNING].concat(t);this.log.apply(this,r)}warn(){this.warning(...arguments)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=[GH.ERROR].concat(t);this.log.apply(this,r)}upload(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=[GH.DEBUG].concat(t);this.uploadLog.apply(this,r)}setLogLevel(e){e=Math.min(Math.max(0,e),4),this.logLevel=e}enableLogUpload(){IH("UPLOAD_LOG",!0)}disableLogUpload(){IH("UPLOAD_LOG",!1),this.uploadLogUploadingList=[],this.uploadLogWaitingList=[]}setProxyServer(e){this.proxyServerURL=e}prefix(e){return new FH(this).prefix(e)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(Date.now()-HH<100)return void setTimeout((()=>{this.log(...t)}),Date.now()-HH);const r=Math.max(0,Math.min(4,t[0]));if(t[0]=jH()+" Agora-SDK [".concat(WH(r),"]:"),this.appendLogToWaitingList(r,...t),r<this.logLevel)return;const i=jH()+" %cAgora-SDK [".concat(WH(r),"]:");let o=[];if(!AH("USE_NEW_LOG"))switch(r){case GH.DEBUG:o=[i,"color: #64B5F6;"].concat(t.slice(1)),console.log.apply(console,o);break;case GH.INFO:o=[i,"color: #1E88E5; font-weight: bold;"].concat(t.slice(1)),console.log.apply(console,o);break;case GH.WARNING:o=[i,"color: #FB8C00; font-weight: bold;"].concat(t.slice(1)),console.warn.apply(console,o);break;case GH.ERROR:o=[i,"color: #B00020; font-weight: bold;"].concat(t.slice(1)),console.error.apply(console,o)}}uploadLog(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(Date.now()-HH<100)return void setTimeout((()=>{this.uploadLog(...t)}),Date.now()-HH);const r=Math.max(0,Math.min(4,t[0]));t[0]=jH()+" Agora-SDK [".concat(WH(r),"]:"),this.appendLogToWaitingList(r,...t)}appendLogToWaitingList(e){if(!AH("UPLOAD_LOG"))return;for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Array.isArray(n[0])?n[0][0]=BH()+" Agora-SDK [".concat(WH(e),"]:"):n[0]=BH()+" Agora-SDK [".concat(WH(e),"]:");let i="";n.forEach((e=>{"object"==typeof e&&(e=JSON.stringify(e)),i+="".concat(e," ")})),this.uploadLogWaitingList.push({payload_str:i,log_level:e,log_item_id:this.currentLogID++}),"uploading"===this.uploadState&&0===this.uploadLogUploadingList.length&&this.uploadLogInterval()}startUpload(){this.uploadState="uploading",0===this.uploadLogUploadingList.length&&this.uploadLogInterval()}async uploadLogs(){const e=this.uploadLogUploadingList,t={sdk_version:vH,process_id:AH("PROCESS_ID"),payload:JSON.stringify(e)};return uH((async()=>{const e=await hB.post(this.url||(this.proxyServerURL?"https://".concat(this.proxyServerURL,"/ls/?h=").concat(AH("LOG_UPLOAD_SERVER"),"&p=443&d=upload/v1"):"https://".concat(AH("LOG_UPLOAD_SERVER"),"/upload/v1")),t,{responseType:"text"});if("OK"!==e.data){const t=new Error("unexpected upload log response");throw t.response=e,t}}),(()=>(this.uploadLogUploadingList=[],!1)),(t=>{const n={status:-1,message:t.message,errorRange:e.map((e=>e.log_item_id))};return t.response?(n.status=t.response.status,n.data=t.response.data,n.headers=t.response.headers):t.request&&(n.status=t.request.status),VH.reportLogUploadError(n),!0}),{timeout:AH("UPLOAD_LOG_REQUEST_RETRY_INTERVAL"),maxRetryTimeout:AH("UPLOAD_LOG_REQUEST_MAX_RETRY_INTERVAL")})}uploadLogInterval(){0===this.uploadLogUploadingList.length&&0===this.uploadLogWaitingList.length||(0===this.uploadLogUploadingList.length&&(this.uploadLogUploadingList=this.uploadLogWaitingList.splice(0,AH("UPLOAD_LOG_LENGTH_EACH_TIME"))),this.uploadLogs().then((()=>{this.uploadErrorCount=0,this.uploadLogWaitingList.length>0&&window.setTimeout((()=>this.uploadLogInterval()),AH("UPLOAD_LOG_INTERVAL"))})).catch((e=>{this.uploadErrorCount+=1,this.uploadErrorCount<2?window.setTimeout((()=>this.uploadLogInterval()),AH("UPLOAD_LOG_TWICE_RETRY_INTERVAL_V1")):window.setTimeout((()=>this.uploadLogInterval()),AH("UPLOAD_LOG_RETRY_INTERVAL_V1"))})))}};var zH;function qH(e){return oG(e.reportId,"params.reportId",0,100,!1),oG(e.category,"params.category",0,100,!1),oG(e.event,"params.event",0,100,!1),oG(e.label,"params.label",0,100,!1),rG(e.value,"params.value",Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,!1),!0}(zH={}).FREE="free",zH.UPLOADING="uploading",function(e){e[e.MISC=0]="MISC",e[e.INTERNAL_EVENT=1]="INTERNAL_EVENT",e[e.PUBLIC_EVENT=2]="PUBLIC_EVENT",e[e.WEB_EVENT=3]="WEB_EVENT",e[e.INTERNAL_API=4]="INTERNAL_API",e[e.WEB_API=5]="WEB_API",e[e.PUBLIC_API=6]="PUBLIC_API"}({});const YH={sid:"",lts:0,success:null,cname:null,uid:null,peer:null,cid:null,elapse:null,extend:null,vid:0};let JH=function(e){return e.PUBLISH="publish",e.SUBSCRIBE="subscribe",e.WS_COMPRESSOR_INIT="ws_compressor_init",e.SESSION_INIT="session_init",e.JOIN_CHOOSE_SERVER="join_choose_server",e.REQ_USER_ACCOUNT="req_user_account",e.JOIN_GATEWAY="join_gateway",e.REJOIN_GATEWAY="rejoin_gateway",e.STREAM_SWITCH="stream_switch",e.REQUEST_PROXY_WORKER_MANAGER="request_proxy_worker_manager",e.REQUEST_PROXY_APPCENTER="request_proxy_appcenter",e.FIRST_VIDEO_RECEIVED="first_video_received",e.FIRST_AUDIO_RECEIVED="first_audio_received",e.FIRST_VIDEO_DECODE="first_video_decode",e.FIRST_AUDIO_DECODE="first_audio_decode",e.ON_ADD_AUDIO_STREAM="on_add_audio_stream",e.ON_ADD_VIDEO_STREAM="on_add_video_stream",e.ON_UPDATE_STREAM="on_update_stream",e.ON_REMOVE_STREAM="on_remove_stream",e.USER_ANALYTICS="req_user_analytics",e.PC_STATS="pc_stats",e.UPDATE_REMOTE_RTPCAPABILITIES="update_remote_rtpCapabilities",e}({}),XH=function(e){return e.SESSION="io.agora.pb.Wrtc.Session",e.JOIN_CHOOSE_SERVER="io.agora.pb.Wrtc.JoinChooseServer",e.REQ_USER_ACCOUNT="io.agora.pb.Wrtc.ReqUserAccount",e.JOIN_GATEWAY="io.agora.pb.Wrtc.JoinGateway",e.RE_JOIN_GATEWAY="io.agora.pb.Wrtc.ReJoinGateway",e.PUBLISH="io.agora.pb.Wrtc.Publish",e.SUBSCRIBE="io.agora.pb.Wrtc.Subscribe",e.WS_COMPRESSOR_INIT="io.agora.pb.Wrtc.WsCompressorInit",e.STREAM_SWITCH="io.agora.pb.Wrtc.StreamSwitch",e.AUDIO_SENDING_STOPPED="io.agora.pb.Wrtc.AudioSendingStopped",e.VIDEO_SENDING_STOPPED="io.agora.pb.Wrtc.VideoSendingStopped",e.REQUEST_PROXY_APPCENTER="io.agora.pb.Wrtc.RequestProxyAppCenter",e.REQUEST_PROXY_WORKER_MANAGER="io.agora.pb.Wrtc.RequestProxyWorkerManager",e.API_INVOKE="io.agora.pb.Wrtc.ApiInvoke",e.FIRST_VIDEO_RECEIVED="io.agora.pb.Wrtc.FirstVideoReceived",e.FIRST_AUDIO_RECEIVED="io.agora.pb.Wrtc.FirstAudioReceived",e.FIRST_VIDEO_DECODE="io.agora.pb.Wrtc.FirstVideoDecode",e.FIRST_AUDIO_DECODE="io.agora.pb.Wrtc.FirstAudioDecode",e.ON_ADD_AUDIO_STREAM="io.agora.pb.Wrtc.OnAddAudioStream",e.ON_ADD_VIDEO_STREAM="io.agora.pb.Wrtc.OnAddVideoStream",e.ON_UPDATE_STREAM="io.agora.pb.Wrtc.OnUpdateStream",e.ON_REMOVE_STREAM="io.agora.pb.Wrtc.OnRemoveStream",e.JOIN_CHANNEL_TIMEOUT="io.agora.pb.Wrtc.JoinChannelTimeout",e.PEER_PUBLISH_STATUS="io.agora.pb.Wrtc.PeerPublishStatus",e.WORKER_EVENT="io.agora.pb.Wrtc.WorkerEvent",e.AP_WORKER_EVENT="io.agora.pb.Wrtc.APWorkerEvent",e.JOIN_WEB_PROXY_AP="io.agora.pb.Wrtc.JoinWebProxyAP",e.WEBSOCKET_QUIT="io.agora.pb.Wrtc.WebSocketQuit",e.USER_ANALYTICS="io.agora.pb.Wrtc.UserAnalytics",e.AUTOPLAY_FAILED="io.agora.pb.Wrtc.AutoplayFailed",e.PC_STATS="io.agora.pb.Wrtc.PCStats",e.UPDATE_REMOTE_RTPCAPABILITIES="io.agora.pb.Wrtc.UpdateRemoteRTPCapabilities",e}({});!function(e){e[e.WORKER_EVENT=156]="WORKER_EVENT",e[e.AP_WORKER_EVENT=160]="AP_WORKER_EVENT"}({});let QH=function(e){return e[e.SESSION=26]="SESSION",e[e.JOIN_CHOOSE_SERVER=27]="JOIN_CHOOSE_SERVER",e[e.REQ_USER_ACCOUNT=196]="REQ_USER_ACCOUNT",e[e.JOIN_GATEWAY=28]="JOIN_GATEWAY",e[e.PUBLISH=30]="PUBLISH",e[e.SUBSCRIBE=29]="SUBSCRIBE",e[e.WS_COMPRESSOR_INIT=9430]="WS_COMPRESSOR_INIT",e[e.STREAM_SWITCH=32]="STREAM_SWITCH",e[e.AUDIO_SENDING_STOPPED=33]="AUDIO_SENDING_STOPPED",e[e.VIDEO_SENDING_STOPPED=34]="VIDEO_SENDING_STOPPED",e[e.REQUEST_PROXY_APPCENTER=35]="REQUEST_PROXY_APPCENTER",e[e.REQUEST_PROXY_WORKER_MANAGER=36]="REQUEST_PROXY_WORKER_MANAGER",e[e.API_INVOKE=41]="API_INVOKE",e[e.FIRST_VIDEO_RECEIVED=348]="FIRST_VIDEO_RECEIVED",e[e.FIRST_AUDIO_RECEIVED=349]="FIRST_AUDIO_RECEIVED",e[e.FIRST_VIDEO_DECODE=350]="FIRST_VIDEO_DECODE",e[e.FIRST_AUDIO_DECODE=351]="FIRST_AUDIO_DECODE",e[e.ON_ADD_AUDIO_STREAM=352]="ON_ADD_AUDIO_STREAM",e[e.ON_ADD_VIDEO_STREAM=353]="ON_ADD_VIDEO_STREAM",e[e.ON_UPDATE_STREAM=356]="ON_UPDATE_STREAM",e[e.ON_REMOVE_STREAM=355]="ON_REMOVE_STREAM",e[e.JOIN_CHANNEL_TIMEOUT=407]="JOIN_CHANNEL_TIMEOUT",e[e.PEER_PUBLISH_STATUS=408]="PEER_PUBLISH_STATUS",e[e.WORKER_EVENT=156]="WORKER_EVENT",e[e.AP_WORKER_EVENT=160]="AP_WORKER_EVENT",e[e.JOIN_WEB_PROXY_AP=700]="JOIN_WEB_PROXY_AP",e[e.WEBSOCKET_QUIT=671]="WEBSOCKET_QUIT",e[e.USER_ANALYTICS=1e4]="USER_ANALYTICS",e[e.AUTOPLAY_FAILED=9178]="AUTOPLAY_FAILED",e}({});function $H(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,n,r){const i=r.value;if("function"==typeof i){const o=e.className||t.__className__||("AgoraRTCClient"===t.constructor.name?"Client":t.constructor.name);r.value=function(){for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];let a=r;if(e.argsMap)try{a=e.argsMap(this,...r)}catch(e){KH.warning(e),a=[]}try{JSON.stringify(a)}catch(e){KH.warning("arguments for method ".concat(o,".").concat(String(n)," not serializable for apiInvoke.")),a=[]}const c=(e.report||ZH).reportApiInvoke(this._sessionId||null,{name:"".concat(o,".").concat(String(n)),options:a,tag:yG.TRACER,reportResult:e.reportResult},e.throttleTime);try{const t=i.apply(this,r);return t instanceof LO?t.then((t=>(c.onSuccess(e.reportResult&&t),t))).catch((e=>{throw c.onError(e),e})):(c.onSuccess(e.reportResult&&t),t)}catch(e){throw c.onError(e),e}}}return r}}const ZH=new class{constructor(){kH(this,"baseInfoMap",new Map),kH(this,"proxyServer",void 0),kH(this,"eventUploadTimer",void 0),kH(this,"setSessionIdTimer",void 0),kH(this,"url",void 0),kH(this,"sids",new Set),kH(this,"backupUrl",void 0),kH(this,"_appId",void 0),kH(this,"keyEventUploadPendingItems",[]),kH(this,"normalEventUploadPendingItems",[]),kH(this,"apiInvokeUploadPendingItems",[]),kH(this,"apiInvokeCount",0),kH(this,"ltsList",[]),kH(this,"lastSendNormalEventTime",Date.now()),kH(this,"customReportCounterTimer",void 0),kH(this,"customReportCount",0),kH(this,"extApiInvoke",(async e=>{for(const t of e){const e=UH(UH({},t),{},{sid:null,invokeId:++this.apiInvokeCount,tag:yG.TRACER});this.sendApiInvoke(e)}})),this.eventUploadTimer=window.setInterval(this.doSend.bind(this),AH("EVENT_REPORT_SEND_INTERVAL")),this.setSessionIdTimer=window.setInterval(this.appendSessionId.bind(this),AH("EVENT_REPORT_SEND_INTERVAL"))}getBaseInfoBySessionId(e){return this.baseInfoMap.get(e)}adjustSessionStartTime(e){if(!this.baseInfoMap.has(e)&&!this.baseInfoMap.get(e))return void KH.error("adjust session ".concat(e," start time, sid is not exist or info is undefined"));const t=this.baseInfoMap.get(e),n=Date.now(),r=t.startTime;t.startTime=n,KH.debug("rewrite session ".concat(e," startTime: ").concat(n," , ").concat(n-r,"ms")),this.baseInfoMap.set(e,t)}setAppId(e){this._appId=e}reportApiInvoke(e,t,n){t.timeout=t.timeout||6e4,t.reportResult=void 0===t.reportResult||t.reportResult;const r=Date.now();this.apiInvokeCount+=1;const i=this.apiInvokeCount,o=()=>({tag:t.tag,invokeId:i,sid:e,name:t.name,apiInvokeTime:r,options:t.options,states:t.states||null}),s=!!AH("SHOW_REPORT_INVOKER_LOG");s&&KH.info("".concat(t.name," start"),t.options);let a=!1;JG(t.timeout).then((()=>{a||(this.sendApiInvoke(UH(UH({},o()),{},{error:ZB.API_INVOKE_TIMEOUT,success:!1})),KH.debug("".concat(t.name," timeout")))}));const c=new eG(ZB.UNEXPECTED_ERROR,"".concat(t.name,": this api invoke is end"));return{onSuccess:e=>{const r=()=>{if(a)throw c;return a=!0,this.sendApiInvoke(UH(UH({},o()),{},{success:!0},t.reportResult&&{result:e})),s&&KH.info("".concat(t.name," onSuccess")),e};return n?eH(r,t.name+"Success",n,(()=>a=!0)):r()},onError:e=>{const r=()=>{if(a)throw e;a=!0,this.sendApiInvoke(UH(UH({},o()),{},{success:!1,error:e})),s&&KH.info("".concat(t.name," onFailure"),e.toString())};return n?eH(r,t.name+"Error",n,(()=>a=!0)):r()}}}sessionInit(e,t){if(this.baseInfoMap.has(e))return;const n=Date.now(),r=this.createBaseInfo(e,n);r.cname=t.cname;const i=Object.assign({},{willUploadConsoleLog:AH("UPLOAD_LOG"),maxTouchPoints:navigator.maxTouchPoints,areaVersion:bH?"global":"oversea",areas:AH("AREAS")&&AH("AREAS").join(",")},t.extend),{stringUid:o,channelProfile:s,channelMode:a,isABTestSuccess:c,lsid:d,clientRole:l}=t,h=Date.now(),u=UH(UH({},r),{},{eventType:JH.SESSION_INIT,appid:t.appid,browser:navigator.userAgent,buildFormat:t.buildFormat,build:CH,lts:h,elapse:h-n,extend:JSON.stringify(i),mode:t.mode,process:AH("PROCESS_ID"),appType:AH("APP_TYPE"),success:!0,version:vH,stringUid:o,channelProfile:s,channelMode:a,isABTestSuccess:c,lsid:d,clientType:Fv(p=window.navigator.userAgent).call(p,"AgoraWebView")?42:20,clientRole:l,serviceId:AH("PROCESS_ID"),extensionID:AH("PLUGIN_INFO").join(",")||""});var p;this.send({type:XH.SESSION,data:u},!0)}joinChooseServer(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Date.now(),o=UH(UH({},r),{},{eventType:JH.JOIN_CHOOSE_SERVER,lts:i,eventElapse:t.elapse||i-t.lts,chooseServerAddr:t.csAddr,errorCode:t.ec,elapse:i-n.startTime,success:t.succ,chooseServerAddrList:JSON.stringify(t.serverList),uid:t.uid?parseInt(t.uid):null,cid:t.cid?parseInt(t.cid):null,chooseServerIp:t.csIp||"",opid:t.opid,unilbsServerIds:t.unilbsServerIds,extend:t.extend||void 0,isHttp3:t.isHttp3,corssRegionTagReq:t.corssRegionTagReq||void 0,corssRegionTagRes:t.corssRegionTagRes||void 0});this.send({type:XH.JOIN_CHOOSE_SERVER,data:o},!0)}reqUserAccount(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Date.now(),o=UH(UH({},r),{},{eventType:JH.REQ_USER_ACCOUNT,lts:i,success:t.success,serverAddress:t.serverAddr,stringUid:t.stringUid,uid:t.uid,errorCode:t.errorCode,elapse:t.elapse||i-n.startTime,eventElapse:i-t.lts,extend:JSON.stringify(t.extend)});this.send({type:XH.REQ_USER_ACCOUNT,data:o},!0)}joinGateway(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info;t.vid&&(r.vid=t.vid),r.uid=t.uid,r.cid=t.cid;const i=Date.now(),{firstSuccess:o,avoidJoinStartTime:s}=t,a=i-(o&&s?s:n.startTime),c=UH(UH({},r),{},{eventType:JH.JOIN_GATEWAY,lts:i,gatewayAddr:t.addr,success:t.succ,errorCode:t.ec,errorMsg:t.errorMsg||"",elapse:a,eventElapse:i-t.lts,firstSuccess:o,signalChannel:t.signalChannel,preload:t.preload?1:0});t.succ&&(n.lastJoinSuccessTime=i),this.send({type:XH.JOIN_GATEWAY,data:c},!0)}joinChannelTimeout(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=Date.now(),i=UH(UH({},n.info),{},{lts:r,timeout:t,elapse:r-n.startTime});this.send({type:XH.JOIN_CHANNEL_TIMEOUT,data:i},!0)}publish(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Date.now(),o=UH(UH({},r),{},{eventType:JH.PUBLISH,lts:i,eventElapse:t.eventElapse,elapse:i-n.startTime,success:t.succ,errorCode:t.ec,videoName:t.videoName,audioName:t.audioName,screenName:t.screenName,screenshare:t.screenshare,audio:t.audio,video:t.video,p2pid:t.p2pid,publishRequestid:t.publishRequestid});this.send({type:XH.PUBLISH,data:o},!0)}subscribe(e,t,n){const r=this.baseInfoMap.get(e);if(!r)return;const i=r.info,o=Date.now(),s=UH(UH({},i),{},{eventType:JH.SUBSCRIBE,lts:o,eventElapse:t.eventElapse,elapse:o-r.startTime,success:t.succ,errorCode:t.ec,video:t.video,audio:t.audio,subscribeRequestid:t.subscribeRequestid,p2pid:t.p2pid,preSsrc:t.preSsrc?1:0},n&&{extend:JSON.stringify({isMassSubscribe:!0})});"string"==typeof t.peerid?s.peerSuid=t.peerid:s.peer=t.peerid,this.send({type:XH.SUBSCRIBE,data:s},!0)}wsCompressorInit(e){var t;const n=[...Zx(t=this.baseInfoMap).call(t)],r=n.length?n[0]:"UnableToGetSid",i=this.baseInfoMap.get(r);if(!i)return;const o=i.info,s=Date.now(),a=UH(UH({},o),{},{eventType:JH.WS_COMPRESSOR_INIT,lts:s,eventElapse:e.eventElapse,elapse:s-i.startTime,status:e.status?1:2});this.send({type:XH.WS_COMPRESSOR_INIT,data:a},!0)}firstRemoteVideoDecode(e,t,n,r){const i=this.baseInfoMap.get(e);if(!i)return;const o=i.info,s=Date.now(),a=UH(UH(UH({},o),r),{},{elapse:s-i.startTime,eventType:t,lts:s,firstDecodeFrame:Math.max((r.firstFrame||s)-i.startTime,0),apEnd:Math.max(r.apEnd-i.startTime,0),apStart:Math.max(r.apStart-i.startTime,0),joinGwEnd:Math.max(r.joinGwEnd-i.startTime,0),joinGwStart:Math.max(r.joinGwStart-i.startTime,0),pcEnd:Math.max(r.pcEnd-i.startTime,0),pcStart:Math.max(r.pcStart-i.startTime,0),subscriberEnd:Math.max(r.subscriberEnd-i.startTime,0),subscriberStart:Math.max(r.subscriberStart-i.startTime,0),videoAddNotify:Math.max(r.videoAddNotify-i.startTime,0)});this.send({type:n,data:a},!0)}firstRemoteFrame(e,t,n,r){const i=this.baseInfoMap.get(e);if(!i)return;const o=i.info,s=Date.now(),a=UH(UH(UH({},o),r),{},{elapse:s-i.startTime,eventType:t,lts:s});this.send({type:n,data:a},!0)}pcStats(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Date.now(),o=UH(UH(UH({},r),t),{},{vid:void 0===r.vid?0:Number(r.vid),elapse:i-n.startTime,eventType:JH.PC_STATS,lts:i,preallocation:t.preallocation?1:0});this.send({type:XH.PC_STATS,data:o},!0)}updateRemoteRTPCapabilities(e,t){if(e){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Date.now(),o=UH(UH(UH({},r),t),{},{vid:void 0===r.vid?0:Number(r.vid),eventType:JH.UPDATE_REMOTE_RTPCAPABILITIES,lts:i});this.send({type:XH.UPDATE_REMOTE_RTPCAPABILITIES,data:o},!0)}}onGatewayStream(e,t,n,r){const i=this.baseInfoMap.get(e);if(!i)return;const o=i.info,s=Date.now(),a=UH(UH(UH({},o),r),{},{eventType:t,lts:s});this.send({type:n,data:a},!0)}streamSwitch(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Date.now(),o=UH(UH({},r),{},{eventType:JH.STREAM_SWITCH,lts:i,isDual:t.isdual,elapse:i-n.startTime,success:t.succ});this.send({type:XH.STREAM_SWITCH,data:o},!0)}requestProxyAppCenter(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Date.now(),o=UH(UH({},r),{},{eventType:JH.REQUEST_PROXY_APPCENTER,lts:i,eventElapse:i-t.lts,elapse:i-n.startTime,APAddr:t.APAddr,workerManagerList:t.workerManagerList,response:t.response,errorCode:t.ec,success:t.succ});this.send({type:XH.REQUEST_PROXY_APPCENTER,data:o},!0)}requestProxyWorkerManager(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Date.now(),o=UH(UH({},r),{},{eventType:JH.REQUEST_PROXY_WORKER_MANAGER,lts:i,eventElapse:i-t.lts,elapse:i-n.startTime,workerManagerAddr:t.workerManagerAddr,response:t.response,errorCode:t.ec,success:t.succ});this.send({type:XH.REQUEST_PROXY_WORKER_MANAGER,data:o},!0)}setProxyServer(e){this.proxyServer=e,e?KH.debug("reportProxyServerurl: ".concat(e)):KH.debug("disable reportProxyServerurl: ".concat(e))}peerPublishStatus(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Date.now(),o=UH(UH({},r),{},{subscribeElapse:t.subscribeElapse,peer:t.peer,peerPublishDuration:Math.max(t.audioPublishDuration,t.videoPublishDuration),audiotag:t.audioPublishDuration>0?1:-1,videotag:t.videoPublishDuration>0?1:-1,lts:i,elapse:i-n.startTime,joinChannelSuccessElapse:i-(n.lastJoinSuccessTime||i),peerPublishDurationVideo:t.videoPublishDuration,peerPublishDurationAudio:t.audioPublishDuration});this.send({type:XH.PEER_PUBLISH_STATUS,data:o},!0)}workerEvent(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Date.now();(function(e,t){const n=e[t];if(!n||"string"!=typeof n)return[e];e[t]="";const r=zG(JSON.stringify(e));let i=0;const o=[];let s=0;for(let a=0;a<n.length;a++)s+=n.charCodeAt(a)<=127?1:3,s<=1300-r||(o[o.length]=$B($B({},e),{},{[t]:n.substring(i,a)}),i=a,s=n.charCodeAt(a)<=127?1:3);return i!==n.length-1&&(o[o.length]=$B($B({},e),{},{[t]:n.substring(i)})),o})(UH(UH(UH({},r),t),{},{elapse:i-n.startTime,lts:i,productType:"WebRTC"}),"payload").forEach((e=>this.send({type:XH.WORKER_EVENT,data:e},!0)))}apworkerEvent(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Date.now(),o=UH(UH(UH({},r),t),{},{elapse:i-n.startTime,lts:i});this.send({type:XH.AP_WORKER_EVENT,data:o},!0)}joinWebProxyAP(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Date.now(),o=UH(UH(UH({},r),t),{},{elapse:i-n.startTime,lts:i,extend:t.extend||void 0});this.send({type:XH.JOIN_WEB_PROXY_AP,data:o},!0)}WebSocketQuit(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Date.now(),o=UH(UH(UH({},r),t),{},{elapse:i-n.startTime,lts:i});this.send({type:XH.WEBSOCKET_QUIT,data:o},!0)}async sendCustomReportMessage(e,t){if(this.customReportCount+=t.length,this.customReportCount>AH("CUSTOM_REPORT_LIMIT"))throw new eG(ZB.CUSTOM_REPORT_FREQUENCY_TOO_HIGH);this.customReportCounterTimer||(this.customReportCounterTimer=window.setInterval((()=>{this.customReportCount=0}),5e3));const n=Date.now(),r=t.map((t=>({type:XH.USER_ANALYTICS,data:UH(UH({sid:e},t),{},{lts:n})})));try{AH("NEW_REPORT_SERVER")?await this.postDataToStatsCollector2(r):await this.postDataToStatsCollector(r)}catch(e){throw KH.error("send custom report message failed",e.toString()),new eG(ZB.CUSTOM_REPORT_SEND_FAILED,e.message)}}sendApiInvoke(e){const t=AH("NOT_REPORT_EVENT");if(e.tag&&Fv(t)&&Fv(t).call(t,e.tag))return!1;if(null===e.sid)return this.apiInvokeUploadPendingItems.push(e),!1;const n=this.baseInfoMap.get(e.sid);if(!n)return this.apiInvokeUploadPendingItems.push(e),!1;const{cname:r,uid:i,cid:o}=n.info;let s;if(e.lts=e.lts||Date.now(),e.error)if(e.error instanceof eG){const{code:t,message:n}=e.error;s=t||n||e.error.toString()}else s=e.error.toString();const a={invokeId:e.invokeId,sid:e.sid,cname:r,cid:o,uid:i,lts:e.lts,success:e.success,elapse:e.lts-n.startTime,execElapse:e.lts-e.apiInvokeTime,apiName:e.name,options:e.options?JSON.stringify(e.options):void 0,execStates:e.states?JSON.stringify(e.states):void 0,execResult:e.result?JSON.stringify(e.result):void 0,errorCode:e.error?s:void 0,errorMsg:e.error?JSON.stringify(e.error):void 0};return this.send({type:XH.API_INVOKE,data:a},!1),!0}addSid(e){this.sids.add(e)}removeSid(e){this.sids.delete(e)}appendSessionId(){const e=this.apiInvokeUploadPendingItems;if(0===e.length)return;const t=Array.from(this.sids).find((e=>null!==e));t&&e.forEach((e=>{e&&(e.sid=t,this.sendApiInvoke(Object.assign({},e)))})),e.length=0}send(e,t){if(t)return this.keyEventUploadPendingItems.push(e),void this.sendItems(this.keyEventUploadPendingItems,!0);this.normalEventUploadPendingItems.push(e),this.normalEventUploadPendingItems.length>AH("NORMAL_EVENT_QUEUE_CAPACITY")&&this.normalEventUploadPendingItems.splice(0,1),this.normalEventUploadPendingItems.length>=10&&this.sendItems(this.normalEventUploadPendingItems,!1)}doSend(){this.keyEventUploadPendingItems.length>0&&this.sendItems(this.keyEventUploadPendingItems,!0),this.normalEventUploadPendingItems.length>0&&Date.now()-this.lastSendNormalEventTime>=5e3&&this.sendItems(this.normalEventUploadPendingItems,!1)}sendItems(e,t){const n=[],r=[];for(;e.length;){const t=e.shift();n.length<20?n.push(t):r.push(t)}e.push(...r);for(const e of[...n]){var i;-1!==this.ltsList.indexOf(e.data.lts)?(e.data.lts=this.ltsList[this.ltsList.length-1]+1,this.ltsList.push(e.data.lts)):(this.ltsList.push(e.data.lts),XN(i=this.ltsList).call(i,((e,t)=>e-t)))}return t||(this.lastSendNormalEventTime=Date.now()),AH("ENABLE_EVENT_REPORT")?(n.length&&(AH("NEW_REPORT_SERVER")?this.postDataToStatsCollector2(n):this.postDataToStatsCollector(n)).catch((e=>n=>{AH("EVENT_REPORT_RETRY")&&(t?this.keyEventUploadPendingItems=this.keyEventUploadPendingItems.concat(e):(this.normalEventUploadPendingItems=this.normalEventUploadPendingItems.concat(e),this.normalEventUploadPendingItems.length>AH("NORMAL_EVENT_QUEUE_CAPACITY")&&(this.normalEventUploadPendingItems.splice(0,this.normalEventUploadPendingItems.length-AH("NORMAL_EVENT_QUEUE_CAPACITY")),KH.warning("report: drop normal events"))))})(n)),e):e}async postDataToStatsCollector2(e){LG.networkState===AG.OFFLINE&&await LO.race([LG.onlineWaiter,JG(2*lH.maxRetryTimeout)]);const t=e=>{let t=new Uint8Array;return e.forEach((e=>{const n=uG(JSON.stringify(e.data)),r=new ArrayBuffer(5),i=(e=>{let t=0;return Object.entries(XH).forEach((n=>{let[r,i]=n;i===e.type&&(t=QH[r])})),t})(e),o=new DataView(r);o.setUint16(0,n.byteLength,!0),o.setUint8(2,255&i),o.setUint8(3,i>>>8&255),o.setUint8(4,i>>>16&255),t=pG(t,new Uint8Array(r)),t=pG(t,n)})),t},n="event";let r=this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(AH("NEW_REPORT_SERVER_DOMAINS")[0],"&p=443&d=").concat(n):"https://".concat(AH("NEW_REPORT_SERVER_DOMAINS")[0],"/").concat(n);for(let i=0;i<2;i+=1){1===i&&(r=this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(AH("NEW_REPORT_SERVER_DOMAINS")[1],"&p=443&d=").concat(n):"https://".concat(AH("NEW_REPORT_SERVER_DOMAINS")[1],"/").concat(n));try{await _H(r,{timeout:1e4,data:t(e),headers:UH(UH({biz:"webrtc",sendts:Math.round(Date.now()/1e3),debug:"false"},this._appId&&{appid:this._appId}),{},{"Content-Type":"application/octet-stream"})},!0)}catch(e){if(1===i)throw e;continue}return}}async postDataToStatsCollector(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n={msgType:"EventMessages",sentTs:Math.round(Date.now()/1e3),payloads:e.map((e=>JSON.stringify(e))),vid:(e=>{const t=e&&e.data.sid&&this.baseInfoMap.get(e.data.sid);return t&&t.info.vid&&+t.info.vid||0})(e[0])};LG.networkState===AG.OFFLINE&&await LO.race([LG.onlineWaiter,JG(2*lH.maxRetryTimeout)]);const r=t?"/events/proto-raws":"/events/messages";let i=this.url||(this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(AH("EVENT_REPORT_DOMAIN"),"&p=").concat(AH("STATS_COLLECTOR_PORT"),"&d=").concat(r):"https://".concat(AH("EVENT_REPORT_DOMAIN"),":").concat(AH("STATS_COLLECTOR_PORT")).concat(r));for(let e=0;e<2;e+=1){1===e&&(i=this.backupUrl||(this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(AH("EVENT_REPORT_BACKUP_DOMAIN"),"&p=").concat(AH("STATS_COLLECTOR_PORT"),"&d=").concat(r):"https://".concat(AH("EVENT_REPORT_BACKUP_DOMAIN"),":").concat(AH("STATS_COLLECTOR_PORT")).concat(r)));try{t?await EH(i,{timeout:1e4,data:n}):await _H(i,{timeout:1e4,data:n})}catch(t){if(1===e)throw t;continue}return}}createBaseInfo(e,t){const n=Object.assign({},YH);return n.sid=e,this.baseInfoMap.set(e,{info:n,startTime:t}),n}reportResourceTiming(e,t){const n=performance.getEntriesByName(e),r=n[n.length-1];r&&this.reportApiInvoke(t,{name:"Client.resourceTiming",options:r,tag:yG.TRACER}).onSuccess()}};VH.on("REPORT_LOG_UPLOAD",(e=>{e.networkState=LG.networkState,ZH.reportApiInvoke(null,{name:"logUploadError",options:e,tag:yG.TRACER}).onSuccess("logUploadError")}));class eW extends eG{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",arguments.length>2?arguments[2]:void 0),kH(this,"name","AgoraRTCException")}print(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"error";return super.print(e,KH)}throw(){super.throw(KH)}}const tW=["CHINA","GLOBAL"],nW=[[0,1,2,3,4,5,5],[0,2,2,3,4,5,5],[0,3,3,3,4,5,5],[0,4,4,4,4,5,5],[0,5,5,5,5,5,5]],rW=[];function iW(e,t){return!!t&&rW.some((n=>n.uid===e&&n.channelName===t))}var oW=GL.forEach,sW=Yv("forEach")?[].forEach:function(e){return oW(this,e,arguments.length>1?arguments[1]:void 0)};jy({target:"Array",proto:!0,forced:[].forEach!=sW},{forEach:sW});var aW=cv("Array").forEach,cW=Rv,dW=hE,lW=Rg,hW=aW,uW=Array.prototype,pW={DOMTokenList:!0,NodeList:!0},fW=gg((function(e){var t=e.forEach;return e===uW||lW(uW,e)&&t===uW.forEach||dW(pW,cW(e))?hW:t})),mW=cE,gW=oS;jy({target:"Object",stat:!0,forced:_g((function(){gW(1)}))},{keys:function(e){return gW(mW(e))}});var _W=gg(g_.Object.keys),EW=gg(tb),yW=jy,vW=KD,bW=Tg([].reverse),SW=[1,2];yW({target:"Array",proto:!0,forced:String(SW)===String(SW.reverse())},{reverse:function(){return vW(this)&&(this.length=this.length),bW(this)}});var TW=cv("Array").reverse,RW=Rg,CW=TW,wW=Array.prototype,IW=function(e){var t=e.reverse;return e===wW||RW(wW,e)&&t===wW.reverse?CW:t},AW=gg(IW),OW=jy,xW=KD,NW=FC,PW=m_,DW=Jy,LW=ev,kW=u_,MW=oN,UW=CE,VW=qC,FW=nL("slice"),jW=UW("species"),BW=Array,GW=Math.max;OW({target:"Array",proto:!0,forced:!FW},{slice:function(e,t){var n,r,i,o=kW(this),s=LW(o),a=DW(e,s),c=DW(void 0===t?s:t,s);if(xW(o)&&(n=o.constructor,(NW(n)&&(n===BW||xW(n.prototype))||PW(n)&&null===(n=n[jW]))&&(n=void 0),n===BW||void 0===n))return VW(o,a,c);for(r=new(void 0===n?BW:n)(GW(c-a,0)),i=0;a<c;a++,i++)a in o&&MW(r,i,o[a]);return r.length=i,r}});var HW=cv("Array").slice,WW=Rg,KW=HW,zW=Array.prototype,qW=gg((function(e){var t=e.slice;return e===zW||WW(zW,e)&&t===zW.slice?KW:t}));function YW(e,t,n,r,i){var o,s,a,c={};return fW(o=_W(r)).call(o,(function(e){c[e]=r[e]})),c.enumerable=!!c.enumerable,c.configurable=!!c.configurable,("value"in c||c.initializer)&&(c.writable=!0),c=EW(s=AW(a=qW(n).call(n)).call(a)).call(s,(function(n,r){return r(e,t,n)||n}),c),i&&void 0!==c.initializer&&(c.value=c.initializer?c.initializer.call(i):void 0,c.initializer=void 0),void 0===c.initializer&&(HD(e,t,c),c=null),c}let JW=function(e){return e.L1T1="L1T1",e.L1T2="L1T2",e.L1T3="L1T3",e.L1T3_KEY="L1T3_KEY",e.L2T1_KEY="L2T1_KEY",e.L2T2_KEY="L2T2_KEY",e.L2T3_KEY="L2T3_KEY",e.L3T1_KEY="L3T1_KEY",e.L3T2_KEY="L3T2_KEY",e.L3T3_KEY="L3T3_KEY",e}({}),XW=function(e){return e.CERTIFICATE="certificate",e.CODEC="codec",e.CANDIDATE_PAIR="candidate-pair",e.LOCAL_CANDIDATE="local-candidate",e.REMOTE_CANDIDATE="remote-candidate",e.INBOUND="inbound-rtp",e.TRACK="track",e.OUTBOUND="outbound-rtp",e.PC="peer-connection",e.REMOTE_INBOUND="remote-inbound-rtp",e.REMOTE_OUTBOUND="remote-outbound-rtp",e.TRANSPORT="transport",e.CSRC="csrc",e.DATA_CHANNEL="data-channel",e.STREAM="stream",e.SENDER="sender",e.RECEIVER="receiver",e}({}),QW=function(e){return e[e.ACCESS_POINT=101]="ACCESS_POINT",e[e.UNILBS=201]="UNILBS",e[e.STRING_UID_ALLOCATOR=901]="STRING_UID_ALLOCATOR",e}({}),$W=function(e){return e[e.IIIEGAL_APPID=1]="IIIEGAL_APPID",e[e.IIIEGAL_UID=2]="IIIEGAL_UID",e[e.INTERNAL_ERROR=3]="INTERNAL_ERROR",e}({}),ZW=function(e){return e[e.INVALID_VENDOR_KEY=5]="INVALID_VENDOR_KEY",e[e.INVALID_CHANNEL_NAME=7]="INVALID_CHANNEL_NAME",e[e.INTERNAL_ERROR=8]="INTERNAL_ERROR",e[e.NO_AUTHORIZED=9]="NO_AUTHORIZED",e[e.DYNAMIC_KEY_TIMEOUT=10]="DYNAMIC_KEY_TIMEOUT",e[e.NO_ACTIVE_STATUS=11]="NO_ACTIVE_STATUS",e[e.DYNAMIC_KEY_EXPIRED=13]="DYNAMIC_KEY_EXPIRED",e[e.STATIC_USE_DYNAMIC_KEY=14]="STATIC_USE_DYNAMIC_KEY",e[e.DYNAMIC_USE_STATIC_KEY=15]="DYNAMIC_USE_STATIC_KEY",e[e.USER_OVERLOAD=16]="USER_OVERLOAD",e[e.FORBIDDEN_REGION=18]="FORBIDDEN_REGION",e[e.CANNOT_MEET_AREA_DEMAND=19]="CANNOT_MEET_AREA_DEMAND",e}({}),eK=function(e){return e[e.NO_FLAG_SET=100]="NO_FLAG_SET",e[e.FLAG_SET_BUT_EMPTY=101]="FLAG_SET_BUT_EMPTY",e[e.INVALID_FALG_SET=102]="INVALID_FALG_SET",e[e.FLAG_SET_BUT_NO_RE=103]="FLAG_SET_BUT_NO_RE",e[e.INVALID_SERVICE_ID=104]="INVALID_SERVICE_ID",e[e.NO_SERVICE_AVAILABLE=200]="NO_SERVICE_AVAILABLE",e[e.NO_SERVICE_AVAILABLE_P2P=201]="NO_SERVICE_AVAILABLE_P2P",e[e.NO_SERVICE_AVAILABLE_VOICE=202]="NO_SERVICE_AVAILABLE_VOICE",e[e.NO_SERVICE_AVAILABLE_WEBRTC=203]="NO_SERVICE_AVAILABLE_WEBRTC",e[e.NO_SERVICE_AVAILABLE_CDS=204]="NO_SERVICE_AVAILABLE_CDS",e[e.NO_SERVICE_AVAILABLE_CDN=205]="NO_SERVICE_AVAILABLE_CDN",e[e.NO_SERVICE_AVAILABLE_TDS=206]="NO_SERVICE_AVAILABLE_TDS",e[e.NO_SERVICE_AVAILABLE_REPORT=207]="NO_SERVICE_AVAILABLE_REPORT",e[e.NO_SERVICE_AVAILABLE_APP_CENTER=208]="NO_SERVICE_AVAILABLE_APP_CENTER",e[e.NO_SERVICE_AVAILABLE_ENV0=209]="NO_SERVICE_AVAILABLE_ENV0",e[e.NO_SERVICE_AVAILABLE_VOET=210]="NO_SERVICE_AVAILABLE_VOET",e[e.NO_SERVICE_AVAILABLE_STRING_UID=211]="NO_SERVICE_AVAILABLE_STRING_UID",e[e.NO_SERVICE_AVAILABLE_WEBRTC_UNILBS=212]="NO_SERVICE_AVAILABLE_WEBRTC_UNILBS",e[e.NO_SERVICE_AVAILABLE_UNILBS_FLV=213]="NO_SERVICE_AVAILABLE_UNILBS_FLV",e}({}),tK=function(e){return e[e.K_TIMESTAMP_EXPIRED=2]="K_TIMESTAMP_EXPIRED",e[e.K_CHANNEL_PERMISSION_INVALID=3]="K_CHANNEL_PERMISSION_INVALID",e[e.K_CERTIFICATE_INVALID=4]="K_CERTIFICATE_INVALID",e[e.K_CHANNEL_NAME_EMPTY=5]="K_CHANNEL_NAME_EMPTY",e[e.K_CHANNEL_NOT_FOUND=6]="K_CHANNEL_NOT_FOUND",e[e.K_TICKET_INVALID=7]="K_TICKET_INVALID",e[e.K_CHANNEL_CONFLICTED=8]="K_CHANNEL_CONFLICTED",e[e.K_SERVICE_NOT_READY=9]="K_SERVICE_NOT_READY",e[e.K_SERVICE_TOO_HEAVY=10]="K_SERVICE_TOO_HEAVY",e[e.K_UID_BANNED=14]="K_UID_BANNED",e[e.K_IP_BANNED=15]="K_IP_BANNED",e[e.K_CHANNEL_BANNED=16]="K_CHANNEL_BANNED",e[e.K_AUTO_REBALANCE=28]="K_AUTO_REBALANCE",e[e.WARN_NO_AVAILABLE_CHANNEL=103]="WARN_NO_AVAILABLE_CHANNEL",e[e.WARN_LOOKUP_CHANNEL_TIMEOUT=104]="WARN_LOOKUP_CHANNEL_TIMEOUT",e[e.WARN_LOOKUP_CHANNEL_REJECTED=105]="WARN_LOOKUP_CHANNEL_REJECTED",e[e.WARN_OPEN_CHANNEL_TIMEOUT=106]="WARN_OPEN_CHANNEL_TIMEOUT",e[e.WARN_OPEN_CHANNEL_REJECTED=107]="WARN_OPEN_CHANNEL_REJECTED",e[e.WARN_REQUEST_DEFERRED=108]="WARN_REQUEST_DEFERRED",e[e.ERR_DYNAMIC_KEY_TIMEOUT=109]="ERR_DYNAMIC_KEY_TIMEOUT",e[e.ERR_NO_AUTHORIZED=110]="ERR_NO_AUTHORIZED",e[e.ERR_VOM_SERVICE_UNAVAILABLE=111]="ERR_VOM_SERVICE_UNAVAILABLE",e[e.ERR_NO_CHANNEL_AVAILABLE_CODE=112]="ERR_NO_CHANNEL_AVAILABLE_CODE",e[e.ERR_MASTER_VOCS_UNAVAILABLE=114]="ERR_MASTER_VOCS_UNAVAILABLE",e[e.ERR_INTERNAL_ERROR=115]="ERR_INTERNAL_ERROR",e[e.ERR_NO_ACTIVE_STATUS=116]="ERR_NO_ACTIVE_STATUS",e[e.ERR_INVALID_UID=117]="ERR_INVALID_UID",e[e.ERR_DYNAMIC_KEY_EXPIRED=118]="ERR_DYNAMIC_KEY_EXPIRED",e[e.ERR_STATIC_USE_DYANMIC_KE=119]="ERR_STATIC_USE_DYANMIC_KE",e[e.ERR_DYNAMIC_USE_STATIC_KE=120]="ERR_DYNAMIC_USE_STATIC_KE",e[e.ERR_NO_VOCS_AVAILABLE=2e3]="ERR_NO_VOCS_AVAILABLE",e[e.ERR_NO_VOS_AVAILABLE=2001]="ERR_NO_VOS_AVAILABLE",e[e.ERR_JOIN_CHANNEL_TIMEOUT=2002]="ERR_JOIN_CHANNEL_TIMEOUT",e[e.ERR_REPEAT_JOIN_CHANNEL=2003]="ERR_REPEAT_JOIN_CHANNEL",e[e.ERR_JOIN_BY_MULTI_IP=2004]="ERR_JOIN_BY_MULTI_IP",e[e.ERR_NOT_JOINED=2011]="ERR_NOT_JOINED",e[e.ERR_REPEAT_JOIN_REQUEST=2012]="ERR_REPEAT_JOIN_REQUEST",e[e.ERR_INVALID_VENDOR_KEY=2013]="ERR_INVALID_VENDOR_KEY",e[e.ERR_INVALID_CHANNEL_NAME=2014]="ERR_INVALID_CHANNEL_NAME",e[e.ERR_INVALID_STRINGUID=2015]="ERR_INVALID_STRINGUID",e[e.ERR_TOO_MANY_USERS=2016]="ERR_TOO_MANY_USERS",e[e.ERR_SET_CLIENT_ROLE_TIMEOUT=2017]="ERR_SET_CLIENT_ROLE_TIMEOUT",e[e.ERR_SET_CLIENT_ROLE_NO_PERMISSION=2018]="ERR_SET_CLIENT_ROLE_NO_PERMISSION",e[e.ERR_SET_CLIENT_ROLE_ALREADY_IN_USE=2019]="ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",e[e.ERR_PUBLISH_REQUEST_INVALID=2020]="ERR_PUBLISH_REQUEST_INVALID",e[e.ERR_SUBSCRIBE_REQUEST_INVALID=2021]="ERR_SUBSCRIBE_REQUEST_INVALID",e[e.ERR_NOT_SUPPORTED_MESSAGE=2022]="ERR_NOT_SUPPORTED_MESSAGE",e[e.ERR_ILLEAGAL_PLUGIN=2023]="ERR_ILLEAGAL_PLUGIN",e[e.ERR_REJOIN_TOKEN_INVALID=2024]="ERR_REJOIN_TOKEN_INVALID",e[e.ERR_REJOIN_USER_NOT_JOINED=2025]="ERR_REJOIN_USER_NOT_JOINED",e[e.ERR_INVALID_OPTIONAL_INFO=2027]="ERR_INVALID_OPTIONAL_INFO",e[e.ILLEGAL_AES_PASSWORD=2028]="ILLEGAL_AES_PASSWORD",e[e.ILLEGAL_CLIENT_ROLE_LEVEL=2029]="ILLEGAL_CLIENT_ROLE_LEVEL",e[e.ERR_TOO_MANY_BROADCASTERS=2031]="ERR_TOO_MANY_BROADCASTERS",e[e.ERR_TOO_MANY_SUBSCRIBERS=2032]="ERR_TOO_MANY_SUBSCRIBERS",e[e.ERR_LICENSE_MISSING=32769]="ERR_LICENSE_MISSING",e[e.ERR_LICENSE_EXPIRED=32771]="ERR_LICENSE_EXPIRED",e[e.ERR_LICENSE_MINUTES_EXCEEDED=32773]="ERR_LICENSE_MINUTES_EXCEEDED",e[e.ERR_LICENSE_PERIOD_INVALID=32774]="ERR_LICENSE_PERIOD_INVALID",e[e.ERR_LICENSE_MULTIPLE_SDK_SERVICE=32778]="ERR_LICENSE_MULTIPLE_SDK_SERVICE",e[e.ERR_LICENSE_ILLEGAL=32783]="ERR_LICENSE_ILLEGAL",e[e.ERR_TEST_RECOVER=9e3]="ERR_TEST_RECOVER",e[e.ERR_TEST_TRYNEXT=9001]="ERR_TEST_TRYNEXT",e[e.ERR_TEST_RETRY=9002]="ERR_TEST_RETRY",e}({}),nK=function(e){return e.CONNECTING="connecting",e.CONNECTED="connected",e.RECONNECTING="reconnecting",e.CLOSED="closed",e}({}),rK=function(e){return e.WS_CONNECTED="ws_connected",e.WS_RECONNECTING="ws_reconnecting",e.WS_CLOSED="ws_closed",e.WS_RECONNECT_WAITTING_FINISH="ws_reconnect_waitting_finish",e.WS_RECONNECT_CREATE_CONNECTION="ws_reconnect_create_connection",e.ON_BINARY_DATA="on_binary_data",e.REQUEST_RECOVER="request_recover",e.REQUEST_JOIN_INFO="request_join_info",e.REQUEST_REJOIN_INFO="req_rejoin_info",e.IS_P2P_DISCONNECTED="is_p2p_dis",e.DISCONNECT_P2P="dis_p2p",e.ABORT_P2P_EXECUTION="abort_p2p_execution",e.NEED_RENEW_SESSION="need-sid",e.REPORT_JOIN_GATEWAY="report_join_gateway",e.REQUEST_TIMEOUT="request_timeout",e.REQUEST_SUCCESS="request_success",e.JOIN_RESPONSE="join_response",e.PRE_CONNECT_PC="pre_connect_pc",e.P2P_CONNECTION="p2p_connection",e.P2P_REMOTE_CANDIDATE_UPDATE="p2p_remote_candidate_update",e.P2P_SUBSCRIBE="p2p_subscribe",e.P2P_UNSUBSCRIBE="p2p_unsubscribe",e.P2P_EXCHANGE_SDP="p2p_exchange_sdp",e.P2P_ON_ADD_VIDEO_STREAM="p2p_on_add_video_stream",e.P2P_ON_ADD_AUDIO_STREAM="p2p_on_add_audio_stream",e.RECOVER_NOTIFICATION="recover_notification",e}({}),iK=function(e){return e.PING="ping",e.PING_BACK="ping_back",e.JOIN="join_v3",e.REJOIN="rejoin_v3",e.LEAVE="leave",e.SET_CLIENT_ROLE="set_client_role",e.PUBLISH="publish",e.PUBLISH_DATASTREAM="publish_datastream",e.UNPUBLISH="unpublish",e.UNPUBLISH_DATASTREAM="unpublish_datastream",e.SUBSCRIBE="subscribe",e.PRE_SUBSCRIBE="pre_subscribe",e.SUBSCRIBE_DATASTREAM="subscribe_datastream",e.SUBSCRIBE_STREAMS="subscribe_streams",e.UNSUBSCRIBE="unsubscribe",e.UNSUBSCRIBE_DATASTREAM="unsubscribe_datastream",e.UNSUBSCRIBE_STREAMS="unsubscribe_streams",e.SUBSCRIBE_CHANGE="subscribe_change",e.TRAFFIC_STATS="traffic_stats",e.RENEW_TOKEN="renew_token",e.SWITCH_VIDEO_STREAM="switch_video_stream",e.DEFAULT_VIDEO_STREAM="default_video_stream",e.SET_FALLBACK_OPTION="set_fallback_option",e.GATEWAY_INFO="gateway_info",e.CONTROL="control",e.SEND_METADATA="send_metadata",e.DATA_STREAM="data_stream",e.PICK_SVC_LAYER="pick_svc_layer",e.RESTART_ICE="restart_ice",e.CONNECT_PC="connect_pc",e.SET_VIDEO_PROFILE="set_video_profile",e.SET_PARAMETER="set_parameter",e.SET_RTM2_FLAG="set_rtm2_flag",e}({}),oK=function(e){return e.WRTC_STATS="wrtc_stats",e.WS_INFLATE_DATA_LENGTH="ws_inflate_data_length",e.DENOISER_STATS="denoiser_stats",e.EXTENSION_USAGE_STATS="extension_usage_stats",e}({}),sK=function(e){return e.ON_USER_ONLINE="on_user_online",e.ON_USER_OFFLINE="on_user_offline",e.ON_STREAM_FALLBACK_UPDATE="on_stream_fallback_update",e.ON_PUBLISH_STREAM="on_publish_stream",e.ON_UPLINK_STATS="on_uplink_stats",e.ON_P2P_LOST="on_p2p_lost",e.ON_REMOVE_STREAM="on_remove_stream",e.ON_ADD_AUDIO_STREAM="on_add_audio_stream",e.ON_ADD_VIDEO_STREAM="on_add_video_stream",e.ON_TOKEN_PRIVILEGE_WILL_EXPIRE="on_token_privilege_will_expire",e.ON_TOKEN_PRIVILEGE_DID_EXPIRE="on_token_privilege_did_expire",e.ON_USER_BANNED="on_user_banned",e.ON_USER_LICENSE_BANNED="on_user_license_banned",e.ON_NOTIFICATION="on_notification",e.ON_CRYPT_ERROR="on_crypt_error",e.MUTE_AUDIO="mute_audio",e.MUTE_VIDEO="mute_video",e.UNMUTE_AUDIO="unmute_audio",e.UNMUTE_VIDEO="unmute_video",e.ON_P2P_OK="on_p2p_ok",e.RECEIVE_METADATA="receive_metadata",e.ON_DATA_STREAM="on_data_stream",e.ON_RTP_CAPABILITY_CHANGE="on_rtp_capability_change",e.ON_REMOTE_DATASTREAM_UPDATE="on_remote_datastream_update",e.ON_REMOTE_FULL_DATASTREAM_INFO="on_remote_full_datastream_info",e.ENABLE_LOCAL_VIDEO="enable_local_video",e.DISABLE_LOCAL_VIDEO="disable_local_video",e.ENABLE_LOCAL_AUDIO="enable_local_audio",e.DISABLE_LOCAL_AUDIO="disable_local_audio",e.ON_PUBLISHED_USER_LIST="on_published_user_list",e}({}),aK=function(e){return e.SEND_ONLY="SEND_ONLY",e.RECEIVE_ONLY="RECEIVE_ONLY",e}({}),cK=function(e){return e.CONNECTED="websocket:connected",e.RECONNECTING="websocket:reconnecting",e.WILL_RECONNECT="websocket:will_reconnect",e.CLOSED="websocket:closed",e.FAILED="websocket:failed",e.ON_MESSAGE="websocket:on_message",e.REQUEST_NEW_URLS="websocket:request_new_urls",e.RECONNECT_WAITTING_FINISH="websocket:reconnect_waitting_finish",e.RECONNECT_CREATE_CONNECTION="websocket:reconnect_create_connection",e.ON_TOKEN_PRIVILEGE_DID_EXPIRE="websocket:on_token_privilege_did_expire",e}({});function dK(e){if("string"!=typeof e||!/^[a-zA-Z0-9 \!\#\$\%\&\(\)\+\-\:\;\<\=\.\>\?\@\[\]\^\_\{\}\|\~\,]{1,64}$/.test(e))throw KH.error("Invalid Channel Name ".concat(e)),new eW(ZB.INVALID_PARAMS,"The length must be within 64 bytes. The supported characters: a-z,A-Z,0-9,space,!, #, $, %, &, (, ), +, -, :, ;, <, =, ., >, ?, @, [, ], ^, _,  {, }, |, ~, ,")}function lK(e){if(!function(e){return"number"==typeof e&&Math.floor(e)===e&&0<=e&&e<=4294967295}(e)&&!cG(e,1,255))throw new eW(ZB.INVALID_PARAMS,"[String uid] Length of the string: [1,255]. ASCII characters only. [Number uid] The value range is [0,10000]");"string"==typeof e&&KH.warn("You input a string as the user ID, to ensure better end-user experience, Agora highly suggests not using a string as the user ID.")}let hK=function(e){return e.TRANSCODE="mix_streaming",e.RAW="raw_streaming",e}({});const uK={alpha:1,height:640,width:360,x:0,y:0,zOrder:0,audioChannel:0},pK={x:0,y:0,width:160,height:160,zOrder:255,alpha:1};function fK(e,t){oG(e.url,"".concat(t,".url"),1,1e3,!1),aG(e.x)||rG(e.x,"".concat(t,".x"),0,1e4),aG(e.y)||rG(e.y,"".concat(t,".y"),0,1e4),aG(e.width)||rG(e.width,"".concat(t,".width"),0,1e4),aG(e.height)||rG(e.height,"".concat(t,".height"),0,1e4),aG(e.zOrder)||rG(e.zOrder,"".concat(t,".zOrder"),0,255),aG(e.alpha)||rG(e.alpha,"".concat(t,".alpha"),0,1,!1)}const mK={audioBitrate:48,audioChannels:1,audioSampleRate:48e3,backgroundColor:0,height:360,lowLatency:!1,videoBitrate:400,videoCodecProfile:100,videoCodecType:1,videoFrameRate:15,videoGop:30,width:640,images:[],userConfigs:[],userConfigExtraInfo:""};let gK=function(e){return e.WARNING="@live_uap-warning",e.ERROR="@line_uap-error",e.PUBLISH_STREAM_STATUS="@live_uap-publish-status",e.WORKER_STATUS="@live_uap-worker-status",e.REQUEST_NEW_ADDRESS="@live_uap-request-address",e}({}),_K=function(e){return e.REQUEST_WORKER_MANAGER_LIST="@live_req_worker_manager",e}({}),EK=function(e){return e[e.LIVE_STREAM_RESPONSE_SUCCEED=200]="LIVE_STREAM_RESPONSE_SUCCEED",e[e.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM=454]="LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM",e[e.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR=450]="LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR",e[e.LIVE_STREAM_RESPONSE_BAD_STREAM=451]="LIVE_STREAM_RESPONSE_BAD_STREAM",e[e.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR=400]="LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR",e[e.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST=404]="LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST",e[e.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED=456]="LIVE_STREAM_RESPONSE_NOT_AUTHORIZED",e[e.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE=457]="LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE",e[e.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN=429]="LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN",e[e.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH=452]="LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH",e[e.LIVE_STREAM_RESPONSE_NOT_SUPPORTED=453]="LIVE_STREAM_RESPONSE_NOT_SUPPORTED",e[e.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM=455]="LIVE_STREAM_RESPONSE_MAX_STREAM_NUM",e[e.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR=500]="LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR",e[e.LIVE_STREAM_RESPONSE_WORKER_LOST=501]="LIVE_STREAM_RESPONSE_WORKER_LOST",e[e.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT=502]="LIVE_STREAM_RESPONSE_RESOURCE_LIMIT",e[e.LIVE_STREAM_RESPONSE_WORKER_QUIT=503]="LIVE_STREAM_RESPONSE_WORKER_QUIT",e[e.ERROR_FAIL_SEND_MESSAGE=504]="ERROR_FAIL_SEND_MESSAGE",e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE=30]="PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE",e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT=31]="PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT",e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH=32]="PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH",e[e.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN=33]="PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN",e}({});function yK(e){if(!e.channelName)throw new eW(ZB.INVALID_PARAMS,"invalid channelName in info");if("number"!=typeof e.uid)throw new eW(ZB.INVALID_PARAMS,"invalid uid in info, uid must be a number");return e.token&&oG(e.token,"info.token",1,2047),lK(e.uid),dK(e.channelName),!0}let vK=function(e){return e[e.SetSdkProfile=0]="SetSdkProfile",e[e.SetSourceChannel=1]="SetSourceChannel",e[e.SetSourceUserId=2]="SetSourceUserId",e[e.SetDestChannel=3]="SetDestChannel",e[e.StartPacketTransfer=4]="StartPacketTransfer",e[e.StopPacketTransfer=5]="StopPacketTransfer",e[e.UpdateDestChannel=6]="UpdateDestChannel",e[e.Reconnect=7]="Reconnect",e[e.SetVideoProfile=8]="SetVideoProfile",e}({}),bK=function(e){return e.NETWORK_DISCONNECTED="NETWORK_DISCONNECTED",e.NETWORK_CONNECTED="NETWORK_CONNECTED",e.PACKET_JOINED_SRC_CHANNEL="PACKET_JOINED_SRC_CHANNEL",e.PACKET_JOINED_DEST_CHANNEL="PACKET_JOINED_DEST_CHANNEL",e.PACKET_SENT_TO_DEST_CHANNEL="PACKET_SENT_TO_DEST_CHANNEL",e.PACKET_RECEIVED_VIDEO_FROM_SRC="PACKET_RECEIVED_VIDEO_FROM_SRC",e.PACKET_RECEIVED_AUDIO_FROM_SRC="PACKET_RECEIVED_AUDIO_FROM_SRC",e.PACKET_UPDATE_DEST_CHANNEL="PACKET_UPDATE_DEST_CHANNEL",e.PACKET_UPDATE_DEST_CHANNEL_REFUSED="PACKET_UPDATE_DEST_CHANNEL_REFUSED",e.PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE="PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE",e}({}),SK=function(e){return e.RELAY_STATE_IDLE="RELAY_STATE_IDLE",e.RELAY_STATE_CONNECTING="RELAY_STATE_CONNECTING",e.RELAY_STATE_RUNNING="RELAY_STATE_RUNNING",e.RELAY_STATE_FAILURE="RELAY_STATE_FAILURE",e}({}),TK=function(e){return e.RELAY_OK="RELAY_OK",e.SERVER_CONNECTION_LOST="SERVER_CONNECTION_LOST",e.SRC_TOKEN_EXPIRED="SRC_TOKEN_EXPIRED",e.DEST_TOKEN_EXPIRED="DEST_TOKEN_EXPIRED",e}({}),RK=function(e){return e.High="high",e.Low="low",e.Audio="audio",e.Screen="screen",e.ScreenLow="screen_low",e}({}),CK=function(e){return e.DISCONNECT="disconnect",e.CONNECTION_STATE_CHANGE="connection-state-change",e.NETWORK_QUALITY="network-quality",e.STREAM_TYPE_CHANGE="stream-type-change",e.IS_P2P_DISCONNECTED="is-p2p-dis",e.DISCONNECT_P2P="dis-p2p",e.REQUEST_NEW_GATEWAY_LIST="req-gate-url",e.NEED_RENEW_SESSION="need-sid",e.REQUEST_P2P_CONNECTION_PARAMS="request-p2p-connection-params",e.JOIN_RESPONSE="join-response",e.RESET_CONNECTION_EVENTS="reset-connection-events",e.PRE_CONNECT_PC="pre-connect_pc",e}({}),wK=function(e){return e.P2P_DISCONNECTED="P2P_DISCONNECTED",e.A_ROUND_WS_FAILED="A_ROUND_WS_FAILED",e.TIMEOUT="TIMEOUT",e.UNKNOWN_REASON="UNKNOWN_REASON",e}({}),IK=function(e){return e[e.Nothing=0]="Nothing",e[e.Audio=1]="Audio",e[e.LwoVideo=2]="LwoVideo",e[e.Video=4]="Video",e[e.Data=8]="Data",e[e.DataStream0=256]="DataStream0",e[e.DataStream1=512]="DataStream1",e[e.DataStream2=1024]="DataStream2",e[e.DataStream3=2048]="DataStream3",e[e.DataStream4=4096]="DataStream4",e[e.DataStream5=8192]="DataStream5",e[e.DataStream6=16384]="DataStream6",e[e.DataStream7=32768]="DataStream7",e}({}),AK=function(e){return e.CHINA="CHINA",e.ASIA="ASIA",e.NORTH_AMERICA="NORTH_AMERICA",e.EUROPE="EUROPE",e.JAPAN="JAPAN",e.INDIA="INDIA",e.KOREA="KOREA",e.HKMC="HKMC",e.US="US",e.OCEANIA="OCEANIA",e.SOUTH_AMERICA="SOUTH_AMERICA",e.AFRICA="AFRICA",e.OVERSEA="OVERSEA",e.GLOBAL="GLOBAL",e.EXTENSIONS="EXTENSIONS",e}({});const OK=[AK.AFRICA,AK.ASIA,AK.CHINA,AK.EUROPE,AK.GLOBAL,AK.INDIA,AK.JAPAN,AK.NORTH_AMERICA,AK.OCEANIA,AK.OVERSEA,AK.SOUTH_AMERICA];let xK=function(e){return e.CHINA="CN",e.ASIA="AS",e.NORTH_AMERICA="NA",e.EUROPE="EU",e.JAPAN="JP",e.INDIA="IN",e.KOREA="KR",e.HKMC="HK",e.US="US",e.OCEANIA="OC",e.SOUTH_AMERICA="SA",e.AFRICA="AF",e.OVERSEA="OVERSEA",e.GLOBAL="GLOBAL",e.EXTENSIONS="GLOBAL",e}({});const NK={CHINA:{},ASIA:{CODE:xK.ASIA,WEBCS_DOMAIN:["ap-web-1-asia.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-asia.agora.io"],PROXY_CS:["proxy-ap-web-asia.agora.io"],CDS_AP:["cds-ap-web-asia.agora.io","cds-ap-web-asia2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-asia.agora.io","sua-ap-web-asia2.agora.io"],UAP_AP:["uap-ap-web-asia.agora.io","uap-ap-web-asia2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-asia.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-asia.agora.io"],LOG_UPLOAD_SERVER:["logservice-asia.agora.io"],PROXY_SERVER_TYPE3:["southeast-asia.webrtc-cloud-proxy.sd-rtn.com"]},NORTH_AMERICA:{CODE:xK.NORTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-north-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-north-america.agora.io"],PROXY_CS:["proxy-ap-web-america.agora.io"],CDS_AP:["cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],UAP_AP:["uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-north-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-north-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-north-america.agora.io"],PROXY_SERVER_TYPE3:["east-usa.webrtc-cloud-proxy.sd-rtn.com"]},EUROPE:{CODE:xK.EUROPE,WEBCS_DOMAIN:["ap-web-1-europe.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-europe.agora.io"],PROXY_CS:["proxy-ap-web-europe.agora.io"],CDS_AP:["cds-ap-web-europe.agora.io","cds-ap-web-europe2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-europe.agora.io","sua-ap-web-europe.agora.io"],UAP_AP:["uap-ap-web-europe.agora.io","uap-ap-web-europe2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-europe.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-europe.agora.io"],LOG_UPLOAD_SERVER:["logservice-europe.agora.io"],PROXY_SERVER_TYPE3:["europe.webrtc-cloud-proxy.sd-rtn.com"]},JAPAN:{CODE:xK.JAPAN,WEBCS_DOMAIN:["ap-web-1-japan.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-japan.agora.io"],PROXY_CS:["proxy-ap-web-japan.agora.io"],CDS_AP:["cds-ap-web-japan.agora.io","cds-ap-web-japan2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-japan.agora.io","sua-ap-web-japan2.agora.io"],UAP_AP:["uap-ap-web-japan.agora.io","uap-ap-web-japan2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-japan.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-japan.agora.io"],LOG_UPLOAD_SERVER:["logservice-japan.agora.io"],PROXY_SERVER_TYPE3:["japan.webrtc-cloud-proxy.sd-rtn.com"]},INDIA:{CODE:xK.INDIA,WEBCS_DOMAIN:["ap-web-1-india.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-india.agora.io"],PROXY_CS:["proxy-ap-web-india.agora.io"],CDS_AP:["cds-ap-web-india.agora.io","cds-ap-web-india2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-india.agora.io","sua-ap-web-india2.agora.io"],UAP_AP:["uap-ap-web-india.agora.io","uap-ap-web-india2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-india.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-india.agora.io"],LOG_UPLOAD_SERVER:["logservice-india.agora.io"],PROXY_SERVER_TYPE3:["india.webrtc-cloud-proxy.sd-rtn.com"]},KOREA:{CODE:xK.KOREA,WEBCS_DOMAIN:["ap-web-1-korea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-korea.agora.io"],PROXY_CS:["proxy-ap-web-korea.agora.io"],CDS_AP:["cds-ap-web-korea.agora.io","cds-ap-web-korea2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-korea.agora.io","sua-ap-web-korea2.agora.io"],UAP_AP:["uap-ap-web-korea.agora.io","uap-ap-web-korea2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-korea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-korea.agora.io"],LOG_UPLOAD_SERVER:["logservice-korea.agora.io"],PROXY_SERVER_TYPE3:["korea.webrtc-cloud-proxy.sd-rtn.com"]},HKMC:{CODE:xK.HKMC,WEBCS_DOMAIN:["ap-web-1-hkmc.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-hkmc.agora.io"],PROXY_CS:["proxy-ap-web-hkmc.agora.io"],CDS_AP:["cds-ap-web-hkmc.agora.io","cds-ap-web-hkmc2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-hkmc.agora.io","sua-ap-web-hkmc2.agora.io"],UAP_AP:["uap-ap-web-hkmc.agora.io","uap-ap-web-hkmc2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-hkmc.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-hkmc.agora.io"],LOG_UPLOAD_SERVER:["logservice-hkmc.agora.io"],PROXY_SERVER_TYPE3:["hkmc.webrtc-cloud-proxy.sd-rtn.com"]},US:{CODE:xK.US,WEBCS_DOMAIN:["ap-web-1-us.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-us.agora.io"],PROXY_CS:["proxy-ap-web-us.agora.io"],CDS_AP:["cds-ap-web-us.agora.io","cds-ap-web-us2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-us.agora.io","sua-ap-web-us2.agora.io"],UAP_AP:["uap-ap-web-us.agora.io","uap-ap-web-us2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-us.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-us.agora.io"],LOG_UPLOAD_SERVER:["logservice-us.agora.io"],PROXY_SERVER_TYPE3:["us.webrtc-cloud-proxy.sd-rtn.com"]},OVERSEA:{CODE:xK.OVERSEA,WEBCS_DOMAIN:["ap-web-1-oversea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oversea.agora.io"],PROXY_CS:["proxy-ap-web-oversea.agora.io"],CDS_AP:["cds-ap-web-oversea.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oversea.agora.io"],UAP_AP:["uap-ap-web-oversea.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oversea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oversea.agora.io"],LOG_UPLOAD_SERVER:["logservice-oversea.agora.io"],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.agora.io"]},GLOBAL:{CODE:xK.GLOBAL,WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-ap-web-3.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-ap-web-3.agora.io"],UAP_AP:["uap-ap-web-1.agora.io","uap-ap-web-3.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2.agora.io"],LOG_UPLOAD_SERVER:["logservice.agora.io"],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.sd-rtn.com"]},OCEANIA:{CODE:xK.OCEANIA,WEBCS_DOMAIN:["ap-web-1-oceania.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oceania.agora.io"],PROXY_CS:["proxy-ap-web-oceania.agora.io"],CDS_AP:["cds-ap-web-oceania.agora.io","cds-ap-web-oceania2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oceania.agora.io","sua-ap-web-oceania2.agora.io"],UAP_AP:["uap-ap-web-oceania.agora.io","uap-ap-web-oceania2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oceania.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oceania.agora.io"],LOG_UPLOAD_SERVER:["logservice-oceania.agora.io"],PROXY_SERVER_TYPE3:["oceania.webrtc-cloud-proxy.sd-rtn.com"]},SOUTH_AMERICA:{CODE:xK.SOUTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-south-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-south-america.agora.io"],PROXY_CS:["proxy-ap-web-south-america.agora.io"],CDS_AP:["cds-ap-web-south-america.agora.io","cds-ap-web-south-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-south-america.agora.io","sua-ap-web-south-america2.agora.io"],UAP_AP:["uap-ap-web-south-america.agora.io","uap-ap-web-south-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-south-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-south-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-america.agora.io"],PROXY_SERVER_TYPE3:["south-america.webrtc-cloud-proxy.sd-rtn.com"]},AFRICA:{CODE:xK.AFRICA,WEBCS_DOMAIN:["ap-web-1-africa.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-africa.agora.io"],PROXY_CS:["proxy-ap-web-africa.agora.io"],CDS_AP:["cds-ap-web-africa.agora.io","cds-ap-web-africa2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-africa.agora.io","sua-ap-web-africa2.agora.io"],UAP_AP:["uap-ap-web-africa.agora.io","uap-ap-web-africa2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-africa.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-africa.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-africa.agora.io"],PROXY_SERVER_TYPE3:["africa.webrtc-cloud-proxy.sd-rtn.com"]},EXTENSIONS:{}};bH&&(NK.CHINA={CODE:xK.CHINA,WEBCS_DOMAIN:["webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["proxy-web.ap.sd-rtn.com"],CDS_AP:["cds-web-2.ap.sd-rtn.com","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-web-2.ap.sd-rtn.com","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-web-2.ap.sd-rtn.com","uap-web-4.ap.sd-rtn.com"],EVENT_REPORT_DOMAIN:["web-3.statscollector.sd-rtn.com"],EVENT_REPORT_BACKUP_DOMAIN:["web-4.statscollector.sd-rtn.com"],LOG_UPLOAD_SERVER:["logservice-china.agora.io"],PROXY_SERVER_TYPE3:["east-cn.webrtc-cloud-proxy.sd-rtn.com"]});let PK=function(e){return e.UPDATE_BITRATE_LIMIT="update_bitrate_limit",e}({});class DK extends mG{constructor(e,t){super(),SU(this,"onICEConnectionStateChange",void 0),SU(this,"onConnectionStateChange",void 0),SU(this,"onDTLSTransportStateChange",void 0),SU(this,"onDTLSTransportError",void 0),SU(this,"onICETransportStateChange",void 0),SU(this,"onFirstAudioReceived",void 0),SU(this,"onFirstVideoReceived",void 0),SU(this,"onFirstAudioDecoded",void 0),SU(this,"onFirstVideoDecoded",void 0),SU(this,"onFirstVideoDecodedTimeout",void 0),SU(this,"onSelectedLocalCandidateChanged",void 0),SU(this,"onSelectedRemoteCandidateChanged",void 0),SU(this,"getLocalVideoStats",void 0)}}class LK extends DK{constructor(e,t){super(e,t),SU(this,"establishPromise",void 0)}}let kK=function(e){return e.VIDEO="video",e.AUDIO="audio",e}({}),MK=function(e){return e[e.UDP=0]="UDP",e[e.TCP=1]="TCP",e[e.RELAY=2]="RELAY",e}({}),UK=function(e){return e[e.FIRST_CONNECTION=0]="FIRST_CONNECTION",e[e.TCP_RESTART=1]="TCP_RESTART",e[e.RELAY_RESTART=2]="RELAY_RESTART",e[e.OLD_FIRST_CONNECTION=10]="OLD_FIRST_CONNECTION",e[e.OLD_RESTART=11]="OLD_RESTART",e[e.DISCONNECTED_OR_FAILED=20]="DISCONNECTED_OR_FAILED",e}({}),VK=function(e){return e.LocalVideoTrack="videoTrack",e.LocalAudioTrack="audioTrack",e.LocalVideoLowTrack="videoLowTrack",e}({}),FK=function(e){return e.New="new",e.Connected="connected",e.Reconnecting="reconnecting",e.Disconnected="disconnected",e}({}),jK=function(e){return e.StateChange="stateChange",e.IceConnectionStateChange="iceConnectionStateChange",e.RequestMuteLocal="requestMuteLocal",e.RequestUnmuteLocal="requestUnmuteLocal",e.RequestRePublish="requestRePublish",e.RequestRePublishDataChannel="requestRePublishDataChannel",e.RequestReSubscribe="requestReSubscribe",e.RequestUploadStats="requestUploadStats",e.RequestUpload="requestUpload",e.MediaReconnectStart="MediaReconnectStart",e.MediaReconnectEnd="MediaReconnectEnd",e.NeedSignalRTT="NeedSignalRTT",e.RequestRestartICE="RequestRestartIce",e.PeerConnectionStateChange="PeerConnectionStateChange",e.RequestReconnect="RequestReconnect",e.RequestReconnectPC="RequestReconnectPC",e.RequestUnpublishForReconnectPC="RequestUnpublishForReconnectPC",e.P2PLost="P2PLost",e.UpdateVideoEncoder="UpdateVideoEncoder",e.ConnectionTypeChange="ConnectionTypeChange",e.RequestLowStreamParameter="RequestLowStreamParameter",e.QueryClientConnectionState="QueryClientConnectionState",e.LocalCandidate="LocalCandidate",e.RequestP2PMuteLocal="requestP2PMuteLocal",e.RequestP2PUnPublish="RequestP2PUnPublish",e.RequestP2PUnmuteRemote="RequestP2PUnmuteRemote",e.RequestP2PMuteRemote="RequestP2PMuteRemote",e.RequestP2PRestartICE="RequestP2PRestartICE",e}({}),BK=function(e){return e.CONNECTING="CONNECTING",e.RECONNECTING="RECONNECTING",e.CONNECTED="CONNECTED",e.CLOSED="CLOSED",e}({}),GK=function(e){return e[e.CONNECT_AP=0]="CONNECT_AP",e[e.AP_CONNECTED=1]="AP_CONNECTED",e[e.CONNECT_WORKER_MANAGER=2]="CONNECT_WORKER_MANAGER",e[e.WORKER_MANAGER_CONNECTED=3]="WORKER_MANAGER_CONNECTED",e[e.GET_WORKER_MANAGER_RESPONSE=4]="GET_WORKER_MANAGER_RESPONSE",e[e.CONNECT_WORKER=5]="CONNECT_WORKER",e[e.WORKER_CONNECTED=6]="WORKER_CONNECTED",e[e.CLOSED=7]="CLOSED",e}({}),HK=function(e){return e.CONNECTION_STATE_CHANGE="connection-state-change",e.STATE_CHANGE="state-change",e.INSPECT_RESULT="inspect-result",e.CLIENT_LOCAL_VIDEO_TRACK="client-local-video-track",e.REQUEST_NEW_WORKER_URL="request-new-worker-url",e}({}),WK=function(e){return e.CONNECTED="transmitter:connected",e.RECONNECTING="transmitter:reconnecting",e.WILL_RECONNECT="transmitter:will_reconnect",e.CLOSED="transmitter:closed",e.FAILED="transmitter:failed",e.ON_MESSAGE="transmitter:on_message",e.REQUEST_NEW_URLS="transmitter:request_new_urls",e.RECONNECT_WAITTING_FINISH="transmitter:reconnect_waitting_finish",e.RECONNECT_CREATE_CONNECTION="transmitter:reconnect_create_connection",e.ON_TOKEN_PRIVILEGE_DID_EXPIRE="transmitter:on_token_privilege_did_expire",e.TO_CONNECT_DATACHANNEL="transmitter:to_connect_datachannel",e.FAILBACK="transmitter:failback",e.PRE_CONNECT_PC="transmitter:pre_connect_pc",e}({}),KK=function(e){return e.CAMERA_CHANGED="camera-changed",e.MICROPHONE_CHANGED="microphone-changed",e.PLAYBACK_DEVICE_CHANGED="playback-device-changed",e.AUDIO_AUTOPLAY_FAILED="audio-autoplay-failed",e.AUTOPLAY_FAILED="autoplay-failed",e.AUDIO_CONTEXT_STATE_CHANGED="audio-context-state-changed",e.SECURITY_POLICY_VIOLATION="security-policy-violation",e}({}),zK=function(e){return e.CONNECTING="CONNECTING",e.RECONNECTING="RECONNECTING",e.CONNECTED="CONNECTED",e.CLOSED="CLOSED",e}({}),qK=function(e){return e.CONNECTION_STATE_CHANGE="connection-state-change",e.STATE_CHANGE="state-change",e.INSPECT_RESULT="inspect-result",e.CLIENT_LOCAL_VIDEO_TRACK="client-local-video-track",e.REQUEST_NEW_WORKER_URL="request-new-worker-url",e}({}),YK=function(e){return e[e.CONNECT_AP=0]="CONNECT_AP",e[e.AP_CONNECTED=1]="AP_CONNECTED",e[e.CONNECT_WORKER_MANAGER=2]="CONNECT_WORKER_MANAGER",e[e.WORKER_MANAGER_CONNECTED=3]="WORKER_MANAGER_CONNECTED",e[e.GET_WORKER_MANAGER_RESPONSE=4]="GET_WORKER_MANAGER_RESPONSE",e[e.CONNECT_WORKER=5]="CONNECT_WORKER",e[e.WORKER_CONNECTED=6]="WORKER_CONNECTED",e[e.CLOSED=7]="CLOSED",e}({}),JK=function(e){return e.CALL="call",e.CANDIDATE="candidate",e.PUBLISH="publish",e.UNPUBLISH="unpublish",e.CONTROL="control",e.RESTART_ICE="restart_ice",e.ACK="ack",e.RESPONSE="response",e.JOIN="join",e.CHECK="check",e}({}),XK=function(e){return e.ABORT="abort",e}({}),QK=function(e){return e.MUTE_LOCAL_AUDIO="mute_local_audio",e.MUTE_LOCAL_VIDEO="mute_local_video",e.UNMUTE_LOCAL_AUDIO="unmute_local_audio",e.UNMUTE_LOCAL_VIDEO="unmute_local_video",e}({}),$K=function(e){return e.P2P_TOKEN_TIMEOUT="p2p_token_timeout",e.P2P_TOKEN_CHANGED="p2p_token_changed",e}({});const ZK={[QW.ACCESS_POINT]:{[eK.NO_FLAG_SET]:{desc:"flag is zero",retry:!1},[eK.FLAG_SET_BUT_EMPTY]:{desc:"flag is empty",retry:!1},[eK.INVALID_FALG_SET]:{desc:"invalid flag",retry:!1},[eK.FLAG_SET_BUT_NO_RE]:{desc:"flag set unilbs but no request",retry:!1},[eK.INVALID_SERVICE_ID]:{desc:"invalid service id",retry:!1},[eK.NO_SERVICE_AVAILABLE]:{desc:"no service available",retry:!0},[eK.NO_SERVICE_AVAILABLE_P2P]:{desc:"no unilbs p2p service available",retry:!0},[eK.NO_SERVICE_AVAILABLE_VOICE]:{desc:"no unilbs voice service available",retry:!0},[eK.NO_SERVICE_AVAILABLE_WEBRTC]:{desc:"no unilbs webrtc service available",retry:!0},[eK.NO_SERVICE_AVAILABLE_CDS]:{desc:"no cds service available",retry:!0},[eK.NO_SERVICE_AVAILABLE_CDN]:{desc:"no cdn dispatcher service available",retry:!0},[eK.NO_SERVICE_AVAILABLE_TDS]:{desc:"no tds service available",retry:!0},[eK.NO_SERVICE_AVAILABLE_REPORT]:{desc:"no unilbs report service available",retry:!0},[eK.NO_SERVICE_AVAILABLE_APP_CENTER]:{desc:"no app center service available",retry:!0},[eK.NO_SERVICE_AVAILABLE_ENV0]:{desc:"no unilbs sig env0 service available",retry:!0},[eK.NO_SERVICE_AVAILABLE_VOET]:{desc:"no unilbs voet service available",retry:!0},[eK.NO_SERVICE_AVAILABLE_STRING_UID]:{desc:"no string uid service available",retry:!0},[eK.NO_SERVICE_AVAILABLE_WEBRTC_UNILBS]:{desc:"no webrtc unilbs service available",retry:!0}},[QW.UNILBS]:{[ZW.INVALID_VENDOR_KEY]:{desc:"invalid vendor key, can not find appid",retry:!1},[ZW.INVALID_CHANNEL_NAME]:{desc:"invalid channel name",retry:!1},[ZW.INTERNAL_ERROR]:{desc:"unilbs internal error",retry:!1},[ZW.NO_AUTHORIZED]:{desc:"invalid token, authorized failed",retry:!1},[ZW.DYNAMIC_KEY_TIMEOUT]:{desc:"dynamic key or token timeout",retry:!1},[ZW.NO_ACTIVE_STATUS]:{desc:"no active status",retry:!1},[ZW.DYNAMIC_KEY_EXPIRED]:{desc:"dynamic key expired",retry:!1},[ZW.STATIC_USE_DYNAMIC_KEY]:{desc:"static use dynamic key",retry:!1},[ZW.DYNAMIC_USE_STATIC_KEY]:{desc:"dynamic use static key",retry:!1},[ZW.USER_OVERLOAD]:{desc:"amount of users over load",retry:!1},[ZW.FORBIDDEN_REGION]:{desc:"the request is forbidden in this area",retry:!1},[ZW.CANNOT_MEET_AREA_DEMAND]:{desc:"unable to allocate services in this area",retry:!1}},[QW.STRING_UID_ALLOCATOR]:{[$W.IIIEGAL_APPID]:{desc:"invalid appid",retry:!1},[$W.IIIEGAL_UID]:{desc:"invalid string uid",retry:!1},[$W.INTERNAL_ERROR]:{desc:"string uid allocator internal error",retry:!0}}};function ez(e){const t=ZK[Math.floor(e/1e4)];if(!t)return{desc:"unknown error",retry:!1};const n=t[e%1e4];if(!n){if(Math.floor(e/1e4)===QW.ACCESS_POINT){const t=e%1e4;if("1"===t.toString()[0])return{desc:e.toString(),retry:!1};if("2"===t.toString()[0])return{desc:e.toString(),retry:!0}}return{desc:"unknown error",retry:!1}}return n}const tz={[tK.K_TIMESTAMP_EXPIRED]:{desc:"K_TIMESTAMP_EXPIRED",action:"failed"},[tK.K_CHANNEL_PERMISSION_INVALID]:{desc:"K_CHANNEL_PERMISSION_INVALID",action:"failed"},[tK.K_CERTIFICATE_INVALID]:{desc:"K_CERTIFICATE_INVALID",action:"failed"},[tK.K_CHANNEL_NAME_EMPTY]:{desc:"K_CHANNEL_NAME_EMPTY",action:"failed"},[tK.K_CHANNEL_NOT_FOUND]:{desc:"K_CHANNEL_NOT_FOUND",action:"failed"},[tK.K_TICKET_INVALID]:{desc:"K_TICKET_INVALID",action:"failed"},[tK.K_CHANNEL_CONFLICTED]:{desc:"K_CHANNEL_CONFLICTED",action:"failed"},[tK.K_SERVICE_NOT_READY]:{desc:"K_SERVICE_NOT_READY",action:"tryNext"},[tK.K_SERVICE_TOO_HEAVY]:{desc:"K_SERVICE_TOO_HEAVY",action:"tryNext"},[tK.K_UID_BANNED]:{desc:"K_UID_BANNED",action:"failed"},[tK.K_IP_BANNED]:{desc:"K_IP_BANNED",action:"failed"},[tK.K_AUTO_REBALANCE]:{desc:"k_AUTO_REBALANCE",action:"recover"},[tK.ERR_INVALID_VENDOR_KEY]:{desc:"ERR_INVALID_VENDOR_KEY",action:"failed"},[tK.ERR_INVALID_CHANNEL_NAME]:{desc:"ERR_INVALID_CHANNEL_NAME",action:"failed"},[tK.WARN_NO_AVAILABLE_CHANNEL]:{desc:"WARN_NO_AVAILABLE_CHANNEL",action:"failed"},[tK.WARN_LOOKUP_CHANNEL_TIMEOUT]:{desc:"WARN_LOOKUP_CHANNEL_TIMEOUT",action:"tryNext"},[tK.WARN_LOOKUP_CHANNEL_REJECTED]:{desc:"WARN_LOOKUP_CHANNEL_REJECTED",action:"failed"},[tK.WARN_OPEN_CHANNEL_TIMEOUT]:{desc:"WARN_OPEN_CHANNEL_TIMEOUT",action:"tryNext"},[tK.WARN_OPEN_CHANNEL_REJECTED]:{desc:"WARN_OPEN_CHANNEL_REJECTED",action:"failed"},[tK.WARN_REQUEST_DEFERRED]:{desc:"WARN_REQUEST_DEFERRED",action:"failed"},[tK.ERR_DYNAMIC_KEY_TIMEOUT]:{desc:"ERR_DYNAMIC_KEY_TIMEOUT",action:"failed"},[tK.ERR_NO_AUTHORIZED]:{desc:"ERR_NO_AUTHORIZED",action:"failed"},[tK.ERR_VOM_SERVICE_UNAVAILABLE]:{desc:"ERR_VOM_SERVICE_UNAVAILABLE",action:"tryNext"},[tK.ERR_NO_CHANNEL_AVAILABLE_CODE]:{desc:"ERR_NO_CHANNEL_AVAILABLE_CODE",action:"failed"},[tK.ERR_MASTER_VOCS_UNAVAILABLE]:{desc:"ERR_MASTER_VOCS_UNAVAILABLE",action:"tryNext"},[tK.ERR_INTERNAL_ERROR]:{desc:"ERR_INTERNAL_ERROR",action:"tryNext"},[tK.ERR_NO_ACTIVE_STATUS]:{desc:"ERR_NO_ACTIVE_STATUS",action:"failed"},[tK.ERR_INVALID_UID]:{desc:"ERR_INVALID_UID",action:"failed"},[tK.ERR_DYNAMIC_KEY_EXPIRED]:{desc:"ERR_DYNAMIC_KEY_EXPIRED",action:"failed"},[tK.ERR_STATIC_USE_DYANMIC_KE]:{desc:"ERR_STATIC_USE_DYANMIC_KE",action:"failed"},[tK.ERR_DYNAMIC_USE_STATIC_KE]:{desc:"ERR_DYNAMIC_USE_STATIC_KE",action:"failed"},[tK.ERR_NO_VOCS_AVAILABLE]:{desc:"ERR_NO_VOCS_AVAILABLE",action:"tryNext"},[tK.ERR_NO_VOS_AVAILABLE]:{desc:"ERR_NO_VOS_AVAILABLE",action:"tryNext"},[tK.ERR_JOIN_CHANNEL_TIMEOUT]:{desc:"ERR_JOIN_CHANNEL_TIMEOUT",action:"tryNext"},[tK.ERR_JOIN_BY_MULTI_IP]:{desc:"ERR_JOIN_BY_MULTI_IP",action:"recover"},[tK.ERR_NOT_JOINED]:{desc:"ERR_NOT_JOINED",action:"failed"},[tK.ERR_REPEAT_JOIN_REQUEST]:{desc:"ERR_REPEAT_JOIN_REQUEST",action:"quit"},[tK.ERR_REPEAT_JOIN_CHANNEL]:{desc:"ERR_REPEAT_JOIN_CHANNEL",action:"quit"},[tK.ERR_INVALID_STRINGUID]:{desc:"ERR_INVALID_STRINGUID",action:"failed"},[tK.ERR_TOO_MANY_USERS]:{desc:"ERR_TOO_MANY_USERS",action:"tryNext"},[tK.ERR_SET_CLIENT_ROLE_TIMEOUT]:{desc:"ERR_SET_CLIENT_ROLE_TIMEOUT",action:"failed"},[tK.ERR_SET_CLIENT_ROLE_NO_PERMISSION]:{desc:"ERR_SET_CLIENT_ROLE_TIMEOUT",action:"failed"},[tK.ERR_SET_CLIENT_ROLE_ALREADY_IN_USE]:{desc:"ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",action:"success"},[tK.ERR_PUBLISH_REQUEST_INVALID]:{desc:"ERR_PUBLISH_REQUEST_INVALID",action:"failed"},[tK.ERR_SUBSCRIBE_REQUEST_INVALID]:{desc:"ERR_SUBSCRIBE_REQUEST_INVALID",action:"failed"},[tK.ERR_NOT_SUPPORTED_MESSAGE]:{desc:"ERR_NOT_SUPPORTED_MESSAGE",action:"failed"},[tK.ERR_ILLEAGAL_PLUGIN]:{desc:"ERR_ILLEAGAL_PLUGIN",action:"failed"},[tK.ILLEGAL_CLIENT_ROLE_LEVEL]:{desc:"ILLEGAL_CLIENT_ROLE_LEVEL",action:"failed"},[tK.ERR_REJOIN_TOKEN_INVALID]:{desc:"ERR_REJOIN_TOKEN_INVALID",action:"failed"},[tK.ERR_REJOIN_USER_NOT_JOINED]:{desc:"ERR_REJOIN_NOT_JOINED",action:"failed"},[tK.ERR_INVALID_OPTIONAL_INFO]:{desc:"ERR_INVALID_OPTIONAL_INFO",action:"quit"},[tK.ERR_TEST_RECOVER]:{desc:"ERR_TEST_RECOVER",action:"recover"},[tK.ERR_TEST_TRYNEXT]:{desc:"ERR_TEST_TRYNEXT",action:"recover"},[tK.ERR_TEST_RETRY]:{desc:"ERR_TEST_RETRY",action:"recover"},[tK.ILLEGAL_AES_PASSWORD]:{desc:"ERR_TEST_RETRY",action:"failed"},[tK.ERR_TOO_MANY_BROADCASTERS]:{desc:"ERR_TOO_MANY_BROADCASTERS",action:"failed"},[tK.ERR_TOO_MANY_SUBSCRIBERS]:{desc:"ERR_TOO_MANY_SUBSCRIBERS",action:"failed"},[tK.ERR_LICENSE_ILLEGAL]:{desc:"ERR_LICENSE_ILLEGAL",action:"quit"},[tK.ERR_LICENSE_MISSING]:{desc:"ERR_LICENSE_MISSING",action:"quit"},[tK.ERR_LICENSE_EXPIRED]:{desc:"ERR_LICENSE_EXPIRED",action:"quit"},[tK.ERR_LICENSE_MINUTES_EXCEEDED]:{desc:"ERR_LICENSE_MINUTES_EXCEEDED",action:"quit"},[tK.ERR_LICENSE_PERIOD_INVALID]:{desc:"ERR_LICENSE_PERIOD_INVALID",action:"quit"},[tK.ERR_LICENSE_MULTIPLE_SDK_SERVICE]:{desc:"ERR_LICENSE_MULTIPLE_SDK_SERVICE",action:"quit"}};function nz(e){return tz[e]||{desc:"UNKNOWN_ERROR_".concat(e),action:"failed"}}function rz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function iz(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rz(Object(n),!0).forEach((function(t){SU(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rz(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function oz(e){return e.every((e=>e.readyState===WebSocket.CLOSED||e.readyState===WebSocket.CLOSING))}function sz(e,t){if("string"==typeof e)return e;const{proxy:n,host:r,port:i}=e;if(t){const e=AH("JOIN_GATEWAY_FALLBACK_PORT")||443;return 443===e?"wss://".concat(r,"/ws/?p=").concat(Number(i)+150):"wss://".concat(r,":").concat(e,"/ws/?p=").concat(Number(i)+150)}return n?"wss://".concat(n,"/ws/?h=").concat(r,"&p=").concat(i):"wss://".concat(r,":").concat(i)}const az=/wss:\/\/(.+)\/ws\/\?h=(.+)&p=([0-9]+)\/?/,cz=/wss:\/\/(.+)\/ws\/\?p=([0-9]+)\/?/,dz=/wss:\/\/(.+):([0-9]+)\/?/,lz=/wss:\/\/(.[^\/]+)\/?/;let hz=0;class uz{constructor(e,t){SU(this,"id",0),SU(this,"store",void 0),SU(this,"recordIndex",void 0),SU(this,"websockets",[]),SU(this,"try443PortDuration",2e3),SU(this,"forceCloseWSDuration",5e3),SU(this,"try443PortTimeout",null),SU(this,"forceCloseTimeout",null),SU(this,"isTry443PortFailed",!1),SU(this,"isNormalPortFailed",!1),SU(this,"useDoubleDomain",!1),SU(this,"useProxy",!1),SU(this,"startTime",Date.now()),this.id=++hz,this.try443PortDuration=AH("JOIN_GATEWAY_TRY_443PORT_DURATION")||2e3,this.forceCloseWSDuration=e||5e3,this.store=t}closeAllWebsockets(){this.websockets.forEach((e=>{e.onopen=null,e.onclose=null,e.onmessage=null,e.close()})),this.websockets.length=0}clearTimeout(){this.forceCloseTimeout&&clearTimeout(this.forceCloseTimeout),this.try443PortTimeout&&clearTimeout(this.try443PortTimeout)}logger(){var e;const t=Date.now()-this.startTime;for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];KH.debug("[choose-best-ws ".concat(null===(e=this.store)||void 0===e?void 0:e.clientId," ").concat(this.id,"] ").concat(t,"ms:"),...r)}createWebSocket(e,t,n){this.logger("createWebSocket:",e,{isTry443Port:t,hasTimeoutDetection:n});const r=AH("GATEWAY_DOMAINS"),i=Date.now(),o=[],s=r.find((t=>{var n;return Fv(n=e.host).call(n,t)}));s||(this.useDoubleDomain=!1);const a=[];if(this.useDoubleDomain)r.forEach((n=>{a.push(sz(iz(iz({},e),{},{host:e.host.replace(s,n)}),t))}));else{const n=iz({},e);if(t&&s){const e=r.find((e=>e!==s));e&&(n.host=n.host.replace(s,e))}a.push(sz(n,t))}try{a.forEach((e=>{const t=new WebSocket(e);t.binaryType="arraybuffer",o.push(t),this.logger("ws is connecting:",t.url)}))}catch(r){if(this.logger("ws create failed"),o.forEach((e=>e.close())),o.length=0,this.useDoubleDomain)return this.useDoubleDomain=!1,this.createWebSocket(e,t,n);if(!t&&443!==Number(e.port))return this.createWebSocket(e,!0,n);throw new eW(ZB.WS_ERR,"init websocket failed! Error: ".concat(r.toString()))}const c=pB();return this.store&&this.store.recordJoinChannelService({urls:o.map((e=>e.url)),service:"gateway"},this.recordIndex),o.forEach((e=>{e.onopen=()=>{this.logger("onopen: ws ".concat(e.url," open cost ").concat(Date.now()-i,"ms")),this.websockets.forEach((t=>{t!==e&&(t.onopen=null,t.onclose=null,t.onmessage=null,t.close(),this.logger("close backup websocket: ".concat(t.url)))})),this.websockets.length=0,c.resolve(e)},e.onclose=n=>{this.logger("onclose: ws ".concat(e.url," closed cost ").concat(Date.now()-i,"ms state: ").concat(e.readyState)),t?this.isTry443PortFailed=oz(o):this.isNormalPortFailed=oz(o),this.logger("443: ".concat(this.useProxy?"not try":this.isTry443PortFailed?"failed":"trying"," 47xx: ").concat(this.isNormalPortFailed?"failed":"trying")),(t&&this.isTry443PortFailed||!t&&(this.isTry443PortFailed||this.useProxy)&&this.isNormalPortFailed)&&(this.logger("onclose: all websocket is closed, ".concat(n.reason)),c.reject({code:n.code,reason:wK.A_ROUND_WS_FAILED}))},e.onmessage=t=>this.logger("".concat(e.url," onmessage: ").concat(t.data))})),this.websockets.push(...o),n||(()=>{const n=()=>{this.logger("5s timeout close un-opens, isWebsocket created: ",c.isResolved),this.websockets.forEach((e=>e.readyState!==WebSocket.OPEN&&e.close()))};if(t||this.useProxy)return this.logger("add 5s timeout at ".concat(t?"try-443":"proxy"," condition")),this.forceCloseTimeout=window.setTimeout(n,this.forceCloseWSDuration);this.try443PortTimeout=window.setTimeout((()=>{if(this.logger("2s timeout, isWebsocket created: ",c.isResolved),c.isResolved)return n();SB().os===_B.MAC_OS&&xB()&&n(),this.createWebSocket(e,!0,!0).then((e=>c.resolve(e))).catch((e=>{this.isNormalPortFailed&&c.reject(e),this.logger("try 443 port to create ws failed")})),this.forceCloseTimeout=window.setTimeout(n,this.forceCloseWSDuration)}),this.try443PortDuration)})(),c.promise}chooseBestWebsocket(e,t,n,r){return this.useDoubleDomain=!!t,"string"==typeof e&&(e=function(e){let t,n,r;return[,t,n,r]=e.match(az)||[],t||([,n,r]=e.match(cz)||[]),n&&r||([,n,r]=e.match(dz)||[]),n&&r||([,n]=e.match(lz)||[]),n||KH.warning("un-destructible url: ",e),{proxy:t,host:n,port:r||"443"}}(e)),this.recordIndex=r,this.useProxy=!!e.proxy,n&&this.useProxy&&(KH.warn("cannot use 443 only when use proxy"),n=!1),this.createWebSocket(e,!!n,!1).finally((()=>this.clearTimeout()))}}function pz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}class fz extends mG{get url(){return this.websocket&&this.websocket.url||null}get reconnectMode(){return this._reconnectMode}set reconnectMode(e){var t;Fv(t=["tryNext","recover"]).call(t,e)&&this.resetReconnectCount(e),this._reconnectMode=e}get state(){return this._state}set state(e){e!==this._state&&(this._state=e,"reconnecting"===this._state?this.emit(cK.RECONNECTING,this.reconnectReason):"connected"===this._state?this.emit(cK.CONNECTED):"closed"===this._state?this.emit(cK.CLOSED):"failed"===this._state&&this.emit(cK.FAILED))}resetReconnectCount(e){KH.debug("websocket reset reconnect count, reason: "+e),this.reconnectCount=0}constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5?arguments[5]:void 0;super(),SU(this,"connectionID",0),SU(this,"currentURLIndex",0),SU(this,"urls",[]),SU(this,"_reconnectMode","tryNext"),SU(this,"reconnectReason",void 0),SU(this,"_initMutex",new cH("websocket")),SU(this,"name",void 0),SU(this,"_state","closed"),SU(this,"reconnectInterrupter",void 0),SU(this,"websocket",void 0),SU(this,"retryConfig",void 0),SU(this,"reconnectCount",0),SU(this,"forceCloseTimeout",5e3),SU(this,"onlineReconnectListener",void 0),SU(this,"useCompress",void 0),SU(this,"tryDoubleDomain",!1),SU(this,"use443PortOnly",!1),SU(this,"wsInflateLength",0),SU(this,"wsDeflateLength",0),SU(this,"closeEstablishingWs",(()=>{})),SU(this,"store",void 0),SU(this,"joinGatewayRecordIndex",void 0),this.store=o,this.name=e,this.retryConfig=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pz(Object(n),!0).forEach((function(t){SU(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pz(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t),this.useCompress=n,this.tryDoubleDomain=r,this.use443PortOnly=i;const{timeout:s,timeoutFactor:a}=t,c=Math.max(300,Math.floor(3*s/5)),d=Math.max(1.2,Math.floor(8*a)/10);AG.ONLINE&&(this.retryConfig.timeout=c,this.retryConfig.timeoutFactor=d),LG.on(OG.NETWORK_STATE_CHANGE,((e,t)=>{e!==t&&(this.resetReconnectCount("network state change: ".concat(t," -> ").concat(e)),e===AG.ONLINE?(this.retryConfig.timeout=c,this.retryConfig.timeoutFactor=d):(this.retryConfig.timeout=s,this.retryConfig.timeoutFactor=a))}))}getConnection(){return this.websocket||void 0}async init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;const n=await this._initMutex.lock();this.forceCloseTimeout=t,this.urls=e,this.state="connecting";try{const e=pB(),t=this.urls[this.currentURLIndex];AH("ENABLE_PREALLOC_PC")&&this.emit(WK.PRE_CONNECT_PC),this.createWebSocketConnection(t).then(e.resolve).catch(e.reject),this.once(cK.CLOSED,(()=>{e.reject(new eG(ZB.WS_DISCONNECT))})),this.once(cK.CONNECTED,e.resolve),await e.promise}catch(e){}finally{n()}}close(e,t){if(this.currentURLIndex=0,this.resetReconnectCount("close"),this.reconnectInterrupter&&this.reconnectInterrupter(),this.websocket){this.websocket.onclose=null,this.websocket.onopen=null,this.websocket.onmessage=null;const e=this.websocket;t?setTimeout((()=>e.close()),500):e.close(),this.websocket=void 0}this.state=e?"failed":"closed",this.closeEstablishingWs&&this.closeEstablishingWs()}reconnect(e,t){if(!this.websocket)return void KH.warning("[".concat(this.name,"] can not reconnect, no websocket"));void 0!==e&&(this.reconnectMode=e),KH.debug("[".concat(this.name,"] reconnect is triggered initiative")),"number"==typeof this.joinGatewayRecordIndex&&this.store&&this.store.recordJoinChannelService({status:"error",errors:[new Error(t)]},this.joinGatewayRecordIndex);const n=this.websocket.onclose;this.websocket.onclose=null,this.websocket.close(),n&&n.bind(this.websocket)({code:9999,reason:t})}sendMessage(e){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this.websocket||this.websocket.readyState!==WebSocket.OPEN)throw new eG(ZB.WS_ABORT,"websocket is not ready");try{t||(e=JSON.stringify(e)),this.websocket.send(e)}catch(e){throw new eG(ZB.WS_ERR,"send websocket message error"+e.toString())}}setWsInflateData(e){this.wsDeflateLength=this.wsDeflateLength+e.originLength,this.wsInflateLength=this.wsInflateLength+e.compressedLength}getWsInflateData(){const e=this.wsInflateLength,t=this.wsDeflateLength;return this.clearWsInflateData(),{wsInflateLength:e,wsDeflateLength:t}}clearWsInflateData(){this.wsInflateLength=0,this.wsDeflateLength=0}async createWebSocketConnection(e){var t;const n=pB();this.connectionID+=1,this.joinGatewayRecordIndex=void 0;const r=e=>{var t;null===(t=this.store)||void 0===t||t.signalChannelOpen(),KH.debug("[".concat(this.name,"] websocket opened:"),e),this.reconnectMode="retry",this.state="connected",this.resetReconnectCount("opened"),n.resolve()},i=async e=>{var t;if(KH.debug("[".concat(this.name,"] websocket close ").concat(null===(t=this.websocket)||void 0===t?void 0:t.url,", code: ").concat(e.code,", reason: ").concat(e.reason,", current mode: ").concat(this.reconnectMode)),this.reconnectCount>=this.retryConfig.maxRetryCount)n.reject(new eG(ZB.WS_DISCONNECT,"websocket close: ".concat(e.code))),this.close();else{"connected"===this.state&&(this.reconnectReason=e.reason,this.state="reconnecting");const t=PG(this,cK.WILL_RECONNECT,this.reconnectMode,e.reason)||this.reconnectMode,r=await this.reconnectWithAction(t);if("closed"===this.state)return void KH.debug("[".concat(this.connectionID,"] ws is closed, no need to reconnect"));if(!r)return n.reject(new eG(ZB.WS_DISCONNECT,"websocket reconnect failed: ".concat(e.code))),this.close(!0);n.resolve()}},o=e=>{this.emit(cK.ON_MESSAGE,e)},s=e=>{KH.warn("[".concat(this.connectionID,"] ws open error ").concat(e))};this.websocket&&(this.websocket.onclose=null,this.websocket.close()),AH("GATEWAY_WSS_ADDRESS")&&this.name.startsWith("gateway")&&(e=AH("GATEWAY_WSS_ADDRESS")),KH.debug("[".concat(this.name,"] start connect, url:"),e);const a=null===(t=this.store)||void 0===t?void 0:t.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"gateway"});try{var c;const t=await this.chooseBestWebsocketConnection(e);this.websocket=t,r&&r(this.websocket.url),this.websocket.onclose=i,this.websocket.onmessage=o,this.websocket.onerror=s,null===(c=this.store)||void 0===c||c.recordJoinChannelService({endTs:Date.now(),status:"success"},a),this.joinGatewayRecordIndex=a}catch(e){const t="closed"===this.state,r=e instanceof eG,o=r&&e.code===ZB.WS_ABORT,s=r&&e.code===ZB.WS_ERR,c=r?e.message:e&&(e.reason||e.toString());KH.warning("[choose-best-ws] chooseBestWebsocket error: ".concat(c)),this.store&&this.store.recordJoinChannelService({endTs:Date.now(),status:o?"aborted":"error",errors:[e]},a),t||s?(n.reject(t?new eG(ZB.WS_DISCONNECT,"websocket is closed: ".concat(c)):new eG(ZB.WS_ERR,"init websocket failed: ".concat(c))),s&&KH.error("[".concat(this.name,"] init websocket failed: ").concat(c))):i&&i(e)}return n.promise}async reconnectWithAction(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.reconnectCount>=this.retryConfig.maxRetryCount)return!1;if(0===this.urls.length)return!1;if("closed"===this.state)return!1;KH.warning("[choose-best-ws] action: =>",e),this.onlineReconnectListener||LG.isOnline||!LG.onlineWaiter||(this.onlineReconnectListener=LG.onlineWaiter.then((()=>{this.onlineReconnectListener=void 0})));let n=!0;if(this.reconnectInterrupter=()=>n=!1,t){const t=hH(this.reconnectCount,this.retryConfig);KH.debug("[".concat(this.name,"] wait ").concat(t,"ms to reconnect websocket, mode: ").concat(e)),await LO.race([JG(t),this.onlineReconnectListener||new LO((()=>{}))])}if("closed"===this._state||!n)return!1;this.reconnectCount+=1;const r=async(e,t)=>{this.emit(cK.RECONNECT_CREATE_CONNECTION,t),await this.createWebSocketConnection(e)};try{if("retry"===e)this.emit(cK.RECONNECT_WAITTING_FINISH,e),await r(this.urls[this.currentURLIndex],e);else if("tryNext"===e){if(this.currentURLIndex+=1,this.currentURLIndex>=this.urls.length)return this.reconnectWithAction("recover",!1);KH.debug("[".concat(this.name,"] websocket url length: ").concat(this.urls.length," current index: ").concat(this.currentURLIndex)),this.emit(cK.RECONNECT_WAITTING_FINISH,e),await r(this.urls[this.currentURLIndex],e)}else"recover"===e&&(KH.debug("[".concat(this.name,"] request new urls")),this.resetReconnectCount("recover mode"),this.emit(cK.RECONNECT_WAITTING_FINISH,e),this.urls=await xG(this,cK.REQUEST_NEW_URLS),this.currentURLIndex=0,await r(this.urls[this.currentURLIndex],e))}catch(n){var i;KH.error("[".concat(this.name,"] reconnect failed ").concat(n&&n.toString()));const r=null==n||null===(i=n.data)||void 0===i?void 0:i.desc;return Array.isArray(r)&&Fv(r).call(r,"dynamic key expired")?(this.emit(cK.ON_TOKEN_PRIVILEGE_DID_EXPIRE),!1):this.reconnectWithAction(e,t)}return!0}}class mz extends fz{constructor(e,t){super(e,t,arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4],arguments.length>5?arguments[5]:void 0)}async chooseBestWebsocketConnection(e,t){const n=pB(),r=function(e,t){return new uz(e,t)}(this.forceCloseTimeout,this.store);this.closeEstablishingWs=()=>{KH.debug("[choose-best-ws] close establishing websockets"),r.closeAllWebsockets(),n.reject(new eG(ZB.WS_ABORT,"choose best websocket aborted"))};const i=AH("GATEWAY_DOMAINS");return KH.debug("[choose-best-ws] currentDomain: ",e,", domains: ",i,"total: ".concat(this.urls.length),"current: ".concat(this.currentURLIndex+1)),r.chooseBestWebsocket(e,this.tryDoubleDomain,this.use443PortOnly,t).then(n.resolve).catch(n.reject),n.promise.finally((()=>{this.closeEstablishingWs=void 0}))}}class gz extends fz{constructor(e,t){super(e,t,arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4],arguments.length>5?arguments[5]:void 0)}async chooseBestWebsocketConnection(e,t){return new LO(((n,r)=>{let i=!1;const o=[];this.closeEstablishingWs=()=>{KH.debug("[choose-best-ws] close establishing websockets"),o.forEach((e=>{e.onclose=null,e.onopen=null,e.onmessage=null,e.close()})),r(new eG(ZB.WS_ABORT,"choose best websocket aborted"))};const s=AH("GATEWAY_DOMAINS");let a;const c=e.indexOf("?h="),d=s.find((t=>-1!==c?Fv(e).call(e,t,c):Fv(e).call(e,t)));KH.debug("[choose-best-ws] currentDomain: ",d,", domains: ",s);let l=!this.tryDoubleDomain||!d;if(!l&&d){var h;const u=Date.now();try{s.forEach((t=>{const n=-1===c?e.replace(d,t):e.substr(0,c)+e.substr(c).replace(d,t),r=new WebSocket(n);r.binaryType="arraybuffer",o.push(r),KH.debug("[choose-best-ws] ws is connecting:",r.url)}))}catch(e){for(KH.debug("[choose-best-ws] ws create failed, fallback to single url"),o.forEach((e=>e.close()));o.length;)o.pop();l=!0}null===(h=this.store)||void 0===h||h.recordJoinChannelService({urls:o.map((e=>e.url)),service:"gateway"},t),o.forEach((e=>{e.onopen=()=>{if(i)return;const t=Date.now()-u;KH.debug("[choose-best-ws] ws open cost ".concat(t,"ms")),o.filter((t=>t!==e)).forEach((e=>{KH.debug("[choose-best-ws]close backup websocket: ".concat(e.url)),e.close()})),i=!0,n(e)},e.onclose=e=>{a=e,i||o.find((e=>!(e.readyState===WebSocket.CLOSED||e.readyState===WebSocket.CLOSING)))||(KH.debug("[choose-best-ws] all websocket is closed"),i=!0,r(a))},e.onmessage=t=>{KH.debug("[choose-best-ws]".concat(e.url," onmessage: ").concat(t.data))}})),JG(this.forceCloseTimeout).then((()=>{o.forEach((e=>{e.readyState!==WebSocket.OPEN&&e.close()}))}))}if(l){var u;let i;KH.debug("[choose-best-ws] use single url: ",e),null===(u=this.store)||void 0===u||u.recordJoinChannelService({urls:[e],service:"gateway"},t);try{i=new WebSocket(e),o.push(i),i.binaryType="arraybuffer"}catch(e){const t=new eG(ZB.WS_ERR,"init websocket failed! Error: ".concat(e.toString()));return KH.error("[".concat(this.name,"]").concat(t)),void r(t)}i.onopen=()=>{n(i)},i.onclose=e=>{r(e)},i.onmessage=e=>{KH.debug("[choose-best-ws]".concat(i.url," onmessage: ").concat(e.data))},JG(this.forceCloseTimeout).then((()=>{i&&i.readyState!==WebSocket.OPEN&&i.close()}))}})).then((e=>(this.closeEstablishingWs=void 0,e))).catch((e=>{throw this.closeEstablishingWs=void 0,e}))}}class _z extends mG{get connectionState(){return this._connectionState}set connectionState(e){e!==this._connectionState&&(this._connectionState=e,e===nK.CONNECTED?this.emit(rK.WS_CONNECTED):e===nK.RECONNECTING?this.emit(rK.WS_RECONNECTING,this._websocketReconnectReason):e===nK.CLOSED&&this.emit(rK.WS_CLOSED,this._disconnectedReason))}get currentURLIndex(){return this.websocket.currentURLIndex}get url(){return this.websocket&&this.websocket.url||null}get rtt(){return this.rttRolling.mean()}constructor(e,t){super(),SU(this,"_disconnectedReason",void 0),SU(this,"_websocketReconnectReason",void 0),SU(this,"_connectionState",nK.CLOSED),SU(this,"reconnectToken",void 0),SU(this,"websocket",void 0),SU(this,"openConnectionTime",void 0),SU(this,"clientId",void 0),SU(this,"lastMsgTime",Date.now()),SU(this,"uploadCache",[]),SU(this,"uploadCacheInterval",void 0),SU(this,"rttRolling",new pH(5)),SU(this,"pingpongTimer",void 0),SU(this,"wsInflateDataTimer",void 0),SU(this,"pingpongTimeoutCount",0),SU(this,"joinResponse",void 0),SU(this,"multiIpOption",void 0),SU(this,"initError",void 0),SU(this,"spec",void 0),SU(this,"store",void 0),SU(this,"onWebsocketMessage",(e=>{if(e.data instanceof ArrayBuffer)return void this.emit(rK.ON_BINARY_DATA,e.data);const t=JSON.parse(e.data);if(this.lastMsgTime=Date.now(),Object.prototype.hasOwnProperty.call(t,"_id")){const e="res-@".concat(t._id);this.emit(e,t._result,t._message)}else if(Object.prototype.hasOwnProperty.call(t,"_type")){if(this.emit(t._type,t._message),t._type===sK.ON_NOTIFICATION&&this.handleNotification(t._message),t._type===sK.ON_USER_BANNED)switch(t._message.error_code){case 14:this.close(SG.UID_BANNED);break;case 15:this.close(SG.IP_BANNED);break;case 16:this.close(SG.CHANNEL_BANNED)}if(t._type===sK.ON_USER_LICENSE_BANNED)switch(t._message.error_code){case tK.ERR_LICENSE_MISSING:this.close(SG.LICENSE_MISSING);break;case tK.ERR_LICENSE_EXPIRED:this.close(SG.LICENSE_EXPIRED);break;case tK.ERR_LICENSE_MINUTES_EXCEEDED:this.close(SG.LICENSE_MINUTES_EXCEEDED);break;case tK.ERR_LICENSE_PERIOD_INVALID:this.close(SG.LICENSE_PERIOD_INVALID);break;case tK.ERR_LICENSE_MULTIPLE_SDK_SERVICE:this.close(SG.LICENSE_MULTIPLE_SDK_SERVICE);break;case tK.ERR_LICENSE_ILLEGAL:this.close(SG.LICENSE_ILLEGAL);break;default:this.close()}}})),this.clientId=e.clientId,this.spec=e,this.store=t,this.websocket=new mz("gateway-".concat(this.clientId),this.spec.retryConfig,!0,AH("JOIN_GATEWAY_USE_DUAL_DOMAIN"),AH("JOIN_GATEWAY_USE_443PORT_ONLY"),t),this.handleWebsocketEvents(),window.addEventListener("offline",(()=>{this.connectionState===nK.CONNECTED&&this.reconnect("retry",IG.OFFLINE)}))}async request(e,t,n,r){const i=XG(6,""),o={_id:i,_type:e,_message:t},s=this.websocket.connectionID,a=()=>new LO(((t,n)=>{if(this.connectionState===nK.CONNECTED)return t();const r=()=>{this.off(rK.WS_CLOSED,i),t()},i=()=>{this.off(rK.WS_CONNECTED,r),n(new eW(ZB.WS_ABORT))};this.once(rK.WS_CONNECTED,r),this.once(rK.WS_CLOSED,i),e!==iK.PUBLISH&&e!==iK.PUBLISH_DATASTREAM&&e!==iK.SUBSCRIBE&&e!==iK.SUBSCRIBE_DATASTREAM&&e!==iK.UNSUBSCRIBE&&e!==iK.UNSUBSCRIBE_DATASTREAM&&e!==iK.UNPUBLISH&&e!==iK.UNPUBLISH_DATASTREAM&&e!==iK.CONTROL&&e!==iK.RESTART_ICE||this.once(rK.DISCONNECT_P2P,(()=>{n(new eW(ZB.DISCONNECT_P2P))})),e!==iK.PUBLISH&&e!==iK.RESTART_ICE||this.once(rK.ABORT_P2P_EXECUTION,(()=>{n(new eW(ZB.DISCONNECT_P2P))}))}));if(this.connectionState!==nK.CONNECTING&&this.connectionState!==nK.RECONNECTING||e===iK.JOIN||e===iK.REJOIN||await a(),this.websocket.sendMessage(o,!0),r)return;const c=new LO(((n,r)=>{let o=!1;const a=(r,i)=>{o=!0,n({isSuccess:"success"===r,message:i||{}}),this.off(rK.WS_CLOSED,c),this.off(rK.WS_RECONNECTING,c),this.emit(rK.REQUEST_SUCCESS,e,t)};this.once("res-@".concat(i),a);const c=()=>{r(new eW(ZB.WS_ABORT,"type: ".concat(e))),this.off(rK.WS_CLOSED,c),this.off(rK.WS_RECONNECTING,c),this.off("res-@".concat(i),a)};this.once(rK.WS_CLOSED,c),this.once(rK.WS_RECONNECTING,c),JG(AH("SIGNAL_REQUEST_TIMEOUT")).then((()=>{this.websocket.connectionID!==s||o||(KH.warning("[".concat(this.clientId,"] ws request timeout, type: ").concat(e)),this.emit(rK.REQUEST_TIMEOUT,e,t))}))}));let d=null;try{d=await c}catch(r){if(this.connectionState===nK.CLOSED||e===iK.LEAVE)throw new eW(ZB.WS_ABORT);return!this.spec.forceWaitGatewayResponse||n?r.throw():e===iK.JOIN||e===iK.REJOIN?null:(await a(),await this.request(e,t))}if(d.isSuccess)return d.message;const l=Number(d.message.error_code||d.message.code),h=nz(l),u=new eW(ZB.UNEXPECTED_RESPONSE,"".concat(h.desc,": ").concat(d.message.error_str),{code:l,data:d.message,desc:h.desc});return"success"===h.action?d.message:(KH.warning("[".concat(this.clientId,"] [").concat(this.websocket.connectionID,"] unexpected response from type ").concat(e,", error_code: ").concat(l,", message: ").concat(h.desc,", action: ").concat(h.action)),l===tK.ERR_TOO_MANY_BROADCASTERS?e===iK.JOIN||e===iK.REJOIN?(this.initError=u,this.close(),u.throw()):u.throw():"failed"===h.action?u.throw():"quit"===h.action?(this.initError=u,this.close(),u.throw()):(l===tK.ERR_JOIN_BY_MULTI_IP?(this.multiIpOption=d.message.option,KH.warning("[".concat(this.clientId,"] detect multi ip, recover")),this.reconnect("recover",IG.MULTI_IP)):this.reconnect(h.action,IG.SERVER_ERROR),e===iK.JOIN||e===iK.REJOIN?null:await this.request(e,t)))}waitMessage(e,t){return new LO((n=>{const r=i=>{(!t||t(i))&&(this.off(e,r),n(i))};this.on(e,r)}))}uploadWRTCStats(e){if(!this.store.sessionId)return void KH.warn("[".concat(this.clientId,"] no session id when upload wrtc stats"));const t={lts:Date.now(),sid:this.store.sessionId,uid:this.store.intUid,stats:e};this.upload(oK.WRTC_STATS,t)}upload(e,t){const n={_type:e,_message:t};try{this.websocket.sendMessage(n)}catch(e){const t=AH("MAX_UPLOAD_CACHE")||50;this.uploadCache.push(n),this.uploadCache.length>t&&this.uploadCache.splice(0,1),this.uploadCache.length>0&&!this.uploadCacheInterval&&(this.uploadCacheInterval=window.setInterval((()=>{if(this.connectionState!==nK.CONNECTED)return;const e=this.uploadCache.splice(0,1)[0];0===this.uploadCache.length&&(window.clearInterval(this.uploadCacheInterval),this.uploadCacheInterval=void 0),this.upload(e._type,e._message)}),AH("UPLOAD_CACHE_INTERVAL")||2e3))}}send(e,t){const n={_type:e,_message:t};this.websocket.sendMessage(n)}init(e,t){return this.initError=void 0,this.multiIpOption=void 0,this.joinResponse=void 0,this.reconnectToken=void 0,this.openConnectionTime=void 0,new LO(((t,n)=>{this.once(rK.WS_CONNECTED,(()=>t(this.joinResponse))),this.once(rK.WS_CLOSED,(()=>n(this.initError||new eW(ZB.WS_ABORT)))),this.connectionState=nK.CONNECTING,this.websocket.init(e).catch(n),this.wsInflateDataTimer&&window.clearInterval(this.wsInflateDataTimer),this.wsInflateDataTimer=window.setInterval((()=>{this.handleWsInflateData()}),2e4)}))}close(e){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.wsInflateDataTimer&&(this.handleWsInflateData(),window.clearInterval(this.wsInflateDataTimer),this.wsInflateDataTimer=void 0),this.reconnectToken=void 0,this.joinResponse=void 0,this._disconnectedReason=e||SG.LEAVE,this.connectionState=nK.CLOSED,KH.debug("[".concat(this.clientId,"] ")+"will close websocket in signal"),this.websocket.close()}async join(){if(!this.joinResponse){this.emit(rK.ABORT_P2P_EXECUTION);const e=await xG(this,rK.REQUEST_JOIN_INFO),t=await this.request(iK.JOIN,e);if(!t)return this.emit(rK.REPORT_JOIN_GATEWAY,wK.TIMEOUT,this.url||""),!1;this.joinResponse=t,this.emit(rK.JOIN_RESPONSE,this.joinResponse),this.reconnectToken=this.joinResponse.rejoin_token}return this.connectionState=nK.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),!0}async rejoin(){if(!this.reconnectToken)throw new eW(ZB.UNEXPECTED_ERROR,"can not rejoin, no rejoin token");const e=DG(this,rK.REQUEST_REJOIN_INFO);e.token=this.reconnectToken;const t=await this.request(iK.REJOIN,e);return!!t&&(this.connectionState=nK.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),t.peers&&t.peers.forEach((e=>{this.emit(sK.ON_USER_ONLINE,{uid:e.uid}),e.audio&&this.emit(sK.ON_ADD_AUDIO_STREAM,{uid:e.uid,uint_id:e.uint_id,audio:!0,ssrcId:e.audio_ssrc}),e.video&&this.emit(sK.ON_ADD_VIDEO_STREAM,{uid:e.uid,uint_id:e.uint_id,video:!0,ssrcId:e.video_ssrc}),e.audio_mute?this.emit(sK.MUTE_AUDIO,{uid:e.uid}):this.emit(sK.UNMUTE_AUDIO,{uid:e.uid}),e.video_mute?this.emit(sK.MUTE_VIDEO,{uid:e.uid}):this.emit(sK.UNMUTE_VIDEO,{uid:e.uid}),e.audio_enable_local?this.emit(sK.ENABLE_LOCAL_AUDIO,{uid:e.uid}):this.emit(sK.DISABLE_LOCAL_AUDIO,{uid:e.uid}),e.video_enable_local?this.emit(sK.ENABLE_LOCAL_VIDEO,{uid:e.uid}):this.emit(sK.DISABLE_LOCAL_VIDEO,{uid:e.uid}),e.audio||e.video||this.emit(sK.ON_REMOVE_STREAM,{uid:e.uid,uint_id:e.uint_id})})),!0)}reconnect(e,t){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.websocket.reconnect(e,t)}handleNotification(e){KH.debug("[".concat(this.clientId,"] receive notification: "),e);const t=nz(e.code);if(28===e.code&&"detail"in e&&(KH.info("[".concat(this.clientId,"] receive recover notification: "),e.detail),this.emit(rK.RECOVER_NOTIFICATION,e.detail)),"success"!==t.action){if("failed"!==t.action)return"quit"===t.action?("ERR_REPEAT_JOIN_CHANNEL"===t.desc&&this.close(SG.UID_BANNED),void this.close()):void this.reconnect(t.action,IG.SERVER_ERROR);KH.error("[".concat(this.clientId,"] ignore error: "),t.desc)}}handlePingPong(){if(!this.websocket||"connected"!==this.websocket.state)return;this.pingpongTimeoutCount>0&&this.rttRolling.add(3e3),this.pingpongTimeoutCount+=1;const e=AH("PING_PONG_TIME_OUT"),t=Date.now();this.pingpongTimeoutCount>=e&&(KH.warning("[".concat(this.clientId,"] PING-PONG Timeout. Last Socket Message: ").concat(t-this.lastMsgTime,"ms")),t-this.lastMsgTime>AH("WEBSOCKET_TIMEOUT_MIN"))?this.reconnect("retry",IG.TIMEOUT):this.request(iK.PING,void 0,!0).then((()=>{this.pingpongTimeoutCount=0;const e=Date.now()-t;this.rttRolling.add(e),AH("REPORT_STATS")&&this.send(iK.PING_BACK,{pingpongElapse:e})})).catch((e=>{}))}handleWsInflateData(){const{wsInflateLength:e,wsDeflateLength:t}=this.websocket.getWsInflateData();0!==e&&0!==t&&this.upload(oK.WS_INFLATE_DATA_LENGTH,{ws_deflate_length:t,ws_inflate_length:e})}handleWebsocketEvents(){this.websocket.on(cK.RECONNECT_WAITTING_FINISH,(e=>{this.emit(rK.WS_RECONNECT_WAITTING_FINISH,e)})),this.websocket.on(cK.RECONNECT_CREATE_CONNECTION,(e=>{this.emit(rK.WS_RECONNECT_CREATE_CONNECTION,e)})),this.websocket.on(cK.ON_MESSAGE,this.onWebsocketMessage),this.websocket.on(cK.CLOSED,(()=>{this.connectionState=nK.CLOSED})),this.websocket.on(cK.FAILED,(()=>{this._disconnectedReason=SG.NETWORK_ERROR,this.connectionState=nK.CLOSED})),this.websocket.on(cK.RECONNECTING,(e=>{this._websocketReconnectReason=e,this.joinResponse=void 0,this.connectionState===nK.CONNECTED?this.connectionState=nK.RECONNECTING:this.connectionState=nK.CONNECTING})),this.websocket.on(cK.WILL_RECONNECT,((e,t,n)=>{const r=DG(this,rK.IS_P2P_DISCONNECTED),i=r||"retry"!==e;r&&"retry"===e&&(KH.debug("".concat(this.clientId," reconnect mode is retry, but p2p lost, change to tryNext")),e="tryNext",t=wK.P2P_DISCONNECTED),i&&(KH.debug("".concat(this.clientId," will renewSession, reconnect mode: ").concat(e)),this.emit(rK.REPORT_JOIN_GATEWAY,t||wK.UNKNOWN_REASON,this.url||""),this.reconnectToken=void 0,this.emit(rK.DISCONNECT_P2P)),n(e)})),this.websocket.on(cK.CONNECTED,(()=>{this.openConnectionTime=Date.now(),this.reconnectToken?this.rejoin().catch((e=>{KH.warning("[".concat(this.clientId,"] rejoin failed ").concat(e)),this.reconnect("tryNext",IG.SERVER_ERROR)})):this.join().catch((e=>{if(this.emit(rK.REPORT_JOIN_GATEWAY,e,this.url||""),e instanceof eW){if(e.code===ZB.UNEXPECTED_RESPONSE&&e.data.code===tK.ERR_NO_AUTHORIZED)return this.initError=new eW(ZB.CAN_NOT_GET_GATEWAY_SERVER,"AgoraRTCError CAN_NOT_GET_GATEWAY_SERVER: dynamic key expired"),KH.warning("[".concat(this.clientId,"] reconnect no authorized, recover")),void this.reconnect("recover",IG.SERVER_ERROR);KH.error("[".concat(this.clientId,"] join gateway request failed"),e.toString()),this.spec.forceWaitGatewayResponse?this.reconnect("tryNext",IG.SERVER_ERROR):(this.initError=e,this.close())}}))})),this.websocket.on(cK.REQUEST_NEW_URLS,((e,t)=>{xG(this,rK.REQUEST_RECOVER,this.multiIpOption).then(e).catch(t)})),this.websocket.on(cK.ON_TOKEN_PRIVILEGE_DID_EXPIRE,(()=>{this.emit(sK.ON_TOKEN_PRIVILEGE_DID_EXPIRE)})),this.websocket.on(WK.PRE_CONNECT_PC,(()=>{this.emit(rK.PRE_CONNECT_PC)}))}}let Ez=function(e){return e[e.CHOOSE_SERVER=11]="CHOOSE_SERVER",e[e.CLOUD_PROXY=18]="CLOUD_PROXY",e[e.CLOUD_PROXY_5=20]="CLOUD_PROXY_5",e[e.CLOUD_PROXY_FALLBACK=26]="CLOUD_PROXY_FALLBACK",e}({});function yz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vz(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yz(Object(n),!0).forEach((function(t){SU(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yz(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function bz(e){return e.match(/^[\.\:\d]+$/)?"".concat(e.replace(/[^\d]/g,"-"),".").concat(AH("TURN_DOMAIN")):(KH.info("Unidentified as ip: ".concat(e,", use as host")),e)}function Sz(e,t){e.addresses||(e.addresses=[]);const n=function(e,t){if(AH("CONNECT_GATEWAY_WITHOUT_DOMAIN"))return e.map((e=>{let{ip:t,port:n}=e;return{address:"".concat(t,":").concat(n)}}));const n=AH("GATEWAY_DOMAINS");let r=n[1]&&Fv(t).call(t,n[1])?1:0;return e.map((e=>{let{domain_prefix:t,port:i,ip:o}=e;if(t)return{address:"".concat(t,".").concat(n[r++%n.length],":").concat(i)};const s=/^[\.\:\d]+$/.test(o),a=s?"".concat(o.replace(/[^\d]/g,"-"),".").concat(n[r++%n.length],":").concat(i):"".concat(o,":").concat(i);return s||KH.info("Unidentified as ip: ".concat(o,", use as host")),{ip:o,port:i,address:a}}))}(e.addresses,t),r=Array.isArray(e.detail)&&e.detail[18];if(r&&"string"==typeof r){const e=r.split(";");for(let t=0;t<e.length;t++){var i;const r=Px(i=e[t]).call(i);n[t]&&r&&(n[t].ip6=r)}}const o=e.detail&&e.detail.candidate;let s;if(o){const[e,t]=o.split(":");e&&t&&(s={port:Number(t),ip:e,address:"".concat(e,":").concat(t)})}return{gatewayAddrs:n,apGatewayAddress:s,uid:e.uid,cid:e.cid,cert:e.cert,vid:e.detail&&e.detail[8],uni_lbs_ip:e.detail&&e.detail[1],res:e,csIp:e.detail&&e.detail[502]}}function Tz(e){return"number"==typeof e?e:e.exact||e.ideal||e.max||e.min||0}function Rz(e){const t=e._encoderConfig;if(!t)return{};const n={resolution:t.width&&t.height?"".concat(Tz(t.width),"x").concat(Tz(t.height)):void 0,maxVideoBW:t.bitrateMax,minVideoBW:t.bitrateMin};return"number"==typeof t.frameRate?(n.maxFrameRate=t.frameRate,n.minFrameRate=t.frameRate):t.frameRate&&(n.maxFrameRate=t.frameRate.max||t.frameRate.ideal||t.frameRate.exact||t.frameRate.min,n.minFrameRate=t.frameRate.min||t.frameRate.ideal||t.frameRate.exact||t.frameRate.max),n}function Cz(e){return e>=0&&e<.17?1:e>=.17&&e<.36?2:e>=.36&&e<.59?3:e>=.59&&e<=1?4:e>1?5:0}function wz(e,t){let n,r,i;switch(t){case Ez.CHOOSE_SERVER:r=4096,i="choose server";break;case Ez.CLOUD_PROXY:r=1048576,i="proxy";break;case Ez.CLOUD_PROXY_5:r=4194304,i="proxy5";break;case Ez.CLOUD_PROXY_FALLBACK:r=4194310,i="proxy fallback";break;default:throw new eW(ZB.UNEXPECTED_ERROR,"multi unlibs response transformer get unknown service id",{csIp:e.detail&&e.detail[502],retry:!1})}if(e.response_body.forEach((t=>{t.buffer&&t.buffer.flag===r&&(n={code:t.buffer.code,addresses:(t.buffer.edges_services||[]).map((e=>vz(vz({},e),{},{ticket:t.buffer.cert}))),server_ts:e.enter_ts,uid:t.buffer.uid,cid:t.buffer.cid,cname:t.buffer.cname,detail:vz(vz({},t.buffer.detail),e.detail),flag:t.buffer.flag,opid:e.opid,cert:t.buffer.cert})})),!n)throw new eW(ZB.MULTI_UNILBS_RESPONSE_ERROR,"cannot parse response ".concat(i," from multi unilbs response"),{csIp:e.detail&&e.detail[502]});return n}async function Iz(e,t){return await LO.all(e.addresses.map((async e=>({address:bz(e.ip),tcpport:e.port,udpport:e.port,username:t&&AH("ENCRYPT_PROXY_USERNAME_AND_PSW")&&window.isSecureContext?t.toString():TH.username,password:t&&AH("ENCRYPT_PROXY_USERNAME_AND_PSW")&&window.isSecureContext?await fG(t.toString()):TH.password}))))}function Az(e,t){const n=t.getMediaStreamTrack(!0).getSettings(),r=t.videoHeight||n.height,i=t.videoWidth||n.width;return r&&i?Math.max(Math.min(r,i)/Math.min(Tz(e.height),Tz(e.width)),1):(KH.warning("can't get ori-track's height, default scale down 4 times for low stream"),4)}function Oz(e){let{candidateType:t,relayProtocol:n,type:r,address:i,port:o,protocol:s}=e;return"local-candidate"===r?{candidateType:t,relayProtocol:n,protocol:s}:{candidateType:t,relayProtocol:n,address:i,port:o,protocol:s}}var xz,Nz=gg(IW),Pz=cv("Array").values,Dz=Rv,Lz=hE,kz=Rg,Mz=Pz,Uz=Array.prototype,Vz={DOMTokenList:!0,NodeList:!0},Fz=gg((function(e){var t=e.values;return e===Uz||kz(Uz,e)&&t===Uz.values||Lz(Vz,Dz(e))?Mz:t})),jz=Wg,Bz=Tg,Gz=qg,Hz=_g,Wz=oS,Kz=Kb,zz=Yg,qz=cE,Yz=o_,Jz=Object.assign,Xz=Object.defineProperty,Qz=Bz([].concat),$z=!Jz||Hz((function(){if(jz&&1!==Jz({b:1},Jz(Xz({},"a",{enumerable:!0,get:function(){Xz(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!=Jz({},e)[n]||Wz(Jz({},t)).join("")!=r}))?function(e,t){for(var n=qz(e),r=arguments.length,i=1,o=Kz.f,s=zz.f;r>i;)for(var a,c=Yz(arguments[i++]),d=o?Qz(Wz(c),o(c)):Wz(c),l=d.length,h=0;l>h;)a=d[h++],jz&&!Gz(s,c,a)||(n[a]=c[a]);return n}:Jz,Zz=fy,eq=aT,tq=cy,nq=qg,rq=cE,iq=function(e,t,n,r){try{return r?t(Zz(n)[0],n[1]):t(n)}catch(t){eq(e,"throw",t)}},oq=WS,sq=FC,aq=ev,cq=oN,dq=rT,lq=XS,hq=Array,uq=Tg,pq=2147483647,fq=/[^\0-\u007E]/,mq=/[.\u3002\uFF0E\uFF61]/g,gq="Overflow: input needs wider integers to process",_q=RangeError,Eq=uq(mq.exec),yq=Math.floor,vq=String.fromCharCode,bq=uq("".charCodeAt),Sq=uq([].join),Tq=uq([].push),Rq=uq("".replace),Cq=uq("".split),wq=uq("".toLowerCase),Iq=function(e){return e+22+75*(e<26)},Aq=function(e,t,n){var r=0;for(e=n?yq(e/700):e>>1,e+=yq(e/t);e>455;)e=yq(e/35),r+=36;return yq(r+36*e/(e+38))},Oq=function(e){var t=[];e=function(e){for(var t=[],n=0,r=e.length;n<r;){var i=bq(e,n++);if(i>=55296&&i<=56319&&n<r){var o=bq(e,n++);56320==(64512&o)?Tq(t,((1023&i)<<10)+(1023&o)+65536):(Tq(t,i),n--)}else Tq(t,i)}return t}(e);var n,r,i=e.length,o=128,s=0,a=72;for(n=0;n<e.length;n++)(r=e[n])<128&&Tq(t,vq(r));var c=t.length,d=c;for(c&&Tq(t,"-");d<i;){var l=pq;for(n=0;n<e.length;n++)(r=e[n])>=o&&r<l&&(l=r);var h=d+1;if(l-o>yq((pq-s)/h))throw _q(gq);for(s+=(l-o)*h,o=l,n=0;n<e.length;n++){if((r=e[n])<o&&++s>pq)throw _q(gq);if(r==o){for(var u=s,p=36;;){var f=p<=a?1:p>=a+26?26:p-a;if(u<f)break;var m=u-f,g=36-f;Tq(t,vq(Iq(f+m%g))),u=yq(m/g),p+=36}Tq(t,vq(Iq(u))),a=Aq(s,h,d==c),s=0,d++}}s++,o++}return Sq(t,"")},xq=jy,Nq=Wg,Pq=CU,Dq=wg,Lq=cy,kq=Tg,Mq=uR,Uq=lC,Vq=_C,Fq=hE,jq=$z,Bq=function(e){var t=rq(e),n=sq(this),r=arguments.length,i=r>1?arguments[1]:void 0,o=void 0!==i;o&&(i=tq(i,r>2?arguments[2]:void 0));var s,a,c,d,l,h,u=lq(t),p=0;if(!u||this===hq&&oq(u))for(s=aq(t),a=n?new this(s):hq(s);s>p;p++)h=o?i(t[p],p):t[p],cq(a,p,h);else for(l=(d=dq(t,u)).next,a=n?new this:[];!(c=nq(l,d)).done;p++)h=o?iq(d,i,[c.value,p],!0):c.value,cq(a,p,h);return a.length=p,a},Gq=hN,Hq=mO.codeAt,Wq=Iv,Kq=NR,zq=JC,qq=jV,Yq=iR,Jq=Yq.set,Xq=Yq.getterFor("URL"),Qq=qq.URLSearchParams,$q=qq.getState,Zq=Dq.URL,eY=Dq.TypeError,tY=Dq.parseInt,nY=Math.floor,rY=Math.pow,iY=kq("".charAt),oY=kq(/./.exec),sY=kq([].join),aY=kq(1..toString),cY=kq([].pop),dY=kq([].push),lY=kq("".replace),hY=kq([].shift),uY=kq("".split),pY=kq("".slice),fY=kq("".toLowerCase),mY=kq([].unshift),gY="Invalid scheme",_Y="Invalid host",EY="Invalid port",yY=/[a-z]/i,vY=/[\d+-.a-z]/i,bY=/\d/,SY=/^0x/i,TY=/^[0-7]+$/,RY=/^\d+$/,CY=/^[\da-f]+$/i,wY=/[\0\t\n\r #%/:<>?@[\\\]^|]/,IY=/[\0\t\n\r #/:<>?@[\\\]^|]/,AY=/^[\u0000-\u0020]+/,OY=/(^|[^\u0000-\u0020])[\u0000-\u0020]+$/,xY=/[\t\n\r]/g,NY=function(e){var t,n,r,i;if("number"==typeof e){for(t=[],n=0;n<4;n++)mY(t,e%256),e=nY(e/256);return sY(t,".")}if("object"==typeof e){for(t="",r=function(e){for(var t=null,n=1,r=null,i=0,o=0;o<8;o++)0!==e[o]?(i>n&&(t=r,n=i),r=null,i=0):(null===r&&(r=o),++i);return i>n&&(t=r,n=i),t}(e),n=0;n<8;n++)i&&0===e[n]||(i&&(i=!1),r===n?(t+=n?":":"::",i=!0):(t+=aY(e[n],16),n<7&&(t+=":")));return"["+t+"]"}return e},PY={},DY=jq({},PY,{" ":1,'"':1,"<":1,">":1,"`":1}),LY=jq({},DY,{"#":1,"?":1,"{":1,"}":1}),kY=jq({},LY,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),MY=function(e,t){var n=Hq(e,0);return n>32&&n<127&&!Fq(t,e)?e:encodeURIComponent(e)},UY={ftp:21,file:null,http:80,https:443,ws:80,wss:443},VY=function(e,t){var n;return 2==e.length&&oY(yY,iY(e,0))&&(":"==(n=iY(e,1))||!t&&"|"==n)},FY=function(e){var t;return e.length>1&&VY(pY(e,0,2))&&(2==e.length||"/"===(t=iY(e,2))||"\\"===t||"?"===t||"#"===t)},jY=function(e){return"."===e||"%2e"===fY(e)},BY={},GY={},HY={},WY={},KY={},zY={},qY={},YY={},JY={},XY={},QY={},$Y={},ZY={},eJ={},tJ={},nJ={},rJ={},iJ={},oJ={},sJ={},aJ={},cJ=function(e,t,n){var r,i,o,s=Wq(e);if(t){if(i=this.parse(s))throw eY(i);this.searchParams=null}else{if(void 0!==n&&(r=new cJ(n,!0)),i=this.parse(s,null,r))throw eY(i);(o=$q(new Qq)).bindURL(this),this.searchParams=o}};cJ.prototype={type:"URL",parse:function(e,t,n){var r,i,o,s,a,c=this,d=t||BY,l=0,h="",u=!1,p=!1,f=!1;for(e=Wq(e),t||(c.scheme="",c.username="",c.password="",c.host=null,c.port=null,c.path=[],c.query=null,c.fragment=null,c.cannotBeABaseURL=!1,e=lY(e,AY,""),e=lY(e,OY,"$1")),e=lY(e,xY,""),r=Bq(e);l<=r.length;){switch(i=r[l],d){case BY:if(!i||!oY(yY,i)){if(t)return gY;d=HY;continue}h+=fY(i),d=GY;break;case GY:if(i&&(oY(vY,i)||"+"==i||"-"==i||"."==i))h+=fY(i);else{if(":"!=i){if(t)return gY;h="",d=HY,l=0;continue}if(t&&(c.isSpecial()!=Fq(UY,h)||"file"==h&&(c.includesCredentials()||null!==c.port)||"file"==c.scheme&&!c.host))return;if(c.scheme=h,t)return void(c.isSpecial()&&UY[c.scheme]==c.port&&(c.port=null));h="","file"==c.scheme?d=eJ:c.isSpecial()&&n&&n.scheme==c.scheme?d=WY:c.isSpecial()?d=YY:"/"==r[l+1]?(d=KY,l++):(c.cannotBeABaseURL=!0,dY(c.path,""),d=oJ)}break;case HY:if(!n||n.cannotBeABaseURL&&"#"!=i)return gY;if(n.cannotBeABaseURL&&"#"==i){c.scheme=n.scheme,c.path=Gq(n.path),c.query=n.query,c.fragment="",c.cannotBeABaseURL=!0,d=aJ;break}d="file"==n.scheme?eJ:zY;continue;case WY:if("/"!=i||"/"!=r[l+1]){d=zY;continue}d=JY,l++;break;case KY:if("/"==i){d=XY;break}d=iJ;continue;case zY:if(c.scheme=n.scheme,i==xz)c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=Gq(n.path),c.query=n.query;else if("/"==i||"\\"==i&&c.isSpecial())d=qY;else if("?"==i)c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=Gq(n.path),c.query="",d=sJ;else{if("#"!=i){c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=Gq(n.path),c.path.length--,d=iJ;continue}c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=Gq(n.path),c.query=n.query,c.fragment="",d=aJ}break;case qY:if(!c.isSpecial()||"/"!=i&&"\\"!=i){if("/"!=i){c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,d=iJ;continue}d=XY}else d=JY;break;case YY:if(d=JY,"/"!=i||"/"!=iY(h,l+1))continue;l++;break;case JY:if("/"!=i&&"\\"!=i){d=XY;continue}break;case XY:if("@"==i){u&&(h="%40"+h),u=!0,o=Bq(h);for(var m=0;m<o.length;m++){var g=o[m];if(":"!=g||f){var _=MY(g,kY);f?c.password+=_:c.username+=_}else f=!0}h=""}else if(i==xz||"/"==i||"?"==i||"#"==i||"\\"==i&&c.isSpecial()){if(u&&""==h)return"Invalid authority";l-=Bq(h).length+1,h="",d=QY}else h+=i;break;case QY:case $Y:if(t&&"file"==c.scheme){d=nJ;continue}if(":"!=i||p){if(i==xz||"/"==i||"?"==i||"#"==i||"\\"==i&&c.isSpecial()){if(c.isSpecial()&&""==h)return _Y;if(t&&""==h&&(c.includesCredentials()||null!==c.port))return;if(s=c.parseHost(h))return s;if(h="",d=rJ,t)return;continue}"["==i?p=!0:"]"==i&&(p=!1),h+=i}else{if(""==h)return _Y;if(s=c.parseHost(h))return s;if(h="",d=ZY,t==$Y)return}break;case ZY:if(!oY(bY,i)){if(i==xz||"/"==i||"?"==i||"#"==i||"\\"==i&&c.isSpecial()||t){if(""!=h){var E=tY(h,10);if(E>65535)return EY;c.port=c.isSpecial()&&E===UY[c.scheme]?null:E,h=""}if(t)return;d=rJ;continue}return EY}h+=i;break;case eJ:if(c.scheme="file","/"==i||"\\"==i)d=tJ;else{if(!n||"file"!=n.scheme){d=iJ;continue}if(i==xz)c.host=n.host,c.path=Gq(n.path),c.query=n.query;else if("?"==i)c.host=n.host,c.path=Gq(n.path),c.query="",d=sJ;else{if("#"!=i){FY(sY(Gq(r,l),""))||(c.host=n.host,c.path=Gq(n.path),c.shortenPath()),d=iJ;continue}c.host=n.host,c.path=Gq(n.path),c.query=n.query,c.fragment="",d=aJ}}break;case tJ:if("/"==i||"\\"==i){d=nJ;break}n&&"file"==n.scheme&&!FY(sY(Gq(r,l),""))&&(VY(n.path[0],!0)?dY(c.path,n.path[0]):c.host=n.host),d=iJ;continue;case nJ:if(i==xz||"/"==i||"\\"==i||"?"==i||"#"==i){if(!t&&VY(h))d=iJ;else if(""==h){if(c.host="",t)return;d=rJ}else{if(s=c.parseHost(h))return s;if("localhost"==c.host&&(c.host=""),t)return;h="",d=rJ}continue}h+=i;break;case rJ:if(c.isSpecial()){if(d=iJ,"/"!=i&&"\\"!=i)continue}else if(t||"?"!=i)if(t||"#"!=i){if(i!=xz&&(d=iJ,"/"!=i))continue}else c.fragment="",d=aJ;else c.query="",d=sJ;break;case iJ:if(i==xz||"/"==i||"\\"==i&&c.isSpecial()||!t&&("?"==i||"#"==i)){if(".."===(a=fY(a=h))||"%2e."===a||".%2e"===a||"%2e%2e"===a?(c.shortenPath(),"/"==i||"\\"==i&&c.isSpecial()||dY(c.path,"")):jY(h)?"/"==i||"\\"==i&&c.isSpecial()||dY(c.path,""):("file"==c.scheme&&!c.path.length&&VY(h)&&(c.host&&(c.host=""),h=iY(h,0)+":"),dY(c.path,h)),h="","file"==c.scheme&&(i==xz||"?"==i||"#"==i))for(;c.path.length>1&&""===c.path[0];)hY(c.path);"?"==i?(c.query="",d=sJ):"#"==i&&(c.fragment="",d=aJ)}else h+=MY(i,LY);break;case oJ:"?"==i?(c.query="",d=sJ):"#"==i?(c.fragment="",d=aJ):i!=xz&&(c.path[0]+=MY(i,PY));break;case sJ:t||"#"!=i?i!=xz&&("'"==i&&c.isSpecial()?c.query+="%27":c.query+="#"==i?"%23":MY(i,PY)):(c.fragment="",d=aJ);break;case aJ:i!=xz&&(c.fragment+=MY(i,DY))}l++}},parseHost:function(e){var t,n,r;if("["==iY(e,0)){if("]"!=iY(e,e.length-1))return _Y;if(t=function(e){var t,n,r,i,o,s,a,c=[0,0,0,0,0,0,0,0],d=0,l=null,h=0,u=function(){return iY(e,h)};if(":"==u()){if(":"!=iY(e,1))return;h+=2,l=++d}for(;u();){if(8==d)return;if(":"!=u()){for(t=n=0;n<4&&oY(CY,u());)t=16*t+tY(u(),16),h++,n++;if("."==u()){if(0==n)return;if(h-=n,d>6)return;for(r=0;u();){if(i=null,r>0){if(!("."==u()&&r<4))return;h++}if(!oY(bY,u()))return;for(;oY(bY,u());){if(o=tY(u(),10),null===i)i=o;else{if(0==i)return;i=10*i+o}if(i>255)return;h++}c[d]=256*c[d]+i,2!=++r&&4!=r||d++}if(4!=r)return;break}if(":"==u()){if(h++,!u())return}else if(u())return;c[d++]=t}else{if(null!==l)return;h++,l=++d}}if(null!==l)for(s=d-l,d=7;0!=d&&s>0;)a=c[d],c[d--]=c[l+s-1],c[l+--s]=a;else if(8!=d)return;return c}(pY(e,1,-1)),!t)return _Y;this.host=t}else if(this.isSpecial()){if(e=function(e){var t,n,r=[],i=Cq(Rq(wq(e),mq,"."),".");for(t=0;t<i.length;t++)n=i[t],Tq(r,Eq(fq,n)?"xn--"+Oq(n):n);return Sq(r,".")}(e),oY(wY,e))return _Y;if(t=function(e){var t,n,r,i,o,s,a,c=uY(e,".");if(c.length&&""==c[c.length-1]&&c.length--,(t=c.length)>4)return e;for(n=[],r=0;r<t;r++){if(""==(i=c[r]))return e;if(o=10,i.length>1&&"0"==iY(i,0)&&(o=oY(SY,i)?16:8,i=pY(i,8==o?1:2)),""===i)s=0;else{if(!oY(10==o?RY:8==o?TY:CY,i))return e;s=tY(i,o)}dY(n,s)}for(r=0;r<t;r++)if(s=n[r],r==t-1){if(s>=rY(256,5-t))return null}else if(s>255)return null;for(a=cY(n),r=0;r<n.length;r++)a+=n[r]*rY(256,3-r);return a}(e),null===t)return _Y;this.host=t}else{if(oY(IY,e))return _Y;for(t="",n=Bq(e),r=0;r<n.length;r++)t+=MY(n[r],PY);this.host=t}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||"file"==this.scheme},includesCredentials:function(){return""!=this.username||""!=this.password},isSpecial:function(){return Fq(UY,this.scheme)},shortenPath:function(){var e=this.path,t=e.length;!t||"file"==this.scheme&&1==t&&VY(e[0],!0)||e.length--},serialize:function(){var e=this,t=e.scheme,n=e.username,r=e.password,i=e.host,o=e.port,s=e.path,a=e.query,c=e.fragment,d=t+":";return null!==i?(d+="//",e.includesCredentials()&&(d+=n+(r?":"+r:"")+"@"),d+=NY(i),null!==o&&(d+=":"+o)):"file"==t&&(d+="//"),d+=e.cannotBeABaseURL?s[0]:s.length?"/"+sY(s,"/"):"",null!==a&&(d+="?"+a),null!==c&&(d+="#"+c),d},setHref:function(e){var t=this.parse(e);if(t)throw eY(t);this.searchParams.update()},getOrigin:function(){var e=this.scheme,t=this.port;if("blob"==e)try{return new dJ(e.path[0]).origin}catch(e){return"null"}return"file"!=e&&this.isSpecial()?e+"://"+NY(this.host)+(null!==t?":"+t:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(e){this.parse(Wq(e)+":",BY)},getUsername:function(){return this.username},setUsername:function(e){var t=Bq(Wq(e));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var n=0;n<t.length;n++)this.username+=MY(t[n],kY)}},getPassword:function(){return this.password},setPassword:function(e){var t=Bq(Wq(e));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var n=0;n<t.length;n++)this.password+=MY(t[n],kY)}},getHost:function(){var e=this.host,t=this.port;return null===e?"":null===t?NY(e):NY(e)+":"+t},setHost:function(e){this.cannotBeABaseURL||this.parse(e,QY)},getHostname:function(){var e=this.host;return null===e?"":NY(e)},setHostname:function(e){this.cannotBeABaseURL||this.parse(e,$Y)},getPort:function(){var e=this.port;return null===e?"":Wq(e)},setPort:function(e){this.cannotHaveUsernamePasswordPort()||(""==(e=Wq(e))?this.port=null:this.parse(e,ZY))},getPathname:function(){var e=this.path;return this.cannotBeABaseURL?e[0]:e.length?"/"+sY(e,"/"):""},setPathname:function(e){this.cannotBeABaseURL||(this.path=[],this.parse(e,rJ))},getSearch:function(){var e=this.query;return e?"?"+e:""},setSearch:function(e){""==(e=Wq(e))?this.query=null:("?"==iY(e,0)&&(e=pY(e,1)),this.query="",this.parse(e,sJ)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var e=this.fragment;return e?"#"+e:""},setHash:function(e){""!=(e=Wq(e))?("#"==iY(e,0)&&(e=pY(e,1)),this.fragment="",this.parse(e,aJ)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var dJ=function(e){var t=Vq(this,lJ),n=zq(arguments.length,1)>1?arguments[1]:void 0,r=Jq(t,new cJ(e,!1,n));Nq||(t.href=r.serialize(),t.origin=r.getOrigin(),t.protocol=r.getProtocol(),t.username=r.getUsername(),t.password=r.getPassword(),t.host=r.getHost(),t.hostname=r.getHostname(),t.port=r.getPort(),t.pathname=r.getPathname(),t.search=r.getSearch(),t.searchParams=r.getSearchParams(),t.hash=r.getHash())},lJ=dJ.prototype,hJ=function(e,t){return{get:function(){return Xq(this)[e]()},set:t&&function(e){return Xq(this)[t](e)},configurable:!0,enumerable:!0}};if(Nq&&(Uq(lJ,"href",hJ("serialize","setHref")),Uq(lJ,"origin",hJ("getOrigin")),Uq(lJ,"protocol",hJ("getProtocol","setProtocol")),Uq(lJ,"username",hJ("getUsername","setUsername")),Uq(lJ,"password",hJ("getPassword","setPassword")),Uq(lJ,"host",hJ("getHost","setHost")),Uq(lJ,"hostname",hJ("getHostname","setHostname")),Uq(lJ,"port",hJ("getPort","setPort")),Uq(lJ,"pathname",hJ("getPathname","setPathname")),Uq(lJ,"search",hJ("getSearch","setSearch")),Uq(lJ,"searchParams",hJ("getSearchParams")),Uq(lJ,"hash",hJ("getHash","setHash"))),Mq(lJ,"toJSON",(function(){return Xq(this).serialize()}),{enumerable:!0}),Mq(lJ,"toString",(function(){return Xq(this).serialize()}),{enumerable:!0}),Zq){var uJ=Zq.createObjectURL,pJ=Zq.revokeObjectURL;uJ&&Mq(dJ,"createObjectURL",Lq(uJ,Zq)),pJ&&Mq(dJ,"revokeObjectURL",Lq(pJ,Zq))}Kq(dJ,"URL"),xq({global:!0,constructor:!0,forced:!Pq,sham:!Nq},{URL:dJ});var fJ=jy,mJ=_g,gJ=JC,_J=Iv,EJ=CU,yJ=b_("URL");fJ({target:"URL",stat:!0,forced:!(EJ&&mJ((function(){yJ.canParse()})))},{canParse:function(e){var t=gJ(arguments.length,1),n=_J(e),r=t<2||void 0===arguments[1]?void 0:_J(arguments[1]);try{return!!new yJ(n,r)}catch(e){return!1}}});var vJ=gg(g_.URL);const bJ={getDisplayMedia:!1,getStreamFromExtension:!1,supportUnifiedPlan:!1,supportMinBitrate:!1,supportSetRtpSenderParameters:!1,supportDualStream:!0,webAudioMediaStreamDest:!1,supportReplaceTrack:!1,supportWebGL:!1,webAudioWithAEC:!1,supportRequestFrame:!1,supportShareAudio:!1,supportDualStreamEncoding:!1,supportDataChannel:!1,supportPCSetConfiguration:!1,supportWebRTCEncodedTransform:!1,supportWebRTCInsertableStream:!1,supportRequestVideoFrameCallback:!1,supportWebCrypto:!1};function SJ(){return bJ}function TJ(){return"setSinkId"in HTMLAudioElement.prototype&&(!AH("RESTRICTION_SET_PLAYBACK_DEVICE")||(IB()||OB())&&!zB())}function RJ(){return!bJ.supportUnifiedPlan||AH("CHROME_FORCE_PLAN_B")&&qB()}let CJ=function(e){return e.IOS_15_16_INTERRUPTION_START="ios15_16-interruption-start",e.IOS_15_16_INTERRUPTION_END="ios15_16-interruption-end",e.IOS_INTERRUPTION_START="ios-interruption-start",e.IOS_INTERRUPTION_END="ios-interruption-end",e.STATE_CHANGE="state-change",e}({});function wJ(e,t,n){return{sampleRate:e,stereo:t,bitrate:n}}function IJ(e,t,n,r,i){return{width:e,height:t,frameRate:n,bitrateMin:r,bitrateMax:i}}function AJ(e,t,n,r,i){return{width:{max:e},height:{max:t},frameRate:n,bitrateMin:r,bitrateMax:i}}function OJ(e,t){return{numSpatialLayers:e,numTemporalLayers:t}}const xJ={"90p":IJ(160,90),"90p_1":IJ(160,90),"120p":IJ(160,120,15,30,65),"120p_1":IJ(160,120,15,30,65),"120p_3":IJ(120,120,15,30,50),"120p_4":IJ(212,120),"180p":IJ(320,180,15,30,140),"180p_1":IJ(320,180,15,30,140),"180p_3":IJ(180,180,15,30,100),"180p_4":IJ(240,180,15,30,120),"240p":IJ(320,240,15,40,200),"240p_1":IJ(320,240,15,40,200),"240p_3":IJ(240,240,15,40,140),"240p_4":IJ(424,240,15,40,220),"360p":IJ(640,360,15,80,400),"360p_1":IJ(640,360,15,80,400),"360p_3":IJ(360,360,15,80,260),"360p_4":IJ(640,360,30,80,600),"360p_6":IJ(360,360,30,80,400),"360p_7":IJ(480,360,15,80,320),"360p_8":IJ(480,360,30,80,490),"360p_9":IJ(640,360,15,80,800),"360p_10":IJ(640,360,24,80,800),"360p_11":IJ(640,360,24,80,1e3),"480p":IJ(640,480,15,100,500),"480p_1":IJ(640,480,15,100,500),"480p_2":IJ(640,480,30,100,1e3),"480p_3":IJ(480,480,15,100,400),"480p_4":IJ(640,480,30,100,750),"480p_6":IJ(480,480,30,100,600),"480p_8":IJ(848,480,15,100,610),"480p_9":IJ(848,480,30,100,930),"480p_10":IJ(640,480,10,100,400),"720p":IJ(1280,720,15,120,1130),"720p_auto":IJ(1280,720,30,900,3e3),"720p_1":IJ(1280,720,15,120,1130),"720p_2":IJ(1280,720,30,120,2e3),"720p_3":IJ(1280,720,30,120,1710),"720p_5":IJ(960,720,15,120,910),"720p_6":IJ(960,720,30,120,1380),"1080p":IJ(1920,1080,15,120,2080),"1080p_1":IJ(1920,1080,15,120,2080),"1080p_2":IJ(1920,1080,30,120,3e3),"1080p_3":IJ(1920,1080,30,120,3150),"1080p_5":IJ(1920,1080,60,120,4780),"1440p":IJ(2560,1440,30,120,4850),"1440p_1":IJ(2560,1440,30,120,4850),"1440p_2":IJ(2560,1440,60,120,7350),"4k":IJ(3840,2160,30,120,8910),"4k_1":IJ(3840,2160,30,120,8910),"4k_3":IJ(3840,2160,60,120,13500)},NJ={"480p":AJ(640,480,5),"480p_1":AJ(640,480,5),"480p_2":AJ(640,480,30),"480p_3":AJ(640,480,15),"720p":AJ(1280,720,5),"720p_auto":IJ(1280,720,30,900,3e3),"720p_1":AJ(1280,720,5),"720p_2":AJ(1280,720,30),"720p_3":AJ(1280,720,15),"1080p":AJ(1920,1080,5),"1080p_1":AJ(1920,1080,5),"1080p_2":AJ(1920,1080,30),"1080p_3":AJ(1920,1080,15)},PJ={"1SL1TL":OJ(1,1),"3SL3TL":OJ(3,3),"2SL3TL":OJ(2,3)};function DJ(e){return e||(e="480p_1"),"string"==typeof e?Object.assign({},xJ[e]):e}function LJ(e){return"string"==typeof e?Object.assign({},NJ[e]):e}function kJ(e){return"string"==typeof e?Object.assign({},PJ[e]):e}const MJ={speech_low_quality:wJ(16e3,!1),speech_standard:wJ(32e3,!1,18),music_standard:wJ(48e3,!1),standard_stereo:wJ(48e3,!0,56),high_quality:wJ(48e3,!1,128),high_quality_stereo:wJ(48e3,!0,192)};function UJ(e){return"string"==typeof e?Object.assign({},MJ[e]):e}const VJ=[];function FJ(e){return nG(e,"mediaSource",["screen","window","application"]),!0}let jJ=function(e){return e.NEED_RENEGOTIATE="@need_renegotiate",e.NEED_REPLACE_TRACK="@need_replace_track",e.NEED_REPLACE_MIXING_TRACK="@need_replace_mixing_track",e.NEED_CLOSE="@need_close",e.NEED_ENABLE_TRACK="@need_enable_track",e.NEED_DISABLE_TRACK="@need_disable_track",e.NEED_SESSION_ID="@need_sid",e.SET_OPTIMIZATION_MODE="@set_optimization_mode",e.GET_STATS="@get_stats",e.GET_RTC_STATS="@get_rtc_stats",e.GET_LOW_VIDEO_TRACK="@get_low_video_track",e.NEED_RESET_REMOTE_SDP="@need_reset_remote_sdp",e.NEED_UPDATE_VIDEO_ENCODER="@need_update_video_encoder",e.NEED_UPDATE_VIDEO_SEND_PARAMETERS="@need_update_video_send_parameters",e.NEED_MUTE_TRACK="@need_mute_track",e.NEED_UNMUTE_TRACK="@need_unmute_track",e}({}),BJ=function(e){return e.SCREEN_TRACK="screen_track",e.CUSTOM_TRACK="custome_track",e.LOW_STREAM="low_stream",e.SCREEN_LOW_TRACK="screen_low_track",e}({}),GJ=function(e){return e[e.HIGH_STREAM=0]="HIGH_STREAM",e[e.LOW_STREAM=1]="LOW_STREAM",e}({}),HJ=function(e){return e[e.HIGH_STREAM=0]="HIGH_STREAM",e[e.LOW_STREAM=1]="LOW_STREAM",e[e.HIGH_STREAM_LAYER1=4]="HIGH_STREAM_LAYER1",e[e.HIGH_STREAM_LAYER2=5]="HIGH_STREAM_LAYER2",e[e.HIGH_STREAM_LAYER3=6]="HIGH_STREAM_LAYER3",e[e.HIGH_STREAM_LAYER4=7]="HIGH_STREAM_LAYER4",e[e.HIGH_STREAM_LAYER5=8]="HIGH_STREAM_LAYER5",e[e.HIGH_STREAM_LAYER6=9]="HIGH_STREAM_LAYER6",e}({}),WJ=function(e){return e[e.DISABLE=0]="DISABLE",e[e.LOW_STREAM=1]="LOW_STREAM",e[e.AUDIO_ONLY=2]="AUDIO_ONLY",e[e.HIGH_STREAM_LAYER1=3]="HIGH_STREAM_LAYER1",e[e.HIGH_STREAM_LAYER2=4]="HIGH_STREAM_LAYER2",e[e.HIGH_STREAM_LAYER3=5]="HIGH_STREAM_LAYER3",e[e.HIGH_STREAM_LAYER4=6]="HIGH_STREAM_LAYER4",e[e.HIGH_STREAM_LAYER5=7]="HIGH_STREAM_LAYER5",e[e.HIGH_STREAM_LAYER6=8]="HIGH_STREAM_LAYER6",e}({}),KJ=function(e){return e.TRANSCEIVER_UPDATED="transceiver-updated",e.SEI_TO_SEND="sei-to-send",e.SEI_RECEIVED="sei-received",e.TRACK_UPDATED="track-updated",e}({}),zJ=function(e){return e.SOURCE_STATE_CHANGE="source-state-change",e.TRACK_ENDED="track-ended",e.BEAUTY_EFFECT_OVERLOAD="beauty-effect-overload",e.VIDEO_ELEMENT_VISIBLE_STATUS="video-element-visible-status",e.CLOSED="closed",e}({}),qJ=function(e){return e.FIRST_FRAME_DECODED="first-frame-decoded",e.VIDEO_ELEMENT_VISIBLE_STATUS="video-element-visible-status",e.VIDEO_STATE_CHANGED="video-state-changed",e}({}),YJ=function(e){return e.AUDIO="audio",e.VIDEO="video",e.DATA="data",e}({}),JJ=function(e){return e.AUDIO_SOURCE_STATE_CHANGE="audio_source_state_change",e.RECEIVE_TRACK_BUFFER="receive_track_buffer",e.ON_AUDIO_BUFFER="on_audio_buffer",e.UPDATE_SOURCE="update_source",e}({});const XJ={sendVolumeLevel:0,sendBitrate:0,sendBytes:0,sendPackets:0,sendPacketsLost:0,sendJitterMs:0,sendRttMs:0,currentPacketLossRate:0},QJ={sendBytes:0,sendBitrate:0,sendPackets:0,sendPacketsLost:0,sendJitterMs:0,sendRttMs:0,sendResolutionHeight:0,sendResolutionWidth:0,captureResolutionHeight:0,captureResolutionWidth:0,targetSendBitrate:0,totalDuration:0,totalFreezeTime:0,currentPacketLossRate:0},$J={transportDelay:0,end2EndDelay:0,receiveBitrate:0,receiveLevel:0,receiveBytes:0,receiveDelay:0,receivePackets:0,receivePacketsLost:0,receivePacketsDiscarded:0,totalDuration:0,totalFreezeTime:0,freezeRate:0,packetLossRate:0,currentPacketLossRate:0,publishDuration:-1},ZJ={uplinkNetworkQuality:0,downlinkNetworkQuality:0},eX={transportDelay:0,end2EndDelay:0,receiveBitrate:0,receiveBytes:0,receiveDelay:0,receivePackets:0,receivePacketsLost:0,receiveResolutionHeight:0,receiveResolutionWidth:0,totalDuration:0,totalFreezeTime:0,freezeRate:0,packetLossRate:0,currentPacketLossRate:0,publishDuration:-1};let tX=function(e){return e.ON_TRACK="on_track",e.ON_NODE="on_node",e}({}),nX=function(e){return e.REQUEST_UPDATE_CONSTRAINTS="request_update_constraints",e.REQUEST_CONSTRAINTS="request_constraints",e}({}),rX=function(e){return e.IDLE="IDLE",e.INITING="INITING",e.INITEND="INITEND",e}({}),iX=function(e){return e.STATE_CHANGE="state_change",e.RECORDING_DEVICE_CHANGED="recordingDeviceChanged",e.PLAYOUT_DEVICE_CHANGED="playoutDeviceChanged",e.CAMERA_DEVICE_CHANGED="cameraDeviceChanged",e}({}),oX=function(e){return e.NONE="none",e.INIT="init",e.CANPLAY="canplay",e.PLAYING="playing",e.PAUSED="paused",e.SUSPEND="suspend",e.STALLED="stalled",e.WAITING="waiting",e.ERROR="error",e.DESTROYED="destroyed",e.ABORT="abort",e.ENDED="ended",e.EMPTIED="emptied",e.LOADEDDATA="loadeddata",e}({}),sX=function(e){return e[e.VideoStateStopped=0]="VideoStateStopped",e[e.VideoStateStarting=1]="VideoStateStarting",e[e.VideoStateDecoding=2]="VideoStateDecoding",e[e.VideoStateFrozen=3]="VideoStateFrozen",e}({});const aX={uninit:100,none:110,init:120,loadeddata:130,canplay:200,playing:210,paused:220,suspend:300,stalled:310,waiting:320,error:330,destroyed:340,abort:350,ended:360,emptied:370};let cX=function(e){return e.OPEN="open",e.MESSAGE="message",e.CLOSE="close",e.CLOSING="closing",e.ERROR="error",e}({});function dX(e,t,n,r,i){var o,s,a={};return Object.keys(r).forEach((function(e){a[e]=r[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=nb(o=Nz(s=n.slice()).call(s)).call(o,(function(n,r){return r(e,t,n)||n}),a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}function lX(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hX(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function uX(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hX(Object(n),!0).forEach((function(t){lX(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hX(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class pX extends mG{set _mediaStreamTrack(e){e!==this.mediaStreamTrack&&(this.safeEmit(KJ.TRACK_UPDATED,e),this.mediaStreamTrack=e)}get _mediaStreamTrack(){return this.mediaStreamTrack}constructor(e,t){super(),lX(this,"trackMediaType",void 0),lX(this,"_ID",void 0),lX(this,"_rtpTransceiver",void 0),lX(this,"_lowRtpTransceiver",void 0),lX(this,"_hints",[]),lX(this,"_isClosed",!1),lX(this,"_originMediaStreamTrack",void 0),lX(this,"mediaStreamTrack",void 0),lX(this,"_external",{}),this._ID=t||XG(8,"track-"),this._originMediaStreamTrack=e,this.mediaStreamTrack=e,function(e){Fv(VJ).call(VJ,e)||VJ.push(e)}(this)}toString(){return this._ID}getTrackId(){return this._ID}getMediaStreamTrack(e){return e||BG((()=>{var e;ZH.reportApiInvoke(null,{name:EG.GET_MEDIA_STREAM_TRACK,options:[],tag:yG.TRACER}).onSuccess((null===(e=this._mediaStreamTrack)||void 0===e?void 0:e.label)||"")}),this.mediaStreamTrack.id||this.getTrackId()),this._mediaStreamTrack}getRTCRtpTransceiver(e){return e===GJ.LOW_STREAM?this._lowRtpTransceiver:this._rtpTransceiver}getMediaStreamTrackSettings(){return this.getMediaStreamTrack(!0).getSettings()}close(){this._isClosed=!0,this._lowRtpTransceiver=void 0,this._rtpTransceiver=void 0,function(e){const t=VJ.indexOf(e);-1!==t&&VJ.splice(t,1)}(this),this.emit(zJ.CLOSED),this.removeAllListeners(KJ.SEI_RECEIVED)}_updateRtpTransceiver(e,t){if(t===GJ.LOW_STREAM){if(this._lowRtpTransceiver===e)return;this._lowRtpTransceiver=e}else{if(this._rtpTransceiver===e)return;this._rtpTransceiver=e}this.emit(KJ.TRANSCEIVER_UPDATED,e,t)}}class fX extends pX{get isExternalTrack(){return this._isExternalTrack}get muted(){return this._muted}get enabled(){return this._enabled}get processorContext(){return this._processorContext}constructor(e,t){super(e,t),lX(this,"_enabled",!0),lX(this,"_muted",!1),lX(this,"_isExternalTrack",!1),lX(this,"_isClosed",!1),lX(this,"_enabledMutex",void 0),lX(this,"processor",void 0),lX(this,"_processorContext",void 0),lX(this,"_handleTrackEnded",(()=>{this.onTrackEnded()})),this._enabledMutex=new cH("".concat(this.getTrackId())),e.addEventListener("ended",this._handleTrackEnded)}getTrackLabel(){var e,t;return null!==(e=null===(t=this._originMediaStreamTrack)||void 0===t?void 0:t.label)&&void 0!==e?e:""}close(){this._isClosed||(this.stop(),this._originMediaStreamTrack.stop(),this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack.stop(),this._mediaStreamTrack=null),this._originMediaStreamTrack=null,this._enabledMutex=null,KH.debug("[".concat(this.getTrackId(),"] close")),this.emit(jJ.NEED_CLOSE),super.close())}async _updateOriginMediaStreamTrack(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._isExternalTrack=n,e!==this._originMediaStreamTrack&&(this._originMediaStreamTrack&&(this._originMediaStreamTrack.removeEventListener("ended",this._handleTrackEnded),t&&this._originMediaStreamTrack.stop()),e.addEventListener("ended",this._handleTrackEnded),this._originMediaStreamTrack=e,this._muted&&(this._originMediaStreamTrack.enabled=!1),this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await NG(this,jJ.NEED_REPLACE_TRACK,this),this.processor&&this._processorContext&&this.processor.updateInput({track:this._originMediaStreamTrack,context:this._processorContext}))}_getDefaultPlayerConfig(){return{}}onTrackEnded(){KH.debug("[".concat(this.getTrackId(),"] track ended")),this.safeEmit(zJ.TRACK_ENDED)}stateCheck(e,t){if(KH.debug("check track state, [muted: ".concat(this._muted,", enabled: ").concat(this._enabled,"] to [").concat(e,": ").concat(t,"]")),tG(t,e),this._enabled&&this._muted&&"enabled"===e&&!1===t)throw new eG(ZB.TRACK_STATE_UNREACHABLE,"cannot set enabled while the track is muted").print("error",KH);if(!this._enabled&&!this._muted&&"muted"===e&&!0===t)throw new eG(ZB.TRACK_STATE_UNREACHABLE,"cannot set muted while the track is disabled").print("error",KH)}getProcessorStats(){return this._processorContext&&this._processorContext.gatherStats()||[]}getProcessorUsage(){return this._processorContext?this._processorContext.gatherUsage():LO.resolve([])}}const mX=window.AudioContext||window.webkitAudioContext;let gX=null;const _X=new class extends mG{constructor(){super(...arguments),lX(this,"prevState",void 0),lX(this,"curState",void 0),lX(this,"currentTime",void 0),lX(this,"currentTimeStuckAt",void 0),lX(this,"interruptDetectorTrack",void 0),lX(this,"onLocalAudioTrackMute",(()=>{KH.info("ios15-interruption-start"),this.emit(CJ.IOS_15_16_INTERRUPTION_START)})),lX(this,"onLocalAudioTrackUnmute",(async()=>{KH.info("ios15-interruption-end"),"running"!==this.curState||this.duringInterruption?KH.info("ios15-interruption-end-canceled"):(gX&&await gX.suspend(),this.emit(CJ.IOS_15_16_INTERRUPTION_END))}))}get duringInterruption(){return"running"===this.prevState&&"interrupted"===this.curState}bindInterruptDetectorTrack(e){KH.debug("webaudio bindInterruptDetectorTrack ".concat(e.getTrackId())),this.interruptDetectorTrack||(this.interruptDetectorTrack=e,this.interruptDetectorTrack._mediaStreamTrack.onmute=this.onLocalAudioTrackMute,this.interruptDetectorTrack._mediaStreamTrack.onunmute=this.onLocalAudioTrackUnmute)}unbindInterruptDetectorTrack(e){KH.debug("webaudio unbindInterruptDetectorTrack ".concat(e.getTrackId())),this.interruptDetectorTrack&&this.interruptDetectorTrack===e&&(this.interruptDetectorTrack._mediaStreamTrack&&(this.interruptDetectorTrack._mediaStreamTrack.onmute=null,this.interruptDetectorTrack._mediaStreamTrack.onunmute=null),this.interruptDetectorTrack=void 0)}};function EX(){if(!gX){if(function(){if(!mX)return void KH.error("your browser is not support web audio");KH.info("create audio context");const e=uX({},AH("WEBAUDIO_INIT_OPTIONS"));KH.debug("audio context init option:",JSON.stringify(e)),gX=new mX(e),_X.curState=gX.state,gX.onstatechange=()=>{_X.prevState=_X.curState,_X.curState=gX?gX.state:void 0;const{prevState:e,curState:t}=_X,n="running"===t,r="interrupted"===t,i="running"===e,o="suspended"===e,s="interrupted"===e,a=SB().osVersion;(NB()||HB())&&i&&r&&(KH.info("ios".concat(a,"-interruption-start")),_X.emit(CJ.IOS_INTERRUPTION_START)),(NB()||HB())&&(o||s)&&n&&(KH.info("ios".concat(a,"-interruption-end")),_X.emit(CJ.IOS_INTERRUPTION_END)),e!==t&&_X.emit(CJ.STATE_CHANGE,t,e)},setInterval((()=>{var e;const t=null===(e=gX)||void 0===e?void 0:e.currentTime;_X.currentTime!==t?(_X.currentTimeStuckAt&&(KH.debug("AudioContext current time resume at ".concat(t)),_X.currentTimeStuckAt=void 0),_X.currentTime=t):(t!==_X.currentTimeStuckAt&&(ZH.reportApiInvoke(null,{name:"WEB_AUDIO_CURRENT_TIME_STUCK",options:{currentTime:t},tag:yG.TRACER}).onSuccess(),KH.warning("AudioContext current time stuck at ".concat(t))),_X.currentTimeStuckAt=t)}),5e3),async function(e){const t=["click","contextmenu","auxclick","dblclick","mousedown","mouseup","touchend","keydown","keyup"];let n,r=!1,i=!1,o=!1;function s(t){"running"===e.state?a(!1):NB()||HB()?"suspended"===e.state&&(a(!0),t&&e.resume().then(c,c)):"closed"!==e.state&&(a(!0),t&&e.resume().then(c,c))}function a(e){if(r!==e){r=e;for(let n=0,r=t;n<r.length;n+=1){const t=r[n];e?window.addEventListener(t,d,{capture:!0,passive:!0}):window.removeEventListener(t,d,{capture:!0,passive:!0})}}}function c(){s(!1)}function d(){s(!0)}function l(e){if(!o)if(n.paused)if(e){let t;h(!1),o=!0;try{t=n.play(),t?t.then(u,u):(n.addEventListener("playing",u),n.addEventListener("abort",u),n.addEventListener("error",u))}catch(e){u()}}else h(!0);else h(!1)}function h(e){if(i!==e){i=e;for(let n=0,r=t;n<r.length;n++){const t=r[n];e?window.addEventListener(t,p,{capture:!0,passive:!0}):window.removeEventListener(t,p,{capture:!0,passive:!0})}}}function u(){n.removeEventListener("playing",u),n.removeEventListener("abort",u),n.removeEventListener("error",u),o=!1,l(!1)}function p(){l(!0)}if(NB()){const t=e.createMediaStreamDestination(),r=document.createElement("div");r.innerHTML="<audio x-webkit-airplay='deny'></audio>",n=r.children.item(0),n.controls=!1,n.disableRemotePlayback=!0,n.preload="auto",n.srcObject=t.stream,l(!0)}_X.on(CJ.STATE_CHANGE,(function(){s(!0)})),s(!1)}(gX)}(),!gX)throw new eG(ZB.NOT_SUPPORTED,"can not create audio context");return gX}return gX}function yX(e){if(function(){if(null!==vX)return vX;const e=EX(),t=e.createBufferSource(),n=e.createGain(),r=e.createGain();t.connect(n),t.connect(r),t.disconnect(n);let i=!1;try{t.disconnect(n)}catch(e){i=!0}return t.disconnect(),vX=i,i}())return;const t=e.connect,n=e.disconnect;e.connect=(n,r,i)=>{var o;return e._inputNodes||(e._inputNodes=[]),Fv(o=e._inputNodes).call(o,n)||(n instanceof AudioNode?(e._inputNodes.push(n),t.call(e,n,r,i)):t.call(e,n,r)),e},e.disconnect=(r,i,o)=>{n.call(e),r?kG(e._inputNodes,r):e._inputNodes=[];for(const n of e._inputNodes)t.call(e,n)}}let vX=null;function bX(e,t){let n=!1;const r=1/t;if(AH("DISABLE_WEBAUDIO")){const t=window.setInterval((()=>{n?window.clearInterval(t):e(performance.now()/1e3)}),1e3*r)}else{const t=EX();let i=t.createGain();i.gain.value=0,i.connect(t.destination);const o=()=>{if(n)return void(i=null);const s=t.createOscillator();s.onended=o,s.connect(i),s.start(0),s.stop(t.currentTime+r),e(t.currentTime)};o()}return()=>{n=!0}}class SX{constructor(){lX(this,"context",void 0),lX(this,"analyserNode",void 0),lX(this,"sourceNode",void 0),this.context=EX(),this.analyserNode=this.context.createAnalyser(),this.analyserNode.fftSize=2048,this.analyserNode.smoothingTimeConstant=.4}updateSource(e){if(e!==this.sourceNode){if(this.sourceNode)try{this.sourceNode.disconnect(this.analyserNode)}catch(e){}this.sourceNode=e,null==e||e.connect(this.analyserNode)}}getVolumeLevel(){if(!this.sourceNode)return 0;if(!this.context||NB()||HB()||"running"!==this.context.state&&this.context.resume(),!this.analyserNode)return 0;const e=new Float32Array(this.analyserNode.fftSize);if(this.analyserNode.getFloatTimeDomainData)this.analyserNode.getFloatTimeDomainData(e);else{const t=new Uint8Array(this.analyserNode.fftSize);this.analyserNode.getByteTimeDomainData(t);for(let n=0;n<e.length;++n)e[n]=t[n]/128-1}const t=nb(e).call(e,((e,t)=>e+t*t),0)/e.length;return Math.max(10*Math.log10(t)+100,0)/100}getAnalyserNode(){return this.analyserNode}rebuildAnalyser(){try{var e,t;null===(e=this.sourceNode)||void 0===e||e.disconnect(this.analyserNode),this.analyserNode=this.context.createAnalyser(),this.analyserNode.fftSize=2048,this.analyserNode.smoothingTimeConstant=.4,null===(t=this.sourceNode)||void 0===t||t.connect(this.analyserNode)}catch(e){KH.warning("rebuild analyser node failed.")}}destroy(){this.updateSource(void 0)}}class TX extends mG{get processSourceNode(){return this.sourceNode}set processedNode(e){var t;if(!this.isDestroyed&&this._processedNode!==e){try{var n;null===(n=this.sourceNode)||void 0===n||n.disconnect(this.outputNode)}catch(e){}null===(t=this._processedNode)||void 0===t||t.disconnect(),this._processedNode=e,this.connect()}}get processedNode(){return this._processedNode}constructor(){super(),lX(this,"outputNode",void 0),lX(this,"outputTrack",void 0),lX(this,"isPlayed",!1),lX(this,"sourceNode",void 0),lX(this,"context",void 0),lX(this,"audioBufferNode",void 0),lX(this,"destNode",void 0),lX(this,"audioOutputLevel",0),lX(this,"volumeLevelAnalyser",void 0),lX(this,"_processedNode",void 0),lX(this,"playNode",void 0),lX(this,"isDestroyed",!1),lX(this,"onNoAudioInput",void 0),lX(this,"isNoAudioInput",!1),lX(this,"_noAudioInputCount",0),this.context=EX(),this.playNode=this.context.destination,this.outputNode=this.context.createGain(),yX(this.outputNode),this.volumeLevelAnalyser=new SX}startGetAudioBuffer(e){this.audioBufferNode||(this.audioBufferNode=this.context.createScriptProcessor(e),this.outputNode.connect(this.audioBufferNode),this.audioBufferNode.connect(this.context.destination),this.audioBufferNode.onaudioprocess=e=>{this.emit(JJ.ON_AUDIO_BUFFER,function(e){for(let t=0;t<e.outputBuffer.numberOfChannels;t+=1){const n=e.outputBuffer.getChannelData(t);for(let e=0;e<n.length;e+=1)n[e]=0}return e.inputBuffer}(e))})}stopGetAudioBuffer(){this.audioBufferNode&&(this.audioBufferNode.onaudioprocess=null,this.outputNode.disconnect(this.audioBufferNode),this.audioBufferNode=void 0)}createOutputTrack(){if(!SJ().webAudioMediaStreamDest)throw new eG(ZB.NOT_SUPPORTED,"your browser is not support audio processor");return this.destNode&&this.outputTrack||(this.destNode=this.context.createMediaStreamDestination(),this.outputNode.connect(this.destNode),this.outputTrack=this.destNode.stream.getAudioTracks()[0]),this.outputTrack}play(e){"running"!==this.context.state&&UG((()=>{_X.emit("autoplay-failed")})),this.isPlayed=!0,this.playNode=e||this.context.destination,this.outputNode.connect(this.playNode)}stop(){if(this.isPlayed)try{this.outputNode.disconnect(this.playNode)}catch(e){}this.isPlayed=!1}getAccurateVolumeLevel(){return this.volumeLevelAnalyser.getVolumeLevel()}async checkHasAudioInput(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(e>5)return this.isNoAudioInput=!0,this.onNoAudioInput&&this.onNoAudioInput(),!1;NB()||HB()?"suspended"===this.context.state&&this.context.resume():"running"!==this.context.state&&this.context.resume();const t=this.volumeLevelAnalyser.getAnalyserNode();let n;t.getFloatTimeDomainData?(n=new Float32Array(t.fftSize),t.getFloatTimeDomainData(n)):(n=new Uint8Array(t.fftSize),t.getByteTimeDomainData(n));let r=!1;for(let e=0;e<n.length;e++)0!==n[e]&&(r=!0);return r?(this.isNoAudioInput=!1,!0):(await JG(200),await this.checkHasAudioInput(e?e+1:1)&&r)}getAudioVolume(){return this.outputNode.gain.value}setVolume(e){this.outputNode.gain.setValueAtTime(e,this.context.currentTime)}destroy(){this.disconnect(),this.stop(),this.isDestroyed=!0,this.onNoAudioInput=void 0}disconnect(){var e,t;null===(e=this.processedNode)||void 0===e||e.disconnect(),null===(t=this.sourceNode)||void 0===t||t.disconnect(),this.outputNode&&this.outputNode.disconnect()}connect(){var e;this.processedNode?null===(e=this.processedNode)||void 0===e||e.connect(this.outputNode):this.sourceNode&&this.sourceNode.connect(this.outputNode),this.volumeLevelAnalyser.updateSource(this.outputNode)}}class RX extends TX{get isFreeze(){return!1}constructor(e,t,n){var r;if(super(),lX(this,"sourceNode",void 0),lX(this,"track",void 0),lX(this,"clonedTrack",void 0),lX(this,"audioElement",void 0),lX(this,"isCurrentTrackCloned",!1),lX(this,"isRemoteTrack",!1),lX(this,"originVolumeLevelAnalyser",void 0),lX(this,"rebuildWebAudio",(async()=>{if(KH.debug("ready to rebuild web audio, state:",this.context.state),this.isNoAudioInput&&await this.checkHasAudioInput(),!this.isNoAudioInput||this.isDestroyed)return document.body.removeEventListener("click",this.rebuildWebAudio,!0),void KH.debug("rebuild web audio success, current volume status",this.getAccurateVolumeLevel());this.context.resume().then((()=>KH.info("resume success"))),KH.debug("rebuild web audio because of ios 12 bugs"),this.disconnect();const e=this.track;this.track=this.track.clone(),this.isCurrentTrackCloned?e.stop():this.isCurrentTrackCloned=!0;const t=new MediaStream([this.track]);this.sourceNode=this.context.createMediaStreamSource(t),yX(this.sourceNode),this.volumeLevelAnalyser.rebuildAnalyser();const n=this.outputNode.gain.value;this.outputNode=this.context.createGain(),this.outputNode.gain.setValueAtTime(n,this.context.currentTime),yX(this.outputNode),this.emit(JJ.UPDATE_SOURCE),this.connect(),this.audioElement.srcObject=t,this.isPlayed&&this.play(this.playNode),this.checkHasAudioInput()})),"audio"!==e.kind)throw new eG(ZB.UNEXPECTED_ERROR);this.track=e;const i=new MediaStream([this.track]);if(this.isRemoteTrack=!!t,this.sourceNode=this.context.createMediaStreamSource(i),yX(this.sourceNode),n){const e=n.clone();e.enabled=!0,this.clonedTrack=e,KH.debug("create an unmuted track ".concat(e.id," from the original track ").concat(n.id," to get the volume"));const t=this.context.createMediaStreamSource(new MediaStream([e]));yX(t),this.originVolumeLevelAnalyser=new SX,this.originVolumeLevelAnalyser.updateSource(t)}this.connect(),this.audioElement=document.createElement("audio"),this.audioElement.srcObject=i;const o=SB();t&&o.os===_B.IOS&&Number(null===(r=o.osVersion)||void 0===r?void 0:r.split(".")[0])<15&&(_X.on(CJ.STATE_CHANGE,(()=>{"suspended"===this.context.state?document.body.addEventListener("click",this.rebuildWebAudio,!0):"running"===this.context.state&&this.rebuildWebAudio()})),this.checkHasAudioInput().then((e=>{e||document.body.addEventListener("click",this.rebuildWebAudio,!0)})))}updateTrack(e){this.sourceNode.disconnect(),this.track=e,this.isCurrentTrackCloned=!1;const t=new MediaStream([e]);this.sourceNode=this.context.createMediaStreamSource(t),yX(this.sourceNode),this.processedNode||this.sourceNode.connect(this.outputNode),this.emit(JJ.UPDATE_SOURCE),this.audioElement.srcObject=t}destroy(){var e;this.audioElement.srcObject=null,this.audioElement.remove(),_X.off("state-change",this.rebuildWebAudio),null===(e=this.originVolumeLevelAnalyser)||void 0===e||e.destroy(),this.clonedTrack=void 0,super.destroy()}createMediaStreamSourceNode(e){return this.context.createMediaStreamSource(new MediaStream([e]))}updateOriginTrack(e){const t=e.clone();t.enabled=!0,this.clonedTrack&&(this.clonedTrack.stop(),this.clonedTrack=t),KH.debug("create an unmuted track ".concat(t.id," from the original track ").concat(e.id," to get the volume"));const n=this.context.createMediaStreamSource(new MediaStream([t]));yX(n),this.originVolumeLevelAnalyser&&this.originVolumeLevelAnalyser.updateSource(n)}getOriginVolumeLevel(){return this.originVolumeLevelAnalyser?this.originVolumeLevelAnalyser.getVolumeLevel():this.getAccurateVolumeLevel()}}async function CX(e,t,n){const r=(e,t)=>e?"number"!=typeof e?e.max||e.exact||e.ideal||e.min||t:e:t,i={audio:!!n&&{mandatory:{chromeMediaSource:"desktop"}},video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:e,maxHeight:r(t.height,1080),maxWidth:r(t.width,1920)}}};return t.frameRate&&"number"!=typeof t.frameRate?(i.video.mandatory.maxFrameRate=t.frameRate.max,i.video.mandatory.minFrameRate=t.frameRate.min):"number"==typeof t.frameRate&&(i.video.mandatory.maxFrameRate=t.frameRate),await navigator.mediaDevices.getUserMedia(i)}async function wX(e){let t=["window","screen"];"application"!==e&&"window"!==e||(t=["window"]),"screen"===e&&(t=["screen"]);const n=_G();if(!n)throw console.error("failed to fetch electron, please mount it to window"),new eG(ZB.ELECTRON_IS_NULL);let r=null;try{var i;r=(null===(i=n.desktopCapturer)||void 0===i?void 0:i.getSources({types:t}))||n.ipcRenderer.invoke("DESKTOP_CAPTURER_GET_SOURCES",{types:t})}catch(e){r=null}r&&r.then||(r=new LO(((e,r)=>{n.desktopCapturer.getSources({types:t},((t,n)=>{t?r(t):e(n)}))})));try{return await r}catch(e){throw new eG(ZB.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR,e.toString())}}const IX=new cH("safari");let AX=!1,OX=!1;async function xX(e,t){let n=0,r=null;for(;n<2;)try{r=await NX(e,t,n>0);break}catch(e){if(e instanceof eG)throw KH.error("[".concat(t,"] ").concat(e.toString())),e;const r=PX(e.name||e.code||e,e.message);if(r.code===ZB.MEDIA_OPTION_INVALID){KH.debug("[".concat(t,"] detect media option invalid, retry")),n+=1,await JG(500);continue}throw KH.error("[".concat(t,"] ").concat(r.toString())),r}if(!r)throw new eG(ZB.UNEXPECTED_ERROR,"can not find stream after getUserMedia");return r}async function NX(e,t,n){if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new eG(ZB.NOT_SUPPORTED,"can not find getUserMedia");n&&(e.video&&(delete e.video.width,delete e.video.height),e.screen&&(delete e.screen.width,delete e.screen.height));const r=SJ(),i=new MediaStream;if(e.audioSource&&i.addTrack(e.audioSource),e.videoSource&&i.addTrack(e.videoSource),!e.audio&&!e.video&&!e.screen)return KH.debug("Using Video Source/ Audio Source"),i;if(e.screen)if(_G())e.screen.sourceId?DX(i,await CX(e.screen.sourceId,e.screen,e.screenAudio)):DX(i,await async function(e,t){const n=await wX(e.mediaSource),{sourceId:r,audio:i}=await function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new LO(((n,r)=>{const i=document.createElement("div");i.innerText="share screen",i.setAttribute("style","text-align: center; height: 25px; line-height: 25px; border-radius: 4px 4px 0 0; background: #D4D2D4; border-bottom:  solid 1px #B9B8B9;");const o=document.createElement("div");o.setAttribute("style","width: 100%; height: 500px; padding: 15px 25px ; box-sizing: border-box;");const s=document.createElement("div");s.innerText="Agora Web Screensharing wants to share the contents of your screen with webdemo.agorabeckon.com. Choose what you'd like to share.",s.setAttribute("style","height: 12%;");const a=document.createElement("div");a.setAttribute("style","width: 100%; height: 80%; background: #FFF; border:  solid 1px #CBCBCB; display: flex; flex-wrap: wrap; justify-content: space-around; overflow-y: scroll; padding: 0 15px; box-sizing: border-box;");const c=document.createElement("div");c.setAttribute("style","display: flex; justify-content: space-between; padding: 16px 0;");const d=document.createElement("button");d.innerHTML="cancel",d.setAttribute("style","width: 85px;"),d.onclick=()=>{document.body.removeChild(u);const e=new Error("NotAllowedError");e.name="NotAllowedError",r(e)};let l=t;const h=document.createElement("div");if(t){const e=document.createElement("input");e.setAttribute("type","checkbox");const t=document.createElement("span");e.setAttribute("style","margin-right: 6px;"),t.innerText="Share audio",e.checked=l,e.onchange=()=>{l=e.checked},h.appendChild(e),h.appendChild(t)}c.appendChild(h),c.appendChild(d),o.appendChild(s),o.appendChild(a),o.appendChild(c);const u=document.createElement("div");u.setAttribute("style","position: fixed; z-index: 99999999; top: 50%; left: 50%; width: 620px; height: 525px; background: #ECECEC; border-radius: 4px; -webkit-transform: translate(-50%,-50%); transform: translate(-50%,-50%);"),u.appendChild(i),u.appendChild(o),document.body.appendChild(u),e.map((e=>{if(e.id){const t=document.createElement("div");t.setAttribute("style","width: 30%; height: 160px; padding: 20px 0; text-align: center;box-sizing: content-box;");let r=e.thumbnail;try{const{width:e}=r.getSize();e>1920&&(r=r.resize({width:1920}))}catch(e){throw e&&e.message.startsWith("Illegal invocation")&&console.error("Operate thumbnail error, please try to set contextIsolation: false. (https://github.com/electron/electron/issues/34953)"),e}t.innerHTML='<div style="height: 120px; display: table-cell; vertical-align: middle;"><img style="width: 100%; background: #333333; box-shadow: 1px 1px 1px 1px rgba(0, 0, 0, 0.2);" src='+r.toDataURL()+' /></div><span style="\theight: 40px; line-height: 40px; display: inline-block; width: 70%; word-break: keep-all; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">'+e.name.replace(/[\u00A0-\u9999<>\&]/g,(function(e){return"&#"+e.charCodeAt(0)+";"}))+"</span>",t.onclick=()=>{document.body.removeChild(u),n({sourceId:e.id,audio:l})},a.appendChild(t)}}))}))}(n,t);return await CX(r,e,i)}(e.screen,e.screenAudio));else if(IB()&&e.screen.extensionId&&e.screen.mandatory){if(!r.getStreamFromExtension)throw new eG(ZB.NOT_SUPPORTED,"This browser does not support screen sharing");KH.debug("[".concat(t,'] Screen access on chrome stable, looking for extension"'));const n=await(s=e.screen.extensionId,a=t,new LO(((e,t)=>{try{chrome.runtime.sendMessage(s,{getStream:!0},(n=>{if(!n||!n.streamId)return KH.error("[".concat(a,"] No response from Chrome Plugin. Plugin not installed properly"),n),void t(new eG(ZB.CHROME_PLUGIN_NO_RESPONSE,"No response from Chrome Plugin. Plugin not installed properly"));e(n.streamId)}))}catch(e){KH.error("[".concat(a,"] AgoraRTC screensharing plugin is not accessible(").concat(s,")"),e.toString()),t(new eG(ZB.CHROME_PLUGIN_NOT_INSTALL))}})));e.screen.mandatory.chromeMediaSourceId=n,DX(i,await navigator.mediaDevices.getUserMedia({video:{mandatory:e.screen.mandatory}}))}else if(r.getDisplayMedia){var o;e.screen.mediaSource&&FJ(e.screen.mediaSource);const n={width:e.screen.width,height:e.screen.height,frameRate:e.screen.frameRate,displaySurface:null!==(o=e.screen.displaySurface)&&void 0!==o?o:"screen"===e.screen.mediaSource?"monitor":e.screen.mediaSource},{selfBrowserSurface:r,surfaceSwitching:s,systemAudio:a}=e.screen,c={selfBrowserSurface:r,surfaceSwitching:s,systemAudio:a};!r&&delete c.selfBrowserSurface,!s&&delete c.surfaceSwitching,!a&&delete c.systemAudio,KH.debug("[".concat(t,"] getDisplayMedia:"),JSON.stringify({video:n,audio:!!e.screenAudio,controls:c})),DX(i,await navigator.mediaDevices.getDisplayMedia(uX({video:n,audio:!!e.screenAudio},c)))}else{if(!xB())throw KH.error("[".concat(t,"] This browser does not support screenSharing")),new eG(ZB.NOT_SUPPORTED,"This browser does not support screen sharing");{e.screen.mediaSource&&FJ(e.screen.mediaSource);const n={video:{mediaSource:e.screen.mediaSource,width:e.screen.width,height:e.screen.height,frameRate:e.screen.frameRate}};KH.debug("[".concat(t,"] getUserMedia: ").concat(JSON.stringify(n))),DX(i,await navigator.mediaDevices.getUserMedia(n))}}var s,a;if(!e.video&&!e.audio)return i;let c={video:e.video,audio:e.audio},d=AH("MEDIA_DEVICE_CONSTRAINTS");if(d)try{"string"==typeof d&&(d=JSON.parse(d)),c=nH(c,d)}catch(e){}KH.debug("[".concat(t,"] GetUserMedia"),JSON.stringify(c)),SB();let l,h=null;(AB()||NB()||wB())&&(h=await IX.lock());try{l=await navigator.mediaDevices.getUserMedia(c)}catch(e){throw h&&h(),e}return c.audio&&(AX=!0),c.video&&(OX=!0),DX(i,l),h&&h(),i}function PX(e,t){switch(e){case"Starting video failed":case"OverconstrainedError":case"TrackStartError":return new eG(ZB.MEDIA_OPTION_INVALID,"".concat(e,": ").concat(t));case"NotFoundError":case"DevicesNotFoundError":return new eG(ZB.DEVICE_NOT_FOUND,"".concat(e,": ").concat(t));case"NotSupportedError":return new eG(ZB.NOT_SUPPORTED,"".concat(e,": ").concat(t));case"NotReadableError":return new eG(ZB.NOT_READABLE,"".concat(e,": ").concat(t));case"InvalidStateError":case"NotAllowedError":case"PERMISSION_DENIED":case"PermissionDeniedError":return new eG(ZB.PERMISSION_DENIED,"".concat(e,": ").concat(t));case"ConstraintNotSatisfiedError":return new eG(ZB.CONSTRAINT_NOT_SATISFIED,"".concat(e,": ").concat(t));default:return KH.error("getUserMedia unexpected error",e),new eG(ZB.UNEXPECTED_ERROR,"".concat(e,": ").concat(t))}}function DX(e,t){const n=e.getVideoTracks()[0],r=e.getAudioTracks()[0],i=t.getVideoTracks()[0],o=t.getAudioTracks()[0];o&&(r&&e.removeTrack(r),e.addTrack(o)),i&&(n&&e.removeTrack(n),e.addTrack(i))}const LX=new class extends mG{get state(){return this._state}set state(e){e!==this._state&&(this.emit(iX.STATE_CHANGE,e),this._state=e)}constructor(){super(),lX(this,"_state",rX.IDLE),lX(this,"isAccessMicrophonePermission",!1),lX(this,"isAccessCameraPermission",!1),lX(this,"lastAccessMicrophonePermission",!1),lX(this,"lastAccessCameraPermission",!1),lX(this,"checkdeviceMatched",!1),lX(this,"deviceInfoMap",new Map),this.init().then((()=>{navigator.mediaDevices.addEventListener&&navigator.mediaDevices.addEventListener("devicechange",this.updateDevicesInfo.bind(this)),window.setInterval((()=>{(AH("ENUMERATE_DEVICES_INTERVAL")||(YB()||RB()===_B.HARMONY_OS)&&qB())&&this.updateDevicesInfo()}),AH("ENUMERATE_DEVICES_INTERVAL_TIME"))})).catch((e=>KH.error(e.toString())))}async enumerateDevices(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return new eG(ZB.NOT_SUPPORTED,"enumerateDevices() not supported.").throw();const r=await navigator.mediaDevices.enumerateDevices(),i=this.checkMediaDeviceInfoIsOk(r);let o=!this.isAccessMicrophonePermission&&e,s=!this.isAccessCameraPermission&&t;i.audio&&(o=!1),i.video&&(s=!1);let a=null,c=null,d=null;if(!n&&(o||s)){if(IX.isLocked&&(KH.debug("[device manager] wait GUM lock"),(await IX.lock())(),KH.debug("[device manager] GUM unlock")),AX&&(o=!1,this.isAccessMicrophonePermission=!0),OX&&(s=!1,this.isAccessCameraPermission=!0),KH.debug("[device manager] check media device permissions",e,t,o,s),o&&s){try{d=await navigator.mediaDevices.getUserMedia({audio:!0,video:!0})}catch(e){const t=PX(e.name||e.code||e,e.message);if(t.code===ZB.PERMISSION_DENIED)throw t;KH.warning("getUserMedia failed in getDevices",t)}this.isAccessCameraPermission=!0,this.isAccessMicrophonePermission=!0}else if(o){try{a=await navigator.mediaDevices.getUserMedia({audio:e})}catch(e){const t=PX(e.name||e.code||e,e.message);if(t.code===ZB.PERMISSION_DENIED)throw t;KH.warning("getUserMedia failed in getDevices",t)}this.isAccessMicrophonePermission=!0}else if(s){try{c=await navigator.mediaDevices.getUserMedia({video:t})}catch(e){const t=PX(e.name||e.code||e,e.message);if(t.code===ZB.PERMISSION_DENIED)throw t;KH.warning("getUserMedia failed in getDevices",t)}this.isAccessCameraPermission=!0}KH.debug("[device manager] mic permission",e,"cam permission",t)}try{const e=await navigator.mediaDevices.enumerateDevices();return a&&a.getTracks().forEach((e=>e.stop())),c&&c.getTracks().forEach((e=>e.stop())),d&&d.getTracks().forEach((e=>e.stop())),a=null,c=null,d=null,e}catch(e){return a&&a.getTracks().forEach((e=>e.stop())),c&&c.getTracks().forEach((e=>e.stop())),d&&d.getTracks().forEach((e=>e.stop())),a=null,c=null,d=null,new eG(ZB.ENUMERATE_DEVICES_FAILED,e.toString()).throw()}}async getRecordingDevices(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(await this.enumerateDevices(!0,!1,e)).filter((e=>"audioinput"===e.kind))}async getCamerasDevices(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(await this.enumerateDevices(!1,!0,e)).filter((e=>"videoinput"===e.kind))}async getSpeakers(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(await this.enumerateDevices(!0,!1,e)).filter((e=>"audiooutput"===e.kind))}searchDeviceIdByName(e){let t=null;return this.deviceInfoMap.forEach((n=>{n.device.label===e&&(t=n.device.deviceId)})),t}async getDeviceById(e){const t=(await this.enumerateDevices(!0,!0,!0)).find((t=>t.deviceId===e));if(!t)throw new eG(ZB.DEVICE_NOT_FOUND,"deviceId: ".concat(e));return t}async init(){this.state=rX.INITING;try{await this.updateDevicesInfo(),this.state=rX.INITEND}catch(e){throw KH.warning("Device Detection functionality cannot start properly.",e.toString()),this.state=rX.IDLE,("boolean"==typeof isSecureContext?isSecureContext:"https:"===location.protocol||"file:"===location.protocol||"localhost"===location.hostname||"127.0.0.1"===location.hostname||"::1"===location.hostname)||new eG(ZB.WEB_SECURITY_RESTRICT,"Your context is limited by web security, please try using https protocol or localhost.").throw(),e}}async updateDevicesInfo(){const e=await this.enumerateDevices(!0,!0,!0),t=Date.now(),n=[];if(e[0]&&e[0].label&&!1===this.checkdeviceMatched){this.checkdeviceMatched=!0;const t=e.find((e=>"audioinput"===e.kind&&"default"===e.deviceId)),n=e.find((e=>"audiooutput"===e.kind&&"default"===e.deviceId));t&&n?n.groupId===t.groupId?KH.debug("[device-check] default input ".concat(t.label," and output ").concat(n.label," is the same group")):KH.warning("[device-check] default input ".concat(t.label," and output ").concat(n.label," is not the same group")):KH.debug("[device-check] default input or output not found")}const r=this.checkMediaDeviceInfoIsOk(e);if(e.forEach((e=>{if(!e.deviceId)return;const r=this.deviceInfoMap.get("".concat(e.kind,"_").concat(e.deviceId));if("ACTIVE"!==(r?r.state:"INACTIVE")){const r={initAt:t,updateAt:t,device:e,state:"ACTIVE"};this.deviceInfoMap.set("".concat(e.kind,"_").concat(e.deviceId),r),n.push(r)}r&&(r.updateAt=t)})),this.deviceInfoMap.forEach(((e,r)=>{"ACTIVE"===e.state&&e.updateAt!==t&&(e.state="INACTIVE",n.push(e))})),this.state!==rX.INITEND)return r.audio&&(this.lastAccessMicrophonePermission=!0,this.isAccessMicrophonePermission=!0),void(r.video&&(this.lastAccessCameraPermission=!0,this.isAccessCameraPermission=!0));n.forEach((e=>{switch(e.device.kind){case"audioinput":this.lastAccessMicrophonePermission&&this.isAccessMicrophonePermission&&this.emit(iX.RECORDING_DEVICE_CHANGED,e);break;case"videoinput":this.lastAccessCameraPermission&&this.isAccessCameraPermission&&this.emit(iX.CAMERA_DEVICE_CHANGED,e);break;case"audiooutput":this.lastAccessMicrophonePermission&&this.isAccessMicrophonePermission&&this.emit(iX.PLAYOUT_DEVICE_CHANGED,e)}})),r.audio&&(this.lastAccessMicrophonePermission=!0,this.isAccessMicrophonePermission=!0),r.video&&(this.lastAccessCameraPermission=!0,this.isAccessCameraPermission=!0)}checkMediaDeviceInfoIsOk(e){const t=e.filter((e=>"audioinput"===e.kind)),n=e.filter((e=>"videoinput"===e.kind)),r={audio:!1,video:!1};for(const e of t)if(e.label&&e.deviceId){r.audio=!0;break}for(const e of n)if(e.label&&e.deviceId){r.video=!0;break}return r}};let kX=!1;const MX=new class extends mG{constructor(){super(...arguments),lX(this,"onAutoplayFailed",void 0),lX(this,"onAudioAutoplayFailed",void 0)}};function UX(){if(SB(),!kX){const e=t=>{t.preventDefault(),kX=!1,JB()?document.body.removeEventListener("click",e,!0):(document.body.removeEventListener("touchstart",e,!0),document.body.removeEventListener("mousedown",e,!0))};kX=!0,JB()?document.body.addEventListener("click",e,!0):(document.body.addEventListener("touchstart",e,!0),document.body.addEventListener("mousedown",e,!0)),KH.info("detect media autoplay failed, document: https://docs.agora.io/cn/Voice/autoplay_policy_web_ng?platform=Web"),MX.onAutoplayFailed?MX.onAutoplayFailed():MX.onAudioAutoplayFailed?KH.warning("AgoraRTC.onAudioAutoplayFailed has been deprecated in favor of AgoraRTC.onAutoplayFailed.\n\n  Please refer to the Agora document to migrate the newer API, https://docs.agora.io/en/Voice/autoplay_policy_web_ng?platform=Web ."):KH.warning("We have detected a media autoplay failed event, and found out that you haven't implemented AgoraRTC.onAutoplayFailed callback yet.\n\n  It will cause audio/video element not playing automatically on some browsers without user interaction, possibly hurting user experiences.\n\n  Please refer to the Agora document to properly handle autoplay failed event, https://docs.agora.io/en/Voice/autoplay_policy_web_ng?platform=Web ."),MX.emit("autoplay-failed")}}function VX(e,t,n,r){if(!e)return;const i=ZH.getBaseInfoBySessionId(e);if(!i)return;const o=i.info,s=Date.now(),a=uX(uX({},o),{},{vid:void 0===o.vid?0:Number(o.vid),lts:s,elapse:s-i.startTime,cbRegistered:MX.onAutoplayFailed||MX.onAudioAutoplayFailed?1:-1,errorMsg:n,mediaType:t,trackId:r,extend:void 0});ZH.send({type:XH.AUTOPLAY_FAILED,data:a},!0)}const FX=["play","playing","loadeddata","canplay","pause","stalled","suspend","waiting","abort","emptied","ended","error"],jX=new class{constructor(){lX(this,"onAutoplayFailed",void 0),lX(this,"elementMap",new Map),lX(this,"elementStateMap",new Map),lX(this,"elementsNeedToResume",[]),lX(this,"sinkIdMap",new Map),lX(this,"autoResumeAfterInterruption",(e=>{Array.from(this.elementMap.entries()).forEach((t=>{let[n,r]=t;const i=this.elementStateMap.get(n),o=r.srcObject.getAudioTracks()[0],s=o&&o.readyState;if(KH.debug("resume after interrupted, ele: ".concat(i," audio: ").concat(s," ").concat(e)),"live"===s){if(e)return r.pause(),void r.play();if("running"===_X.curState)return jB()?(r.pause(),void r.play()):void(i&&"paused"===i&&r.play())}}))})),lX(this,"autoResumeAfterInterruptionOnIOS15_16",(()=>{Array.from(this.elementMap.entries()).forEach((e=>{let[t,n]=e;const r=n.srcObject.getAudioTracks()[0];r&&"live"===r.readyState&&(KH.debug("auto resume after interruption inside autoResumeAfterInterruptionOnIOS15"),n.pause(),n.play())}))})),this.autoResumeAudioElement(),_X.on(CJ.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),_X.on(CJ.IOS_15_16_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15_16),_X.on(CJ.STATE_CHANGE,(()=>{NB()&&"suspended"===_X.prevState&&"running"===_X.curState&&this.autoResumeAfterInterruption()}))}async setSinkID(e,t){const n=this.elementMap.get(e);if(this.sinkIdMap.set(e,t),n)try{await n.setSinkId(t)}catch(e){throw new eG(ZB.PERMISSION_DENIED,"can not set sink id: "+e.toString())}}play(e,t,n,r){if(this.elementMap.has(t))return;const i=document.createElement("audio");i.autoplay=!0,i.srcObject=new MediaStream([e]),this.bindAudioElementEvents(t,i),this.elementMap.set(t,i),this.elementStateMap.set(t,oX.INIT),this.setVolume(t,n);const o=this.sinkIdMap.get(t);if(o)try{i.setSinkId(o).catch((e=>{KH.warning("[".concat(t,"] set sink id failed"),e.toString())}))}catch(e){KH.warning("[".concat(t,"] set sink id failed"),e.toString())}const s=i.play();s&&s.then&&s.catch((e=>{r&&VX(r,"audio",e.message,t),KH.warning("audio element play warning",e.toString()),this.elementMap.has(t)&&"NotAllowedError"===e.name&&(KH.warning("detected audio element autoplay failed"),this.elementsNeedToResume.push(i),UG((()=>{this.onAutoplayFailed&&this.onAutoplayFailed(),UX()})))}))}updateTrack(e,t){const n=this.elementMap.get(e);n&&(n.srcObject=new MediaStream([t]))}isPlaying(e){return this.elementMap.has(e)&&"playing"===this.elementStateMap.get(e)}setVolume(e,t){const n=this.elementMap.get(e);n&&(t=Math.max(0,Math.min(100,t)),n.volume=t/100)}stop(e){const t=this.elementMap.get(e);if(this.sinkIdMap.delete(e),!t)return;const n=this.elementsNeedToResume.indexOf(t);this.elementsNeedToResume.splice(n,1),t.srcObject=null,t.remove(),this.elementMap.delete(e),this.elementStateMap.delete(e)}bindAudioElementEvents(e,t){FX.forEach((n=>{t.addEventListener(n,(n=>{const r=this.elementStateMap.get(e),i="pause"===n.type?"paused":n.type;if(KH.debug("[".concat(e,"] audio-element-status change ").concat(r," => ").concat(i)),"error"===n.type){const n=null==t?void 0:t.error;n&&KH.error("[".concat(e,"] media error, code: ").concat(n.code,", message: ").concat(n.message))}this.elementStateMap.set(e,i)}))}))}getPlayerState(e){return this.elementStateMap.get(e)||"uninit"}autoResumeAudioElement(){const e=()=>{this.elementsNeedToResume.forEach((e=>{e.play().then((e=>{KH.debug("Auto resume audio element success")})).catch((e=>{KH.warning("Auto resume audio element failed!",e)}))})),this.elementsNeedToResume=[]};new LO((e=>{document.body?e():window.addEventListener("load",(()=>e()))})).then((()=>{JB()?document.body.addEventListener("click",e,!0):(document.body.addEventListener("touchstart",e,!0),document.body.addEventListener("mousedown",e,!0))}))}};function BX(){return function(e,t,n){const r=n.value;return"function"==typeof r&&(n.value=function(){this._isClosed&&new eG(ZB.INVALID_OPERATION,"[".concat(this.getTrackId(),"] cannot operate a closed track")).print("warning",KH);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const i=r.apply(this,t);return i instanceof LO?new LO(((e,t)=>{i.then(e).catch(t)})):i}),n}}class GX extends mG{constructor(e){super(),lX(this,"name","VideoProcessorDestination"),lX(this,"ID","0"),lX(this,"_source",void 0),lX(this,"videoContext",void 0),lX(this,"inputTrack",void 0),this.videoContext=e}get kind(){return"video"}get enabled(){return!0}pipe(){throw new eG(ZB.NOT_SUPPORTED,"VideoProcessor cannot pipe to any other Processor")}unpipe(){throw new eG(ZB.NOT_SUPPORTED,"VideoProcessor cannot unpipe to any other Processor")}enable(){}disable(){}updateInput(e){if(e.context!==this.videoContext)throw new Error("ProcessorContext passed to VideoTrack.processorDestination doesn't match it's belonging VideoTrack's context.\nProbably you are making pipeline like this:\nvideoTrack1.pipe(processor).pipe(videoTrack2.processorDestination).");e.track&&e.track!==this.inputTrack&&(this.videoContext.chained=!0,this.inputTrack=e.track,this.emit(tX.ON_TRACK,e.track))}reset(){this.inputTrack=void 0,this.videoContext.chained=!1,this.emit(tX.ON_TRACK,void 0)}}class HX extends mG{set chained(e){this._chained=e}get chained(){return this._chained}constructor(e,t){super(),lX(this,"constraintsMap",new Map),lX(this,"statsRegistry",[]),lX(this,"usageRegistry",[]),lX(this,"trackId",void 0),lX(this,"direction",void 0),lX(this,"_chained",!1),this.trackId=e,this.direction=t}async getConstraints(){return await xG(this,nX.REQUEST_CONSTRAINTS)}async requestApplyConstraints(e,t){var n;return KH.info("processor ".concat(t.name," requestApplyConstraints for ").concat(this.trackId)),e&&this.constraintsMap.set(t,e),NG(this,nX.REQUEST_UPDATE_CONSTRAINTS,Array.from(Fz(n=this.constraintsMap).call(n)))}async requestRevertConstraints(e){var t;if(this.constraintsMap.has(e))return KH.info("processor ".concat(e.name," requestRevertConstraints for ").concat(this.trackId)),this.constraintsMap.delete(e),NG(this,nX.REQUEST_UPDATE_CONSTRAINTS,Array.from(Fz(t=this.constraintsMap).call(t)))}registerStats(e,t,n){this.statsRegistry.find((n=>n.processorID===e.ID&&n.processorName===e.name&&n.type===t))||this.statsRegistry.push({processorName:e.name,processorID:e.ID,type:t,cb:n})}unregisterStats(e,t){const n=this.statsRegistry.findIndex((n=>n.processorID===e.ID&&n.processorName===e.name&&n.type===t));-1!==n&&this.statsRegistry.splice(n,1)}gatherStats(){const e=[];for(const{processorID:t,processorName:n,type:r,cb:i}of this.statsRegistry)try{const o=i();e.push({processorID:t,processorName:n,type:r,stats:o})}catch(e){KH.error(new eG(ZB.UNEXPECTED_ERROR,e.message))}return e}registerUsage(e,t){this.usageRegistry.find((t=>t.processorID===e.ID&&t.processorName===e.name))||this.usageRegistry.push({processorID:e.ID,processorName:e.name,cb:t})}unregisterUsage(e){const t=this.usageRegistry.findIndex((t=>t.processorID===e.ID&&t.processorName===e.name));-1!==t&&this.usageRegistry.splice(t,1)}async gatherUsage(){const e=[];if(!this.chained)return[];for(const{cb:t}of this.usageRegistry)try{let n=t();n instanceof LO&&(n=await n),e.push(uX(uX({},n),{},{direction:this.direction}))}catch(e){KH.error("gather extension usage error",e)}return e}getDirection(){return this.direction}}class WX extends mG{constructor(e){super(),lX(this,"name","AudioProcessorDestination"),lX(this,"ID","0"),lX(this,"inputTrack",void 0),lX(this,"inputNode",void 0),lX(this,"audioProcessorContext",void 0),lX(this,"_source",void 0),this.audioProcessorContext=e}get kind(){return"audio"}get enabled(){return!0}pipe(){throw new eG(ZB.NOT_SUPPORTED,"AudioProcessorDestination cannot pipe to any other Processor")}unpipe(){throw new eG(ZB.NOT_SUPPORTED,"AudioProcessor cannot unpipe to any other Processor")}enable(){}disable(){}reset(){this.inputTrack=void 0,this.inputNode=void 0,this.audioProcessorContext.chained=!1,this.emit(tX.ON_TRACK,void 0),this.emit(tX.ON_NODE,void 0)}updateInput(e){if(e.context!==this.audioProcessorContext)throw new Error("ProcessorContext passed to AudioTrack.processorDestination doesn't match it's belonging AudioTrack's context.\n        Probably you are making pipeline like this: audioTrack1.pipe(processor).pipe(audioTrack2.processorDestination).");e.track&&this.inputTrack!==e.track&&(this.audioProcessorContext.chained=!0,this.inputTrack=e.track,this.emit(tX.ON_TRACK,this.inputTrack)),e.node&&this.inputNode!==e.node&&(this.audioProcessorContext.chained=!0,this.inputNode=e.node,this.emit(tX.ON_NODE,this.inputNode))}}class KX extends mG{set chained(e){this._chained=e}get chained(){return this._chained}constructor(e,t,n){super(),lX(this,"constraintsMap",new Map),lX(this,"statsRegistry",[]),lX(this,"audioContext",void 0),lX(this,"trackId",void 0),lX(this,"direction",void 0),lX(this,"usageRegistry",[]),lX(this,"_chained",!1),this.audioContext=e,this.trackId=t,this.direction=n}async getConstraints(){return xG(this,nX.REQUEST_CONSTRAINTS)}getAudioContext(){return this.audioContext}async requestApplyConstraints(e,t){var n;return KH.info("processor ".concat(t.name," requestApplyConstraints for ").concat(this.trackId)),e&&this.constraintsMap.set(t,e),NG(this,nX.REQUEST_UPDATE_CONSTRAINTS,Array.from(Fz(n=this.constraintsMap).call(n)))}async requestRevertConstraints(e){var t;if(this.constraintsMap.has(e))return this.constraintsMap.delete(e),NG(this,nX.REQUEST_UPDATE_CONSTRAINTS,Array.from(Fz(t=this.constraintsMap).call(t)))}registerStats(e,t,n){this.statsRegistry.find((n=>n.processorID===e.ID&&n.processorName===e.name&&n.type===t))||this.statsRegistry.push({processorName:e.name,processorID:e.ID,type:t,cb:n})}unregisterStats(e,t){const n=this.statsRegistry.findIndex((n=>n.processorID===e.ID&&n.processorName===e.name&&n.type===t));-1!==n&&this.statsRegistry.splice(n,1)}gatherStats(){const e=[];for(const{processorID:t,processorName:n,type:r,cb:i}of this.statsRegistry)try{const o=i();e.push({processorID:t,processorName:n,type:r,stats:o})}catch(e){KH.error(new eG(ZB.UNEXPECTED_ERROR,e.message))}return e}registerUsage(e,t){this.usageRegistry.find((t=>t.processorID===e.ID&&t.processorName===e.name))||this.usageRegistry.push({processorID:e.ID,processorName:e.name,cb:t})}unregisterUsage(e){const t=this.usageRegistry.findIndex((t=>t.processorID===e.ID&&t.processorName===e.name));-1!==t&&this.usageRegistry.splice(t,1)}async gatherUsage(){const e=[];if(!this.chained)return[];for(const{cb:t}of this.usageRegistry)try{let n=t();n instanceof LO&&(n=await n),e.push(uX(uX({},n),{},{direction:this.direction}))}catch(e){KH.error("gather extension usage error",e)}return e}getDirection(){return this.direction}}class zX extends mG{get isPlayed(){return!0}get isFreeze(){return!1}constructor(){super(),lX(this,"context",void 0),lX(this,"processSourceNode",void 0),lX(this,"outputTrack",void 0),lX(this,"processedNode",void 0),lX(this,"clonedTrack",void 0),lX(this,"outputNode",void 0),this.outputNode=new qX}setVolume(){}createOutputTrack(){throw new eG(ZB.NOT_SUPPORTED,"can not create output MediaStreamTrack when WebAudio disabled")}getOriginVolumeLevel(){return 0}getAccurateVolumeLevel(){return 0}stopGetAudioBuffer(){}startGetAudioBuffer(){}play(){}stop(){}destroy(){}updateTrack(){}updateOriginTrack(){}createMediaStreamSourceNode(){}}class qX{disconnect(){}connect(){}}function YX(e){return new LO(((t,n)=>{let r=!1;const i=document.createElement("video");i.setAttribute("autoplay",""),i.setAttribute("muted",""),i.muted=!0,i.autoplay=!0,i.setAttribute("playsinline",""),i.setAttribute("style","position: fixed; top: 0; left: 0; width: 1px; height: 1px"),document.body.appendChild(i);const o=NB()?"canplay":"playing";i.addEventListener(o,(()=>{const e=i.videoWidth,n=i.videoHeight;!e&&xB()||(r=!0,i.srcObject=null,i.remove(),t([e,n]))})),i.srcObject=new MediaStream([e]),i.play().catch($G),setTimeout((()=>{r||(i.srcObject=null,i.remove(),t([i.videoWidth,i.videoHeight]))}),4e3)}))}function JX(e){const t={};e.facingMode&&(t.facingMode=e.facingMode),e.cameraId&&(t.deviceId={exact:e.cameraId});const n=DJ(e.encoderConfig);return null!=n.width&&(t.width=n.width),null!=n.height&&(t.height=n.height),!KB()&&n.frameRate&&(t.frameRate=n.frameRate),OB()&&"object"==typeof t.frameRate&&(t.frameRate.max=60),xB()&&(t.frameRate={ideal:30,max:30}),t}function XX(e){const t={};if(KB()||(void 0!==e.AGC&&(t.autoGainControl=e.AGC),void 0!==e.AEC&&(t.echoCancellation=e.AEC),void 0!==e.ANS&&(t.noiseSuppression=e.ANS,IB()&&e.ANS&&(t.googHighpassFilter=e.ANS))),e.encoderConfig){const n=UJ(e.encoderConfig);t.channelCount=n.stereo?2:1,t.sampleRate=n.sampleRate,t.sampleSize=n.sampleSize}return e.microphoneId&&(t.deviceId={exact:e.microphoneId}),YB()&&(t.sampleRate=void 0),t}const QX=async(e,t,n)=>await(async(e,t,n)=>{const r=function(e){const t=[];for(let n=0;n<e.length;n+=2)t.push(parseInt(e.slice(n,n+2),16));return Uint8Array.from(t)}(oH(""+t+n)).slice(0,16),i=r.slice(0,12),o=await window.crypto.subtle.importKey("raw",r,"AES-GCM",!0,["encrypt"]);return new Uint8Array(await window.crypto.subtle.encrypt({name:"AES-GCM",iv:i},o,e))})(e.buffer,t,n),$X=e=>{const t=document.createElement("canvas");return t.width=2,t.height=2,new LO(((n,r)=>{t.toBlob((async e=>{if(t.remove(),e){const r=await ZX(e);n({buffer:r,width:t.width,height:t.height})}else r(new eG(ZB.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED))}),e,1)}))},ZX=async e=>{const t=await e.arrayBuffer();return new Uint8Array(t)};var eQ,tQ,nQ,rQ,iQ,oQ,sQ,aQ,cQ,dQ,lQ,hQ,uQ,pQ,fQ,mQ,gQ,_Q,EQ,yQ,vQ,bQ,SQ,TQ,RQ,CQ,wQ,IQ,AQ,OQ,xQ,NQ,PQ,DQ,LQ,kQ,MQ,UQ,VQ,FQ;let jQ=(eQ=$H({argsMap:(e,t)=>[e.getTrackId(),t],throttleTime:300}),tQ=$H({argsMap:(e,t)=>[e.getTrackId(),t]}),nQ=BX(),rQ=dH("LocalAudioTrack","_enabledMutex"),iQ=$H({argsMap:(e,t)=>[e.getTrackId(),t]}),oQ=BX(),sQ=dH("LocalAudioTrack","_enabledMutex"),aQ=$H({argsMap:(e,t)=>[e.getTrackId(),t]}),cQ=BX(),dQ=BX(),lQ=BX(),hQ=$H({argsMap:e=>[e.getTrackId()]}),uQ=BX(),pQ=$H({argsMap:e=>[e.getTrackId()]}),fQ=BX(),mQ=$H({argsMap:e=>[e.getTrackId()]}),gQ=$H({argsMap:(e,t)=>[e.getTrackId(),t.name]}),_Q=$H({argsMap:e=>[e.getTrackId()]}),dX((EQ=class extends fX{get _source(){return this.initWebAudio()}set _source(e){this._trackSource=e}get processorContext(){return this._processorContext||(this._processorContext=this.initProcessor().processorContext),this._processorContext}get processorDestination(){return this._processorDestination||(this._processorDestination=this.initProcessor().processorDestination),this._processorDestination}get isPlaying(){return this._useAudioElement?jX.isPlaying(this.getTrackId()):this._source.isPlayed}get __className__(){return"LocalAudioTrack"}constructor(e,t,n,r){super(e,n),lX(this,"trackMediaType",YJ.AUDIO),lX(this,"_encoderConfig",void 0),lX(this,"_trackSource",void 0),lX(this,"_enabled",!0),lX(this,"_volume",100),lX(this,"_useAudioElement",!0),lX(this,"_bypassWebAudio",!1),lX(this,"processor",void 0),lX(this,"_processorContext",void 0),lX(this,"_processorDestination",void 0),lX(this,"_getOriginVolumeLevel",void 0),this._encoderConfig=t,this._getOriginVolumeLevel=!!r,this._trackSource=new zX,AH("DISABLE_WEBAUDIO")&&(this._bypassWebAudio=!0),AH("LOCAL_AUDIO_TRACK_USES_WEB_AUDIO")&&(this._useAudioElement=!1),AB()&&!gX?setTimeout((()=>this.initWebAudio())):this.initWebAudio()}setVolume(e){rG(e,"volume",0,1e3),this._volume=e,this._source.setVolume(e/100),this._useAudioElement&&jX.setVolume(this.getTrackId(),e);try{if(this._bypassWebAudio)return void KH.debug("[".concat(this.getTrackId(),"] setVolume returned because no pass through WebAudio."));const e=this._source.createOutputTrack();this._mediaStreamTrack!==e&&(this._mediaStreamTrack=e,NG(this,jJ.NEED_REPLACE_TRACK,this).then((()=>{KH.debug("[".concat(this.getTrackId(),"] replace web audio track success"))})).catch((e=>{KH.warning("[".concat(this.getTrackId(),"] replace web audio track failed"),e)})))}catch(e){}}getVolumeLevel(){return this._muted&&this.enabled&&this._getOriginVolumeLevel?this._source.getOriginVolumeLevel():this._source.getAccurateVolumeLevel()}async setPlaybackDevice(e){if(!this._useAudioElement||!TJ())throw new eG(ZB.NOT_SUPPORTED,"your browser does not support setting the audio output device");await jX.setSinkID(this.getTrackId(),e)}async setEnabled(e,t,n){return this._setEnabled(e,t,n)}async _setEnabled(e,t,n){if(!n){if(e===this._enabled)return;this.stateCheck("enabled",e)}if(KH.info("[".concat(this.getTrackId(),"] start setEnabled"),e),e){this._originMediaStreamTrack.enabled=!0;try{n||(this._enabled=!0),await NG(this,jJ.NEED_ENABLE_TRACK,this),KH.info("[".concat(this.getTrackId(),"] setEnabled to ").concat(e," success"))}catch(e){throw n||(this._enabled=!1),KH.error("[".concat(this.getTrackId(),"] setEnabled to true error"),e.toString()),e}}else{this._originMediaStreamTrack.enabled=!1,n||(this._enabled=!1);try{await NG(this,jJ.NEED_DISABLE_TRACK,this)}catch(e){throw n||(this._enabled=!0),KH.error("[".concat(this.getTrackId(),"] setEnabled to false error"),e.toString()),e}}}async setMuted(e){e!==this._muted&&(this.stateCheck("muted",e),this._muted=e,this._originMediaStreamTrack.enabled=!e,KH.debug("[".concat(this.getTrackId(),"] start set muted: ").concat(e)),e?await NG(this,jJ.NEED_MUTE_TRACK,this):await NG(this,jJ.NEED_UNMUTE_TRACK,this))}getStats(){return BG((()=>{KH.warning("[deprecated] LocalAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalAudioStats instead")}),"localAudioTrackGetStatsWarning"),PG(this,jJ.GET_STATS)||uX({},XJ)}setAudioFrameCallback(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4096;if(!e)return this._source.removeAllListeners(JJ.ON_AUDIO_BUFFER),void this._source.stopGetAudioBuffer();this._source.startGetAudioBuffer(t),this._source.removeAllListeners(JJ.ON_AUDIO_BUFFER),this._source.on(JJ.ON_AUDIO_BUFFER,(t=>e(t)))}play(){KH.debug("[".concat(this.getTrackId(),"] start audio playback")),this._useAudioElement?(KH.debug("[".concat(this.getTrackId(),"] start audio playback in element")),jX.play(this._mediaStreamTrack,this.getTrackId(),this._volume)):this._source.play()}stop(){KH.debug("[".concat(this.getTrackId(),"] stop audio playback")),this._useAudioElement?jX.stop(this.getTrackId()):this._source.stop()}close(){super.close(),this._processorDestination&&this.unbindProcessorDestinationEvents(this._processorDestination),this._processorContext&&this.unbindProcessorContextEvents(this._processorContext),this.unpipe(),this._processorDestination&&this._processorDestination._source&&this._processorDestination._source.unpipe(),this._source.destroy()}_updatePlayerSource(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];KH.debug("[".concat(this.getTrackId(),"] update player source track")),e&&this._source.updateTrack(this._mediaStreamTrack),this._useAudioElement&&jX.updateTrack(this.getTrackId(),this._mediaStreamTrack)}async _updateOriginMediaStreamTrack(e,t){this._originMediaStreamTrack!==e&&(this._originMediaStreamTrack&&(this._originMediaStreamTrack.removeEventListener("ended",this._handleTrackEnded),t&&this._originMediaStreamTrack.stop()),e.addEventListener("ended",this._handleTrackEnded),this._originMediaStreamTrack=e,this._muted&&(this._originMediaStreamTrack.enabled=!1),this.processor&&this._processorContext&&this.processor.updateInput({track:e,context:this._processorContext}),this._mediaStreamTrack!==this._source.outputTrack?(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await NG(this,jJ.NEED_REPLACE_TRACK,this)):this._source.updateTrack(this._originMediaStreamTrack),this._getOriginVolumeLevel&&this._source.updateOriginTrack(e))}renewMediaStreamTrack(e){return LO.resolve(void 0)}pipe(e){if(this._bypassWebAudio)throw new eG(ZB.INVALID_OPERATION,"Can not process AudioTrack when bypassWebAudio set to true.");if(this.processor===e)return e;if(e._source)throw new eG(ZB.INVALID_OPERATION,"Processor ".concat(e.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=e,this.processor._source=this,e.updateInput({track:this._originMediaStreamTrack,node:this._source.processSourceNode,context:this.processorContext}),e}unpipe(){var e;if(!this.processor)return;const t=this.processor;null===(e=this._source.processSourceNode)||void 0===e||e.disconnect(),this.processor._source=!1,this.processor=void 0,t.reset()}bindProcessorDestinationEvents(e){e.on(tX.ON_TRACK,(async e=>{e?e!==this._mediaStreamTrack&&(this._mediaStreamTrack=e,this._updatePlayerSource(!1),this._source.processedNode=this._source.createMediaStreamSourceNode(e),await NG(this,jJ.NEED_REPLACE_TRACK,this)):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await NG(this,jJ.NEED_REPLACE_TRACK,this))})),e.on(tX.ON_NODE,(e=>{this._source.processedNode=e}))}unbindProcessorDestinationEvents(e){e.removeAllListeners(tX.ON_TRACK),e.removeAllListeners(tX.ON_NODE)}bindProcessorContextEvents(e){e.on(nX.REQUEST_CONSTRAINTS,(async e=>{e(this._originMediaStreamTrack.getSettings())}))}unbindProcessorContextEvents(e){e.removeAllListeners(nX.REQUEST_CONSTRAINTS)}initWebAudio(){return this._trackSource instanceof zX&&(this._trackSource=new RX(this._mediaStreamTrack,!1,this._getOriginVolumeLevel?this._mediaStreamTrack:void 0)),this._trackSource}initProcessor(){const e=new KX(this._source.context,this.getTrackId(),"local"),t=new WX(e);return this._processorContext=e,this._processorDestination=t,this.bindProcessorContextEvents(e),this.bindProcessorDestinationEvents(t),this._source.on(JJ.UPDATE_SOURCE,(()=>{this.processor&&this.processor.updateInput({node:this._source.processSourceNode,context:e})})),this._useAudioElement&&(this._useAudioElement=!1,this.isPlaying&&(jX.stop(this.getTrackId()),this._source.play()),NG(this,jJ.NEED_REPLACE_MIXING_TRACK,this).then((()=>{KH.debug("[".concat(this.getTrackId(),"] replace from origin track to web audio track success"))})).catch((e=>{KH.warning("[".concat(this.getTrackId(),"] replace from origin track to web audio track failed"),e)}))),{processorContext:e,processorDestination:t}}}).prototype,"setVolume",[eQ],Object.getOwnPropertyDescriptor(EQ.prototype,"setVolume"),EQ.prototype),dX(EQ.prototype,"setPlaybackDevice",[tQ,nQ],Object.getOwnPropertyDescriptor(EQ.prototype,"setPlaybackDevice"),EQ.prototype),dX(EQ.prototype,"setEnabled",[rQ,iQ,oQ],Object.getOwnPropertyDescriptor(EQ.prototype,"setEnabled"),EQ.prototype),dX(EQ.prototype,"setMuted",[sQ,aQ,cQ],Object.getOwnPropertyDescriptor(EQ.prototype,"setMuted"),EQ.prototype),dX(EQ.prototype,"getStats",[dQ],Object.getOwnPropertyDescriptor(EQ.prototype,"getStats"),EQ.prototype),dX(EQ.prototype,"setAudioFrameCallback",[lQ],Object.getOwnPropertyDescriptor(EQ.prototype,"setAudioFrameCallback"),EQ.prototype),dX(EQ.prototype,"play",[hQ,uQ],Object.getOwnPropertyDescriptor(EQ.prototype,"play"),EQ.prototype),dX(EQ.prototype,"stop",[pQ,fQ],Object.getOwnPropertyDescriptor(EQ.prototype,"stop"),EQ.prototype),dX(EQ.prototype,"close",[mQ],Object.getOwnPropertyDescriptor(EQ.prototype,"close"),EQ.prototype),dX(EQ.prototype,"pipe",[gQ],Object.getOwnPropertyDescriptor(EQ.prototype,"pipe"),EQ.prototype),dX(EQ.prototype,"unpipe",[_Q],Object.getOwnPropertyDescriptor(EQ.prototype,"unpipe"),EQ.prototype),EQ),BQ=(yQ=$H({argsMap:(e,t)=>[e.getTrackId(),t]}),vQ=BX(),bQ=dH("MicrophoneAudioTrack","_enabledMutex"),SQ=$H({argsMap:(e,t,n)=>[e.getTrackId(),t,n]}),TQ=BX(),RQ=$H({argsMap:e=>[e.getTrackId()]}),dX((CQ=class extends jQ{get __className__(){return"MicrophoneAudioTrack"}constructor(e,t,n,r){super(e,t.encoderConfig?UJ(t.encoderConfig):{},r,AH("GET_VOLUME_OF_MUTED_AUDIO_TRACK")),lX(this,"_config",void 0),lX(this,"_deviceName","default"),lX(this,"_constraints",void 0),lX(this,"_originalConstraints",void 0),lX(this,"_enabled",!0),this._config=t,this._constraints=n,this._originalConstraints=n,this._deviceName=e.label,"boolean"==typeof t.bypassWebAudio&&(this._bypassWebAudio=t.bypassWebAudio),(jB()||BB())&&_X.bindInterruptDetectorTrack(this)}async setDevice(e){if(KH.info("[".concat(this.getTrackId(),"] start set device to ").concat(e)),this._enabled)try{const t=await LX.getDeviceById(e),n={};n.audio=uX({},this._constraints),n.audio.deviceId={exact:e},this._originMediaStreamTrack.stop();let r=null;try{r=await xX(n,this.getTrackId())}catch(e){throw KH.error("[".concat(this.getTrackId(),"] setDevice failed"),e.toString()),r=await xX({audio:this._constraints},this.getTrackId()),await this._updateOriginMediaStreamTrack(r.getAudioTracks()[0],!1),e}await this._updateOriginMediaStreamTrack(r.getAudioTracks()[0],!1),this._deviceName=t.label,this._config.microphoneId=e,this._constraints.deviceId={exact:e}}catch(e){throw KH.error("[".concat(this.getTrackId(),"] setDevice error"),e.toString()),e}else try{const t=await LX.getDeviceById(e);this._deviceName=t.label,this._config.microphoneId=e,this._constraints.deviceId={exact:e}}catch(e){throw KH.error("[".concat(this.getTrackId(),"] setDevice error"),e.toString()),e}KH.info("[".concat(this.getTrackId(),"] set device to ").concat(e," success"))}async setEnabled(e,t,n){if(t)return KH.debug("[".concat(this.getTrackId(),"] setEnabled false (do not close microphone)")),await super._setEnabled(e);if(!n){if(e===this._enabled)return;this.stateCheck("enabled",e)}if(KH.info("[".concat(this.getTrackId(),"] start setEnabled"),e),AH("AUTO_RESET_AUDIO_ROUTE")&&(NB()||HB())){const t=navigator.audioSession;t&&(e||(t.type="playback"),t.type="auto")}if(!e){var r;this._originMediaStreamTrack.onended=null,this._originMediaStreamTrack.stop(),null===(r=this._source.clonedTrack)||void 0===r||r.stop(),n||(this._enabled=!1);try{await NG(this,jJ.NEED_DISABLE_TRACK,this)}catch(e){throw KH.error("[".concat(this.getTrackId(),"] setEnabled false failed"),e.toString()),e}return}const i=uX({},this._constraints),o=LX.searchDeviceIdByName(this._deviceName);o&&!i.deviceId&&(i.deviceId=o);try{n||(this._enabled=!0);const e=await xX({audio:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(e.getAudioTracks()[0],!1),await NG(this,jJ.NEED_ENABLE_TRACK,this)}catch(e){throw n||(this._enabled=!1),KH.error("[".concat(this.getTrackId(),"] setEnabled true failed"),e.toString()),e}KH.info("[".concat(this.getTrackId(),"] setEnabled success"))}close(){super.close(),(jB()||BB())&&_X.unbindInterruptDetectorTrack(this)}onTrackEnded(){if((NB()||HB())&&this._enabled&&!this._isClosed&&_X.duringInterruption){const e=async()=>{_X.off(CJ.IOS_INTERRUPTION_END,e),this._enabled&&!this._isClosed&&(KH.debug("[".concat(this.getTrackId(),"] try capture microphone media device for interrupted iOS device.")),await this.setEnabled(!1),await this.setEnabled(!0))};_X.on(CJ.IOS_INTERRUPTION_END,e)}else KH.debug("[".concat(this.getTrackId(),"] track ended")),this.safeEmit(zJ.TRACK_ENDED)}async renewMediaStreamTrack(e){const t=e||this._constraints,n=LX.searchDeviceIdByName(this._deviceName);if(n&&!t.deviceId&&(t.deviceId=n),this._constraints=t,this._enabled){this._originMediaStreamTrack.stop();const e=await xX({audio:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(e.getAudioTracks()[0],!0)}}bindProcessorContextEvents(e){super.bindProcessorContextEvents(e),e.on(nX.REQUEST_UPDATE_CONSTRAINTS,(async(e,t,n)=>{try{const n=Object.assign({},this._originalConstraints,...e);await this.renewMediaStreamTrack(n),t()}catch(e){n(e)}}))}unbindProcessorContextEvents(e){super.unbindProcessorContextEvents(e),e.removeAllListeners(nX.REQUEST_UPDATE_CONSTRAINTS)}}).prototype,"setDevice",[yQ,vQ],Object.getOwnPropertyDescriptor(CQ.prototype,"setDevice"),CQ.prototype),dX(CQ.prototype,"setEnabled",[bQ,SQ,TQ],Object.getOwnPropertyDescriptor(CQ.prototype,"setEnabled"),CQ.prototype),dX(CQ.prototype,"close",[RQ],Object.getOwnPropertyDescriptor(CQ.prototype,"close"),CQ.prototype),CQ),GQ=(wQ=$H({argsMap:(e,t)=>[e.getTrackId(),t,e.duration]}),IQ=BX(),AQ=$H({argsMap:e=>[e.getTrackId()]}),OQ=BX(),xQ=$H({argsMap:e=>[e.getTrackId()]}),NQ=BX(),PQ=$H({argsMap:e=>[e.getTrackId()]}),DQ=BX(),LQ=$H({argsMap:e=>[e.getTrackId()]}),kQ=BX(),MQ=$H({argsMap:e=>[e.getTrackId()]}),UQ=$H({argsMap:e=>[e.getTrackId()]}),VQ=BX(),dX((FQ=class extends jQ{get __className__(){return"BufferSourceAudioTrack"}constructor(e,t,n,r){super(t.createOutputTrack(),n,r),lX(this,"source",void 0),lX(this,"_bufferSource",void 0),this._useAudioElement=!1,this.source=e,this._bufferSource=t,this._bufferSource.on(JJ.AUDIO_SOURCE_STATE_CHANGE,(e=>{this.safeEmit(zJ.SOURCE_STATE_CHANGE,e)}));try{this._mediaStreamTrack=this._source.createOutputTrack()}catch(e){}}get currentState(){return this._bufferSource.currentState}get duration(){return this._bufferSource.duration}get playbackSpeed(){return this._bufferSource.playbackSpeed}getCurrentTime(){return this._bufferSource.currentTime}startProcessAudioBuffer(e){e&&this._bufferSource.updateOptions(e),this._bufferSource.startProcessAudioBuffer()}pauseProcessAudioBuffer(){this._bufferSource.pauseProcessAudioBuffer()}seekAudioBuffer(e){this._bufferSource.seekAudioBuffer(e)}resumeProcessAudioBuffer(){this._bufferSource.resumeProcessAudioBuffer()}stopProcessAudioBuffer(){this._bufferSource.stopProcessAudioBuffer()}close(){this.source=null,this._bufferSource.destroy(),super.close()}setAudioBufferPlaybackSpeed(e){rG(e,"speed",0),this._bufferSource.setAudioBufferPlaybackSpeed(e)}}).prototype,"startProcessAudioBuffer",[wQ,IQ],Object.getOwnPropertyDescriptor(FQ.prototype,"startProcessAudioBuffer"),FQ.prototype),dX(FQ.prototype,"pauseProcessAudioBuffer",[AQ,OQ],Object.getOwnPropertyDescriptor(FQ.prototype,"pauseProcessAudioBuffer"),FQ.prototype),dX(FQ.prototype,"seekAudioBuffer",[xQ,NQ],Object.getOwnPropertyDescriptor(FQ.prototype,"seekAudioBuffer"),FQ.prototype),dX(FQ.prototype,"resumeProcessAudioBuffer",[PQ,DQ],Object.getOwnPropertyDescriptor(FQ.prototype,"resumeProcessAudioBuffer"),FQ.prototype),dX(FQ.prototype,"stopProcessAudioBuffer",[LQ,kQ],Object.getOwnPropertyDescriptor(FQ.prototype,"stopProcessAudioBuffer"),FQ.prototype),dX(FQ.prototype,"close",[MQ],Object.getOwnPropertyDescriptor(FQ.prototype,"close"),FQ.prototype),dX(FQ.prototype,"setAudioBufferPlaybackSpeed",[UQ,VQ],Object.getOwnPropertyDescriptor(FQ.prototype,"setAudioBufferPlaybackSpeed"),FQ.prototype),FQ);class HQ extends jQ{get __className__(){return"MixingAudioTrack"}get isActive(){for(const e of this.trackList)if(e._enabled&&!e._isClosed&&!e.muted)return!0;return!1}constructor(){const e=EX().createMediaStreamDestination();super(e.stream.getAudioTracks()[0],void 0,XG(8,"track-mix-")),lX(this,"trackList",void 0),lX(this,"destNode",void 0),this._useAudioElement=!1;try{this._mediaStreamTrack=this._source.createOutputTrack()}catch(e){}this.destNode=e,this.trackList=[]}hasAudioTrack(e){return-1!==this.trackList.indexOf(e)}addAudioTrack(e){-1===this.trackList.indexOf(e)?(KH.debug("add ".concat(e.getTrackId()," to mixing track")),e._source.outputNode.connect(this.destNode),this.trackList.push(e),this.updateEncoderConfig()):KH.debug("track ".concat(e.getTrackId()," is already added"))}removeAudioTrack(e){if(-1!==this.trackList.indexOf(e)){KH.debug("remove ".concat(e.getTrackId()," from mixing track"));try{e._source.outputNode.disconnect(this.destNode)}catch(e){}kG(this.trackList,e),this.updateEncoderConfig()}}updateEncoderConfig(){const e={};this.trackList.forEach((t=>{t._encoderConfig&&((t._encoderConfig.bitrate||0)>(e.bitrate||0)&&(e.bitrate=t._encoderConfig.bitrate),(t._encoderConfig.sampleRate||0)>(e.sampleRate||0)&&(e.sampleRate=t._encoderConfig.sampleRate),(t._encoderConfig.sampleSize||0)>(e.sampleSize||0)&&(e.sampleSize=t._encoderConfig.sampleSize),t._encoderConfig.stereo&&(e.stereo=!0))})),this._encoderConfig=e}_updateRtpTransceiver(e){this._rtpTransceiver!==e&&(this._rtpTransceiver=e,this.trackList.forEach((t=>{t instanceof HQ?t.emit(KJ.TRANSCEIVER_UPDATED,e):t._updateRtpTransceiver(e)})))}}class WQ extends TX{set currentState(e){e!==this._currentState&&(this._currentState=e,this.safeEmit(JJ.AUDIO_SOURCE_STATE_CHANGE,this._currentState))}get currentState(){return this._currentState}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),lX(this,"audioBuffer",void 0),lX(this,"sourceNode",void 0),lX(this,"startPlayTime",0),lX(this,"startPlayOffset",0),lX(this,"pausePlayTime",0),lX(this,"options",void 0),lX(this,"currentLoopCount",0),lX(this,"currentPlaybackSpeed",100),lX(this,"_currentState","stopped"),this.audioBuffer=e,this.options=t,this.startPlayOffset=this.options.startPlayTime||0}createWebAudioDiagram(){return this.context.createGain()}get duration(){return this.audioBuffer?this.audioBuffer.duration:0}get playbackSpeed(){return this.currentPlaybackSpeed}get currentTime(){return this.audioBuffer?"stopped"===this.currentState?0:"paused"===this.currentState?this.pausePlayTime:((this.context.currentTime-this.startPlayTime)*(this.playbackSpeed/100)+this.startPlayOffset)%this.audioBuffer.duration:0}updateOptions(e){"stopped"===this.currentState?(this.options=e,this.startPlayOffset=this.options.startPlayTime||0):KH.warning("can not set audio source options")}startProcessAudioBuffer(){this.sourceNode&&this.stopProcessAudioBuffer(),this.sourceNode=this.createSourceNode(),this.startSourceNode(),this.currentState="playing"}pauseProcessAudioBuffer(){this.sourceNode&&"playing"===this.currentState&&(this.pausePlayTime=this.currentTime,this.sourceNode.onended=null,this.sourceNode.stop(),this.sourceNode.buffer=null,this.sourceNode=this.createSourceNode(),this.currentState="paused")}seekAudioBuffer(e){this.sourceNode&&(this.sourceNode.onended=null,"playing"===this.currentState&&this.sourceNode.stop(),this.sourceNode=this.createSourceNode(),"playing"===this.currentState?(this.startPlayOffset=e,this.startSourceNode()):"paused"===this.currentState&&(this.pausePlayTime=e))}resumeProcessAudioBuffer(){"paused"===this.currentState&&this.sourceNode&&(this.startPlayOffset=this.pausePlayTime,this.pausePlayTime=0,this.startSourceNode(),this.currentState="playing")}stopProcessAudioBuffer(){if(this.sourceNode){this.sourceNode.onended=null;try{this.sourceNode.stop()}catch(e){}this.reset()}}destroy(){this.audioBuffer=null,super.destroy()}setAudioBufferPlaybackSpeed(e){this.sourceNode&&("playing"===this.currentState&&(this.startPlayOffset=this.currentTime,this.startPlayTime=this.context.currentTime),this.sourceNode.playbackRate.value=e/100),this.currentPlaybackSpeed=e}startSourceNode(){this.sourceNode&&this.sourceNode.buffer&&(this.sourceNode.start(0,this.startPlayOffset),this.startPlayTime=this.context.currentTime,this.sourceNode.onended=this.handleSourceNodeEnded.bind(this))}createSourceNode(){const e=this.context.createBufferSource();return e.buffer=this.audioBuffer,e.loop=!!this.options.loop,e.connect(this.outputNode),e.playbackRate.value=this.currentPlaybackSpeed/100,e}handleSourceNodeEnded(){if(this.currentLoopCount+=1,this.options.cycle&&this.options.cycle>this.currentLoopCount)return this.startPlayOffset=0,this.sourceNode=void 0,void this.startProcessAudioBuffer();this.reset()}reset(){this.startPlayOffset=this.options.startPlayTime||0,this.currentState="stopped",this.sourceNode&&(this.sourceNode.disconnect(),this.sourceNode=void 0),this.currentLoopCount=0}}const KQ=new Map;class zQ{get rendFrameRate(){if(this.renderStats&&this.renderStats.curTs!==this.renderStats.lastTs){const e=this.renderStats.curTs-this.renderStats.lastTs,t=(this.renderStats.renderNum-this.renderStats.lastRenderNum)/e;return this.renderStats.lastRenderNum=this.renderStats.renderNum,this.renderStats.lastTs=this.renderStats.curTs,t}return 0}get videoElementStatus(){return this._videoElementStatus}set videoElementStatus(e){e!==this._videoElementStatus&&(KH.debug("[".concat(this.trackId,"] video-element-status change ").concat(this._videoElementStatus," => ").concat(e)),this._videoElementStatus=e)}get videoState(){return this._videoState}set videoState(e){var t;e!==this._videoState&&(this._videoState=e,null===(t=this.onVideoStateChanged)||void 0===t||t.call(this,this.videoState))}constructor(e){lX(this,"trackId",void 0),lX(this,"config",void 0),lX(this,"onFirstVideoFrameDecoded",void 0),lX(this,"onVideoStateChanged",void 0),lX(this,"freezeTimeCounterList",[]),lX(this,"renderFreezeAccTime",0),lX(this,"isKeepLastFrame",!1),lX(this,"timeUpdatedCount",0),lX(this,"freezeTime",0),lX(this,"playbackTime",0),lX(this,"lastTimeUpdatedTime",0),lX(this,"autoplayFailed",!1),lX(this,"videoTrack",void 0),lX(this,"videoElement",void 0),lX(this,"cacheVideoElement",void 0),lX(this,"renderStats",void 0),lX(this,"_videoState",sX.VideoStateStopped),lX(this,"videoElementCheckInterval",void 0),lX(this,"videoElementFreezeTimeout",void 0),lX(this,"_videoElementStatus",oX.NONE),lX(this,"isGettingVideoDimensions",!1),lX(this,"startGetVideoDimensions",(()=>{const e=()=>{if(this.isGettingVideoDimensions=!0,this.videoElement.videoWidth*this.videoElement.videoHeight>4)return KH.debug("[".concat(this.trackId,"] current video dimensions:"),this.videoElement.videoWidth,this.videoElement.videoHeight),void(this.isGettingVideoDimensions=!1);setTimeout(e,500)};!this.isGettingVideoDimensions&&e()})),lX(this,"autoResumeAfterInterruption",(()=>{this.videoTrack&&"live"===this.videoTrack.readyState&&"running"===_X.curState&&(KH.debug("[track-".concat(this.trackId,"] video element paused, auto resume for ").concat(CB())),GB()?(this.videoElement.srcObject=null,this.videoElement.srcObject=new MediaStream([this.videoTrack]),this.videoElement.play()):(this.videoElement.pause(),this.videoElement.play()))})),lX(this,"handleVideoEvents",(e=>{switch(e.type){case"play":case"playing":this.startGetVideoDimensions(),this.videoElementStatus=oX.PLAYING;break;case"loadeddata":if(this.videoState=sX.VideoStateStarting,this.onFirstVideoFrameDecoded&&this.onFirstVideoFrameDecoded(),this.cacheVideoElement){try{this.cacheVideoElement.srcObject=null,this.cacheVideoElement.remove()}catch(e){}this.cacheVideoElement=void 0}break;case"canplay":this.videoElementStatus=oX.CANPLAY;break;case"stalled":this.videoElementStatus=oX.STALLED;break;case"suspend":this.videoElementStatus=oX.SUSPEND;break;case"pause":this.videoElementStatus=oX.PAUSED,NB()||HB()||AB()&&this.autoplayFailed||!this.videoTrack||"live"!==this.videoTrack.readyState||(KH.debug("[track-".concat(this.trackId,"] video element paused, auto resume")),this.videoElement.play());break;case"waiting":this.videoElementStatus=oX.WAITING;break;case"abort":this.videoElementStatus=oX.ABORT;break;case"ended":this.videoElementStatus=oX.ENDED;break;case"emptied":this.videoElementStatus=oX.EMPTIED;break;case"error":{const e=this.videoElement.error,t=e?"".concat(e.message," (").concat(e.code,")"):"";e&&(this.videoElementStatus=oX.ERROR),KH.error("[".concat(this.trackId,"] media error: ").concat(t," "));break}case"timeupdate":{const e=performance.now();if(this.timeUpdatedCount+=1,this.timeUpdatedCount<10)return void(this.lastTimeUpdatedTime=e);const t=e-this.lastTimeUpdatedTime,n=this.lastTimeUpdatedTime;if(this.lastTimeUpdatedTime=e,q$.lastVisibleTime<q$.lastHiddenTime||n<q$.lastHiddenTime||n<q$.lastVisibleTime)return;for(t>AH("VIDEO_FREEZE_DURATION")&&(this.freezeTime+=t),this.playbackTime+=t;this.playbackTime>=6e3;){this.playbackTime-=6e3;const e=Math.min(6e3,this.freezeTime);this.freezeTimeCounterList.push(e),this.freezeTime=Math.max(0,this.freezeTime-6e3)}break}}})),lX(this,"autoResumeAfterInterruptionOnIOS15_16",(()=>{this.videoTrack&&"live"===this.videoTrack.readyState&&(KH.debug("[track-".concat(this.trackId,"] video element paused, auto resume for ").concat(CB())),GB()?(this.videoElement.srcObject=null,this.videoElement.srcObject=new MediaStream([this.videoTrack]),this.videoElement.play()):(this.videoElement.pause(),this.videoElement.play()))})),this.trackId=e.trackId,this.config=e,e.element instanceof HTMLVideoElement?this.videoElement=e.element:this.videoElement=document.createElement("video"),_X.on(CJ.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),_X.on(CJ.IOS_15_16_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15_16)}getVideoElement(){return this.videoElement}getContainerElement(){var e;return null!==(e=this.videoElement.parentElement)&&void 0!==e?e:void 0}updateConfig(e){this.config=e,this.trackId=e.trackId,e.element!==this.videoElement&&(this.destroy(),this.videoElement=e.element),this.videoTrack&&this.initVideoElement()}updateVideoTrack(e){this.videoTrack!==e&&(this.videoTrack=e,this.initVideoElement())}play(e){const t=this.videoElement.play();t&&t.catch&&t.catch((t=>{e&&VX(e,"video",t.message,this.trackId),"NotAllowedError"===t.name?(KH.warning("detected video element autoplay failed",t),this.autoplayFailed=!0,this.handleAutoPlayFailed()):KH.warning("[".concat(this.trackId,"] play warning: "),t)}));const n=SB();if(("Safari"===n.name&&15===Number(n.version)||jB())&&t&&t.then){const e=()=>{this.config.mirror&&(this.videoElement.style.transform="rotateY(180deg)")};t.then(e).catch(e)}}getCurrentFrame(){const e=document.createElement("canvas");e.width=this.videoElement.videoWidth,e.height=this.videoElement.videoHeight;const t=e.getContext("2d");if(!t)return KH.error("create canvas context failed!"),new ImageData(2,2);t.drawImage(this.videoElement,0,0,e.width,e.height);const n=t.getImageData(0,0,e.width,e.height);return e.remove(),n}async getCurrentFrameToUint8Array(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const n=document.createElement("canvas");n.width=this.videoElement.videoWidth,n.height=this.videoElement.videoHeight;const r=n.getContext("2d");return r?(r.drawImage(this.videoElement,0,0,n.width,n.height),new LO(((r,i)=>{n.toBlob((async e=>{if(n.remove(),e){const t=await ZX(e);r({buffer:t,width:n.width,height:n.height})}else i(new eG(ZB.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED))}),e,t<0?.1:t>1?1:t)}))):await $X(e)}destroy(){this.renderStats=void 0,_X.off(CJ.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),_X.off(CJ.IOS_15_16_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15_16),this.videoElement.srcObject=null,this.resetVideoElement(),this.freezeTimeCounterList=[],this.videoState=sX.VideoStateStopped}initVideoElement(){if(this.videoElementStatus=oX.INIT,!this.videoElementCheckInterval&&(qQ.forEach((e=>{this.videoElement.addEventListener(e,this.handleVideoEvents)})),this.videoElementCheckInterval=window.setInterval((()=>{(function(e){return e!==document.body&&document.body.contains(e)})(this.videoElement)||(this.videoElementStatus=oX.DESTROYED)}),1e3),AH("ENABLE_VIDEO_FRAME_CALLBACK"))){var e,t;let n;const r=()=>{"visible"===document.visibilityState&&(document.removeEventListener("visibilitychange",r),this.videoElementFreezeTimeout=window.setTimeout(i,AH("VIDEO_FREEZE_DURATION")))},i=()=>{this.videoElementFreezeTimeout=void 0,this.videoState===sX.VideoStateDecoding&&("visible"===document.visibilityState?this.videoState=sX.VideoStateFrozen:document.addEventListener("visibilitychange",r))},o=(e,t)=>{if(this.videoElementStatus===oX.PLAYING){if(this.renderStats?(this.renderStats.renderNum++,this.renderStats.curTs=t.mediaTime):this.renderStats={lastTs:t.mediaTime,curTs:t.mediaTime,lastRenderNum:0,renderNum:0},n){const e=t.presentationTime-n.presentationTime;this.videoState===sX.VideoStateStarting&&(this.videoState=sX.VideoStateDecoding),this.videoState===sX.VideoStateDecoding&&this.onVideoStateChanged&&(this.videoElementFreezeTimeout&&window.clearTimeout(this.videoElementFreezeTimeout),this.videoElementFreezeTimeout=window.setTimeout(i,AH("VIDEO_FREEZE_DURATION"))),e<AH("VIDEO_FREEZE_DURATION")&&this.videoState===sX.VideoStateFrozen&&(this.videoState=sX.VideoStateDecoding),e>AH("VIDEO_FREEZE_DURATION")&&q$.lastVisibleTime>=q$.lastHiddenTime&&n.timestamp>q$.lastVisibleTime&&n.timestamp>q$.lastHiddenTime&&(this.renderFreezeAccTime+=e)}n=uX(uX({},t),{},{timestamp:e})}var r,s;AH("ENABLE_VIDEO_FRAME_CALLBACK")&&(null===(r=(s=this.videoElement).requestVideoFrameCallback)||void 0===r||r.call(s,o))};null===(e=(t=this.videoElement).requestVideoFrameCallback)||void 0===e||e.call(t,o)}this.videoElement.controls=!1,this.videoElement.setAttribute("playsinline",""),YB()&&!AH("HIDE_NO_POSTER")&&(this.videoElement.poster="noposter");const n=SB();"Safari"===n.name&&15===Number(n.version)||jB()||!this.config.mirror||(this.videoElement.style.transform="rotateY(180deg)"),this.config.fit?this.videoElement.style.objectFit=this.config.fit:this.videoElement.style.objectFit="cover",this.videoElement.setAttribute("muted",""),this.videoElement.muted=!0,this.videoElement.srcObject&&this.videoElement.srcObject instanceof MediaStream?this.videoElement.srcObject.getVideoTracks()[0]!==this.videoTrack&&(this.videoElement.srcObject=this.videoTrack?new MediaStream([this.videoTrack]):null,xB()&&this.videoElement.load()):(this.videoElement.srcObject=this.videoTrack?new MediaStream([this.videoTrack]):null,xB()&&this.videoElement.load());const r=this.videoElement.play();void 0!==r&&r.catch((e=>{KH.debug("[".concat(this.trackId,"] playback interrupted"),e.toString())}))}resetVideoElement(){qQ.forEach((e=>{this.videoElement&&this.videoElement.removeEventListener(e,this.handleVideoEvents)})),this.videoElementCheckInterval&&(window.clearInterval(this.videoElementCheckInterval),this.videoElementCheckInterval=void 0),this.videoElementStatus=oX.NONE}handleAutoPlayFailed(){const e=t=>{t.preventDefault(),this.videoElement.play().then((()=>{KH.debug("[".concat(this.trackId,"] Video element for trackId:").concat(this.trackId," autoplay resumed."))})).catch((e=>{KH.error(e)})),this.autoplayFailed=!1,JB()?document.body.removeEventListener("click",e,!0):(document.body.removeEventListener("touchstart",e,!0),document.body.removeEventListener("mousedown",e,!0))};JB()?document.body.addEventListener("click",e,!0):(document.body.addEventListener("touchstart",e,!0),document.body.addEventListener("mousedown",e,!0)),UX()}}const qQ=["play","playing","loadeddata","canplay","pause","stalled","suspend","waiting","abort","emptied","ended","timeupdate","error"];class YQ extends zQ{constructor(e){super(e),lX(this,"container",void 0),lX(this,"slot",void 0),this.slot=e.element,this.updateConfig(e)}updateConfig(e){this.config=e,this.trackId=e.trackId;const t=e.element;t!==this.slot&&(this.destroy(),this.slot=t),this.createElements()}updateVideoTrack(e){this.videoTrack!==e&&(this.videoTrack=e,this.createElements())}play(e){var t;null!==(t=this.container)&&void 0!==t&&t.contains(this.videoElement)&&super.play(e)}getCurrentFrame(){var e;return null!==(e=this.container)&&void 0!==e&&e.contains(this.videoElement)?super.getCurrentFrame():new ImageData(2,2)}async getCurrentFrameToUint8Array(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return null!==(t=this.container)&&void 0!==t&&t.contains(this.videoElement)?await super.getCurrentFrameToUint8Array(e,n):await $X(e)}destroy(){if(super.destroy(),this.videoElement.remove(),this.videoElement=document.createElement("video"),this.container){try{this.container.remove(),this.slot.removeChild(this.container)}catch(e){}this.container=void 0}}createElements(){this.container||(this.container=document.createElement("div")),this.container.id="agora-video-player-".concat(this.trackId),this.container.style.width="100%",this.container.style.height="100%",this.container.style.position="relative",this.container.style.overflow="hidden",this.videoTrack?(this.container.style.backgroundColor="black",AH("KEEP_LAST_FRAME")&&this.isKeepLastFrame&&this.videoElement.paused&&this.resetVideoElement(),this.mountedVideoElement()):this.unmountedVideoElement(),this.slot.appendChild(this.container)}mountedVideoElement(){var e;!this.container||null!==(e=this.container)&&void 0!==e&&e.contains(this.videoElement)||this.container.appendChild(this.videoElement),super.initVideoElement(),this.videoElement.id="video_".concat(this.trackId),this.videoElement.className="agora_video_player",this.videoElement.style.width="100%",this.videoElement.style.height="100%",this.videoElement.style.position="absolute",this.videoElement.style.left="0",this.videoElement.style.top="0"}unmountedVideoElement(){var e;if(null!==(e=this.container)&&void 0!==e&&e.contains(this.videoElement)){super.resetVideoElement();try{this.container&&this.container.removeChild(this.videoElement)}catch(e){}this.videoElement=document.createElement("video")}}resetVideoElement(){var e;null!==(e=this.container)&&void 0!==e&&e.contains(this.videoElement)&&(super.resetVideoElement(),this.cacheVideoElement=this.videoElement,this.videoElement=document.createElement("video"))}getContainerElement(){return this.container}}var JQ,XQ,QQ,$Q,ZQ,e$,t$,n$,r$,i$,o$,s$,a$,c$,d$,l$,h$,u$,p$,f$,m$,g$,_$,E$,y$,v$,b$,S$,T$,R$,C$,w$,I$,A$;let O$=(JQ=$H({argsMap:(e,t,n)=>[e.getTrackId(),"string"==typeof t?t:t instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement",n]}),XQ=BX(),QQ=$H({argsMap:e=>[e.getTrackId()]}),$Q=dH("LocalVideoTrack","_enabledMutex"),ZQ=$H({argsMap:(e,t)=>[e.getTrackId(),t]}),e$=BX(),t$=dH("LocalVideoTrack","_enabledMutex"),n$=$H({argsMap:(e,t)=>[e.getTrackId(),t]}),r$=BX(),i$=$H({argsMap:(e,t)=>[e.getTrackId(),t]}),o$=BX(),s$=BX(),a$=$H({argsMap:(e,t,n)=>[e.getTrackId(),t,n]}),c$=BX(),d$=BX(),l$=BX(),h$=BX(),u$=BX(),p$=BX(),f$=BX(),m$=$H({argsMap:(e,t)=>[e.getTrackId(),t.name]}),g$=$H({argsMap:e=>[e.getTrackId()]}),_$=$H({argsMap:e=>[e.getTrackId()]}),E$=$H({argsMap:(e,t,n)=>[e.getTrackId(),t.label,n]}),y$=class e extends fX{get videoHeight(){if(AB()){const{height:e}=this._mediaStreamTrack.getSettings();return this._videoHeight=e,this._videoHeight}return this._videoHeight}get videoWidth(){if(AB()){const{width:e}=this._mediaStreamTrack.getSettings();return this._videoWidth=e,this._videoWidth}return this._videoWidth}get isPlaying(){return!(!this._player||this._player.videoElementStatus!==oX.PLAYING)}get processorDestination(){return this._processorDestination}get processorContext(){return this._processorContext}set processorContext(e){this._processorContext=e}get __className__(){return"LocalVideoTrack"}constructor(e,t,n,r,i,o){if(super(e,i),lX(this,"trackMediaType",YJ.VIDEO),lX(this,"_player",void 0),lX(this,"isUseScaleResolutionDownBy",!1),lX(this,"_videoVisibleTimer",null),lX(this,"_previousVideoVisibleStatus",void 0),lX(this,"_clearPreviousVideoVisibleStatus",(()=>this._previousVideoVisibleStatus=void 0)),lX(this,"_encoderConfig",void 0),lX(this,"_scalabilityMode",{numSpatialLayers:1,numTemporalLayers:1}),lX(this,"_optimizationMode",void 0),lX(this,"_videoHeight",void 0),lX(this,"_videoWidth",void 0),lX(this,"_forceBitrateLimit",void 0),lX(this,"_enabled",!0),lX(this,"_processorDestination",void 0),lX(this,"_processorContext",void 0),AB()){const{width:t,height:n}=e.getSettings();this._videoWidth=t,this._videoHeight=n}else this.updateMediaStreamTrackResolution();if(this._encoderConfig=t,this._scalabilityMode=n,this._optimizationMode=r,this._hints=o||[],-1===this._hints.indexOf(BJ.SCREEN_TRACK))this.updateBitrateFromProfile();else if(function(e){const t=SB();return!(t.name!==e||!t.osVersion)&&115===Number(t.version)}(EB.CHROME)&&-1!==RB().indexOf("Windows")){const t=function(e){if("VideoFrame"in window&&"TransformStream"in window&&SJ().supportWebRTCInsertableStream){const t=new MediaStreamTrackProcessor(e),n=new MediaStreamTrackGenerator({kind:"video"});let r,i,o=Date.now();const s=()=>{a&&(clearInterval(a),a=void 0),r&&(r.close(),r=void 0),e.stop(),i=void 0,n.removeEventListener("ended",s)};let a=window.setInterval((()=>{if(i&&r&&Date.now()-o>1e3)try{"live"===n.readyState?i.enqueue(r.clone()):s()}catch(e){s()}}),1e3);const c=new TransformStream({transform:(e,t)=>{"live"===n.readyState?(i=t,o=Date.now(),void 0===r?(r=e,t.enqueue(e.clone())):(t.enqueue(r),r=e)):e.close()}});return n.addEventListener("ended",s),t.readable.pipeThrough(c).pipeTo(n.writable),n}}(e);t&&(KH.info("local screen video track begin to inject frame"),this._mediaStreamTrack=t)}t&&-1!==this._hints.indexOf(BJ.CUSTOM_TRACK)&&this.setEncoderConfiguration(t),this._processorContext=new HX(this.getTrackId(),"local"),this._processorDestination=new GX(this.processorContext),this.bindProcessorDestinationEvents()}play(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"==typeof e){const t=document.getElementById(e);t?e=t:(KH.warning("[".concat(this.getTrackId(),'] can not find "#').concat(e,'" element, use document.body')),e=document.body)}KH.debug("[".concat(this.getTrackId(),"] start video playback in ").concat(e instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement"),JSON.stringify(t));const n=uX(uX(uX({},this._getDefaultPlayerConfig()),t),{},{trackId:this.getTrackId(),element:e});this._player?this._player.updateConfig(n):(e instanceof HTMLVideoElement?this._player=new zQ(n):this._player=new YQ(n),this._player.updateVideoTrack(this._mediaStreamTrack)),this._player.play(),this._videoVisibleTimer&&window.clearInterval(this._videoVisibleTimer),this._clearPreviousVideoVisibleStatus(),this._videoVisibleTimer=window.setInterval((()=>{try{const e=this.getVideoElementVisibleStatus();this.safeEmit(zJ.VIDEO_ELEMENT_VISIBLE_STATUS,e)}catch(e){}}),AH("CHECK_VIDEO_VISIBLE_INTERVAL"))}stop(){this._player&&(this._videoVisibleTimer&&(window.clearInterval(this._videoVisibleTimer),this._videoVisibleTimer=null),this._clearPreviousVideoVisibleStatus(),this._player.destroy(),this._player=void 0,KH.debug("[".concat(this.getTrackId(),"] stop video playback")))}async setEnabled(e,t){if(!t){if(e===this._enabled)return;this.stateCheck("enabled",e)}if(KH.info("[".concat(this.getTrackId(),"] start setEnabled"),e),!e){this._originMediaStreamTrack.enabled=!1;try{await NG(this,jJ.NEED_DISABLE_TRACK,this)}catch(e){throw KH.error("[".concat(this.getTrackId(),"] setEnabled to false error"),e.toString()),e}return t||(this._enabled=!1),void KH.info("[".concat(this.getTrackId(),"] setEnabled to false success"))}this._originMediaStreamTrack.enabled=!0;try{await NG(this,jJ.NEED_ENABLE_TRACK,this)}catch(e){throw KH.error("[".concat(this.getTrackId(),"] setEnabled to true error"),e.toString()),e}KH.info("[".concat(this.getTrackId(),"] setEnabled to true success")),t||(this._enabled=!0)}async setMuted(e){e!==this._muted&&(this.stateCheck("muted",e),this._muted=e,this._originMediaStreamTrack.enabled=!e,KH.debug("[".concat(this.getTrackId(),"] start set muted: ").concat(e)),e?await NG(this,jJ.NEED_MUTE_TRACK,this):await NG(this,jJ.NEED_UNMUTE_TRACK,this))}async setEncoderConfiguration(e,t){if(!this._enabled)throw new eG(ZB.TRACK_IS_DISABLED,"can not set encoder configuration when track is disabled");if(e=DJ(e),this._forceBitrateLimit&&(e.bitrateMax=this._forceBitrateLimit.max_bitrate?this._forceBitrateLimit.max_bitrate:e.bitrateMax,e.bitrateMin=this._forceBitrateLimit.min_bitrate?this._forceBitrateLimit.min_bitrate:e.bitrateMin),e.width||e.height||e.frameRate){const t=JX({encoderConfig:e});(AB()||NB()||HB())&&(t.deviceId=void 0),KH.debug("[".concat(this.getTrackId(),"] setEncoderConfiguration applyConstraints"),JSON.stringify(e),JSON.stringify(t));try{await this._originMediaStreamTrack.applyConstraints(t),this.updateMediaStreamTrackResolution()}catch(e){const t=new eG(ZB.UNEXPECTED_ERROR,e.toString());throw KH.error("[".concat(this.getTrackId(),"] applyConstraints error"),t.toString()),t}}this._encoderConfig=e,-1===this._hints.indexOf(BJ.SCREEN_TRACK)&&this.updateBitrateFromProfile();try{await NG(this,jJ.NEED_UPDATE_VIDEO_ENCODER,this)}catch(e){return e.throw(KH)}}getStats(){return BG((()=>{KH.warning("[deprecated] LocalVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalVideoStats instead")}),"localVideoTrackGetStatsWarning"),PG(this,jJ.GET_STATS)||uX({},QJ)}async setBeautyEffect(e){KH.error("LocalVideoTrack.setBeautyEffect was deprecated, please migrate to agora-extension-beauty-effect")}getCurrentFrameData(){return this._player?this._player.getCurrentFrame():new ImageData(2,2)}async getCurrentFrameImage(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this._player?this._player.getCurrentFrameToUint8Array(e,t):await $X(e)}async setBitrateLimit(e){if(KH.debug("[".concat(this.getTrackId(),"] set bitrate limit, ").concat(JSON.stringify(e))),e){this._forceBitrateLimit=e,this._encoderConfig&&(this._encoderConfig.bitrateMax?this._encoderConfig.bitrateMax=this._encoderConfig.bitrateMax<e.max_bitrate?this._encoderConfig.bitrateMax:e.max_bitrate:this._encoderConfig.bitrateMax=e.max_bitrate,this._encoderConfig.bitrateMin,this._encoderConfig.bitrateMin=e.min_bitrate);try{await NG(this,jJ.NEED_UPDATE_VIDEO_ENCODER,this)}catch(e){return e.throw(KH)}}}async setOptimizationMode(e){if("motion"!==e&&"detail"!==e&&"balanced"!==e)return void KH.error(ZB.INVALID_PARAMS,"optimization mode must be motion, detail or balanced");const t=this._optimizationMode;try{this._optimizationMode=e,await NG(this,jJ.NEED_UPDATE_VIDEO_SEND_PARAMETERS,this)}catch(e){throw this._optimizationMode=t,KH.error("[".concat(this.getTrackId(),"] set optimization mode failed"),e.toString()),e}KH.info("[".concat(this.getTrackId(),"] set optimization mode success (").concat(e,")"))}setScalabiltyMode(e){if(1===e.numSpatialLayers&&1!==e.numTemporalLayers)return KH.error(ZB.INVALID_PARAMS,"scalability mode currently not supported, no SVC."),void(this._scalabilityMode={numSpatialLayers:1,numTemporalLayers:1});this._scalabilityMode=e,KH.info("[".concat(this.getTrackId(),"] set scalability mode success (").concat(e,")"))}updateMediaStreamTrackResolution(){YX(this._originMediaStreamTrack).then((e=>{let[t,n]=e;this._videoHeight=n,this._videoWidth=t})).catch($G)}_updatePlayerSource(){this._player&&this._player.updateVideoTrack(this._mediaStreamTrack)}_getDefaultPlayerConfig(){return{fit:"contain"}}async setSenderConfiguration(e){if(!this._enabled)throw new eG(ZB.TRACK_IS_DISABLED,"can not set encoder configuration when track is disabled");KH.debug("[".concat(this.getTrackId(),"] setSenderConfiguration applyConstraints"),JSON.stringify(e)),e=DJ(e),this._forceBitrateLimit&&(e.bitrateMax=this._forceBitrateLimit.max_bitrate?this._forceBitrateLimit.max_bitrate:e.bitrateMax,e.bitrateMin=this._forceBitrateLimit.min_bitrate?this._forceBitrateLimit.min_bitrate:e.bitrateMin),this._encoderConfig=e,-1===this._hints.indexOf(BJ.SCREEN_TRACK)&&this.updateBitrateFromProfile();try{await NG(this,jJ.NEED_UPDATE_VIDEO_ENCODER,this)}catch(e){return e.throw(KH)}}updateBitrateFromProfile(){if(!this._encoderConfig)return;const{width:e,height:t,frameRate:n}=this.getMediaStreamTrackSettings();if(!e||!t||!n)return;const{bitrateMax:r,bitrateMin:i}=this._encoderConfig;if(null==i||null==r){const{max:o,min:s}=function(e,t,n,r,i){const o=AH("BITRATE_ADAPTER_TYPE");if("DEFAULT_BITRATE"===o)return{min:r,max:i};if(void 0===i){var s;const a=Math.floor(200*Math.pow(n/15,.6)*Math.pow(e*t/640/360,.75));i="STANDARD_BITRATE"===o?4*a:2*a,r=null!==(s=r)&&void 0!==s?s:a}else{var a;r=null!==(a=r)&&void 0!==a?a:Math.floor(i/10)}return{min:r,max:i}}(e,t,n,i,r);this._encoderConfig.bitrateMin=s,this._encoderConfig.bitrateMax=o,KH.debug("[".concat(this.getTrackId(),"] update bitrate from profile, [w: ").concat(e,", h: ").concat(t,", fps: ").concat(n,"] => [brMax: ").concat(o,", brMin: ").concat(s,"]"))}}getVideoElementVisibleStatus(){try{var e,t;const n=null==this||null===(e=this._player)||void 0===e?void 0:e.getContainerElement(),r={track:this,element:null==this||null===(t=this._player)||void 0===t?void 0:t.getVideoElement(),slot:null==n?void 0:n.parentElement},{element:i,slot:o}=r;if(this.isPlaying&&i instanceof HTMLVideoElement&&o instanceof HTMLElement){const e=hG.checkOneElementVisible(i),t=Object.assign({},e);if(t.visible!==this._previousVideoVisibleStatus){this._previousVideoVisibleStatus=t.visible;const e=ZH.reportApiInvoke(null,{tag:yG.TRACER,name:EG.LOCAL_VIDEO_TRACK_GET_VIDEO_VISIBLE,options:[this.getTrackId()]});t.visible?e.onSuccess("Video is visible"):e.onSuccess("Invisible because of ".concat(t.reason))}return t}return}catch(e){throw new eG(ZB.GET_VIDEO_ELEMENT_VISIBLE_ERROR,e.message)}}async renewMediaStreamTrack(e){}pipe(e){if(this.processor===e)return e;if(e._source)throw new eG(ZB.INVALID_OPERATION,"Processor ".concat(e.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=e,this.processor._source=this,e.updateInput({track:this._originMediaStreamTrack,context:this.processorContext}),e}unpipe(){if(!this.processor)return;const e=this.processor;this.processor._source=void 0,this.processor=void 0,e.reset()}close(){super.close(),this.unbindProcessorDestinationEvents(),this.unbindProcessorContextEvents(),this.unpipe(),this.processorDestination._source&&this.processorDestination._source.unpipe()}clone(t){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this._encoderConfig;t&&(r=uX(uX({},r),DJ(t))),r=FG(r);const i=XG(8,"track-video-cloned-"),o=new e(n?this._mediaStreamTrack.clone():this._mediaStreamTrack,r,FG(this._scalabilityMode),this._optimizationMode,i,FG(this._hints));return t&&r&&o.setEncoderConfiguration(r),KH.debug("clone video track from ".concat(this.getTrackId()," to ").concat(i,", clone ").concat(n)),o}async replaceTrack(e,t){if(!(e instanceof MediaStreamTrack))throw new eG(ZB.INVALID_PARAMS,"track should be an instance of MediaStreamTrack");if("video"!==e.kind)throw new eG(ZB.INVALID_PARAMS,"track should be a video MediaStreamTrack");await this._updateOriginMediaStreamTrack(e,t,!0),this.updateMediaStreamTrackResolution()}sendSeiData(e){if(BG((()=>{ZH.reportApiInvoke(null,{name:EG.LOCAL_VIDEO_SEND_SEI_DATA,options:[],tag:yG.TRACER}).onSuccess("")}),this._mediaStreamTrack.id||this.getTrackId()),!AH("ENABLE_VIDEO_SEI")||!AH("ENABLE_ENCODED_TRANSFORM"))return void KH.warning('To send/receive SEI, please call AgoraRTC.setParameter("ENABLE_VIDEO_SEI", true) before instantiate IAgoraRtcClient');if(e instanceof Uint8Array==0)return new eG(ZB.INVALID_PARAMS,"Invalid argument type, ILocalVideoTrack.sendSeiData() only accept Uint8Array argument.").throw();const t=this.getRTCRtpTransceiver();if(!t)return void KH.warning("Video track is not published, SEI can not be send");const n=t.sender.getParameters();if(0===n.codecs.length)return;const r=n.codecs[0].mimeType.toLocaleLowerCase();"video/h264"===r?this.safeEmit("sei-to-send",e):KH.warning("SEI is not supported by ".concat(r))}bindProcessorDestinationEvents(){this.processorDestination.on(tX.ON_TRACK,(async e=>{e?e!==this._mediaStreamTrack&&(this._mediaStreamTrack=e,this._updatePlayerSource(),await NG(this,jJ.NEED_REPLACE_TRACK,this)):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await NG(this,jJ.NEED_REPLACE_TRACK,this))}))}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(tX.ON_TRACK)}unbindProcessorContextEvents(){this.processorContext.removeAllListeners(nX.REQUEST_UPDATE_CONSTRAINTS),this.processorContext.removeAllListeners(nX.REQUEST_CONSTRAINTS)}},dX(y$.prototype,"play",[JQ,XQ],Object.getOwnPropertyDescriptor(y$.prototype,"play"),y$.prototype),dX(y$.prototype,"stop",[QQ],Object.getOwnPropertyDescriptor(y$.prototype,"stop"),y$.prototype),dX(y$.prototype,"setEnabled",[$Q,ZQ,e$],Object.getOwnPropertyDescriptor(y$.prototype,"setEnabled"),y$.prototype),dX(y$.prototype,"setMuted",[t$,n$,r$],Object.getOwnPropertyDescriptor(y$.prototype,"setMuted"),y$.prototype),dX(y$.prototype,"setEncoderConfiguration",[i$,o$],Object.getOwnPropertyDescriptor(y$.prototype,"setEncoderConfiguration"),y$.prototype),dX(y$.prototype,"getStats",[s$],Object.getOwnPropertyDescriptor(y$.prototype,"getStats"),y$.prototype),dX(y$.prototype,"setBeautyEffect",[a$,c$],Object.getOwnPropertyDescriptor(y$.prototype,"setBeautyEffect"),y$.prototype),dX(y$.prototype,"getCurrentFrameData",[d$],Object.getOwnPropertyDescriptor(y$.prototype,"getCurrentFrameData"),y$.prototype),dX(y$.prototype,"getCurrentFrameImage",[l$],Object.getOwnPropertyDescriptor(y$.prototype,"getCurrentFrameImage"),y$.prototype),dX(y$.prototype,"setBitrateLimit",[h$],Object.getOwnPropertyDescriptor(y$.prototype,"setBitrateLimit"),y$.prototype),dX(y$.prototype,"setOptimizationMode",[u$],Object.getOwnPropertyDescriptor(y$.prototype,"setOptimizationMode"),y$.prototype),dX(y$.prototype,"setScalabiltyMode",[p$],Object.getOwnPropertyDescriptor(y$.prototype,"setScalabiltyMode"),y$.prototype),dX(y$.prototype,"updateMediaStreamTrackResolution",[f$],Object.getOwnPropertyDescriptor(y$.prototype,"updateMediaStreamTrackResolution"),y$.prototype),dX(y$.prototype,"pipe",[m$],Object.getOwnPropertyDescriptor(y$.prototype,"pipe"),y$.prototype),dX(y$.prototype,"unpipe",[g$],Object.getOwnPropertyDescriptor(y$.prototype,"unpipe"),y$.prototype),dX(y$.prototype,"close",[_$],Object.getOwnPropertyDescriptor(y$.prototype,"close"),y$.prototype),dX(y$.prototype,"replaceTrack",[E$],Object.getOwnPropertyDescriptor(y$.prototype,"replaceTrack"),y$.prototype),y$),x$=(v$=$H({argsMap:(e,t)=>[e.getTrackId(),t]}),b$=BX(),S$=dH("CameraVideoTrack","_enabledMutex"),T$=$H({argsMap:(e,t)=>[e.getTrackId(),t]}),R$=BX(),C$=$H({argsMap:(e,t)=>[e.getTrackId(),t]}),w$=BX(),I$=$H({argsMap:e=>[e.getTrackId()]}),A$=class e extends O${get __className__(){return"CameraVideoTrack"}constructor(e,t,n,r,i,o){super(e,DJ(t.encoderConfig),r,i,o),lX(this,"_config",void 0),lX(this,"_originalConstraints",void 0),lX(this,"_constraints",void 0),lX(this,"_enabled",!0),lX(this,"_deviceName","default"),lX(this,"tryResumeVideoForIOS15_16WeChat",(async()=>{(jB()||BB())&&!function(){const e=SB();if(e.os!==_B.IOS||!e.osVersion)return!1;const t=e.osVersion.split(".");return 15===Number(t[0])&&Number(t[1])>=2}()&&WB()&&this._enabled&&!this._isClosed&&(KH.debug("[".concat(this.getTrackId(),"] try capture camera media device for interrupted iOS 15 device on WeChat.")),await this.renewMediaStreamTrack())})),this._config=t,this._originalConstraints=n,this._constraints=n,this._deviceName=e.label,this._encoderConfig=DJ(this._config.encoderConfig),_X.on(CJ.IOS_15_16_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat),_X.on(CJ.IOS_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat),this.bindProcessorContextEvents()}async setDevice(e){return"string"==typeof e?this._setDeviceById(e):e.deviceId?this._setDeviceById(e.deviceId):e.facingMode?this._setDeviceByFacingModel(e.facingMode):void 0}async _setDeviceById(e){if(KH.info("[".concat(this.getTrackId(),"] set device to ").concat(e)),this._enabled)try{const t=await LX.getDeviceById(e),n={};n.video=uX({},this._constraints),n.video.deviceId={exact:e},n.video.facingMode=void 0,this._originMediaStreamTrack.stop();let r=null;try{r=await xX(n,this.getTrackId())}catch(e){throw KH.error("[".concat(this.getTrackId(),"] setDevice failed"),e.toString()),r=await xX({video:this._constraints},this.getTrackId()),await this._updateOriginMediaStreamTrack(r.getVideoTracks()[0],!1),e}await this._updateOriginMediaStreamTrack(r.getVideoTracks()[0],!1),this.updateMediaStreamTrackResolution(),this._deviceName=t.label,this._config.cameraId=e,this._constraints.deviceId={exact:e}}catch(e){throw KH.error("[".concat(this.getTrackId(),"] setDevice error"),e.toString()),e}else try{const t=await LX.getDeviceById(e);this._deviceName=t.label,this._config.cameraId=e,this._constraints.deviceId={exact:e}}catch(e){throw KH.error("[".concat(this.getTrackId(),"] setDevice error"),e.toString()),e}KH.info("[".concat(this.getTrackId(),"] setDevice success"))}async _setDeviceByFacingModel(e){KH.info("[".concat(this.getTrackId(),"] set facingMode ").concat(e));const t={video:uX(uX({},this._constraints),{},{deviceId:void 0,facingMode:{exact:e}})};if(this._enabled){this._originMediaStreamTrack.stop();let e=null;try{e=await xX(t,this.getTrackId())}catch(t){throw KH.error("[".concat(this.getTrackId(),"] setDeviceByFacingModel failed"),t.toString()),e=await xX({video:this._constraints},this.getTrackId()),await this._updateOriginMediaStreamTrack(e.getVideoTracks()[0],!1),t}await this._updateOriginMediaStreamTrack(e.getVideoTracks()[0],!1),this.updateMediaStreamTrackResolution()}this._deviceName="",this._config.facingMode=e,this._config.cameraId=void 0,this._constraints=uX({},t.video),KH.info("[".concat(this.getTrackId(),"] setDeviceByFacingModel success"))}async setEnabled(e,t){if(!t){if(e===this._enabled)return;this.stateCheck("enabled",e)}if(KH.info("[".concat(this.getTrackId(),"] start setEnabled"),e),e){try{if(this.isExternalTrack)this._originMediaStreamTrack.enabled=!0;else{const e=await xX({video:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(e.getVideoTracks()[0],!1)}await NG(this,jJ.NEED_ENABLE_TRACK,this)}catch(e){throw KH.error("[".concat(this.getTrackId(),"] setEnabled true error"),e.toString()),e}this.updateMediaStreamTrackResolution(),KH.info("[".concat(this.getTrackId(),"] setEnabled to true success")),t||(this._enabled=!0)}else{this.isExternalTrack?this._originMediaStreamTrack.enabled=!1:(this._originMediaStreamTrack.onended=null,this._originMediaStreamTrack.stop()),t||(this._enabled=!1);try{await NG(this,jJ.NEED_DISABLE_TRACK,this)}catch(e){throw KH.error("[".concat(this.getTrackId(),"] setEnabled to false error"),e.toString()),e}KH.info("[".concat(this.getTrackId(),"] setEnabled to false success"))}}async setEncoderConfiguration(e,t){if(!this._enabled)throw new eG(ZB.TRACK_IS_DISABLED,"can not set encoder configuration when track is disabled");e=DJ(e),this._forceBitrateLimit&&(e.bitrateMax=this._forceBitrateLimit.max_bitrate||e.bitrateMax,e.bitrateMin=this._forceBitrateLimit.min_bitrate||e.bitrateMin);const n=VG(this._config);n.encoderConfig=e;const r=JX(n);(AB()||NB()||HB())&&(r.deviceId=void 0),KH.debug("[".concat(this.getTrackId(),"] setEncoderConfiguration applyConstraints"),JSON.stringify(e),JSON.stringify(r));try{await this._originMediaStreamTrack.applyConstraints(r),this.updateMediaStreamTrackResolution()}catch(e){const t=new eG(ZB.UNEXPECTED_ERROR,e.toString());throw KH.error("[".concat(this.getTrackId(),"] applyConstraints error"),t.toString()),t}this._config=n,this._constraints=r,this._originalConstraints=r,this._encoderConfig=e,-1===this._hints.indexOf(BJ.SCREEN_TRACK)&&this.updateBitrateFromProfile();try{await NG(this,jJ.NEED_UPDATE_VIDEO_ENCODER,this)}catch(e){return e.throw(KH)}}_getDefaultPlayerConfig(){return{mirror:!0,fit:"cover"}}onTrackEnded(){if((NB()||HB())&&this._enabled&&!this._isClosed&&_X.duringInterruption){const e=async()=>{_X.off(CJ.IOS_INTERRUPTION_END,e),this._enabled&&!this._isClosed&&(KH.debug("[".concat(this.getTrackId(),"] try capture camera media device for interrupted iOS device.")),await this.setEnabled(!1),await this.setEnabled(!0))};_X.on(CJ.IOS_INTERRUPTION_END,e)}else KH.debug("[".concat(this.getTrackId(),"] track ended")),this.safeEmit(zJ.TRACK_ENDED)}async renewMediaStreamTrack(e){const t=e||this._constraints,n=LX.searchDeviceIdByName(this._deviceName);if(n&&!t.deviceId&&(t.deviceId={exact:n}),this._enabled){const e=await xX({video:t},this.getTrackId());this._constraints=t,await this._updateOriginMediaStreamTrack(e.getVideoTracks()[0],!0),this.updateMediaStreamTrackResolution()}}close(){super.close(),_X.off(CJ.IOS_15_16_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat),_X.off(CJ.IOS_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat)}clone(t){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this._encoderConfig;t&&(r=uX(uX({},r),DJ(t))),r=FG(r);const i=XG(8,"track-cam-cloned-"),o=new e(n?this._mediaStreamTrack.clone():this._mediaStreamTrack,FG(uX(uX({},this._config),{},{encoderConfig:r})),FG(this._constraints),FG(this._scalabilityMode),this._optimizationMode,i);return t&&r&&o.setEncoderConfiguration(r),KH.debug("clone track from ".concat(this.getTrackId()," to ").concat(i,", clone ").concat(n)),o}bindProcessorContextEvents(){this.processorContext.on(nX.REQUEST_UPDATE_CONSTRAINTS,(async(e,t,n)=>{try{const n=Object.assign({},this._originalConstraints,...e);await this.renewMediaStreamTrack(n),t()}catch(e){n(e)}})),this.processorContext.on(nX.REQUEST_CONSTRAINTS,(async e=>{e(this._originMediaStreamTrack.getSettings())}))}},dX(A$.prototype,"setDevice",[v$,b$],Object.getOwnPropertyDescriptor(A$.prototype,"setDevice"),A$.prototype),dX(A$.prototype,"setEnabled",[S$,T$,R$],Object.getOwnPropertyDescriptor(A$.prototype,"setEnabled"),A$.prototype),dX(A$.prototype,"setEncoderConfiguration",[C$,w$],Object.getOwnPropertyDescriptor(A$.prototype,"setEncoderConfiguration"),A$.prototype),dX(A$.prototype,"close",[I$],Object.getOwnPropertyDescriptor(A$.prototype,"close"),A$.prototype),A$);function N$(e,t,n,r){n.optimizationMode&&(r&&r.width&&r.height?(n.encoderConfig=uX(uX({},r),{},{bitrateMin:r.bitrateMin,bitrateMax:r.bitrateMax}),"motion"!==n.optimizationMode&&"detail"!==n.optimizationMode||(t.contentHint=n.optimizationMode,t.contentHint===n.optimizationMode?KH.debug("[".concat(e,"] set content hint to"),n.optimizationMode):KH.debug("[".concat(e,"] set content hint failed")))):KH.warning("[".concat(e,"] can not apply optimization mode bitrate config, no encoderConfig")))}var P$,D$,L$,k$,M$,U$,V$,F$,j$,B$,G$,H$;class W$ extends pX{getUserId(){return this._userId}constructor(e,t,n,r){super(e,"track-".concat(e.kind,"-").concat(t,"-").concat(r.clientId,"_").concat(XG(5,""))),lX(this,"_userId",void 0),lX(this,"_uintId",void 0),lX(this,"_isDestroyed",!1),lX(this,"store",void 0),lX(this,"processor",void 0),lX(this,"processorContext",void 0),this._userId=t,this._uintId=n,this.store=r}_updateOriginMediaStreamTrack(e){this._originMediaStreamTrack=e,this._mediaStreamTrack=e,this._updatePlayerSource(),this.processor&&this.processor.updateInput({track:this._originMediaStreamTrack,context:this.processorContext})}_destroy(){this._isDestroyed=!0,KH.info("[".concat(this.getTrackId(),"] is destroyed")),this.stop(),super.close()}getProcessorStats(){return this.processorContext.gatherStats()}getProcessorUsage(){return this.processorContext.gatherUsage()}}let K$=(P$=$H({argsMap:(e,t,n)=>[e.getTrackId(),"string"==typeof t?t:t instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement",n]}),D$=$H({argsMap:e=>[e.getTrackId()]}),L$=$H({argsMap:(e,t)=>[e.getTrackId(),t.name]}),k$=$H({argsMap:e=>[e.getTrackId()]}),dX((M$=class extends W${get isPlaying(){return!(!this._player||this._player.videoElementStatus!==oX.PLAYING)}get __className__(){return"RemoteVideoTrack"}constructor(e,t,n,r){super(e,t,n,r),lX(this,"_videoVisibleTimer",null),lX(this,"_previousVideoVisibleStatus",void 0),lX(this,"_clearPreviousVideoVisibleStatus",(()=>this._previousVideoVisibleStatus=void 0)),lX(this,"trackMediaType",YJ.VIDEO),lX(this,"_videoWidth",void 0),lX(this,"_videoHeight",void 0),lX(this,"_player",void 0),lX(this,"processorDestination",void 0),lX(this,"processorContext",void 0),this.updateMediaStreamTrackResolution(),this.processorContext=new HX(this.getTrackId(),"remote"),this.processorDestination=new GX(this.processorContext),this.bindProcessorDestinationEvents()}getStats(){return BG((()=>{KH.warning("[deprecated] RemoteVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteVideoStats instead")}),"remoteVideoTrackGetStatsWarning"),PG(this,jJ.GET_STATS)||uX({},eX)}play(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"==typeof e){const t=document.getElementById(e);t?e=t:(KH.warning("[".concat(this.getTrackId(),'] can not find "#').concat(e,'" element, use document.body')),e=document.body)}KH.debug("[".concat(this.getTrackId(),"] start video playback in ").concat(e instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement"),JSON.stringify(t));const n=uX(uX({fit:"cover"},t),{},{trackId:this.getTrackId(),element:e});this._player?this._player.updateConfig(n):(e instanceof HTMLVideoElement?this._player=new zQ(n):this._player=new YQ(n),this._player.updateVideoTrack(this._mediaStreamTrack),this._player.onFirstVideoFrameDecoded=()=>{this.store.subscribe(this.getUserId(),"video",void 0,void 0,Date.now()),this.safeEmit(qJ.FIRST_FRAME_DECODED)},this._player.onVideoStateChanged=e=>{this.safeEmit(qJ.VIDEO_STATE_CHANGED,e)}),this._player.play(this.store.sessionId||void 0),this._videoVisibleTimer&&window.clearInterval(this._videoVisibleTimer),this._clearPreviousVideoVisibleStatus(),this._videoVisibleTimer=window.setInterval((()=>{try{const e=this.getVideoElementVisibleStatus();this.safeEmit(qJ.VIDEO_ELEMENT_VISIBLE_STATUS,e)}catch(e){}}),AH("CHECK_VIDEO_VISIBLE_INTERVAL"))}stop(){this._player&&(this._videoVisibleTimer&&(window.clearInterval(this._videoVisibleTimer),this._videoVisibleTimer=null),this._clearPreviousVideoVisibleStatus(),this._player.destroy(),this._player=void 0,KH.debug("[".concat(this.getTrackId(),"] stop video playback")))}getCurrentFrameData(){return this._player?this._player.getCurrentFrame():new ImageData(2,2)}updateMediaStreamTrackResolution(){YX(this._originMediaStreamTrack).then((e=>{let[t,n]=e;this._videoHeight=n,this._videoWidth=t})).catch($G)}_updatePlayerSource(){KH.debug("[".concat(this.getTrackId(),"] update player source track")),this._player&&this._player.updateVideoTrack(this._mediaStreamTrack)}getVideoElementVisibleStatus(){try{var e,t;const n=null==this||null===(e=this._player)||void 0===e?void 0:e.getContainerElement(),r={track:this,element:null==this||null===(t=this._player)||void 0===t?void 0:t.getVideoElement(),slot:null==n?void 0:n.parentElement},{element:i,slot:o}=r;if(this.isPlaying&&i instanceof HTMLVideoElement&&o instanceof HTMLElement){const e=hG.checkOneElementVisible(i),t=Object.assign({},e);if(t.visible!==this._previousVideoVisibleStatus){this._previousVideoVisibleStatus=t.visible;const e=ZH.reportApiInvoke(null,{tag:yG.TRACER,name:EG.REMOTE_VIDEO_TRACK_GET_VIDEO_VISIBLE,options:[this.getTrackId()]});t.visible?e.onSuccess("Video is visible"):e.onSuccess("Invisible because of ".concat(t.reason))}return t}return}catch(e){throw new eG(ZB.GET_VIDEO_ELEMENT_VISIBLE_ERROR,e.message)}}pipe(e){if(this.processor===e)return e;if(e._source)throw new eG(ZB.INVALID_OPERATION,"Processor ".concat(e.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=e,this.processor._source=this,e.updateInput({track:this._originMediaStreamTrack,context:this.processorContext}),e}unpipe(){if(!this.processor)return;const e=this.processor;this.processor._source=void 0,this.processor=void 0,e.reset()}bindProcessorDestinationEvents(){this.processorDestination.on(tX.ON_TRACK,(async e=>{e?e!==this._mediaStreamTrack&&(this._mediaStreamTrack=e,this._updatePlayerSource()):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource())}))}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(tX.ON_TRACK)}_destroy(){super._destroy(),this.unbindProcessorDestinationEvents()}_onSei(e){this.emit(KJ.SEI_RECEIVED,e)}}).prototype,"play",[P$],Object.getOwnPropertyDescriptor(M$.prototype,"play"),M$.prototype),dX(M$.prototype,"stop",[D$],Object.getOwnPropertyDescriptor(M$.prototype,"stop"),M$.prototype),dX(M$.prototype,"pipe",[L$],Object.getOwnPropertyDescriptor(M$.prototype,"pipe"),M$.prototype),dX(M$.prototype,"unpipe",[k$],Object.getOwnPropertyDescriptor(M$.prototype,"unpipe"),M$.prototype),M$),z$=(U$=$H({argsMap:(e,t)=>[e.getTrackId(),t],throttleTime:300}),V$=$H({argsMap:(e,t)=>[e.getTrackId(),t]}),F$=$H({argsMap:e=>[e.getTrackId()]}),j$=$H({argsMap:e=>[e.getTrackId()]}),B$=$H({argsMap:(e,t)=>[e.getTrackId(),t.name]}),G$=$H({argsMap:e=>[e.getTrackId()]}),dX((H$=class extends W${get isPlaying(){return this._useAudioElement?jX.isPlaying(this.getTrackId()):this._source.isPlayed}get __className__(){return"RemoteAudioTrack"}constructor(e,t,n,r){super(e,t,n,r),lX(this,"trackMediaType",YJ.AUDIO),lX(this,"_source",void 0),lX(this,"_useAudioElement",!0),lX(this,"_volume",100),lX(this,"processorContext",void 0),lX(this,"processorDestination",void 0),lX(this,"_played",!1),lX(this,"_bypassWebAudio",!1),AH("DISABLE_WEBAUDIO")?(this._source=new zX,this._bypassWebAudio=!0,this._useAudioElement=!0):(this._source=new RX(e,!0),AH("REMOTE_AUDIO_TRACK_USES_WEB_AUDIO")&&(this._useAudioElement=!1)),this._source.once(JJ.RECEIVE_TRACK_BUFFER,(()=>{this.safeEmit(qJ.FIRST_FRAME_DECODED)})),this.processorContext=new KX(this._source.context,this.getTrackId(),"remote"),this.processorDestination=new WX(this.processorContext),this.bindProcessorDestinationEvents(),this._source.on(JJ.UPDATE_SOURCE,(()=>{this.processor&&this.processor.updateInput({node:this._source.processSourceNode,context:this.processorContext})}))}setAudioFrameCallback(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4096;if(!e)return this._source.removeAllListeners(JJ.ON_AUDIO_BUFFER),void this._source.stopGetAudioBuffer();this._source.startGetAudioBuffer(t),this._source.removeAllListeners(JJ.ON_AUDIO_BUFFER),this._source.on(JJ.ON_AUDIO_BUFFER,(t=>e(t)))}setVolume(e){this._volume=e,this._useAudioElement?jX.setVolume(this.getTrackId(),e):this._source.setVolume(e/100)}async setPlaybackDevice(e){if(!this._useAudioElement||!TJ())throw new eG(ZB.NOT_SUPPORTED,"your browser does not support setting the audio output device");await jX.setSinkID(this.getTrackId(),e)}getVolumeLevel(){return this._source.getAccurateVolumeLevel()}getStats(){return BG((()=>{KH.warning("[deprecated] RemoteAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteAudioStats instead")}),"remoteAudioTrackGetStatsWarning"),PG(this,jJ.GET_STATS)||uX({},$J)}play(){KH.debug("[".concat(this.getTrackId(),"] start audio playback")),this._played=!0,this._useAudioElement?(KH.debug("[".concat(this.getTrackId(),"] use audio element to play")),jX.play(this._mediaStreamTrack,this.getTrackId(),this._volume,this.store.sessionId||void 0)):this._source.play()}stop(){KH.debug("[".concat(this.getTrackId(),"] stop audio playback")),this._played=!1,this._useAudioElement?jX.stop(this.getTrackId()):this._source.stop()}_destroy(){super._destroy(),this._played=!1,this.unbindProcessorDestinationEvents(),this._source.destroy()}_isFreeze(){return this._source.isFreeze}_updatePlayerSource(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];KH.debug("[".concat(this.getTrackId(),"] update player source track")),e&&this._source.updateTrack(this._mediaStreamTrack),this._useAudioElement&&jX.updateTrack(this.getTrackId(),this._mediaStreamTrack)}pipe(e){if(this._bypassWebAudio)throw new eG(ZB.NOT_SUPPORTED,"can not pipe extension when WebAudio disabled");if(this.processor===e)return e;if(e._source)throw new eG(ZB.INVALID_OPERATION,"Processor ".concat(e.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=e,this.processor._source=this,e.updateInput({track:this._originMediaStreamTrack,node:this._source.processSourceNode,context:this.processorContext}),e}unpipe(){var e;if(this._bypassWebAudio)throw new eG(ZB.NOT_SUPPORTED,"can not unpipe extension when WebAudio disabled");if(!this.processor)return;const t=this.processor;null===(e=this._source.processSourceNode)||void 0===e||e.disconnect(),this.processor._source=!1,this.processor=void 0,t.reset()}bindProcessorDestinationEvents(){this.processorDestination.on(tX.ON_TRACK,(async e=>{e?e!==this._mediaStreamTrack&&(this._mediaStreamTrack=e,this._updatePlayerSource(!1),this._source.processedNode=this._source.createMediaStreamSourceNode(e)):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource())})),this.processorDestination.on(tX.ON_NODE,(e=>{this._source.processedNode=e;const t=!e;this._useAudioElement!==t&&(this._played?(this.stop(),this._useAudioElement=t,this.play()):this._useAudioElement=t)}))}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(tX.ON_TRACK),this.processorDestination.removeAllListeners(tX.ON_NODE)}}).prototype,"setVolume",[U$],Object.getOwnPropertyDescriptor(H$.prototype,"setVolume"),H$.prototype),dX(H$.prototype,"setPlaybackDevice",[V$],Object.getOwnPropertyDescriptor(H$.prototype,"setPlaybackDevice"),H$.prototype),dX(H$.prototype,"play",[F$],Object.getOwnPropertyDescriptor(H$.prototype,"play"),H$.prototype),dX(H$.prototype,"stop",[j$],Object.getOwnPropertyDescriptor(H$.prototype,"stop"),H$.prototype),dX(H$.prototype,"pipe",[B$],Object.getOwnPropertyDescriptor(H$.prototype,"pipe"),H$.prototype),dX(H$.prototype,"unpipe",[G$],Object.getOwnPropertyDescriptor(H$.prototype,"unpipe"),H$.prototype),H$);const q$=new class extends mG{get visibility(){return document.visibilityState}get lastHiddenTime(){return this._lastHiddenTime}get lastVisibleTime(){return this._lastVisibleTime}constructor(){super(),lX(this,"_lastHiddenTime",0),lX(this,"_lastVisibleTime",0),document.addEventListener("visibilitychange",(()=>{"hidden"===document.visibilityState?this._lastHiddenTime=performance.now():this._lastVisibleTime=performance.now(),KH.debug("document visibility went ".concat(document.visibilityState)),this.emit("VISIBILITY_CHANGE",document.visibilityState)}))}};class Y$ extends mG{constructor(e,t){super(),lX(this,"trackMediaType",YJ.DATA),lX(this,"_version",1),lX(this,"_type",3),lX(this,"_config",void 0),lX(this,"_originDataChannel",void 0),lX(this,"_dataStreamPacketHeader",new ArrayBuffer(4)),lX(this,"_dataStreamPacketHandler",{serialize:e=>e,deserialize:e=>e}),lX(this,"_datachannelEventMap",new Map),this._config=e,t&&(this._originDataChannel=t,this._bandDataChannelEvents(t)),this._initPacketHeader()}useDataStream(e){this._dataStreamPacketHandler=e}get id(){return this._config.id}get ordered(){return this._config.ordered}get maxRetransmits(){return AH("DATASTREAM_MAX_RETRANSMITS")}get metadata(){return this._config.metadata}get readyState(){var e,t;return null!==(e=null===(t=this._originDataChannel)||void 0===t?void 0:t.readyState)&&void 0!==e?e:"connecting"}get _originDataChannelId(){var e,t;return null!==(e=null===(t=this._originDataChannel)||void 0===t?void 0:t.id)&&void 0!==e?e:null}getChannelId(){return this.id}getConfig(){return this._config}_close(){this._originDataChannel&&(this._unbindDataChannelEvents(this._originDataChannel),this._originDataChannel=void 0)}async _waitTillOpen(){return new LO(((e,t)=>{if(this._originDataChannel){"open"===this._originDataChannel.readyState&&e();const n=setTimeout((()=>{var e;t(new eG(ZB.DATACHANNEL_CONNECTION_TIMEOUT,"Cannot create datachannel, id: ".concat(null===(e=this._originDataChannel)||void 0===e?void 0:e.id)))}),1e4);this._originDataChannel.onopen=()=>{clearTimeout(n),this._originDataChannel&&this._bandDataChannelEvents(this._originDataChannel),e()},this._originDataChannel.onerror=()=>{throw clearTimeout(n),new eG(ZB.DATACHANNEL_CONNECTION_TIMEOUT)}}else t(new eG(ZB.DATACHANNEL_CONNECTION_TIMEOUT,"cannot find dataChannel"))}))}_updateOriginDataChannel(e){this._originDataChannel=e,this._bandDataChannelEvents(e)}_initPacketHeader(){const e=new DataView(this._dataStreamPacketHeader);e.setUint16(0,this._version),e.setUint8(2,this._type),e.setUint8(3,this._config.id)}_bandDataChannelEvents(e){this._unbindDataChannelEvents(e),[cX.OPEN,cX.CLOSE,cX.ERROR].forEach((t=>{const n=()=>{this.emit(t)};this._datachannelEventMap.set(t,n),e.addEventListener(t,n)}))}_unbindDataChannelEvents(e){Array.from(this._datachannelEventMap.entries()).forEach((t=>{let[n,r]=t;e.removeEventListener(n,r)})),this._datachannelEventMap.clear()}}class J$ extends Y${constructor(e){super(e),lX(this,"_messageListener",void 0),this._messageListener=e=>{if(e.data.byteLength<this._dataStreamPacketHeader.byteLength)throw Error("invalid byteLength: the byte length must exceed "+this._dataStreamPacketHeader.byteLength);const t=e.data.slice(0,this._dataStreamPacketHeader.byteLength),n=new DataView(t).getUint8(3);if(n!==this.id)return void(AH("SHOW_DATASTREAM2_LOG")&&KH.debug("invalid datachannel id: ".concat(n," !== ").concat(this.id)));let r=e.data.slice(this._dataStreamPacketHeader.byteLength);r=this._dataStreamPacketHandler.deserialize(r),this.emit(cX.MESSAGE,r)}}_updateOriginDataChannel(e){super._updateOriginDataChannel(e),this._bandRemoteDataChannelEvents()}_close(){this._originDataChannel&&(this._originDataChannel.removeEventListener("message",this._messageListener),super._close())}_bandRemoteDataChannelEvents(){this._originDataChannel&&this._originDataChannel.addEventListener("message",this._messageListener)}}class X$ extends Y${send(e){if(this._originDataChannel){let t=e;t=this._dataStreamPacketHandler.serialize(e);const n=new Uint8Array(this._dataStreamPacketHeader.byteLength+t.byteLength);n.set(new Uint8Array(this._dataStreamPacketHeader),0),n.set(new Uint8Array(t),this._dataStreamPacketHeader.byteLength),this._originDataChannel.send(n.buffer)}}}function Q$(){const e=new Blob([atob("ZnVuY3Rpb24gZShlLHQsbil7bGV0IHI9bmV3IFVpbnQ4QXJyYXkoZSx0LG4pLGE9W10sbz0wO2Zvcig7YS5sZW5ndGg8bjspbyszPG4mJjA9PT1yW29dJiYwPT09cltvKzFdJiYzPT09cltvKzJdJiYoMD09PXJbbyszXXx8MT09PXJbbyszXXx8Mj09PXJbbyszXXx8Mz09PXJbbyszXSk/KGEucHVzaChyW29dLHJbbysxXSxyW28rM10pLG8rPTQpOihhLnB1c2gocltvXSksbysrKTtyZXR1cm4gbmV3IFVpbnQ4QXJyYXkoYSl9ZnVuY3Rpb24gdChlLHQpe2NvbnN0IG49ZnVuY3Rpb24oZSl7Y29uc3QgdD1lLmxlbmd0aDtsZXQgbj1bXSxyPTA7Zm9yKDtyPHQ7KXIrMjx0JiYwPT09ZVtyXSYmMD09PWVbcisxXSYmKDA9PT1lW3IrMl18fDE9PT1lW3IrMl18fDI9PT1lW3IrMl18fDM9PT1lW3IrMl0pPyhuLnB1c2goZVtyXSxlW3IrMV0sMyxlW3IrMl0pLHIrPTMpOihuLnB1c2goZVtyXSkscisrKTtyZXR1cm4gbmV3IFVpbnQ4QXJyYXkobil9KHQpLHI9bi5sZW5ndGgsYT1NYXRoLmZsb29yKHIvMjU1KSxvPXIlMjU1LHM9bmV3IFVpbnQ4QXJyYXkoNithKzErcitlLmJ5dGVMZW5ndGgpO3NbMF09MCxzWzFdPTAsc1syXT0wLHNbM109MSxzWzRdPTYsc1s1XT0xMDE7bGV0IGk9MDtmb3IoO2k8YTspc1s2K2ldPTI1NSxpKys7cmV0dXJuIHNbNitpXT1vLGkrKyxzLnNldChuLDYraSkscy5zZXQobmV3IFVpbnQ4QXJyYXkoZSksNitpK3IpLHMuYnVmZmVyfW5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZigiU2FmYXJpIik+LTEmJi0xPT09bmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCJDaHJvbWUiKSYmKHNlbGYub25ydGN0cmFuc2Zvcm09bj0+e2NvbnN0IHI9bi50cmFuc2Zvcm1lcjtsZXQgYT1bXTtyLm9wdGlvbnMucG9ydC5vbm1lc3NhZ2U9ZT0+e2UuZGF0YS5zZWkmJmEucHVzaChlLmRhdGEuc2VpKX0sc2VsZi5wb3N0TWVzc2FnZSgic3RhcnRlZCIpO2NvbnN0IG89ci5yZWFkYWJsZS5nZXRSZWFkZXIoKSxzPXIud3JpdGFibGUuZ2V0V3JpdGVyKCk7InJ4Ij09PXIub3B0aW9ucy5uYW1lP2Z1bmN0aW9uIHQobil7by5yZWFkKCkudGhlbigocj0+e2lmKCFyLmRvbmUpe2lmKHIudmFsdWUgaW5zdGFuY2VvZiBSVENFbmNvZGVkVmlkZW9GcmFtZSl7Y29uc3QgdD1mdW5jdGlvbih0KXtjb25zdCBuPW5ldyBEYXRhVmlldyh0LmRhdGEpO2xldCByPTA7Zm9yKDtyKzQ8dC5kYXRhLmJ5dGVMZW5ndGg7KXtpZigwPT09bi5nZXRVaW50OChyKzApJiYwPT09bi5nZXRVaW50OChyKzEpJiYwPT09bi5nZXRVaW50OChyKzIpJiYxPT09bi5nZXRVaW50OChyKzMpJiY2PT09bi5nZXRVaW50OChyKzQpKXtsZXQgYT1yKzYsbz0wLHM9MDtmb3IoOzI1NT09PShzPW4uZ2V0VWludDgoYSsrKSk7KW8rPTI1NTtvKz1zO2NvbnN0IGk9ZSh0LmRhdGEsYSxvKTtyZXR1cm4gbmV3IFVpbnQ4QXJyYXkoaSl9cisrfXJldHVybiBudWxsfShyLnZhbHVlKTt0JiZuLm9wdGlvbnMucG9ydC5wb3N0TWVzc2FnZSh7c2VpOnR9KX1zLndyaXRlKHIudmFsdWUpLG4ub3B0aW9ucy5wb3J0LnBvc3RNZXNzYWdlKHt0cmFuc2Zvcm1lZDohMH0pLHQobil9fSkpfShyKToidHgiPT09ci5vcHRpb25zLm5hbWUmJmZ1bmN0aW9uIGUobil7by5yZWFkKCkudGhlbigocj0+e2lmKCFyLmRvbmUpe2lmKHIudmFsdWUgaW5zdGFuY2VvZiBSVENFbmNvZGVkVmlkZW9GcmFtZSl7Y29uc3QgZT1hLnNoaWZ0KCk7ZSYmKHIudmFsdWUuZGF0YT10KHIudmFsdWUuZGF0YSxlKSl9cy53cml0ZShyLnZhbHVlKSxuLm9wdGlvbnMucG9ydC5wb3N0TWVzc2FnZSh7dHJhbnNmb3JtZWQ6ITB9KSxlKG4pfX0pKX0ocil9LHNlbGYucG9zdE1lc3NhZ2UoInJlZ2lzdGVyZWQiKSk7Cg==")],{type:"text/javascript"});return setTimeout((()=>vJ.revokeObjectURL(e)),0),new Worker(vJ.createObjectURL(e))}const $$=new Map,Z$=new Map;function eZ(e,t,n){let r=new Uint8Array(e,t,n),i=[],o=0;for(;i.length<n;)o+3<n&&0===r[o]&&0===r[o+1]&&3===r[o+2]&&(0===r[o+3]||1===r[o+3]||2===r[o+3]||3===r[o+3])?(i.push(r[o],r[o+1],r[o+3]),o+=4):(i.push(r[o]),o++);return new Uint8Array(i)}const tZ=new Map;const nZ=new Map;!function(){const e=SB();bJ.getDisplayMedia=!(!navigator.mediaDevices||!navigator.mediaDevices.getDisplayMedia),bJ.getStreamFromExtension=e.name===EB.CHROME&&Number(e.version)>34,bJ.supportUnifiedPlan=function(){if(!window.RTCRtpTransceiver)return!1;if(!("currentDirection"in RTCRtpTransceiver.prototype))return!1;const e=new RTCPeerConnection;let t=!1;try{e.addTransceiver("audio"),t=!0}catch(e){}return e.close(),t}(),bJ.supportMinBitrate=e.name===EB.CHROME||e.name===EB.EDGE,bJ.supportSetRtpSenderParameters=function(){const e=SB();return!!(window.RTCRtpSender&&window.RTCRtpSender.prototype.setParameters&&window.RTCRtpSender.prototype.getParameters)&&(!!qB()||!(!AB()&&!wB())||e.name===EB.FIREFOX&&Number(e.version)>=64)}(),e.name===EB.SAFARI&&(Number(e.version)>=14?bJ.supportDualStream=!0:bJ.supportDualStream=!1),bJ.webAudioMediaStreamDest=function(){const e=SB();return!(e.name===EB.SAFARI&&Number(e.version)<12)}(),bJ.supportReplaceTrack=!!window.RTCRtpSender&&"function"==typeof RTCRtpSender.prototype.replaceTrack,bJ.supportWebGL="undefined"!=typeof WebGLRenderingContext,bJ.supportRequestFrame=!!window.CanvasCaptureMediaStreamTrack,qB()||(bJ.webAudioWithAEC=!0),bJ.supportShareAudio=function(){const e=SB();return(e.os===_B.WIN_10||e.os===_B.WIN_81||e.os===_B.WIN_7||e.os===_B.LINUX||e.os===_B.MAC_OS||e.os===_B.CHROMIUM_OS)&&e.name===EB.CHROME&&Number(e.version)>=74}(),bJ.supportDataChannel=!!(PB(76)||function(){const e=SB();return!(e.name!==EB.FIREFOX||!e.osVersion)&&Number(e.version)>=68}()||kB(14)),bJ.supportPCSetConfiguration=function(){const e=window.RTCPeerConnection;return!xB()&&!!e&&e.prototype.setConfiguration instanceof Function}(),bJ.supportWebRTCEncodedTransform=function(){const e=SB();return"Chrome"===e.name&&Number(e.version)>=86||"Safari"===e.name&&Number(e.version)>=15}(),bJ.supportWebRTCInsertableStream=function(){const e=SB();return(e.name===EB.CHROME||e.name===EB.EDGE)&&Number(e.version)>=94&&"MediaStreamTrackGenerator"in window&&"MediaStreamTrackProcessor"in window}(),bJ.supportRequestVideoFrameCallback="requestVideoFrameCallback"in HTMLVideoElement.prototype,bJ.supportWebCrypto="undefined"!=typeof window&&void 0!==window.crypto&&void 0!==window.crypto.subtle,UG((()=>{bJ.supportDualStreamEncoding=function(){const e=SB();return!!AH("DISABLE_WEBAUDIO")||"Safari"===e.name&&Number(e.version)>=14||!!("Chrome"===e.name&&/Windows/i.test(e.os||"")&&Number(e.version)>=100&&AH("CHROME_DUAL_STREAM_USE_ENCODING"))}(),KH.info("browser compatibility",JSON.stringify(bJ),JSON.stringify(e))}))}();class rZ extends mG{constructor(e,t){super(),SU(this,"signal",void 0),SU(this,"token",void 0),SU(this,"tokenTimeout",void 0),SU(this,"tokenInterval",void 0),SU(this,"_sequence",0),SU(this,"userMap",new Map),SU(this,"encoder",new TextEncoder),this.signal=e,this.token=t;const n=()=>{this.signal.connectionState===nK.CONNECTED&&this.check(),0===this.userMap.size?this.tokenInterval=window.setTimeout(n,1e3):this.tokenInterval=window.setTimeout(n,3*AH("P2P_TOKEN_INTERVAL"))};n()}async send(e,t,n,r,i){var o,s,a;if(0===this.userMap.size)return;const c=Array.from(Fz(o=this.userMap).call(o))[0].token;"string"!=typeof t&&(t=JSON.stringify(t)),r=null!==(s=r)&&void 0!==s?s:XG(6,""),i=null!==(a=i)&&void 0!==a?a:this._sequence++;const d={_id:r,_type:e,_seq:i,_message:t,token:"".concat(this.token,"_").concat(c)};AH("SHOW_P2P_LOG")&&KH.debug("send message",d,"noNeedResponse : ".concat(n)),this.splitMessage(JSON.stringify(d)).forEach((e=>{this.signal.request(iK.DATA_STREAM,{payload:HG(this.encoder.encode(e))})}));const l=new LO(((t,i)=>{const o=window.setTimeout((()=>{this.off("res-@".concat(r,"_ack"),s),this.off("res-@".concat(r),c),this.off(XK.ABORT,a),KH.debug("[external-signal] request timeout, type: ".concat(e,", requestId: ").concat(r)),0===this.userMap.size?i(new eG(ZB.INVALID_REMOTE_USER)):i(new eG(ZB.TIMEOUT))}),AH("EXTERNAL_SIGNAL_REQUEST_TIMEOUT")),s=()=>{o&&window.clearTimeout(o),this.off(XK.ABORT,a),n&&t()},a=()=>{o&&window.clearTimeout(o),this.off("res-@".concat(r,"_ack"),s),this.off("res-@".concat(r),c),i(new eG(ZB.EXTERNAL_SIGNAL_ABORT,"type: ".concat(e,", requestId: ").concat(r)))};this.once(XK.ABORT,a),this.once("res-@".concat(r,"_ack"),s);const c=(n,c)=>{l=!0,o&&window.clearTimeout(o),this.off("res-@".concat(r,"_ack"),s),this.off(XK.ABORT,a),"success"===n?t(c):i(new eG(ZB.P2P_MESSAGE_FAILED,"request ".concat(e," failed, requestId: ").concat(r)))};let l=!1;n||(this.once("res-@".concat(r),c),JG(AH("SIGNAL_REQUEST_TIMEOUT")).then((()=>{l||KH.warning("external_signal request timeout, type: ".concat(e,", requestId: ").concat(r,", ").concat(d))})))}));try{return await l}catch(o){if(o.code===ZB.TIMEOUT)return await this.send(e,t,n,r,i);throw o}}onMessage(e){var t;const{_uid:n}=e;let r,i=this.userMap.get(n);if(i)r=i.splitMessageMap;else{if(this.userMap.size>0||!("_type"in e)||e._type!==JK.CHECK)return;const{token:t}=e;r=new Map,i={uid:n,isStart:!0,token:t,splitMessageMap:r,nextExpectedSequenceNumber:0,receivedMessagesMap:new Map},this.userMap.set(n,i),this.signal.emit(sK.ON_USER_ONLINE,{uid:n}),this.handleUserOnline()}if("id"in e&&"total"in e){var o;const{id:t,total:i}=e,s=null!==(o=r.get(t))&&void 0!==o?o:[];if(s.push(e),r.has(t)||r.set(t,s),s.length!==i)return;{const i=XN(s).call(s,((e,t)=>e.index-t.index)).map((e=>e.payload)).join("");r.delete(t),(e=JSON.parse(i))._uid=n}}const{_type:s,token:a}=e;if(Fv(t=[JK.ACK,JK.CHECK]).call(t,s))return s===JK.CHECK&&this.handleCheckToken(i,a),void this.receiveMessage(e);a==="".concat(i.token,"_").concat(this.token)?this.handleReceivedMessage(e):KH.debug('Receive unexpected message", '.concat(a,", cur_token: ").concat(i.token,"_").concat(this.token),e)}check(){const e={_id:XG(6,""),token:this.token,_type:JK.CHECK};AH("SHOW_P2P_LOG")&&KH.debug("send message",e),this.signal.request(iK.DATA_STREAM,{payload:HG(this.encoder.encode(JSON.stringify(e)))})}ack(e){const t={_id:e,_type:JK.ACK,token:this.token};AH("SHOW_P2P_LOG")&&KH.debug("send message",t),this.signal.request(iK.DATA_STREAM,{payload:HG(this.encoder.encode(JSON.stringify(t)))})}response(e,t,n){this.send(JK.RESPONSE,JSON.stringify({success:!n,message:t}),!0,e)}handleReceivedMessage(e){const t=()=>{this.userMap.forEach((e=>{const{receivedMessagesMap:t,nextExpectedSequenceNumber:n}=e;for(;t.has(n);){const r=t.get(n);t.delete(n),this.receiveMessage(r),e.nextExpectedSequenceNumber++}}))};if(!e)return void t();const{_uid:n,_seq:r}=e,i=this.userMap.get(n),{receivedMessagesMap:o,isStart:s,nextExpectedSequenceNumber:a}=i;if(r<a)return this.ack(e._id),void KH.debug("[external-signal] receive old message, seq: ".concat(r,", ").concat(e._message));o.set(r,e),s&&r===a&&(this.receiveMessage(e),o.delete(a),i.nextExpectedSequenceNumber++,t())}receiveMessage(e){const{_id:t,_type:n,_message:r,_uid:i}=e;if(AH("SHOW_P2P_LOG")&&KH.debug("receive message",e),t){let o;switch(e._type!==JK.ACK&&(r&&(o=JSON.parse(r)),this.ack(e._id)),e._type){case JK.CANDIDATE:case JK.CONTROL:this.signal.emit(n,o,i);break;case JK.PUBLISH:case JK.UNPUBLISH:case JK.RESTART_ICE:case JK.CALL:o.uid=i,xG(this.signal,n,o).then((t=>{this.response(e._id,t)})).catch((()=>{this.response(e._id,void 0,!0)}));break;case JK.ACK:this.getListeners("res-@".concat(t,"_ack")).length>0&&this.emit("res-@".concat(t,"_ack"));break;case JK.RESPONSE:{const{success:e,message:n}=o;this.emit("res-@".concat(t),e?"success":"failed",n);break}}}}splitMessage(e){if(e.length<rZ.MAX_MESSAGE_SIZE)return[e];const t=[],{remoteToken:n}=JSON.parse(e),r=XG(6,"");let i=0,o=800;const s=Math.ceil(e.length/o);for(;e.length>0;){i++;const a={id:r,index:i,total:s,payload:e.slice(0,o),token:"".concat(this.token,"_").concat(n)};JSON.stringify(a).length>rZ.MAX_MESSAGE_SIZE?o-=50:(t.push(a),e=e.slice(o))}return t.map((e=>JSON.stringify(e)))}handleCheckToken(e,t){return e.token!==t?(KH.debug("token changed, from ".concat(e.token," to ").concat(t)),this.reset(e.uid,t),!1):(this.tokenTimeout&&(window.clearTimeout(this.tokenTimeout),this.tokenTimeout=void 0),this.tokenTimeout=window.setTimeout((()=>{KH.debug("token timeout, ".concat(t)),this.reset(e.uid)}),AH("MAX_P2P_TIMEOUT")),!0)}async handleUserOnline(){const e=await xG(this.signal,JK.CALL,void 0),t=await this.send(JK.CALL,e);this.signal.emit(rK.P2P_CONNECTION,t,!0)}async reset(e,t){const n=this.userMap.get(e);n&&(this.emit(XK.ABORT),this.signal.emit(sK.ON_USER_OFFLINE,{uid:n.uid,reason:$K.P2P_TOKEN_CHANGED}),this._sequence=0,this.userMap.clear(),t||(KH.debug("change local token from ".concat(t," to ").concat(t)),this.token=XG(6,"")))}clear(){this._sequence=0,this.userMap.clear(),this.tokenInterval&&window.clearTimeout(this.tokenInterval),this.tokenInterval=void 0,this.tokenTimeout&&window.clearTimeout(this.tokenTimeout),this.tokenTimeout=void 0,this.emit(XK.ABORT)}}SU(rZ,"MAX_SIZE",1),SU(rZ,"MAX_MESSAGE_SIZE",1024);class iZ extends mG{get connectionState(){return this._connectionState}set connectionState(e){e!==this._connectionState&&(this._connectionState=e,e===nK.CONNECTED?this.emit(rK.WS_CONNECTED):e===nK.RECONNECTING?this.emit(rK.WS_RECONNECTING,this._websocketReconnectReason):e===nK.CLOSED&&this.emit(rK.WS_CLOSED,this._disconnectedReason))}get currentURLIndex(){return this.websocket.currentURLIndex}get url(){return this.websocket&&this.websocket.url||null}get rtt(){return this.rttRolling.mean()}constructor(e,t){super(),SU(this,"_disconnectedReason",void 0),SU(this,"_websocketReconnectReason",void 0),SU(this,"_connectionState",nK.CLOSED),SU(this,"reconnectToken",void 0),SU(this,"p2pToken",void 0),SU(this,"websocket",void 0),SU(this,"openConnectionTime",void 0),SU(this,"clientId",void 0),SU(this,"lastMsgTime",Date.now()),SU(this,"uploadCache",[]),SU(this,"uploadCacheInterval",void 0),SU(this,"rttRolling",new pH(5)),SU(this,"pingpongTimer",void 0),SU(this,"pingpongTimeoutCount",0),SU(this,"joinResponse",void 0),SU(this,"multiIpOption",void 0),SU(this,"initError",void 0),SU(this,"spec",void 0),SU(this,"store",void 0),SU(this,"_external_signal",void 0),SU(this,"onWebsocketMessage",(e=>{if(e.data instanceof ArrayBuffer)return void this.emit(rK.ON_BINARY_DATA,e.data);const t=JSON.parse(e.data);if(this.lastMsgTime=Date.now(),Object.prototype.hasOwnProperty.call(t,"_id")){const e="res-@".concat(t._id);this.emit(e,t._result,t._message)}else if(Object.prototype.hasOwnProperty.call(t,"_type")){switch(t._type){case sK.ON_DATA_STREAM:return void this.handleDataStream(t._message);case sK.MUTE_AUDIO:case sK.MUTE_VIDEO:case sK.ON_P2P_LOST:case sK.ON_USER_ONLINE:return;case sK.ON_USER_OFFLINE:const{uid:e}=t._message;return KH.debug("[".concat(this.clientId,"] user-offline uid: ").concat(e)),void this._external_signal.reset(e)}if(this.emit(t._type,t._message),t._type===sK.ON_NOTIFICATION&&this.handleNotification(t._message),t._type===sK.ON_USER_BANNED)switch(t._message.error_code){case 14:this.close(SG.UID_BANNED);break;case 15:this.close(SG.IP_BANNED);break;case 16:this.close(SG.CHANNEL_BANNED)}if(t._type===sK.ON_USER_LICENSE_BANNED)switch(t._message.error_code){case tK.ERR_LICENSE_MISSING:this.close(SG.LICENSE_MISSING);break;case tK.ERR_LICENSE_EXPIRED:this.close(SG.LICENSE_EXPIRED);break;case tK.ERR_LICENSE_MINUTES_EXCEEDED:this.close(SG.LICENSE_MINUTES_EXCEEDED);break;case tK.ERR_LICENSE_PERIOD_INVALID:this.close(SG.LICENSE_PERIOD_INVALID);break;case tK.ERR_LICENSE_MULTIPLE_SDK_SERVICE:this.close(SG.LICENSE_MULTIPLE_SDK_SERVICE);break;case tK.ERR_LICENSE_ILLEGAL:this.close(SG.LICENSE_ILLEGAL);break;default:this.close()}}})),this.clientId=e.clientId,this.spec=e,this.store=t,this.websocket=new mz("gateway-".concat(this.clientId),this.spec.retryConfig,!0,AH("JOIN_GATEWAY_USE_DUAL_DOMAIN"),AH("JOIN_GATEWAY_USE_443PORT_ONLY"),t),this.handleWebsocketEvents(),window.addEventListener("offline",(()=>{this.connectionState===nK.CONNECTED&&this.reconnect("retry",IG.OFFLINE)})),this.p2pToken=XG(6,""),this._external_signal=new rZ(this,this.p2pToken)}async request(e,t,n,r){const i=XG(6,""),o={_id:i,_type:e,_message:t},s=this.websocket.connectionID,a=()=>new LO(((e,t)=>{if(this.connectionState===nK.CONNECTED)return e();const n=()=>{this.off(rK.WS_CLOSED,r),e()},r=()=>{this.off(rK.WS_CONNECTED,n),t(new eG(ZB.WS_ABORT))};this.once(rK.WS_CONNECTED,n),this.once(rK.WS_CLOSED,r)}));if(this.connectionState!==nK.CONNECTING&&this.connectionState!==nK.RECONNECTING||e===iK.JOIN||e===iK.REJOIN||await a(),this.websocket.sendMessage(o,!0),r)return;const c=new LO(((n,r)=>{let o=!1;const a=(r,i)=>{o=!0,n({isSuccess:"success"===r,message:i||{}}),this.off(rK.WS_CLOSED,c),this.off(rK.WS_RECONNECTING,c),this.emit(rK.REQUEST_SUCCESS,e,t)};this.once("res-@".concat(i),a);const c=()=>{r(new eG(ZB.WS_ABORT,"type: ".concat(e))),this.off(rK.WS_CLOSED,c),this.off(rK.WS_RECONNECTING,c),this.off("res-@".concat(i),a)};this.once(rK.WS_CLOSED,c),this.once(rK.WS_RECONNECTING,c),JG(AH("SIGNAL_REQUEST_TIMEOUT")).then((()=>{this.websocket.connectionID!==s||o||(KH.warning("[".concat(this.clientId,"] ws request timeout, type: ").concat(e)),this.emit(rK.REQUEST_TIMEOUT,e,t))}))}));let d=null;try{d=await c}catch(r){if(this.connectionState===nK.CLOSED||e===iK.LEAVE)throw new eG(ZB.WS_ABORT);return!this.spec.forceWaitGatewayResponse||n?r.throw():e===iK.JOIN||e===iK.REJOIN?null:(await a(),await this.request(e,t))}if(d.isSuccess)return d.message;const l=Number(d.message.error_code||d.message.code),h=nz(l),u=new eG(ZB.UNEXPECTED_RESPONSE,"".concat(h.desc,": ").concat(d.message.error_str),{code:l,data:d.message,desc:h.desc});return"success"===h.action?d.message:(KH.warning("[".concat(this.clientId,"] [").concat(this.websocket.connectionID,"] unexpected response from type ").concat(e,", error_code: ").concat(l,", message: ").concat(h.desc,", action: ").concat(h.action)),l===tK.ERR_TOO_MANY_BROADCASTERS?e===iK.JOIN||e===iK.REJOIN?(this.initError=u,this.close(),u.throw()):u.throw():"failed"===h.action?u.throw():"quit"===h.action?(this.initError=u,this.close(),u.throw()):(l===tK.ERR_JOIN_BY_MULTI_IP?(this.multiIpOption=d.message.option,KH.warning("[".concat(this.clientId,"] detect multi ip, recover")),this.reconnect("recover",IG.MULTI_IP)):this.reconnect(h.action,IG.SERVER_ERROR),e===iK.JOIN||e===iK.REJOIN?null:await this.request(e,t)))}waitMessage(e,t){return new LO((n=>{const r=i=>{(!t||t(i))&&(this.off(e,r),n(i))};this.on(e,r)}))}uploadWRTCStats(e){if(!this.store.sessionId)return void KH.warn("[".concat(this.clientId,"] no session id when upload wrtc stats"));const t={lts:Date.now(),sid:this.store.sessionId,uid:this.store.intUid,stats:e};this.upload(oK.WRTC_STATS,t)}upload(e,t){const n={_type:e,_message:t};try{this.websocket.sendMessage(n)}catch(e){const t=AH("MAX_UPLOAD_CACHE")||50;this.uploadCache.push(n),this.uploadCache.length>t&&this.uploadCache.splice(0,1),this.uploadCache.length>0&&!this.uploadCacheInterval&&(this.uploadCacheInterval=window.setInterval((()=>{if(this.connectionState!==nK.CONNECTED)return;const e=this.uploadCache.splice(0,1)[0];0===this.uploadCache.length&&(window.clearInterval(this.uploadCacheInterval),this.uploadCacheInterval=void 0),this.upload(e._type,e._message)}),AH("UPLOAD_CACHE_INTERVAL")||2e3))}}send(e,t){const n={_type:e,_message:t};this.websocket.sendMessage(n)}async sendExtensionMessage(e,t,n){return await this._external_signal.send(e,t,n)}init(e){return this.initError=void 0,this.multiIpOption=void 0,this.joinResponse=void 0,this.reconnectToken=void 0,this.openConnectionTime=void 0,new LO(((t,n)=>{this.once(rK.WS_CONNECTED,(()=>t(this.joinResponse))),this.once(rK.WS_CLOSED,(()=>n(this.initError||new eG(ZB.WS_ABORT)))),this.connectionState=nK.CONNECTING,this.websocket.init(e).catch(n)}))}close(e){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.reconnectToken=void 0,this.joinResponse=void 0,this._external_signal.clear(),this._disconnectedReason=e||SG.LEAVE,this.connectionState=nK.CLOSED,KH.debug("[".concat(this.clientId,"] ")+"will close websocket in signal"),this.websocket.close(),this.p2pToken=XG(6,""),this._external_signal.clear(),this._external_signal=new rZ(this,this.p2pToken)}async join(){if(!this.joinResponse){this.emit(rK.ABORT_P2P_EXECUTION);const e=await xG(this,rK.REQUEST_JOIN_INFO),t=await this.request(iK.JOIN,e);if(!t)return this.emit(rK.REPORT_JOIN_GATEWAY,ZB.TIMEOUT,this.url||""),!1;this.joinResponse=t,this.emit(rK.JOIN_RESPONSE,this.joinResponse),this.reconnectToken=this.joinResponse.rejoin_token}return this.connectionState=nK.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),!0}reconnect(e,t){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.websocket.reconnect(e,t)}handleDataStream(e){try{var t;const n=GG(e.payload),r=(new TextDecoder).decode(n),i=JSON.parse(r);"total"in i&&"id"in i||Fv(t=Object.values(JK)).call(t,i._type)?(i._uid=e.uid,this._external_signal.onMessage(i)):this.emit(sK.ON_DATA_STREAM,e)}catch(t){this.emit(sK.ON_DATA_STREAM,e)}}handleNotification(e){KH.debug("[".concat(this.clientId,"] receive notification: "),e);const t=nz(e.code);if("success"!==t.action){if("failed"!==t.action)return"quit"===t.action?("ERR_REPEAT_JOIN_CHANNEL"===t.desc&&this.close(SG.UID_BANNED),void this.close()):void this.reconnect(t.action,IG.SERVER_ERROR);KH.error("[".concat(this.clientId,"] ignore error: "),t.desc)}}handlePingPong(){if(!this.websocket||"connected"!==this.websocket.state)return;this.pingpongTimeoutCount>0&&this.rttRolling.add(3e3),this.pingpongTimeoutCount+=1;const e=AH("PING_PONG_TIME_OUT"),t=Date.now();this.pingpongTimeoutCount>=e&&(KH.warning("[".concat(this.clientId,"] PINGPONG Timeout. Last Socket Message: ").concat(t-this.lastMsgTime,"ms")),t-this.lastMsgTime>AH("WEBSOCKET_TIMEOUT_MIN"))?this.reconnect("retry",IG.TIMEOUT):this.request(iK.PING,void 0,!0).then((()=>{this.pingpongTimeoutCount=0;const e=Date.now()-t;this.rttRolling.add(e),AH("REPORT_STATS")&&this.send(iK.PING_BACK,{pingpongElapse:e})})).catch((e=>{}))}handleWebsocketEvents(){this.websocket.on(cK.RECONNECT_WAITTING_FINISH,(e=>{this.emit(rK.WS_RECONNECT_WAITTING_FINISH,e)})),this.websocket.on(cK.RECONNECT_CREATE_CONNECTION,(e=>{this.emit(rK.WS_RECONNECT_CREATE_CONNECTION,e)})),this.websocket.on(cK.ON_MESSAGE,this.onWebsocketMessage),this.websocket.on(cK.CLOSED,(()=>{this.connectionState=nK.CLOSED})),this.websocket.on(cK.FAILED,(()=>{this._disconnectedReason=SG.NETWORK_ERROR,this.connectionState=nK.CLOSED})),this.websocket.on(cK.RECONNECTING,(e=>{this._websocketReconnectReason=e,this.joinResponse=void 0,this.connectionState===nK.CONNECTED?this.connectionState=nK.RECONNECTING:this.connectionState=nK.CONNECTING})),this.websocket.on(cK.WILL_RECONNECT,((e,t,n)=>{"retry"!==e?(KH.debug("".concat(this.clientId," websocket will_connect event, renewSession reconnectMode is ").concat(e)),this.reconnectToken=void 0):KH.debug("".concat(this.clientId," reconnect mode is retry, no need to renew session")),n(e)})),this.websocket.on(cK.CONNECTED,(()=>{this.openConnectionTime=Date.now(),this.join().catch((e=>{if(this.emit(rK.REPORT_JOIN_GATEWAY,e,this.url||""),e instanceof eG&&e.code===ZB.UNEXPECTED_RESPONSE&&e.data.code===tK.ERR_NO_AUTHORIZED)return KH.warning("[".concat(this.clientId,"] reconnect no authorized, recover")),void this.reconnect("recover",IG.SERVER_ERROR);KH.error("[".concat(this.clientId,"] join gateway request failed"),e.toString()),this.spec.forceWaitGatewayResponse?this.reconnect("tryNext",IG.SERVER_ERROR):(this.initError=e,this.close())}))})),this.websocket.on(cK.REQUEST_NEW_URLS,((e,t)=>{xG(this,rK.REQUEST_RECOVER,this.multiIpOption).then(e).catch(t)})),this.websocket.on(cK.ON_TOKEN_PRIVILEGE_DID_EXPIRE,(()=>{this.emit(sK.ON_TOKEN_PRIVILEGE_DID_EXPIRE)}))}}var oZ={exports:{}};oZ.exports=(()=>{var e={8:(e,t,n)=>{n.r(t),n.d(t,{Parser:()=>S,Printer:()=>I,parse:()=>N,print:()=>P});const r="\n",i="".concat("\r").concat(r),o=" ";let s;function a(e){return e>="0"&&e<="9"}function c(e){return e>="!"&&e<="~"}function d(e){return c(e)||e>=""&&e<="ÿ"}function l(e){return"!"===e||e>="#"&&e<="'"||e>="*"&&e<="+"||e>="-"&&e<="."||e>="0"&&e<="9"||e>="A"&&e<="Z"||e>="^"&&e<="~"}function h(e){return e>="1"&&e<="9"}function u(e){return e>="A"&&e<="Z"||e>="a"&&e<="z"}function p(e){return"d"===e||"h"===e||"m"===e||"s"===e}function f(e){return e>""&&e<"\t"||e>"\v"&&e<"\f"||e>""&&e<"ÿ"}function m(e){return u(e)||a(e)||"+"===e||"/"===e}function g(e){return a(e)||u(e)||"+"===e||"/"===e||"-"===e||"_"===e}function _(e){return u(e)||a(e)||"+"===e||"/"===e}function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(e){e.VERSION="v",e.ORIGIN="o",e.SESSION_NAME="s",e.INFORMATION="i",e.URI="u",e.EMAIL="e",e.PHONE="p",e.CONNECTION="c",e.BANDWIDTH="b",e.TIME="t",e.REPEAT="r",e.ZONE_ADJUSTMENTS="z",e.KEY="k",e.ATTRIBUTE="a",e.MEDIA="m"}(s||(s={}));class b{consumeText(e,t){let n=t;for(;n<e.length;){const t=e[n];if("\0"===t||"\r"===t||t===r)break;n+=1}if(n-t==0)throw new Error("Invalid text, at ".concat(e));return n}consumeUnicastAddress(e,t,n){return this.consumeTill(e,t,o)}consumeOneOrMore(e,t,n){let r=t;for(;n(e[r]);)r++;if(r-t==0)throw new Error("Invalid rule at ".concat(t,"."));return r}consumeSpace(e,t){if(e[t]===o)return t+1;throw new Error("Invalid space at ".concat(t,"."))}consumeIP4Address(e,t){let n=t;for(let t=0;t<4;t++)if(n=this.consumeDecimalUChar(e,n),3!==t){if("."!==e[n])throw new Error("Invalid IP4 address.");n++}return n}consumeDecimalUChar(e,t){let n=t;for(let t=0;t<3&&a(e[n]);t++,n++);if(n-t==0)throw new Error("Invalid decimal uchar.");const r=parseInt(e.slice(t,n));if(r>=0&&r<=255)return n;throw new Error("Invalid decimal uchar")}consumeIP6Address(e,t){let n=this.consumeHexpart(e,t);return":"===e[n]?(n+=1,n=this.consumeIP4Address(e,n),n):n}consumeHexpart(e,t){let n=t;if(":"===e[n]&&":"===e[n+1]){n+=2;try{n=this.consumeHexseq(e,n)}catch(e){}return n}if(n=this.consumeHexseq(e,n),":"===e[n]&&":"===e[n+1]){n+=2;try{n=this.consumeHexseq(e,n)}catch(e){}return n}return n}consumeHexseq(e,t){let n=t;for(;n=this.consumeHex4(e,n),":"===e[n]&&":"!==e[n+1];)n+=1;return n}consumeHex4(e,t){let n=0;for(;n<4;n++)if(!((r=e[t+n])>="0"&&r<="9"||r>="a"&&r<="f"||r>="A"&&r<="F")){if(0===n)throw new Error("Invalid hex 4");break}var r;return t+n}consumeFQDN(e,t){let n=t;for(;a(e[n])||u(e[n])||"-"===e[n]||"."===e[n];)n+=1;if(n-t<4)throw new Error("Invalid FQDN");return n}consumeExtnAddr(e,t){return this.consumeOneOrMore(e,t,d)}consumeMulticastAddress(e,t,n){switch(n){case"IP4":case"ip4":return this.consumeIP4MulticastAddress(e,t);case"IP6":case"ip6":return this.consumeIP6MulticastAddress(e,t);default:try{return this.consumeFQDN(e,t)}catch(n){return this.consumeExtnAddr(e,t)}}}consumeIP6MulticastAddress(e,t){const n=this.consumeHexpart(e,t);return"/"===e[n]?this.consumeInteger(e,n+1):n}consumeIP4MulticastAddress(e,t){let n=t+3;const r=e.slice(t,n),i=parseInt(r);if(i<224||i>239)throw new Error("Invalid IP4 multicast address, IPv4 multicast addresses may be in the range 224.0.0.0 to 239.255.255.255.");for(let t=0;t<3;t++){if("."!==e[n])throw new Error("Invalid IP4 multicast address.");n+=1,n=this.consumeDecimalUChar(e,n)}return"/"===e[n]&&(n+=1),n=this.consumeTTL(e,n),"/"===e[n]&&(n=this.consumeInteger(e,n)),n}consumeInteger(e,t){if(!h(e[t]))throw new Error("Invalid integer.");for(t+=1;a(e[t]);)t+=1;return t}consumeTTL(e,t){if("0"===e[t])return t+1;if(!h(e[t]))throw new Error("Invalid TTL.");t+=1;for(let n=0;n<2&&a(e[t]);n++)t+=1;return t}consumeToken(e,t){return this.consumeOneOrMore(e,t,l)}consumeTime(e,t){let n=t;if("0"===e[n])return n+1;for(h(e[n])&&(n+=1);a(e[n]);)n++;if(n-t<10)throw new Error("Invalid time");return n}consumeAddress(e,t){return this.consumeTill(e,t,o)}consumeTypedTime(e,t){let n=t;return n=this.consumeOneOrMore(e,n,a),p(e[n])?n+1:n}consumeRepeatInterval(e,t){if(!h(e[t]))throw new Error("Invalid repeat interval");for(t+=1;a(e[t]);)t+=1;return p(e[t])&&(t+=1),t}consumePort(e,t){return this.consumeOneOrMore(e,t,a)}consume(e,t,n){for(let r=0;r<n.length;r++){if(t+r>=e.length)throw new Error("consume exceeding value length");if(e[t+r]!==n[r])throw new Error("consume ".concat(n," failed at ").concat(r))}return t+n.length}consumeTill(e,t,n){let r=t;for(;r<e.length&&("string"!=typeof n||e[r]!==n)&&("function"!=typeof n||!n(e[r]));)r++;return r}}class S extends b{constructor(){super(),v(this,"records",[]),v(this,"currentLine",0)}parse(e){const t=this.probeEOL(e);this.records=e.split(t).filter((e=>!!Px(e).call(e))).map(this.parseLine),this.currentLine=0;const n=this.parseVersion(),r=this.parseOrigin(),i=this.parseSessionName(),o=this.parseInformation(),s=this.parseUri(),a=this.parseEmail(),c=this.parsePhone(),d=this.parseConnection(),l=this.parseBandWidth(),h=this.parseTimeFields(),u=this.parseKey(),p=this.parseSessionAttribute(),f=this.parseMediaDescription();if(this.currentLine!==this.records.length)throw new Error("parsing failed, non exhaustive sdp lines.");return{version:n,origin:r,sessionName:i,information:o,uri:s,emails:a,phones:c,connection:d,bandwidths:l,timeFields:h,key:u,attributes:p,mediaDescriptions:f}}getCurrentRecord(){const e=this.records[this.currentLine];if(!e)throw new Error("Record doesn't exit.");return e}probeEOL(e){for(let t=0;t<e.length;t++)if(e[t]===r)return"\r"===e[t-1]?i:r;throw new Error("Invalid newline character.")}parseLine(e,t){if(e.length<2)throw new Error("Invalid sdp line, sdp line should be of form <type>=<value>.");const n=e[0];if("="!==e[1])throw new Error('Invalid sdp line, <type> should be a single character followed by an "=" sign.');return{type:n,value:e.slice(2),line:t,cur:0}}parseSessionAttribute(){const e=new R;for(;this.currentLine<this.records.length;){const t=this.getCurrentRecord();if(t.type!==s.ATTRIBUTE)break;const n={attField:this.extractOneOrMore(t,(e=>l(e)&&":"!==e)),_cur:0};":"===t.value[t.cur]&&(t.cur+=1,n.attValue=this.extractOneOrMore(t,f)),e.parse(n),this.currentLine++}return e.digest()}parseMediaAttributes(e){const t=new C(e);for(;this.currentLine<this.records.length;){const e=this.getCurrentRecord();if(e.type!==s.ATTRIBUTE)break;const n={attField:this.extractOneOrMore(e,(e=>l(e)&&":"!==e)),_cur:0};":"===e.value[e.cur]&&(e.cur+=1,n.attValue=this.extractOneOrMore(e,f)),t.parse(n),this.currentLine++}return t.digest()}parseKey(){const e=this.getCurrentRecord();if(e.type===s.KEY){if("prompt"===e.value||"clear:"===e.value||"base64:"===e.value||"uri:"===e.value)return e.value;throw this.currentLine++,new Error("Invalid key.")}}parseZone(){const e=this.getCurrentRecord();if(e.type===s.ZONE_ADJUSTMENTS){const t=[];for(;;)try{const n=this.extract(e,this.consumeTime);this.consumeSpaceForRecord(e);let r=!1;"-"===e.value[e.cur]&&(r=!0,e.cur+=1);const i=this.extract(e,this.consumeTypedTime);t.push({time:n,typedTime:i,back:r})}catch(e){break}if(0===t.length)throw new Error("Invalid zone adjustments");return this.currentLine++,t}return[]}parseRepeat(){const e=[];for(;;){const t=this.getCurrentRecord();if(t.type!==s.REPEAT)break;{const n=this.extract(t,this.consumeRepeatInterval),r=this.parseTypedTime(t);e.push({repeatInterval:n,typedTimes:r}),this.currentLine++}}return e}parseTypedTime(e){const t=[];for(;;)try{this.consumeSpaceForRecord(e),t.push(this.extract(e,this.consumeTypedTime))}catch(e){break}if(0===t.length)throw new Error("Invalid typed time.");return t}parseTime(){const e=this.getCurrentRecord(),t=this.extract(e,this.consumeTime);this.consumeSpaceForRecord(e);const n=this.extract(e,this.consumeTime);return this.currentLine++,{startTime:t,stopTime:n}}parseBandWidth(){const e=[];for(;this.currentLine<this.records.length;){const t=this.getCurrentRecord();if(t.type!==s.BANDWIDTH)break;{const n=this.extractOneOrMore(t,l);if(":"!==t.value[t.cur])throw new Error("Invalid bandwidth field.");t.cur++;const r=this.extractOneOrMore(t,a);e.push({bwtype:n,bandwidth:r}),this.currentLine++}}return e}parseVersion(){const e=this.getCurrentRecord();if(e.type!==s.VERSION)throw new Error("first sdp record must be version");const t=e.value.slice(0,this.consumeOneOrMore(e.value,0,a));if(t.length!==e.value.length)throw new Error('invalid proto version, "v='.concat(e.value,'"'));return this.currentLine++,t}parseOrigin(){const e=this.getCurrentRecord();if(e.type!==s.ORIGIN)throw new Error("second line of sdp must be origin");const t=this.extractOneOrMore(e,d);this.consumeSpaceForRecord(e);const n=this.extractOneOrMore(e,a);this.consumeSpaceForRecord(e);const r=this.extractOneOrMore(e,a);this.consumeSpaceForRecord(e);const i=this.extractOneOrMore(e,l);this.consumeSpaceForRecord(e);const o=this.extractOneOrMore(e,l);this.consumeSpaceForRecord(e);const c=this.extract(e,this.consumeUnicastAddress);return this.currentLine++,{username:t,sessId:n,sessVersion:r,nettype:i,addrtype:o,unicastAddress:c}}parseSessionName(){const e=this.getCurrentRecord();if(e.type===s.SESSION_NAME){const t=this.extract(e,this.consumeText);return this.currentLine++,t}}parseInformation(){const e=this.getCurrentRecord();if(e.type!==s.INFORMATION)return;const t=this.extract(e,this.consumeText);return this.currentLine++,t}parseUri(){const e=this.getCurrentRecord();if(e.type===s.URI)return this.currentLine++,e.value}parseEmail(){const e=[];for(;;){const t=this.getCurrentRecord();if(t.type!==s.EMAIL)break;e.push(t.value),this.currentLine++}return e}parsePhone(){const e=[];for(;;){const t=this.getCurrentRecord();if(t.type!==s.PHONE)break;e.push(t.value),this.currentLine++}return e}parseConnection(){const e=this.getCurrentRecord();if(e.type===s.CONNECTION){const t=this.extractOneOrMore(e,l);this.consumeSpaceForRecord(e);const n=this.extractOneOrMore(e,l);this.consumeSpaceForRecord(e);const r=this.extract(e,this.consumeAddress);return this.currentLine++,{nettype:t,addrtype:n,address:r}}}parseMedia(){const e=this.getCurrentRecord(),t=this.extract(e,this.consumeToken);this.consumeSpaceForRecord(e);let n=this.extract(e,this.consumePort);"/"===e.value[e.cur]&&(e.cur+=1,n+=this.extract(e,this.consumeInteger)),this.consumeSpaceForRecord(e);const r=[];for(r.push(this.extract(e,this.consumeToken));"/"===e.value[e.cur];)e.cur+=1,r.push(this.extract(e,this.consumeToken));if(0===r.length)throw new Error("Invalid proto");const i=this.parseFmt(e);return this.currentLine++,{mediaType:t,port:n,protos:r,fmts:i}}parseTimeFields(){const e=[];for(;this.getCurrentRecord().type===s.TIME;){const t=this.parseTime(),n=this.parseRepeat(),r=this.parseZone();e.push({time:t,repeats:n,zones:r})}return e}parseMediaDescription(){const e=[];for(;this.currentLine<this.records.length&&this.getCurrentRecord().type===s.MEDIA;){const t=this.parseMedia(),n=this.parseInformation(),r=this.parseConnections(),i=this.parseBandWidth(),o=this.parseKey(),s=this.parseMediaAttributes(t);e.push({media:t,information:n,connections:r,bandwidths:i,key:o,attributes:s})}return e}parseConnections(){const e=[];for(;this.currentLine<this.records.length&&this.getCurrentRecord().type===s.CONNECTION;)e.push(this.parseConnection());return e}parseFmt(e){const t=[];for(;;)try{this.consumeSpaceForRecord(e),t.push(this.extract(e,this.consumeToken))}catch(e){break}if(0===t.length)throw new Error("Invalid fmts");return t}extract(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];const o=t.call(this,e.value,e.cur,...r),s=e.value.slice(e.cur,o);return e.cur=o,s}extractOneOrMore(e,t){const n=this.consumeOneOrMore(e.value,e.cur,t),r=e.value.slice(e.cur,n);return e.cur=n,r}consumeSpaceForRecord(e){if(e.value[e.cur]!==o)throw new Error("Invalid space at ".concat(e.cur,"."));e.cur+=1}}class T extends b{constructor(){super(...arguments),v(this,"attributes",void 0),v(this,"digested",!1)}extractOneOrMore(e,t,n){const r=this.consumeOneOrMore(e.attValue,e._cur,t),i=e.attValue.slice(e._cur,r),[o,s]=n||[];if("number"==typeof o&&i.length<o)throw new Error("error in length, should be more or equal than ".concat(o," characters."));if("number"==typeof s&&i.length>s)throw new Error("error in length, should be less or equal than ".concat(s," characters."));return e._cur=r,i}consumeAttributeSpace(e){if(e.attValue[e._cur]!==o)throw new Error("Invalid space at ".concat(e._cur,"."));e._cur+=1}extract(e,t){if(!e.attValue)throw new Error("Nothing to extract from attValue.");for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];const o=t.call(this,e.attValue,e._cur,...r),s=e.attValue.slice(e._cur,o);return e._cur=o,s}atEnd(e){if(!e.attValue)throw new Error;return e._cur>=e.attValue.length}peekChar(e){if(!e.attValue)throw new Error;return e.attValue[e._cur]}peek(e,t){if(!e.attValue)throw new Error;for(let n=0;n<t.length;n++)if(t[n]!==e.attValue[e._cur+n])return!1;return!0}parseIceUfrag(e){if(this.attributes.iceUfrag)throw new Error("Invalid ice-ufrag, should be only a single line if 'a=ice-ufrag'");this.attributes.iceUfrag=this.extractOneOrMore(e,m,[4,256])}parseIcePwd(e){if(this.attributes.icePwd)throw new Error("Invalid ice-pwd, should be only a single line if 'a=ice-pwd'");this.attributes.icePwd=this.extractOneOrMore(e,m,[22,256])}parseIceOptions(e){if(this.attributes.iceOptions)throw new Error("Invalid ice-options, should be only one 'ice-options' line");const t=[];for(;!this.atEnd(e);){t.push(this.extractOneOrMore(e,m));try{this.consumeAttributeSpace(e)}catch(t){if(this.atEnd(e))break;throw t}}this.attributes.iceOptions=t}parseFingerprint(e){const t=this.extract(e,this.consumeToken);this.consumeAttributeSpace(e);const n=this.extract(e,this.consumeTill);this.attributes.fingerprints.push({hashFunction:t,fingerprint:n})}parseExtmap(e){const t=this.extractOneOrMore(e,a);let n;"/"===this.peekChar(e)&&(this.extract(e,this.consume,"/"),n=this.extract(e,this.consumeToken)),this.consumeAttributeSpace(e);const r=this.extract(e,this.consumeTill,o),i=y(y({entry:parseInt(t,10)},n&&{direction:n}),{},{extensionName:r});this.peekChar(e)===o&&(this.consumeAttributeSpace(e),i.extensionAttributes=this.extract(e,this.consumeTill)),this.attributes.extmaps.push(i)}parseSetup(e){if(this.attributes.setup)throw new Error("must only be one single 'a=setup' line.");const t=this.extract(e,this.consumeTill);if("active"!==t&&"passive"!==t&&"actpass"!==t&&"holdconn"!==t)throw new Error("role must be one of 'active', 'passive', 'actpass', 'holdconn'.");this.attributes.setup=t}}class R extends T{constructor(){super(...arguments),v(this,"attributes",{unrecognized:[],groups:[],extmaps:[],fingerprints:[],identities:[]})}parse(e){if(this.digested)throw new Error("already digested");try{switch(e.attField){case"group":this.parseGroup(e);break;case"ice-lite":this.parseIceLite();break;case"ice-ufrag":this.parseIceUfrag(e);break;case"ice-pwd":this.parseIcePwd(e);break;case"ice-options":this.parseIceOptions(e);break;case"fingerprint":this.parseFingerprint(e);break;case"setup":this.parseSetup(e);break;case"tls-id":this.parseTlsId(e);break;case"identity":this.parseIdentity(e);break;case"extmap":this.parseExtmap(e);break;case"msid-semantic":this.parseMsidSemantic(e);break;default:e.ignored=!0,this.attributes.unrecognized.push(e)}}catch(t){throw console.error("parsing session attribute ".concat(e.attField,' error, "a=').concat(e.attField,":").concat(e.attValue,'"')),t}if(!e.ignored&&e.attValue&&!this.atEnd(e))throw new Error("attribute parsing error")}digest(){return this.digested=!0,this.attributes}parseGroup(e){const t=this.extract(e,this.consumeToken),n=[];for(;!this.atEnd(e)&&this.peekChar(e)===o;)this.consumeAttributeSpace(e),n.push(this.extract(e,this.consumeToken));this.attributes.groups.push({semantic:t,identificationTag:n})}parseIceLite(){if(this.attributes.iceLite)throw new Error("Invalid ice-lite, should be only a single line of 'a=ice-lite'");this.attributes.iceLite=!0}parseTlsId(e){if(this.attributes.tlsId)throw new Error("must be only one tld-id line");this.attributes.tlsId=this.extractOneOrMore(e,g)}parseIdentity(e){const t=this.extractOneOrMore(e,_),n=[];for(;!this.atEnd(e)&&this.peekChar(e)===o;){this.consumeAttributeSpace(e);const t=this.extract(e,this.consumeToken);this.extract(e,this.consume,"=");const r=this.extractOneOrMore(e,(e=>e!==o&&f(e)));n.push({name:t,value:r})}this.attributes.identities.push({assertionValue:t,extensions:n})}parseMsidSemantic(e){this.peekChar(e)===o&&this.consumeAttributeSpace(e);const t={semantic:this.extract(e,this.consumeToken),identifierList:[]};for(;;){try{this.consumeAttributeSpace(e)}catch(e){break}if("*"===this.peekChar(e)){this.extract(e,this.consume,"*"),t.applyForAll=!0;break}{const n=this.extract(e,this.consumeTill,o);t.identifierList.push(n)}}this.attributes.msidSemantic=t}}class C extends T{constructor(e){super(),v(this,"attributes",void 0),-1!==e.protos.indexOf("RTP")||e.protos.indexOf("rtp"),this.attributes={unrecognized:[],candidates:[],extmaps:[],fingerprints:[],imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:[],ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:[]}}parse(e){if(this.digested)throw new Error("already digested");try{switch(e.attField){case"extmap":this.parseExtmap(e);break;case"setup":this.parseSetup(e);break;case"ice-ufrag":this.parseIceUfrag(e);break;case"ice-pwd":this.parseIcePwd(e);break;case"ice-options":this.parseIceOptions(e);break;case"candidate":this.parseCandidate(e);break;case"remote-candidate":this.parseRemoteCandidate(e);break;case"end-of-candidates":this.parseEndOfCandidates();break;case"fingerprint":this.parseFingerprint(e);break;case"rtpmap":this.parseRtpmap(e);break;case"ptime":this.parsePtime(e);break;case"maxptime":this.parseMaxPtime(e);break;case"sendrecv":case"recvonly":case"sendonly":case"inactive":this.parseDirection(e);break;case"ssrc":this.parseSSRC(e);break;case"fmtp":this.parseFmtp(e);break;case"rtcp-fb":this.parseRtcpFb(e);break;case"rtcp-mux":this.parseRTCPMux();break;case"rtcp-mux-only":this.parseRTCPMuxOnly();break;case"rtcp-rsize":this.parseRTCPRsize();break;case"rtcp":this.parseRTCP(e);break;case"mid":this.parseMid(e);break;case"msid":this.parseMsid(e);break;case"imageattr":this.parseImageAttr(e);break;case"rid":this.parseRid(e);break;case"simulcast":this.parseSimulcast(e);break;case"sctp-port":this.parseSctpPort(e);break;case"max-message-size":this.parseMaxMessageSize(e);break;case"ssrc-group":this.parseSSRCGroup(e);break;default:e.ignored=!0,this.attributes.unrecognized.push(e)}}catch(t){throw console.error("parsing media attribute ".concat(e.attField,' error, "a=').concat(e.attField,":").concat(e.attValue,'"')),t}if(!e.ignored&&e.attValue&&!this.atEnd(e))throw new Error("attribute parsing error")}parseCandidate(e){const t=this.extractOneOrMore(e,m,[1,32]);this.consumeAttributeSpace(e);const n=this.extractOneOrMore(e,a,[1,5]);this.consumeAttributeSpace(e);const r=this.extract(e,this.consumeToken);this.consumeAttributeSpace(e);const i=this.extractOneOrMore(e,a,[1,10]);this.consumeAttributeSpace(e);const s=this.extract(e,this.consumeAddress);this.consumeAttributeSpace(e);const d=this.extract(e,this.consumePort);this.consumeAttributeSpace(e),this.extract(e,this.consume,"typ"),this.consumeAttributeSpace(e);const l={foundation:t,componentId:n,transport:r,priority:i,connectionAddress:s,port:d,type:this.extract(e,this.consumeToken),extension:{}};for(this.peek(e," raddr")&&(this.extract(e,this.consume," raddr"),this.consumeAttributeSpace(e),l.relAddr=this.extract(e,this.consumeAddress)),this.peek(e," rport")&&(this.extract(e,this.consume," rport"),this.consumeAttributeSpace(e),l.relPort=this.extract(e,this.consumePort));this.peekChar(e)===o;){this.consumeAttributeSpace(e);const t=this.extract(e,this.consumeToken);this.consumeAttributeSpace(e),l.extension[t]=this.extractOneOrMore(e,c)}this.attributes.candidates.push(l)}parseRemoteCandidate(e){const t=[];for(;;){const n=this.extractOneOrMore(e,a,[1,5]);this.consumeAttributeSpace(e);const r=this.extract(e,this.consumeAddress);this.consumeAttributeSpace(e);const i=this.extract(e,this.consumePort);t.push({componentId:n,connectionAddress:r,port:i});try{this.consumeAttributeSpace(e)}catch(e){break}}this.attributes.remoteCandidatesList.push(t)}parseEndOfCandidates(){if(this.attributes.endOfCandidates)throw new Error("must be only one line of end-of-candidates");this.attributes.endOfCandidates=!0}parseRtpmap(e){const t=this.extract(e,this.consumeToken);this.consumeAttributeSpace(e);const n=this.extract(e,this.consumeTill,"/");this.extract(e,this.consume,"/");const r={encodingName:n,clockRate:this.extractOneOrMore(e,a)};this.atEnd(e)||"/"!==this.peekChar(e)||(this.extract(e,this.consume,"/"),r.encodingParameters=parseInt(this.extract(e,this.consumeTill),10));const i=this.attributes.payloads.find((e=>e.payloadType===parseInt(t,10)));i?i.rtpMap=r:this.attributes.payloads.push({payloadType:parseInt(t,10),rtpMap:r,rtcpFeedbacks:[]})}parsePtime(e){if(this.attributes.ptime)throw new Error("must be only one line of ptime");this.attributes.ptime=this.extract(e,this.consumeTill)}parseMaxPtime(e){if(this.attributes.maxPtime)throw new Error("must be only one line of ptime");this.attributes.maxPtime=this.extract(e,this.consumeTill)}parseDirection(e){if(this.attributes.direction)throw new Error("must be only one line of direction info");this.attributes.direction=e.attField}parseSSRC(e){const t=this.extractOneOrMore(e,a);this.consumeAttributeSpace(e);const n=this.extract(e,this.consumeTill,":");let r;":"===this.peekChar(e)&&(this.extract(e,this.consume,":"),r=this.extract(e,this.consumeTill));const i=this.attributes.ssrcs.find((e=>e.ssrcId===parseInt(t,10)));i?i.attributes[n]=r:this.attributes.ssrcs.push({ssrcId:parseInt(t,10),attributes:{[n]:r}})}parseFmtp(e){const t=this.extract(e,this.consumeTill,o);this.consumeAttributeSpace(e);const n=this.extract(e,this.consumeTill),r={};n.split(";").forEach((e=>{let[t,n]=e.split("=");t=Px(t).call(t);const i="string"==typeof n?Px(n).call(n):null;"string"==typeof t&&t.length>0&&(r[t]=i)}));const i=this.attributes.payloads.find((e=>e.payloadType===parseInt(t,10)));i?i.fmtp={parameters:r}:this.attributes.payloads.push({payloadType:parseInt(t,10),rtcpFeedbacks:[],fmtp:{parameters:r}})}parseFmtParameters(e){const t={},n=this.extract(e,this.consumeTill,"=");e._cur++;const r=this.extract(e,this.consumeTill,";");for(t[n]=r;";"===e.attValue[e._cur];){const n=this.extract(e,this.consumeTill,"=");e._cur++;const r=this.extract(e,this.consumeTill,";");t[n]=r}return t}parseRtcpFb(e){let t="";t="*"===this.peekChar(e)?this.extract(e,this.consume,"*"):this.extract(e,this.consumeTill,o),this.consumeAttributeSpace(e);const n=this.extract(e,this.consumeTill,o);let r;if("trr-int"===n)r={type:n,interval:this.extract(e,this.consumeTill)};else{const t={type:n};this.peekChar(e)===o&&(this.consumeAttributeSpace(e),t.parameter=this.extract(e,this.consumeToken),this.peekChar(e)===o&&(t.additional=this.extract(e,this.consumeTill))),r=t}if("*"===t)this.attributes.rtcpFeedbackWildcards.push(r);else{const e=this.attributes.payloads.find((e=>e.payloadType===parseInt(t,10)));e?e.rtcpFeedbacks.push(r):this.attributes.payloads.push({payloadType:parseInt(t,10),rtcpFeedbacks:[r]})}}parseRTCPMux(){if(this.attributes.rtcpMux)throw new Error("must be single line of rtcp-mux");this.attributes.rtcpMux=!0}parseRTCPMuxOnly(){if(this.attributes.rtcpMuxOnly)throw new Error("must be single line of rtcp-only");this.attributes.rtcpMuxOnly=!0}parseRTCPRsize(){if(this.attributes.rtcpRsize)throw new Error("must be single line of rtcp-rsize");this.attributes.rtcpRsize=!0}parseRTCP(e){if(this.attributes.rtcp)throw new Error("must be single line of rtcp");const t={port:this.extract(e,this.consumePort)};this.peekChar(e)===o&&(this.consumeAttributeSpace(e),t.netType=this.extractOneOrMore(e,l),this.consumeAttributeSpace(e),t.addressType=this.extractOneOrMore(e,l),this.consumeAttributeSpace(e),t.address=this.extract(e,this.consumeAddress)),this.attributes.rtcp=t}parseMsid(e){const t={id:this.extractOneOrMore(e,l,[1,64])};this.peekChar(e)===o&&(this.consumeAttributeSpace(e),t.appdata=this.extractOneOrMore(e,l,[1,64])),this.attributes.msids.push(t)}parseImageAttr(e){this.attributes.imageattr.push(e.attValue)}parseRid(e){const t=this.extractOneOrMore(e,(e=>u(e)||a(e)||"_"===e||"-"===e));this.consumeAttributeSpace(e);const n={id:t,direction:this.extract(e,this.consumeToken),params:[]};if(this.peekChar(e)===o){if(this.consumeAttributeSpace(e),this.peek(e,"pt=")){this.extract(e,this.consume,"pt=");const t=[];for(;;){const n=this.extract(e,this.consumeToken);t.push(n);try{this.extract(e,this.consume,",")}catch(e){break}}n.payloads=t,this.peekChar(e)===o&&this.extract(e,this.consume,o)}for(;;){const t=this.extract(e,this.consumeToken);switch(t){case"depend":{const r={type:t,rids:this.extract(e,this.consume,"=").split(",")};n.params.push(r);break}default:{const r={type:t};"="===this.peekChar(e)&&(this.extract(e,this.consume,"="),r.val=this.extract(e,this.consumeTill,";")),n.params.push(r)}}try{this.extract(e,this.consume,";")}catch(e){break}}}this.attributes.rids.push(n)}parseSimulcast(e){if(this.attributes.simulcast)throw new Error("must be single line of simulcast");this.attributes.simulcast=e.attValue,this.extract(e,this.consumeTill)}parseSctpPort(e){this.attributes.sctpPort=this.extractOneOrMore(e,a,[1,5])}parseMaxMessageSize(e){this.attributes.maxMessageSize=this.extractOneOrMore(e,a,[1,void 0])}digest(){return this.digested=!0,this.attributes}parseMid(e){this.attributes.mid=this.extract(e,this.consumeToken)}parseSSRCGroup(e){const t=this.extract(e,this.consumeToken),n=[];for(;;)try{this.consumeAttributeSpace(e);const t=this.extract(e,this.consumeInteger);n.push(parseInt(t,10))}catch(e){break}this.attributes.ssrcGroups.push({semantic:t,ssrcIds:n})}}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class I{constructor(){w(this,"eol",i)}print(e,t){let n="";return t&&(this.eol=t),n+=this.printVersion(e.version),n+=this.printOrigin(e.origin),n+=this.printSessionName(e.sessionName),n+=this.printInformation(e.information),n+=this.printUri(e.uri),n+=this.printEmail(e.emails),n+=this.printPhone(e.phones),n+=this.printConnection(e.connection),n+=this.printBandwidth(e.bandwidths),n+=this.printTimeFields(e.timeFields),n+=this.printKey(e.key),n+=this.printSessionAttributes(e.attributes),n+=this.printMediaDescription(e.mediaDescriptions),n}printVersion(e){return"v=".concat(e).concat(this.eol)}printOrigin(e){return"o=".concat(e.username," ").concat(e.sessId," ").concat(e.sessVersion," ").concat(e.nettype," ").concat(e.addrtype," ").concat(e.unicastAddress).concat(this.eol)}printSessionName(e){return e?"s=".concat(e).concat(this.eol):""}printInformation(e){return e?"i=".concat(e).concat(this.eol):""}printUri(e){return e?"u=".concat(e).concat(this.eol):""}printEmail(e){let t="";for(const n of e)t+="e=".concat(n).concat(this.eol);return t}printPhone(e){let t="";for(const n of e)t+="e=".concat(n).concat(this.eol);return t}printConnection(e){return e?"c=".concat(e.nettype," ").concat(e.addrtype," ").concat(e.address).concat(this.eol):""}printBandwidth(e){let t="";for(const n of e)t+="b=".concat(n.bwtype,":").concat(n.bandwidth).concat(this.eol);return t}printTimeFields(e){let t="";for(const n of e){t+="t=".concat(n.time.startTime," ").concat(n.time.startTime).concat(this.eol);for(const e of n.repeats)t+="r=".concat(e.repeatInterval," ").concat(e.typedTimes.join(" ")).concat(this.eol);n.zoneAdjustments&&(t+="z=",t+="z=".concat(n.zoneAdjustments.map((e=>"".concat(e.time," ").concat(e.back?"-":""," ").concat(e.typedTime))).join(" ")).concat(this.eol),t+=this.eol)}return t}printKey(e){return e?"k=".concat(e).concat(this.eol):""}printAttributes(e){let t="";for(const n of e)t+="a=".concat(n.attField).concat(n.attValue?":".concat(n.attValue):"").concat(this.eol);return t}printMediaDescription(e){let t="";for(const n of e)t+=this.printMedia(n.media),t+=this.printInformation(n.information),t+=this.printConnections(n.connections),t+=this.printBandwidth(n.bandwidths),t+=this.printKey(n.key),t+=this.printMediaAttributes(n);return t}printConnections(e){let t="";for(const n of e)t+=this.printConnection(n);return t}printMedia(e){return"m=".concat(e.mediaType," ").concat(e.port," ").concat(e.protos.join("/")," ").concat(e.fmts.join(" ")).concat(this.eol)}printSessionAttributes(e){return new O(this.eol).print(e)}printMediaAttributes(e){return new x(this.eol).print(e)}}class A{constructor(e){w(this,"eol",void 0),this.eol=e}printIceUfrag(e){return void 0===e?"":"a=ice-ufrag:".concat(e).concat(this.eol)}printIcePwd(e){return void 0===e?"":"a=ice-pwd:".concat(e).concat(this.eol)}printIceOptions(e){return void 0===e?"":"a=ice-options:".concat(e.join(o)).concat(this.eol)}printFingerprints(e){return e.length>0?e.map((e=>"a=fingerprint:".concat(e.hashFunction).concat(o).concat(e.fingerprint))).join(this.eol)+this.eol:""}printExtmap(e){return e.map((e=>"a=extmap:".concat(e.entry).concat(e.direction?"/".concat(e.direction):"").concat(o).concat(e.extensionName).concat(e.extensionAttributes?"".concat(o).concat(e.extensionAttributes):"").concat(this.eol))).join("")}printSetup(e){return void 0===e?"":"a=setup:".concat(e).concat(this.eol)}printUnrecognized(e){return e.map((e=>"a=".concat(e.attField).concat(e.attValue?":".concat(e.attValue):"").concat(this.eol))).join("")}}class O extends A{print(e){let t="";return t+=this.printGroups(e.groups),t+=this.printMsidSemantic(e.msidSemantic),t+=this.printIceLite(e.iceLite),t+=this.printIceUfrag(e.iceUfrag),t+=this.printIcePwd(e.icePwd),t+=this.printIceOptions(e.iceOptions),t+=this.printFingerprints(e.fingerprints),t+=this.printSetup(e.setup),t+=this.printTlsId(e.tlsId),t+=this.printIdentity(e.identities),t+=this.printExtmap(e.extmaps),t+=this.printUnrecognized(e.unrecognized),t}printGroups(e){let t="";return e.length>0&&(t+=e.map((e=>"a=group:".concat(e.semantic).concat(e.identificationTag.map((e=>"".concat(o).concat(e))).join("")).concat(this.eol))).join("")),t}printIceLite(e){return void 0===e?"":"a=ice-lite"+this.eol}printTlsId(e){return e?"a=tls-id:".concat(e).concat(this.eol):""}printIdentity(e){return 0===e.length?"":e.map((e=>"a=identity:".concat(e.assertionValue).concat(e.extensions.map((e=>"".concat(o).concat(e.name).concat(e.value?"=".concat(e.value):"")))))).join(this.eol)+this.eol}printMsidSemantic(e){if(!e)return"";let t="a=msid-semantic:".concat(e.semantic);return e.applyForAll?t+="".concat(o,"*"):e.identifierList.length>0&&(t+=e.identifierList.map((e=>"".concat(o).concat(e)))),t+this.eol}}class x extends A{print(e){const t=e.attributes;let n="";return n+=this.printRTCP(t.rtcp),n+=this.printIceUfrag(t.iceUfrag),n+=this.printIcePwd(t.icePwd),n+=this.printIceOptions(t.iceOptions),n+=this.printCandidates(t.candidates),n+=this.printRemoteCandidatesList(t.remoteCandidatesList),n+=this.printEndOfCandidates(t.endOfCandidates),n+=this.printFingerprints(t.fingerprints),n+=this.printSetup(t.setup),n+=this.printMid(t.mid),n+=this.printExtmap(t.extmaps),n+=this.printRTPRelated(t),n+=this.printPtime(t.ptime),n+=this.printMaxPtime(t.maxPtime),n+=this.printDirection(t.direction),n+=this.printSSRCGroups(t.ssrcGroups),n+=this.printSSRC(t.ssrcs),n+=this.printRTCPMux(t.rtcpMux),n+=this.printRTCPMuxOnly(t.rtcpMuxOnly),n+=this.printRTCPRsize(t.rtcpRsize),n+=this.printMSId(t.msids),n+=this.printImageattr(t.imageattr),n+=this.printRid(t.rids),n+=this.printSimulcast(t.simulcast),n+=this.printSCTPPort(t.sctpPort),n+=this.printMaxMessageSize(t.maxMessageSize),n+=this.printUnrecognized(t.unrecognized),n}printCandidates(e){return e.map((e=>"a=candidate:".concat(e.foundation).concat(o).concat(e.componentId).concat(o).concat(e.transport).concat(o).concat(e.priority).concat(o).concat(e.connectionAddress).concat(o).concat(e.port).concat(o,"typ").concat(o).concat(e.type).concat(e.relAddr?"".concat(o,"raddr").concat(o).concat(e.relAddr):"").concat(e.relPort?"".concat(o,"rport").concat(o).concat(e.relPort):"").concat(Object.keys(e.extension).map((t=>"".concat(o).concat(t).concat(o).concat(e.extension[t]))).join("")).concat(this.eol))).join("")}printRemoteCandidatesList(e){return e.map((e=>"a=remote-candidates:".concat(e.join(o)).concat(this.eol))).join("")}printEndOfCandidates(e){return void 0===e?"":"a=end-of-candidates"+this.eol}printRTPRelated(e){if(!e.payloads)return"";const t=e.payloads;let n="";n+=e.rtcpFeedbackWildcards.map((e=>this.printRTCPFeedback("*",e))).join("");for(const e of t)n+=this.printRtpMap(e.payloadType,e.rtpMap),n+=this.printFmtp(e.payloadType,e.fmtp),n+=e.rtcpFeedbacks.map((t=>this.printRTCPFeedback(e.payloadType,t))).join("");return n}printFmtp(e,t){if(!t)return"";const n=Object.keys(t.parameters);return 1===n.length&&null===t.parameters[n[0]]?"a=fmtp:".concat(e).concat(o).concat(n[0]).concat(this.eol):"a=fmtp:".concat(e).concat(o).concat(Object.keys(t.parameters).map((e=>"".concat(e,"=").concat(t.parameters[e]))).join(";")).concat(this.eol)}printRtpMap(e,t){return t?"a=rtpmap:".concat(e).concat(o).concat(t.encodingName,"/").concat(t.clockRate).concat(t.encodingParameters?"/".concat(t.encodingParameters):"").concat(this.eol):""}printRTCPFeedback(e,t){let n="a=rtcp-fb:".concat(e).concat(o),r=t;return"trr-int"===r.type?n+="ttr-int".concat(o).concat(r.interval):(n+="".concat(r.type),r.parameter&&(n+="".concat(o).concat(r.parameter),r.additional&&(n+="".concat(o).concat(r.additional)))),n+this.eol}printPtime(e){return void 0===e?"":"a=ptime:".concat(e).concat(this.eol)}printMaxPtime(e){return void 0===e?"":"a=maxptime:".concat(e).concat(this.eol)}printDirection(e){return void 0===e?"":"a=".concat(e).concat(this.eol)}printSSRC(e){return e.map((e=>Object.keys(e.attributes).map((t=>"a=ssrc:".concat(e.ssrcId.toString(10)).concat(o).concat(t).concat(e.attributes[t]?":".concat(e.attributes[t]):"").concat(this.eol))).join(""))).join("")}printRTCPMux(e){return void 0===e?"":"a=rtcp-mux".concat(this.eol)}printRTCPMuxOnly(e){return void 0===e?"":"a=rtcp-mux-only".concat(this.eol)}printRTCPRsize(e){return void 0===e?"":"a=rtcp-rsize".concat(this.eol)}printRTCP(e){if(void 0===e)return"";let t="a=rtcp:".concat(e.port);return e.netType&&(t+="".concat(o).concat(e.netType)),e.addressType&&(t+="".concat(o).concat(e.addressType)),e.address&&(t+="".concat(o).concat(e.address)),t+this.eol}printMSId(e){return e.map((e=>"a=msid:".concat(e.id).concat(e.appdata?"".concat(o).concat(e.appdata):"").concat(this.eol))).join("")}printImageattr(e){return e.map((e=>"a=imageattr:".concat(e).concat(this.eol))).join("")}printRid(e){return e.map((e=>{let t="a=rid:".concat(e.id).concat(o).concat(e.direction);return e.payloads&&(t+="".concat(o,"pt=").concat(e.payloads.join(","))),e.params.length>0&&(t+="".concat(o).concat(e.params.map((e=>"depend"===e.type?"depend=".concat(e.rids.join(",")):"".concat(e.type,"=").concat(e.val))).join(";"))),t+this.eol})).join("")}printSimulcast(e){return void 0===e?"":"a=simulcast:".concat(e).concat(this.eol)}printSCTPPort(e){return void 0===e?"":"a=sctp-port:".concat(e).concat(this.eol)}printMaxMessageSize(e){return void 0===e?"":"a=max-message-size:".concat(e).concat(this.eol)}printMid(e){return void 0===e?"":"a=mid:".concat(e).concat(this.eol)}printSSRCGroups(e){return e.map((e=>"a=ssrc-group:".concat(e.semantic).concat(e.ssrcIds.map((e=>"".concat(o).concat(e.toString(10)))).join("")).concat(this.eol))).join("")}}function N(e){return(new S).parse(e)}function P(e,t){return(new I).print(e,t)}}},t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}return n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(8)})();var sZ=oZ.exports;function aZ(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:AH("SVC_MODE");if(AH("ENABLE_SVC"))return function(e){return e in JW}(e)?e:JW.L1T3}function cZ(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function dZ(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cZ(Object(n),!0).forEach((function(t){SU(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cZ(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function lZ(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0;const{filterRTX:i,filterVideoFec:o,filterAudioFec:s,filterAudioCodec:a,filterVideoCodec:c}=t,{useXR:d}=n;let l=[],h=[],u=[],p=[],f=!1,m=!1;if(sZ.parse(e).mediaDescriptions.forEach((e=>{r&&r!==e.attributes.direction||("video"!==e.media.mediaType||f||(h=e.attributes.payloads,p=e.attributes.extmaps,f=!0),"audio"!==e.media.mediaType||m||(l=e.attributes.payloads,u=e.attributes.extmaps,m=!0))})),!p||0===h.length)throw new Error("Cannot get video capabilities from SDP.");if(!u||0===l.length)throw new Error("Cannot get audio capabilities from SDP.");if(h.forEach((e=>{var t;null!==(t=e.rtpMap)&&void 0!==t&&t.clockRate&&(e.rtpMap.clockRate=parseInt(e.rtpMap.clockRate)),d&&e.rtcpFeedbacks.push({type:"rrtr"})})),l.forEach((e=>{var t;null!==(t=e.rtpMap)&&void 0!==t&&t.clockRate&&(e.rtpMap.clockRate=parseInt(e.rtpMap.clockRate)),d&&e.rtcpFeedbacks.push({type:"rrtr"})})),i&&(l=l.filter((e=>{var t;return"rtx"!==(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())})),h=h.filter((e=>{var t;return"rtx"!==(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())}))),o&&(h=h.filter((e=>{var t;return!/(red)|(ulpfec)|(flexfec)/i.test((null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName)||"")}))),s&&(l=l.filter((e=>{var t;return!/(red)|(ulpfec)|(flexfec)/i.test((null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName)||"")}))),a&&(null==a?void 0:a.length)>0&&(l=l.filter((e=>{var t;return Fv(a).call(a,(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())||"")}))),c&&(null==c?void 0:c.length)>0){const e=h.filter((e=>{var t;return Fv(c).call(c,(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())||"")}));h=e.concat(i?[]:AZ(e,h))}const g=AH("UNSUPPORTED_VIDEO_CODEC");return g&&g.length>0&&(h=h.filter((e=>!(e.rtpMap&&Fv(g).call(g,e.rtpMap.encodingName.toLowerCase()))))),{audioCodecs:l,videoCodecs:h,audioExtensions:u,videoExtensions:p}}function hZ(e){const t=sZ.parse(e);let n,r;for(const e of t.mediaDescriptions){if(!n){const t=e.attributes.iceUfrag,r=e.attributes.icePwd;if(!t||!r)throw new Error("Cannot get iceUfrag or icePwd from SDP.");n={iceUfrag:t,icePwd:r}}if(!r){const t=e.attributes.fingerprints;t.length>0&&(r={fingerprints:t})}}if(!r&&t.attributes.fingerprints.length>0&&(r={fingerprints:t.attributes.fingerprints}),!r||!n)throw new Error("Cannot get iceParameters or dtlsParameters from SDP.");return{iceParameters:n,dtlsParameters:r}}function uZ(e,t){const n=[],r=e.attributes.ssrcGroups.filter((e=>"FID"===e.semantic)),i=e.attributes.ssrcGroups.find((e=>"SIM"===e.semantic)),o=e.attributes.ssrcs;if(i)i.ssrcIds.forEach((e=>{var i;const o=null===(i=r.find((t=>t.ssrcIds[0]===e)))||void 0===i?void 0:i.ssrcIds[1];n.push({ssrcId:e,rtx:t?o:void 0})}));else if(r.length>0){const e=r[0].ssrcIds[0],i=r[0].ssrcIds[1];n.push({ssrcId:e,rtx:t?i:void 0})}else{if(0===o.length)throw new Error("No ssrcs found on local media description.");n.push({ssrcId:o[0].ssrcId})}return n}function pZ(e,t,n){const{cname:r}=e;let i=[];t&&(i=fZ(t)),0===i.length&&(i=e.iceParameters.candidates.map((e=>({foundation:e.foundation,componentId:"1",transport:e.protocol,priority:e.priority.toString(),connectionAddress:e.ip,port:e.port.toString(),type:e.type,extension:{}}))),KH.debug("Using candidates from gateway."));const o={fingerprints:e.dtlsParameters.fingerprints.map((e=>({hashFunction:e.algorithm,fingerprint:e.fingerprint})))},s={iceUfrag:e.iceParameters.iceUfrag,icePwd:e.iceParameters.icePwd};let a;switch(e.dtlsParameters.role){case"server":a="passive";break;case"client":a="active";break;case"auto":a="actpass"}const c=CZ(e.rtpCapabilities),d=[];return Array.isArray(n)&&n.length>0&&n.forEach((e=>{d.push({kind:kK.VIDEO,ssrcId:e.v,rtx:e.v_rtx,mslabel:"".concat(e.v,"_").concat(e.a)},{kind:kK.AUDIO,ssrcId:e.a,mslabel:"".concat(e.v,"_").concat(e.a)})})),{dtlsParameters:o,iceParameters:s,candidates:i,rtpCapabilities:c,setup:a,cname:r,preSSRCs:d}}function fZ(e){let t=[];return e.ip&&"number"==typeof e.port&&(t=[{foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:e.ip,port:e.port.toString(),type:"host",extension:{}}],KH.debug("Using remote candidate from AP ".concat(e.ip,":").concat(e.port)),e.ip6&&(t.push({foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:e.ip6,port:e.port.toString(),type:"host",extension:{}}),KH.debug("Using IPV6 remote candidate from AP ".concat(e.ip6,":").concat(e.port)))),t}function mZ(e,t,n){const r=[],i=[];return e.forEach((e=>{let{ssrcId:o,rtx:s}=e;const a=XG(8,"track-"),c={ssrcId:o,attributes:dZ({label:a,mslabel:n=n||XG(10,""),msid:"".concat(n," ").concat(a)},t&&{cname:t})};if(r.push(c),void 0!==s){const e={ssrcId:s,attributes:dZ({label:a,mslabel:n,msid:"".concat(n," ").concat(a)},t&&{cname:t})};r.push(e),i.push({semantic:"FID",ssrcIds:[o,s]})}})),e.length>1&&i.push({semantic:"SIM",ssrcIds:e.map((e=>{let{ssrcId:t}=e;return t}))}),{ssrcs:r,ssrcGroups:i}}function gZ(e,t){t instanceof jQ&&e.attributes.payloads.forEach((e=>{var n;const r=null===(n=e.rtpMap)||void 0===n?void 0:n.encodingName.toLowerCase();if(!r||-1===["opus","pcmu","pcma","g722"].indexOf(r))return;e.fmtp||(e.fmtp={parameters:{}}),e.fmtp.parameters.minptime="10",e.fmtp.parameters.useinbandfec="1";const i=t._encoderConfig;i&&"pcmu"!==r&&"pcma"!==r&&"g722"!==r&&(i.bitrate&&!xB()&&(e.fmtp.parameters.maxaveragebitrate="".concat(Math.floor(1e3*i.bitrate))),i.sampleRate&&(e.fmtp.parameters.maxplaybackrate="".concat(i.sampleRate),e.fmtp.parameters["sprop-maxcapturerate"]="".concat(i.sampleRate)),i.stereo&&(e.fmtp.parameters.stereo="1",e.fmtp.parameters["sprop-stereo"]="1"))}))}function _Z(e){const t=e.attributes.unrecognized.findIndex((e=>"x-google-flag"===e.attField&&"conference"===e.attValue));-1!==t&&e.attributes.unrecognized.splice(t,1)}function EZ(e,t){var n;if(!(t instanceof O$&&t._encoderConfig&&-1===t._hints.indexOf(BJ.SCREEN_TRACK)))return;const r=t._encoderConfig;SJ().supportMinBitrate&&r.bitrateMin&&e.attributes.payloads.forEach((e=>{var t,n;Fv(t=["h264","h265","vp8","vp9","av1"]).call(t,(null===(n=e.rtpMap)||void 0===n?void 0:n.encodingName.toLowerCase())||"")&&(e.fmtp||(e.fmtp={parameters:{}}),e.fmtp.parameters["x-google-min-bitrate"]="".concat(r.bitrateMin))})),SJ().supportMinBitrate&&!Fv(n=t._hints).call(n,BJ.LOW_STREAM)&&r.bitrateMax&&e.attributes.payloads.forEach((e=>{var t,n;Fv(t=["h264","h265","vp8","vp9","av1"]).call(t,(null===(n=e.rtpMap)||void 0===n?void 0:n.encodingName.toLowerCase())||"")&&(e.fmtp||(e.fmtp={parameters:{}}),e.fmtp.parameters["x-google-start-bitrate"]="".concat(AH("X_GOOGLE_START_BITRATE")||Math.floor(r.bitrateMax)))}))}function yZ(e){if("video"!==e.media.mediaType)return;const t=SB();if(t.name!==EB.SAFARI&&t.os!==_B.IOS)return;const n=e.attributes.extmaps.findIndex((e=>/video-orientation/g.test(e.extensionName)));-1!==n&&e.attributes.extmaps.splice(n,1)}function vZ(e,t,n){if(!t)return;let r,i;if("video"===e.media.mediaType?(r=n.videoExtensions,i=n.videoCodecs):(r=n.audioExtensions,i=n.audioCodecs),!0===t.twcc){const t=r.find((e=>"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"===e.extensionName));if(t){e.attributes.extmaps.find((e=>"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"===e.extensionName))||e.attributes.extmaps.push({entry:t.entry,extensionName:"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"});const n=function(e,t){return t.filter((t=>!!e.find((e=>e.payloadType===t.payloadType&&!!e.rtcpFeedbacks.find((e=>"transport-cc"===e.type))))))}(i,e.attributes.payloads);n.forEach((e=>{e.rtcpFeedbacks.find((e=>"transport-cc"===e.type))||e.rtcpFeedbacks.push({type:"transport-cc"})}))}}else if(!1===t.twcc){const t=e.attributes.extmaps.findIndex((e=>"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"===e.extensionName));-1!==t&&e.attributes.extmaps.splice(t,1),e.attributes.payloads.forEach((e=>{const t=e.rtcpFeedbacks.findIndex((e=>"transport-cc"===e.type));-1!==t&&e.rtcpFeedbacks.splice(t,1)}))}if(!0===t.remb){const t=r.find((e=>"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"===e.extensionName));if(t){e.attributes.extmaps.find((e=>"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"===e.extensionName))||e.attributes.extmaps.push({entry:t.entry,extensionName:"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"});const n=function(e,t){return t.filter((t=>!!e.find((e=>e.payloadType===t.payloadType&&!!e.rtcpFeedbacks.find((e=>"goog-remb"===e.type))))))}(i,e.attributes.payloads);n.forEach((e=>{e.rtcpFeedbacks.find((e=>"goog-remb"===e.type))||e.rtcpFeedbacks.push({type:"goog-remb"})}))}}else if(!1===t.remb){const t=e.attributes.extmaps.findIndex((e=>"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"===e.extensionName));-1!==t&&e.attributes.extmaps.splice(t,1),e.attributes.payloads.forEach((e=>{const t=e.rtcpFeedbacks.findIndex((e=>"goog-remb"===e.type));-1!==t&&e.rtcpFeedbacks.splice(t,1)}))}}function bZ(e,t,n){if(xB())return;if("video"!==e.media.mediaType)return;if(!(t instanceof O$))return;if("vp9"!==n&&"vp8"!==n)return;if("vp8"===n&&!AH("SIMULCAST"))return;if("vp9"===n&&AH("ENABLE_SVC"))return;if(void 0===t._scalabilityMode||t._scalabilityMode.numSpatialLayers<=1)return;const r="vp8"===n?2:t._scalabilityMode.numSpatialLayers,i=e.attributes.ssrcs[0],o=e.attributes.ssrcGroups.find((e=>"FID"===e.semantic&&e.ssrcIds[0]===i.ssrcId)),s={semantic:"SIM",ssrcIds:[i.ssrcId]};for(let t=1;t<r;t++)e.attributes.ssrcs.push({ssrcId:i.ssrcId+t,attributes:VG(i.attributes)}),s.ssrcIds.push(i.ssrcId+t),o&&(e.attributes.ssrcs.push({ssrcId:o.ssrcIds[1]+t,attributes:VG(i.attributes)}),e.attributes.ssrcGroups.push({semantic:"FID",ssrcIds:[i.ssrcId+t,o.ssrcIds[1]+t]}));e.attributes.ssrcGroups.unshift(s)}async function SZ(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=new RTCPeerConnection;n.addTransceiver("video",{direction:"sendonly"}),n.addTransceiver("audio",{direction:"sendonly"}),n.addTransceiver("video",{direction:"recvonly"}),n.addTransceiver("audio",{direction:"recvonly"});const r=(await n.createOffer()).sdp,{send:i,recv:o,sendrecv:s}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const r=lZ(n,e,t,"sendonly"),i=lZ(n,e,t,"recvonly"),o={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},s={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},a={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]};if(RZ(r,i,"videoExtensions",o,s,a),RZ(r,i,"videoCodecs",o,s,a),RZ(r,i,"audioExtensions",o,s,a),RZ(r,i,"audioCodecs",o,s,a),AH("RAISE_H264_BASELINE_PRIORITY")){const e=a.videoCodecs.findIndex((e=>{var t,n;return"h264"===(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLocaleLowerCase())&&"42001f"===(null===(n=e.fmtp)||void 0===n?void 0:n.parameters["profile-level-id"])}));if(-1!==e){const t=a.videoCodecs.findIndex((e=>{var t;return"h264"===(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLocaleLowerCase())}));if(t<e){KH.debug("raising H264 baseline profile priority");const n=a.videoCodecs[e];a.videoCodecs.splice(e,1),a.videoCodecs.splice(t,0,n)}-1!==t&&(s.videoCodecs=s.videoCodecs.filter((e=>{var t,n;return!("h264"===(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLocaleLowerCase())&&"42001f"!==(null===(n=e.fmtp)||void 0===n?void 0:n.parameters["profile-level-id"]))}))),-1!==t&&AH("FILTER_SEND_H264_BASELINE")&&(o.videoCodecs=o.videoCodecs.filter((e=>{var t,n;return!("h264"===(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLocaleLowerCase())&&"42001f"!==(null===(n=e.fmtp)||void 0===n?void 0:n.parameters["profile-level-id"]))})))}}return{send:o,recv:s,sendrecv:a}}(e,t,r);try{n.close()}catch(e){}return{send:i,recv:o,sendrecv:s}}function TZ(){const e={audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]},t=lZ(arguments.length>2?arguments[2]:void 0,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},"recvonly"),n={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},r={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},i={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]};if(RZ(e,t,"videoExtensions",n,r,i),RZ(e,t,"videoCodecs",n,r,i),RZ(e,t,"audioExtensions",n,r,i),RZ(e,t,"audioCodecs",n,r,i),AH("RAISE_H264_BASELINE_PRIORITY")){const e=i.videoCodecs.findIndex((e=>e.rtpMap&&"h264"===e.rtpMap.encodingName.toLocaleLowerCase()&&e.fmtp&&"42001f"===e.fmtp.parameters["profile-level-id"]));if(-1!==e){const t=i.videoCodecs.findIndex((e=>e.rtpMap&&"h264"===e.rtpMap.encodingName.toLocaleLowerCase()));if(t<e){KH.debug("raising H264 baseline profile priority");const n=i.videoCodecs[e];i.videoCodecs.splice(e,1),i.videoCodecs.splice(t,0,n)}-1!==t&&(r.videoCodecs=r.videoCodecs.filter((e=>!(e.rtpMap&&"h264"===e.rtpMap.encodingName.toLocaleLowerCase()&&e.fmtp&&"42001f"!==e.fmtp.parameters["profile-level-id"]))))}}return{send:n,recv:r,sendrecv:i}}function RZ(e,t,n,r,i,o){if("videoExtensions"===n||"audioExtensions"===n){const s=[];return e[n].forEach((e=>{t[n].some(((t,n)=>{if(e.entry===t.entry&&e.extensionName===t.extensionName)return s.push(n),!0}))?o[n].push(e):r[n].push(e)})),void t[n].forEach(((e,t)=>{-1===s.indexOf(t)&&i[n].push(e)}))}if("videoCodecs"===n||"audioCodecs"===n){const s=[];return e[n].forEach((e=>{t[n].some(((t,n)=>{if(e.payloadType===t.payloadType&&JSON.stringify(e)===JSON.stringify(t))return s.push(n),!0}))?o[n].push(e):r[n].push(e)})),void t[n].forEach(((e,t)=>{-1===s.indexOf(t)&&i[n].push(e)}))}}function CZ(e){const{send:t,recv:n,sendrecv:r}=e;if(!r){if(!t||!n)throw new Error("cannot merge rtp capabilities because one of send or recv is empty!");return{send:t,recv:n}}let i,o;return t?(i={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},i.audioCodecs=[...t.audioCodecs,...r.audioCodecs],i.videoCodecs=[...t.videoCodecs,...r.videoCodecs],i.audioExtensions=[...t.audioExtensions,...r.audioExtensions],i.videoExtensions=[...t.videoExtensions,...r.videoExtensions]):i=r,n?(o={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},o.audioCodecs=[...n.audioCodecs,...r.audioCodecs],o.videoCodecs=[...n.videoCodecs,...r.videoCodecs],o.audioExtensions=[...n.audioExtensions,...r.audioExtensions],o.videoExtensions=[...n.videoExtensions,...r.videoExtensions]):o=r,{send:i,recv:o}}function wZ(e){"audio"===e.media.mediaType&&e.attributes.payloads.filter((e=>{var t;return"opus"===(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())})).forEach((e=>{e.fmtp||(e.fmtp={parameters:{}}),e.fmtp.parameters.stereo="1",e.fmtp.parameters["sprop-stereo"]="1"}))}function IZ(e,t,n,r){let i=[];if(e===kK.VIDEO){if(AH("H264_PROFILE_LEVEL_ID")&&"h264"===r&&(i=t.videoCodecs.filter((e=>{var t;return Fv(t=e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||"").call(t,r)&&e&&e.fmtp&&e.fmtp.parameters["profile-level-id"]===AH("H264_PROFILE_LEVEL_ID")}))),!Array.isArray(i)||0===i.length){let e=[];const o=[],s=[],a=[];if(n.videoCodecs.forEach((t=>{const n=t.rtpMap&&t.rtpMap.encodingName.toLowerCase()||"";Fv(n).call(n,r)?e.push(t):Fv(n).call(n,"vp9")?o.push(t):Fv(n).call(n,"vp8")?s.push(t):Fv(n).call(n,"h264")&&a.push(t)})),0===e.length){let t="";0!==o.length?(e=o,t="vp9"):0!==s.length?(e=s,t="vp8"):0!==a.length&&(e=a,t="h264"),KH.warning("codec ".concat(r," not included in rtpCapabilities, fallback to default payloads: ").concat(t))}0!==e.length&&(i=t.videoCodecs.filter((t=>e.some((e=>e.payloadType===t.payloadType)))))}if(0===i.length&&(KH.warning("codec ".concat(r," not included in rtpCapabilities, fallback to default payloads: ").concat(t.videoCodecs[0].rtpMap&&t.videoCodecs[0].rtpMap.encodingName)),i=t.videoCodecs),AH("USE_PUB_RTX")||AH("USE_SUB_RTX")){const e=AZ(i,t.videoCodecs);i=[...i,...e]}}else i=t.audioCodecs.filter((e=>{var t;return Fv(t=e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||"").call(t,r)})),0===i.length&&(KH.warning("codec ".concat(r," not included in rtpCapabilities, fallback to opus")),i=t.audioCodecs.filter((e=>{var t;return Fv(t=e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||"").call(t,"opus")})));return i}function AZ(e,t){const n=e.map((e=>e.payloadType.toString()));return t.filter((e=>e.rtpMap&&"rtx"===e.rtpMap.encodingName&&e.fmtp&&e.fmtp.parameters.apt&&Fv(n).call(n,e.fmtp&&e.fmtp.parameters.apt)))}async function OZ(e,t,n){const r=t.toString(),i=NZ(r,"offer","remote","exchangeSDP");await e.setRemoteDescription({type:"offer",sdp:r});const o=await e.createAnswer();if(!o.sdp)throw new Error("cannot get answer sdp");let s=o.sdp;s=xZ(s,n||{}),null==i||i(s||""),await e.setLocalDescription({type:"answer",sdp:s})}function xZ(e,t,n){const r=sZ.parse(e),{useXR:i}=t;return r.mediaDescriptions.forEach((e=>{var t;e.attributes.mid&&(Array.isArray(n)&&!Fv(n).call(n,e.attributes.mid)||("audio"===e.media.mediaType&&wZ(e),i&&Fv(t=["audio","video"]).call(t,e.media.mediaType)&&e.attributes.payloads.forEach((e=>{-1===e.rtcpFeedbacks.findIndex((e=>"rrtr"===e.type))&&e.rtcpFeedbacks.push({type:"rrtr"})}))))})),sZ.print(r)}function NZ(e,t,n,r){if(AH("SDP_LOGGING"))return KH.upload("exchanging ".concat(n," ").concat(t," SDP during P2PConnection.").concat(r,"\n"),e),"offer"===t?e=>{NZ(e,"answer","local"===n?"remote":"local",r)}:void 0}function PZ(e,t){return typeof AH(e)===t?AH(e):void 0}function DZ(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function LZ(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?DZ(Object(n),!0).forEach((function(t){SU(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DZ(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const kZ=new Map;class MZ extends mG{get state(){return this._state}set state(e){if(e===this._state)return;const t=this._state;this._state=e,"DISCONNECTED"===e&&this._disconnectedReason?this.emit(CK.CONNECTION_STATE_CHANGE,e,t,this._disconnectedReason):this.emit(CK.CONNECTION_STATE_CHANGE,e,t)}get joinGatewayStartTime(){return this._joinGatewayStartTime}set joinGatewayStartTime(e){KH.debug("[".concat(this.store.clientId,"] set joinGatewayStartTime at ").concat(e)),this._joinGatewayStartTime=e}constructor(e,t){super(),SU(this,"store",void 0),SU(this,"joinInfo",void 0),SU(this,"key",void 0),SU(this,"ntpOffset",0),SU(this,"signal",void 0),SU(this,"role",void 0),SU(this,"inChannelInfo",{joinAt:null,duration:0}),SU(this,"spec",void 0),SU(this,"_state","DISCONNECTED"),SU(this,"_statsCollector",void 0),SU(this,"_disconnectedReason",void 0),SU(this,"isSignalRecover",!1),SU(this,"hasChangeBGPAddress",!1),SU(this,"trafficStatsInterval",void 0),SU(this,"networkQualityInterval",void 0),SU(this,"_joinGatewayStartTime",0),SU(this,"_signalTimeout",!1),SU(this,"_clientRoleOptions",void 0),SU(this,"_isProactiveJoin",!1),this.store=e,this.spec=t,this.signal=this.store.useP2P?new iZ(LZ(LZ({},t),{},{retryConfig:t.websocketRetryConfig}),e):new _z(LZ(LZ({},t),{},{retryConfig:t.websocketRetryConfig}),e),this._statsCollector=t.statsCollector,this.role=t.role||"audience",this._clientRoleOptions=t.clientRoleOptions,this.handleSignalEvents()}async join(e,t,n){this.store.joinGatewayStart(),"disabled"!==e.cloudProxyServer&&(this.hasChangeBGPAddress=!0);const r=Date.now();let i=kZ.get(e.cname);if(i||(i=new Map,kZ.set(e.cname,i)),this._isProactiveJoin=!0,i.has(e.uid)){const t=new eW(ZB.UID_CONFLICT);throw ZH.joinGateway(e.sid,{lts:r,succ:!1,ec:t.code,addr:null,uid:e.uid,cid:e.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!e.proxyServer,signalChannel:"0",preload:e.preload}),this._isProactiveJoin=!1,t}i.set(e.uid,!0),this.joinInfo=e,this.key=t;let o=0;this.joinGatewayStartTime=r;const s=e.proxyServer;try{KH.debug("[".concat(this.store.clientId,"] use websocket join uid ").concat(o));const t=e.gatewayAddrs.map((t=>{let{address:n}=t;const[r,i]=n.split(":"),o={host:r,port:i};return e.proxyServer&&(o.proxy=e.proxyServer),o}));o=(await this.signal.init(t,n)).uid,KH.debug("[".concat(this.store.clientId,"] websocket join uid ").concat(o," cost ").concat(Date.now()-this.joinGatewayStartTime))}catch(t){var a;throw KH.error("[".concat(this.store.clientId,"] User join failed"),t.toString()),ZH.joinGateway(e.sid,{lts:r,succ:!1,ec:(null===(a=t.data)||void 0===a?void 0:a.desc)||t.code,errorMsg:t.message,addr:this.signal.url,uid:e.uid,cid:e.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!s,signalChannel:"0",preload:e.preload}),this._isProactiveJoin=!1,i.delete(e.uid),this.signal.close(),t}return this.state="CONNECTED",this.inChannelInfo.joinAt=Date.now(),KH.debug("[".concat(this.store.clientId,"] Connected to gateway server")),this.trafficStatsInterval=window.setInterval((()=>{this.updateTrafficStats().catch((e=>{KH.warning("[".concat(this.store.clientId,"] get traffic stats error"),e.toString())}))}),3e3),this.networkQualityInterval=window.setInterval((()=>{navigator&&void 0!==navigator.onLine&&!navigator.onLine?this.emit(CK.NETWORK_QUALITY,{downlinkNetworkQuality:6,uplinkNetworkQuality:6}):this._signalTimeout?this.emit(CK.NETWORK_QUALITY,{downlinkNetworkQuality:5,uplinkNetworkQuality:5}):"CONNECTED"===this.state&&this._statsCollector.trafficStats?this.emit(CK.NETWORK_QUALITY,{uplinkNetworkQuality:Cz(this._statsCollector.trafficStats.B_unq),downlinkNetworkQuality:Cz(this._statsCollector.trafficStats.B_dnq)}):this.emit(CK.NETWORK_QUALITY,{uplinkNetworkQuality:0,downlinkNetworkQuality:0})}),2e3),this.store.joinGatewayEnd(),o}async leave(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;if("DISCONNECTED"!==this.state){t!==SG.FALLBACK&&(this.state="DISCONNECTING");try{e||this.signal.connectionState!==nK.CONNECTED||await function(e){return LO.race([e,YG(3e3)])}(this.signal.request(iK.LEAVE,void 0,!0))}catch(e){KH.warning("[".concat(this.store.clientId,"] leave request failed, ignore"),e)}this.signal.close(t),t!==SG.FALLBACK&&(this.state="DISCONNECTED"),this.reset()}}async publish(e,t,n){if("CONNECTED"!==this.state&&"RECONNECTING"!==this.state)throw new eW(ZB.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));const r={state:"offer",p2p_id:this.store.p2pId,ortc:t,mode:this.spec.mode,extend:AH("PUB_EXTEND"),twcc:!!AH("PUBLISH_TWCC"),rtx:!!AH("USE_PUB_RTX")};try{return(await this.signal.request(iK.PUBLISH,r,!0))._message}catch(r){if(n&&r.data&&r.data.code===tK.ERR_PUBLISH_REQUEST_INVALID)return KH.warning("[".concat(this.store.clientId,"] receive publish error code, retry"),r.toString()),await this.tryUnpubBeforeRepub(e,t),this.publish(e,t,!1);throw r}}async publishDataChannel(e,t,n){var r;if("CONNECTED"!==this.state&&"RECONNECTING"!==this.state)throw new eW(ZB.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));const i={stream_id:t.streamId,ordered:t.ordered?1:0,max_retrans_times:null!==(r=t.maxRetransmits)&&void 0!==r?r:10,channel_id:t.channelId,metadata:t.metadata};try{await this.signal.request(iK.PUBLISH_DATASTREAM,i,!0)}catch(r){if(n&&r.data&&r.data.code===tK.ERR_PUBLISH_REQUEST_INVALID)return KH.warning("[".concat(this.store.clientId,"] receive publish datachannels error code, retry"),r.toString()),await this.tryUnpubDataChannelBeforeRepub(e,t),this.publishDataChannel(e,t,!1);throw r}}async unpublish(e,t){try{if("CONNECTED"!==this.state&&"RECONNECTING"!==this.state)throw new eW(ZB.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));await this.signal.request(iK.UNPUBLISH,{stream_id:t,ortc:e},!0)}catch(e){KH.warning("[".concat(this.store.clientId,"] unpublish warning: "),e)}}async unpublishDataChannel(e){try{if("CONNECTED"!==this.state&&"RECONNECTING"!==this.state)throw new eW(ZB.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));await LO.all(e.map((e=>this.signal.request(iK.UNPUBLISH_DATASTREAM,{channel_id:e},!0))))}catch(e){KH.warning("unpublish datachannels warning: ",e)}}async presubscribe(e,t,n){if("CONNECTED"!==this.state&&"RECONNECTING"!==this.state)throw new eW(ZB.INVALID_OPERATION,"can not presubscribe when connection state is ".concat(this.state));const r={stream_id:e,stream_type:t,mode:this.spec.mode,codec:this.spec.codec,p2p_id:this.store.p2pId,twcc:!!AH("SUBSCRIBE_TWCC"),rtx:!!AH("USE_SUB_RTX")||void 0,extend:AH("SUB_EXTEND"),svc:Array.isArray(AH("SVC"))&&0!==AH("SVC").length?AH("SVC"):void 0};try{return await this.signal.request(iK.PRE_SUBSCRIBE,r,!0)}catch(r){if(n&&r.data&&r.data.code===tK.ERR_SUBSCRIBE_REQUEST_INVALID)return KH.warning("[".concat(this.store.clientId,"] pre-subscribe error, retry"),r.toString()),this.presubscribe(e,t,!1);throw r}}async subscribe(e,t,n){if("CONNECTED"!==this.state&&"RECONNECTING"!==this.state)throw new eW(ZB.INVALID_OPERATION,"can not subscribe when connection state is ".concat(this.state));const r={stream_id:e,stream_type:t.stream_type,mode:this.spec.mode,codec:this.spec.codec,p2p_id:this.store.p2pId,twcc:!!AH("SUBSCRIBE_TWCC"),rtx:!!AH("USE_SUB_RTX"),extend:AH("SUB_EXTEND"),ssrcId:t.ssrcId,svc:Array.isArray(AH("SVC"))&&0!==AH("SVC").length?AH("SVC"):void 0};try{return(await this.signal.request(iK.SUBSCRIBE,r,!0))._message}catch(r){if(n&&r.data&&r.data.code===tK.ERR_SUBSCRIBE_REQUEST_INVALID)return KH.warning("[".concat(this.store.clientId,"] receiver subscribe error code, retry"),r.toString()),await this.tryUnsubBeforeResub(e,t),await this.subscribe(e,t,!1);throw r}}async subscribeDataChannel(e,t,n){if("CONNECTED"!==this.state&&"RECONNECTING"!==this.state)throw new eW(ZB.INVALID_OPERATION,"can not subscribe datachannel when connection state is ".concat(this.state));const r={uid:e,stream_id:t.id,channel_id:t.datachannelId};try{return void await this.signal.request(iK.SUBSCRIBE_DATASTREAM,r,!0)}catch(r){if(n&&r.data&&r.data.code===tK.ERR_SUBSCRIBE_REQUEST_INVALID)return KH.warning("[".concat(this.store.clientId,"] receiver subscribe datachannel error code, retry"),r.toString()),await this.tryUnsubDataChannelBeforeResub(e,t),await this.subscribeDataChannel(e,t,!1);throw r}}async subscribeAll(e,t){if("CONNECTED"!==this.state&&"RECONNECTING"!==this.state)throw new eW(ZB.INVALID_OPERATION,"can not massSubscribe when connection state is ".concat(this.state));const n={p2p_id:this.store.p2pId,users:e,dtx:!1,rtx:!!AH("USE_SUB_RTX"),twcc:!!AH("SUBSCRIBE_TWCC"),svc:Array.isArray(AH("SVC"))&&0!==AH("SVC").length?AH("SVC"):void 0};try{return await this.signal.request(iK.SUBSCRIBE_STREAMS,n,!0)}catch(n){if(t&&n.data&&n.data.code===tK.ERR_SUBSCRIBE_REQUEST_INVALID)return KH.warning("[".concat(this.store.clientId,"] receiver massSubscribe error code, retry"),n.toString()),await this.tryMassUnsubBeforeResub(e),await this.subscribeAll(e,!1);throw n}}async setVideoProfile(e){const t=function(e){if(!(e.bitrateMax&&e.bitrateMin&&e.frameRate&&e.height&&e.width))return;let t=e.frameRate,n=e.width,r=e.height,i=!0;return"number"!=typeof t&&(t=t.exact||t.ideal||t.max||t.min||0,t||(i=!1)),"number"!=typeof n&&(n=n.exact||n.ideal||n.max||n.min||0,n||(i=!1)),"number"!=typeof r&&(r=r.exact||r.ideal||r.max||r.min||0,t||(i=!1)),i?{stream_type:0,width:n,height:r,fps:t,start_bps:1e3*e.bitrateMax,min_bps:1e3*e.bitrateMin,target_bps:1e3*e.bitrateMax}:void 0}(e);if(t)return this.signal.request(iK.SET_VIDEO_PROFILE,t);KH.debug("[".concat(this.store.clientId,"] encoder config is not complete, do not report to gateway"))}async unsubscribe(e,t){try{await this.signal.request(iK.UNSUBSCRIBE,{p2p_id:this.store.p2pId,ortc:e,stream_id:t},!0)}catch(e){KH.warning("[".concat(this.store.clientId,"] unsubscribe warning: "),e)}}async unsubscribeDataChannel(e,t){try{if("CONNECTED"!==this.state&&"RECONNECTING"!==this.state)throw new eW(ZB.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));await LO.all(e.map((e=>this.signal.request(iK.UNSUBSCRIBE_DATASTREAM,{stream_id:e,uid:t},!0))))}catch(e){KH.warning("unsubscribeDataChannel warning: ",e)}}async massUnsubscribe(e){try{await this.signal.request(iK.UNSUBSCRIBE_STREAMS,e,!0)}catch(e){KH.warning("[".concat(this.store.clientId,"] massUnsubscribeAll warning: "),e)}}async reconnectPC(e){const{iceParameters:t,dtlsParameters:n,rtpCapabilities:r}=e;return{gatewayEstablishParams:await this.signal.request(iK.CONNECT_PC,{p2p_id:this.store.p2pId,stream_id:this.store.uid,ortc:{iceParameters:t,dtlsParameters:n,rtpCapabilities:r}},!0),gatewayAddress:this.getCurrentGatewayAddress()}}getGatewayInfo(){return this.signal.request(iK.GATEWAY_INFO)}async renewToken(e){await this.signal.request(iK.RENEW_TOKEN,e),this.key=e.token}async setClientRole(e,t){if(t&&(this._clientRoleOptions=Object.assign({},t)),"CONNECTED"!==this.state)return void(this.role=e);let n,r=0;"audience"===e?this._clientRoleOptions&&this._clientRoleOptions.delay?(n=this._clientRoleOptions.delay,r=1):r=this._clientRoleOptions&&this._clientRoleOptions.level?this._clientRoleOptions.level:2:r=0,await this.signal.request(iK.SET_CLIENT_ROLE,{role:e,level:r,delay:n,client_ts:Date.now()}),this.role=e}async setRemoteVideoStreamType(e,t){await this.signal.request(iK.SWITCH_VIDEO_STREAM,{stream_id:e,stream_type:t})}async setDefaultRemoteVideoStreamType(e){await this.signal.request(iK.DEFAULT_VIDEO_STREAM,{stream_type:e})}async setStreamFallbackOption(e,t){await this.signal.request(iK.SET_FALLBACK_OPTION,{stream_id:e,fallback_type:t})}async pickSVCLayer(e,t){await this.signal.request(iK.PICK_SVC_LAYER,{stream_id:e,spatial_layer:t.spatialLayer,temporal_layer:t.temporalLayer})}async setRTM2Flag(e){await this.signal.request(iK.SET_RTM2_FLAG,{rtm2_flag:e})}async sendExtensionMessage(e,t,n){if(this.signal instanceof iZ)return this.signal.sendExtensionMessage(e,t,n)}getInChannelInfo(){return this.inChannelInfo.joinAt&&(this.inChannelInfo.duration=Date.now()-this.inChannelInfo.joinAt),LZ({},this.inChannelInfo)}async getGatewayVersion(){return(await this.signal.request(iK.GATEWAY_INFO)).version}reset(){if(this.inChannelInfo.joinAt&&(this.inChannelInfo.duration=Date.now()-this.inChannelInfo.joinAt,this.inChannelInfo.joinAt=null),this.trafficStatsInterval&&(window.clearInterval(this.trafficStatsInterval),this.trafficStatsInterval=void 0),this.joinInfo){const e=kZ.get(this.joinInfo.cname);e&&e.delete(this.joinInfo.uid)}this.joinInfo=void 0,this.key=void 0,this.networkQualityInterval&&(window.clearInterval(this.networkQualityInterval),this.networkQualityInterval=void 0)}updateTurnConfigFromSignal(){if(!this.joinInfo)return;const e=function(e){let t;return t=e.startsWith("dc")?e.match(/(dc\:\/\/)?([^:]+):(\d+)/):e.match(/(wss\:\/\/)?([^:]+):(\d+)/),t?{username:TH.username,password:TH.password,turnServerURL:t[2],tcpport:parseInt(t[3])+30,udpport:parseInt(t[3])+30,forceturn:!1}:null}(("disabled"===this.joinInfo.cloudProxyServer?this.signal.url:this.joinInfo.gatewayAddrs[this.signal.currentURLIndex].address)||"");this.joinInfo.turnServer.serversFromGateway=[],e&&"off"!==this.joinInfo.turnServer.mode&&"disabled"===this.joinInfo.cloudProxyServer&&this.joinInfo.turnServer.serversFromGateway.push(LZ(LZ({},TH),{},{turnServerURL:e.turnServerURL,tcpport:e.tcpport,udpport:e.udpport,username:this.joinInfo.uid.toString(),password:this.joinInfo.token}))}async updateTrafficStats(){if("CONNECTED"!==this.state)return;const e=await this.signal.request(iK.TRAFFIC_STATS,void 0,!0);e.timestamp=Date.now(),null!=e.ntp_offset&&(this.ntpOffset=e.ntp_offset),e.peer_delay.forEach((e=>{const t=this._statsCollector.trafficStats&&this._statsCollector.trafficStats.peer_delay.find((t=>t.peer_uid===e.peer_uid));t&&t.B_st!==e.B_st&&UG((()=>{this.emit(CK.STREAM_TYPE_CHANGE,e.peer_uid,e.B_st)}))})),this._statsCollector.updateTrafficStats(e)}getJoinMessage(e){if(!this.joinInfo||!this.key)throw new eW(ZB.UNEXPECTED_ERROR,"can not generate join message, no join info");const t=Object.assign({},this.joinInfo.apResponse);let n=AH("REPORT_APP_SCENARIO");if("string"!=typeof n)try{n=JSON.stringify(n)}catch(e){n=void 0}n&&n.length>128&&(n=void 0);const r=!(xB()||DB(87)||RJ())&&"boolean"==typeof AH("ENABLE_PRE_SUB")&&AH("ENABLE_PRE_SUB"),i=!RJ()&&PZ("ENABLE_PREALLOC_PC","boolean"),o=LZ({license:this.joinInfo.license,p2p_id:this.store.p2pId,session_id:this.joinInfo.sid,app_id:this.joinInfo.appId,channel_key:this.key,channel_name:this.joinInfo.cname,sdk_version:vH,browser:navigator.userAgent,process_id:AH("PROCESS_ID"),mode:this.store.useP2P?"p2p":this.spec.mode,codec:this.spec.codec,role:this.role,has_changed_gateway:this.hasChangeBGPAddress,ap_response:t,extend:AH("JOIN_EXTEND"),details:{6:this.joinInfo.stringUid,cservice_map:"proxy3"===this.joinInfo.cloudProxyServer?"1":"proxy5"===this.joinInfo.cloudProxyServer?"2":void 0},features:{rejoin:!0},optionalInfo:this.joinInfo.optionalInfo,appScenario:n,attributes:{userAttributes:{enablePublishedUserList:AH("ENABLE_PUBLISHED_USER_LIST"),maxSubscription:AH("MAX_SUBSCRIPTION"),subscribeAudioFilterTopN:"number"==typeof AH("SUBSCRIBE_AUDIO_FILTER_TOPN")?AH("SUBSCRIBE_AUDIO_FILTER_TOPN"):void 0,enablePublishAudioFilter:"boolean"==typeof AH("ENABLE_PUBLISH_AUDIO_FILTER")?AH("ENABLE_PUBLISH_AUDIO_FILTER"):void 0,enableUserLicenseCheck:"boolean"==typeof AH("ENABLE_USER_LICENSE_CHECK")?AH("ENABLE_USER_LICENSE_CHECK"):void 0,enableRTX:!0===AH("USE_PUB_RTX")||!0===AH("USE_SUB_RTX")||void 0,disableFEC:AH("DISABLE_FEC"),enableNTPReport:!!AH("ENABLE_NTP_REPORT")||void 0,enableInstantVideo:!!AH("ENABLE_INSTANT_VIDEO")||void 0,enableFulllinkAvSync:!!AH("ENABLE_FULL_LINK_AV_SYNC")||void 0,enableDataStream2:PZ("ENABLE_DATASTREAM_2","boolean"),enableAutFeedback:!!AH("ENABLE_AUT_FEEDBACK")||void 0,rtm2Flag:"number"==typeof this.joinInfo.rtmFlag?this.joinInfo.rtmFlag:void 0,enableUserAutoRebalanceCheck:!!AH("ENABLE_USER_AUTO_REBALANCE_CHECK"),enableXR:PZ("USE_XR","boolean"),enableLossbasedBwe:PZ("ENABLE_LOSSBASED_BWE","boolean"),enableAutCC:!!AH("ENABLE_AUT_CC")||void 0,enableCCFallback:PZ("ENABLE_CC_FALLBACK","boolean"),enablePreallocPC:i,preSubNum:r?PZ("PRE_SUB_NUM","number"):void 0,enablePubTWCC:PZ("PUBLISH_TWCC","boolean"),enableSubTWCC:PZ("SUBSCRIBE_TWCC","boolean"),enablePubRTX:PZ("USE_PUB_RTX","boolean"),enableSubRTX:PZ("USE_SUB_RTX","boolean"),enableSubSVC:AH("ENABLE_SVC")?AH("ENABLE_SVC_DEFAULT_CODECS"):Array.isArray(AH("SVC"))&&0!==AH("SVC").length?AH("SVC"):void 0}},join_ts:this.joinGatewayStartTime},e);return this.joinInfo.stringUid&&(o.string_uid=this.joinInfo.stringUid),this.joinInfo.aesmode&&this.joinInfo.aespassword&&(o.aes_mode=this.joinInfo.aesmode,AH("ENCRYPT_AES")?(o.aes_secret=this.joinInfo.aespassword,o.aes_encrypt=!0):o.aes_secret=this.joinInfo.aespassword,this.joinInfo.aessalt&&(o.aes_salt=this.joinInfo.aessalt)),t.addresses[this.signal.websocket.currentURLIndex]&&(o.ap_response.ticket=t.addresses[this.signal.websocket.currentURLIndex].ticket,delete t.addresses),void 0!==this.joinInfo.defaultVideoStream&&(o.default_video_stream=this.joinInfo.defaultVideoStream),o}getRejoinMessage(){if(!this.joinInfo)throw new eW(ZB.UNEXPECTED_ERROR,"can not generate rejoin message, no join info");return{session_id:this.joinInfo.sid,channel_name:this.joinInfo.cname,cid:this.joinInfo.cid,uid:this.joinInfo.uid,vid:Number(this.joinInfo.vid)}}handleSignalEvents(){this.signal.on(rK.WS_RECONNECT_WAITTING_FINISH,(e=>{var t;Fv(t=["tryNext","recover"]).call(t,e)&&this.joinInfo&&ZH.adjustSessionStartTime(this.joinInfo.sid)})),this.signal.on(rK.WS_RECONNECT_CREATE_CONNECTION,(e=>{this.joinGatewayStartTime=Date.now()})),this.signal.on(rK.WS_RECONNECTING,(e=>{this.joinInfo&&ZH.WebSocketQuit(this.joinInfo.sid,{lts:Date.now(),succ:-1,cname:this.joinInfo.cname,uid:this.joinInfo.uid,cid:this.joinInfo.cid,errorCode:e||IG.NETWORK_ERROR}),this.joinInfo&&(this.state="RECONNECTING",ZH.sessionInit(this.joinInfo.sid,{lts:(new Date).getTime(),extend:this.isSignalRecover?{recover:!0}:{rejoin:!0},cname:this.joinInfo.cname,appid:this.joinInfo.appId,mode:this.spec.mode,stringUid:this.joinInfo.stringUid,channelProfile:"live"===this.spec.mode?1:0,channelMode:0,lsid:this.joinInfo.sid,clientRole:"audience"===this.role?2:1,buildFormat:2}),this.isSignalRecover=!1,this.joinGatewayStartTime=Date.now())})),this.signal.on(rK.WS_CLOSED,(e=>{let t;switch(e){case SG.LEAVE:t=IG.LEAVE;break;case SG.UID_BANNED:case SG.IP_BANNED:case SG.CHANNEL_BANNED:case SG.SERVER_ERROR:t=IG.SERVER_ERROR;break;case SG.FALLBACK:t=IG.FALLBACK;break;case SG.LICENSE_MISSING:case SG.LICENSE_EXPIRED:case SG.LICENSE_MINUTES_EXCEEDED:case SG.LICENSE_PERIOD_INVALID:case SG.LICENSE_MULTIPLE_SDK_SERVICE:case SG.LICENSE_ILLEGAL:case SG.TOKEN_EXPIRE:t=e;break;default:t=IG.NETWORK_ERROR}KH.debug("[".concat(this.store.clientId,"] [signal] websocket closed, reason: ").concat(t||"undefined -> "+IG.NETWORK_ERROR)),this.joinInfo&&ZH.WebSocketQuit(this.joinInfo.sid,{lts:Date.now(),succ:e===SG.LEAVE?1:-1,cname:this.joinInfo.cname,uid:this.joinInfo.uid,cid:this.joinInfo.cid,errorCode:t}),this._disconnectedReason=e,e!==SG.FALLBACK&&(this.state="DISCONNECTED"),this.reset()})),this.signal.on(rK.WS_CONNECTED,(()=>{if(this.updateTurnConfigFromSignal(),this.state="CONNECTED",this.joinInfo&&("audience"===this.role&&this._clientRoleOptions&&(this._clientRoleOptions.level||this._clientRoleOptions.delay)&&(KH.debug("[".concat(this.store.clientId,"] patch to send set client role, role: ").concat(this.role,", mode: ").concat(this.spec.mode,", level: ").concat(this._clientRoleOptions.level,", delay: ").concat(this._clientRoleOptions.delay)),this.setClientRole(this.role,this._clientRoleOptions)),ZH.joinGateway(this.joinInfo.sid,{lts:this.joinGatewayStartTime,succ:!0,ec:null,vid:this.joinInfo.vid,addr:this.signal.url,uid:this.joinInfo.uid,cid:this.joinInfo.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!this.joinInfo.proxyServer,signalChannel:"0",preload:this.joinInfo.preload}),this._isProactiveJoin=!1,this.joinInfo.useLocalAccessPoint&&1===this.joinInfo.setLocalAPVersion)){const e=this.signal.url&&this.signal.url.match(/wss\:\/\/([^:]+):(\d+)/);if(!e)return void KH.error("[".concat(this.store.clientId,"] set local access point after joined failed: ").concat(e));IH("EVENT_REPORT_DOMAIN",e[1]),IH("EVENT_REPORT_BACKUP_DOMAIN",e[1]),IH("LOG_UPLOAD_SERVER","".concat(e[1],":6444"))}})),this.signal.on(sK.ON_UPLINK_STATS,(e=>{this._statsCollector.updateUplinkStats(e)})),this.signal.on(rK.REQUEST_RECOVER,((e,t,n)=>{if(!this.joinInfo)return n(new eW(ZB.UNEXPECTED_ERROR,"gateway: can not recover, no join info"));e&&(this.joinInfo.multiIP=e,this.hasChangeBGPAddress=!0),this.isSignalRecover=!0,xG(this,CK.REQUEST_NEW_GATEWAY_LIST).then(t).catch(n)})),this.signal.on(rK.REQUEST_JOIN_INFO,(async e=>{var t;if(this.updateTurnConfigFromSignal(),this.store.useP2P)return void e(this.getJoinMessage({ortc:{}}));const{iceParameters:n,dtlsParameters:r,rtpCapabilities:i}=await xG(this,CK.REQUEST_P2P_CONNECTION_PARAMS,{turnServer:null===(t=this.joinInfo)||void 0===t?void 0:t.turnServer});e(this.getJoinMessage({ortc:{iceParameters:n,dtlsParameters:r,rtpCapabilities:i,version:"2"}}))})),this.signal.on(rK.REQUEST_REJOIN_INFO,(e=>{e(this.getRejoinMessage())})),this.signal.on(rK.REPORT_JOIN_GATEWAY,((e,t)=>{if(!this.joinInfo)return;let n,r="";var i;e instanceof eW?(n=(null===(i=e.data)||void 0===i?void 0:i.desc)||e.code,r=e.message):n=e,ZH.joinGateway(this.joinInfo.sid,{lts:this.joinGatewayStartTime,succ:!1,ec:n,errorMsg:r,addr:t,uid:this.joinInfo.uid,cid:this.joinInfo.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!this.joinInfo.proxyServer,signalChannel:"0",preload:this.joinInfo.preload}),this._isProactiveJoin=!1})),this.signal.on(rK.IS_P2P_DISCONNECTED,(e=>{e(DG(this,CK.IS_P2P_DISCONNECTED))})),this.signal.on(rK.DISCONNECT_P2P,(()=>{this.emit(CK.DISCONNECT_P2P)})),this.signal.on(rK.REQUEST_SUCCESS,(()=>{this._signalTimeout=!1})),this.signal.on(rK.REQUEST_TIMEOUT,(()=>{this._signalTimeout=!0})),this.signal.on(rK.JOIN_RESPONSE,(e=>{const t=this.getCurrentGatewayAddress();this.emit(CK.JOIN_RESPONSE,e,t)})),this.signal.on(rK.PRE_CONNECT_PC,(async()=>{if(this.joinInfo){this.updateTurnConfigFromSignal();const e=this.getCurrentGatewayAddress(),t=AH("FINGERPRINT")||this.joinInfo.apResponse.addresses[this.signal.currentURLIndex].fingerprint;if(e&&t){const n=fZ(e);this.emit(CK.PRE_CONNECT_PC,{candidates:n,fingerprint:t})}}})),this.signal.on(rK.RECOVER_NOTIFICATION,(e=>{this.joinInfo&&"string"==typeof AH("AP_REQUEST_DETAIL")&&(this.joinInfo.apRequestDetail="".concat(AH("AP_REQUEST_DETAIL"),";").concat(e))}))}async tryUnsubBeforeResub(e,t){try{await this.signal.request(iK.UNSUBSCRIBE,{p2p_id:this.store.p2pId,stream_id:e,ortc:[t]},!0)}catch(e){throw KH.warning("[".concat(this.store.clientId,"] tryUnsubBeforeResub warning"),e),e}}async tryUnsubDataChannelBeforeResub(e,t){try{await this.signal.request(iK.UNSUBSCRIBE,{stream_id:t.id},!0)}catch(e){throw KH.warning("unsubscribe datachannel warning",e),e}}async tryUnpubBeforeRepub(e,t){try{await this.signal.request(iK.UNPUBLISH,{stream_id:e,ortc:t},!0)}catch(e){throw KH.warning("[".concat(this.store.clientId,"] tryUnpubBeforeRepub warning: "),e),e}}async tryUnpubDataChannelBeforeRepub(e,t){try{await this.signal.request(iK.UNPUBLISH_DATASTREAM,{channnel_id:t.channelId},!0)}catch(e){throw KH.warning("unpublish datastream warning: ",e),e}}async tryMassUnsubBeforeResub(e){const t={users:e.map((e=>({stream_id:e.stream_id,stream_type:e.stream_type})))};try{await this.signal.request(iK.UNSUBSCRIBE_STREAMS,t,!0)}catch(e){throw KH.warning("[".concat(this.store.clientId,"] tryMassUnsubBeforeResub warning"),e),e}}async muteLocal(e,t){const n={action:e.find((e=>e.stream_type===RK.Audio))?"mute_local_audio":"mute_local_video",p2p_id:this.store.p2pId,ortc:e,stream_id:t};try{await this.signal.request(iK.CONTROL,n,!0,!0)}catch(e){throw KH.warning("[".concat(this.store.clientId,"] gateway muteLocal warning: "),e),e}}async unmuteLocal(e,t){const n={action:e.find((e=>e.stream_type===RK.Audio))?"unmute_local_audio":"unmute_local_video",p2p_id:this.store.p2pId,ortc:e,stream_id:t};try{await this.signal.request(iK.CONTROL,n,!0,!0)}catch(e){throw KH.warning("[".concat(this.store.clientId,"] gateway unmuteLocal warning: "),e),e}}async muteRemote(e,t){const n={action:e===kK.AUDIO?"mute_remote_audio":"mute_remote_video",p2p_id:this.store.p2pId,stream_id:t};try{await this.signal.request(iK.CONTROL,n,!0,!0)}catch(e){throw KH.warning("[".concat(this.store.clientId,"] gateway muteRemote warning: "),e),e}}async unmuteRemote(e,t){const n={action:e===kK.AUDIO?"unmute_remote_audio":"unmute_remote_video",p2p_id:this.store.p2pId,stream_id:t};try{await this.signal.request(iK.CONTROL,n,!0,!0)}catch(e){throw KH.warning("[".concat(this.store.clientId,"] gateway unmuteRemote warning: "),e),e}}uploadWRTCStats(e){this.signal.uploadWRTCStats(e)}upload(e,t){this.signal.upload(e,t)}getSignalRTT(){return this.signal.rtt}async restartICE(e){const t={p2p_id:this.store.p2pId,stream_id:this.store.uid,ortc:e};try{return await this.signal.request(iK.RESTART_ICE,t,!0)}catch(e){throw KH.warning("[".concat(this.store.clientId,"] P2PChannel.restartICE warning: "),e),e}}reconnect(){"CONNECTED"===this.state&&this.signal.reconnect(void 0,IG.P2P_FAILED)}getCurrentGatewayAddress(){var e,t;if(!AH("GATEWAY_WSS_ADDRESS"))return AH("USE_CANDIDATE_FROM_AP_DETAIL")&&null!==(e=this.joinInfo)&&void 0!==e&&e.apGatewayAddress?(KH.debug("[".concat(this.store.clientId,"] use candidate from ap detail, ").concat(JSON.stringify(this.joinInfo.apGatewayAddress))),this.joinInfo.apGatewayAddress):null!==(t=this.joinInfo)&&void 0!==t&&t.gatewayAddrs?this.joinInfo.gatewayAddrs[this.signal.currentURLIndex]:void 0}async setPublishAudioFilterEnabled(e){await this.signal.request(iK.SET_PARAMETER,{enablePublishAudioFilter:e})}}let UZ=0,VZ=0;function FZ(e,t,n,r){return new LO(((i,o)=>{t.timeout=t.timeout||AH("HTTP_CONNECT_TIMEOUT"),t.responseType=t.responseType||"json",t.data&&!n?(t.data=JSON.stringify(t.data),UZ+=zG(t.data)):n&&(t.data.size?UZ+=t.data.size:t.data instanceof FormData?UZ+=qG(t.data):UZ+=zG(JSON.stringify(t.data))),t.headers=t.headers||{},t.headers["Content-Type"]=t.headers["Content-Type"]||"application/json",t.method="POST",t.url=e,hB.request(t).then((e=>{"string"==typeof e.data?VZ+=zG(e.data):e.data instanceof ArrayBuffer||e.data instanceof Uint8Array?VZ+=e.data.byteLength:VZ+=zG(JSON.stringify(e.data)),r&&i({data:e.data,headers:e.headers}),i(e.data)})).catch((e=>{hB.isCancel(e)?o(new eW(ZB.OPERATION_ABORTED,"cancel token canceled")):"ECONNABORTED"===e.code?o(new eW(ZB.NETWORK_TIMEOUT,e.message)):e.response?o(new eW(ZB.NETWORK_RESPONSE_ERROR,e.response.status)):o(new eW(ZB.NETWORK_ERROR,e.message))}))}))}!function(){var e;function t(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var n,r="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e},i=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof mg&&mg];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);function o(e,t){if(t)e:{var n=i;e=e.split(".");for(var o=0;o<e.length-1;o++){var s=e[o];if(!(s in n))break e;n=n[s]}(t=t(o=n[e=e[e.length-1]]))!=o&&null!=t&&r(n,e,{configurable:!0,writable:!0,value:t})}}function s(e){return(e={next:e})[Symbol.iterator]=function(){return this},e}function a(e){var n="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return n?n.call(e):{next:t(e)}}if(o("Symbol",(function(e){function t(e,t){this.A=e,r(this,"description",{configurable:!0,writable:!0,value:t})}if(e)return e;t.prototype.toString=function(){return this.A};var n="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",i=0;return function e(r){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new t(n+(r||"")+"_"+i++,r)}})),o("Symbol.iterator",(function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var n="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),o=0;o<n.length;o++){var a=i[n[o]];"function"==typeof a&&"function"!=typeof a.prototype[e]&&r(a.prototype,e,{configurable:!0,writable:!0,value:function(){return s(t(this))}})}return e})),"function"==typeof Object.setPrototypeOf)n=Object.setPrototypeOf;else{var c;e:{var d={};try{d.__proto__={a:!0},c=d.a;break e}catch(e){}c=!1}n=c?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var l=n;function h(){this.m=!1,this.j=null,this.v=void 0,this.h=1,this.u=this.C=0,this.l=null}function u(e){if(e.m)throw new TypeError("Generator is already running");e.m=!0}function p(e,t){return e.h=3,{value:t}}function f(e){this.g=new h,this.G=e}function m(e,t,n,r){try{var i=t.call(e.g.j,n);if(!(i instanceof Object))throw new TypeError("Iterator result "+i+" is not an object");if(!i.done)return e.g.m=!1,i;var o=i.value}catch(t){return e.g.j=null,e.g.s(t),g(e)}return e.g.j=null,r.call(e.g,o),g(e)}function g(e){for(;e.g.h;)try{var t=e.G(e.g);if(t)return e.g.m=!1,{value:t.value,done:!1}}catch(t){e.g.v=void 0,e.g.s(t)}if(e.g.m=!1,e.g.l){if(t=e.g.l,e.g.l=null,t.F)throw t.D;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function _(e){this.next=function(t){return e.o(t)},this.throw=function(t){return e.s(t)},this.return=function(t){return function(e,t){u(e.g);var n=e.g.j;return n?m(e,"return"in n?n.return:function(e){return{value:e,done:!0}},t,e.g.return):(e.g.return(t),g(e))}(e,t)},this[Symbol.iterator]=function(){return this}}function E(e,t){return t=new _(new f(t)),l&&e.prototype&&l(t,e.prototype),t}if(h.prototype.o=function(e){this.v=e},h.prototype.s=function(e){this.l={D:e,F:!0},this.h=this.C||this.u},h.prototype.return=function(e){this.l={return:e},this.h=this.u},f.prototype.o=function(e){return u(this.g),this.g.j?m(this,this.g.j.next,e,this.g.o):(this.g.o(e),g(this))},f.prototype.s=function(e){return u(this.g),this.g.j?m(this,this.g.j.throw,e,this.g.o):(this.g.s(e),g(this))},o("Array.prototype.entries",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,(function(e,t){return[e,t]}))}})),"undefined"!=typeof Blob&&("undefined"==typeof FormData||!FormData.prototype.keys)){var y=function(e,t){for(var n=0;n<e.length;n++)t(e[n])},v=function(e){return e.replace(/\r?\n|\r/g,"\r\n")},b=function(e,t,n){return t instanceof Blob?(n=void 0!==n?String(n+""):"string"==typeof t.name?t.name:"blob",t.name===n&&"[object Blob]"!==Object.prototype.toString.call(t)||(t=new File([t],n)),[String(e),t]):[String(e),String(t)]},S=function(e,t){if(e.length<t)throw new TypeError(t+" argument required, but only "+e.length+" present.")},T="object"==typeof globalThis?globalThis:"object"==typeof window?window:"object"==typeof self?self:this,R=T.FormData,C=T.XMLHttpRequest&&T.XMLHttpRequest.prototype.send,w=T.Request&&T.fetch,I=T.navigator&&T.navigator.sendBeacon,A=T.Element&&T.Element.prototype,O=T.Symbol&&Symbol.toStringTag;O&&(Blob.prototype[O]||(Blob.prototype[O]="Blob"),"File"in T&&!File.prototype[O]&&(File.prototype[O]="File"));try{new File([],"")}catch(e){T.File=function(e,t,n){return e=new Blob(e,n||{}),Object.defineProperties(e,{name:{value:t},lastModified:{value:+(n&&void 0!==n.lastModified?new Date(n.lastModified):new Date)},toString:{value:function(){return"[object File]"}}}),O&&Object.defineProperty(e,O,{value:"File"}),e}}var x=function(e){return e.replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22")},N=function(e){this.i=[];var t=this;e&&y(e.elements,(function(e){if(e.name&&!e.disabled&&"submit"!==e.type&&"button"!==e.type&&!e.matches("form fieldset[disabled] *"))if("file"===e.type){var n=e.files&&e.files.length?e.files:[new File([],"",{type:"application/octet-stream"})];y(n,(function(n){t.append(e.name,n)}))}else"select-multiple"===e.type||"select-one"===e.type?y(e.options,(function(n){!n.disabled&&n.selected&&t.append(e.name,n.value)})):"checkbox"===e.type||"radio"===e.type?e.checked&&t.append(e.name,e.value):(n="textarea"===e.type?v(e.value):e.value,t.append(e.name,n))}))};if((e=N.prototype).append=function(e,t,n){S(arguments,2),this.i.push(b(e,t,n))},e.delete=function(e){S(arguments,1);var t=[];e=String(e),y(this.i,(function(n){n[0]!==e&&t.push(n)})),this.i=t},e.entries=function e(){var t,n=this;return E(e,(function(e){if(1==e.h&&(t=0),3!=e.h)return t<n.i.length?e=p(e,n.i[t]):(e.h=0,e=void 0),e;t++,e.h=2}))},e.forEach=function(e,t){S(arguments,1);for(var n=a(this),r=n.next();!r.done;r=n.next()){var i=a(r.value);r=i.next().value,i=i.next().value,e.call(t,i,r,this)}},e.get=function(e){S(arguments,1);var t=this.i;e=String(e);for(var n=0;n<t.length;n++)if(t[n][0]===e)return t[n][1];return null},e.getAll=function(e){S(arguments,1);var t=[];return e=String(e),y(this.i,(function(n){n[0]===e&&t.push(n[1])})),t},e.has=function(e){S(arguments,1),e=String(e);for(var t=0;t<this.i.length;t++)if(this.i[t][0]===e)return!0;return!1},e.keys=function e(){var t,n,r,i=this;return E(e,(function(e){if(1==e.h&&(t=a(i),n=t.next()),3!=e.h)return n.done?void(e.h=0):(r=n.value,p(e,a(r).next().value));n=t.next(),e.h=2}))},e.set=function(e,t,n){S(arguments,2),e=String(e);var r=[],i=b(e,t,n),o=!0;y(this.i,(function(t){t[0]===e?o&&(o=!r.push(i)):r.push(t)})),o&&r.push(i),this.i=r},e.values=function e(){var t,n,r,i,o=this;return E(e,(function(e){if(1==e.h&&(t=a(o),n=t.next()),3!=e.h)return n.done?void(e.h=0):(r=n.value,(i=a(r)).next(),p(e,i.next().value));n=t.next(),e.h=2}))},N.prototype._asNative=function(){for(var e=new R,t=a(this),n=t.next();!n.done;n=t.next()){var r=a(n.value);n=r.next().value,r=r.next().value,e.append(n,r)}return e},N.prototype._blob=function(){var e="----formdata-polyfill-"+Math.random(),t=[],n="--"+e+'\r\nContent-Disposition: form-data; name="';return this.forEach((function(e,r){return"string"==typeof e?t.push(n+x(v(r))+'"\r\n\r\n'+v(e)+"\r\n"):t.push(n+x(v(r))+'"; filename="'+x(e.name)+'"\r\nContent-Type: '+(e.type||"application/octet-stream")+"\r\n\r\n",e,"\r\n")})),t.push("--"+e+"--"),new Blob(t,{type:"multipart/form-data; boundary="+e})},N.prototype[Symbol.iterator]=function(){return this.entries()},N.prototype.toString=function(){return"[object FormData]"},A&&!A.matches&&(A.matches=A.matchesSelector||A.mozMatchesSelector||A.msMatchesSelector||A.oMatchesSelector||A.webkitMatchesSelector||function(e){for(var t=(e=(this.document||this.ownerDocument).querySelectorAll(e)).length;0<=--t&&e.item(t)!==this;);return-1<t}),O&&(N.prototype[O]="FormData"),C){var P=T.XMLHttpRequest.prototype.setRequestHeader;T.XMLHttpRequest.prototype.setRequestHeader=function(e,t){P.call(this,e,t),"content-type"===e.toLowerCase()&&(this.B=!0)},T.XMLHttpRequest.prototype.send=function(e){e instanceof N?(e=e._blob(),this.B||this.setRequestHeader("Content-Type",e.type),C.call(this,e)):C.call(this,e)}}w&&(T.fetch=function(e,t){return t&&t.body&&t.body instanceof N&&(t.body=t.body._blob()),w.call(this,e,t)}),I&&(T.navigator.sendBeacon=function(e,t){return t instanceof N&&(t=t._asNative()),I.call(this,e,t)}),T.FormData=N}}();const jZ=()=>{const e=AH("AREAS");return 0===e.length&&e.push(AK.GLOBAL),nb(e).call(e,((e,t,n)=>{const r=BZ(t);return r?0===n?r:"".concat(e,",").concat(r):e}),"")},BZ=e=>e===AK.OVERSEA?"".concat(xK.ASIA,",").concat(xK.EUROPE,",").concat(xK.AFRICA,",").concat(xK.NORTH_AMERICA,",").concat(xK.SOUTH_AMERICA,",").concat(xK.OCEANIA):xK[e],GZ={GLOBAL:{ASIA:[AK.CHINA,AK.JAPAN,AK.INDIA,AK.KOREA,AK.HKMC],EUROPE:[],NORTH_AMERICA:[AK.US],SOUTH_AMERICA:[],OCEANIA:[],AFRICA:[]}},HZ=Object.keys(GZ[AK.GLOBAL]),WZ=[AK.CHINA,AK.NORTH_AMERICA,AK.EUROPE,AK.ASIA,AK.JAPAN,AK.INDIA,AK.OCEANIA,AK.SOUTH_AMERICA,AK.AFRICA,AK.KOREA,AK.HKMC,AK.US];function KZ(e){var t,n;if(!e&&Fv(t=AH("AREAS")).call(t,AK.EXTENSIONS))return KH.debug("update area from ap : reset"),void zZ(tW,!0);if(!Fv(n=AH("AREAS")).call(n,AK.GLOBAL)||!e)return;let r=NK.EXTENSIONS;r&&(r={CODE:BZ(AK.EXTENSIONS),WEBCS_DOMAIN:["ap-web-1-".concat(e,".agora.io")],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-".concat(e,".ap.sd-rtn.com")],PROXY_CS:["proxy-ap-web-".concat(e,".agora.io")],CDS_AP:["cds-ap-web-1-".concat(e,".agora.io"),"cds-ap-web-2-".concat(e,".ap.sd-rtn.com")],ACCOUNT_REGISTER:["sua-ap-web-1-".concat(e,".agora.io"),"sua-ap-web-2-".concat(e,".ap.sd-rtn.com")],UAP_AP:["uap-ap-web-1-".concat(e,".agora.io"),"uap-ap-web-2-".concat(e,".ap.sd-rtn.com")],EVENT_REPORT_DOMAIN:["statscollector-1-".concat(e,".agora.io")],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-".concat(e,".agora.io")],LOG_UPLOAD_SERVER:["logservice-".concat(e,".agora.io")],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy-".concat(e,".agora.io")]},KH.debug("update area from ap success: ".concat(e,",config is "),r),IH("AREAS",[AK.EXTENSIONS],!0),Object.keys(r).map((e=>{IH(e,"LOG_UPLOAD_SERVER"===e||"EVENT_REPORT_DOMAIN"===e||"EVENT_REPORT_BACKUP_DOMAIN"===e||"PROXY_SERVER_TYPE3"===e?r[e][0]:r[e])})))}function zZ(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=ZH.reportApiInvoke(null,{name:EG.SET_AREA,options:e,tag:yG.TRACER});try{let r=[];if("string"==typeof e&&(r=[e]),Array.isArray(e)&&(e.forEach((e=>{if(!Fv(OK).call(OK,e))throw new eW(ZB.INVALID_PARAMS,"invalid area code")})),r=e),"[object Object]"===Object.prototype.toString.call(e)){const{areaCode:t,excludedArea:n}=e;if(!t)throw new eW(ZB.INVALID_PARAMS,"area code is needed");let i=t;"string"==typeof t&&(i=[t]),r=n?function(e,t){let n=[];if(Fv(e).call(e,AK.GLOBAL)){const o=[AK.GLOBAL,AK.OVERSEA],s=Object.keys(NK);if(t===AK.GLOBAL)throw new eW(ZB.INVALID_PARAMS,"GLOBAL is an invalid excludedArea value");if(t===AK.CHINA)n=[AK.OVERSEA];else if(i=t,Fv(HZ).call(HZ,i)){const e=(r=t,GZ[AK.GLOBAL][r]||[]),i=[...o,t,...e];n=s.filter((e=>!Fv(i).call(i,e)))}else if(function(e){let t=!1;return HZ.forEach((n=>{var r;Fv(r=GZ[AK.GLOBAL][n]).call(r,e)&&(t=!0)})),t}(t)){const e=function(e){let t;return HZ.forEach((n=>{var r;Fv(r=GZ[AK.GLOBAL][n]).call(r,e)&&(t=n)})),t}(t),r=[...o,e,t];n=s.filter((e=>!Fv(r).call(r,e)))}else n=e;n=function(e){const t=[];return WZ.forEach((n=>{Fv(e).call(e,n)&&t.push(n)})),t.concat(e.filter((e=>!Fv(WZ).call(WZ,e))))}(n)}else n=e;var r,i;return n}(i,n):i}if(!t){if(OH.AREAS){const e=new eW(ZB.PROHIBITED_OPERATION,"setArea is prohibited because of config-distribute");return n.onError(e),void KH.warning("setArea is prohibited because of config-distribute")}if(Fv(r).call(r,AK.GLOBAL)&&AH("AREAS")===AK.EXTENSIONS){const e=new eW(ZB.PROHIBITED_OPERATION,"setArea is prohibited because of ap extensions");return n.onError(e),void KH.warning("setArea is prohibited because of ap extensions")}}IH("AREAS",r,t);const i=(e=>{const t={CODE:"",WEBCS_DOMAIN:[],WEBCS_DOMAIN_BACKUP_LIST:[],PROXY_CS:[],CDS_AP:[],ACCOUNT_REGISTER:[],UAP_AP:[],EVENT_REPORT_DOMAIN:[],EVENT_REPORT_BACKUP_DOMAIN:[],LOG_UPLOAD_SERVER:[],PROXY_SERVER_TYPE3:[]};return e.map((e=>{const n=NK[e],r=Object.keys(n);r&&r.map((e=>{"CODE"!==e&&(t[e]=t[e].concat(n[e]))}))})),t})(r);Object.keys(i).map((e=>{IH(e,"LOG_UPLOAD_SERVER"===e||"EVENT_REPORT_DOMAIN"===e||"EVENT_REPORT_BACKUP_DOMAIN"===e||"PROXY_SERVER_TYPE3"===e?i[e][0]:i[e])})),KH.debug("set area success:",r.join(","))}catch(e){throw n.onError(e),e}n.onSuccess()}function qZ(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function YZ(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qZ(Object(n),!0).forEach((function(t){SU(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qZ(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}let JZ=1;let XZ=1;function QZ(e,t,n,r){let{url:i,areaCode:o}=e;const{clientId:s,sid:a}=t,c=Date.now();let d;const[l,h]=t0(t,o,[Ez.CHOOSE_SERVER]);let u=LG.networkState;return uH((async()=>{u&&LG.networkState===AG.OFFLINE&&LG.onlineWaiter&&await LO.race([LG.onlineWaiter,JG(r&&r.maxRetryTimeout||lH.maxRetryTimeout)]),u=LG.networkState;const{data:e,headers:o}=await FZ(i,{data:l,cancelToken:n,headers:{"Content-Type":"multipart/form-data;"}},!0,!0);d="1"===o.http3?1:-1,ZH.reportResourceTiming(i,a),ZZ(e,i,t,c,[Ez.CHOOSE_SERVER],d);const s=wz(e,Ez.CHOOSE_SERVER);return e0(s),Sz(s,i)}),(e=>(e&&ZH.joinChooseServer(a,{lts:c,succ:!0,csAddr:i,opid:h,serverList:e.gatewayAddrs.map((e=>e.address)),ec:null,cid:e.cid.toString(),uid:e.uid.toString(),csIp:e.csIp,unilbsServerIds:[Ez.CHOOSE_SERVER].toString(),isHttp3:d,corssRegionTagReq:t.apRequestDetail,corssRegionTagRes:e.res.detail&&e.res.detail[38]}),!1)),(e=>e.code!==ZB.OPERATION_ABORTED&&(e.code===ZB.CAN_NOT_GET_GATEWAY_SERVER?e.data.retry:(ZH.joinChooseServer(a,{lts:c,succ:!1,csAddr:i,serverList:null,opid:h,ec:e.code,csIp:e.data&&e.data.csIp,unilbsServerIds:[Ez.CHOOSE_SERVER].toString(),extend:JSON.stringify({networkState:u}),isHttp3:d,corssRegionTagReq:t.apRequestDetail}),KH.warning("[".concat(s||"sid-".concat(a.slice(0,6)),"] Choose server network error, retry"),e),!0))),r)}function $Z(e,t,n,r){let i,{url:o,areaCode:s,serviceIds:a}=e;const c=Date.now(),[d,l]=t0(t,s,a);let h;return uH((async()=>{h&&LG.networkState===AG.OFFLINE&&LG.onlineWaiter&&await LO.race([LG.onlineWaiter,JG(r&&r.maxRetryTimeout||lH.maxRetryTimeout)]),h=LG.networkState;const{data:e,headers:s}=await FZ(o,{data:d,cancelToken:n,headers:{"Content-Type":"multipart/form-data;"}},!0,!0);i="1"===s.http3?1:-1,ZH.reportResourceTiming(o,t.sid),ZZ(e,o,t,c,a,i);const l=wz(e,Ez.CHOOSE_SERVER),u=wz(e,"proxy5"===t.cloudProxyServer?Ez.CLOUD_PROXY_5:"proxy3"===t.cloudProxyServer||"proxy4"===t.cloudProxyServer?Ez.CLOUD_PROXY:Ez.CLOUD_PROXY_FALLBACK);return e0(l),{gatewayInfo:Sz(l,o),proxyInfo:u,url:o}}),(e=>(e.gatewayInfo&&ZH.joinChooseServer(t.sid,{lts:c,succ:!0,csAddr:o,serverList:e.gatewayInfo.gatewayAddrs.map((e=>e.address)),ec:null,opid:l,cid:e.gatewayInfo.cid.toString(),uid:e.gatewayInfo.uid.toString(),csIp:e.gatewayInfo.csIp,unilbsServerIds:a.toString(),isHttp3:i,corssRegionTagReq:t.apRequestDetail,corssRegionTagRes:e.gatewayInfo.res.detail&&e.gatewayInfo.res.detail[38]}),e.proxyInfo&&ZH.joinWebProxyAP(t.sid,{lts:c,sucess:1,apServerAddr:o,turnServerAddrList:e.proxyInfo.addresses.map((e=>e.ip)).join(","),errorCode:null,eventType:t.cloudProxyServer,unilbsServerIds:a.toString()}),!1)),(e=>e.code!==ZB.OPERATION_ABORTED&&(e.code===ZB.CAN_NOT_GET_GATEWAY_SERVER?e.data.retry:(ZH.joinWebProxyAP(t.sid,{lts:c,sucess:0,apServerAddr:o,turnServerAddrList:null,errorCode:e.code,eventType:t.cloudProxyServer,unilbsServerIds:a.toString(),extend:JSON.stringify({networkState:h})}),KH.warning("[".concat(t.clientId,"] multi unilbs network error, retry"),e),!0))),r)}const ZZ=(e,t,n,r,i,o)=>{const{sid:s,clientId:a,cloudProxyServer:c}=n,d=[],l=a=>{4096===a.flag?ZH.joinChooseServer(s,{lts:r,succ:!1,csAddr:t,opid:e.opid,serverList:null,ec:a.error.message,csIp:a.error.data&&a.error.data.csIp,unilbsServerIds:i.toString(),isHttp3:o,corssRegionTagReq:n.apRequestDetail}):1048576!==a.flag&&4194304!==a.flag&&4194310!==a.flag||ZH.joinWebProxyAP(s,{lts:r,sucess:0,apServerAddr:t,turnServerAddrList:null,errorCode:a.error.code,eventType:c,unilbsServerIds:i.toString()})};if(e.response_body.forEach((t=>{const n=t.buffer.code;if(23===t.uri&&0===n&&!t.buffer.edges_services)if(4194310===t.buffer.flag)KH.warning("no edge services in ap response of proxy fallback, will not set proxy in iceServers"),t.buffer.edges_services=[];else{const n={error:new eW(ZB.CAN_NOT_GET_GATEWAY_SERVER,"no edge services in ap response",{retry:!0,csIp:e.detail[502]}),flag:t.buffer.flag};d.push(n),l(n)}if(0!==n){const r=ez(n),i={error:new eW(ZB.CAN_NOT_GET_GATEWAY_SERVER,r.desc,{desc:r.desc,retry:r.retry,csIp:e.detail[502]}),flag:t.buffer.flag};4194310===t.buffer.flag?KH.warning(i.error.toString()):d.push(i),l(i)}})),d.length)throw KH.warning("[".concat(a||"sid-".concat(s.slice(0,6)),"] multi unilbs ").concat(t," failed, ").concat(d.map((e=>"flag: ".concat(e.flag,", message: ").concat(e.error.message,", retry: ").concat(e.error.data.retry))).join(" | "))),new eW(ZB.CAN_NOT_GET_GATEWAY_SERVER,d.map((e=>"flag: ".concat(e.flag,", message: ").concat(e.error.message))).join(" | "),{retry:!!d.find((e=>e.error.data.retry)),csIp:e.detail[502],desc:[...new Set(d.map((e=>{var t;return null==e||null===(t=e.error)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.desc})).filter((e=>!!e)))]})},e0=e=>{var t,n,r,i;if(e.addresses&&0===e.addresses.length&&0===e.code)throw new eW(ZB.CAN_NOT_GET_GATEWAY_SERVER,"void gateway address",{retry:!0,csIp:e.detail&&e.detail[502]});if(AH("AP_AREA")&&(null!==(r=e.detail)&&void 0!==r&&r[23]&&"string"==typeof(null===(i=e.detail)||void 0===i?void 0:i[23])?KZ(e.detail[23].toLowerCase()):KZ()),null!==(t=e.detail)&&void 0!==t&&t[19]&&"string"==typeof(null===(n=e.detail)||void 0===n?void 0:n[19])){const t=e.detail[19],n=null==t?void 0:t.split(";");for(let t=0;t<n.length;t++){var o;const r=Px(o=n[t]).call(o);e.addresses[t]&&n&&(e.addresses[t].fingerprint=r)}}if(AH("GATEWAY_ADDRESS")&&AH("GATEWAY_ADDRESS").length>0){KH.debug("assign gateway address to",AH("GATEWAY_ADDRESS"));const t=AH("GATEWAY_ADDRESS").map((t=>{var n,r;const i=null!==(n=null===(r=e.addresses.find((e=>e.ip===t.ip&&e.port===t.port)))||void 0===r?void 0:r.fingerprint)&&void 0!==n?n:"";return{ip:t.ip,port:t.port,ticket:e.addresses[0]&&e.addresses[0].ticket,fingerprint:i}}));e.addresses=t}},t0=(e,t,n)=>{const r=Math.floor(Math.random()*10**12),i={appid:e.appId,client_ts:Date.now(),opid:r,sid:e.sid,request_bodies:[{uri:22,buffer:{cname:e.cname,detail:YZ(YZ({6:e.stringUid,11:t,12:AH("USE_NEW_TOKEN")?"1":void 0,22:t},e.apRequestDetail?{33:e.apRequestDetail}:{}),e.apRTM?{26:"RTM2"}:{}),key:e.token,service_ids:n,uid:e.uid||0}}]};i.request_bodies.forEach((t=>{e.multiIP&&e.multiIP.gateway_ip&&(t.buffer.detail[5]=JSON.stringify({vocs_ip:[e.multiIP.uni_lbs_ip],vos_ip:[e.multiIP.gateway_ip]}))}));const o=new FormData;return o.append("request",JSON.stringify(i)),[o,r]};let n0=0;function r0(e){return LO.all(e.map((e=>e.then((e=>{throw e}),(e=>e))))).then((e=>{throw e}),(e=>e))}const i0=async e=>{let{fragementLength:t,referenceList:n,asyncMapHandler:r,allFailedhandler:i,promisesCollector:o}=e,s=0;const a=t;let c,d=0;const l=async()=>{const e=(()=>{const e=s*a,t=e+a;return n.slice(e,t).map(r)})();o&&o.push(...e);try{c=await r0(e)}catch(e){if(d+=a,s++,!(d>=n.length))return void await l();i(e)}e.forEach((e=>e.cancel()))};return await l(),c},o0=async e=>{let{referenceList:t,asyncMapHandler:n,closeFn:r}=e;const i=t.length;let o=0;const s=async()=>{const e=n(t.shift());try{return await e}catch(e){if(o++,o>=i||null!=r&&r(e))throw e;return s()}};return s()};async function s0(e,t,n,r){const i=async function(e,t,n,r){let i=null;const o=[],s=async()=>{const i=AH("WEBCS_DOMAIN").slice(0,AH("AJAX_REQUEST_CONCURRENT")).map((t=>({url:e.proxyServer?"https://".concat(e.proxyServer,"/ap/?url=").concat(t+"/api/v2/transpond/webrtc?v=2"):"https://".concat(t,"/api/v2/transpond/webrtc?v=2"),areaCode:jZ()}))),s=r.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:i.map((e=>e.url))}),a=await i0({fragementLength:AH("FRAGEMENT_LENGTH"),referenceList:i,asyncMapHandler:r=>(KH.debug("[".concat(e.clientId,"] Connect to choose_server:"),r.url),QZ(r,e,t,n)),allFailedhandler:e=>{throw r.recordJoinChannelService({endTs:Date.now(),status:"error",errors:e},s),e[0]},promisesCollector:o});return r.recordJoinChannelService({endTs:Date.now(),status:"success"},s),a},a=async()=>{if(await JG(1e3),null!==i)return i;const s=AH("WEBCS_DOMAIN_BACKUP_LIST").map((t=>({url:e.proxyServer?"https://".concat(e.proxyServer,"/ap/?url=").concat(t+"/api/v2/transpond/webrtc?v=2"):"https://".concat(t,"/api/v2/transpond/webrtc?v=2"),areaCode:jZ()}))),a=r.recordJoinChannelService({endTs:void 0,startTs:Date.now(),status:"pending",service:"chooseServer",urls:s.map((e=>e.url))}),c=await i0({fragementLength:AH("FRAGEMENT_LENGTH"),referenceList:s,asyncMapHandler:r=>(KH.debug("[".concat(e.clientId,"] Connect to backup choose_server:"),r.url),QZ(r,e,t,n)),allFailedhandler:e=>{throw r.recordJoinChannelService({endTs:Date.now(),status:"error",errors:e},a),e[0]},promisesCollector:o});return r.recordJoinChannelService({endTs:Date.now(),status:"success"},a),c};try{return i=await r0([s(),a()]),o.length&&o.forEach((e=>e.cancel&&"function"==typeof e.cancel&&e.cancel())),i}catch(e){throw e[0]}}(e,t,n,r);return{gatewayInfo:await i}}async function a0(e,t,n,r,i){const o=e.cloudProxyServer;if("disabled"===o){if(!r)return;if(e.useLocalAccessPoint)return await s0(e,t,n,i);if(AH("JOIN_WITH_FALLBACK_MEDIA_PROXY")){const{gatewayInfo:r,proxyInfo:o}=await h0(e,t,n,i);if(e.turnServer&&"auto"!==e.turnServer.mode)return{gatewayInfo:r};const a=o.map((e=>({turnServerURL:e.address,tcpport:e.tcpport||TH.tcpport,udpport:e.udpport||TH.udpport,username:e.username||TH.username,password:e.password||TH.password,forceturn:!1,security:!0})));if(i.useP2P){var s;const t=null!==(s=e.uid)&&void 0!==s?s:r.uid,n="glb:".concat(t.toString()),i=await fG(n),c=o.map((e=>({turnServerURL:e.address,tcpport:e.tcpport||TH.tcpport,udpport:e.udpport||TH.udpport,username:n,password:i,forceturn:!1,security:!0})));a.push(...c)}return e.turnServer={mode:"manual",servers:a},{gatewayInfo:r}}return await s0(e,t,n,i)}const{proxyInfo:a,gatewayInfo:c}=await h0(e,t,n,i),d={gatewayInfo:c},l=a.map((e=>({turnServerURL:e.address,tcpport:"proxy3"===o?void 0:e.tcpport?e.tcpport:TH.tcpport,udpport:"proxy4"===o?void 0:e.udpport?e.udpport:TH.udpport,username:e.username||TH.username,password:e.password||TH.password,forceturn:"proxy4"!==o,security:"proxy5"===o})));if(i.useP2P){var h;const t=null!==(h=e.uid)&&void 0!==h?h:c.uid,n="glb:".concat(t.toString()),r=await fG(n),i=a.map((e=>({turnServerURL:e.address,tcpport:"proxy3"===o?void 0:e.tcpport||TH.tcpport,udpport:"proxy4"===o?void 0:e.udpport||TH.udpport,username:n,password:r,forceturn:"proxy4"!==o,security:"proxy5"===o})));l.push(...i)}return e.turnServer={mode:"manual",servers:l},KH.debug("[".concat(e.clientId,"] set proxy server: ").concat(e.proxyServer,", mode: ").concat(o)),d}async function c0(e,t,n,r,i){const o=AH("ACCOUNT_REGISTER").slice(0,AH("AJAX_REQUEST_CONCURRENT"));let s=[];s=t.proxyServer?o.map((e=>"https://".concat(t.proxyServer,"/ap/?url=").concat(e+"/api/v1"))):o.map((e=>"https://".concat(e,"/api/v1")));const a=null==i?void 0:i.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"stringUID",urls:s});try{const o=await async function(e,t,n,r,i){const o=Date.now(),s={sid:n.sid,opid:10,appid:n.appId,string_uid:t};let a=e[0];const c=await uH((()=>FZ(a+"".concat(-1===a.indexOf("?")?"?":"&","action=stringuid"),{data:s,cancelToken:r,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":72}})),((n,r)=>{if(0===n.code){if(n.uid<=0||n.uid>=Math.pow(2,32))throw KH.error("Invalid Uint Uid ".concat(t," => ").concat(n.uid),n),ZH.reqUserAccount(s.sid,{lts:o,success:!1,serverAddr:a,stringUid:s.string_uid,uid:n.uid,errorCode:ZB.INVALID_UINT_UID_FROM_STRING_UID,extend:s}),new eW(ZB.INVALID_UINT_UID_FROM_STRING_UID);return ZH.reqUserAccount(s.sid,{lts:o,success:!0,serverAddr:a,stringUid:s.string_uid,uid:n.uid,errorCode:null,extend:s}),!1}const i=ez(n.code);return i.retry&&(a=e[(r+1)%e.length]),ZH.reqUserAccount(s.sid,{lts:o,success:!1,serverAddr:a,stringUid:s.string_uid,uid:n.uid,errorCode:i.desc,extend:s}),i.retry}),((t,n)=>t.code!==ZB.OPERATION_ABORTED&&(ZH.reqUserAccount(s.sid,{lts:o,success:!1,serverAddr:a,stringUid:s.string_uid,uid:null,errorCode:t.code,extend:s}),a=e[(n+1)%e.length],!0)),i);if(0!==c.code){const e=ez(c.code);throw new eW(ZB.UNEXPECTED_RESPONSE,e.desc)}return c}(s,e,t,n,r);return null==i||i.recordJoinChannelService({status:"success",endTs:Date.now()},a),o.uid}catch(e){throw null==i||i.recordJoinChannelService({status:"error",endTs:Date.now(),errors:[e]},a),e}}async function d0(e,t,n){const r=AH("ACCOUNT_REGISTER");let i=[];i=t.proxyServer?r.map((e=>"https://".concat(t.proxyServer,"/ap/?url=").concat(e+"/api/v1"))):r.map((e=>"https://".concat(e,"/api/v1")));try{const r=await o0({referenceList:i,asyncMapHandler:r=>async function(e,t,n,r){const i=Date.now(),o={sid:n.sid,opid:10,appid:n.appId,string_uid:t};try{const t=await FZ(e+"".concat(-1===e.indexOf("?")?"?":"&","action=stringuid"),{data:o,cancelToken:r,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":72}});if(0!==t.code){const e=ez(t.code);throw new eW(ZB.UNEXPECTED_RESPONSE,"preload sua error:".concat(e.desc),e)}if(t.uid<=0||t.uid>=Math.pow(2,32))throw new eW(ZB.INVALID_UINT_UID_FROM_STRING_UID);return{requestTime:i,url:e,req:o,uid:t.uid,elapse:Date.now()-i}}catch(e){throw e}}(r,e,t,n),closeFn:e=>e.code===ZB.OPERATION_ABORTED||e.code===ZB.UNEXPECTED_RESPONSE&&!e.data.retry});return r}catch(e){throw e}}async function l0(e,t){const n=AH("WEBCS_DOMAIN").concat(AH("WEBCS_DOMAIN_BACKUP_LIST")).map((e=>({url:"https://".concat(e,"/api/v2/transpond/webrtc?v=2"),areaCode:jZ(),serviceIds:[Ez.CHOOSE_SERVER,Ez.CLOUD_PROXY_FALLBACK]})));try{const r=await o0({referenceList:n,asyncMapHandler:n=>async function(e,t,n){let r,{url:i,areaCode:o,serviceIds:s}=e;const a=Date.now(),[c,d]=t0(t,o,s);let l=LG.networkState;try{l&&LG.networkState===AG.OFFLINE&&LG.onlineWaiter&&await LO.race([LG.onlineWaiter,JG(lH.maxRetryTimeout)]),l=LG.networkState;const{data:e,headers:t}=await FZ(i,{data:c,cancelToken:n,headers:{"Content-Type":"multipart/form-data;"}},!0,!0);r="1"===t.http3?1:-1;const o=e=>{const t=[];if(e.response_body.forEach((n=>{const r=n.buffer.code;if(23===n.uri&&0===r&&!n.buffer.edges_services)if(4194310===n.buffer.flag)n.buffer.edges_services=[];else{const r={error:new eW(ZB.CAN_NOT_GET_GATEWAY_SERVER,"no edge services in ap response",{retry:!0,csIp:e.detail[502]}),flag:n.buffer.flag};t.push(r)}if(0!==r){const i=ez(r),o={error:new eW(ZB.CAN_NOT_GET_GATEWAY_SERVER,i.desc,{desc:i.desc,retry:i.retry,csIp:e.detail[502]}),flag:n.buffer.flag};4194310===n.buffer.flag?KH.warning(o.error.toString()):t.push(o)}})),t.length)throw new eW(ZB.CAN_NOT_GET_GATEWAY_SERVER,t.map((e=>"flag: ".concat(e.flag,", message: ").concat(e.error.message))).join(" | "),{retry:!!t.find((e=>e.error.data.retry)),csIp:e.detail[502],desc:[...new Set(t.map((e=>{var t;return null==e||null===(t=e.error)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.desc})).filter((e=>!!e)))]})};o(e);const s=wz(e,Ez.CHOOSE_SERVER),h=wz(e,Ez.CLOUD_PROXY_FALLBACK);return e0(s),{gatewayInfo:Sz(s,i),proxyInfo:h,opid:d,requestTime:a,url:i,isHttp3:r,elapse:Date.now()-a}}catch(e){throw e}}(n,e,t),closeFn:e=>e.code===ZB.OPERATION_ABORTED||e.code===ZB.CAN_NOT_GET_GATEWAY_SERVER&&!e.data.retry});return r}catch(e){throw e}}async function h0(e,t,n,r){const i=AH("PROXY_SERVER_TYPE3"),o=(e,t,n)=>{let r=n||i;return Array.isArray(r)&&(r=t%2==0?i[1]:i[0]),"https://".concat(r,"/ap/?url=").concat(e)};let s=null;const a=[],c=async()=>{const i=AH("WEBCS_DOMAIN").slice(0,AH("AJAX_REQUEST_CONCURRENT")).map(((t,n)=>{let r;return r="disabled"===e.cloudProxyServer&&e.proxyServer?o("".concat(t,"/api/v2/transpond/webrtc?v=2"),n,e.proxyServer):"disabled"===e.cloudProxyServer||"fallback"===e.cloudProxyServer?"https://".concat(t,"/api/v2/transpond/webrtc?v=2"):o("".concat(t,"/api/v2/transpond/webrtc?v=2"),n),{url:r,areaCode:jZ(),serviceIds:[Ez.CHOOSE_SERVER,"proxy5"===e.cloudProxyServer?Ez.CLOUD_PROXY_5:"proxy3"===e.cloudProxyServer||"proxy4"===e.cloudProxyServer?Ez.CLOUD_PROXY:Ez.CLOUD_PROXY_FALLBACK]}})),s=r.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:i.map((e=>e.url))}),c=await i0({fragementLength:AH("FRAGEMENT_LENGTH"),referenceList:i,asyncMapHandler:r=>(KH.debug("[".concat(e.clientId,"] Connect to choose_server:"),r.url),$Z(r,e,t,n)),allFailedhandler:e=>{throw r.recordJoinChannelService({endTs:Date.now(),status:"error",errors:e},s),e[0]},promisesCollector:a});return r.recordJoinChannelService({endTs:Date.now(),status:"success"},s),c},d=async()=>{if(await JG(1e3),null!==s)return s;const i=AH("WEBCS_DOMAIN_BACKUP_LIST").map(((t,n)=>{let r;return r="disabled"===e.cloudProxyServer&&e.proxyServer?o("".concat(t,"/api/v2/transpond/webrtc?v=2"),n,e.proxyServer):"disabled"===e.cloudProxyServer||"fallback"===e.cloudProxyServer?"https://".concat(t,"/api/v2/transpond/webrtc?v=2"):o("".concat(t,"/api/v2/transpond/webrtc?v=2"),n),{url:r,areaCode:jZ(),serviceIds:[Ez.CHOOSE_SERVER,"proxy5"===e.cloudProxyServer?Ez.CLOUD_PROXY_5:"proxy3"===e.cloudProxyServer||"proxy4"===e.cloudProxyServer?Ez.CLOUD_PROXY:Ez.CLOUD_PROXY_FALLBACK]}})),c=r.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:i.map((e=>e.url))}),d=await i0({fragementLength:AH("FRAGEMENT_LENGTH"),referenceList:i,asyncMapHandler:r=>(KH.debug("[".concat(e.clientId,"] Connect to backup choose_server:"),r.url),$Z(r,e,t,n)),allFailedhandler:e=>{throw r.recordJoinChannelService({endTs:Date.now(),status:"error",errors:e},c),e[0]},promisesCollector:a});return r.recordJoinChannelService({endTs:Date.now(),status:"success"},c),d};let l,h,u;try{({gatewayInfo:l,proxyInfo:h,url:u}=await r0([c(),d()]))}catch(e){throw e[0]}if(a.length&&a.forEach((e=>e.cancel&&"function"==typeof e.cancel&&e.cancel())),!l||!h)throw new eW(ZB.UNEXPECTED_ERROR,"missing gateway or proxy response").print();if(e.apUrl=u,"disabled"!==e.cloudProxyServer&&Array.isArray(i)&&u){const t=/^https?:\/\/(.+?)(\/.*)?$/.exec(u)[1];Fv(i).call(i,t)&&(e.proxyServer=t,KH.setProxyServer(t),ZH.setProxyServer(t))}return s={gatewayInfo:l,proxyInfo:await Iz(h,l.uid)},s}async function u0(e,t,n){let r=null;const i=[],o=async o=>{const s=AH(o?"WEBCS_DOMAIN_BACKUP_LIST":"WEBCS_DOMAIN").map((t=>e.proxyServer?"https://".concat(e.proxyServer,"/ap/?url=").concat(t+"/api/v2/transpond/webrtc?v=2"):"https://".concat(t,"/api/v2/transpond/webrtc?v=2")));return o&&(await JG(1e3),null!==r)?r:await i0({fragementLength:AH("FRAGEMENT_LENGTH"),referenceList:s,asyncMapHandler:r=>(KH.debug("[".concat(e.clientId,"] update ticket, Connect to ").concat(o?"backup":""," choose_server:"),r),function(e,t,n,r){const[i]=((e,t)=>{const n=Math.floor(Math.random()*10**12),r={appid:e.appId,client_ts:Date.now(),opid:n,sid:e.sid,request_bodies:[{uri:28,buffer:{cname:e.cname,detail:{1:"",6:e.stringUid,12:"1"},token:e.token,service_ids:t,uid:e.uid||0,edges_services:e.apResponse.addresses.map((e=>({ip:e.ip,port:e.port})))}}]},i=new FormData;return i.append("request",JSON.stringify(r)),[i,n]})(t,[Ez.CHOOSE_SERVER]);let o=LG.networkState;return uH((async()=>{o&&LG.networkState===AG.OFFLINE&&LG.onlineWaiter&&await LO.race([LG.onlineWaiter,JG(r&&r.maxRetryTimeout||lH.maxRetryTimeout)]),o=LG.networkState;return((e,t)=>{if(e.response_body&&e.response_body.length){const t=e.response_body[0];if(0!==t.buffer.code){const e=ez(t.buffer.code);throw new eW(ZB.UPDATE_TICKET_FAILED,"[".concat(t.buffer.code,"]: ").concat(e.desc),{retry:e.retry})}return t.buffer.ticket}throw KH.debug("update ticket request received ap response without response body:",t),new eW(ZB.UPDATE_TICKET_FAILED,"cannot find response body from ap response",{retry:!1})})(await FZ(e,{data:i,cancelToken:n,headers:{"Content-Type":"multipart/form-data;"}},!0),e)}),(()=>!1),(e=>e.code!==ZB.OPERATION_ABORTED&&(e.code===ZB.UPDATE_TICKET_FAILED?e.data.retry:(KH.warning("[".concat(t.clientId,"] update ticket network error, retry"),e),!0))),r)}(r,e,t,n)),allFailedhandler:e=>{throw e[0]},promisesCollector:i})};try{return r=await r0([o(!1),o(!0)]),i.length&&i.forEach((e=>e.cancel&&"function"==typeof e.cancel&&e.cancel())),r}catch(e){throw e[0]}}function p0(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f0(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p0(Object(n),!0).forEach((function(t){SU(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p0(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class m0 extends mG{get isSuccess(){return!!this.configs}constructor(){super(),SU(this,"configs",void 0),SU(this,"joinInfo",void 0),SU(this,"cancelToken",void 0),SU(this,"retryConfig",{timeout:3e3,timeoutFactor:1.5,maxRetryCount:1,maxRetryTimeout:1e4}),SU(this,"interval",void 0),SU(this,"mutex",new cH("config-distribute")),SU(this,"mutableParamsRead",!1)}startGetConfigDistribute(e,t){this.joinInfo=e,this.cancelToken=t,this.interval&&this.stopGetConfigDistribute(),AH("ENABLE_CONFIG_DISTRIBUTE")&&(this.updateConfigDistribute(),this.interval=window.setInterval((()=>{this.updateConfigDistribute()}),AH("CONFIG_DISTRIBUTE_INTERVAL")))}stopGetConfigDistribute(){this.interval&&clearInterval(this.interval),this.interval=void 0,this.joinInfo=void 0,this.cancelToken=void 0}async awaitConfigDistributeComplete(){this.mutex.isLocked&&(await this.mutex.lock())()}async updateConfigDistribute(){if(this.mutableParamsRead||(this.mutableParamsRead=!0,ZH.reportApiInvoke(null,{options:void 0,name:EG.LOAD_CONFIG_FROM_LOCALSTORAGE,tag:yG.TRACER}).onSuccess(JSON.stringify(OH))),!this.joinInfo||!this.cancelToken||!this.retryConfig)return void KH.debug("[config-distribute] get config distribute interrupted have no joininfo");let e;const t=await this.mutex.lock();try{e=await async function(e,t,n){const r=AH("CDS_AP").slice(0,AH("AJAX_REQUEST_CONCURRENT")).map((t=>e.proxyServer?"https://".concat(e.proxyServer,"/ap/?url=").concat(t+"/api/v1"):"https://".concat(t,"/api/v1?action=config"))),i=r.map((r=>function(e,t,n,r){const i=SB(),o={flag:64,cipher_method:0,features:{device:i.name,system:i.os,system_general:navigator.userAgent,vendor:t.appId,version:vH,cname:t.cname,sid:t.sid,session_id:t.sid,detail:"",proxyServer:t.proxyServer}};return uH((()=>FZ(e,{data:o,timeout:1e3,cancelToken:n,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":54}})),void 0,(e=>e.code!==ZB.OPERATION_ABORTED),r)}(r,e,t,n)));let o=null,s=null,a={};try{o=await r0(i)}catch(e){if(e.code===ZB.OPERATION_ABORTED)throw e;s=e}if(i.forEach((e=>e.cancel())),ZH.reportApiInvoke(e.sid,{name:EG.REQUEST_CONFIG_DISTRIBUTE,options:{error:s,res:o}}).onSuccess(),o&&o.test_tags)try{a=function(e){if(!e.test_tags)return{};const t=e.test_tags,n=Object.keys(t),r={};return n.forEach((e=>{var n;const i=Px(n=e.slice(4)).call(n),o=JSON.parse(t[e])[1];r[i]=o})),r}(o)}catch(e){}return a}(this.joinInfo,this.cancelToken,this.retryConfig),KH.debug("[config-distribute] get config distribute",JSON.stringify(e)),e.limit_bitrate&&this.handleBitrateLimit(e.limit_bitrate),this.cacheGlobalParameterConfig(e),this.configs=e}catch(e){const t=new eW(ZB.NETWORK_RESPONSE_ERROR,e);KH.warning("[config-distribute] ".concat(t.toString()))}finally{t()}}getBitrateLimit(){return this.configs?this.configs.limit_bitrate:void 0}handleBitrateLimit(e){var t;(t=e)&&t.uplink&&t.id&&void 0!==t.uplink.max_bitrate&&void 0!==t.uplink.min_bitrate&&(this.configs&&this.configs.limit_bitrate?this.configs&&this.configs.limit_bitrate&&this.configs.limit_bitrate.id!==e.id&&this.emit(PK.UPDATE_BITRATE_LIMIT,e):this.emit(PK.UPDATE_BITRATE_LIMIT,e))}getLowStreamConfigDistribute(){return this.configs&&this.configs.limit_bitrate&&f0({},this.configs.limit_bitrate.low_stream_uplink)}cacheGlobalParameterConfig(e){var t;const n=XN(t=Object.keys(e).filter((e=>/^webrtc_ng_global_parameter/.test(e)))).call(t);for(let t=0;t<n.length;t++)for(let r=n.length-1;r>t;r--){const t=n[r];if("number"==typeof e[t].__priority){const i=e[t].__priority,o=n[r-1];if("number"==typeof e[o].__priority){if(!(i>e[o].__priority))continue;{const e=t;n[r]=n[r-1],n[r-1]=e}}else{const e=t;n[r]=n[r-1],n[r-1]=e}}}const r={};n.forEach((t=>{const n=e[t],i=n.__expires;Object.keys(n).forEach((e=>{"__priority"===e||"__expires"===e||Object.prototype.hasOwnProperty.call(r,e)||(r[e]=f0({value:n[e]},i&&{expires:i}))}))}));try{!function(e){try{const t=Date.now();Object.keys(e).forEach((n=>{switch(n){case"ENABLE_EVENT_REPORT":case"UPLOAD_LOG":case"ENABLE_AG_ADAPTATION":case"FORCE_AG_HIGH_FRAMERATE":case"FORCE_SUPPORT_AG_ADAPTATION":case"ENCODER_CONFIG_LIMIT":case"CAMERA_CAPTURE_CONFIG":case"ENABLE_PRELOAD":if(Object.prototype.hasOwnProperty.call(wH,n)){const{value:r,expires:i}=e[n];if(i&&i<=t)return;OH[n]=r,wH[n]=r,KH.debug("Update global parameters from config distribute",n,r)}}}))}catch(t){KH.error("Error update config immediately: ".concat(e),t.message)}}(r);const e=JSON.stringify(r),t=window.btoa(e);window.localStorage.setItem("websdk_ng_global_parameter",t),KH.debug("Caching global parameters ".concat(e))}catch(e){KH.error("Error caching global parameters:",e.message)}}}class g0 extends mG{constructor(){super(...arguments),SU(this,"resultStorage",new Map)}setLocalAudioStats(e,t,n){this.record("AUDIO_INPUT_LEVEL_TOO_LOW",e,this.checkAudioInputLevel(n,t)),this.record("SEND_AUDIO_BITRATE_TOO_LOW",e,this.checkSendAudioBitrate(n,t))}setLocalVideoStats(e,t,n){this.record("SEND_VIDEO_BITRATE_TOO_LOW",e,this.checkSendVideoBitrate(n,t)),this.record("FRAMERATE_INPUT_TOO_LOW",e,this.checkFramerateInput(n,t)),this.record("FRAMERATE_SENT_TOO_LOW",e,this.checkFramerateSent(n))}setRemoteAudioStats(e,t){const n=e.getUserId();this.record("AUDIO_OUTPUT_LEVEL_TOO_LOW",n,this.checkAudioOutputLevel(t))}setRemoteVideoStats(e,t){const n=e.getUserId();this.record("RECV_VIDEO_DECODE_FAILED",n,this.checkVideoDecode(t))}record(e,t,n){if(AH("STATS_UPDATE_INTERVAL")>500)return;this.resultStorage.has(e)||this.resultStorage.set(e,{result:[],isPrevNormal:!0});const r=this.resultStorage.get(e);if(r&&(r.result.push(n),r.result.length>=5)){var i;const n=Fv(i=r.result).call(i,!0);r.isPrevNormal&&!n&&this.emit("exception",_0[e],e,t),!r.isPrevNormal&&n&&this.emit("exception",_0[e]+2e3,e+"_RECOVER",t),r.isPrevNormal=n,r.result=[]}}checkAudioOutputLevel(e){return!(e.receiveBitrate>0&&0===e.receiveLevel)}checkAudioInputLevel(e,t){return t instanceof HQ&&!t.isActive||!!t.muted||0!==e.sendVolumeLevel}checkFramerateInput(e,t){let n=null;t._encoderConfig&&t._encoderConfig.frameRate&&(n=Tz(t._encoderConfig.frameRate));const r=e.captureFrameRate;return!n||!r||!(n>10&&r<5||n<10&&n>=5&&r<=1)}checkFramerateSent(e){return!(e.captureFrameRate&&e.sendFrameRate&&e.captureFrameRate>5&&e.sendFrameRate<=1)}checkSendVideoBitrate(e,t){return!!t.muted||0!==e.sendBitrate}checkSendAudioBitrate(e,t){return t instanceof HQ&&!t.isActive||!!t.muted||0!==e.sendBitrate}checkVideoDecode(e){return 0===e.receiveBitrate||0!==e.decodeFrameRate}}const _0={FRAMERATE_INPUT_TOO_LOW:1001,FRAMERATE_SENT_TOO_LOW:1002,SEND_VIDEO_BITRATE_TOO_LOW:1003,RECV_VIDEO_DECODE_FAILED:1005,AUDIO_INPUT_LEVEL_TOO_LOW:2001,AUDIO_OUTPUT_LEVEL_TOO_LOW:2002,SEND_AUDIO_BITRATE_TOO_LOW:2003},E0=new class{markSubscribeStart(e,t){performance.mark("agora-web-sdk/".concat(e,"/subscribe-").concat(t))}markPublishStart(e,t){performance.mark("agora-web-sdk/".concat(e,"/publish-").concat(t))}measureFromSubscribeStart(e,t){const n=performance.getEntriesByName("agora-web-sdk/".concat(e,"/subscribe-").concat(t));if(n.length>0){const e=n[n.length-1];return Math.round(performance.now()-e.startTime)}return 0}measureFromPublishStart(e,t){const n=performance.getEntriesByName("agora-web-sdk/".concat(e,"/publish-").concat(t));if(n.length>0){const e=n[n.length-1];return Math.round(performance.now()-e.startTime)}return 0}};var y0=gg(g_.Object.getOwnPropertySymbols),v0=jy,b0=ov.indexOf,S0=Yv,T0=Vg([].indexOf),R0=!!T0&&1/T0([1],1,-0)<0;v0({target:"Array",proto:!0,forced:R0||!S0("indexOf")},{indexOf:function(e){var t=arguments.length>1?arguments[1]:void 0;return R0?T0(this,e,t)||0:b0(this,e,t)}});var C0=cv("Array").indexOf,w0=Rg,I0=C0,A0=Array.prototype,O0=gg((function(e){var t=e.indexOf;return e===A0||w0(A0,e)&&t===A0.indexOf?I0:t}));function x0(e){if(Array.isArray(e))return e.map((e=>e));if(!N0(e))return e;const t={};for(const n in e){const r=e[n];N0(r)||Array.isArray(r)?t[n]=x0(r):t[n]=r}return t}function N0(e){return!("object"!=typeof e||Array.isArray(e)||!e)}class P0{constructor(e){SU(this,"input",[]),SU(this,"size",void 0),this.size=e}add(e){this.input.push(e),this.input.length>this.size&&this.input.splice(0,1)}diffMean(){return 0===this.input.length?0:(this.input[this.input.length-1]-this.input[0])/this.input.length}}const D0={address:"unknown",candidateType:"unknown",id:"unknown",port:0,priority:0,protocol:"unknown",type:"unknown"},L0={timestamp:0,bitrate:{actualEncoded:0,transmit:0},sendPacketLossRate:0,recvPacketLossRate:0,videoRecv:[],videoSend:[],audioRecv:[],audioSend:[],selectedCandidatePair:{id:"unknown",localCandidate:D0,remoteCandidate:D0}},k0={firsCount:0,nacksCount:0,plisCount:0,framesDecodeCount:0,framesDecodeInterval:0,framesDecodeFreezeTime:0,decodeFrameRate:0,bytes:0,packetsLost:0,packetLostRate:0,packets:0,ssrc:0,qpSumPerFrame:0,framesDroppedCount:0,outputFrameRate:0},M0={firsCount:0,nacksCount:0,plisCount:0,frameCount:0,bytes:0,packets:0,packetsLost:0,packetLostRate:0,ssrc:0,rttMs:0,jitterMs:0,qpSumPerFrame:0},U0={bytes:0,packets:0,packetsLost:0,packetLostRate:0,ssrc:0,rttMs:0,jitterMs:0},V0={jitterBufferMs:0,jitterMs:0,bytes:0,packetsLost:0,packetLostRate:0,packetsDiscarded:0,packets:0,ssrc:0,receivedFrames:0,droppedFrames:0,concealedSamples:0};function F0(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function j0(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F0(Object(n),!0).forEach((function(t){SU(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F0(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class B0{constructor(e,t){SU(this,"onFirstVideoReceived",void 0),SU(this,"onFirstVideoDecoded",void 0),SU(this,"onFirstAudioReceived",void 0),SU(this,"onFirstVideoDecodedTimeout",void 0),SU(this,"onFirstAudioDecoded",void 0),SU(this,"onSelectedLocalCandidateChanged",void 0),SU(this,"onSelectedRemoteCandidateChanged",void 0),SU(this,"videoIsReady",!1),SU(this,"videoIsReady2",{}),SU(this,"pc",void 0),SU(this,"options",void 0),SU(this,"intervalTimer",void 0),SU(this,"stats",x0(L0)),SU(this,"isFirstVideoReceived",{}),SU(this,"isFirstVideoDecoded",{}),SU(this,"isFirstAudioReceived",{}),SU(this,"isFirstAudioDecoded",{}),SU(this,"isFirstVideoDecodedTimeout",{}),SU(this,"lossRateWindowStats",[]),this.pc=e,this.options=t,this.intervalTimer=window.setInterval((async()=>{this.updateStats()}),this.options.updateInterval)}getStats(){return this.stats}getSelectedCandidatePair(){return new LO((e=>{e({local:j0({},D0),remote:j0({},D0)})}))}setVideoIsReady(e){this.videoIsReady=e}setVideoIsReady2(e,t){this.videoIsReady2[e]=t}getVideoIsReady(e){return this.videoIsReady2[e]||!1}setIsFirstAudioDecoded(e){}destroy(){window.clearInterval(this.intervalTimer),this.pc=void 0}calcLossRate(e){this.lossRateWindowStats.push(e),this.lossRateWindowStats.length>this.options.lossRateInterval&&this.lossRateWindowStats.splice(0,1);const t=this.lossRateWindowStats.length,n=["videoSend","audioSend","videoRecv","audioRecv"];let r=0,i=0,o=0,s=0;for(const a of n)e[a].forEach(((e,n)=>{if(!this.lossRateWindowStats[t-1][a][n]||!this.lossRateWindowStats[0][a][n])return;const c=this.lossRateWindowStats[t-1][a][n].packets-this.lossRateWindowStats[0][a][n].packets,d=this.lossRateWindowStats[t-1][a][n].packetsLost-this.lossRateWindowStats[0][a][n].packetsLost;"videoSend"===a||"audioSend"===a?(r+=c,o+=d):(i+=c,s+=d),Number.isNaN(c)||Number.isNaN(c)?e.packetLostRate=0:e.packetLostRate=c<=0||d<=0?0:d/(c+d)}));e.sendPacketLossRate=r<=0||o<=0?0:o/(r+o),e.recvPacketLossRate=i<=0||s<=0?0:s/(i+s)}}function G0(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function H0(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G0(Object(n),!0).forEach((function(t){SU(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G0(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class W0 extends B0{constructor(){super(...arguments),SU(this,"_stats",L0),SU(this,"lastDecodeVideoReceiverStats",new Map)}async updateStats(){const e=await this._getStats(),t=this.statsResponsesToObjects(e);this._stats=x0(L0);const n=t.filter((e=>"ssrc"===e.type));this.processSSRCStats(n);const r=t.find((e=>"VideoBwe"===e.type));r&&this.processBandwidthStats(r),this._stats.timestamp=Date.now(),this.calcLossRate(this._stats),this.stats=this._stats}processBandwidthStats(e){this._stats.bitrate={actualEncoded:Number(e.googActualEncBitrate),targetEncoded:Number(e.googTargetEncBitrate),retransmit:Number(e.googRetransmitBitrate),transmit:Number(e.googTransmitBitrate)},this._stats.sendBandwidth=Number(e.googAvailableSendBandwidth)}processSSRCStats(e){e.forEach((e=>{var t;const n=Fv(t=e.id).call(t,"send");switch("".concat(e.mediaType,"_").concat(n?"send":"recv")){case"video_send":{const t=x0(M0);t.codec=e.googCodecName,t.adaptionChangeReason="none",e.googCpuLimitedResolution&&(t.adaptionChangeReason="cpu"),e.googBandwidthLimitedResolution&&(t.adaptionChangeReason="bandwidth"),t.avgEncodeMs=Number(e.googAvgEncodeMs),t.inputFrame={width:Number(e.googFrameWidthInput)||Number(e.googFrameWidthSent),height:Number(e.googFrameHeightInput)||Number(e.googFrameHeightSent),frameRate:Number(e.googFrameRateInput)},t.sentFrame={width:Number(e.googFrameWidthSent),height:Number(e.googFrameHeightSent),frameRate:Number(e.googFrameRateInput)},t.firsCount=Number(e.googFirReceived),t.nacksCount=Number(e.googNacksReceived),t.plisCount=Number(e.googPlisReceived),t.frameCount=Number(e.framesEncoded),t.bytes=Number(e.bytesSent),t.packets=Number(e.packetsSent),t.packetsLost=Number(e.packetsLost),t.ssrc=Number(e.ssrc),t.rttMs=Number(e.googRtt||0),this._stats.videoSend.push(t),this._stats.rtt=t.rttMs;break}case"video_recv":{const t=x0(k0),n=this.lastDecodeVideoReceiverStats.get(Number(e.ssrc));if(t.codec=e.googCodecName,t.targetDelayMs=Number(e.googTargetDelayMs),t.renderDelayMs=Number(e.googRenderDelayMs),t.currentDelayMs=Number(e.googCurrentDelayMs),t.minPlayoutDelayMs=Number(e.googMinPlayoutDelayMs),t.decodeMs=Number(e.googDecodeMs),t.maxDecodeMs=Number(e.googMaxDecodeMs),t.receivedFrame={width:Number(e.googFrameWidthReceived),height:Number(e.googFrameHeightReceived),frameRate:Number(e.googFrameRateReceived)},t.decodedFrame={width:Number(e.googFrameWidthReceived),height:Number(e.googFrameHeightReceived),frameRate:Number(e.googFrameRateDecoded)},t.decodeFrameRate=Number(e.googFrameRateDecoded),t.outputFrame={width:Number(e.googFrameWidthReceived),height:Number(e.googFrameHeightReceived),frameRate:Number(e.googFrameRateOutput)},t.jitterBufferMs=Number(e.googJitterBufferMs),t.firsCount=Number(e.googFirsSent),t.nacksCount=Number(e.googNacksSent),t.plisCount=Number(e.googPlisSent),t.framesDecodeCount=Number(e.framesDecoded),t.bytes=Number(e.bytesReceived),t.packets=Number(e.packetsReceived),t.packetsLost=Number(e.packetsLost),t.ssrc=Number(e.ssrc),t.packets>0&&!this.isFirstVideoReceived[t.ssrc]&&(this.onFirstVideoReceived&&this.onFirstVideoReceived(t.ssrc),this.isFirstVideoReceived[t.ssrc]=!0),t.framesDecodeCount>0&&!this.isFirstVideoDecoded[t.ssrc]&&(this.onFirstVideoDecoded&&this.onFirstVideoDecoded(t.ssrc,t.decodedFrame.width,t.decodedFrame.height),this.isFirstVideoDecoded[t.ssrc]=!0),n){const r=n.stats,i=Date.now()-n.lts;t.framesDecodeFreezeTime=r.framesDecodeFreezeTime,t.framesDecodeInterval=r.framesDecodeInterval,t.framesDecodeCount>r.framesDecodeCount&&this.isFirstVideoDecoded[t.ssrc]?(n.lts=Date.now(),t.framesDecodeInterval=i,t.framesDecodeInterval>=this.options.freezeRateLimit&&(this.getVideoIsReady(parseInt(e.ssrc,10))?t.framesDecodeFreezeTime+=t.framesDecodeInterval:this.setVideoIsReady2(parseInt(e.ssrc,10),!0))):t.framesDecodeCount<n.stats.framesDecodeCount&&(t.framesDecodeInterval=0)}this.lastDecodeVideoReceiverStats.set(t.ssrc,{stats:H0({},t),lts:Date.now()}),this._stats.videoRecv.push(t);break}case"audio_recv":{const t=x0(V0);t.codec=e.googCodecName,t.outputLevel=Math.abs(Number(e.audioOutputLevel))/32767,t.decodingCNG=Number(e.googDecodingCNG),t.decodingCTN=Number(e.googDecodingCTN),t.decodingCTSG=Number(e.googDecodingCTSG),t.decodingNormal=Number(e.googDecodingNormal),t.decodingPLC=Number(e.googDecodingPLC),t.decodingPLCCNG=Number(e.googDecodingPLCCNG),t.expandRate=Number(e.googExpandRate),t.accelerateRate=Number(e.googAccelerateRate),t.preemptiveExpandRate=Number(e.googPreemptiveExpandRate),t.secondaryDecodedRate=Number(e.googSecondaryDecodedRate),t.speechExpandRate=Number(e.googSpeechExpandRate),t.preferredJitterBufferMs=Number(e.googPreferredJitterBufferMs),t.jitterBufferMs=Number(e.googJitterBufferMs),t.jitterMs=Number(e.googJitterReceived),t.bytes=Number(e.bytesReceived),t.packets=Number(e.packetsReceived),t.packetsLost=Number(e.packetsLost),t.ssrc=Number(e.ssrc),t.receivedFrames=Number(e.googDecodingCTN)||Number(e.packetsReceived),t.droppedFrames=Number(e.googDecodingPLC)+Number(e.googDecodingPLCCNG)||Number(e.packetsLost),t.receivedFrames>0&&!this.isFirstAudioReceived[t.ssrc]&&(this.onFirstAudioReceived&&this.onFirstAudioReceived(t.ssrc),this.isFirstAudioReceived[t.ssrc]=!0),t.decodingNormal>0&&!this.isFirstAudioDecoded[t.ssrc]&&(this.onFirstAudioDecoded&&this.onFirstAudioDecoded(t.ssrc),this.isFirstAudioDecoded[t.ssrc]=!0),this._stats.audioRecv.push(t);break}case"audio_send":{const t=x0(U0);t.codec=e.googCodecName,t.inputLevel=Math.abs(Number(e.audioInputLevel))/32767,t.aecReturnLoss=Number(e.googEchoCancellationReturnLoss||0),t.aecReturnLossEnhancement=Number(e.googEchoCancellationReturnLossEnhancement||0),t.residualEchoLikelihood=Number(e.googResidualEchoLikelihood||0),t.residualEchoLikelihoodRecentMax=Number(e.googResidualEchoLikelihoodRecentMax||0),t.bytes=Number(e.bytesSent),t.packets=Number(e.packetsSent),t.packetsLost=Number(e.packetsLost),t.ssrc=Number(e.ssrc),t.rttMs=Number(e.googRtt||0),this._stats.rtt=t.rttMs,this._stats.audioSend.push(t);break}}}))}_getStats(){return new LO(((e,t)=>{this.pc.getStats(e,t)}))}statsResponsesToObjects(e){const t=[];return e.result().forEach((e=>{const n={id:e.id,timestamp:e.timestamp.valueOf().toString(),type:e.type};e.names().forEach((t=>{n[t]=e.stat(t)})),t.push(n)})),t}}function K0(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function z0(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K0(Object(n),!0).forEach((function(t){SU(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K0(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class q0 extends B0{constructor(){super(...arguments),SU(this,"_stats",L0),SU(this,"report",void 0),SU(this,"lastDecodeVideoReceiverStats",new Map),SU(this,"lastVideoFramesRecv",new Map),SU(this,"lastVideoFramesSent",new Map),SU(this,"lastVideoFramesDecode",new Map),SU(this,"lastVideoFramesOutput",new Map),SU(this,"lastVideoJBDelay",new Map),SU(this,"lastAudioJBDelay",new Map),SU(this,"mediaBytesSent",new Map),SU(this,"mediaBytesRetransmit",new Map),SU(this,"mediaBytesTargetEncode",new Map),SU(this,"lastEncoderMs",new Map)}async updateStats(){this.report=await this.pc.getStats(),this._stats=x0(L0),this.report.forEach((e=>{switch(e.type){case XW.OUTBOUND:case XW.INBOUND:{const t=e.mediaType||e.kind,n=!t&&"frameWidth"in e,r=!t&&!("frameWidth"in e);e.type===XW.OUTBOUND?"audio"===t||r?this.processAudioOutboundStats(e):("video"===t||n)&&this.processVideoOutboundStats(e):e.type===XW.INBOUND&&("audio"===t||r?this.processAudioInboundStats(e):("video"===t||n)&&this.processVideoInboundStats(e));break}case XW.TRANSPORT:{const t=this.report.get(e.selectedCandidatePairId);t&&this.processCandidatePairStats(t);break}case XW.CANDIDATE_PAIR:e.selected&&this.processCandidatePairStats(e)}})),this.updateSendBitrate(),this._stats.timestamp=Date.now(),this.calcLossRate(this._stats),this.stats=this._stats}async getSelectedCandidatePair(){const e=await this.pc.getStats(),t={local:z0({},D0),remote:z0({},D0)};return e.forEach((n=>{let r;if(n.type===XW.TRANSPORT&&(r=e.get(n.selectedCandidatePairId)),n.type===XW.CANDIDATE_PAIR&&n.selected&&(r=n),r){const n=(e,t)=>{e.type=t.type,e.id=t.id,t.address&&(e.address=t.address),t.candidateType&&(e.candidateType=t.candidateType),t.port&&(e.port=t.port),t.priority&&(e.priority=t.priority),t.protocol&&(e.protocol=t.protocol),t.relayProtocol&&(e.relayProtocol=t.relayProtocol)};if(r.localCandidateId){const i=e.get(r.localCandidateId);i&&n(t.local,i)}if(r.remoteCandidateId){const i=e.get(r.remoteCandidateId);i&&n(t.remote,i)}}})),t}processCandidatePairStats(e){if(this._stats.sendBandwidth=e.availableOutgoingBitrate||0,e.currentRoundTripTime&&(this._stats.rtt=1e3*e.currentRoundTripTime),this._stats.videoSend.forEach((t=>{e.currentRoundTripTime&&(t.rttMs=1e3*e.currentRoundTripTime)})),this._stats.audioSend.forEach((t=>{e.currentRoundTripTime&&(t.rttMs=1e3*e.currentRoundTripTime)})),this._stats.selectedCandidatePair.id=e.id,e.localCandidateId){const t=this.report.get(e.localCandidateId);t&&this.processCandidateStats(t)}if(e.remoteCandidateId){const t=this.report.get(e.remoteCandidateId);t&&this.processCandidateStats(t)}}processCandidateStats(e){let t;e.type===XW.LOCAL_CANDIDATE&&(t=this._stats.selectedCandidatePair.localCandidate),e.type===XW.REMOTE_CANDIDATE&&(t=this._stats.selectedCandidatePair.remoteCandidate),t&&(t.type=e.type,t.id=e.id,e.address&&(t.address=e.address),e.candidateType&&(t.candidateType=e.candidateType),e.port&&(t.port=e.port),e.priority&&(t.priority=e.priority),e.protocol&&(t.protocol=e.protocol),e.relayProtocol&&(t.relayProtocol=e.relayProtocol),e.type===XW.LOCAL_CANDIDATE&&this.stats.selectedCandidatePair.localCandidate.id!==t.id&&this.onSelectedLocalCandidateChanged&&this.onSelectedLocalCandidateChanged(z0({},t),z0({},this.stats.selectedCandidatePair.localCandidate)),e.type===XW.REMOTE_CANDIDATE&&this.stats.selectedCandidatePair.remoteCandidate.id!==t.id&&this.onSelectedRemoteCandidateChanged&&this.onSelectedRemoteCandidateChanged(z0({},t),z0({},this.stats.selectedCandidatePair.remoteCandidate)))}processAudioInboundStats(e){let t=this._stats.audioRecv.find((t=>t.ssrc===e.ssrc));t||(t=x0(V0),this._stats.audioRecv.push(t)),t.ssrc=e.ssrc,t.packets=e.packetsReceived,t.packetsLost=e.packetsLost,t.packetsDiscarded=e.packetsDiscarded,t.bytes=e.bytesReceived,t.jitterMs=1e3*e.jitter,this.processAudioTrackReceiverStats(e,e.trackId,t),e.codecId&&(t.codec=this.getCodecFromCodecStats(e.codecId)),t.receivedFrames||(t.receivedFrames=e.packetsReceived),t.droppedFrames||(t.droppedFrames=e.packetsLost),t.receivedFrames>0&&!this.isFirstAudioReceived[t.ssrc]&&(this.onFirstAudioReceived&&this.onFirstAudioReceived(t.ssrc),this.isFirstAudioReceived[t.ssrc]=!0),t.outputLevel&&t.outputLevel>0&&!this.isFirstAudioDecoded[t.ssrc]&&(this.onFirstAudioDecoded&&this.onFirstAudioDecoded(t.ssrc),this.isFirstAudioDecoded[t.ssrc]=!0),"number"==typeof e.concealedSamples&&(t.concealedSamples=e.concealedSamples)}processVideoInboundStats(e){let t=this._stats.videoRecv.find((t=>t.ssrc===e.ssrc));t||(t=x0(k0),this._stats.videoRecv.push(t)),t.ssrc=e.ssrc,t.packets=e.packetsReceived,t.packetsLost=e.packetsLost,t.bytes=e.bytesReceived,t.firsCount=e.firCount,t.nacksCount=e.nackCount,t.plisCount=e.pliCount,t.framesDecodeCount=e.framesDecoded,t.framesDroppedCount=e.framesDropped,t.totalInterFrameDelay=e.totalInterFrameDelay,t.totalSquaredInterFrameDelay=e.totalSquaredInterFrameDelay,t.totalFreezesDuration=e.totalFreezesDuration;const n=this.lastDecodeVideoReceiverStats.get(t.ssrc),r=this.lastVideoFramesDecode.get(t.ssrc),i=this.lastVideoFramesOutput.get(t.ssrc),o=Date.now();if(t.framesDecodeCount>0&&!this.isFirstVideoDecoded[t.ssrc]){const e=t.decodedFrame?t.decodedFrame.width:0,n=t.decodedFrame?t.decodedFrame.height:0;this.onFirstVideoDecoded&&this.onFirstVideoDecoded(t.ssrc,e,n),this.isFirstVideoDecoded[t.ssrc]=!0}if(n){const r=n.stats,i=o-n.lts;t.framesDecodeFreezeTime=r.framesDecodeFreezeTime,t.framesDecodeInterval=r.framesDecodeInterval,!this.isFirstVideoDecoded[t.ssrc]&&i>this.options.firstVideoDecodedTimeout&&!this.isFirstVideoDecodedTimeout[t.ssrc]&&(this.onFirstVideoDecodedTimeout&&this.onFirstVideoDecodedTimeout(t.ssrc),this.isFirstVideoDecodedTimeout[t.ssrc]=!0),t.framesDecodeCount>r.framesDecodeCount&&this.isFirstVideoDecoded[t.ssrc]?(n.lts=Date.now(),t.framesDecodeInterval=i,t.framesDecodeInterval>=this.options.freezeRateLimit&&(this.getVideoIsReady(parseInt(e.ssrc))?t.framesDecodeFreezeTime+=t.framesDecodeInterval:this.setVideoIsReady2(parseInt(e.ssrc,10),!0))):t.framesDecodeCount<r.framesDecodeCount&&(t.framesDecodeInterval=0),e.framesDecoded&&e.qpSum&&(n.stats.framesDecodeCount>e.framesDecoded?t.qpSumPerFrame=e.qpSum/e.framesDecoded:t.qpSumPerFrame=(e.qpSum-n.qpSum)/(e.framesDecoded-n.stats.framesDecodeCount))}r&&o-r.lts>=800?(t.decodeFrameRate=Math.round((t.framesDecodeCount-r.count)/((o-r.lts)/1e3)),this.lastVideoFramesDecode.set(t.ssrc,{count:t.framesDecodeCount,lts:o,rate:t.decodeFrameRate})):r?t.decodeFrameRate=r.rate:this.lastVideoFramesDecode.set(t.ssrc,{count:t.framesDecodeCount,lts:o,rate:0}),t.framesDroppedCount&&e.framesReceived&&(i&&o-i.lts>=800?(t.outputFrameRate=Math.round((e.framesReceived-t.framesDroppedCount-i.count)/((o-i.lts)/1e3)),this.lastVideoFramesOutput.set(t.ssrc,{count:e.framesReceived-t.framesDroppedCount,lts:o,rate:Math.max(t.outputFrameRate,0)})):i?t.outputFrameRate=i.rate:this.lastVideoFramesOutput.set(t.ssrc,{count:e.framesReceived-t.framesDroppedCount,lts:o,rate:0})),e.totalDecodeTime&&(t.decodeMs=1e3*e.totalDecodeTime),this.processVideoTrackReceiverStats(e,e.trackId,t),e.codecId&&(t.codec=this.getCodecFromCodecStats(e.codecId)),e.framerateMean&&(t.framesRateFirefox=e.framerateMean),t.packets>0&&!this.isFirstVideoReceived[t.ssrc]&&(this.onFirstVideoReceived&&this.onFirstVideoReceived(t.ssrc),this.isFirstVideoReceived[t.ssrc]=!0),this.lastDecodeVideoReceiverStats.set(t.ssrc,{stats:z0({},t),lts:n?n.lts:Date.now(),qpSum:e.qpSum})}processVideoOutboundStats(e){let t=this._stats.videoSend.find((t=>t.ssrc===e.ssrc));t||(t=x0(M0),this._stats.videoSend.push(t));const n=this.mediaBytesSent.get(e.ssrc);if(n)n.add(e.bytesSent);else{const t=new P0(10);t.add(e.bytesSent),this.mediaBytesSent.set(e.ssrc,t)}if(void 0!==e.retransmittedBytesSent){const t=this.mediaBytesRetransmit.get(e.ssrc);if(t)t.add(e.retransmittedBytesSent);else{const t=new P0(10);t.add(e.retransmittedBytesSent),this.mediaBytesRetransmit.set(e.ssrc,t)}}if(e.totalEncodedBytesTarget){const t=this.mediaBytesTargetEncode.get(e.ssrc);if(t)t.add(e.totalEncodedBytesTarget);else{const t=new P0(10);t.add(e.totalEncodedBytesTarget),this.mediaBytesTargetEncode.set(e.ssrc,t)}}if(t.ssrc=e.ssrc,t.bytes=e.bytesSent,t.packets=e.packetsSent,t.firsCount=e.firCount,t.nacksCount=e.nackCount,t.plisCount=e.pliCount,t.frameCount=e.framesEncoded,t.adaptionChangeReason=e.qualityLimitationReason,t.scalabilityMode=e.scalabilityMode,e.totalEncodeTime&&e.framesEncoded){const n=this.lastEncoderMs.get(e.ssrc);if(!n||n.lastFrameCount>e.framesEncoded)t.avgEncodeMs=1e3*e.totalEncodeTime/e.framesEncoded;else{const r=e.framesEncoded-n.lastFrameCount,i=e.totalEncodeTime-n.lastEncoderTime;t.avgEncodeMs=1e3*i/r}}if(e.framesEncoded&&e.qpSum){const n=this.lastEncoderMs.get(e.ssrc);!n||n.lastFrameCount>e.framesEncoded?t.qpSumPerFrame=e.qpSum/e.framesEncoded:t.qpSumPerFrame=(e.qpSum-n.lastQpSum)/(e.framesEncoded-n.lastFrameCount)}if(this.lastEncoderMs.set(e.ssrc,{lastFrameCount:e.framesEncoded,lastEncoderTime:e.totalEncodeTime,lastQpSum:e.qpSum,lts:Date.now()}),e.codecId&&(t.codec=this.getCodecFromCodecStats(e.codecId)),e.mediaSourceId&&this.processVideoMediaSource(e.mediaSourceId,t),this.processVideoTrackSenderStats(e,e.trackId,t),e.remoteId)this.processRemoteInboundStats(e.remoteId,t);else{const n=this.findRemoteStatsId(e.ssrc,XW.REMOTE_INBOUND);n&&this.processRemoteInboundStats(n,t)}}processAudioOutboundStats(e){let t=this._stats.audioSend.find((t=>t.ssrc===e.ssrc));if(t||(t=x0(U0),this._stats.audioSend.push(t)),t.ssrc=e.ssrc,t.packets=e.packetsSent,t.bytes=e.bytesSent,e.mediaSourceId&&this.processAudioMediaSource(e.mediaSourceId,t),e.codecId&&(t.codec=this.getCodecFromCodecStats(e.codecId)),this.processAudioTrackSenderStats(e,e.trackId,t),e.remoteId)this.processRemoteInboundStats(e.remoteId,t);else{const n=this.findRemoteStatsId(e.ssrc,XW.REMOTE_INBOUND);n&&this.processRemoteInboundStats(n,t)}}findRemoteStatsId(e,t){var n;const r=Array.from(Fz(n=this.report).call(n)).find((n=>n.type===t&&n.ssrc===e));return r?r.id:null}processVideoMediaSource(e,t){const n=this.report.get(e);n&&n.width&&n.height&&n.framesPerSecond&&(t.inputFrame={width:n.width,height:n.height,frameRate:n.framesPerSecond})}processAudioMediaSource(e,t){const n=this.report.get(e);n&&(t.inputLevel=n.audioLevel)}processVideoTrackSenderStats(e,t,n){var r,i,o,s;const a=t?this.report.get(t):void 0,c=null!==(r=null==a?void 0:a.framesSent)&&void 0!==r?r:e.framesSent;if("number"!=typeof c)return;let d=null!==(i=null==a?void 0:a.frameWidth)&&void 0!==i?i:e.frameWidth,l=null!==(o=null==a?void 0:a.frameHeight)&&void 0!==o?o:e.frameHeight,h=null!==(s=null==a?void 0:a.framesPerSecond)&&void 0!==s?s:e.framesPerSecond;if("number"==typeof d&&"number"==typeof l||(d=0,l=0),null==h){const e=Date.now(),t=this.lastVideoFramesSent.get(n.ssrc);t&&e-t.lts>=800?(h=Math.round((c-t.count)/((e-t.lts)/1e3)),this.lastVideoFramesSent.set(n.ssrc,{count:c,lts:e,rate:h})):t?h=t.rate:this.lastVideoFramesSent.set(n.ssrc,{count:c,lts:e,rate:0})}n.sentFrame={width:d,height:l,frameRate:Math.max(0,h)}}processVideoTrackReceiverStats(e,t,n){var r,i,o,s,a;const c=t?this.report.get(t):void 0,d=null!==(r=null==c?void 0:c.framesReceived)&&void 0!==r?r:e.framesReceived,l=null!==(i=null==c?void 0:c.frameWidth)&&void 0!==i?i:e.frameWidth,h=null!==(o=null==c?void 0:c.frameHeight)&&void 0!==o?o:e.frameHeight,u=null!==(s=null==c?void 0:c.jitterBufferDelay)&&void 0!==s?s:e.jitterBufferDelay,p=null!==(a=null==c?void 0:c.jitterBufferEmittedCount)&&void 0!==a?a:e.jitterBufferEmittedCount;if("number"==typeof d){const e=this.lastVideoFramesRecv.get(n.ssrc),t=Date.now();n.framesReceivedCount=d;let r=0;e&&t-e.lts>=800?(r=Math.round((d-e.count)/((t-e.lts)/1e3)),this.lastVideoFramesRecv.set(n.ssrc,{count:d,lts:t,rate:r})):e?r=e.rate:this.lastVideoFramesRecv.set(n.ssrc,{count:d,lts:t,rate:0}),n.receivedFrame={width:l||0,height:h||0,frameRate:r||0},n.decodedFrame={width:l||0,height:h||0,frameRate:n.decodeFrameRate||0},n.outputFrame={width:l||0,height:h||0,frameRate:n.outputFrameRate||n.decodeFrameRate||0}}if(u&&p){const e=this.lastVideoJBDelay.get(n.ssrc)||{jitterBufferDelay:0,jitterBufferEmittedCount:0,jitterBufferMs:0};let t=e.jitterBufferMs;const r=p-e.jitterBufferEmittedCount;r>0&&(t=1e3*(u-e.jitterBufferDelay)/r),n.jitterBufferMs=t,n.currentDelayMs=Math.round(t),this.lastVideoJBDelay.set(n.ssrc,{jitterBufferDelay:u,jitterBufferEmittedCount:p,jitterBufferMs:n.currentDelayMs})}}processAudioTrackSenderStats(e,t,n){var r,i,o,s;const a=t?this.report.get(t):void 0,c=null!==(r=null!==(i=null==a?void 0:a.echoReturnLoss)&&void 0!==i?i:e.echoReturnLoss)&&void 0!==r?r:0,d=null!==(o=null!==(s=null==a?void 0:a.echoReturnLossEnhancement)&&void 0!==s?s:e.echoReturnLossEnhancement)&&void 0!==o?o:0;n.aecReturnLoss=c,n.aecReturnLossEnhancement=d}processAudioTrackReceiverStats(e,t,n){var r,i,o,s,a,c,d;const l=t?this.report.get(t):void 0,h=null!==(r=null==l?void 0:l.removedSamplesForAcceleration)&&void 0!==r?r:e.removedSamplesForAcceleration,u=null!==(i=null==l?void 0:l.totalSamplesReceived)&&void 0!==i?i:e.totalSamplesReceived,p=null!==(o=null==l?void 0:l.jitterBufferDelay)&&void 0!==o?o:e.jitterBufferDelay,f=null!==(s=null==l?void 0:l.jitterBufferEmittedCount)&&void 0!==s?s:e.jitterBufferEmittedCount,m=null!==(a=null==l?void 0:l.audioLevel)&&void 0!==a?a:null==e?void 0:e.audioLevel,g=null!==(c=null==l?void 0:l.totalSamplesDuration)&&void 0!==c?c:null==e?void 0:e.totalSamplesDuration,_=null!==(d=null==l?void 0:l.concealedSamples)&&void 0!==d?d:e.concealedSamples;if(h&&u&&(n.accelerateRate=h/u),p&&f){const e=this.lastAudioJBDelay.get(n.ssrc)||{jitterBufferDelay:0,jitterBufferEmittedCount:0,jitterBufferMs:0};let t=e.jitterBufferMs;const r=f-e.jitterBufferEmittedCount;r>0&&(t=1e3*(p-e.jitterBufferDelay)/r),n.jitterBufferMs=Math.round(t),this.lastAudioJBDelay.set(n.ssrc,{jitterBufferDelay:p,jitterBufferEmittedCount:f,jitterBufferMs:n.jitterBufferMs})}n.outputLevel=m;let E=1920;g&&u&&(E=u/g/50,n.receivedFrames=Math.round(u/E)),_&&(n.droppedFrames=Math.round(_/E))}processRemoteInboundStats(e,t){const n=this.report.get(e);n&&(t.packetsLost=n.packetsLost,n.roundTripTime&&(t.rttMs=1e3*n.roundTripTime),n.jitter&&(t.jitterMs=1e3*n.jitter),n.timestamp&&(t.timestamp=n.timestamp))}getCodecFromCodecStats(e){const t=this.report.get(e);if(!t)return"";const n=t.mimeType.match(/\/(.*)$/);return n&&n[1]?n[1]:""}updateSendBitrate(){let e=0,t=null,n=null;this.mediaBytesSent.forEach((t=>{e+=t.diffMean()})),this.mediaBytesRetransmit.forEach((e=>{t=null===t?e.diffMean():t+e.diffMean()})),this.mediaBytesTargetEncode.forEach((e=>{n=null===n?e.diffMean():n+e.diffMean()}));const r=null!==t?e-t:e;this._stats.bitrate={actualEncoded:8*r/(this.options.updateInterval/1e3),transmit:8*e/(this.options.updateInterval/1e3)},null!==t&&(this._stats.bitrate.retransmit=8*t/(this.options.updateInterval/1e3)),null!==n&&(this._stats.bitrate.targetEncoded=8*n/(this.options.updateInterval/1e3))}}class Y0 extends B0{updateStats(){return LO.resolve()}}function J0(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1e4;const o=function(){const e=navigator.userAgent.toLocaleLowerCase().match(/chrome\/[\d]*/i);return e&&e[0]?Number(e[0].split("/")[1]):null}();return o?o<76?new W0(e,{updateInterval:t,lossRateInterval:n,freezeRateLimit:r,firstVideoDecodedTimeout:i}):new q0(e,{updateInterval:t,lossRateInterval:n,freezeRateLimit:r,firstVideoDecodedTimeout:i}):function(e){if(!window.RTCStatsReport)return!1;const t=e.getStats();return!!(t instanceof LO||function(e){return!!e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof e.then}(t))}(e)?new q0(e,{updateInterval:t,lossRateInterval:n,freezeRateLimit:r,firstVideoDecodedTimeout:i}):new Y0(e,{updateInterval:t,lossRateInterval:n,freezeRateLimit:r,firstVideoDecodedTimeout:i})}let X0=class{get localCapabilities(){return VG(this._localCapabilities)}get rtpCapabilities(){return VG(this._rtpCapabilities)}get candidates(){return VG(this._candidates)}get iceParameters(){return VG(this._iceParameters)}get dtlsParameters(){return VG(this._dtlsParameters)}constructor(e){SU(this,"sessionDesc",void 0),SU(this,"_localCapabilities",void 0),SU(this,"_rtpCapabilities",void 0),SU(this,"_candidates",void 0),SU(this,"_iceParameters",void 0),SU(this,"_dtlsParameters",void 0),SU(this,"setup",void 0),SU(this,"currentMidIndex",void 0),SU(this,"cname","o/i14u9pJrxRKAsu"),SU(this,"firefoxSsrcMidMap",new Map),e=VG(e);const{remoteIceParameters:t,remoteDtlsParameters:n,candidates:r,remoteRTPCapabilities:i,localCapabilities:o,direction:s,setup:a,videoCodec:c,audioCodec:d}=e;let l;this.setup=a,l=s===aK.RECEIVE_ONLY?sZ.parse("v=0\no=- 0 0 IN IP4 127.0.0.1\ns=AgoraGateway\nt=0 0\na=group:BUNDLE 0 1\na=msid-semantic: WMS\na=extmap-allow-mixed\nm=video 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendonly\na=rtcp-mux\na=rtcp-rsize\na=mid:0\nm=audio 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendonly\na=rtcp-mux\na=rtcp-rsize\na=mid:1\n"):sZ.parse("v=0\no=- 0 0 IN IP4 127.0.0.1\ns=AgoraGateway\nt=0 0\na=group:BUNDLE 0 1\na=msid-semantic: WMS\na=extmap-allow-mixed\nm=video 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=recvonly\na=rtcp-mux\na=rtcp-rsize\na=mid:0\nm=audio 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=recvonly\na=rtcp-mux\na=rtcp-rsize\na=mid:1\n"),this._rtpCapabilities=i,this._candidates=r,this._iceParameters=t,this._dtlsParameters=n,this._localCapabilities=o;const h=s===aK.RECEIVE_ONLY?this.rtpCapabilities.send:this.rtpCapabilities.recv,u=s===aK.RECEIVE_ONLY?this._localCapabilities.recv:this._localCapabilities.send,p=s===aK.RECEIVE_ONLY?i.send.videoCodecs:IZ(kK.VIDEO,h,u,c),f=s===aK.RECEIVE_ONLY?i.send.audioCodecs:IZ(kK.AUDIO,h,u,d);for(const e of l.mediaDescriptions)e.attributes.iceUfrag=t.iceUfrag,e.attributes.icePwd=t.icePwd,e.attributes.fingerprints=n.fingerprints,e.attributes.candidates=r,e.attributes.setup=this.setup,"application"===e.media.mediaType&&(e.attributes.sctpPort="5000"),"video"===e.media.mediaType&&(e.media.fmts=p.map((e=>e.payloadType.toString(10))),e.attributes.payloads=p,e.attributes.extmaps=h.videoExtensions),"audio"===e.media.mediaType&&(e.media.fmts=f.map((e=>e.payloadType.toString(10))),e.attributes.payloads=f,e.attributes.extmaps=h.audioExtensions,wZ(e));this.sessionDesc=l,this.currentMidIndex=l.mediaDescriptions.length-1}toString(){return sZ.print(this.sessionDesc)}hasMid(e){return Array.isArray(e)?e.every((e=>this.hasMid(e))):this.sessionDesc.mediaDescriptions.some((t=>t.attributes.mid===e))}send(e,t,n,r,i){n=n.replace(/ /g,"-");const{ssrcs:o,ssrcGroups:s}=mZ(t,this.cname,AH("SYNC_GROUP")?n:void 0),a=this.findPreloadMediaDesc(o);if(a){if(xB()&&this.firefoxSsrcMidMap.set(o[0].ssrcId,a.attributes.mid),i&&(i.twcc||i.remb)){const e=this.sessionDesc.mediaDescriptions.indexOf(a);return this.sessionDesc.mediaDescriptions[e]=this.mungSendMediaDesc(a,i),{mid:a.attributes.mid,needExchangeSDP:!0}}return{mid:a.attributes.mid,needExchangeSDP:!1}}{const t=this.findAvailableMediaIndex(e,o,r);let n;return-1===t?(n=this.createOrRecycleSendMedia(e,o,s,"sendonly",r,i),this.updateBundleMids()):(n=VG(this.sessionDesc.mediaDescriptions[t]),n.attributes.direction="sendonly",n.attributes.ssrcs=o,n.attributes.ssrcGroups=s,this.sessionDesc.mediaDescriptions[t]=this.mungSendMediaDesc(n,i)),xB()&&this.firefoxSsrcMidMap.set(o[0].ssrcId,n.attributes.mid),{needExchangeSDP:!0,mid:n.attributes.mid}}}stopSending(e){const t=this.sessionDesc.mediaDescriptions.filter((t=>t.attributes.mid&&-1!==e.indexOf(t.attributes.mid)));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.stopSending.");t.forEach((e=>{e.attributes.ssrcs=[]})),this.updateBundleMids()}receive(e,t,n){const r=[];return e.forEach((e=>{const i=e._mediaStreamTrack.kind,o=this.findAvailableRecvMediaIndex(i);let s,a=!1;-1===o?(a=!0,s=this.createOrRecycleRecvMedia(e,[],"recvonly",t,n),this.updateBundleMids()):(s=VG(this.sessionDesc.mediaDescriptions[o]),s.attributes.direction="recvonly"),r.push({mid:s.attributes.mid,needCreateTransceiver:a})})),r}stopReceiving(e){const t=this.sessionDesc.mediaDescriptions.filter((t=>-1!==e.indexOf(t.attributes.mid)));if(t.length!==e.length)throw new Error("MediaDescriptions' length doesn't match mids's length when calling RemoteSDP.receive.");t.forEach((e=>{e.media.port="0",e.attributes.direction="inactive"})),this.updateBundleMids()}addRemoteCandidate(e){const{foundation:t,protocol:n,address:r,port:i,type:o,relatedAddress:s,relatedPort:a,priority:c}=new RTCIceCandidate(e),d={foundation:null!=t?t:"",componentId:"1",transport:null!=n?n:"",priority:c?c+"":"",connectionAddress:null!=r?r:"",port:i?i+"":"",type:o?o+"":"",relAddr:null!=s?s:"",relPort:a?a+"":"",extension:{}};this.candidates.some((e=>e.priority===d.priority&&e.connectionAddress===d.connectionAddress&&e.port===d.port))||(this._candidates.push(d),this.sessionDesc.mediaDescriptions.forEach((e=>{e.attributes.candidates=this.candidates})))}clearRemoteCandidate(){this._candidates=[],this.sessionDesc.mediaDescriptions[0].attributes.candidates=this._candidates}createOrRecycleRecvMedia(e,t,n,r,i){const o=e._mediaStreamTrack.kind,s=this.rtpCapabilities.recv,a=IZ(o,s,this.localCapabilities.send,o===kK.AUDIO?i:r),c=o===kK.VIDEO?s.videoExtensions:s.audioExtensions,d="".concat(++this.currentMidIndex);let l={media:{mediaType:o,port:"9",protos:["UDP","TLS","RTP","SAVPF"],fmts:a.map((e=>e.payloadType.toString(10)))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:[],extmaps:c,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:t,ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:a,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:n,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(d)}};l=this.mungRecvMediaDsec(l,e);const h=this.findFirstClosedMedia(o);if(h){const e=this.sessionDesc.mediaDescriptions.indexOf(h);this.sessionDesc.mediaDescriptions[e]=l}else this.sessionDesc.mediaDescriptions.push(l);return l}muteRemote(e){const t=this.sessionDesc.mediaDescriptions.filter((t=>Fv(e).call(e,t.attributes.mid||"")));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");t.forEach((e=>{e.attributes.direction="inactive"}))}unmuteRemote(e){const t=this.sessionDesc.mediaDescriptions.filter((t=>Fv(e).call(e,t.attributes.mid||"")));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");t.forEach((e=>{e.attributes.direction="recvonly"}))}findAvailableMediaIndex(e,t,n){return this.sessionDesc.mediaDescriptions.findIndex((r=>{const i=r.media.mediaType===e&&"0"!==r.media.port&&("sendonly"===r.attributes.direction||"sendrecv"===r.attributes.direction)&&0===r.attributes.ssrcs.length;if(xB()){if(i){const e=this.firefoxSsrcMidMap.get(t[0].ssrcId);return!(e||"0"!==r.attributes.mid&&"1"!==r.attributes.mid)||!(!e||e!==r.attributes.mid)}return!1}return i&&r.attributes.mid===n}))}findAvailableRecvMediaIndex(e){return this.sessionDesc.mediaDescriptions.findIndex((t=>{const n=t.media.mediaType===e&&"0"!==t.media.port&&("recvonly"===t.attributes.direction||"sendrecv"===t.attributes.direction);return"0"!==t.attributes.mid&&"1"!==t.attributes.mid&&n}))}predictReceivingMids(e){const t=[];for(let n=0;n<e;n++)t.push((this.currentMidIndex+n+1).toString(10));return t}restartICE(e){e=VG(e),this._iceParameters=e,this.sessionDesc.mediaDescriptions.forEach((t=>{t.attributes.iceUfrag=e.iceUfrag,t.attributes.icePwd=e.icePwd}))}createOrRecycleSendMedia(e,t,n,r,i,o){const s=this.rtpCapabilities.send,a=e===kK.VIDEO?s.videoCodecs:s.audioCodecs,c=e===kK.VIDEO?s.videoExtensions:s.audioExtensions;xB()&&(i="".concat(++this.currentMidIndex));let d={media:{mediaType:e,port:"9",protos:["UDP","TLS","RTP","SAVPF"],fmts:a.map((e=>e.payloadType.toString(10)))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:[],extmaps:c,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:t,ssrcGroups:n,rtcpFeedbackWildcards:[],payloads:a,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:r,rtcpMux:!0,rtcpRsize:!0,mid:i}};d=this.mungSendMediaDesc(d,o);const l=this.findFirstClosedMedia(e);if(l){const e=this.sessionDesc.mediaDescriptions.indexOf(l);this.sessionDesc.mediaDescriptions[e]=d}else this.sessionDesc.mediaDescriptions.push(d);return d}mungRecvMediaDsec(e,t,n){const r=VG(e);return _Z(r),gZ(r,t),EZ(r,t),yZ(r),vZ(r,n,this.localCapabilities.send),r}mungSendMediaDesc(e,t){const n=VG(e);return vZ(n,t,this.localCapabilities.recv),wZ(n),n}updateRecvMedia(e,t){const n=this.sessionDesc.mediaDescriptions.findIndex((t=>t.attributes.mid===e));if(-1!==n){const e=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[n],t);this.sessionDesc.mediaDescriptions[n]=e}}updateBundleMids(){this.sessionDesc.attributes.groups[0].identificationTag=this.sessionDesc.mediaDescriptions.filter((e=>"0"!==e.media.port)).map((e=>e.attributes.mid))}findPreloadMediaDesc(e){return this.sessionDesc.mediaDescriptions.find((t=>{var n;return(null===(n=t.attributes)||void 0===n||null===(n=n.ssrcs[0])||void 0===n?void 0:n.ssrcId)===e[0].ssrcId}))}findFirstClosedMedia(e){return this.sessionDesc.mediaDescriptions.find((t=>xB()?"0"===t.media.port&&t.media.mediaType===e:"0"===t.media.port))}};const Q0=["sdp"];var $0;function Z0(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function e1(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z0(Object(n),!0).forEach((function(t){SU(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z0(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}let t1=($0=class e extends DK{get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get dtlsTransportState(){var e,t;return null!==(e=null===(t=this.peerConnection.getReceivers()[0])||void 0===t||null===(t=t.transport)||void 0===t?void 0:t.state)&&void 0!==e?e:null}get localCodecs(){return[]}set isInRestartIce(e){this._isInRestartIce=e}get isInRestartIce(){return this._isInRestartIce}constructor(t,n,r){super(t,n),SU(this,"direction",void 0),SU(this,"name",void 0),SU(this,"store",void 0),SU(this,"spec",void 0),SU(this,"peerConnection",void 0),SU(this,"initialOffer",void 0),SU(this,"transport",void 0),SU(this,"statsFilter",void 0),SU(this,"localCandidateCount",0),SU(this,"_isInRestartIce",!1),SU(this,"mutex",new cH("P2PConnection-mutex")),SU(this,"onLocalCandidate",void 0),SU(this,"remoteSDP",void 0),SU(this,"pendingCandidates",[]),SU(this,"localCapabilities",void 0),SU(this,"isReady",!1),SU(this,"restartCnt",0),SU(this,"curTurnServerIndex",0),this.store=n,this.spec=t,this.peerConnection=new RTCPeerConnection(e.resolvePCConfiguration(t,n.p2pTransport),{optional:[{googDscp:!0}]}),this.direction=null!=r?r:aK.SEND_ONLY,this.name=this.direction===aK.SEND_ONLY?"sendP2PConnection":"recvP2PConnection",this.statsFilter=J0(this.peerConnection,AH("STATS_UPDATE_INTERVAL"),void 0,xB()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1}async establish(e){try{const t=await SZ();if(this.localCapabilities=CZ(t),e){const{sdp:t}=e,n=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=_W(e);for(r=0;r<o.length;r++)n=o[r],O0(t).call(t,n)>=0||(i[n]=e[n]);return i}(e,t);if(y0){var o=y0(e);for(r=0;r<o.length;r++)n=o[r],O0(t).call(t,n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,Q0),r=function(){const e={audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]},t=lZ(arguments.length>2?arguments[2]:void 0,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},"sendonly"),n={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},r={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},i={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]};if(RZ(t,e,"videoExtensions",n,r,i),RZ(t,e,"videoCodecs",n,r,i),RZ(t,e,"audioExtensions",n,r,i),RZ(t,e,"audioCodecs",n,r,i),AH("RAISE_H264_BASELINE_PRIORITY")){const e=i.videoCodecs.findIndex((e=>e.rtpMap&&"h264"===e.rtpMap.encodingName.toLocaleLowerCase()&&e.fmtp&&"42001f"===e.fmtp.parameters["profile-level-id"]));if(-1!==e){const t=i.videoCodecs.findIndex((e=>e.rtpMap&&"h264"===e.rtpMap.encodingName.toLocaleLowerCase()));if(t<e){KH.debug("raising H264 baseline profile priority");const n=i.videoCodecs[e];i.videoCodecs.splice(e,1),i.videoCodecs.splice(t,0,n)}-1!==t&&AH("FILTER_SEND_H264_BASELINE")&&(n.videoCodecs=n.videoCodecs.filter((e=>!(e.rtpMap&&"h264"===e.rtpMap.encodingName.toLocaleLowerCase()&&e.fmtp&&"42001f"!==e.fmtp.parameters["profile-level-id"]))))}}return{send:n,recv:r,sendrecv:i}}({},{},t);this.remoteSDP=new X0({remoteIceParameters:n.iceParameters,remoteDtlsParameters:n.dtlsParameters,candidates:[],remoteRTPCapabilities:r,localCapabilities:this.localCapabilities,direction:this.direction,setup:"actpass",videoCodec:this.store.codec,audioCodec:this.store.audioCodec}),await this.setRemoteDescription({type:"offer",sdp:this.remoteSDP.toString()}),this.isReady=!0;const i=await this.peerConnection.createAnswer();if(!i.sdp)throw new Error("Cannot get answer sdp when trying to establish PeerConnection.");const o=hZ(i.sdp);await this.peerConnection.setLocalDescription(i);const s=await TZ({},{},i.sdp);this.localCapabilities=CZ(s);const a=this.peerConnection.getTransceivers()[0];return null!=a&&a.receiver&&a.receiver.transport&&this.tryBindTransportEvents(a.receiver.transport),e1(e1({},o),{},{sdp:i.sdp})}{this.peerConnection.addTransceiver("video",{direction:"sendonly"}),this.peerConnection.addTransceiver("audio",{direction:"sendonly"});const e=await this.peerConnection.createOffer();if(!e.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");const t=hZ(e.sdp);return this.initialOffer=e,e1(e1({},t),{},{sdp:e.sdp})}}catch(e){throw new eG(ZB.GET_LOCAL_CONNECTION_PARAMS_FAILED,e.toString())}}async connect(e){try{if(!this.initialOffer)throw new Error("Cannot establish P2PConnection without initial offer.");await this.peerConnection.setLocalDescription(this.initialOffer);const{sdp:t,iceParameters:n,dtlsParameters:r}=e,i=await TZ({},{},t);this.remoteSDP=new X0({remoteIceParameters:n,remoteDtlsParameters:r,candidates:[],remoteRTPCapabilities:i,localCapabilities:this.localCapabilities,direction:this.direction,setup:"active",videoCodec:this.store.codec,audioCodec:this.store.audioCodec}),await this.setRemoteDescription({type:"answer",sdp:this.remoteSDP.toString()});const o=this.peerConnection.getTransceivers()[0];null!=o&&o.sender&&o.sender.transport&&this.tryBindTransportEvents(o.sender.transport)}catch(e){throw new eG(ZB.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(e.toString()))}}async addRemoteCandidate(e){try{e&&this.pendingCandidates.push(e),this.peerConnection.remoteDescription&&this.isReady&&(this.pendingCandidates.forEach((e=>{this.peerConnection.addIceCandidate(e)})),this.pendingCandidates=[])}catch(e){throw new eG(ZB.ADD_CANDIDATE_FAILED,"P2PConnection.addRemoteCandidate failed; ".concat(e.toString()))}}send(e,t,n){var r=this;return Cj((function*(){const i=yield wj(r.mutex.lock("From P2PConnection.send"));try{if(!r.remoteSDP)throw new Error("Cannot call P2PConnection.send before remote SDP created");const i=[],o=r.remoteSDP.receive(e,t,n);e.forEach(((e,t)=>{if(o[t].needCreateTransceiver){const t=r.peerConnection.addTransceiver(e._mediaStreamTrack,{direction:"sendonly"});i.push(t),e._updateRtpTransceiver(t)}else{const n=r.peerConnection.getTransceivers().find((e=>e.mid===o[t].mid));if(!n)throw new Error("cannot find transceiver when sendPeerconnection send, mid is ".concat(o[t].mid));i.push(n),e._updateRtpTransceiver(n)}})),xB()&&!0===AH("SIMULCAST")&&(yield wj(r.applySimulcastForFirefox(i,e)));const s=o.map((e=>e.mid)),a=yield wj(r.peerConnection.createOffer()),c=r.mungSendOfferSDP(a.sdp,e,s),d=sZ.parse(c),l=s.map((e=>{const t=d.mediaDescriptions.find((t=>t.attributes.mid===e));if(!t)throw new Error("Cannot extract ssrc from mediaDescription.");return uZ(t,AH("USE_PUB_RTX"))})),h=i.map(((e,t)=>{const n=s[t];return{localSSRC:l[t],id:n}}));yield wj(r.peerConnection.setLocalDescription({type:"offer",sdp:c}));try{yield h}catch(e){const t=r.remoteSDP.toString();throw yield wj(r.peerConnection.setLocalDescription({type:"offer",sdp:c})),yield wj(r.peerConnection.setRemoteDescription({type:"answer",sdp:t})),yield wj(r.stopSending(s,!0)),e}yield wj(r.applySimulcastEncodings(i,e)),yield wj(r.applySendEncodings(i,e));const u=r.remoteSDP.toString(),p=r.logSDPExchange(c,"offer","local","send");return null==p||p(u),yield wj(r.setRemoteDescription({type:"answer",sdp:u})),i.map(((e,t)=>{const n=s[t];return{localSSRC:l[t],id:n}}))}catch(e){throw e instanceof eG?e:new eG(ZB.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(e.toString()))}finally{i()}}))()}async stopSending(e,t){const n=t?void 0:await this.mutex.lock("From P2PConnection.stopSending");try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");const t=this.peerConnection.getTransceivers().filter((t=>-1!==e.indexOf(t.mid)));if(t.length!==e.length)throw new Error("Transceivers' length (".concat(t.length,") doesn't match mids' length (").concat(e.length,") when trying to call P2PConnection.stopSending."));t.map((e=>{var t;e.direction="inactive",null===(t=e.stop)||void 0===t||t.call(e)}));const n=await this.peerConnection.createOffer(),r=this.logSDPExchange(n.sdp||"","offer","local","stopSending");await this.peerConnection.setLocalDescription(n),this.remoteSDP.stopReceiving(e);const i=this.remoteSDP.toString();null==r||r(i),await this.setRemoteDescription({type:"answer",sdp:i})}catch(e){throw new eG(ZB.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(e.toString()))}finally{n&&n()}}async receive(e,t,n,r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(e," before remoteSDP created."));const{mid:i,needExchangeSDP:o}=this.remoteSDP.send(e,t,n,r);if(o){const t=this.remoteSDP.toString(),n=this.logSDPExchange(t,"offer","remote","receive");await this.setRemoteDescription({type:"offer",sdp:t});const r=await this.peerConnection.createAnswer(),o=this.mungReceiveAnswerSDP(r.sdp,i,e);null==n||n(o||""),await this.peerConnection.setLocalDescription({type:"answer",sdp:o}),KH.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(e," by exchanging SDP."))}else KH.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(e," no need to exchange SDP."));const s=this.peerConnection.getTransceivers().find((e=>e.mid===i));if(!s||null===s.mid)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:s.receiver.track,mid:s.mid,transceiver:s}}catch(e){throw new eG(ZB.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(e.toString()))}}async mockReceive(e,t,n,r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(e," before remoteSDP created."));const{mid:i,needExchangeSDP:o}=this.remoteSDP.send(e,t,n,r);if(o){const t=this.remoteSDP.toString(),n=this.logSDPExchange(t,"offer","remote","receive");await this.setRemoteDescription({type:"offer",sdp:t});const r=await this.peerConnection.createAnswer(),o=this.mungReceiveAnswerSDP(r.sdp,i,e);null==n||n(o||""),await this.peerConnection.setLocalDescription({type:"answer",sdp:o}),KH.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(e," by exchanging SDP."))}else KH.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(e," no need to exchange SDP."))}catch(e){throw new eG(ZB.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(e.toString()))}}async stopReceiving(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");this.remoteSDP.stopSending(e);const t=this.remoteSDP.toString(),n=this.logSDPExchange(t,"offer","remote","stopReceiving");await this.setRemoteDescription({type:"offer",sdp:t});const r=await this.peerConnection.createAnswer();null==n||n(r.sdp||""),await this.peerConnection.setLocalDescription(r)}catch(e){throw new eG(ZB.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(e.toString()))}}async restartICE(t){try{if(this.store.p2pTransport===SH.Auto&&(this.store.p2pTransport=SH.SdRtn,SJ().supportPCSetConfiguration&&this.peerConnection.setConfiguration(e.resolvePCConfiguration(this.spec,this.store.p2pTransport))),this.restartCnt>3&&(this.restartCnt=0,SJ().supportPCSetConfiguration&&this.peerConnection.setConfiguration(e.resolvePCConfiguration(this.spec,this.store.p2pTransport,++this.curTurnServerIndex))),!t){this.restartCnt++,this.isReady=!1;const e=await this.peerConnection.createOffer({iceRestart:!0});if(!e.sdp)throw new Error("Cannot restartICE because restart offer SDP does not exist.");const{iceParameters:t}=hZ(e.sdp);return this.store.descriptionStart(),this.direction===aK.SEND_ONLY&&await this.peerConnection.setLocalDescription(e),t}if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");if(this.remoteSDP.restartICE(t),this.store.descriptionStart(),this.direction===aK.RECEIVE_ONLY){this.restartCnt++,await this.setRemoteDescription({type:"offer",sdp:this.remoteSDP.toString()});const e=await this.peerConnection.createAnswer();if(!e.sdp)throw new Error("Cannot get answer sdp when trying to iceRestart.");const{iceParameters:t}=hZ(e.sdp);return await this.peerConnection.setLocalDescription(e),t}await this.setRemoteDescription({type:"answer",sdp:this.remoteSDP.toString()}),this.isReady=!0}catch(e){throw new eG(ZB.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(e.toString()))}}close(){var e;this.peerConnection.close(),this.peerConnection.onicecandidate=null,null===(e=this.onConnectionStateChange)||void 0===e||e.call(this,"closed"),this.tryUnbindTransportEvents(),this.unbindPCEvents(),this.unbindStatsEvents(),this.transport=void 0,this.statsFilter.destroy()}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(e){return this.statsFilter.getVideoIsReady(e)}async updateEncoderConfig(e,t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");const n=await this.peerConnection.createOffer(),r=this.mungSendOfferSDP(n.sdp,[t],[e]);this.remoteSDP.updateRecvMedia(e,t);const i=this.remoteSDP.toString(),o=this.logSDPExchange(r,"offer","local","updateEncoderConfig");await this.peerConnection.setLocalDescription({type:"offer",sdp:r}),null==o||o(i),await this.peerConnection.setRemoteDescription({type:"answer",sdp:i})}catch(e){throw new eG(ZB.EXCHANGE_SDP_FAILED,e.toString())}}async updateSendParameters(e,t){const n=this.peerConnection.getTransceivers().filter((t=>t.mid===e));1===n.length&&(this.isVP8Simulcast(t)?xB()||await this.applySimulcastEncodings(n,[t]):await this.applySendEncodings(n,[t]))}setStatsRemoteVideoIsReady(e,t){this.statsFilter.setVideoIsReady2(e,t)}async replaceTrack(e,t){const n=this.peerConnection.getTransceivers().find((e=>e.mid===t));n&&await n.sender.replaceTrack(e._mediaStreamTrack)}async getSelectedCandidatePair(){const e=this.peerConnection.getReceivers();if(e.length>0&&e[0].transport&&e[0].transport.iceTransport&&e[0].transport.iceTransport.getSelectedCandidatePair&&e[0].transport.iceTransport.getSelectedCandidatePair()){const t=e[0].transport.iceTransport,{local:n,remote:r}=t.getSelectedCandidatePair();return{local:e1(e1({},D0),{},{candidateType:n.type,protocol:n.protocol,address:n.address,port:n.port}),remote:e1(e1({},D0),{},{candidateType:r.type,protocol:r.protocol,address:r.address,port:r.port})}}return this.statsFilter.getSelectedCandidatePair()}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var e,t;Fv(e=["connected","completed"]).call(e,this.peerConnection.iceConnectionState)&&(this.isReady=!1),null===(t=this.onICEConnectionStateChange)||void 0===t||t.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var e;"connected"===this.peerConnection.connectionState&&(this.restartCnt=0),null===(e=this.onConnectionStateChange)||void 0===e||e.call(this,this.peerConnection.connectionState)},this.startICECandidate()}startICECandidate(){this.peerConnection.onicecandidate||(this.localCandidateCount=0,this.peerConnection.onicecandidate=e=>{var t;e.candidate?(e.candidate.candidate&&(null===(t=this.onLocalCandidate)||void 0===t||t.call(this,e.candidate.toJSON())),this.localCandidateCount+=1):KH.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount)})}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(t,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i={iceServers:[]};var o;return t.iceServers?i.iceServers=t.iceServers:t.turnServer&&"off"!==t.turnServer.mode&&(TG(t.turnServer.servers)?i.iceServers=t.turnServer.servers:(i.iceServers&&i.iceServers.push(...e.turnServerConfigToIceServers(t.turnServer.servers,n,r)),AH("USE_TURN_SERVER_OF_GATEWAY")&&i.iceServers&&t.turnServer.serversFromGateway&&i.iceServers.push(...e.turnServerConfigToIceServers(t.turnServer.serversFromGateway,n,r)),Fv(o=[SH.Relay,SH.SdRtn]).call(o,n)&&(i.iceTransportPolicy="relay"),AH("FORCE_TURN_TCP")?i.iceTransportPolicy="relay":t.turnServer.servers.concat(t.turnServer.serversFromGateway||[]).forEach((e=>{e.forceturn&&(i.iceTransportPolicy="relay")})))),AH("ENABLE_ENCODED_TRANSFORM")&&SJ().supportWebRTCEncodedTransform&&(i.encodedInsertableStreams=!0),KH.debug("P2PConnection p2pTransport is ".concat(n)),i}static turnServerConfigToIceServers(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=[],i=e.filter((e=>e.tcpport));KH.debug("P2PConnection turnServers is ".concat(i,", current index is ").concat(n));const o=i.length>n?i[n]:i[0];switch(t){case SH.SdRtn:const t=e.filter((e=>{var t;return Fv(t=e.username).call(t,"glb:")&&e.turnServerURL==e.turnServerURL})),i=t.length>n?t[n]:t[0];i&&(r.push({username:i.username,credential:i.password,credentialType:"password",urls:"turn:".concat(bz(i.turnServerURL),":").concat(i.tcpport,"?transport=udp")}),r.push({username:i.username,credential:i.password,credentialType:"password",urls:"turns:".concat(bz(i.turnServerURL),":").concat(i.tcpport,"?transport=tcp")}));break;case SH.Relay:o&&(r.push({username:o.username,credential:o.password,credentialType:"password",urls:"turn:".concat(o.turnServerURL,":").concat(o.tcpport,"?transport=udp")}),r.push({username:o.username,credential:o.password,credentialType:"password",urls:"turns:".concat(bz(o.turnServerURL),":").concat(o.tcpport,"?transport=tcp")}));break;default:o&&(r.push({username:o.username,credential:o.password,credentialType:"password",urls:"turn:".concat(o.turnServerURL,":").concat(o.tcpport,"?transport=udp")}),r.push({username:o.username,credential:o.password,credentialType:"password",urls:"turns:".concat(bz(o.turnServerURL),":").concat(o.tcpport,"?transport=tcp")}),r.push({username:o.username,credential:o.password,credentialType:"password",urls:"stun:".concat(o.turnServerURL,":").concat(o.tcpport)}))}return r}tryBindTransportEvents(e){if(e){this.transport=e,e.onstatechange=()=>{var t;null!=e&&e.state&&(null===(t=this.onDTLSTransportStateChange)||void 0===t||t.call(this,e.state))},e.onerror=e=>{var t;null===(t=this.onDTLSTransportError)||void 0===t||t.call(this,"error"in e?e.error:e)};const t=e.iceTransport;t&&(t.onstatechange=()=>{const t=null==e?void 0:e.iceTransport.state;var n;t&&(null===(n=this.onICETransportStateChange)||void 0===n||n.call(this,t))},t.getSelectedCandidatePair&&(t.onselectedcandidatepairchange=()=>{if(t.getSelectedCandidatePair()){const{local:e,remote:n}=t.getSelectedCandidatePair();KH.info("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] selectedcandidatepairchange: local ").concat(JSON.stringify({candidateType:e.type,protocol:e.protocol}),", remote ").concat(JSON.stringify({candidateType:n.type,protocol:n.protocol,address:n.address,port:n.port})," )"))}}))}}tryUnbindTransportEvents(){this.transport&&(this.transport.onstatechange=null,this.transport.onerror=null,this.transport.iceTransport&&(this.transport.iceTransport.onstatechange=null))}async updateRtpSenderEncodings(e,t){var n;if(t||(t=this.peerConnection.getSenders().find((t=>t.track===e._mediaStreamTrack))),!t)return KH.warn("[".concat(e.getTrackId(),"] no rtpSender found}"));if(this.isVP8Simulcast(e))return KH.warn("[updateRtpSenderEncodings] Track is VP8 simulcast, please apply simulcast encodings");if(!SJ().supportSetRtpSenderParameters)return KH.warn("[updateRtpSenderEncodings] Browser not support set rtp-sender parameters");const r={},i={};switch(e._optimizationMode){case"motion":r.degradationPreference="maintain-framerate";break;case"detail":r.degradationPreference="maintain-resolution";break;default:r.degradationPreference="balanced"}if(e._encoderConfig){var o;const{bitrateMax:t,frameRate:n,scaleResolutionDownBy:r}=e._encoderConfig;t&&(i.maxBitrate=1e3*t),Fv(o=e._hints).call(o,BJ.LOW_STREAM)&&(n&&(i.maxFramerate=Tz(n)),r&&r>=1&&(i.scaleResolutionDownBy=r))}if(AH("DSCP_TYPE")&&qB()){var s;const e=AH("DSCP_TYPE");Fv(s=["very-low","low","medium","high"]).call(s,e)&&(i.networkPriority=e)}const a=t.getParameters(),c=null===(n=a.encodings)||void 0===n?void 0:n[0];xB()&&!c&&(r.encodings=[i]),c&&Object.assign(c,i),Object.assign(a,r),KH.debug("[".concat(e.getTrackId(),"] updateRtpSenderEncodings: ").concat(JSON.stringify(a.encodings))),await t.setParameters(a)}async applySendEncodings(e,t){try{if(!SJ().supportSetRtpSenderParameters)return;if(e.length!==t.length)return;for(let n=0;n<e.length;n++){const r=e[n],i=t[n];i instanceof O$&&!this.isVP8Simulcast(i)&&await this.updateRtpSenderEncodings(i,r.sender)}}catch(e){KH.debug("[".concat(this.store.clientId,"] Apply RTPSendEncodings failed."))}}mungSendOfferSDP(e,t,n){const r=sZ.parse(e);return t.forEach(((e,t)=>{const i=n[t],o=r.mediaDescriptions.find((e=>e.attributes.mid===i));o&&(gZ(o,e),bZ(o,e,this.store.codec))})),sZ.print(r)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=e=>{var t;null===(t=this.onFirstAudioReceived)||void 0===t||t.call(this,e)},this.statsFilter.onFirstVideoReceived=e=>{var t;null===(t=this.onFirstVideoReceived)||void 0===t||t.call(this,e)},this.statsFilter.onFirstAudioDecoded=e=>{var t;null===(t=this.onFirstAudioDecoded)||void 0===t||t.call(this,e)},this.statsFilter.onFirstVideoDecoded=(e,t,n)=>{var r;null===(r=this.onFirstVideoDecoded)||void 0===r||r.call(this,e,t,n)},this.statsFilter.onSelectedLocalCandidateChanged=(e,t)=>{var n;null===(n=this.onSelectedLocalCandidateChanged)||void 0===n||n.call(this,e,t)},this.statsFilter.onSelectedRemoteCandidateChanged=(e,t)=>{var n;null===(n=this.onSelectedRemoteCandidateChanged)||void 0===n||n.call(this,e,t)},this.statsFilter.onFirstVideoDecodedTimeout=e=>{var t;null===(t=this.onFirstVideoDecodedTimeout)||void 0===t||t.call(this,e)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0,this.statsFilter.onFirstVideoDecodedTimeout=void 0}async applySimulcastForFirefox(e,t){if(e.length===t.length)for(let a=0;a<e.length;a++){var n,r,i,o,s;const c=e[a],d=t[a];if(d instanceof O$&&!Fv(n=d._hints).call(n,BJ.LOW_STREAM)&&null!==(r=d._encoderConfig)&&void 0!==r&&r.bitrateMax&&(null===(i=d._encoderConfig)||void 0===i?void 0:i.bitrateMax)>200&&null!==(o=d._scalabilityMode)&&void 0!==o&&o.numSpatialLayers&&(null===(s=d._scalabilityMode)||void 0===s?void 0:s.numSpatialLayers)>1&&"vp8"===this.store.codec){const e={},t={high:1e3*(d._encoderConfig.bitrateMax-50),medium:5e4};e.encodings=[{rid:"m",active:!0,maxBitrate:t.medium,scaleResolutionDownBy:4},{rid:"h",active:!0,maxBitrate:t.high}];const n=c.sender.getParameters();await c.sender.setParameters(Object.assign(n,e))}}}async applySimulcastEncodings(e,t){if(!xB()&&e.length===t.length)for(let n=0;n<e.length;n++){const r=t[n];if(r instanceof O$&&this.isVP8Simulcast(r)){const t=e[n],i={},o={high:1e3*(r._encoderConfig.bitrateMax-50),medium:5e4};i.encodings=[{active:!0,adaptivePtime:!1,networkPriority:"high",priority:"high",maxBitrate:o.high},{active:!0,adaptivePtime:!1,networkPriority:"low",priority:"low",maxBitrate:o.medium,scaleResolutionDownBy:4}];const s=t.sender.getParameters();await t.sender.setParameters(Object.assign(s,i))}}}isVP8Simulcast(e){var t,n,r,i,o;return!!(e instanceof O$&&AH("SIMULCAST")&&"vp8"===this.store.codec&&!Fv(t=e._hints).call(t,BJ.LOW_STREAM)&&null!==(n=e._encoderConfig)&&void 0!==n&&n.bitrateMax&&(null===(r=e._encoderConfig)||void 0===r?void 0:r.bitrateMax)>200&&null!==(i=e._scalabilityMode)&&void 0!==i&&i.numSpatialLayers&&(null===(o=e._scalabilityMode)||void 0===o?void 0:o.numSpatialLayers)>1)}logSDPExchange(e,t,n,r){if(AH("SDP_LOGGING"))return KH.upload("[".concat(this.store.clientId,"] exchanging ").concat(n," ").concat(t," SDP during P2PConnection.").concat(r,"\n"),e),"offer"===t?e=>{this.logSDPExchange(e,"answer","local"===n?"remote":"local",r)}:void 0}async muteLocal(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");const t=this.peerConnection.getTransceivers().filter((t=>t.mid&&-1!==e.indexOf(t.mid)));if(t.length!==e.length)throw new Error("Transceivers' length doesn't match mids' length.");t.map((e=>{e.direction="inactive"}));const n=await this.peerConnection.createOffer(),r=this.logSDPExchange(n.sdp||"","offer","local","muteLocal");await this.peerConnection.setLocalDescription(n),this.remoteSDP.muteRemote(e);const i=this.remoteSDP.toString();null==r||r(i),await this.setRemoteDescription({type:"answer",sdp:i})}catch(e){throw new eG(ZB.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat(e.toString()))}}async unmuteLocal(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");const t=this.peerConnection.getTransceivers().filter((t=>t.mid&&-1!==e.indexOf(t.mid)));if(t.length!==e.length)throw new Error("Transceivers' length doesn't match mids' length.");t.map((async e=>{e.direction="sendonly"}));const n=await this.peerConnection.createOffer(),r=this.logSDPExchange(n.sdp||"","offer","local","unmuteLocal");await this.peerConnection.setLocalDescription(n),this.remoteSDP.unmuteRemote(e);const i=this.remoteSDP.toString();null==r||r(i),await this.setRemoteDescription({type:"answer",sdp:i})}catch(e){throw new eG(ZB.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat(e.toString()))}}async getRemoteSSRC(e,t){var n,r;if(t=null!==(n=t)&&void 0!==n?n:null===(r=this.currentRemoteDescription)||void 0===r?void 0:r.sdp){var i;const n=null===(i=sZ.parse(t).mediaDescriptions.find((t=>t.attributes.mid===e)))||void 0===i?void 0:i.attributes.ssrcs;return null==n?void 0:n[0].ssrcId}}async setRemoteDescription(e){var t;await this.peerConnection.setRemoteDescription(e),Fv(t=["connected","completed"]).call(t,this.peerConnection.iceConnectionState)||(this.isReady=!0,this.addRemoteCandidate())}mungReceiveAnswerSDP(e,t,n){const r=sZ.parse(e),i=r.mediaDescriptions.find((e=>e.attributes.mid===t));return i&&n===kK.AUDIO&&"audio"===i.media.mediaType&&wZ(i),sZ.print(r)}},YW($0.prototype,"establish",[n1],Object.getOwnPropertyDescriptor($0.prototype,"establish"),$0.prototype),YW($0.prototype,"connect",[n1],Object.getOwnPropertyDescriptor($0.prototype,"connect"),$0.prototype),YW($0.prototype,"receive",[n1],Object.getOwnPropertyDescriptor($0.prototype,"receive"),$0.prototype),YW($0.prototype,"mockReceive",[n1],Object.getOwnPropertyDescriptor($0.prototype,"mockReceive"),$0.prototype),YW($0.prototype,"stopReceiving",[n1],Object.getOwnPropertyDescriptor($0.prototype,"stopReceiving"),$0.prototype),YW($0.prototype,"restartICE",[n1],Object.getOwnPropertyDescriptor($0.prototype,"restartICE"),$0.prototype),YW($0.prototype,"close",[n1],Object.getOwnPropertyDescriptor($0.prototype,"close"),$0.prototype),YW($0.prototype,"updateEncoderConfig",[n1],Object.getOwnPropertyDescriptor($0.prototype,"updateEncoderConfig"),$0.prototype),YW($0.prototype,"updateSendParameters",[n1],Object.getOwnPropertyDescriptor($0.prototype,"updateSendParameters"),$0.prototype),YW($0.prototype,"replaceTrack",[n1],Object.getOwnPropertyDescriptor($0.prototype,"replaceTrack"),$0.prototype),YW($0.prototype,"muteLocal",[n1],Object.getOwnPropertyDescriptor($0.prototype,"muteLocal"),$0.prototype),YW($0.prototype,"unmuteLocal",[n1],Object.getOwnPropertyDescriptor($0.prototype,"unmuteLocal"),$0.prototype),$0);function n1(e,t,n){const r=e[t];if("function"!=typeof r)throw new Error("Cannot use mutex on object property.");return n.value=async function(){const e=this.mutex,n=await e.lock("From P2PConnection.".concat(t));try{for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return await r.apply(this,o)}finally{n()}},n}function r1(e,t){let n=document.createElement("video"),r=document.createElement("canvas");n.setAttribute("style","display:none"),r.setAttribute("style","display:none"),n.setAttribute("muted",""),n.muted=!0,n.setAttribute("autoplay",""),n.autoplay=!0,n.setAttribute("playsinline",""),r.width=Tz(t.width),r.height=Tz(t.height);const i=Tz(t.framerate||15);document.body.append(n),document.body.append(r);let o=e._mediaStreamTrack;n.srcObject=new MediaStream([o]),n.play();const s=r.getContext("2d");if(!s)throw new eW(ZB.UNEXPECTED_ERROR,"can not get canvas context");const a=SJ(),c=r.captureStream(a.supportRequestFrame?0:i).getVideoTracks()[0];c.canvas||(c.canvas=r),r.startCapture=()=>{if(!n)return r.stopCapture&&r.stopCapture();if(n.paused&&n.play(),n.videoHeight>2&&n.videoWidth>2){const e=n.videoWidth,t=n.videoHeight/e,i=r.width*t;Math.abs(i-r.height)>=2&&(KH.debug("adjust low stream resolution","".concat(r.width,"x").concat(r.height," -> ").concat(r.width,"x").concat(i)),r.height=i)}s.drawImage(n,0,0,r.width,r.height),c.requestFrame&&c.requestFrame(),o!==e._mediaStreamTrack&&(o=e._mediaStreamTrack,n.srcObject=new MediaStream([o]))},r.stopCapture=bX((()=>r.startCapture&&r.startCapture()),i);const d=c.stop;return c.stop=()=>{d.call(c),n&&(n.remove(),n.srcObject=null,n=null),r&&(r.width=0,r.remove(),r.stopCapture&&r.stopCapture(),r.startCapture=void 0,r.stopCapture=void 0,r=null),KH.debug("clean low stream renderer")},c}var i1=function(e){return e[e.HEIGHT=2033]="HEIGHT",e[e.FRAME_RATE=2034]="FRAME_RATE",e[e.WIDTH=2035]="WIDTH",e}(i1||{}),o1=function(e){return e[e.FRAME_RATE=2002]="FRAME_RATE",e[e.WIDTH=2003]="WIDTH",e[e.HEIGHT=2004]="HEIGHT",e[e.PACKAGE_LOST=2005]="PACKAGE_LOST",e[e.AVG_ENCODE=2007]="AVG_ENCODE",e[e.NACKS=2009]="NACKS",e[e.PLIS=2010]="PLIS",e[e.FIRS=2011]="FIRS",e[e.BITRATE=2012]="BITRATE",e[e.PACKAGE_RATE=2031]="PACKAGE_RATE",e[e.ADAPTATION=2032]="ADAPTATION",e[e.ACTUAL_ENCODED=2060]="ACTUAL_ENCODED",e[e.BANDWIDTH=2061]="BANDWIDTH",e[e.RETRANSMIT=2062]="RETRANSMIT",e[e.TARGET_ENCODED=2064]="TARGET_ENCODED",e[e.TRANSMIT=2066]="TRANSMIT",e[e.FREEZE=2082]="FREEZE",e[e.DISABLED=2095]="DISABLED",e[e.PLAYER_STATUS=2128]="PLAYER_STATUS",e[e.QP_SUM=2143]="QP_SUM",e}(o1||{}),s1=function(e){return e[e.BITRATE=2069]="BITRATE",e[e.PACKAGE_LOST=2070]="PACKAGE_LOST",e[e.PACKAGE_RATE=2071]="PACKAGE_RATE",e[e.HEIGHT=2073]="HEIGHT",e[e.FRAME_RATE=2075]="FRAME_RATE",e[e.WIDTH=2077]="WIDTH",e}(s1||{}),a1=function(e){return e[e.JITTER=-1]="JITTER",e[e.PACKAGE_LOST=2014]="PACKAGE_LOST",e[e.WIDTH=2018]="WIDTH",e[e.HEIGHT=2019]="HEIGHT",e[e.FRAME_RATE=2020]="FRAME_RATE",e[e.JITTER_BUFFER=2023]="JITTER_BUFFER",e[e.CURRENT_DELAY=2024]="CURRENT_DELAY",e[e.NACKS=2026]="NACKS",e[e.PLIS=2027]="PLIS",e[e.FIRS=2028]="FIRS",e[e.BITRATE=2029]="BITRATE",e[e.PACKAGE_RATE=2078]="PACKAGE_RATE",e[e.FREEZE=2084]="FREEZE",e[e.DISABLED=2101]="DISABLED",e[e.PLAYER_STATUS=2129]="PLAYER_STATUS",e[e.QP_SUM=2144]="QP_SUM",e[e.I_FRAME_DELAY=2149]="I_FRAME_DELAY",e}(a1||{}),c1=function(e){return e[e.FRAME_RATE_DECODE=2021]="FRAME_RATE_DECODE",e[e.FRAME_RATE_RENDER=2022]="FRAME_RATE_RENDER",e[e.FRAME_RATE_OUTPUT=2155]="FRAME_RATE_OUTPUT",e[e.FREEZE_TIME=2109]="FREEZE_TIME",e[e.FREEZE_TIME_RENDER=2147]="FREEZE_TIME_RENDER",e[e.FREEZE_DURATION=2156]="FREEZE_DURATION",e}(c1||{}),d1=function(e){return e[e.PCM_LEVEL=2104]="PCM_LEVEL",e}(d1||{}),l1=function(e){return e[e.PACKAGE_LOST=-1]="PACKAGE_LOST",e[e.LEVEL=2038]="LEVEL",e[e.BITRATE=2039]="BITRATE",e[e.PACKAGE_RATE=2040]="PACKAGE_RATE",e[e.AEC_RETURN_LOSS=2041]="AEC_RETURN_LOSS",e[e.AEC_RETURN_LOSS_ENH=2042]="AEC_RETURN_LOSS_ENH",e[e.FREEZE=2081]="FREEZE",e[e.DISABLED=2096]="DISABLED",e}(l1||{}),h1=function(e){return e[e.BITRATE=2044]="BITRATE",e[e.PACKAGE_LOST=2045]="PACKAGE_LOST",e[e.PACKAGE_RATE=2046]="PACKAGE_RATE",e[e.CURRENT_DELAY=2047]="CURRENT_DELAY",e[e.JITTER_BUFFER=2054]="JITTER_BUFFER",e[e.JITTER=2055]="JITTER",e[e.FREEZE=2083]="FREEZE",e[e.DISABLED=2102]="DISABLED",e[e.PCM_LEVEL=2105]="PCM_LEVEL",e[e.PLAYER_STATUS=2130]="PLAYER_STATUS",e[e.CONCEALED_SAMPLES=2148]="CONCEALED_SAMPLES",e}(h1||{}),u1=function(e){return e[e.FREEZE_TIME=-1]="FREEZE_TIME",e[e.LEVEL=2043]="LEVEL",e}(u1||{}),p1=function(e){return e[e.RTT=2006]="RTT",e[e.CONN_TYPE=801]="CONN_TYPE",e}(p1||{});const f1=1e3;function m1(e,t,n){null!=n&&Number.isFinite(n)&&(e[t]=Math.round(Math.max(0,n)))}function g1(e){const t={[p1.CONN_TYPE]:0,[p1.RTT]:e.rtt};switch(e.selectedCandidatePair.localCandidate.candidateType){case"relay":{const n=e.selectedCandidatePair.localCandidate.relayProtocol;"udp"===n&&(t[p1.CONN_TYPE]=1),"tcp"===n&&(t[p1.CONN_TYPE]=3),"tls"===n&&(t[p1.CONN_TYPE]=4);break}case"srflx":t[p1.CONN_TYPE]=2}return t}function _1(e){let t=0;switch(e){case"none":t=0;break;case"cpu":t=1;break;case"bandwidth":t=2;break;case"other":t=3}return t}class E1 extends mG{constructor(e){super(),SU(this,"store",void 0),SU(this,"uploadWRTCStatsTimer",void 0),SU(this,"uploadOutboundDenoiserStatsTimer",void 0),SU(this,"uploadExtStatsTimer",void 0),SU(this,"uploadExtUsageStatsTimer",void 0),SU(this,"uploadInboundExtStatsTimer",void 0),SU(this,"requestStats",void 0),SU(this,"requestTransportStats",void 0),SU(this,"requestLocalMedia",void 0),SU(this,"requestRemoteMedia",void 0),SU(this,"requestAllTracks",void 0),SU(this,"requestVideoIsReady",void 0),SU(this,"requestUploadStats",void 0),SU(this,"requestUpload",void 0),SU(this,"uploadOutboundStarted",!1),SU(this,"uploadInboundStarted",!1),SU(this,"uploadTransportStarted",!1),SU(this,"uploadExtensionUsageStarted",!1),SU(this,"lastRecvStats",void 0),SU(this,"lastSendStats",void 0),SU(this,"lastFullRecvStats",void 0),SU(this,"lastFullSendStats",void 0),SU(this,"needUploadRenderFreezeTime",!0),this.store=e}uploadWRTCStats(e){if(!this.requestStats||!this.requestUploadStats)return;let t,n;if(this.uploadTransportStarted&&(t=this.requestStats(),this.store.useP2P&&(n=this.requestStats(!0))),!t&&this.uploadOutboundStarted&&(t=this.requestStats()),!n&&this.uploadInboundStarted&&(n=this.requestStats(!0)),t||n){const r={};if(this.uploadTransportStarted&&t){const i=this.getTransportStats(t,n,e);i&&(r.misc=[i])}if(this.uploadOutboundStarted&&t){const n=this.getOutboundStats(t,e?this.lastSendStats:this.lastFullSendStats,e);n&&(r.outbound=[n])}if(this.uploadInboundStarted&&n){const t=this.getInboundStats(n,e?this.lastRecvStats:this.lastFullRecvStats,e);t&&(r.inbound=t)}this.requestUploadStats(r)}this.lastRecvStats=n,this.lastSendStats=t,e||(this.lastFullRecvStats=n,this.lastFullSendStats=t)}startUploadWRTCStats(){if(this.uploadWRTCStatsTimer)return;let e=1;this.uploadWRTCStatsTimer=window.setInterval((()=>{if(!this.uploadTransportStarted&&!this.uploadInboundStarted&&!this.uploadOutboundStarted)return this.stopUploadWRTCStats();this.uploadWRTCStats(3!==e),4==++e&&(e=1)}),f1)}stopUploadWRTCStats(){window.clearInterval(this.uploadWRTCStatsTimer),this.uploadWRTCStatsTimer=void 0,this.lastSendStats&&(this.lastSendStats.videoSend=[],this.lastSendStats.audioSend=[],this.lastSendStats=void 0),this.lastRecvStats&&(this.lastRecvStats.videoRecv=[],this.lastRecvStats.audioRecv=[],this.lastRecvStats=void 0)}getTransportStats(e,t,n){if(!this.requestStats)return;if(n)return null==e.rtt?void 0:{addition:{[p1.RTT]:e.rtt,[p1.CONN_TYPE]:void 0}};const r=g1(e);if(this.store.useP2P){if(t){const e=g1(t);r[p1.CONN_TYPE]+=e[p1.CONN_TYPE]<<3}r[p1.CONN_TYPE]+=110}else r[p1.CONN_TYPE]+=100;return{addition:r}}getOutboundStats(e,t,n){if(!this.requestUploadStats||!this.requestLocalMedia)return;const r=this.requestLocalMedia();if(!r||0===r.length)return;let i,o,s;return r.forEach((r=>{let[a,{track:c,ssrcs:d}]=r;switch(a){case VK.LocalVideoLowTrack:case VK.LocalVideoTrack:if(a===VK.LocalVideoTrack){const r=function(e,t,n,r,i){const o=t.videoSend.find((t=>t.ssrc===e));if(!o)return;const s={},{sentFrame:a,inputFrame:c}=o;if(c&&a){const e=c.frameRate,t=a.frameRate;s[o1.FREEZE]=function(e,t){let n=!0;return n=!(e<=5)&&(e<=10?t<3:e<=20?t<4:t<5),n}(e,t)?1:0}if(m1(s,o1.QP_SUM,o.qpSumPerFrame),i)return s;switch(a&&(m1(s,o1.HEIGHT,a.height),m1(s,o1.WIDTH,a.width),m1(s,o1.FRAME_RATE,a.frameRate)),s[o1.DISABLED]=r._originMediaStreamTrack&&!r._originMediaStreamTrack.enabled||r._mediaStreamTrack&&!r._mediaStreamTrack.enabled?1:0,o.adaptionChangeReason){case"none":s[o1.ADAPTATION]=0;break;case"cpu":s[o1.ADAPTATION]=1;break;case"bandwidth":s[o1.ADAPTATION]=2;break;case"other":s[o1.ADAPTATION]=3}let d=0;o.adaptionChangeReason&&(d+=_1(o.adaptionChangeReason)),t.qualityLimitationReason&&(d+=_1(t.qualityLimitationReason)<<3),s[o1.ADAPTATION]=d,s[o1.PLAYER_STATUS]=aX[r._player?r._player.videoElementStatus:"uninit"],m1(s,o1.NACKS,o.nacksCount),m1(s,o1.PLIS,o.plisCount),m1(s,o1.FIRS,o.firsCount),m1(s,o1.AVG_ENCODE,o.avgEncodeMs);const l=n&&n.videoSend.find((t=>t.ssrc===e));if(l){let e=i?f1:3e3;l.timestamp&&o.timestamp&&(e=o.timestamp-l.timestamp),null!=l.packets&&null!=o.packets&&m1(s,o1.PACKAGE_RATE,1e3*(o.packets-l.packets)/e),null!=o.packetsLost&&null!=l.packetsLost&&m1(s,o1.PACKAGE_LOST,o.packetsLost-l.packetsLost),null!=l.bytes&&null!=o.bytes&&m1(s,o1.BITRATE,8*(o.bytes-l.bytes)/e)}return s}(d[0].ssrcId,e,t,c,n),i=n?null:function(e,t,n){const r=t.videoSend.find((t=>t.ssrc===e));if(!r)return null;const i={},o=r.inputFrame,s=o&&o.height||n&&n.videoHeight||0,a=o&&o.width||n&&n.videoWidth||0,c=o&&o.frameRate||0;return m1(i,i1.HEIGHT,s),m1(i,i1.WIDTH,a),m1(i,i1.FRAME_RATE,c),i}(d[0].ssrcId,e,c),s=n?null:function(e){const t={};return m1(t,o1.RETRANSMIT,e.bitrate.retransmit),m1(t,o1.TARGET_ENCODED,e.bitrate.targetEncoded),m1(t,o1.ACTUAL_ENCODED,e.bitrate.actualEncoded),m1(t,o1.TRANSMIT,e.bitrate.transmit),m1(t,o1.BANDWIDTH,e.sendBandwidth),t}(e);o=Object.assign({},r,i,s)}else s=n?void 0:function(e,t,n){const r=t.videoSend.find((t=>t.ssrc===e));if(!r)return;const i={},o=r.sentFrame;if(o&&(m1(i,s1.HEIGHT,o.height),m1(i,s1.WIDTH,o.width),m1(i,s1.FRAME_RATE,o.frameRate)),n){const t=n.videoSend.find((t=>t.ssrc===e));if(t){let e=3e3;t.timestamp&&r.timestamp&&(e=r.timestamp-t.timestamp),null!=t.packets&&null!=r.packets&&m1(i,s1.PACKAGE_RATE,1e3*(r.packets-t.packets)/e),null!=r.packetsLost&&null!=t.packetsLost&&m1(i,s1.PACKAGE_LOST,r.packetsLost-t.packetsLost),null!=t.bytes&&null!=r.bytes&&m1(i,s1.BITRATE,8*(r.bytes-t.bytes)/e)}}return i}(d[0].ssrcId,e,t);break;case VK.LocalAudioTrack:i=n?void 0:function(e,t,n,r){const i=t.audioSend.find((t=>t.ssrc===e));if(!i)return;const o={};o[l1.DISABLED]=r._originMediaStreamTrack&&!r._originMediaStreamTrack.enabled||r._mediaStreamTrack&&!r._mediaStreamTrack.enabled?1:0;const s=100*r._source.getAccurateVolumeLevel(),a=i.inputLevel;if(null!=a){const e=Math.ceil(50*Math.log10(100*a+1));m1(o,l1.LEVEL,e)}else m1(o,l1.LEVEL,s);m1(o,d1.PCM_LEVEL,s),m1(o,l1.AEC_RETURN_LOSS,i.aecReturnLoss),m1(o,l1.AEC_RETURN_LOSS_ENH,i.aecReturnLossEnhancement),o[l1.FREEZE]=0;const c=n&&n.audioSend.find((t=>t.ssrc===e));if(c){let e=3e3;c.timestamp&&i.timestamp&&(e=i.timestamp-c.timestamp),null!=c.bytes&&null!=i.bytes&&m1(o,l1.BITRATE,8*(i.bytes-c.bytes)/e),null!=c.packets&&null!=i.packets&&m1(o,l1.PACKAGE_RATE,1e3*(i.packets-c.packets)/e)}return o}(d[0].ssrcId,e,t,c)}})),{high:o,low:s,audio:i}}getInboundStats(e,t,n){if(!this.requestRemoteMedia)return;const r=this.requestRemoteMedia()||[],i=[];return r.forEach((r=>{let[o,s]=r;const a={peer:o.uid};if(s.has(kK.VIDEO)&&o.videoTrack){const r=o._videoSSRC&&this.requestVideoIsReady&&this.requestVideoIsReady(o._videoSSRC)||!1,i=o.videoTrack?function(e,t,n,r,i,o,s){var a;const c=t.videoRecv.find((t=>t.ssrc===e));if(!c)return;const d={},{receivedFrame:l,outputFrame:h,decodeFrameRate:u}=c,p=n&&n.videoRecv.find((t=>t.ssrc===e));if(d[a1.FREEZE]=i&&G1.isRemoteVideoFreeze(r,c,p)?1:0,m1(d,c1.FRAME_RATE_DECODE,u),m1(d,a1.QP_SUM,c.qpSumPerFrame),c.framesRateFirefox&&m1(d,a1.FRAME_RATE,c.framesRateFirefox),l&&m1(d,a1.FRAME_RATE,l.frameRate),p){const e=t.timestamp-n.timestamp||(s?f1:3e3);null!=c.packetsLost&&null!=p.packetsLost&&m1(d,a1.PACKAGE_LOST,c.packetsLost-p.packetsLost),null!=p.bytes&&null!=c.bytes&&m1(d,a1.BITRATE,8*(c.bytes-p.bytes)/e),null!=p.packets&&null!=c.packets&&m1(d,a1.PACKAGE_RATE,1e3*(c.packets-p.packets)/e)}if(s)return d;l?(m1(d,a1.HEIGHT,l.height),m1(d,a1.WIDTH,l.width)):r&&(m1(d,a1.HEIGHT,r._videoHeight||0),m1(d,a1.WIDTH,r._videoWidth||0)),h&&m1(d,c1.FRAME_RATE_OUTPUT,h.frameRate);const f=null===(a=r._player)||void 0===a?void 0:a.rendFrameRate.toFixed(0);if(f&&m1(d,c1.FRAME_RATE_RENDER,+f),m1(d,a1.JITTER_BUFFER,c.jitterBufferMs),m1(d,a1.CURRENT_DELAY,c.currentDelayMs),m1(d,a1.FIRS,c.firsCount),m1(d,a1.NACKS,c.nacksCount),m1(d,a1.PLIS,c.plisCount),r){d[a1.DISABLED]=r._originMediaStreamTrack.enabled&&r._mediaStreamTrack.enabled?0:1;const e=r._player;if(e){const{freezeTimeCounterList:t,renderFreezeAccTime:n,videoElementStatus:r}=e;if(t&&t.length>0&&m1(d,c1.FREEZE_TIME,t.splice(0,1)[0]),o&&"visible"===q$.visibility&&r===oX.PLAYING&&SJ().supportRequestVideoFrameCallback){const t=Math.min(6e3,n);e.renderFreezeAccTime=Math.max(0,n-t),m1(d,c1.FREEZE_TIME_RENDER,t)}if("number"==typeof c.totalFreezesDuration){const e=p&&p.totalFreezesDuration?c.totalFreezesDuration-p.totalFreezesDuration:c.totalFreezesDuration;m1(d,c1.FREEZE_DURATION,1e3*e)}}}if(d[a1.PLAYER_STATUS]=aX[r._player?r._player.videoElementStatus:"uninit"],p&&void 0!==c.totalInterFrameDelay&&void 0!==c.totalSquaredInterFrameDelay&&void 0!==p.totalInterFrameDelay&&void 0!==p.totalSquaredInterFrameDelay){const e=c.totalInterFrameDelay-p.totalInterFrameDelay,t=c.totalSquaredInterFrameDelay-p.totalSquaredInterFrameDelay,n=c.framesDecodeCount-p.framesDecodeCount,r=e/n*1e3,i=Math.round(1e3*Math.sqrt((t-Math.pow(e,2)/n)/n));!isNaN(i)&&r+i>Math.max(3*r,r+150)&&(d[a1.I_FRAME_DELAY]=i)}return d}(o._videoSSRC,e,t,o.videoTrack,!0===r,this.needUploadRenderFreezeTime,n):void 0;i&&(a.video=i)}if(s.has(kK.AUDIO)&&o.audioTrack){const r=o.audioTrack?function(e,t,n,r,i){const o=t.audioRecv.find((t=>t.ssrc===e));if(!o)return;const s={},a=n&&n.audioRecv.find((t=>t.ssrc===e)),{receivedFrames:c,droppedFrames:d}=o;var l;if(m1(s,h1.JITTER,o.jitterMs),null!=c&&null!=d&&(s[h1.FREEZE]=0===(l=c)||100*d/l>20?1:0),a){const e=t.timestamp-n.timestamp||(i?f1:3e3);null!=o.packets&&null!=a.packets&&m1(s,h1.PACKAGE_RATE,1e3*(o.packets-a.packets)/e),null!=a.bytes&&null!=o.bytes&&m1(s,h1.BITRATE,8*(o.bytes-a.bytes)/e),null!=o.packetsLost&&null!=a.packetsLost&&m1(s,h1.PACKAGE_LOST,o.packetsLost-a.packetsLost)}if(i)return s;const h=100*r._source.getAccurateVolumeLevel(),u=o.outputLevel;if(null!=u){const e=Math.ceil(50*Math.log10(100*u+1));m1(s,u1.LEVEL,e)}if(m1(s,h1.PCM_LEVEL,h),r&&(s[h1.DISABLED]=r._originMediaStreamTrack.enabled&&r._mediaStreamTrack.enabled?0:1),m1(s,h1.JITTER_BUFFER,o.jitterBufferMs),m1(s,h1.CURRENT_DELAY,o.jitterBufferMs),s[h1.PLAYER_STATUS]=aX[jX.getPlayerState(r.getTrackId())],a){const e=o.concealedSamples-a.concealedSamples;e>0&&m1(s,h1.CONCEALED_SAMPLES,e)}return s}(o._audioSSRC,e,t,o.audioTrack,n):void 0;r&&(a.audio=r)}(a.video||a.audio)&&i.push(a)})),this.needUploadRenderFreezeTime=!this.needUploadRenderFreezeTime,i}startUploadTransportStats(){this.uploadTransportStarted=!0,this.uploadWRTCStatsTimer||this.startUploadWRTCStats()}stopUploadTransportStats(){this.uploadTransportStarted=!1}startUploadOutboundStats(){this.uploadOutboundStarted||(this.uploadOutboundStarted=!0,this.uploadWRTCStatsTimer||this.startUploadWRTCStats(),this.uploadOutboundDenoiserStatsTimer&&window.clearInterval(this.uploadOutboundDenoiserStatsTimer),this.uploadOutboundDenoiserStatsTimer=window.setInterval((()=>{if(!this.requestAllTracks||!this.requestUpload)return;const e=(this.requestAllTracks()||[]).find((e=>e instanceof BQ));if(e&&e._external.getDenoiserStats){const t=e._external.getDenoiserStats();t&&this.requestUpload(oK.DENOISER_STATS,t)}}),2e3),this.uploadExtStatsTimer&&window.clearInterval(this.uploadExtStatsTimer),this.uploadExtStatsTimer=window.setInterval((()=>{this.requestAllTracks&&this.requestUpload&&this.requestAllTracks().forEach((e=>{e.getProcessorStats().forEach((e=>{this.requestUpload&&this.requestUpload(e.type,e.stats)}))}))}),2e3))}stopUploadOutboundStats(){this.uploadOutboundStarted&&(this.uploadOutboundStarted=!1,this.lastSendStats&&(this.lastSendStats.videoSend=[],this.lastSendStats.audioSend=[],this.lastSendStats=void 0),this.uploadOutboundDenoiserStatsTimer&&window.clearInterval(this.uploadOutboundDenoiserStatsTimer),this.uploadOutboundDenoiserStatsTimer=void 0)}startUploadInboundStats(){this.uploadInboundStarted||(this.uploadInboundStarted=!0,this.uploadWRTCStatsTimer||this.startUploadWRTCStats(),this.uploadInboundExtStatsTimer&&window.clearInterval(this.uploadInboundExtStatsTimer),this.uploadInboundExtStatsTimer=window.setInterval((()=>{this.requestUpload&&this.requestRemoteMedia&&(this.requestRemoteMedia()||[]).forEach((e=>{let[t,n]=e;n.has(kK.VIDEO)&&t.videoTrack&&t.videoTrack.getProcessorStats().forEach((e=>{this.requestUpload&&this.requestUpload(e.type,e.stats)})),n.has(kK.AUDIO)&&t.audioTrack&&t.audioTrack.getProcessorStats().forEach((e=>{this.requestUpload&&this.requestUpload(e.type,e.stats)}))}))}),2e3))}stopUploadInboundStats(){this.uploadInboundStarted&&(this.uploadInboundStarted=!1,this.lastRecvStats&&(this.lastRecvStats.videoRecv=[],this.lastRecvStats.audioRecv=[],this.lastRecvStats=void 0))}startUploadExtensionUsageStats(){if(this.uploadExtensionUsageStarted)return;this.uploadExtensionUsageStarted=!0,this.uploadExtUsageStatsTimer&&window.clearInterval(this.uploadExtUsageStatsTimer);const e=new Map;this.uploadExtUsageStatsTimer=window.setInterval((async()=>{const t=Date.now(),n={connectionInterval:AH("EXTENSION_USAGE_UPLOAD_INTERVAL")/1e3,details:[],lts:t};let r=[];const i=this.requestAllTracks&&this.requestAllTracks()||[];for(const e of i)!e.muted&&e.enabled&&(r=r.concat(await e.getProcessorUsage()));const o=this.requestRemoteMedia&&this.requestRemoteMedia()||[];for(const[e,t]of o)t.has(kK.VIDEO)&&e.videoTrack&&(r=r.concat(await e.videoTrack.getProcessorUsage())),t.has(kK.AUDIO)&&e.audioTrack&&(r=r.concat(await e.audioTrack.getProcessorUsage()));if(0===r.length)return;n.details=function(e,t){const n={};for(const{id:s,value:a,level:c,direction:d}of e){var r;const e=null!==(r=t.get(s))&&void 0!==r?r:0,l=2===a?e+AH("EXTENSION_USAGE_UPLOAD_INTERVAL")/1e3:e;var i,o;t.set(s,l),n[s]?(2===a&&(n[s].value=a),c>n[s].level&&(n[s].level=c),"remote"===d&&(n[s].remoteUidCount+=1),n[s].totalTs=null!==(i=t.get(s))&&void 0!==i?i:0):n[s]={value:a,level:c,remoteUidCount:"local"===d?0:1,totalTs:null!==(o=t.get(s))&&void 0!==o?o:0}}return Object.keys(n).map((e=>{const{level:t,value:r,totalTs:i}=n[e];return{id:e,level:t,value:r,totalTs:i}}))}(r,e);const s=Date.now(),a=s>t?s:t+1;this.requestUpload&&this.requestUpload(oK.EXTENSION_USAGE_STATS,{usageStats:n,sendTs:a})}),AH("EXTENSION_USAGE_UPLOAD_INTERVAL"))}stopUploadExtensionUsageStats(){this.uploadExtensionUsageStarted&&(this.uploadExtensionUsageStarted=!1,this.uploadExtUsageStatsTimer&&window.clearInterval(this.uploadExtUsageStatsTimer),this.uploadExtUsageStatsTimer=void 0)}}class y1{get hasVideo(){return this._video_enabled_&&!this._video_muted_&&this._video_added_}get hasAudio(){return this._audio_enabled_&&!this._audio_muted_&&this._audio_added_}get audioTrack(){if(this.hasAudio||this._audio_pre_subscribed)return this._audioTrack}get videoTrack(){if(this.hasVideo||this._video_pre_subscribed)return this._videoTrack}get dataChannels(){return this._dataChannels}constructor(e,t){SU(this,"uid",void 0),SU(this,"_uintid",void 0),SU(this,"_trust_in_room_",!0),SU(this,"_trust_audio_enabled_state_",!0),SU(this,"_trust_video_enabled_state_",!0),SU(this,"_trust_audio_mute_state_",!0),SU(this,"_trust_video_mute_state_",!0),SU(this,"_audio_muted_",!1),SU(this,"_video_muted_",!1),SU(this,"_audio_enabled_",!0),SU(this,"_video_enabled_",!0),SU(this,"_audio_added_",!1),SU(this,"_video_added_",!1),SU(this,"_is_pre_created",!1),SU(this,"_video_pre_subscribed",!1),SU(this,"_audio_pre_subscribed",!1),SU(this,"_trust_video_stream_added_state_",!0),SU(this,"_trust_audio_stream_added_state_",!0),SU(this,"_audioTrack",void 0),SU(this,"_videoTrack",void 0),SU(this,"_dataChannels",[]),SU(this,"_audioSSRC",void 0),SU(this,"_videoSSRC",void 0),SU(this,"_audioOrtc",void 0),SU(this,"_videoOrtc",void 0),SU(this,"_cname",void 0),SU(this,"_rtxSsrcId",void 0),SU(this,"_videoMid",void 0),SU(this,"_audioMid",void 0),this.uid=e,this._uintid=t}}let v1=function(e){return e.SEND_ONLY="SEND_ONLY",e.RECEIVE_ONLY="RECEIVE_ONLY",e}({});function b1(e,t){var n;let r;switch(t){case VK.LocalAudioTrack:r=RK.Audio;break;case VK.LocalVideoTrack:r=Fv(n=e._hints).call(n,BJ.SCREEN_TRACK)?RK.Screen:RK.High;break;case VK.LocalVideoLowTrack:r=RK.Low}return r}function S1(e){const t=SJ();if(e.some((e=>e._bypassWebAudio)))throw new eG(ZB.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");if(!t.webAudioMediaStreamDest)throw new eG(ZB.NOT_SUPPORTED,"cannot publish multiple tracks because your browser does not support audio mixing")}function T1(e,t){S1(e);const n=t||new HQ;return e.forEach((e=>n.addAudioTrack(e))),n}var R1,C1,w1,I1,A1,O1,x1,N1,P1,D1,L1,k1;function M1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function U1(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M1(Object(n),!0).forEach((function(t){SU(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M1(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}let V1=(R1=F1(v1.SEND_ONLY),C1=F1(v1.SEND_ONLY),w1=F1(),I1=F1(v1.RECEIVE_ONLY),A1=F1(v1.RECEIVE_ONLY),O1=F1(v1.RECEIVE_ONLY),x1=F1(v1.RECEIVE_ONLY),N1=F1(v1.RECEIVE_ONLY),P1=F1(v1.RECEIVE_ONLY),D1=F1(),L1=F1(v1.RECEIVE_ONLY),k1=class extends mG{get state(){return this._state}set state(e){const t=this._state;this._state=e,this.emit(jK.StateChange,t,this._state)}constructor(e,t){super(),SU(this,"isPlanB",!1),SU(this,"store",void 0),SU(this,"statsUploader",void 0),SU(this,"sendConnection",void 0),SU(this,"recvConnection",void 0),SU(this,"localTrackMap",new Map),SU(this,"remoteUserMap",new Map),SU(this,"localDataChannels",[]),SU(this,"pendingLocalTracks",[]),SU(this,"pendingRemoteTracks",[]),SU(this,"statsCollector",void 0),SU(this,"dtlsFailedCount",0),SU(this,"sendMutex",new cH("P2PChannel2-send-mutex")),SU(this,"recvMutex",new cH("P2PChannel2-recv-mutex")),SU(this,"_state",FK.Disconnected),SU(this,"_restartStates",["disconnected","failed"]),SU(this,"reconnectInterval",void 0),SU(this,"uploadUnplinkStarted",!1),SU(this,"uploadDownlinkStarted",!1),SU(this,"uplinkStateUploadInterval",void 0),SU(this,"downlinkStatsUploadInterval",void 0),SU(this,"handleMuteLocalTrack",(async(e,t,n)=>{const r=await this.sendMutex.lock("Locking from P2PChannel2.handleMuteLocalTrack");try{if(!this.sendConnection||this.state!==FK.Connected)return void n(new eG(ZB.INVALID_OPERATION,"Cannot call P2PChannel2.handleMuteLocalTrack before sendConnection established."));const r=this.filterTobeMutedTracks(e);if(0===r.length)return void t();const s=r.find((e=>"videoLowTrack"===e[0]));s&&s[1].track._originMediaStreamTrack.stop(),await this.sendConnection.muteLocal(r.map((e=>{let[,{id:t}]=e;return t})));let a=!1;var i,o;a="video"===e.trackMediaType?!(null===(i=this.localTrackMap.get(VK.LocalAudioTrack))||void 0===i||!i.track._muted):void 0===(null===(o=this.localTrackMap.get(VK.LocalVideoTrack))||void 0===o?void 0:o.id);const c=this.createMuteMessage(r);await NG(this,jK.RequestMuteLocal,c);const d="video"===e.trackMediaType?QK.MUTE_LOCAL_VIDEO:QK.MUTE_LOCAL_AUDIO;await NG(this,jK.RequestP2PMuteLocal,{action:d,message:c,isMuteAll:a}),t()}catch(e){n(e)}finally{r()}})),SU(this,"handleUnmuteLocalTrack",(async(e,t,n)=>{const r=await this.sendMutex.lock("Locking from P2PChannel2.handleUnmuteLocalTrack");try{if(!this.sendConnection||this.state!==FK.Connected)return void n(new eG(ZB.INVALID_OPERATION,"Cannot call P2PChannel2.handleUnmuteLocalTrack before sendConnection established."));const r=this.filterTobeUnmutedTracks(e);if(0===r.length)return void t();await this.sendConnection.unmuteLocal(r.map((e=>{let[,{id:t}]=e;return t})));const i=this.createUnmuteMessage(r),o="video"===e.trackMediaType?QK.UNMUTE_LOCAL_VIDEO:QK.UNMUTE_LOCAL_AUDIO;await NG(this,jK.RequestP2PMuteLocal,{action:o,message:i}),t()}catch(e){n(e)}finally{r()}})),SU(this,"handleUpdateVideoEncoder",(async(e,t,n)=>{const r=await this.sendMutex.lock("Locking from P2PChannel2.handleSetVideoEncoder");try{const n=this.localTrackMap.get(VK.LocalVideoTrack);if(!this.sendConnection||!n||n.track!==e||this.state!==FK.Connected)return void t();const{id:r,track:i}=n;r&&(await this.sendConnection.updateSendParameters(r,i),await this.sendConnection.updateEncoderConfig(r,i),this.emit(jK.UpdateVideoEncoder,i)),t()}catch(e){n(e)}finally{r()}})),SU(this,"handleUpdateVideoSendParameters",(async(e,t,n)=>{const r=await this.sendMutex.lock("Locking from P2PChannel2.handleUpdateVideoSendParameters");try{const n=this.localTrackMap.get(VK.LocalVideoTrack);if(!this.sendConnection||!n||n.track!==e||this.state!==FK.Connected)return void t();const{id:r,track:i}=n;r&&await this.sendConnection.updateSendParameters(r,i),t()}catch(e){n(e)}finally{r()}})),SU(this,"handleReplaceTrack",(async(e,t,n,r)=>{let i;KH.debug("[".concat(this.store.clientId,"] P2PChannel2 handleReplaceTrack for [track-id-").concat(e.getTrackId(),"]")),"boolean"==typeof r&&r||(i=await this.sendMutex.lock("From P2PChannel2.handleReplaceTrack"));try{var o;const n=Array.from(this.localTrackMap.entries()).find((t=>{let[,{track:n}]=t;return e===n}));if(!this.sendConnection||!n||void 0===n[1].id||this.state!==FK.Connected)return void t();if(await(null===(o=this.sendConnection)||void 0===o?void 0:o.replaceTrack(e,n[1].id)),n[0]===VK.LocalVideoTrack&&SJ().supportDualStreamEncoding){const t=this.localTrackMap.get(VK.LocalVideoLowTrack);if(t){const n=e._mediaStreamTrack.clone();t.track._originMediaStreamTrack.stop(),t.track._mediaStreamTrack=n,t.track._originMediaStreamTrack=n,await new LO(((e,n)=>{this.handleReplaceTrack(t.track,e,n,!0)}))}}t()}catch(e){n(e)}finally{var s;null===(s=i)||void 0===s||s()}})),SU(this,"handleGetLocalVideoStats",(e=>{e(this.statsCollector.getLocalVideoTrackStats())})),SU(this,"handleGetLocalAudioStats",(e=>{e(this.statsCollector.getLocalAudioTrackStats())})),SU(this,"handleGetRemoteVideoStats",(e=>this.statsCollector.getRemoteVideoTrackStats(e.uid)[e.uid])),SU(this,"handleGetRemoteAudioStats",(e=>this.statsCollector.getRemoteAudioTrackStats(e.uid)[e.uid])),this.store=e,this.statsCollector=t,this.statsCollector.addP2PChannel(this),this.statsUploader=new E1(e),this.bindStatsUploaderEvents(),this.reconnectInterval=window.setInterval((()=>{[this.sendConnection,this.recvConnection].forEach((e=>{e&&("disconnected"!==e.iceConnectionState&&"failed"!==e.iceConnectionState||this.handleDisconnect(e.direction))}))}),AH("ICE_RESTART_INTERVAL"))}async startP2PConnection(e,t){throw new eG(ZB.NOT_SUPPORTED,"p2p mode does not support startP2PConnection.")}async connect(e){throw new eG(ZB.NOT_SUPPORTED,"p2p mode does not support connect.")}async startP2P(e,t){let n;try{if(t){this.recvConnection&&(KH.warning("[".concat(this.store.clientId,"] P2PChannel.startP2P reset recvConnection.")),this.recvConnection.close(),this.unbindConnectionEvents(this.recvConnection)),n=await this.recvMutex.lock("From P2PChannel.startP2P"),this.recvConnection=new t1(e,this.store,aK.RECEIVE_ONLY),this.bindConnectionEvents(this.recvConnection);const r=await this.recvConnection.establish(t);return{iceParameters:r.iceParameters,dtlsParameters:r.dtlsParameters,sdp:r.sdp}}{this.state=FK.New,this.sendConnection&&(KH.warning("[".concat(this.store.clientId,"] P2PChannel.startP2P reset sendConnection.")),this.sendConnection.close(),this.unbindConnectionEvents(this.sendConnection)),n=await this.sendMutex.lock("From P2PChannel.startP2P"),this.sendConnection=new t1(e,this.store),this.store.peerConnectionStart(),this.bindConnectionEvents(this.sendConnection);const t=await this.sendConnection.establish();return{iceParameters:t.iceParameters,dtlsParameters:t.dtlsParameters,sdp:t.sdp}}}finally{n&&n()}}async p2pConnect(e){if(!this.sendConnection)throw new eG(ZB.UNEXPECTED_ERROR,"Cannot P2PChannel2.p2pConnect before P2PChannel2.startP2PConnection .");this.store.peerConnectionStart(),await this.sendConnection.connect(e),this.statsUploader.startUploadTransportStats(),this.statsUploader.startUploadExtensionUsageStats(),this.state=FK.Connected}async addRemoteCandidate(e,t){if(t===aK.RECEIVE_ONLY){if(!this.sendConnection)throw new eG(ZB.UNEXPECTED_ERROR,"Cannot P2PChannel2.connect before P2PChannel2.addRemoteCandidate .");await this.sendConnection.addRemoteCandidate(e)}else{if(!this.recvConnection)throw new eG(ZB.UNEXPECTED_ERROR,"Cannot P2PChannel2.connect before P2PChannel2.addRemoteCandidate .");await this.recvConnection.addRemoteCandidate(e)}}publish(e,t,n){var r=this;return Cj((function*(){const i=yield wj(r.sendMutex.lock("From P2PChannel.publish"));try{if(!r.sendConnection||r.state!==FK.Connected){r.throwIfTrackTypeNotMatch(e);const t=e.filter((e=>-1===r.pendingLocalTracks.indexOf(e)));return void(r.pendingLocalTracks=r.pendingLocalTracks.concat(t))}r.store.pubId=r.store.pubId+1,E0.markPublishStart(r.store.clientId,r.store.pubId);const i=r.filterTobePublishedTracks(e,t,n);if(0===i.length)return void(yield wj(r.tryToUnmuteAudio(e)));i.forEach((e=>{let{track:t,type:n}=e;const i=Date.now();r.store.publish(t.getTrackId(),n===VK.LocalAudioTrack?"audio":"video",i)})),r.bindLocalTrackEvents(i);const o=yield wj(r.sendConnection.send(i.map((e=>{let{track:t}=e;return t})),r.store.codec,r.store.audioCodec)),s=(yield wj(o.next())).value,a=r.createGatewayPublishMessage(i,s);try{yield a}catch(e){throw o.throw(e),(null==e?void 0:e.code)===ZB.WS_ABORT&&i.forEach((e=>{let{track:t}=e;-1===r.pendingLocalTracks.indexOf(t)&&r.pendingLocalTracks.push(t)})),r.unbindLocalTrackEvents(i),e}yield wj(o.next()),i.forEach((e=>{let{type:t}=e;r.statsCollector.addLocalStats(t)})),r.statsUploader.startUploadOutboundStats(),r.assignLocalTracks(i,s),i.forEach((e=>{let{track:t,type:n}=e;const i=Date.now();r.store.publish(t.getTrackId(),n===VK.LocalAudioTrack?"audio":"video",void 0,i)})),r.startUploadUplinkState()}finally{i()}}))()}async unpublish(e){if(!this.sendConnection||this.state!==FK.Connected)return void(0===e.length?this.pendingLocalTracks.length=0:this.pendingLocalTracks=this.pendingLocalTracks.filter((t=>!Fv(e).call(e,t))));const t=this.filterTobeUnpublishedTracks(e);if(0===t.length)return;const n=t.find((e=>"videoLowTrack"===e[0]));n&&n[1].track.close();const r=this.createGatewayUnpublishMessage(t);if(await this.sendConnection.stopSending(t.map((e=>{let[,{id:t}]=e;return t}))),this.withdrawLocalTracks(t),this.unbindLocalTrackEvents(t.map((e=>{let[t,{track:n}]=e;return{type:t,track:n}}))),t.forEach((e=>{let[t]=e;this.statsCollector.removeLocalStats(t)})),0===this.localTrackMap.size&&(this.statsUploader.stopUploadOutboundStats(),this.stopUploadUplinkState()),this.sendConnection&&this.state===FK.Connected)return n&&n[1].track.close(),r;e.forEach((e=>{const t=this.pendingLocalTracks.indexOf(e);-1!==t&&this.pendingLocalTracks.splice(t,1)}))}startUploadUplinkState(){if(this.uploadUnplinkStarted)return;this.uploadUnplinkStarted=!0,this.uplinkStateUploadInterval&&window.clearInterval(this.uplinkStateUploadInterval);const e=()=>{const e=[],t=[];Array.from(this.localTrackMap.entries()).forEach((n=>{let[r,{track:i,ssrcs:o}]=n;const s={stream_type:b1(i,r),ssrcs:o};i._muted||!i._enabled?e.push(s):t.push(s)})),e.length>0&&e.forEach((e=>{NG(this,jK.RequestMuteLocal,[e])})),t.length>0&&t.forEach((e=>{NG(this,jK.RequestUnmuteLocal,[e])}))};e(),this.uplinkStateUploadInterval=window.setInterval((()=>{e()}),3e3)}stopUploadUplinkState(){this.uploadUnplinkStarted&&(this.uploadUnplinkStarted=!1,this.uplinkStateUploadInterval&&window.clearInterval(this.uplinkStateUploadInterval))}publishLowStream(e){return Cj((function*(){throw new eG(ZB.NOT_SUPPORTED,"p2p mode does not support publishLowStream.")}))()}async republish(){this.pendingLocalTracks.length>0&&(KH.debug("[".concat(this.store.clientId,"] Emit P2PChannelEvents.RequestRePublish to republish tracks.")),await xG(this,jK.RequestRePublish,this.pendingLocalTracks),this.emit(jK.MediaReconnectEnd,this.store.uid),this.pendingLocalTracks=[])}async unpublishLowStream(){throw new eG(ZB.NOT_SUPPORTED,"p2p mode does not support unpublishLowStream.")}async subscribe(e,t,n,r){var i;if(!this.recvConnection)throw new eG(ZB.INVALID_OPERATION,"Cannot subscribe remote user when recvConnection disconnected.");if(null!==(i=this.remoteUserMap.get(e))&&void 0!==i&&i.has(t))return;const{track:o,mid:s,transceiver:a}=await this.recvConnection.receive(t,[{ssrcId:n}],String(e.uid),r);t===kK.AUDIO?(e._audioTrack?e._audioTrack._updateOriginMediaStreamTrack(o):(e._audioTrack=new z$(o,e.uid,e._uintid,this.store),KH.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote audio track: ").concat(e._audioTrack.getTrackId()))),a&&e._audioTrack._updateRtpTransceiver(a),this.bindRemoteTrackEvents(e,e._audioTrack)):(e._videoSSRC=n,e._videoTrack?e._videoTrack._updateOriginMediaStreamTrack(o):(e._videoTrack=new K$(o,e.uid,e._uintid,this.store),KH.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote video track: ").concat(e._videoTrack.getTrackId()))),a&&e._videoTrack._updateRtpTransceiver(a),this.bindRemoteTrackEvents(e,e._videoTrack));const c=this.remoteUserMap.get(e);c?c.set(t,s):this.remoteUserMap.set(e,new Map([[t,s]])),this.statsCollector.addRemoteStats(e.uid),this.statsUploader.startUploadInboundStats(),this.startUploadDownlinkState();const d=this.pendingRemoteTracks.findIndex((n=>{let{user:r,kind:i}=n;return r.uid===e.uid&&t===i}));-1!==d&&(this.pendingRemoteTracks.splice(d,1),this.emit(jK.MediaReconnectEnd,e.uid))}async mockSubscribe(e,t,n,r){if(!this.recvConnection)throw new eG(ZB.INVALID_OPERATION,"Cannot subscribe remote user when recvConnection disconnected.");await this.recvConnection.mockReceive(t,[{ssrcId:n}],String(e.uid),r)}async unsubscribe(e,t,n){const r=this.pendingRemoteTracks.filter((n=>{let{user:r,kind:i}=n;return void 0!==t?r.uid===e.uid&&t===i:r.uid===e.uid}));if(r.forEach((e=>{const t=this.pendingRemoteTracks.indexOf(e);this.pendingRemoteTracks.splice(t,1)})),this.recvConnection||n||r.forEach((t=>{let{kind:n}=t;var r;if(n===kK.AUDIO)null===(r=e._audioTrack)||void 0===r||r._destroy(),e._audioTrack=void 0;else if(n===kK.VIDEO){var i;null===(i=e._videoTrack)||void 0===i||i._destroy(),e._videoTrack=void 0}})),!this.recvConnection)return;const i=this.filterTobeUnSubscribedTracks(e,t);0!==i.length&&(await this.recvConnection.stopReceiving(i.map((e=>{let[,{id:t}]=e;return t}))),this.withdrawRemoteTracks(i),0===this.remoteUserMap.size&&(this.statsUploader.stopUploadInboundStats(),this.stopUploadDownlinkState()),i.forEach((e=>{let[t,{kind:r}]=e;var i,o;if(r===kK.VIDEO&&t._videoSSRC&&(null===(i=this.recvConnection)||void 0===i||i.setStatsRemoteVideoIsReady(t._videoSSRC,!1)),r===kK.VIDEO)this.unbindRemoteTrackEvents(t._videoTrack),n||(null===(o=t._videoTrack)||void 0===o||o._destroy(),t._videoTrack=void 0);else if(r===kK.AUDIO){var s;this.unbindRemoteTrackEvents(t._audioTrack),n||(null===(s=t._audioTrack)||void 0===s||s._destroy(),t._audioTrack=void 0)}})),i.forEach((e=>{let[,{kind:t}]=e;NG(this,jK.RequestP2PMuteRemote,t)})))}startUploadDownlinkState(){if(this.uploadDownlinkStarted)return;this.uploadDownlinkStarted=!0,this.downlinkStatsUploadInterval&&window.clearInterval(this.downlinkStatsUploadInterval);const e=()=>Array.from(this.remoteUserMap.entries()).forEach((e=>{let[,t]=e;[kK.VIDEO,kK.AUDIO].forEach((e=>{t.has(e)?NG(this,jK.RequestP2PUnmuteRemote,e):NG(this,jK.RequestP2PMuteRemote,e)}))}));e(),this.downlinkStatsUploadInterval=window.setInterval((()=>{e()}),3e3)}stopUploadDownlinkState(){this.uploadDownlinkStarted&&(this.uploadDownlinkStarted=!1,this.downlinkStatsUploadInterval&&window.clearInterval(this.downlinkStatsUploadInterval))}getAllDataChannels(){return this.localDataChannels}async massSubscribe(e){throw new eG(ZB.NOT_SUPPORTED,"p2p mode does not support massSubscribe.")}async massSubscribeNoLock(e){throw new eG(ZB.NOT_SUPPORTED,"p2p mode does not support massSubscribeNoLock.")}async massUnsubscribe(e){throw new eG(ZB.NOT_SUPPORTED,"p2p mode does not support massUnsubscribe.")}async massUnsubscribeNoLock(e){throw new eG(ZB.NOT_SUPPORTED,"p2p mode does not support massUnsubscribeNoLock.")}async muteRemote(e,t){if(!this.recvConnection)return;const n=this.remoteUserMap.get(e);if(!n)return void KH.warning("[".concat(this.store.clientId,"] P2PChannel2.muteRemote has no remote user ").concat(e.uid,"."));if(!n.get(t))return void KH.warning("[".concat(this.store.clientId,"] P2PChannel2.muteRemote has no remote user ").concat(e.uid," media type ").concat(t,"."));const r=t===kK.VIDEO?e._videoSSRC:e._audioSSRC;void 0!==r&&this.recvConnection.setStatsRemoteVideoIsReady(r,!1)}async unmuteRemote(e,t){return this.unmuteRemoteNoLock(e,t)}async unmuteRemoteNoLock(e,t){if(!this.recvConnection)return;const n=this.remoteUserMap.get(e);n?n.get(t)||KH.warning("[".concat(this.store.clientId,"] P2PChannel2.unmuteRemote has no remote user ").concat(e.uid," media type ").concat(t,".")):KH.warning("[".concat(this.store.clientId,"] P2PChannel2.unmuteRemote has no remote user ").concat(e.uid,"."))}getAllTracks(e){const t=this.localTrackMap.get(VK.LocalAudioTrack);if((null==t?void 0:t.track)instanceof HQ){const n=t.track;return Array.from(this.localTrackMap.entries()).filter((e=>{let[t]=e;return t!==VK.LocalAudioTrack})).filter((t=>{let[n]=t;return!(e&&n===VK.LocalVideoLowTrack)})).map((e=>{let[,{track:t}]=e;return t})).concat(n.trackList)}return Array.from(this.localTrackMap.entries()).filter((t=>{let[n]=t;return!(e&&n===VK.LocalVideoLowTrack)})).map((e=>{let[,{track:t}]=e;return t}))}reportPublishEvent(e,t,n,r,i){if(e){const n=this.localTrackMap.get(VK.LocalAudioTrack),o=r?this.localTrackMap.get(VK.LocalVideoLowTrack):this.localTrackMap.get(VK.LocalVideoTrack);ZH.publish(this.store.sessionId,{eventElapse:E0.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:e,ec:t,audioName:null==n?void 0:n.track.getTrackLabel(),videoName:null==o?void 0:o.track.getTrackLabel(),screenshare:-1!==(null==o?void 0:o.track._hints.indexOf(BJ.SCREEN_TRACK)),audio:!!n,video:!!o,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:i})}else{var o;n||(n=[]);const s=n.find((e=>e instanceof jQ)),a=r?null===(o=this.localTrackMap.get(VK.LocalVideoTrack))||void 0===o?void 0:o.track:n.find((e=>e instanceof O$));ZH.publish(this.store.sessionId,{eventElapse:E0.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:e,ec:t,audioName:null==s?void 0:s.getTrackLabel(),videoName:null==a?void 0:a.getTrackLabel(),screenshare:-1!==(null==a?void 0:a._hints.indexOf(BJ.SCREEN_TRACK)),audio:!!s,video:!!a,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:i})}}reportSubscribeEvent(e,t,n,r){const i=r===kK.VIDEO?n._videoSSRC:n._audioSSRC;i&&ZH.subscribe(this.store.sessionId,{succ:e,ec:t,video:r===kK.VIDEO,audio:r===kK.AUDIO,peerid:n.uid,subscribeRequestid:r===kK.VIDEO?n._videoSSRC:n._audioSSRC,p2pid:this.store.p2pId,eventElapse:E0.measureFromSubscribeStart(this.store.clientId,i)})}reset(){KH.debug("[".concat(this.store.clientId,"] P2PChannel2.reset")),this.sendMutex=new cH("P2PChannel2-send-mutex"),this.sendMutex=new cH("P2PChannel2-recv-mutex"),this.sendConnection&&(this.sendConnection.close(),this.unbindConnectionEvents(this.sendConnection),this.sendConnection=void 0),this.recvConnection&&(this.recvConnection.close(),this.unbindConnectionEvents(this.recvConnection),this.recvConnection=void 0),this.statsUploader.stopUploadOutboundStats(),this.statsUploader.stopUploadInboundStats(),this.statsUploader.stopUploadTransportStats(),this.statsUploader.stopUploadExtensionUsageStats(),this.stopUploadUplinkState(),this.stopUploadDownlinkState(),this.unbindLocalTrackEvents(),this.unbindAllRemoteTrackEvents(),this.unbindRtpTransceiver();const e=this.localTrackMap.get(VK.LocalAudioTrack);if((null==e?void 0:e.track)instanceof HQ){if(e.track.trackList.length>0){const t=e.track;e.track.trackList.forEach((e=>{t.removeAudioTrack(e)}))}e.track.close()}this.localTrackMap.clear(),this.remoteUserMap.clear(),this.statsCollector.removeRemoteStats(),this.statsCollector.removeLocalStats(),this.dtlsFailedCount=0,this.pendingLocalTracks=[],this.pendingRemoteTracks=[],this.reconnectInterval&&(window.clearInterval(this.reconnectInterval),this.reconnectInterval=void 0),this.state=FK.Disconnected}getStats(e){var t,n;return e?null===(n=this.recvConnection)||void 0===n?void 0:n.getStats():null===(t=this.sendConnection)||void 0===t?void 0:t.getStats()}getRemoteVideoIsReady(e){var t;return(null===(t=this.recvConnection)||void 0===t?void 0:t.getRemoteVideoIsReady(e))||!1}getLocalAudioVolume(){const e=this.localTrackMap.get(VK.LocalAudioTrack);if(e)return e.track.getVolumeLevel()}getLocalVideoSize(){const e=this.localTrackMap.get(VK.LocalVideoTrack);if(e)return{width:e.track.videoWidth||0,height:e.track.videoHeight||0}}getEncoderConfig(e){const t=this.localTrackMap.get(e);return t&&t.track instanceof O$||t&&t.track instanceof jQ?t.track._encoderConfig:void 0}getLocalMedia(e){return this.localTrackMap.get(e)}hasLocalMedia(){return this.localTrackMap.size>0}hasRemoteMedia(e,t){if(!e)return this.remoteUserMap.size>0;const n=this.remoteUserMap.get(e);return!!n&&(!t||n.has(t))}async hasRemoteMediaWithLock(e,t){if(!e)return this.remoteUserMap.size>0;const n=this.remoteUserMap.get(e);return!!n&&(!t||n.has(t))}getRemoteMedia(e){var t;const n=Array.from(Zx(t=this.remoteUserMap).call(t)).find((t=>t.uid===e));return n?{audioTrack:n.audioTrack,audioSSRC:n._audioSSRC,videoTrack:n.videoTrack,videoSSRC:n._videoSSRC}:{}}getAudioLevels(){let e=Array.from(this.remoteUserMap.entries()).map((e=>{let[t]=e;return{uid:t.uid,level:t.audioTrack?100*t.audioTrack._source.getAccurateVolumeLevel():0}}));const t=this.localTrackMap.get(VK.LocalAudioTrack);return t&&e.push({level:100*t.track._source.getAccurateVolumeLevel(),uid:this.store.uid}),e=XN(e).call(e,((e,t)=>e.level-t.level)),e}async disconnectForReconnect(){this.sendConnection&&this.recvConnection&&(KH.debug("[".concat(this.store.clientId,"] P2PChannel2.disconnectForReconnect closing P2PConnection")),this.state=FK.Reconnecting,AH("KEEP_LAST_FRAME")&&0!==this.remoteUserMap.size&&Array.from(this.remoteUserMap.entries()).forEach((e=>{let[t]=e;var n;t._videoTrack&&t._videoTrack._player&&(null===(n=t._videoTrack._player.getVideoElement())||void 0===n||n.pause(),t._videoTrack._player.isKeepLastFrame=!0,t._videoTrack._originMediaStreamTrack.stop())})),this.sendConnection.close(),this.unbindConnectionEvents(this.sendConnection),this.sendConnection=void 0,this.recvConnection.close(),this.unbindConnectionEvents(this.recvConnection),this.recvConnection=void 0,0!==this.localTrackMap.size&&(Array.from(this.localTrackMap.entries()).forEach((e=>{var t;let[n,{track:r}]=e;switch(n){case VK.LocalVideoTrack:Fv(t=r._hints).call(t,BJ.LOW_STREAM)?r.close():this.pendingLocalTracks.push(r);break;case VK.LocalAudioTrack:r instanceof HQ?this.pendingLocalTracks=this.pendingLocalTracks.concat(r.trackList):this.pendingLocalTracks.push(r);case VK.LocalVideoLowTrack:}})),this.emit(jK.MediaReconnectStart,this.store.uid)),this.unbindLocalTrackEvents(),this.localTrackMap.clear(),0!==this.remoteUserMap.size&&Array.from(this.remoteUserMap.entries()).forEach((e=>{let[t,n]=e;Array.from(Zx(n).call(n)).forEach((e=>{this.setPendingRemoteMedia(t,e)})),this.emit(jK.MediaReconnectStart,t.uid)})),this.unbindAllRemoteTrackEvents(),this.remoteUserMap.clear(),this.stopUploadUplinkState(),this.stopUploadDownlinkState(),this.statsUploader.stopUploadOutboundStats(),this.statsUploader.stopUploadInboundStats(),this.statsUploader.stopUploadTransportStats(),KH.debug("[".concat(this.store.clientId,"] P2PChannel2 disconnected, waiting to reconnect.")))}hasPendingRemoteMedia(e,t){for(const n of this.pendingRemoteTracks){const{user:r,kind:i}=n;if((e instanceof y1?e.uid:e)===r.uid&&t===i)return!0}return!1}setPendingRemoteMedia(e,t){this.hasPendingRemoteMedia(e,t)||this.pendingRemoteTracks.push({user:e,kind:t})}async restartICE(e,t){let n,r;if(e===aK.SEND_ONLY){if(!this.sendConnection)throw new eG(ZB.INVALID_OPERATION,"Cannot call P2PChannel2.handleMuteLocalTrack before sendConnection established.");n=await this.sendMutex.lock("From P2PChannel.restartICE"),r=this.sendConnection}else{if(!this.recvConnection)throw new eG(ZB.INVALID_OPERATION,"Cannot call P2PChannel2.handleMuteLocalTrack before recvConnection established.");n=await this.recvMutex.lock("From P2PChannel.restartICE"),r=this.recvConnection}try{if(t){const e=await r.restartICE(t);return r.isInRestartIce=!1,e}{const e=await r.restartICE();if(e){const t=await xG(this,jK.RequestP2PRestartICE,{direction:aK.RECEIVE_ONLY,iceParameter:e});await r.restartICE(t),r.isInRestartIce=!1}}}finally{n()}}getUplinkNetworkQuality(){if(!this.sendConnection)return 0;const e=this.sendConnection.getStats(),t=this.localTrackMap.get(VK.LocalVideoTrack),n=this.localTrackMap.get(VK.LocalAudioTrack),r=e.videoSend.find((e=>{var n;return e.ssrc===(null==t||null===(n=t.ssrcs)||void 0===n?void 0:n[0].ssrcId)})),i=e.audioSend.find((e=>{var t;return e.ssrc===(null==n||null===(t=n.ssrcs)||void 0===t?void 0:t[0].ssrcId)}));if(!r||!i)return 1;const o=PG(this,jK.NeedSignalRTT),s=r?r.rttMs:void 0,a=i?i.rttMs:void 0,c=s&&a?(s+a)/2:s||a,d=(c&&o?(c+o)/2:c||o)||0,l=100*e.sendPacketLossRate*.7/50+.3*d/1500,h=l<.17?1:l<.36?2:l<.59?3:l<.1?4:5,u=null==t?void 0:t.track;if(u&&u._encoderConfig&&-1===u._hints.indexOf(BJ.SCREEN_TRACK)){const t=u._encoderConfig.bitrateMax,n=e.bitrate.actualEncoded;if(t&&n){const e=(1e3*t-n)/(1e3*t);return nW[e<.15?0:e<.3?1:e<.45?2:e<.6?3:4][h]}}return h}getDownlinkNetworkQuality(){if(!this.recvConnection)return 0;const e=this.recvConnection.getStats();let t=0;return Array.from(this.remoteUserMap.entries()).forEach((n=>{let[r]=n;const i=r._audioSSRC,o=r._videoSSRC,s=e.audioRecv.find((e=>e.ssrc===i)),a=e.videoRecv.find((e=>e.ssrc===o));if(!s&&!a)return void(t+=1);const c=PG(this,jK.NeedSignalRTT),d=e.rtt,l=(d&&c?(d+c)/2:d||c)||0,h=s?s.jitterMs:void 0,u=e.recvPacketLossRate;let p=.7*u*100/50+.3*l/1500;h&&(p=.6*u*100/50+.2*l/1500+.2*h/400),t+=p<.1?1:p<.17?2:p<.36?3:p<.59?4:5})),this.remoteUserMap.size>0?Math.round(t/this.remoteUserMap.size):t}async muteLocalTrack(e){return new LO(((t,n)=>{this.handleMuteLocalTrack(e,t,n)}))}filterTobePublishedTracks(e,t,n){const r=[],i=SJ(),o=this.getAllTracks();e=MG(e=e.filter((e=>-1===o.indexOf(e))));let s=!1,a=!1;for(const o of e){if(o instanceof O$&&(this.localTrackMap.has(VK.LocalVideoTrack)||s?new eG(ZB.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS).throw():(r.push({track:o,type:VK.LocalVideoTrack}),s=!0),t)){const e=this.getLowVideoTrack(o,n);r.push({track:e,type:VK.LocalVideoLowTrack})}if(o instanceof jQ){const e=this.localTrackMap.get(VK.LocalAudioTrack);if(e){if(!(e.track instanceof HQ))throw new eG(ZB.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser does not support audio mixing");if(o._bypassWebAudio)throw new eG(ZB.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");e.track.addAudioTrack(o),this.bindLocalAudioTrackEvents(o,!0)}else if(a){const e=r.find((e=>{let{type:t}=e;return t===VK.LocalAudioTrack}));if(!(e.track instanceof HQ))throw new eG(ZB.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser does not support audio mixing");if(o._bypassWebAudio)throw new eG(ZB.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");e.track.addAudioTrack(o)}else{if(!i.webAudioMediaStreamDest||o instanceof HQ||o._bypassWebAudio)r.push({track:o,type:VK.LocalAudioTrack});else{const e=new HQ;e.addAudioTrack(o),r.push({track:e,type:VK.LocalAudioTrack})}a=!0}}}return r}filterTobeUnpublishedTracks(e){const t=[],n=this.getAllTracks();e=MG(e=e.filter((e=>-1!==n.indexOf(e))));for(const n of e){if(n instanceof jQ){const e=this.localTrackMap.get(VK.LocalAudioTrack);if(!e)continue;e.track instanceof HQ?(e.track.removeAudioTrack(n),this.unbindLocalAudioTrackEvents(n),0===e.track.trackList.length&&(t.push([VK.LocalAudioTrack,e]),e.track.close())):t.push([VK.LocalAudioTrack,e])}if(n instanceof O$){const e=this.localTrackMap.get(VK.LocalVideoTrack);if(!e)continue;t.push([VK.LocalVideoTrack,e]);const n=this.localTrackMap.get(VK.LocalVideoLowTrack);n&&t.push([VK.LocalVideoLowTrack,n])}}return t}bindLocalTrackEvents(e){e.forEach((e=>{let{track:t,type:n}=e;switch(n){case VK.LocalVideoTrack:t.addListener(jJ.GET_STATS,this.handleGetLocalVideoStats),t.addListener(jJ.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),t.addListener(jJ.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),t.addListener(jJ.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),t.addListener(jJ.NEED_UPDATE_VIDEO_SEND_PARAMETERS,this.handleUpdateVideoSendParameters),t.addListener(jJ.NEED_REPLACE_TRACK,this.handleReplaceTrack),t.addListener(jJ.NEED_MUTE_TRACK,this.handleMuteLocalTrack),t.addListener(jJ.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case VK.LocalAudioTrack:this.bindLocalAudioTrackEvents(t);case VK.LocalVideoLowTrack:}}))}bindLocalAudioTrackEvents(e,t){e instanceof HQ?e.trackList.forEach((e=>{e.addListener(jJ.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.addListener(jJ.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.addListener(jJ.GET_STATS,this.handleGetLocalAudioStats),e.addListener(jJ.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.addListener(jJ.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)})):(e.addListener(jJ.GET_STATS,this.handleGetLocalAudioStats),e.addListener(jJ.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.addListener(jJ.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.addListener(jJ.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.addListener(jJ.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack),t||e.addListener(jJ.NEED_REPLACE_TRACK,this.handleReplaceTrack))}unbindLocalTrackEvents(e){e||(e=Array.from(this.localTrackMap.entries()).map((e=>{let[t,{track:n}]=e;return{track:n,type:t}}))),e.forEach((e=>{let{track:t,type:n}=e;switch(n){case VK.LocalVideoTrack:t.off(jJ.GET_STATS,this.handleGetLocalVideoStats),t.off(jJ.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),t.off(jJ.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),t.off(jJ.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),t.off(jJ.NEED_UPDATE_VIDEO_SEND_PARAMETERS,this.handleUpdateVideoSendParameters),t.off(jJ.NEED_REPLACE_TRACK,this.handleReplaceTrack),t.off(jJ.NEED_MUTE_TRACK,this.handleMuteLocalTrack),t.off(jJ.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case VK.LocalAudioTrack:this.unbindLocalAudioTrackEvents(t);case VK.LocalVideoLowTrack:}}))}unbindLocalAudioTrackEvents(e){e instanceof HQ?e.trackList.forEach((e=>{e.off(jJ.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.off(jJ.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.off(jJ.GET_STATS,this.handleGetLocalAudioStats),e.off(jJ.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.off(jJ.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)})):(e.off(jJ.GET_STATS,this.handleGetLocalAudioStats),e.off(jJ.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.off(jJ.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.off(jJ.NEED_REPLACE_TRACK,this.handleReplaceTrack),e.off(jJ.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.off(jJ.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack))}bindRemoteTrackEvents(e,t){t instanceof K$&&t.addListener(jJ.GET_STATS,(t=>{t(this.handleGetRemoteVideoStats(e))})),t instanceof z$&&t.addListener(jJ.GET_STATS,(t=>{t(this.handleGetRemoteAudioStats(e))}))}unbindRemoteTrackEvents(e){e&&e.removeAllListeners(jJ.GET_STATS)}unbindAllRemoteTrackEvents(){Array.from(this.remoteUserMap.entries()).forEach((e=>{let[t,n]=e;n.has(kK.AUDIO)&&this.unbindRemoteTrackEvents(t._audioTrack),n.has(kK.VIDEO)&&this.unbindRemoteTrackEvents(t._videoTrack)}))}createGatewayPublishMessage(e,t){return e.map(((e,n)=>{var r;let i,{track:o,type:s}=e;switch(s){case VK.LocalAudioTrack:i=RK.Audio;break;case VK.LocalVideoTrack:i=Fv(r=o._hints).call(r,BJ.SCREEN_TRACK)?RK.Screen:RK.High;break;case VK.LocalVideoLowTrack:i=RK.Low}return{kind:s===VK.LocalAudioTrack?kK.AUDIO:kK.VIDEO,stream_type:i,mid:t[n].id,ssrcs:t[n].localSSRC,isMuted:o.muted||!o.enabled}}))}createGatewayUnpublishMessage(e){return e.map((e=>{var t;let n,[r,{track:i,ssrcs:o,id:s}]=e;switch(r){case VK.LocalVideoTrack:n=Fv(t=i._hints).call(t,BJ.SCREEN_TRACK)?RK.Screen:RK.High;break;case VK.LocalAudioTrack:n=RK.Audio;break;case VK.LocalVideoLowTrack:n=RK.Low}return{stream_type:n,ssrcs:o,mid:s}}))}assignLocalTracks(e,t){e.forEach(((e,n)=>{let{track:r,type:i}=e;this.localTrackMap.set(i,{track:r,id:t[n].id,ssrcs:t[n].localSSRC})}))}withdrawLocalTracks(e){e.forEach((e=>{let[t]=e;this.localTrackMap.delete(t)}))}bindConnectionEvents(e){e.onConnectionStateChange=async t=>{var n;KH.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: ").concat(e.name,".onConnectionStateChange(").concat(t,")")),this.emit(jK.PeerConnectionStateChange,t),"connected"!==t||this.store.keyMetrics.peerConnectionEnd||this.store.peerConnectionEnd(),"connected"===t&&(e.isInRestartIce=!1),Fv(n=this._restartStates).call(n,t)&&!e.isInRestartIce&&("disconnected"===t&&await JG(800),"disconnected"!==e.iceConnectionState&&"failed"!==e.iceConnectionState||this.handleDisconnect(e.direction))},e.onICEConnectionStateChange=e=>{"connected"!==e||this.store.keyMetrics.iceConnectionEnd||this.store.iceConnectionEnd(),KH.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onICEConnectionStateChange(").concat(e,")")),ZH.reportApiInvoke(this.store.sessionId,{name:"ICEConnectionStateChange",options:e,tag:yG.TRACER}).onSuccess(),this.emit(jK.IceConnectionStateChange,e)},e.onICETransportStateChange=e=>{KH.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onICETransportStateChange(").concat(e,")"))},e.onDTLSTransportStateChange=e=>{KH.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportStateChange(").concat(e,")"))},e.onDTLSTransportError=e=>{KH.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportError(").concat(e,")"))},e.onFirstAudioDecoded=e=>{var t;const n=Array.from(Zx(t=this.remoteUserMap).call(t)).find((t=>t._audioSSRC===e));var r;n&&(this.store.subscribe(n.uid,"audio",void 0,void 0,void 0,Date.now()),null===(r=n.audioTrack)||void 0===r||r.emit(qJ.FIRST_FRAME_DECODED),ZH.firstRemoteFrame(this.store.sessionId,JH.FIRST_AUDIO_DECODE,XH.FIRST_AUDIO_DECODE,{peer:n._uintid,subscribeElapse:E0.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId}))},e.onFirstAudioReceived=e=>{var t;const n=Array.from(Zx(t=this.remoteUserMap).call(t)).find((t=>t._audioSSRC===e));n&&ZH.firstRemoteFrame(this.store.sessionId,JH.FIRST_AUDIO_RECEIVED,XH.FIRST_AUDIO_RECEIVED,{peer:n._uintid,subscribeElapse:E0.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId})},e.onFirstVideoDecoded=(e,t,n)=>{this.reportVideoFirstFrameDecoded(e,t,n)},e.onFirstVideoReceived=e=>{var t;const n=Array.from(Zx(t=this.remoteUserMap).call(t)).find((t=>t._videoSSRC===e));n&&ZH.firstRemoteFrame(this.store.sessionId,JH.FIRST_VIDEO_RECEIVED,XH.FIRST_VIDEO_RECEIVED,{peer:n._uintid,subscribeElapse:E0.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId})},e.onSelectedLocalCandidateChanged=(e,t)=>{const n="relay"===e.candidateType,r="relay"===t.candidateType;"unknown"!==t.candidateType&&n===r||this.emit(jK.ConnectionTypeChange,n),KH.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.SelectedLocalCandidateChanged(").concat(JSON.stringify(Oz(t))," -> ").concat(JSON.stringify(Oz(e)),")"))},e.onSelectedRemoteCandidateChanged=(e,t)=>{KH.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.SelectedRemoteCandidateChanged(").concat(JSON.stringify(Oz(t))," -> ").concat(JSON.stringify(Oz(e)),")"))},e.onFirstVideoDecodedTimeout=e=>{this.reportVideoFirstFrameDecoded(e,void 0,void 0,!0)},e.onLocalCandidate=t=>{this.emit(jK.LocalCandidate,{candidate:t,direction:e.direction})}}unbindConnectionEvents(e){e.onConnectionStateChange=void 0,e.onICEConnectionStateChange=void 0,e.onICETransportStateChange=void 0,e.onDTLSTransportStateChange=void 0,e.onDTLSTransportError=void 0,e.onFirstAudioDecoded=void 0,e.onFirstAudioReceived=void 0,e.onFirstVideoDecoded=void 0,e.onFirstVideoReceived=void 0,e.onSelectedLocalCandidateChanged=void 0,e.onSelectedRemoteCandidateChanged=void 0,e.onFirstVideoDecodedTimeout=void 0,e.onLocalCandidate=void 0}async handleDisconnect(e){const t=e===aK.SEND_ONLY?this.sendConnection:this.recvConnection;t&&!t.isInRestartIce&&(t.isInRestartIce=!0,KH.debug("[".concat(this.store.clientId,"] [P2PChannel-").concat(t.name,"] start use restartICE")),e===aK.SEND_ONLY?this.restartICE(e):xG(this,jK.RequestP2PRestartICE,{direction:aK.SEND_ONLY}))}filterTobeMutedTracks(e){const t=[];if(-1===this.getAllTracks().indexOf(e))return t;const n=this.localTrackMap.get(VK.LocalAudioTrack);if(e instanceof jQ&&(null==n?void 0:n.track)instanceof HQ)return n.track.isActive||t.push([VK.LocalAudioTrack,n]),t;const r=Array.from(this.localTrackMap.entries()).find((t=>{let[,{track:n}]=t;return e===n}));if(r&&(t.push(r),r[0]===VK.LocalVideoTrack)){const e=this.localTrackMap.get(VK.LocalVideoLowTrack);e&&t.push([VK.LocalVideoLowTrack,e])}return t}filterTobeUnmutedTracks(e){const t=[],n=this.localTrackMap.get(VK.LocalAudioTrack);if(e instanceof jQ&&(null==n?void 0:n.track)instanceof HQ)return n.track.isActive&&t.push([VK.LocalAudioTrack,n]),t;const r=Array.from(this.localTrackMap.entries()).find((t=>{let[,{track:n}]=t;return e===n}));if(r)if(r[0]===VK.LocalVideoTrack){t.push(r);const e=this.localTrackMap.get(VK.LocalVideoLowTrack);e&&t.push([VK.LocalVideoLowTrack,e])}else t.push(r);return t}createMuteMessage(e){return e.map((e=>{var t;let n,[r,{track:i,ssrcs:o,id:s}]=e;switch(r){case VK.LocalAudioTrack:n=RK.Audio;break;case VK.LocalVideoTrack:n=Fv(t=i._hints).call(t,BJ.SCREEN_TRACK)?RK.Screen:RK.High;break;case VK.LocalVideoLowTrack:n=RK.Low}return{stream_type:n,ssrcs:o,mid:s}}))}createUnmuteMessage(e){return e.map((e=>{var t;let n,[r,{track:i,ssrcs:o,id:s}]=e;switch(r){case VK.LocalAudioTrack:n=RK.Audio;break;case VK.LocalVideoTrack:n=Fv(t=i._hints).call(t,BJ.SCREEN_TRACK)?RK.Screen:RK.High;break;case VK.LocalVideoLowTrack:n=RK.Low}return{stream_type:n,ssrcs:o,mid:s}}))}filterTobeUnSubscribedTracks(e,t){const n=[],r=this.remoteUserMap.get(e);if(!r)return n;if(t){const i=r.get(t);if(!i)return n;n.push([e,{kind:t,id:i}])}else Array.from(r.entries()).forEach((t=>{let[r,i]=t;n.push([e,{kind:r,id:i}])}));return n}createUnsubscribeMessage(e){const t=[];return e.forEach((e=>{let[n,{kind:r,id:i}]=e;switch(r){case kK.VIDEO:return void(n._videoSSRC&&t.push({stream_type:kK.VIDEO,ssrcId:n._videoSSRC}));case kK.AUDIO:return void(n._audioSSRC&&t.push({stream_type:kK.AUDIO,ssrcId:n._audioSSRC}))}})),t}withdrawRemoteTracks(e){e.forEach((e=>{let[t,{kind:n}]=e;const r=this.remoteUserMap.get(t);r&&(r.delete(n),0===Array.from(r.entries()).length&&this.remoteUserMap.delete(t))}))}async updateBitrateLimit(e){const t=this.localTrackMap.get(VK.LocalVideoTrack),n=this.localTrackMap.get(VK.LocalVideoLowTrack);t&&await t.track.setBitrateLimit(e.uplink),n&&e.low_stream_uplink&&await n.track.setBitrateLimit({max_bitrate:e.low_stream_uplink.bitrate,min_bitrate:e.low_stream_uplink.bitrate||0})}isP2PDisconnected(){if(this.sendConnection&&this.recvConnection){const e=this.sendConnection.peerConnectionState,t=this.recvConnection.peerConnectionState;return"connected"!==e&&"connected"!==t}return!0}async tryToUnmuteAudio(e){for(let t=0;t<e.length;t++)if(e[t]instanceof jQ){const n=this.filterTobeUnmutedTracks(e[t]);if(0===n.length)continue;const r=this.createUnmuteMessage(n);return void await NG(this,jK.RequestUnmuteLocal,r)}}bindStatsUploaderEvents(){this.statsUploader.requestStats=e=>this.getStats(e),this.statsUploader.requestLocalMedia=()=>Array.from(this.localTrackMap.entries()).filter((e=>{let[,{ssrcs:t}]=e;return!!t})),this.statsUploader.requestRemoteMedia=()=>Array.from(this.remoteUserMap.entries()),this.statsUploader.requestVideoIsReady=e=>{var t;return!(null===(t=this.recvConnection)||void 0===t||!t.getRemoteVideoIsReady(e))},this.statsUploader.requestUpload=(e,t)=>this.emit(jK.RequestUpload,e,t),this.statsUploader.requestUploadStats=e=>this.emit(jK.RequestUploadStats,e),this.statsUploader.requestAllTracks=()=>this.getAllTracks()}unbindStatsUploaderEvents(){this.statsUploader.requestStats=void 0,this.statsUploader.requestLocalMedia=void 0,this.statsUploader.requestRemoteMedia=void 0,this.statsUploader.requestVideoIsReady=void 0}async requestReconnect(){this.dtlsFailedCount+=1,await JG(hH(this.dtlsFailedCount,lH)),this.emit(jK.RequestReconnect)}async reconnectP2P(){}canPublishLowStream(){return this.localTrackMap.has(VK.LocalVideoTrack)||this.pendingLocalTracks.some((e=>e instanceof O$))}throwIfTrackTypeNotMatch(e){if(e.filter((e=>e instanceof O$)).length>1)throw new eG(ZB.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(e.filter((e=>e instanceof jQ)).length>1&&(e.some((e=>e instanceof jQ&&e._bypassWebAudio))||!SJ().webAudioMediaStreamDest))throw new eG(ZB.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode");for(const t of e){if(t instanceof O$&&this.pendingLocalTracks.some((e=>e instanceof O$)))throw new eG(ZB.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(t instanceof jQ&&this.pendingLocalTracks.some((e=>e instanceof jQ))&&(!SJ().webAudioMediaStreamDest||t._bypassWebAudio||this.pendingLocalTracks.some((e=>e instanceof jQ&&e._bypassWebAudio))))throw new eG(ZB.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode")}}getLowVideoTrack(e,t){const n=!AH("DISABLE_DUAL_STREAM_USE_ENCODING")&&SJ().supportDualStreamEncoding,r=U1(U1({},{width:160,height:120,framerate:15,bitrate:50}),t);let i;i=n?e._mediaStreamTrack.clone():r1(e,r);const o=XG(8,"track-low-"),s=new O$(i,U1(U1({},n&&{scaleResolutionDownBy:Az(r,e)}),{},{frameRate:r.framerate,bitrateMax:r.bitrate,bitrateMin:r.bitrate}),void 0,void 0,o);return s.on(KJ.TRANSCEIVER_UPDATED,(t=>{e._updateRtpTransceiver(t,GJ.LOW_STREAM)})),s._hints.push(BJ.LOW_STREAM),e.addListener(jJ.NEED_CLOSE,(()=>{s.close()})),s}async globalLock(){return this.recvMutex.lock("From P2PChannel2.globalLock")}reportVideoFirstFrameDecoded(e,t,n,r){var i;const o=Array.from(Zx(i=this.remoteUserMap).call(i)).find((t=>t._videoSSRC===e));if(o){r||this.store.subscribe(o.uid,"video",void 0,void 0,void 0,void 0,Date.now());const i=this.store.keyMetrics,s=i.subscribe.find((e=>e.userId===o.uid&&"video"===e.type));ZH.firstRemoteVideoDecode(this.store.sessionId,JH.FIRST_VIDEO_DECODE,XH.FIRST_VIDEO_DECODE,{peer:o._uintid,videowidth:t,videoheight:n,subscribeElapse:E0.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId,apEnd:i.requestAPEnd||0,apStart:i.requestAPStart||0,joinGwEnd:i.joinGatewayEnd||0,joinGwStart:i.joinGatewayStart||0,pcEnd:i.peerConnectionEnd||0,pcStart:i.peerConnectionStart||0,subscriberEnd:(null==s?void 0:s.subscribeEnd)||0,subscriberStart:(null==s?void 0:s.subscribeStart)||0,videoAddNotify:(null==s?void 0:s.streamAdded)||0,state:r?1:0})}}async remoteMediaSsrcChanged(e,t,n){if(!this.recvConnection)return!1;const r=this.remoteUserMap.get(e);if(!r)return!1;const i=r.get(t);if(!i)return!1;const o=await this.recvConnection.getRemoteSSRC(i);return void 0!==o&&o!==n}isPreSubScribe(e){return!1}async publishDataChannel(e){throw new eG(ZB.NOT_SUPPORTED)}async unpublishDataChannel(e){throw new eG(ZB.NOT_SUPPORTED)}async subscribeDataChannel(e,t){throw new eG(ZB.NOT_SUPPORTED)}async unsubscribeDataChannel(e,t){throw new eG(ZB.NOT_SUPPORTED)}hasPendingRemoteDataChannel(e,t){throw new eG(ZB.NOT_SUPPORTED)}setPendingRemoteDataChannel(e,t){throw new eG(ZB.NOT_SUPPORTED)}async preConnect(e){throw new eG(ZB.NOT_SUPPORTED)}getEstablishParams(){throw new eG(ZB.NOT_SUPPORTED)}async reSubscribe(e){throw new eG(ZB.NOT_SUPPORTED)}async updateVideoStreamParameter(e,t){throw new eG(ZB.NOT_SUPPORTED)}unbindRtpTransceiver(){0!==this.localTrackMap.size&&Array.from(this.localTrackMap.entries()).forEach((e=>{let[t,{track:n}]=e;t===VK.LocalVideoLowTrack?n._updateRtpTransceiver(void 0,GJ.LOW_STREAM):n._updateRtpTransceiver(void 0)}))}},YW(k1.prototype,"p2pConnect",[R1],Object.getOwnPropertyDescriptor(k1.prototype,"p2pConnect"),k1.prototype),YW(k1.prototype,"unpublish",[C1],Object.getOwnPropertyDescriptor(k1.prototype,"unpublish"),k1.prototype),YW(k1.prototype,"unpublishLowStream",[w1],Object.getOwnPropertyDescriptor(k1.prototype,"unpublishLowStream"),k1.prototype),YW(k1.prototype,"subscribe",[I1],Object.getOwnPropertyDescriptor(k1.prototype,"subscribe"),k1.prototype),YW(k1.prototype,"mockSubscribe",[A1],Object.getOwnPropertyDescriptor(k1.prototype,"mockSubscribe"),k1.prototype),YW(k1.prototype,"unsubscribe",[O1],Object.getOwnPropertyDescriptor(k1.prototype,"unsubscribe"),k1.prototype),YW(k1.prototype,"muteRemote",[x1],Object.getOwnPropertyDescriptor(k1.prototype,"muteRemote"),k1.prototype),YW(k1.prototype,"unmuteRemote",[N1],Object.getOwnPropertyDescriptor(k1.prototype,"unmuteRemote"),k1.prototype),YW(k1.prototype,"hasRemoteMediaWithLock",[P1],Object.getOwnPropertyDescriptor(k1.prototype,"hasRemoteMediaWithLock"),k1.prototype),YW(k1.prototype,"disconnectForReconnect",[D1],Object.getOwnPropertyDescriptor(k1.prototype,"disconnectForReconnect"),k1.prototype),YW(k1.prototype,"remoteMediaSsrcChanged",[L1],Object.getOwnPropertyDescriptor(k1.prototype,"remoteMediaSsrcChanged"),k1.prototype),k1);function F1(e){return function(t,n,r){const i=t[n];if("function"!=typeof i)throw new Error("Cannot use mutex on object property.");return r.value=async function(){for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];switch(e){case v1.SEND_ONLY:{const e=await this.sendMutex.lock("From P2PChannel2.".concat(n));try{return await i.apply(this,r)}finally{e()}}case v1.RECEIVE_ONLY:{const e=await this.recvMutex.lock("From P2PChannel2.".concat(n));try{return await i.apply(this,r)}finally{e()}}default:{const e=await this.sendMutex.lock("From P2PChannel2.".concat(n)),t=await this.recvMutex.lock("From P2PChannel2.".concat(n));try{return await i.apply(this,r)}finally{e(),t()}}}},r}}function j1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function B1(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j1(Object(n),!0).forEach((function(t){SU(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j1(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class G1{constructor(e){SU(this,"store",void 0),SU(this,"onStatsException",void 0),SU(this,"onUploadPublishDuration",void 0),SU(this,"onStatsChanged",void 0),SU(this,"localStats",new Map),SU(this,"remoteStats",new Map),SU(this,"updateStatsInterval",void 0),SU(this,"trafficStats",void 0),SU(this,"trafficStatsPeerList",[]),SU(this,"uplinkStats",void 0),SU(this,"exceptionMonitor",void 0),SU(this,"p2pChannel",void 0),SU(this,"scalabilityMode",JW.L1T1),SU(this,"updateStats",(()=>{this.p2pChannel&&(this.updateRemoteStats(this.p2pChannel),this.updateLocalStats(this.p2pChannel))})),this.store=e,this.exceptionMonitor=new g0,this.exceptionMonitor.on("exception",((e,t,n)=>{this.onStatsException&&this.onStatsException(e,t,n)}))}startUpdateStats(){this.updateStatsInterval||(this.updateStatsInterval=window.setInterval(this.updateStats,1e3))}stopUpdateStats(){this.updateStatsInterval&&(window.clearInterval(this.updateStatsInterval),this.updateStatsInterval=void 0)}reset(){this.localStats=new Map,this.remoteStats=new Map,this.trafficStats=void 0,this.trafficStatsPeerList=[],this.uplinkStats=void 0}getLocalAudioTrackStats(){return this.localStats.get(VK.LocalAudioTrack)||B1({},XJ)}getLocalVideoTrackStats(){return this.localStats.get(VK.LocalVideoTrack)||B1({},QJ)}getRemoteAudioTrackStats(e){const t=(e,t)=>{if(!this.trafficStats)return t;const n=this.trafficStats.peer_delay.find((t=>t.peer_uid===e));return n&&(t.publishDuration=n.B_ppad+(Date.now()-this.trafficStats.timestamp)),t},n={};if(e){var r;const i=null===(r=this.remoteStats.get(e))||void 0===r?void 0:r.audioStats;i&&(n[e]=t(e,i))}else Array.from(this.remoteStats.entries()).forEach((e=>{let[r,{audioStats:i}]=e;i&&(n[r]=t(r,i))}));return n}getRemoteNetworkQualityStats(e){const t={};if(e){var n;const r=null===(n=this.remoteStats.get(e))||void 0===n?void 0:n.networkStats;r&&(t[e]=r)}else Array.from(this.remoteStats.entries()).forEach((e=>{let[n,{networkStats:r}]=e;r&&(t[n]=r)}));return t}getRemoteVideoTrackStats(e){const t=(e,t)=>{if(!this.trafficStats)return t;const n=this.trafficStats.peer_delay.find((t=>t.peer_uid===e));return n&&(t.publishDuration=n.B_ppvd+(Date.now()-this.trafficStats.timestamp)),t},n={};if(e){var r;const i=null===(r=this.remoteStats.get(e))||void 0===r?void 0:r.videoStats;i&&(n[e]=t(e,i))}else Array.from(this.remoteStats.entries()).forEach((e=>{let[r,{videoStats:i}]=e;i&&(n[r]=t(r,i))}));return n}getRTCStats(){let e=0,t=0,n=0,r=0;const i=this.localStats.get(VK.LocalAudioTrack);i&&(e+=i.sendBytes,t+=i.sendBitrate);const o=this.localStats.get(VK.LocalVideoTrack);o&&(e+=o.sendBytes,t+=o.sendBitrate);const s=this.localStats.get(VK.LocalVideoLowTrack);s&&(e+=s.sendBytes,t+=s.sendBitrate),this.remoteStats.forEach((e=>{let{audioStats:t,videoStats:i}=e;t&&(n+=t.receiveBytes,r+=t.receiveBitrate),i&&(n+=i.receiveBytes,r+=i.receiveBitrate)}));let a=1;return this.trafficStats&&(a+=this.trafficStats.peer_delay.length),{Duration:0,UserCount:a,SendBitrate:t,SendBytes:e,RecvBytes:n,RecvBitrate:r,OutgoingAvailableBandwidth:this.uplinkStats?this.uplinkStats.B_uab/1e3:0,RTT:this.trafficStats?2*this.trafficStats.B_acd:0}}addLocalStats(e){this.localStats.set(e,void 0)}removeLocalStats(e){e?this.localStats.delete(e):this.localStats.clear()}addRemoteStats(e){this.remoteStats.set(e,{})}removeRemoteStats(e){e?this.remoteStats.delete(e):this.remoteStats.clear()}addP2PChannel(e){this.p2pChannel=e}updateTrafficStats(e){e.peer_delay=e.peer_delay.filter((e=>void 0!==e.B_ppad||void 0!==e.B_ppvd)),e.peer_delay.filter((e=>-1===this.trafficStatsPeerList.indexOf(e.peer_uid))).forEach((e=>{var t;const n=null===(t=this.p2pChannel)||void 0===t?void 0:t.getRemoteMedia(e.peer_uid),r=null!=n&&n.videoSSRC?E0.measureFromSubscribeStart(this.store.clientId,n.videoSSRC):0,i=null!=n&&n.audioSSRC?E0.measureFromSubscribeStart(this.store.clientId,n.audioSSRC):0;void 0!==e.B_ppad&&void 0!==e.B_ppvd&&(this.onUploadPublishDuration&&this.onUploadPublishDuration(e.peer_uid,e.B_ppad,e.B_ppvd,r>i?r:i),this.trafficStatsPeerList.push(e.peer_uid))})),this.trafficStats=e}updateUplinkStats(e){this.uplinkStats&&this.uplinkStats.B_fir!==e.B_fir&&KH.debug("[".concat(this.store.clientId,"]: Period fir changes to ").concat(e.B_fir)),this.uplinkStats=e}static isRemoteVideoFreeze(e,t,n){if(!e)return!1;const r=!!n&&t.framesDecodeFreezeTime>n.framesDecodeFreezeTime,i=!n||t.framesDecodeCount>n.framesDecodeCount;return r||!i}static isRemoteAudioFreeze(e){return!!e&&e._isFreeze()}isLocalVideoFreeze(e){return!(!e.inputFrame||!e.sentFrame)&&e.inputFrame.frameRate>5&&e.sentFrame.frameRate<3}updateLocalStats(e){Array.from(this.localStats.entries()).forEach((t=>{let[n,r]=t;switch(n){case VK.LocalVideoTrack:case VK.LocalVideoLowTrack:{const t=r,o=B1({},QJ),s=e.getStats(),a=e.getLocalMedia(n);if(s){const n=s.videoSend.find((e=>e.ssrc===(null==a?void 0:a.ssrcs[0].ssrcId)));if(n){const r=e.getLocalVideoSize(),i=e.getEncoderConfig(VK.LocalVideoTrack);"H264"!==n.codec&&"H265"!==n.codec&&"VP8"!==n.codec&&"VP9"!==n.codec&&"AV1X"!==n.codec&&"AV1"!==n.codec||(o.codecType=n.codec),o.sendBytes=n.bytes,o.sendBitrate=t?8*Math.max(0,o.sendBytes-t.sendBytes):0,n.inputFrame?(o.captureFrameRate=n.inputFrame.frameRate,o.captureResolutionHeight=n.inputFrame.height,o.captureResolutionWidth=n.inputFrame.width):r&&(o.captureResolutionWidth=r.width,o.captureResolutionHeight=r.height),n.sentFrame?(o.sendFrameRate=n.sentFrame.frameRate,o.sendResolutionHeight=n.sentFrame.height,o.sendResolutionWidth=n.sentFrame.width):r&&(o.sendResolutionWidth=r.width,o.sendResolutionHeight=r.height),n.avgEncodeMs&&(o.encodeDelay=n.avgEncodeMs),i&&i.bitrateMax&&(o.targetSendBitrate=1e3*i.bitrateMax),o.sendPackets=n.packets,o.sendPacketsLost=n.packetsLost,o.sendJitterMs=n.jitterMs,o.sendRttMs=n.rttMs,o.totalDuration=t?t.totalDuration+1:1,o.totalFreezeTime=t?t.totalFreezeTime:0,this.isLocalVideoFreeze(n)&&(o.totalFreezeTime+=1),n.scalabilityMode&&this.scalabilityMode!==n.scalabilityMode&&(KH.debug("[".concat(this.store.clientId,"]: The scalabilityMode of the video sending stream is ").concat(n.scalabilityMode)),this.scalabilityMode=n.scalabilityMode)}this.trafficStats&&(o.currentPacketLossRate=(this.trafficStats.B_pvlr4||0)/100)}var i;this.localStats.set(n,o),((null==t?void 0:t.sendResolutionWidth)!==o.sendResolutionWidth||(null==t?void 0:t.sendResolutionHeight)!==o.sendResolutionHeight)&&(null===(i=this.onStatsChanged)||void 0===i||i.call(this,"resolution",{width:o.sendResolutionWidth,height:o.sendResolutionHeight})),o&&a&&this.exceptionMonitor.setLocalVideoStats(this.store.uid,a.track,o);break}case VK.LocalAudioTrack:{const t=r,i=B1({},XJ),o=e.getStats(),s=e.getLocalMedia(n);if(o){const n=o.audioSend.find((e=>e.ssrc===(null==s?void 0:s.ssrcs[0].ssrcId)));if(n){if("opus"!==n.codec&&"aac"!==n.codec&&"PCMU"!==n.codec&&"PCMA"!==n.codec&&"G722"!==n.codec||(i.codecType=n.codec),n.inputLevel)i.sendVolumeLevel=Math.round(32767*n.inputLevel);else{const t=e.getLocalAudioVolume();t&&(i.sendVolumeLevel=Math.round(32767*t))}i.sendBytes=n.bytes,i.sendPackets=n.packets,i.sendPacketsLost=n.packetsLost,i.sendJitterMs=n.jitterMs,i.sendRttMs=n.rttMs,i.sendBitrate=t?8*Math.max(0,i.sendBytes-t.sendBytes):0}}this.trafficStats&&(i.currentPacketLossRate=(this.trafficStats.B_palr4||0)/100),this.localStats.set(VK.LocalAudioTrack,i),i&&s&&this.exceptionMonitor.setLocalAudioStats(this.store.uid,s.track,i);break}}}))}updateRemoteStats(e){Array.from(this.remoteStats.entries()).forEach((t=>{var n,r;let[i,{videoStats:o,audioStats:s,videoPcStats:a}]=t;const c=s,d=o,l=a,h=B1({},$J),u=B1({},eX),p=B1({},ZJ),{audioTrack:f,videoTrack:m,audioSSRC:g,videoSSRC:_}=e.getRemoteMedia(i);let E;E=e instanceof V1?e.getStats(!0):e.getStats();const y=null===(n=E)||void 0===n?void 0:n.audioRecv.find((e=>e.ssrc===g)),v=null===(r=E)||void 0===r?void 0:r.videoRecv.find((e=>e.ssrc===_)),b=this.trafficStats&&this.trafficStats.peer_delay.find((e=>e.peer_uid===i));if(y&&("opus"!==y.codec&&"aac"!==y.codec&&"PCMU"!==y.codec&&"PCMA"!==y.codec&&"G722"!==y.codec||(h.codecType=y.codec),y.outputLevel?h.receiveLevel=Math.round(32767*y.outputLevel):f&&(h.receiveLevel=Math.round(32767*f.getVolumeLevel())),h.receiveBytes=y.bytes,h.receivePackets=y.packets,h.receivePacketsLost=y.packetsLost,h.receivePacketsDiscarded=y.packetsDiscarded,h.packetLossRate=h.receivePacketsLost/(h.receivePackets+h.receivePacketsLost),h.receiveBitrate=c?8*Math.max(0,h.receiveBytes-c.receiveBytes):0,h.totalDuration=c?c.totalDuration+1:1,h.totalFreezeTime=c?c.totalFreezeTime:0,h.freezeRate=h.totalFreezeTime/h.totalDuration,h.receiveDelay=y.jitterBufferMs,h.totalDuration>10&&G1.isRemoteAudioFreeze(f)&&(h.totalFreezeTime+=1)),v){"H264"!==v.codec&&"H265"!==v.codec&&"VP8"!==v.codec&&"VP9"!==v.codec&&"AV1X"!==v.codec&&"AV1"!==v.codec||(u.codecType=v.codec),u.receiveBytes=v.bytes,u.receiveBitrate=d?8*Math.max(0,u.receiveBytes-d.receiveBytes):0,u.decodeFrameRate=v.decodeFrameRate<0?0:v.decodeFrameRate,u.renderFrameRate=v.decodeFrameRate<0?0:v.decodeFrameRate,v.outputFrame&&(u.renderFrameRate=v.outputFrame.frameRate),v.receivedFrame?(u.receiveFrameRate=v.receivedFrame.frameRate,u.receiveResolutionHeight=v.receivedFrame.height,u.receiveResolutionWidth=v.receivedFrame.width):m&&(u.receiveResolutionHeight=m._videoHeight||0,u.receiveResolutionWidth=m._videoWidth||0),void 0!==v.framesRateFirefox&&(u.receiveFrameRate=Math.round(v.framesRateFirefox)),u.receivePackets=v.packets,u.receivePacketsLost=v.packetsLost,u.packetLossRate=u.receivePacketsLost/(u.receivePackets+u.receivePacketsLost),u.totalDuration=d?d.totalDuration+1:1,u.totalFreezeTime=d?d.totalFreezeTime:0,u.receiveDelay=v.jitterBufferMs||0;const t=!!_&&e.getRemoteVideoIsReady(_);m&&t&&G1.isRemoteVideoFreeze(m,v,l)&&(u.totalFreezeTime+=1),u.freezeRate=u.totalFreezeTime/u.totalDuration}b&&(h.end2EndDelay=b.B_ad,u.end2EndDelay=b.B_vd,h.transportDelay=b.B_ed,u.transportDelay=b.B_ed,h.currentPacketLossRate=b.B_ealr4/100,u.currentPacketLossRate=b.B_evlr4/100,p.uplinkNetworkQuality=b.B_punq?b.B_punq:0,p.downlinkNetworkQuality=b.B_pdnq?b.B_pdnq:0),this.remoteStats.set(i,{audioStats:h,videoStats:u,videoPcStats:v,networkStats:p}),f&&this.exceptionMonitor.setRemoteAudioStats(f,h),m&&this.exceptionMonitor.setRemoteVideoStats(m,u)}))}}class H1{constructor(){SU(this,"destChannelMediaInfos",new Map),SU(this,"srcChannelMediaInfo",void 0)}setSrcChannelInfo(e){yK(e),this.srcChannelMediaInfo=e}addDestChannelInfo(e){yK(e),this.destChannelMediaInfos.set(e.channelName,e)}removeDestChannelInfo(e){dK(e),this.destChannelMediaInfos.delete(e)}getSrcChannelMediaInfo(){return this.srcChannelMediaInfo}getDestChannelMediaInfo(){return this.destChannelMediaInfos}}function W1(e){if(!(e instanceof H1))return new eW(ZB.INVALID_PARAMS,"Config should be instance of [ChannelMediaRelayConfiguration]").throw();const t=e.getSrcChannelMediaInfo(),n=e.getDestChannelMediaInfo();return t?0===n.size?new eW(ZB.INVALID_PARAMS,"destChannelMediaInfo should not be empty").throw():void 0:new eW(ZB.INVALID_PARAMS,"srcChannelMediaInfo should not be empty").throw()}function K1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function z1(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K1(Object(n),!0).forEach((function(t){SU(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K1(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var q1;function Y1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function J1(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y1(Object(n),!0).forEach((function(t){SU(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y1(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}let X1=(q1=class e extends LK{get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get localCodecs(){return[...new Set(this.localCapabilities&&this.localCapabilities.videoCodecs.map((e=>e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||"")).filter((e=>{var t;return Fv(t=Object.keys(PH)).call(t,e)})))]}constructor(t,n){super(t,n),SU(this,"store",void 0),SU(this,"peerConnection",void 0),SU(this,"remoteSDP",void 0),SU(this,"initialOffer",void 0),SU(this,"statsFilter",void 0),SU(this,"useRTX",!1),SU(this,"localCapabilities",void 0),SU(this,"localCandidateCount",0),SU(this,"allCandidatesReceived",!1),SU(this,"establishPromise",void 0),SU(this,"mutex",new cH("P2PConnection-mutex")),this.store=n,this.peerConnection=new RTCPeerConnection(e.resolvePCConfiguration(t),{optional:[{googDscp:!0}]}),this.statsFilter=J0(this.peerConnection,AH("STATS_UPDATE_INTERVAL"),void 0,xB()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1,this.establishPromise=this.establish()}async establish(){try{const e=await this.peerConnection.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});if(!e.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");const t=hZ(e.sdp),n=lZ(e.sdp,{filterRTX:!this.useRTX,filterVideoFec:AH("FILTER_VIDEO_FEC"),filterAudioFec:AH("FILTER_AUDIO_FEC"),filterAudioCodec:["opus"]});return this.localCapabilities=n,this.initialOffer=e,J1(J1({},t),{},{rtpCapabilities:{send:{audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},recv:{audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},sendrecv:n},offerSDP:e.sdp})}catch(e){throw new eG(ZB.GET_LOCAL_CONNECTION_PARAMS_FAILED,e.toString())}}async updateRemoteConnect(){}async connect(e){try{if(!this.initialOffer)throw new Error("Cannot establish P2PConnection without initial offer.");this.remoteSDP=new class{constructor(e){SU(this,"sessionDesc",void 0),SU(this,"localCapabilities",void 0),SU(this,"rtpCapabilities",void 0),SU(this,"candidates",void 0),SU(this,"iceParameters",void 0),SU(this,"dtlsParameters",void 0),SU(this,"setup",void 0),SU(this,"currentMidIndex",void 0),SU(this,"cname",void 0),e=VG(e);const{iceParameters:t,dtlsParameters:n,candidates:r,rtpCapabilities:i,setup:o,localCapabilities:s,sdkCodec:a,cname:c}=e,d=sZ.parse("v=0\no=- 0 0 IN IP4 127.0.0.1\ns=AgoraGateway\nt=0 0\na=group:BUNDLE audio video\na=msid-semantic: WMS\na=ice-lite\nm=audio 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendrecv\na=rtcp-mux\na=rtcp-rsize\na=mid:audio\nm=video 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendrecv\na=rtcp-mux\na=rtcp-rsize\na=mid:video\n");this.rtpCapabilities=i,this.candidates=r,this.iceParameters=t,this.dtlsParameters=n,this.setup=o,this.localCapabilities=s,this.cname=c;for(let e=0;e<d.mediaDescriptions.length;e++){const s=d.mediaDescriptions[e];if(s.attributes.iceUfrag=t.iceUfrag,s.attributes.icePwd=t.icePwd,s.attributes.fingerprints=n.fingerprints,s.attributes.candidates=r,s.attributes.setup=o,"video"===s.media.mediaType){s.media.fmts=i.videoCodecs.map((e=>e.payloadType.toString(10)));let e=i.videoCodecs.filter((e=>{var t,n;return null===(t=e.rtpMap)||void 0===t?void 0:Fv(n=t.encodingName.toLowerCase()).call(n,a)}));0===e.length&&(e=i.videoCodecs),s.attributes.payloads=e,s.attributes.extmaps=i.videoExtensions}"audio"===s.media.mediaType&&(s.media.fmts=i.audioCodecs.map((e=>e.payloadType.toString(10))),s.attributes.payloads=i.audioCodecs,s.attributes.extmaps=i.audioExtensions),d.mediaDescriptions[e]=this.mungMediaDesc(s)}this.sessionDesc=d,this.currentMidIndex=d.mediaDescriptions.length-1}toString(){return sZ.print(this.sessionDesc)}send(e,t,n){const{ssrcs:r,ssrcGroups:i}=mZ(t,this.cname),o=this.sessionDesc.mediaDescriptions.find((t=>e===kK.VIDEO?"video"===t.media.mediaType:"audio"===t.media.mediaType)),s=r[0].attributes.label,a=r[0].attributes.mslabel;return o.attributes.ssrcs=o.attributes.ssrcs.concat(r),o.attributes.ssrcGroups=o.attributes.ssrcGroups.concat(i),{id:s,mslabel:a}}batchSend(e){return e.map((e=>{let{kind:t,ssrcMsg:n}=e;return this.send(t,n,void 0)}))}stopSending(e){this.sessionDesc.mediaDescriptions.forEach((t=>{const n=[],r=[],i=[];t.attributes.ssrcs.forEach((t=>{Fv(e).call(e,t.attributes.label||"")?i.push(t):n.push(t)})),t.attributes.ssrcGroups.forEach((e=>{var t;Fv(t=i.map((e=>e.ssrcId))).call(t,e.ssrcIds[0])||r.push(e)})),t.attributes.ssrcs=n,t.attributes.ssrcGroups=r}))}mute(e){const t=this.sessionDesc.mediaDescriptions.find((t=>t.attributes.mid===e));if(!t)throw new Error("mediaDescription not found with ".concat(e," in remote SDP when calling RemoteSDP.mute."));t.attributes.direction="inactive"}unmute(e){const t=this.sessionDesc.mediaDescriptions.find((t=>t.attributes.mid===e));if(!t)throw new Error("mediaDescription not found with ".concat(e," in remote SDP when calling RemoteSDP.unmute."));t.attributes.direction="sendonly"}receive(e,t,n){e.forEach(((e,t)=>{const n=e._mediaStreamTrack,r=this.sessionDesc.mediaDescriptions.findIndex((e=>e.attributes.mid===n.kind)),i=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[r],e);this.sessionDesc.mediaDescriptions[r]=i}))}stopReceiving(e){}updateCandidates(e){e===MK.TCP?this.candidates.forEach((e=>{-1===this.candidates.findIndex((t=>"tcp"===t.transport&&t.connectionAddress===e.connectionAddress&&t.port===e.port))&&this.candidates.push(z1(z1({},e),{},{foundation:"tcpcandidate",priority:Number(e.priority)-1+"",transport:"tcp",port:Number(e.port)+90+""}))})):this.candidates=this.candidates.filter((e=>"tcp"!==e.transport));for(const e of this.sessionDesc.mediaDescriptions)e.attributes.candidates=this.candidates}restartICE(e){e=VG(e),this.iceParameters=e,this.sessionDesc.mediaDescriptions.forEach((t=>{t.attributes.iceUfrag=e.iceUfrag,t.attributes.icePwd=e.icePwd}))}predictReceivingMids(e){const t=[];for(let n=0;n<e;n++)t.push((this.currentMidIndex+n+1).toString(10));return t}mungRecvMediaDsec(e,t){const n=VG(e);return gZ(n,t),EZ(n,t),n}updateRecvMedia(e,t){const n=this.sessionDesc.mediaDescriptions.findIndex((t=>t.attributes.mid===e));if(-1!==n){const e=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[n],t);this.sessionDesc.mediaDescriptions[n]=e}}bumpMid(e){this.currentMidIndex+=e}updateTrackLabel(e,t,n){const r=this.sessionDesc.mediaDescriptions.find((t=>e===kK.VIDEO?"video"===t.attributes.mid:"audio"===t.attributes.mid));if(r){const e=r.attributes.ssrcs.find((e=>e.attributes.label===t));var i;e&&(e.attributes.label=n,null===(i=e.attributes.msid)||void 0===i||i.replace(t,n))}}mungMediaDesc(e){const t=VG(e);return _Z(t),function(e){const t=e.attributes.extmaps.find((e=>"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"===e.extensionName));t&&e.attributes.extmaps.splice(e.attributes.extmaps.indexOf(t),1),e.attributes.payloads.forEach((e=>{const t=e.rtcpFeedbacks.findIndex((e=>"transport-cc"===e.type));-1!==t&&e.rtcpFeedbacks.splice(t,1)}))}(t),t}getSSRC(e){for(const t of this.sessionDesc.mediaDescriptions)for(const n of t.attributes.ssrcs)if(n.attributes.label===e)return[n]}}(J1(J1({},e),{},{rtpCapabilities:e.rtpCapabilities.send,localCapabilities:this.localCapabilities,sdkCodec:this.store.codec}));const t=this.remoteSDP.toString();await this.peerConnection.setLocalDescription(this.initialOffer),await this.peerConnection.setRemoteDescription({type:"answer",sdp:t})}catch(e){throw new eG(ZB.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(e.toString()))}}async updateRemoteRTPCapabilities(e,t){throw new eG(ZB.NOT_SUPPORTED,"Planb mode does not support createDataChannels.")}getPreMedia(e){}send(e,t){var n=this;return Cj((function*(){const r=yield wj(n.mutex.lock());try{if(!n.remoteSDP)throw new Error("Cannot call P2PConnection.send before remote SDP created");const r=e.map((e=>n.peerConnection.addTrack(e._mediaStreamTrack))),i=yield wj(n.peerConnection.createOffer()),o=sZ.parse(i.sdp),s=e.map((e=>{const t=e._mediaStreamTrack,r=o.mediaDescriptions.find((e=>e.attributes.mid===t.kind));if(!r)throw new Error("Cannot extract ssrc from mediaDescription.");return function(e,t,n){const r=e.attributes.ssrcs.filter((e=>e.attributes.label===t)),i=e.attributes.ssrcGroups;if(0===r.length)throw new Error("Cannot extract ssrc from plan-b SDP.");if(i&&r.length>1){const e=i.find((e=>-1!==e.ssrcIds.indexOf(r[0].ssrcId)));return e?[{ssrcId:e.ssrcIds[0],rtx:n?e.ssrcIds[1]:void 0}]:[{ssrcId:r[0].ssrcId}]}return[{ssrcId:r[0].ssrcId}]}(r,t.id,n.useRTX)}));let a;try{a=yield s}catch(e){throw r.forEach((e=>{AB()&&e.replaceTrack(null),n.peerConnection.removeTrack(e)})),e}const c=n.mungSendOfferSDP(i.sdp,e);n.remoteSDP.receive(e,t,a);const d=n.remoteSDP.toString();return yield wj(n.peerConnection.setLocalDescription({type:"offer",sdp:c})),yield wj(n.applySendEncodings(r,e)),yield wj(n.peerConnection.setRemoteDescription({type:"answer",sdp:d})),e.map(((e,t)=>{const n=e._mediaStreamTrack.id;return{localSSRC:s[t],id:n}}))}catch(e){throw new eG(ZB.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(e.toString()))}finally{r()}}))()}async stopSending(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");const t=this.peerConnection.getSenders().filter((t=>{var n;return-1!==e.indexOf((null===(n=t.track)||void 0===n?void 0:n.id)||"")}));if(t.length!==e.length)throw new Error("Transceivers' length doesn't match mids' length when trying to call P2PConnection.stopSending.");t.map((e=>{AB()&&e.replaceTrack(null),this.peerConnection.removeTrack(e)}));const n=await this.peerConnection.createOffer();await this.peerConnection.setLocalDescription(n),this.remoteSDP.stopReceiving(e);const r=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"answer",sdp:r})}catch(e){throw new eG(ZB.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(e.toString()))}}async receive(e,t,n,r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(e," before remoteSDP created."));const{id:n,mslabel:i}=this.remoteSDP.send(e,t,r),o=new LO(((t,r)=>{const o=setTimeout((()=>{r(new Error("Cannot receive track, id: ".concat(n)))}),1e4),s=r=>{const a=SB();if(("Safari"===a.name&&11===Number(a.version)||NB())&&r.track.id!==n&&r.streams[0].id===i){var c;const i=r.streams[0].getTracks()[0];return null===(c=this.remoteSDP)||void 0===c||c.updateTrackLabel(e,n,r.track.id),this.peerConnection.removeEventListener("track",s),clearTimeout(o),void t(i)}if(r.track.id===n)return this.peerConnection.removeEventListener("track",s),clearTimeout(o),void t(r.track)};this.peerConnection.addEventListener("track",s)})),s=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:s});const a=await this.peerConnection.createAnswer();return await this.peerConnection.setLocalDescription(a),{track:await o,id:n}}catch(e){throw new eG(ZB.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(e.toString()))}}async stopReceiving(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");this.remoteSDP.stopSending(e);const t=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:t});const n=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(n)}catch(e){throw new eG(ZB.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(e.toString()))}}async muteRemote(e){}async unmuteRemote(e){}async muteLocal(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");const t=this.peerConnection.getSenders().filter((t=>{var n;return-1!==e.indexOf((null===(n=t.track)||void 0===n?void 0:n.id)||"")}));if(t.length!==e.length)throw new Error("sender' length doesn't match mids' length.");t.map((e=>{if(AB()&&e.track)e.track.enabled=!1;else{const t=e.getParameters();t.encodings.forEach((e=>e.active=!1)),e.setParameters(t)}}))}catch(e){throw new eG(ZB.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat(e.toString()))}}async unmuteLocal(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");const t=this.peerConnection.getSenders().filter((t=>{var n;return-1!==e.indexOf((null===(n=t.track)||void 0===n?void 0:n.id)||"")}));if(t.length!==e.length)throw new Error("Senders' length doesn't match mids' length.");t.map((async e=>{if(AB()&&e.track)e.track.enabled=!0;else{const t=e.getParameters();t.encodings.forEach((e=>e.active=!0)),await e.setParameters(t)}}));const n=await this.peerConnection.createOffer();await this.peerConnection.setLocalDescription(n);const r=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"answer",sdp:r})}catch(e){throw new eG(ZB.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat(e.toString()))}}restartICE(e){var t=this;return Cj((function*(){const n=yield wj(t.mutex.lock("From P2PConnection.restartICE"));try{if(!t.remoteSDP)throw new Error("Cannot restartICE before remoteSDP created.");if(SJ().supportPCSetConfiguration){const n=t.peerConnection.getConfiguration(),r=e===MK.RELAY?"relay":"all";n.iceTransportPolicy!==r&&(KH.debug("[".concat(t.store.clientId,"] restartICE change iceTransportPolicy from [").concat(n.iceTransportPolicy,"] to [").concat(r,"]")),n.iceTransportPolicy=r,t.peerConnection.setConfiguration(n))}else if(e===MK.RELAY)return;e!==MK.RELAY&&t.remoteSDP.updateCandidates(e);const n=yield wj(t.peerConnection.createOffer({iceRestart:!0}));if(!n.sdp)throw new Error("Cannot restartICE because restart offer SDP does not exist.");const r=hZ(n.sdp),{remoteIceParameters:i}=yield r.iceParameters;t.remoteSDP.restartICE(i);const o=t.remoteSDP.toString();yield wj(t.peerConnection.setLocalDescription(n)),yield wj(t.peerConnection.setRemoteDescription({type:"answer",sdp:o}))}catch(e){KH.warning("[".concat(t.store.clientId,"] restart ICE failed, abort operation"),e)}finally{n()}}))()}close(){var e;this.peerConnection.close(),null===(e=this.onConnectionStateChange)||void 0===e||e.call(this,"closed"),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.statsFilter.destroy()}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(e){return this.statsFilter.getVideoIsReady(e)}async updateEncoderConfig(e,t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");const e=await this.peerConnection.createOffer(),n=this.mungSendOfferSDP(e.sdp,[t]);this.remoteSDP.updateRecvMedia(t._mediaStreamTrack.kind,t);const r=this.remoteSDP.toString();await this.peerConnection.setLocalDescription({type:"offer",sdp:n}),await this.peerConnection.setRemoteDescription({type:"answer",sdp:r})}catch(e){throw new eG(ZB.EXCHANGE_SDP_FAILED,e.toString())}}async updateSendParameters(e,t){const n=this.peerConnection.getSenders().filter((t=>{var n;return(null===(n=t.track)||void 0===n?void 0:n.id)===e}));1===n.length&&await this.applySendEncodings(n,[t])}setStatsRemoteVideoIsReady(e,t){this.statsFilter.setVideoIsReady2(e,t)}async replaceTrack(e,t){const n=this.peerConnection.getSenders().find((e=>{var n;return(null===(n=e.track)||void 0===n?void 0:n.id)===t}));n&&await n.replaceTrack(e._mediaStreamTrack)}createDataChannels(e,t){throw new eG(ZB.NOT_SUPPORTED,"Planb mode does not support createDataChannels.")}stopDataChannels(e){throw new eG(ZB.NOT_SUPPORTED,"Planb mode does not support stopDataChannels.")}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var e;null===(e=this.onICEConnectionStateChange)||void 0===e||e.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var e;null===(e=this.onConnectionStateChange)||void 0===e||e.call(this,this.peerConnection.connectionState)},this.peerConnection.onicecandidate=e=>{e.candidate?this.localCandidateCount+=1:(this.peerConnection.onicecandidate=null,this.allCandidatesReceived=!0,KH.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount))},setTimeout((()=>{this.allCandidatesReceived||(this.allCandidatesReceived=!0,KH.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] onicecandidate timeout, local candidate count"),this.localCandidateCount))}),AH("CANDIDATE_TIMEOUT"))}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(t){const n={iceServers:[],sdpSemantics:"plan-b"};return t.iceServers?n.iceServers=t.iceServers:t.turnServer&&"off"!==t.turnServer.mode&&(TG(t.turnServer.servers)?n.iceServers=t.turnServer.servers:(n.iceServers&&n.iceServers.push(...e.turnServerConfigToIceServers(t.turnServer.servers)),AH("USE_TURN_SERVER_OF_GATEWAY")&&n.iceServers&&t.turnServer.serversFromGateway&&n.iceServers.push(...e.turnServerConfigToIceServers(t.turnServer.serversFromGateway)),t.turnServer.servers.concat(t.turnServer.serversFromGateway||[]).forEach((e=>{e.forceturn&&(n.iceTransportPolicy="relay")})))),n}static turnServerConfigToIceServers(e){const t=[];return e.forEach((e=>{e.security?e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turns:".concat(e.turnServerURL,":").concat(e.tcpport,"?transport=tcp")}):(e.udpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turn:".concat(e.turnServerURL,":").concat(e.udpport,"?transport=udp")}),e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turn:".concat(e.turnServerURL,":").concat(e.tcpport,"?transport=tcp")}))})),t}async updateRtpSenderEncodings(e,t){var n;if(t||(t=this.peerConnection.getSenders().find((t=>{var n;return(null===(n=t.track)||void 0===n?void 0:n.id)===e._mediaStreamTrack.id}))),!t)return KH.warn("[".concat(e.getTrackId(),"] no rtpSender found}"));if(!SJ().supportSetRtpSenderParameters)return KH.warn("Browser not support set rtp-sender parameters");const r={},i={};if(e instanceof O$)switch(e._optimizationMode){case"motion":r.degradationPreference="maintain-framerate";break;case"detail":r.degradationPreference="maintain-resolution";break;default:r.degradationPreference="balanced"}if(AH("DSCP_TYPE")&&qB()){var o;const e=AH("DSCP_TYPE");Fv(o=["very-low","low","medium","high"]).call(o,e)&&(i.networkPriority=e)}const s=t.getParameters(),a=null===(n=s.encodings)||void 0===n?void 0:n[0];a&&Object.assign(a,i),Object.assign(s,r),KH.debug("[".concat(e.getTrackId(),"] updateRtpSenderEncodings: ").concat(JSON.stringify(s.encodings))),await t.setParameters(s)}async applySendEncodings(e,t){try{if(!SJ().supportSetRtpSenderParameters)return;if(e.length!==t.length)return;for(let n=0;n<e.length;n++){const r=e[n],i=t[n];r&&i&&await this.updateRtpSenderEncodings(i,r)}}catch(e){KH.debug("[".concat(this.store.clientId,"] Apply RTPSendEncodings failed."))}}mungSendOfferSDP(e,t){const n=sZ.parse(e);return t.forEach(((e,t)=>{const r=e._mediaStreamTrack,i=n.mediaDescriptions.find((e=>e.attributes.mid===r.kind));i&&gZ(i,e)})),sZ.print(n)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=e=>{var t;null===(t=this.onFirstAudioReceived)||void 0===t||t.call(this,e)},this.statsFilter.onFirstVideoReceived=e=>{var t;null===(t=this.onFirstVideoReceived)||void 0===t||t.call(this,e)},this.statsFilter.onFirstAudioDecoded=e=>{var t;null===(t=this.onFirstAudioDecoded)||void 0===t||t.call(this,e)},this.statsFilter.onFirstVideoDecoded=(e,t,n)=>{var r;null===(r=this.onFirstVideoDecoded)||void 0===r||r.call(this,e,t,n)},this.statsFilter.onSelectedLocalCandidateChanged=(e,t)=>{var n;null===(n=this.onSelectedLocalCandidateChanged)||void 0===n||n.call(this,e,t)},this.statsFilter.onSelectedRemoteCandidateChanged=(e,t)=>{var n;null===(n=this.onSelectedRemoteCandidateChanged)||void 0===n||n.call(this,e,t)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0}async batchReceive(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.batchReceive before remoteSDP created.");const t=this.remoteSDP.batchSend(e).map(((t,n)=>{let{id:r,mslabel:i}=t;const{kind:o}=e[n];return new LO(((e,t)=>{const n=setTimeout((()=>{t(new Error("Cannot receive track, id: ".concat(r)))}),1e4),s=t=>{const a=SB();if("Safari"===a.name&&11===Number(a.version)&&t.track.id!==r&&t.streams[0].id===i){var c;const i=t.streams[0].getTracks()[0];return null===(c=this.remoteSDP)||void 0===c||c.updateTrackLabel(o,r,t.track.id),this.peerConnection.removeEventListener("track",s),clearTimeout(n),void e({track:i,id:r})}if(t.track.id===r)return this.peerConnection.removeEventListener("track",s),clearTimeout(n),void e({track:t.track,id:r})};this.peerConnection.addEventListener("track",s)}))})),n=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:n});const r=await this.peerConnection.createAnswer();return await this.peerConnection.setLocalDescription(r),await LO.all(t)}catch(e){throw new eG(ZB.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(e.toString()))}}async getRemoteSSRC(e){if(!this.remoteSDP)return;const t=this.remoteSDP.getSSRC(e);return null==t?void 0:t[0].ssrcId}setConfiguration(t){if(SJ().supportPCSetConfiguration){const n=e.resolvePCConfiguration(t);this.peerConnection.setConfiguration(n)}}},YW(q1.prototype,"connect",[Q1],Object.getOwnPropertyDescriptor(q1.prototype,"connect"),q1.prototype),YW(q1.prototype,"stopSending",[Q1],Object.getOwnPropertyDescriptor(q1.prototype,"stopSending"),q1.prototype),YW(q1.prototype,"receive",[Q1],Object.getOwnPropertyDescriptor(q1.prototype,"receive"),q1.prototype),YW(q1.prototype,"stopReceiving",[Q1],Object.getOwnPropertyDescriptor(q1.prototype,"stopReceiving"),q1.prototype),YW(q1.prototype,"muteRemote",[Q1],Object.getOwnPropertyDescriptor(q1.prototype,"muteRemote"),q1.prototype),YW(q1.prototype,"unmuteRemote",[Q1],Object.getOwnPropertyDescriptor(q1.prototype,"unmuteRemote"),q1.prototype),YW(q1.prototype,"muteLocal",[Q1],Object.getOwnPropertyDescriptor(q1.prototype,"muteLocal"),q1.prototype),YW(q1.prototype,"unmuteLocal",[Q1],Object.getOwnPropertyDescriptor(q1.prototype,"unmuteLocal"),q1.prototype),YW(q1.prototype,"close",[Q1],Object.getOwnPropertyDescriptor(q1.prototype,"close"),q1.prototype),YW(q1.prototype,"updateEncoderConfig",[Q1],Object.getOwnPropertyDescriptor(q1.prototype,"updateEncoderConfig"),q1.prototype),YW(q1.prototype,"updateSendParameters",[Q1],Object.getOwnPropertyDescriptor(q1.prototype,"updateSendParameters"),q1.prototype),YW(q1.prototype,"replaceTrack",[Q1],Object.getOwnPropertyDescriptor(q1.prototype,"replaceTrack"),q1.prototype),YW(q1.prototype,"getRemoteSSRC",[Q1],Object.getOwnPropertyDescriptor(q1.prototype,"getRemoteSSRC"),q1.prototype),q1);function Q1(e,t,n){const r=e[t];if("function"!=typeof r)throw new Error("Cannot use mutex on object property.");return n.value=async function(){const e=this.mutex,n=await e.lock("Locking from P2PConnection.".concat(t));try{for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return await r.apply(this,o)}finally{n()}},n}function $1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Z1(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$1(Object(n),!0).forEach((function(t){SU(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$1(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const e2="9";class t2{get localCapabilities(){return VG(this._localCapabilities)}get rtpCapabilities(){return VG(this._rtpCapabilities)}get candidates(){return VG(this._candidates)}get iceParameters(){return VG(this._iceParameters)}get dtlsParameters(){return VG(this._dtlsParameters)}constructor(e){SU(this,"sessionDesc",void 0),SU(this,"_localCapabilities",void 0),SU(this,"_rtpCapabilities",void 0),SU(this,"_candidates",void 0),SU(this,"_iceParameters",void 0),SU(this,"_dtlsParameters",void 0),SU(this,"setup",void 0),SU(this,"currentMidIndex",void 0),SU(this,"cname",void 0),SU(this,"firefoxSsrcMidMap",new Map),e=VG(e);const{iceParameters:t,dtlsParameters:n,candidates:r,rtpCapabilities:i,setup:o,localCapabilities:s,cname:a}=e;this._rtpCapabilities=i,this._candidates=r,this._iceParameters=t,this._dtlsParameters=n,this._localCapabilities=s,this.setup=o,this.cname=a,this.sessionDesc=this.updateRemoteRTPCapabilities(i),this.currentMidIndex=this.sessionDesc.mediaDescriptions.length-1}preloadRemoteMedia(e){const t=this.candidates,n=this.dtlsParameters,r=this.iceParameters,i=this.rtpCapabilities.send;let o=this.sessionDesc.mediaDescriptions.length-1;for(let s=1;s<e;s++){const e=2*s+2e4,a=2*s+4e4,{ssrcs:c,ssrcGroups:d}=mZ([{ssrcId:e}],this.cname),{ssrcs:l,ssrcGroups:h}=mZ([{ssrcId:a,rtx:AH("USE_SUB_RTX")?a+1:void 0}],this.cname);this.sessionDesc.mediaDescriptions.push({media:{mediaType:"video",port:e2,protos:["UDP","TLS","RTP","SAVPF"],fmts:i.videoCodecs.map((e=>e.payloadType.toString(10)))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:r.iceUfrag,icePwd:r.icePwd,unrecognized:[],candidates:t,extmaps:i.videoExtensions,fingerprints:n.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:l,ssrcGroups:h,rtcpFeedbackWildcards:[],payloads:i.videoCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(++o)}}),this.sessionDesc.mediaDescriptions.push({media:{mediaType:"audio",port:e2,protos:["UDP","TLS","RTP","SAVPF"],fmts:i.audioCodecs.map((e=>e.payloadType.toString(10)))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:r.iceUfrag,icePwd:r.icePwd,unrecognized:[],candidates:t,extmaps:i.audioExtensions,fingerprints:n.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:c,ssrcGroups:d,rtcpFeedbackWildcards:[],payloads:i.audioCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(++o)}}),this.currentMidIndex+=2}this.updateBundleMids()}toString(){return sZ.print(this.sessionDesc)}send(e,t,n,r){const{ssrcs:i,ssrcGroups:o}=mZ(t,this.cname,AH("SYNC_GROUP")?n:void 0),s=this.findPreloadMediaDesc(i);if(s){if(xB()&&this.firefoxSsrcMidMap.set(i[0].ssrcId,s.attributes.mid),r&&(r.twcc||r.remb)){const e=this.sessionDesc.mediaDescriptions.indexOf(s);return this.sessionDesc.mediaDescriptions[e]=this.mungSendMediaDesc(s,r),{mid:s.attributes.mid,needExchangeSDP:!0}}return{mid:s.attributes.mid,needExchangeSDP:!1}}{const t=this.findAvailableMediaIndex(e,i);let n;return-1===t||1===t&&(AB()||function(){const e=SB();return!(e.name!==EB.CHROME||!e.osVersion)&&Number(e.version)<=90}())||0===t&&AH("USE_SUB_RTX")||FB()?(n=this.createOrRecycleSendMedia(e,i,o,"sendonly",r),this.updateBundleMids()):(n=VG(this.sessionDesc.mediaDescriptions[t]),n.attributes.direction="sendonly",n.attributes.ssrcs=i,n.attributes.ssrcGroups=o,this.sessionDesc.mediaDescriptions[t]=this.mungSendMediaDesc(n,r)),xB()&&this.firefoxSsrcMidMap.set(i[0].ssrcId,n.attributes.mid),{mid:n.attributes.mid,needExchangeSDP:!0}}}sendDataChannel(){const{mediaDesc:e,needExchangeSDP:t}=this.createOrRecycleDataChannel();return this.updateBundleMids(),{mid:e.attributes.mid,needExchangeSDP:t}}batchSend(e){const t=e.map((e=>{let{kind:t,ssrcMsg:n,mslabel:r}=e;return this.send(t,n,r)})),n=[];let r=!1;return t.forEach((e=>{let{mid:t,needExchangeSDP:i}=e;i&&(r=!0),n.push(t)})),{mids:n,needExchangeSDP:r}}stopSending(e){const t=this.sessionDesc.mediaDescriptions.filter((t=>t.attributes.mid&&-1!==e.indexOf(t.attributes.mid)));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.stopSending.");t.forEach((e=>{"0"===e.attributes.mid||xB()||FB()?e.attributes.ssrcs=[]:(e.attributes.ssrcs=[],e.attributes.direction="inactive",e.media.port="0")})),this.updateBundleMids()}mute(e){const t=this.sessionDesc.mediaDescriptions.find((t=>t.attributes.mid===e));if(!t)throw new Error("mediaDescription not found with ".concat(e," in remote SDP when calling RemoteSDP.mute."));t.attributes.direction="inactive"}unmute(e){const t=this.sessionDesc.mediaDescriptions.find((t=>t.attributes.mid===e));if(!t)throw new Error("mediaDescription not found with ".concat(e," in remote SDP when calling RemoteSDP.unmute."));t.attributes.direction="sendonly"}muteRemote(e){const t=this.sessionDesc.mediaDescriptions.filter((t=>Fv(e).call(e,t.attributes.mid||"")));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");t.forEach((e=>{e.attributes.direction="inactive"}))}unmuteRemote(e){const t=this.sessionDesc.mediaDescriptions.filter((t=>Fv(e).call(e,t.attributes.mid||"")));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");t.forEach((e=>{e.attributes.direction="recvonly"}))}receive(e,t,n,r){e.forEach(((e,i)=>{this.createOrRecycleRecvMedia(e,[],"recvonly",t,n,r[i])})),this.updateBundleMids()}stopReceiving(e){const t=this.sessionDesc.mediaDescriptions.filter((t=>-1!==e.indexOf(t.attributes.mid)));if(t.length!==e.length)throw new Error("MediaDescriptions' length doesn't match mids's length when calling RemoteSDP.receive.");t.forEach((e=>{e.media.port="0",e.attributes.direction="inactive"})),this.updateBundleMids()}updateRemoteRTPCapabilities(e){const t=this.sessionDesc||sZ.parse("v=0\no=- 0 0 IN IP4 127.0.0.1\ns=AgoraGateway\nt=0 0\na=group:BUNDLE 0 1\na=msid-semantic: WMS\na=ice-lite\nm=video 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendonly\na=rtcp-mux\na=rtcp-rsize\na=mid:0\nm=audio 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendonly\na=rtcp-mux\na=rtcp-rsize\na=mid:1\n");this._rtpCapabilities=e;const n=this.rtpCapabilities.send,r=this.localCapabilities.send;for(const e of t.mediaDescriptions){if(e.attributes.iceUfrag=this._iceParameters.iceUfrag,e.attributes.icePwd=this._iceParameters.icePwd,e.attributes.fingerprints=this._dtlsParameters.fingerprints,e.attributes.candidates=this._candidates,e.attributes.setup=this.setup,"application"===e.media.mediaType&&(e.attributes.sctpPort="5000"),"video"===e.media.mediaType)if(0===n.videoCodecs.length){const t=r.videoCodecs.filter((e=>{var t,n;return null===(t=e.rtpMap)||void 0===t?void 0:Fv(n=t.encodingName.toLowerCase()).call(n,"vp8")}))||[r.videoCodecs[0]];e.media.fmts=t.map((e=>e.payloadType.toString(10))),e.attributes.payloads=t,e.attributes.extmaps=[]}else if(e.media.fmts=n.videoCodecs.map((e=>e.payloadType.toString(10))),e.attributes.payloads=n.videoCodecs,e.attributes.extmaps=n.videoExtensions,AH("PRELOAD_MEDIA_COUNT")>0){const{ssrcs:t,ssrcGroups:n}=mZ([{ssrcId:4e4,rtx:AH("USE_SUB_RTX")?40001:void 0}],this.cname);e.attributes.ssrcs=t,e.attributes.ssrcGroups=n}if("audio"===e.media.mediaType)if(0===n.audioCodecs.length){const t=r.audioCodecs.filter((e=>{var t,n;return null===(t=e.rtpMap)||void 0===t?void 0:Fv(n=t.encodingName.toLowerCase()).call(n,"opus")}))||[r.audioCodecs[0]];e.media.fmts=t.map((e=>e.payloadType.toString(10))),e.attributes.payloads=t,e.attributes.extmaps=[]}else if(e.media.fmts=n.audioCodecs.map((e=>e.payloadType.toString(10))),e.attributes.payloads=n.audioCodecs,e.attributes.extmaps=n.audioExtensions,wZ(e),AH("PRELOAD_MEDIA_COUNT")>0){const{ssrcs:t,ssrcGroups:n}=mZ([{ssrcId:2e4}],this.cname);e.attributes.ssrcs=t,e.attributes.ssrcGroups=n}}return this.sessionDesc=t,this.currentMidIndex=t.mediaDescriptions.length-1,this.sessionDesc}updateCandidates(e){const t=this._candidates.filter((e=>"udp"===e.transport));if(e===MK.TCP){if(0===t.length)return;if(AH("TCP_CANDIDATE_ONLY")){const e=this._candidates.filter((e=>"tcp"===e.transport));t.forEach((t=>{-1===e.findIndex((e=>e.connectionAddress===t.connectionAddress))&&e.push(Z1(Z1({},t),{},{foundation:"tcpcandidate",priority:Number(t.priority)-1+"",transport:"tcp",port:Number(t.port)+90+""}))})),this._candidates=e}else{const e=[];t.forEach((t=>{e.push(Z1(Z1({},t),{},{foundation:"tcpcandidate",priority:Number(t.priority)-1+"",transport:"tcp",port:Number(t.port)+90+""}))})),this._candidates=[...t,...e]}}else if(e===MK.RELAY){if(0!==t.length)return;{const e=this._candidates.filter((e=>"tcp"===e.transport));e.forEach((e=>{t.push(Z1(Z1({},e),{},{foundation:"udpcandidate",priority:Number(e.priority)+1+"",transport:"udp",port:Number(e.port)-90+""}))})),this._candidates=[...t,...e]}}else 0===t.length?(this._candidates.filter((e=>"tcp"===e.transport)).forEach((e=>{t.push(Z1(Z1({},e),{},{foundation:"udpcandidate",priority:Number(e.priority)+1+"",transport:"udp",port:Number(e.port)-90+""}))})),this._candidates=t):this._candidates=this._candidates.filter((e=>"tcp"!==e.transport));for(const e of this.sessionDesc.mediaDescriptions)e.attributes.candidates=this.candidates}restartICE(e){e=VG(e),this._iceParameters=e,this.sessionDesc.mediaDescriptions.forEach((t=>{t.attributes.iceUfrag=e.iceUfrag,t.attributes.icePwd=e.icePwd}))}predictReceivingMids(e){const t=[];for(let n=0;n<e;n++)t.push((this.currentMidIndex+n+1).toString(10));return t}findAvailableMediaIndex(e,t){return this.sessionDesc.mediaDescriptions.findIndex((n=>{const r=n.media.mediaType===e&&"0"!==n.media.port&&("sendonly"===n.attributes.direction||"sendrecv"===n.attributes.direction)&&0===n.attributes.ssrcs.length;if(xB()){if(r){const e=this.firefoxSsrcMidMap.get(t[0].ssrcId);return!(e||"0"!==n.attributes.mid&&"1"!==n.attributes.mid)||!(!e||e!==n.attributes.mid)}return!1}return r}))}createOrRecycleDataChannel(){for(const e of this.sessionDesc.mediaDescriptions)if("application"===e.media.mediaType)return{mediaDesc:e,needExchangeSDP:!1};this.currentMidIndex+=1;const e="".concat(this.currentMidIndex),t={media:{mediaType:"application",port:e2,protos:["UDP","DTLS","SCTP"],fmts:["webrtc-datachannel"]},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:[],fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:[],ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:[],rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,mid:"".concat(e),sctpPort:"5000"}};return this.sessionDesc.mediaDescriptions.push(t),{mediaDesc:t,needExchangeSDP:!0}}createOrRecycleRecvMedia(e,t,n,r,i,o){const s=e._mediaStreamTrack.kind,a=this.rtpCapabilities.recv,c=IZ(s,a,this.localCapabilities.send,s===kK.VIDEO?r:i),d=s===kK.VIDEO?a.videoExtensions:a.audioExtensions;this.currentMidIndex+=1;const l="".concat(this.currentMidIndex);let h={media:{mediaType:s,port:e2,protos:["UDP","TLS","RTP","SAVPF"],fmts:c.map((e=>e.payloadType.toString(10)))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:d,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:t,ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:c,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:n,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(l)}};h=this.mungRecvMediaDsec(h,e,o);const u=this.findFirstClosedMedia(s);if(u){const e=this.sessionDesc.mediaDescriptions.indexOf(u);this.sessionDesc.mediaDescriptions[e]=h}else this.sessionDesc.mediaDescriptions.push(h);return h}updateRemoteCodec(e,t,n){const r=[...new Set(this._rtpCapabilities.recv.videoCodecs.map((e=>e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||"")).filter((e=>{var t;return Fv(t=Object.keys(PH)).call(t,e)})))],i=new Set(t);if(r.every((e=>i.has(e))))return KH.debug("codecs has not changed, no need to updateRemoteCodec, codecs: ".concat(t)),!1;const o=this._rtpCapabilities.recv.videoCodecs.filter((e=>t.some((t=>{var n;return Fv(n=e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||"").call(n,t)}))));if(0===o.length)return KH.debug("updateRemoteCodec failed, because cannot find matched codec, remoteCapabilities codecs: ".concat(r," codecs: ").concat(t)),!1;const s=[...new Set(o.map((e=>e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||"")))];let a;if(KH.debug("updateRemoteCodec, from ".concat(r," to ").concat(s)),0===e.length)a=this.sessionDesc.mediaDescriptions.filter((e=>"video"===e.media.mediaType&&"recvonly"===e.attributes.direction));else if(a=this.sessionDesc.mediaDescriptions.filter((t=>t.attributes.mid&&Fv(e).call(e,t.attributes.mid)&&"recvonly"===t.attributes.direction)),a.length!==e.length)return KH.debug("updateRemoteCodec failed, because cannot find mids, mids: ".concat(e,", codecs: ").concat(t)),!1;if(AH("USE_PUB_RTX")||AH("USE_SUB_RTX")){const e=AZ(o,this.rtpCapabilities.recv.videoCodecs);o.push(...e)}this._rtpCapabilities.recv.videoCodecs=o;const c=this.localCapabilities.send,d=this.rtpCapabilities.recv,l=IZ(kK.VIDEO,d,c,n);return a.forEach((e=>{const t=l.map((e=>e.payloadType.toString(10)));KH.debug("updateRemoteCodec mid: ".concat(e.attributes.mid,", from ").concat(e.attributes.payloads," to ").concat(l)),e.attributes.payloads=l,e.media.fmts=t})),!0}createOrRecycleSendMedia(e,t,n,r,i){const o=this.rtpCapabilities.send,s=e===kK.VIDEO?o.videoCodecs:o.audioCodecs,a=e===kK.VIDEO?o.videoExtensions:o.audioExtensions;this.currentMidIndex+=1;const c="".concat(this.currentMidIndex);let d={media:{mediaType:e,port:e2,protos:["UDP","TLS","RTP","SAVPF"],fmts:s.map((e=>e.payloadType.toString(10)))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:a,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:t,ssrcGroups:n,rtcpFeedbackWildcards:[],payloads:s,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:r,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(c)}};d=this.mungSendMediaDesc(d,i);const l=this.findFirstClosedMedia(e);if(l){const e=this.sessionDesc.mediaDescriptions.indexOf(l);this.sessionDesc.mediaDescriptions[e]=d}else this.sessionDesc.mediaDescriptions.push(d);return d}updateBundleMids(){this.sessionDesc.attributes.groups[0].identificationTag=this.sessionDesc.mediaDescriptions.filter((e=>"0"!==e.media.port)).map((e=>e.attributes.mid))}mungRecvMediaDsec(e,t,n){const r=VG(e);return _Z(r),gZ(r,t),EZ(r,t),yZ(r),vZ(r,n,this.localCapabilities.send),r}mungSendMediaDesc(e,t){const n=VG(e);return vZ(n,t,this.localCapabilities.recv),wZ(n),n}updateRecvMedia(e,t){const n=this.sessionDesc.mediaDescriptions.findIndex((t=>t.attributes.mid===e));if(-1!==n){const e=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[n],t);this.sessionDesc.mediaDescriptions[n]=e}}bumpMid(e){this.currentMidIndex+=e}findFirstClosedMedia(e){return this.sessionDesc.mediaDescriptions.find((t=>xB()?"0"===t.media.port&&t.media.mediaType===e:"0"===t.media.port))}findPreloadMediaDesc(e){return this.sessionDesc.mediaDescriptions.find((t=>{var n;return(null===(n=t.attributes)||void 0===n||null===(n=n.ssrcs[0])||void 0===n?void 0:n.ssrcId)===e[0].ssrcId}))}getSSRC(e){var t;return null===(t=this.sessionDesc.mediaDescriptions.find((t=>t.attributes.mid===e)))||void 0===t?void 0:t.attributes.ssrcs}}function n2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function r2(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?n2(Object(n),!0).forEach((function(t){SU(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):n2(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}let i2=function(e){return e.BANDWIDTH="bandwidth",e.CPU="cpu",e.NONE="none",e.OTHER="other",e}({});var o2=function(e){return e[e.DOWN=0]="DOWN",e[e.UP=1]="UP",e}(o2||{});const s2=new Map;function a2(e,t,n,r){let{scale:i}=e;if(0===i&&r===o2.UP||i>=t.length-1&&r===o2.DOWN)return e;let o=r2(r2({},e),{},{scale:r===o2.DOWN?++i:--i});switch(n){case"maintain-framerate":o=r2(r2({},o),t[i].motion);break;case"maintain-resolution":o=r2(r2({},o),t[i].detail);break;case"balanced":o=r2(r2({},o),t[i].balanced)}return o}function c2(e,t){if(t){const n={overUse:0,underUse:0,adaptationList:d2(t)};s2.set(e,n)}else s2.delete(e)}function d2(e){const t=r2({},e),{bitrateMax:n,frameRate:r,scaleResolutionDownBy:i,bitrateMin:o}=t,{MIN_FRAME_RATE:s,MAX_THRESHOLD_FRAMERATE:a,MAX_SCALE:c,BITRATE_MIN_THRESHOLD:d,BITRATE_MAX_THRESHOLD:l,BWE_SCALE_UP_THRESHOLD:h,BWE_SCALE_DOWN_THRESHOLD:u,PERF_SCALE_DOWN_THRESHOLD:p,PERF_SCALE_UP_THRESHOLD:f,BALANCE_BITRATE_FACTOR:m,BALANCE_FRAMERATE_FACTOR:g,BALANCE_RESOLUTION_FACTOR:_,MOTION_RESOLUTION_FACTOR:E,MOTION_BITRATE_FACTOR:y,DETAIL_FRAMERATE_FACTOR:v,DETAIL_BITRATE_FACTOR:b}=RH,S=Math.min(t.frameRate,a),T=[{scale:0,threshold:{bwe_down:Math.round(Math.pow(u,1)*n),bwe_up:n,fps_down:Math.round(Math.pow(p,1)*S),fps_up:r},balanced:{scaleResolutionDownBy:1,frameRate:r,bitrateMax:n,bitrateMin:o},motion:{scaleResolutionDownBy:1,frameRate:r,bitrateMax:n,bitrateMin:o},detail:{scaleResolutionDownBy:1,frameRate:r,bitrateMax:n,bitrateMin:o}}];for(let e=1;e<=c;e++){const t={bwe_up:Math.round(Math.pow(h,e)*n),bwe_down:Math.round(Math.pow(u,e+1)*n),fps_up:Math.round(Math.pow(f,e)*S),fps_down:Math.round(Math.pow(p,e+1)*S)},a={scaleResolutionDownBy:i/Math.pow(_,e),frameRate:Math.max(Math.round(Math.pow(g,e)*r),s),bitrateMax:Math.max(Math.round(Math.pow(m,e)*n),l),bitrateMin:Math.max(Math.round(Math.pow(m,e)*o),d)},c={scaleResolutionDownBy:i/Math.pow(E,e),frameRate:r,bitrateMax:Math.max(Math.round(Math.pow(y,e)*n),l),bitrateMin:Math.max(Math.round(Math.pow(y,e)*o),d)},R={scaleResolutionDownBy:1,frameRate:Math.max(Math.round(Math.pow(v,e)*r),s),bitrateMax:Math.max(Math.round(Math.pow(b,e)*n),l),bitrateMin:Math.max(Math.round(Math.pow(b,e)*o),d)};T.push({scale:e,threshold:t,balanced:a,motion:c,detail:R})}return T}function l2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h2(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l2(Object(n),!0).forEach((function(t){SU(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l2(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const u2=new Map;function p2(e,t){const n=u2.get(e);if(n){const{timer:t}=n;window.clearTimeout(t),u2.delete(e)}t.qualityLimitationReason=i2.NONE,c2(e)}var f2;function m2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g2(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m2(Object(n),!0).forEach((function(t){SU(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m2(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}let _2=(f2=class e extends LK{get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get dtlsTransportState(){var e,t;return null!==(e=null===(t=this.peerConnection.getReceivers()[0])||void 0===t||null===(t=t.transport)||void 0===t?void 0:t.state)&&void 0!==e?e:null}get localCodecs(){return[...new Set(this.localCapabilities&&this.localCapabilities.send.videoCodecs.map((e=>e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||"")).filter((e=>{var t;return Fv(t=Object.keys(PH)).call(t,e)})))]}constructor(t,n){super(t,n),SU(this,"store",void 0),SU(this,"peerConnection",void 0),SU(this,"id",XG(5,"connection-")),SU(this,"remoteSDP",void 0),SU(this,"initialOffer",void 0),SU(this,"transportEventReceiver",void 0),SU(this,"statsFilter",void 0),SU(this,"extension",{useXR:AH("USE_XR")}),SU(this,"localCapabilities",void 0),SU(this,"remoteCodecs",void 0),SU(this,"localCandidateCount",0),SU(this,"allCandidatesReceived",!1),SU(this,"isPreallocation",!1),SU(this,"preSSRCMap",new Map),SU(this,"dataStreamChannelMap",new Map),SU(this,"establishPromise",void 0),SU(this,"recoveredDataChannelIds",[]),SU(this,"currentDataChannelId",1),SU(this,"mutex",new cH("P2PConnection-mutex")),SU(this,"qualityLimitationReason",i2.NONE),this.store=n,this.peerConnection=new RTCPeerConnection(e.resolvePCConfiguration(t),{optional:[{googDscp:!0}]}),this.statsFilter=J0(this.peerConnection,AH("STATS_UPDATE_INTERVAL"),void 0,xB()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1,this.establishPromise=this.establish()}getPreMedia(e){const t=this.preSSRCMap.get(e);if(void 0!==t){const e=this.peerConnection.getTransceivers().find((e=>e.mid===t));if(e)return{transceiver:e,track:e.receiver.track,id:t}}}async updateRemoteRTPCapabilities(e,t){if(this.remoteCodecs=t,this.remoteSDP)if(this.remoteSDP.updateRemoteCodec(e,t,this.store.codec)){const e=await this.peerConnection.createOffer(),t=this.logSDPExchange(e.sdp||"","offer","local","muteLocal");await this.peerConnection.setLocalDescription(e);const n=this.remoteSDP.toString();null==t||t(n),await this.peerConnection.setRemoteDescription({type:"answer",sdp:n})}else KH.debug("[P2PConnection] updateRemoteRTPCapabilities no need to exchange SDP.");else KH.debug("[P2PConnection] cannot updateRemoteRTPCapabilities before remote SDP created, local codecs: ".concat(this.localCodecs,", codecs: ").concat(t))}async establish(){try{this.peerConnection.addTransceiver("video",{direction:"recvonly"}),this.peerConnection.addTransceiver("audio",{direction:"recvonly"});const e=await this.peerConnection.createOffer();if(!e.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");const t=hZ(e.sdp),n=await SZ({filterRTX:!AH("USE_PUB_RTX")&&!AH("USE_SUB_RTX"),filterVideoFec:AH("FILTER_VIDEO_FEC"),filterAudioFec:AH("FILTER_AUDIO_FEC"),filterVideoCodec:AH("FILTER_VIDEO_CODEC")},this.extension);return this.localCapabilities=CZ(n),this.initialOffer=e,g2(g2({},t),{},{rtpCapabilities:n,offerSDP:e.sdp})}catch(e){throw new eG(ZB.GET_LOCAL_CONNECTION_PARAMS_FAILED,e.toString())}}async connect(e){try{if(!this.initialOffer)throw new Error("Cannot establish P2PConnection without initial offer.");this.remoteSDP=new t2(g2(g2({},e),{},{localCapabilities:this.localCapabilities})),e.preallocation&&(this.isPreallocation=!0),Array.isArray(this.remoteCodecs)&&this.remoteCodecs.length>0&&this.remoteSDP.updateRemoteCodec([],this.remoteCodecs,this.store.codec);const t=this.remoteSDP.toString(),n=xZ(this.initialOffer.sdp,this.extension),r=this.logSDPExchange(n||"","offer","local","connect");this.store.descriptionStart(),await this.peerConnection.setLocalDescription({type:"offer",sdp:n}),null==r||r(t),await this.peerConnection.setRemoteDescription({type:"answer",sdp:t});const i=this.peerConnection.getTransceivers()[0];if(null!=i&&i.receiver&&this.tryBindTransportEvents(i.receiver),AH("PRELOAD_MEDIA_COUNT")>0){this.remoteSDP.preloadRemoteMedia(AH("PRELOAD_MEDIA_COUNT"));const e=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:e});const t=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(t)}const{preSSRCs:o}=e;if(Array.isArray(o)&&o.length>0){const{mids:e}=this.remoteSDP.batchSend(o.map((e=>({kind:e.kind,ssrcMsg:[{ssrcId:e.ssrcId,rtx:e.rtx}],mslabel:e.mslabel}))));e.forEach(((e,t)=>{this.preSSRCMap.set(o[t].ssrcId,e)})),await OZ(this.peerConnection,this.remoteSDP,this.extension),KH.debug("[".concat(this.store.clientId,"] [P2PConnection] pre-batchReceive exchange SDP."))}}catch(e){throw new eG(ZB.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(e.toString()))}}async updateRemoteConnect(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.updateRemoteConnect before remote SDP created");const{rtpCapabilities:t}=e;this.remoteSDP.updateRemoteRTPCapabilities(t),Array.isArray(this.remoteCodecs)&&this.remoteCodecs.length>0&&this.remoteSDP.updateRemoteCodec([],this.remoteCodecs,this.store.codec);const{preSSRCs:n}=e;if(Array.isArray(n)&&n.length>0){const{mids:e}=this.remoteSDP.batchSend(n.map((e=>Object.assign({},{kind:e.kind,ssrcMsg:[{ssrcId:e.ssrcId,rtx:e.rtx}],mslabel:e.mslabel}))));e.forEach(((e,t)=>{this.preSSRCMap.set(n[t].ssrcId,e)}))}await OZ(this.peerConnection,this.remoteSDP,this.extension),KH.debug("[P2PConnection] updateRemoteRTPCapabilities by exchanging SDP.")}catch(e){throw new eG(ZB.EXCHANGE_SDP_FAILED,"P2PConnection.updateRemoteConnect failed; ".concat(e.toString()))}}send(e,t,n){var r=this;return Cj((function*(){const i=yield wj(r.mutex.lock("From P2PConnection.send"));try{if(!r.remoteSDP)throw new Error("Cannot call P2PConnection.send before remote SDP created");const o=[];e.forEach((e=>{const t=r.peerConnection.addTransceiver(e._mediaStreamTrack,{direction:"sendonly"});o.push(t),e._updateRtpTransceiver(t)})),xB()&&!0===AH("SIMULCAST")&&(yield wj(r.applySimulcastForFirefox(o,e)));const s=yield wj(r.peerConnection.createOffer()),a=r.remoteSDP.predictReceivingMids(e.length),c=r.mungSendOfferSDP(s.sdp,e,a),d=sZ.parse(c),l=a.map((e=>{const t=d.mediaDescriptions.find((t=>t.attributes.mid===e));if(!t)throw new Error("Cannot extract ssrc from mediaDescription.");return uZ(t,AH("USE_PUB_RTX"))}));let h;try{h=yield l}catch(i){h=[],r.remoteSDP.receive(e,t,n,h);const o=r.remoteSDP.toString();throw yield wj(r.peerConnection.setLocalDescription({type:"offer",sdp:c})),yield wj(r.peerConnection.setRemoteDescription({type:"answer",sdp:o})),yield wj(r.stopSending(a,!0)),i}r.remoteSDP.receive(e,t,n,h);const u=r.remoteSDP.toString(),p=r.logSDPExchange(c,"offer","local","send");return yield wj(r.peerConnection.setLocalDescription({type:"offer",sdp:c})),yield wj(r.applySimulcastEncodings(o,e)),yield wj(r.applySendEncodings(o,e)),null==p||p(u),yield wj(r.peerConnection.setRemoteDescription({type:"answer",sdp:u})),o.map(((e,t)=>{const n=a[t];return{localSSRC:l[t],id:n,transceiver:e}}))}catch(e){throw e instanceof eG?e:new eG(ZB.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(e.toString()))}finally{i()}}))()}async createDataChannels(e,t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.createDataChannels before remote SDP created");let n=this.dataStreamChannelMap.get(e);if(n&&"open"===n.readyState)KH.debug("[P2PConnection] Channels are already available and can be reused directly.");else{const t=this.currentDataChannelId<1023?this.currentDataChannelId++:this.recoveredDataChannelIds.shift();if("number"!=typeof t)throw new Error("create DataChannel error, because cannot get dc id");n=this.peerConnection.createDataChannel("datastream-channel",{id:t,negotiated:!0,ordered:!1,maxRetransmits:AH("DATASTREAM_MAX_RETRANSMITS")}),n.binaryType="arraybuffer",this.dataStreamChannelMap.set(e,n)}t.forEach((e=>{e._updateOriginDataChannel(n)}));const{needExchangeSDP:r}=this.remoteSDP.sendDataChannel();if(r){const e=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:e});const t=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(t),KH.debug("[P2PConnection] createDataChannels by exchanging SDP.")}else KH.debug("[P2PConnection] createDataChannels no need to exchange SDP.");return}catch(e){throw e instanceof eG?e:new eG(ZB.EXCHANGE_SDP_FAILED,"P2PConnection.createDataChannels failed; ".concat(e.toString()))}}async stopDataChannels(e){try{const t=this.dataStreamChannelMap.get(e);return t&&(t.id&&this.recoveredDataChannelIds.push(t.id),t.close()),void this.dataStreamChannelMap.delete(e)}catch(e){throw e instanceof eG?e:new eG(ZB.DATACHANNEL_FAILED,"P2PConnection.stopDataChannels failed; ".concat(e.toString()))}}async stopSending(e,t){const n=t?void 0:await this.mutex.lock("From P2PConnection.stopSending");try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");const t=this.peerConnection.getTransceivers().filter((t=>-1!==e.indexOf(t.mid)));if(t.length!==e.length)throw new Error("Transceivers' length doesn't match mids' length when trying to call P2PConnection.stopSending.");t.map((e=>{var t;p2(this.id+e.mid,this),e.direction="inactive",null===(t=e.stop)||void 0===t||t.call(e)}));const n=await this.peerConnection.createOffer(),r=this.logSDPExchange(n.sdp||"","offer","local","stopSending");await this.peerConnection.setLocalDescription(n),this.remoteSDP.stopReceiving(e);const i=this.remoteSDP.toString();null==r||r(i),await this.peerConnection.setRemoteDescription({type:"answer",sdp:i})}catch(e){throw new eG(ZB.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(e.toString()))}finally{n&&n()}}async receive(e,t,n,r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(e," before remoteSDP created."));const{mid:i,needExchangeSDP:o}=this.remoteSDP.send(e,t,n,r);o&&(await OZ(this.peerConnection,this.remoteSDP,this.extension),KH.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(e," by exchanging SDP.")));const s=this.peerConnection.getTransceivers().find((e=>e.mid===i));if(!s)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:s.receiver.track,id:i,transceiver:s}}catch(e){throw new eG(ZB.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(e.toString()))}}async batchReceive(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.batchReceive before remoteSDP created.");const{mids:t,needExchangeSDP:n}=this.remoteSDP.batchSend(e);return n&&(await OZ(this.peerConnection,this.remoteSDP,this.extension),KH.debug("[".concat(this.store.clientId,"] [P2PConnection] batchReceive by exchanging SDP."))),t.map((e=>{const t=this.peerConnection.getTransceivers().find((t=>t.mid===e));if(!t)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:t.receiver.track,id:e,transceiver:t}}))}catch(e){throw new eG(ZB.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(e.toString()))}}async stopReceiving(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");e.forEach((e=>{Array.from(this.preSSRCMap.entries()).some((t=>{let[n,r]=t;if(r===e)return this.preSSRCMap.delete(n),!0}))})),this.remoteSDP.stopSending(e);const t=this.remoteSDP.toString(),n=this.logSDPExchange(t,"offer","remote","stopReceiving");await this.peerConnection.setRemoteDescription({type:"offer",sdp:t});const r=await this.peerConnection.createAnswer();null==n||n(r.sdp||""),await this.peerConnection.setLocalDescription(r)}catch(e){throw new eG(ZB.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(e.toString()))}}async muteRemote(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteRemote mid=".concat(e," before remote SDP created."));this.remoteSDP.mute(e);const t=this.remoteSDP.toString(),n=this.logSDPExchange(t,"offer","remote","muteRemote");await this.peerConnection.setRemoteDescription({type:"offer",sdp:t});const r=await this.peerConnection.createAnswer();null==n||n(r.sdp||""),await this.peerConnection.setLocalDescription(r)}catch(e){throw new eG(ZB.EXCHANGE_SDP_FAILED,"P2PConnection.muteRemote failed; ".concat(e.toString()))}}async unmuteRemote(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteRemote mid=".concat(e," before remote SDP created."));this.remoteSDP.unmute(e);const t=this.remoteSDP.toString(),n=this.logSDPExchange(t,"offer","remote","unmuteRemote");await this.peerConnection.setRemoteDescription({type:"offer",sdp:t});const r=await this.peerConnection.createAnswer();null==n||n(r.sdp||""),await this.peerConnection.setLocalDescription(r)}catch(e){throw new eG(ZB.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteRemote failed; ".concat(e.toString()))}}async muteLocal(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");const t=this.peerConnection.getTransceivers().filter((t=>t.mid&&-1!==e.indexOf(t.mid)));if(t.length!==e.length)throw new Error("Transceivers' length doesn't match mids' length.");t.map((e=>{e.direction="inactive"}));const n=await this.peerConnection.createOffer(),r=this.logSDPExchange(n.sdp||"","offer","local","muteLocal");await this.peerConnection.setLocalDescription(n),this.remoteSDP.muteRemote(e);const i=this.remoteSDP.toString();null==r||r(i),await this.peerConnection.setRemoteDescription({type:"answer",sdp:i})}catch(e){throw new eG(ZB.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat(e.toString()))}}async unmuteLocal(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");const t=this.peerConnection.getTransceivers().filter((t=>t.mid&&-1!==e.indexOf(t.mid)));if(t.length!==e.length)throw new Error("Transceivers' length doesn't match mids' length.");t.map((async(e,t)=>{e.direction="sendonly"}));const n=await this.peerConnection.createOffer(),r=this.logSDPExchange(n.sdp||"","offer","local","unmuteLocal");await this.peerConnection.setLocalDescription(n),this.remoteSDP.unmuteRemote(e);const i=this.remoteSDP.toString();null==r||r(i),await this.peerConnection.setRemoteDescription({type:"answer",sdp:i})}catch(e){throw new eG(ZB.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat(e.toString()))}}restartICE(e){var t=this;return Cj((function*(){const n=yield wj(t.mutex.lock("From P2PConnection.restartICE"));try{if(!t.remoteSDP)throw new Error("Cannot restartICE before remoteSDP created.");if(SJ().supportPCSetConfiguration){const n=t.peerConnection.getConfiguration(),r=e===MK.RELAY?"relay":"all";n.iceTransportPolicy!==r&&(KH.debug("[".concat(t.store.clientId,"] restartICE change iceTransportPolicy from [").concat(n.iceTransportPolicy,"] to [").concat(r,"]")),n.iceTransportPolicy=r,t.peerConnection.setConfiguration(n))}else if(e===MK.RELAY)return;t.remoteSDP.updateCandidates(e);const n=yield wj(t.peerConnection.createOffer({iceRestart:!0}));if(!n.sdp)throw new Error("Cannot restartICE because restart offer SDP does not exist.");const r=hZ(n.sdp),{remoteIceParameters:i}=yield r.iceParameters;t.remoteSDP.restartICE(i);const o=t.remoteSDP.toString(),s=t.logSDPExchange(n.sdp||"","offer","local","restartICE");t.store.descriptionStart(),yield wj(t.peerConnection.setLocalDescription(n)),null==s||s(o),yield wj(t.peerConnection.setRemoteDescription({type:"answer",sdp:o}))}catch(e){KH.warning("[".concat(t.store.clientId,"] restart ICE failed, abort operation"),e)}finally{n()}}))()}close(){var e;this.peerConnection.getTransceivers().forEach((e=>{p2(this.id+e.mid,this)})),this.preSSRCMap.clear(),this.peerConnection.close(),null===(e=this.onConnectionStateChange)||void 0===e||e.call(this,"closed"),this.tryUnbindTransportEvents(),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.transportEventReceiver=void 0,this.statsFilter.destroy(),this.dataStreamChannelMap.clear(),this.recoveredDataChannelIds=[],this.currentDataChannelId=1}getStats(){return g2(g2({},this.statsFilter.getStats()),{},{qualityLimitationReason:this.qualityLimitationReason})}getRemoteVideoIsReady(e){return this.statsFilter.getVideoIsReady(e)}async updateEncoderConfig(e,t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");const n=await this.peerConnection.createOffer(),r=this.mungSendOfferSDP(n.sdp,[t],[e]);this.remoteSDP.updateRecvMedia(e,t);const i=this.remoteSDP.toString(),o=this.logSDPExchange(r,"offer","local","updateEncoderConfig");await this.peerConnection.setLocalDescription({type:"offer",sdp:r}),null==o||o(i),await this.peerConnection.setRemoteDescription({type:"answer",sdp:i})}catch(e){throw new eG(ZB.EXCHANGE_SDP_FAILED,e.toString())}}async updateSendParameters(e,t){const n=this.peerConnection.getTransceivers().filter((t=>t.mid===e));1===n.length&&(this.isVP8Simulcast(t)?xB()||await this.applySimulcastEncodings(n,[t]):await this.applySendEncodings(n,[t]))}setStatsRemoteVideoIsReady(e,t){this.statsFilter.setVideoIsReady2(e,t)}async replaceTrack(e,t){const n=this.peerConnection.getTransceivers().find((e=>e.mid===t));n&&await n.sender.replaceTrack(e._mediaStreamTrack)}async getSelectedCandidatePair(){const e=this.peerConnection.getReceivers();if(e.length>0&&e[0].transport&&e[0].transport.iceTransport&&e[0].transport.iceTransport.getSelectedCandidatePair&&e[0].transport.iceTransport.getSelectedCandidatePair()){const t=e[0].transport.iceTransport,{local:n,remote:r}=t.getSelectedCandidatePair();return{local:g2(g2({},D0),{},{candidateType:n.type,protocol:n.protocol,address:n.address,port:n.port}),remote:g2(g2({},D0),{},{candidateType:r.type,protocol:r.protocol,address:r.address,port:r.port})}}return this.statsFilter.getSelectedCandidatePair()}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var e;null===(e=this.onICEConnectionStateChange)||void 0===e||e.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var e;null===(e=this.onConnectionStateChange)||void 0===e||e.call(this,this.peerConnection.connectionState)},this.peerConnection.onicecandidate=e=>{e.candidate?this.localCandidateCount+=1:(this.peerConnection.onicecandidate=null,this.allCandidatesReceived=!0,KH.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount))},setTimeout((()=>{this.allCandidatesReceived||(this.allCandidatesReceived=!0,KH.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] onicecandidate timeout, local candidate count"),this.localCandidateCount))}),AH("CANDIDATE_TIMEOUT"))}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(t){const n={iceServers:[]};return t.iceServers?n.iceServers=t.iceServers:t.turnServer&&"off"!==t.turnServer.mode&&(TG(t.turnServer.servers)?n.iceServers=t.turnServer.servers:(n.iceServers&&n.iceServers.push(...e.turnServerConfigToIceServers(t.turnServer.servers)),AH("USE_TURN_SERVER_OF_GATEWAY")&&n.iceServers&&t.turnServer.serversFromGateway&&n.iceServers.push(...e.turnServerConfigToIceServers(t.turnServer.serversFromGateway)),AH("FORCE_TURN_TCP")?n.iceTransportPolicy="relay":t.turnServer.servers.concat(t.turnServer.serversFromGateway||[]).forEach((e=>{e.forceturn&&(n.iceTransportPolicy="relay")})))),AH("ENABLE_ENCODED_TRANSFORM")&&SJ().supportWebRTCEncodedTransform&&(n.encodedInsertableStreams=!0),n}static turnServerConfigToIceServers(e){const t=[];return e.forEach((e=>{e.security?e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turns:".concat(bz(e.turnServerURL),":").concat(e.tcpport,"?transport=tcp")}):(e.udpport&&!AH("FORCE_TURN_TCP")&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turn:".concat(e.turnServerURL,":").concat(e.udpport,"?transport=udp")}),e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turn:".concat(e.turnServerURL,":").concat(e.tcpport,"?transport=tcp")}))})),t}tryBindTransportEvents(e){const t=e.transport;if(t){this.transportEventReceiver=e,t.onstatechange=()=>{var e;null!=t&&t.state&&(null===(e=this.onDTLSTransportStateChange)||void 0===e||e.call(this,t.state))},t.onerror=e=>{var t;null===(t=this.onDTLSTransportError)||void 0===t||t.call(this,"error"in e?e.error:e)};const n=t.iceTransport;n&&(n.onstatechange=()=>{const e=null==t?void 0:t.iceTransport.state;var n;e&&(null===(n=this.onICETransportStateChange)||void 0===n||n.call(this,e))},n.getSelectedCandidatePair&&(n.onselectedcandidatepairchange=()=>{if(n.getSelectedCandidatePair()){const{local:e,remote:t}=n.getSelectedCandidatePair();KH.info("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] selectedcandidatepairchange: local ").concat(JSON.stringify({candidateType:e.type,protocol:e.protocol}),", remote ").concat(JSON.stringify({candidateType:t.type,protocol:t.protocol,address:t.address,port:t.port})," )"))}}))}}tryUnbindTransportEvents(){this.transportEventReceiver&&this.transportEventReceiver.transport&&(this.transportEventReceiver.transport.onstatechange=null,this.transportEventReceiver.transport.onerror=null,this.transportEventReceiver.transport.iceTransport&&(this.transportEventReceiver.transport.iceTransport.onstatechange=null))}async updateRtpSenderEncodings(e,t){var n,r;if(!t){const n=this.peerConnection.getSenders();t=n.find((t=>t.track===e._mediaStreamTrack))}if(!t)return KH.warn("[".concat(e.getTrackId(),"] no rtpSender found}"));if(this.isVP8Simulcast(e))return KH.warn("[updateRtpSenderEncodings] Track is VP8 simulcast, please apply simulcast encodings");if(!SJ().supportSetRtpSenderParameters)return KH.warn("[updateRtpSenderEncodings] Browser not support set rtp-sender parameters");const i={},o={};switch(e._optimizationMode){case"motion":i.degradationPreference="maintain-framerate";break;case"detail":i.degradationPreference="maintain-resolution";break;case"balanced":i.degradationPreference="balanced"}const s=function(e,t){return e.getTransceivers().find((e=>e.sender.track===t||e.receiver.track===t))}(this.peerConnection,e._mediaStreamTrack),a=(e=>{const t=e._encoderConfig;if(!t)return;const{frameRate:n,width:r,height:i}=e.getMediaStreamTrackSettings();let{frameRate:o=n,width:s=r,height:a=i}=t;if(!o||!s||!a)return;s=iH(s),a=iH(a),o=iH(o);const{max:c,min:d}=function(e,t,n){const r=200*Math.pow(n/15,.6)*Math.pow(e*t/640/360,.75);return{min:Math.floor(r),max:Math.floor(4*r)}}(s,a,o),{bitrateMax:l,bitrateMin:h}=t||{};l||KH.debug("calculate bitrate: [w: ".concat(s,", h: ").concat(a,", fps: ").concat(o,"] => [brMax: ").concat(l,", brMin: ").concat(h,"]"));const{maxFramerate:u}=AH("ENCODER_CONFIG_LIMIT");return u&&"number"==typeof u&&(o=Math.min(o,u)),{frameRate:o,bitrateMax:l||c,bitrateMin:h||d,scaleResolutionDownBy:1,scale:0}})(e);if(function(e){var t;return!(!AH("ENABLE_AG_ADAPTATION")||!(e instanceof x$||Fv(t=e._hints).call(t,BJ.CUSTOM_TRACK))||!AH("FORCE_SUPPORT_AG_ADAPTATION")&&!(function(){const e=SB();if(e.os!==_B.IOS||!e.osVersion)return!1;const t=e.osVersion.split(".");return Number(t[0])>=14}()&&MB(17,4,!0)||kB(14)&&UB(17,4,!0)))}(e)&&s&&t&&a&&this.getLocalVideoStats&&Fv(n=["vp8","vp9"]).call(n,this.store.codec)){var c;const n=i.degradationPreference||(Fv(c=e._hints).call(c,BJ.CUSTOM_TRACK)?AH("CUSTOM_ADAPTATION_DEFAULT_MODE"):"maintain-framerate");!function(e,t,n,r,i,o){if(p2(e,n),i(t),"balanced"!==r&&"maintain-framerate"!==r&&"maintain-resolution"!==r)return;let s=-1;c2(e,t);const a=window.setInterval((()=>{const a=u2.get(e);if(!AH("ENABLE_AG_ADAPTATION")||!a)return p2(e,n),void i(t);const c=o();if(c.sendPackets>0&&c.OutgoingAvailableBandwidth>0){if(-1===s)return void(s=Date.now());if(Date.now()-s<1e3)return;const o=c.sendFrameRate,d=c.OutgoingAvailableBandwidth,[l,h]=function(e,t,n,r,i,o){const s=s2.get(e)||{overUse:0,underUse:0,adaptationList:d2(i)},{adaptationList:a}=s;s2.set(e,s);const{OVERUSE_TIMES_THRESHOLD:c,UNDERUSE_TIMES_THRESHOLD:d}=RH,{scale:l}=r;let h,u;return"number"==typeof t&&t>0&&function(e,t,n,r){if(t>=n.length)return!1;let{threshold:{fps_down:i}}=n[t];return AH("FORCE_AG_HIGH_FRAMERATE")&&"maintain-framerate"===r&&(i=n[0].threshold.fps_down),e<i}(t,l,a,o)&&(s.overUse++,u=i2.CPU,s.overUse>c)||"number"==typeof n&&n>0&&function(e,t,n){if(t>=n.length)return!1;const{threshold:{bwe_down:r}}=n[t];return e<r}(n,l,a)&&(s.overUse++,u=i2.BANDWIDTH,s.overUse>c)?(s.overUse=0,s.underUse=0,h=a2(r,a,o,o2.DOWN),[h,u]):("number"==typeof t&&t>0&&"number"==typeof n&&n>0&&function(e,t,n,r){if(0===t)return;let{threshold:{fps_up:i}}=n[t];return AH("FORCE_AG_HIGH_FRAMERATE")&&"maintain-framerate"===r&&(i=n[1].threshold.fps_up),e>i}(t,l,a,o)&&function(e,t,n){if(0===t)return;const{threshold:{bwe_up:r}}=n[t];return e>r}(n,l,a)&&(s.underUse++,s.underUse>d&&(s.overUse=0,s.underUse=0,h=a2(r,a,o,o2.UP),0===h.scale&&(u=i2.NONE))),[h,u])}(e,o,d,a.adaptationConfig,t,r);h&&(n.qualityLimitationReason=h),l&&a.adaptationConfig.scale!==l.scale&&(KH.debug("[".concat(e,"] applyAdaptation: ").concat(n.qualityLimitationReason,"\n           sendFps ").concat(o,", bwe ").concat(d,", switch from ").concat(a.adaptationConfig.scale," to ").concat(l.scale," ")),a.adaptationConfig=h2(h2({},a.adaptationConfig),l),i(l))}}),AH("CHECK_LOCAL_STATS_INTERVAL")),c=h2({},t);u2.set(e,{timer:a,adaptationConfig:c,originConfig:t,adaptationFunc:i}),KH.debug("[".concat(e,"] start adaptation, originConfig: ").concat(JSON.stringify(t),", degradationPreference: ").concat(r))}(this.id+s.mid,a,this,n,(e=>{t&&this.updateAdaptation(t,e)}),this.getLocalVideoStats.bind(this))}if(e._encoderConfig){var d;const{bitrateMax:t,frameRate:n,scaleResolutionDownBy:r}=e._encoderConfig;t&&(o.maxBitrate=1e3*t),(Fv(d=e._hints).call(d,BJ.LOW_STREAM)||e.isUseScaleResolutionDownBy)&&(n&&(o.maxFramerate=Tz(n)),r&&r>=1&&(o.scaleResolutionDownBy=r))}const{maxFramerate:l}=AH("ENCODER_CONFIG_LIMIT");if(l&&"number"==typeof l&&(o.maxFramerate=o.maxFramerate?Math.min(o.maxFramerate,l):l),AH("DSCP_TYPE")&&qB()){var h;const e=AH("DSCP_TYPE");Fv(h=["very-low","low","medium","high"]).call(h,e)&&(o.networkPriority=e)}const u=t.getParameters(),p=null===(r=u.encodings)||void 0===r?void 0:r[0];xB()&&!p&&(i.encodings=[o]),p&&Object.assign(p,o),Object.assign(u,i),KH.debug("[".concat(e.getTrackId(),"] updateRtpSenderEncodings: ").concat(JSON.stringify(u.encodings))),await t.setParameters(u),await async function(e,t,n){try{var r;if(!SJ().supportSetRtpSenderParameters)return;if(!function(e){return"vp9"===e}(e)||!AH("ENABLE_SVC"))return;const i={},o={},s=t.getParameters(),a=null===(r=s.encodings)||void 0===r?void 0:r[0];o.scalabilityMode=aZ(n),a&&Object.assign(a,o),Object.assign(s,i),await t.setParameters(s),KH.debug("[updateAdaptation] updateRtpSenderEncodings scalabilityMode success: ".concat(JSON.stringify(s.encodings)))}catch(e){KH.debug("[updateAdaptation] updateRtpSenderEncodings scalabilityMode failed",e)}}(this.store.codec,t,AH("SVC_MODE"))}async updateAdaptation(e,t){var n,r;if(!e)return KH.debug("[updateAdaptation] no rtpSender found");if(!SJ().supportSetRtpSenderParameters)return KH.debug("[updateAdaptation] Browser not support set rtp-sender parameters");const i={},{bitrateMax:o,frameRate:s,scaleResolutionDownBy:a}=t;o&&(i.maxBitrate=1e3*o),s&&(i.maxFramerate=Tz(s)),a&&a>=1&&Fv(n=["vp8","vp9"]).call(n,this.store.codec)&&(i.scaleResolutionDownBy=a);const c=e.getParameters(),d=null===(r=c.encodings)||void 0===r?void 0:r[0];d&&Object.assign(d,i),Object.assign(c,{});try{await e.setParameters(c),KH.debug("[updateAdaptation] updateRtpSenderEncodings: ".concat(JSON.stringify(c.encodings)))}catch(t){!("transport"in e)||e.transport&&"connected"===e.transport.state?"connected"!==this.peerConnectionState?KH.debug("[updateAdaptation] peerConnection not connected}"):KH.debug("[updateAdaptation] updateRtpSenderEncodings failed",t):KH.debug("[updateAdaptation] rtpSender transport not connected}")}}async applySendEncodings(e,t){try{if(!SJ().supportSetRtpSenderParameters)return;if(e.length!==t.length)return;for(let n=0;n<e.length;n++){const r=e[n],i=t[n];i instanceof O$&&!this.isVP8Simulcast(i)&&await this.updateRtpSenderEncodings(i,r.sender)}}catch(e){KH.debug("[".concat(this.store.clientId,"] Apply RTPSendEncodings failed."))}}mungSendOfferSDP(e,t,n){const r=sZ.parse(e);return t.forEach(((e,t)=>{const i=n[t],o=r.mediaDescriptions.find((e=>e.attributes.mid===i));o&&(gZ(o,e),bZ(o,e,this.store.codec))})),sZ.print(r)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=e=>{var t;null===(t=this.onFirstAudioReceived)||void 0===t||t.call(this,e)},this.statsFilter.onFirstVideoReceived=e=>{var t;null===(t=this.onFirstVideoReceived)||void 0===t||t.call(this,e)},this.statsFilter.onFirstAudioDecoded=e=>{var t;null===(t=this.onFirstAudioDecoded)||void 0===t||t.call(this,e)},this.statsFilter.onFirstVideoDecoded=(e,t,n)=>{var r;null===(r=this.onFirstVideoDecoded)||void 0===r||r.call(this,e,t,n)},this.statsFilter.onSelectedLocalCandidateChanged=(e,t)=>{var n;null===(n=this.onSelectedLocalCandidateChanged)||void 0===n||n.call(this,e,t)},this.statsFilter.onSelectedRemoteCandidateChanged=(e,t)=>{var n;null===(n=this.onSelectedRemoteCandidateChanged)||void 0===n||n.call(this,e,t)},this.statsFilter.onFirstVideoDecodedTimeout=e=>{var t;null===(t=this.onFirstVideoDecodedTimeout)||void 0===t||t.call(this,e)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0,this.statsFilter.onFirstVideoDecodedTimeout=void 0}async applySimulcastForFirefox(e,t){if(e.length===t.length)for(let a=0;a<e.length;a++){var n,r,i,o,s;const c=e[a],d=t[a];if(d instanceof O$&&!Fv(n=d._hints).call(n,BJ.LOW_STREAM)&&null!==(r=d._encoderConfig)&&void 0!==r&&r.bitrateMax&&(null===(i=d._encoderConfig)||void 0===i?void 0:i.bitrateMax)>200&&null!==(o=d._scalabilityMode)&&void 0!==o&&o.numSpatialLayers&&(null===(s=d._scalabilityMode)||void 0===s?void 0:s.numSpatialLayers)>1&&"vp8"===this.store.codec){const e={},t={high:1e3*(d._encoderConfig.bitrateMax-50),medium:5e4};e.encodings=[{rid:"m",active:!0,maxBitrate:t.medium,scaleResolutionDownBy:4},{rid:"h",active:!0,maxBitrate:t.high}];const n=c.sender.getParameters();await c.sender.setParameters(Object.assign(n,e))}}}async applySimulcastEncodings(e,t){if(!xB()&&e.length===t.length)for(let n=0;n<e.length;n++){const r=t[n];if(r instanceof O$&&this.isVP8Simulcast(r)){const t=e[n],i={},o={high:1e3*(r._encoderConfig.bitrateMax-50),medium:5e4};i.encodings=[{active:!0,adaptivePtime:!1,networkPriority:"high",priority:"high",maxBitrate:o.high},{active:!0,adaptivePtime:!1,networkPriority:"low",priority:"low",maxBitrate:o.medium,scaleResolutionDownBy:4}];const s=t.sender.getParameters();await t.sender.setParameters(Object.assign(s,i))}}}isVP8Simulcast(e){var t,n,r,i,o;return!!(e instanceof O$&&AH("SIMULCAST")&&"vp8"===this.store.codec&&!Fv(t=e._hints).call(t,BJ.LOW_STREAM)&&null!==(n=e._encoderConfig)&&void 0!==n&&n.bitrateMax&&(null===(r=e._encoderConfig)||void 0===r?void 0:r.bitrateMax)>200&&null!==(i=e._scalabilityMode)&&void 0!==i&&i.numSpatialLayers&&(null===(o=e._scalabilityMode)||void 0===o?void 0:o.numSpatialLayers)>1)}logSDPExchange(e,t,n,r){if(AH("SDP_LOGGING"))return KH.upload("[".concat(this.store.clientId,"] exchanging ").concat(n," ").concat(t," SDP during P2PConnection.").concat(r,"\n"),e),"offer"===t?e=>{this.logSDPExchange(e,"answer","local"===n?"remote":"local",r)}:void 0}async getRemoteSSRC(e){if(!this.remoteSDP)return;const t=this.remoteSDP.getSSRC(e);return t&&0!==t.length?t[0].ssrcId:void 0}setConfiguration(t){if(SJ().supportPCSetConfiguration){const n=e.resolvePCConfiguration(t);this.peerConnection.setConfiguration(n)}}},YW(f2.prototype,"updateRemoteRTPCapabilities",[E2],Object.getOwnPropertyDescriptor(f2.prototype,"updateRemoteRTPCapabilities"),f2.prototype),YW(f2.prototype,"connect",[E2],Object.getOwnPropertyDescriptor(f2.prototype,"connect"),f2.prototype),YW(f2.prototype,"updateRemoteConnect",[E2],Object.getOwnPropertyDescriptor(f2.prototype,"updateRemoteConnect"),f2.prototype),YW(f2.prototype,"createDataChannels",[E2],Object.getOwnPropertyDescriptor(f2.prototype,"createDataChannels"),f2.prototype),YW(f2.prototype,"receive",[E2],Object.getOwnPropertyDescriptor(f2.prototype,"receive"),f2.prototype),YW(f2.prototype,"batchReceive",[E2],Object.getOwnPropertyDescriptor(f2.prototype,"batchReceive"),f2.prototype),YW(f2.prototype,"stopReceiving",[E2],Object.getOwnPropertyDescriptor(f2.prototype,"stopReceiving"),f2.prototype),YW(f2.prototype,"muteRemote",[E2],Object.getOwnPropertyDescriptor(f2.prototype,"muteRemote"),f2.prototype),YW(f2.prototype,"unmuteRemote",[E2],Object.getOwnPropertyDescriptor(f2.prototype,"unmuteRemote"),f2.prototype),YW(f2.prototype,"muteLocal",[E2],Object.getOwnPropertyDescriptor(f2.prototype,"muteLocal"),f2.prototype),YW(f2.prototype,"unmuteLocal",[E2],Object.getOwnPropertyDescriptor(f2.prototype,"unmuteLocal"),f2.prototype),YW(f2.prototype,"close",[E2],Object.getOwnPropertyDescriptor(f2.prototype,"close"),f2.prototype),YW(f2.prototype,"updateEncoderConfig",[E2],Object.getOwnPropertyDescriptor(f2.prototype,"updateEncoderConfig"),f2.prototype),YW(f2.prototype,"updateSendParameters",[E2],Object.getOwnPropertyDescriptor(f2.prototype,"updateSendParameters"),f2.prototype),YW(f2.prototype,"replaceTrack",[E2],Object.getOwnPropertyDescriptor(f2.prototype,"replaceTrack"),f2.prototype),YW(f2.prototype,"updateAdaptation",[E2],Object.getOwnPropertyDescriptor(f2.prototype,"updateAdaptation"),f2.prototype),YW(f2.prototype,"getRemoteSSRC",[E2],Object.getOwnPropertyDescriptor(f2.prototype,"getRemoteSSRC"),f2.prototype),f2);function E2(e,t,n){const r=e[t];if("function"!=typeof r)throw new Error("Cannot use mutex on object property.");return n.value=async function(){const e=this.mutex,n=await e.lock("From P2PConnection.".concat(t));try{for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return await r.apply(this,o)}finally{n()}},n}var y2;function v2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b2(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v2(Object(n),!0).forEach((function(t){SU(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v2(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function S2(e){var t,n,r,i=2;for("undefined"!=typeof Symbol&&(n=Aj,r=Symbol.iterator);i--;){if(n&&null!=(t=e[n]))return t.call(e);if(r&&null!=(t=e[r]))return new T2(t.call(e));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function T2(e){function t(e){if(Object(e)!==e)return LO.reject(new TypeError(e+" is not an object."));var t=e.done;return LO.resolve(e.value).then((function(e){return{value:e,done:t}}))}return T2=function(e){this.s=e,this.n=e.next},T2.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?LO.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?LO.reject(e):t(n.apply(this.s,arguments))}},new T2(e)}let R2=(y2=class extends mG{get state(){return this._state}set state(e){const t=this._state;this._state=e,this.emit(jK.StateChange,t,this._state)}constructor(e,t){super(),SU(this,"isPlanB",void 0),SU(this,"store",void 0),SU(this,"statsUploader",void 0),SU(this,"connection",void 0),SU(this,"localTrackMap",new Map),SU(this,"remoteUserMap",new Map),SU(this,"localDataChannels",[]),SU(this,"remoteDataChannelMap",new Map),SU(this,"pendingLocalTracks",[]),SU(this,"pendingRemoteTracks",[]),SU(this,"pendingLocalDataChannels",[]),SU(this,"pendingRemoteDataChannels",[]),SU(this,"statsCollector",void 0),SU(this,"shouldForwardP2PCreation",void 0),SU(this,"iceFailedCount",0),SU(this,"dtlsFailedCount",0),SU(this,"mutex",new cH("P2PChannel-mutex")),SU(this,"_state",FK.Disconnected),SU(this,"_pcStatsUploadType",AH("NEW_ICE_RESTART")?UK.FIRST_CONNECTION:UK.OLD_FIRST_CONNECTION),SU(this,"_isInRestartIce",!1),SU(this,"_isStartRestartIce",!1),SU(this,"_restartStates",["disconnected","failed"]),SU(this,"_restartTimer",void 0),SU(this,"_isFirstConnected",!0),SU(this,"handleMuteLocalTrack",(async(e,t,n)=>{const r=await this.mutex.lock("Locking from P2PChannel.handleMuteLocalTrack");try{if(!this.connection||this.state!==FK.Connected)return void n(new eG(ZB.INVALID_OPERATION,"Cannot call P2PChannel.handleMuteLocalTrack before connection established."));const r=this.filterTobeMutedTracks(e);if(0===r.length)return void t();const i=r.find((e=>"videoLowTrack"===e[0]));i&&i[1].track._originMediaStreamTrack.stop(),await this.connection.muteLocal(r.map((e=>{let[,{id:t}]=e;return t})));const o=this.createMuteMessage(r);await NG(this,jK.RequestMuteLocal,o),t()}catch(e){n(e)}finally{r()}})),SU(this,"handleUnmuteLocalTrack",(async(e,t,n)=>{const r=await this.mutex.lock("Locking from P2PChannel.handleUnmuteLocalTrack");try{if(!this.connection||this.state!==FK.Connected)return void n(new eG(ZB.INVALID_OPERATION,"Cannot call P2PChannel.handleUnmuteLocalTrack before connection established."));const r=this.filterTobeUnmutedTracks(e);if(0===r.length)return void t();const i=r.find((e=>"videoLowTrack"===e[0]));if(i){const t=i[1];if(t.track._originMediaStreamTrack.stop(),!AH("DISABLE_DUAL_STREAM_USE_ENCODING")&&SJ().supportDualStreamEncoding){const n=e._mediaStreamTrack.clone();t.track._mediaStreamTrack=n,t.track._originMediaStreamTrack=n}else{const n=r1(e,DG(this,jK.RequestLowStreamParameter));t.track._mediaStreamTrack=n,t.track._originMediaStreamTrack=n}await new LO(((e,n)=>{this.handleReplaceTrack(t.track,e,n,!0)}))}await this.connection.unmuteLocal(r.map((e=>{let[,{id:t}]=e;return t})));const o=this.createUnmuteMessage(r);await NG(this,jK.RequestUnmuteLocal,o),t()}catch(e){n(e)}finally{r()}})),SU(this,"handleUpdateVideoEncoder",(async(e,t,n)=>{const r=await this.mutex.lock("Locking from P2PChannel.handleSetVideoEncoder");try{const n=this.localTrackMap.get(VK.LocalVideoTrack);if(!this.connection||!n||n.track!==e||this.state!==FK.Connected)return void t();const{id:r,track:i}=n;await this.connection.updateSendParameters(r,i),await this.connection.updateEncoderConfig(r,i),this.emit(jK.UpdateVideoEncoder,i),t()}catch(e){n(e)}finally{r()}})),SU(this,"handleUpdateVideoSendParameters",(async(e,t,n)=>{const r=await this.mutex.lock("Locking from P2PChannel.handleUpdateVideoSendParameters");try{const n=this.localTrackMap.get(VK.LocalVideoTrack);if(!this.connection||!n||n.track!==e||this.state!==FK.Connected)return void t();const{id:r,track:i}=n;await this.connection.updateSendParameters(r,i),t()}catch(e){n(e)}finally{r()}})),SU(this,"handleReplaceMixingTrack",(async(e,t,n,r)=>{if(!this.connection||this.state!==FK.Connected)return void t();const i=T1([e]);let o;KH.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection will replace audioTrack [").concat(i.getTrackId(),"]")),"boolean"==typeof r&&r||(o=await this.mutex.lock("From P2PChannel.handleReplaceMixingTrack"));try{await this.replaceTrack(e,i),t()}catch(e){n(e)}finally{var s;null===(s=o)||void 0===s||s()}})),SU(this,"handleReplaceTrack",(async(e,t,n,r)=>{let i;KH.debug("[".concat(this.store.clientId,"] P2PChannel handleReplaceTrack for [track-id-").concat(e.getTrackId(),"]")),"boolean"==typeof r&&r||(i=await this.mutex.lock("From P2PChannel.handleReplaceTrack"));try{var o;const n=Array.from(this.localTrackMap.entries()).find((t=>{let[,{track:n}]=t;return e===n}));if(!this.connection||!n||this.state!==FK.Connected)return void t();if(await(null===(o=this.connection)||void 0===o?void 0:o.replaceTrack(e,n[1].id)),this.isPlanB){const t=n[1];t.id=e._mediaStreamTrack.id,this.localTrackMap.set(n[0],t)}if(n[0]===VK.LocalVideoTrack&&!AH("DISABLE_DUAL_STREAM_USE_ENCODING")&&SJ().supportDualStreamEncoding){const t=this.localTrackMap.get(VK.LocalVideoLowTrack);if(t){const n=e._mediaStreamTrack.clone();t.track._originMediaStreamTrack.stop(),t.track._mediaStreamTrack=n,t.track._originMediaStreamTrack=n,await new LO(((e,n)=>{this.handleReplaceTrack(t.track,e,n,!0)}))}}t()}catch(e){n(e)}finally{var s;null===(s=i)||void 0===s||s()}})),SU(this,"handleGetRTCStats",(e=>{e(this.statsCollector.getRTCStats())})),SU(this,"handleGetLocalVideoStats",(e=>{e(this.statsCollector.getLocalVideoTrackStats())})),SU(this,"handleGetLocalAudioStats",(e=>{e(this.statsCollector.getLocalAudioTrackStats())})),SU(this,"handleGetRemoteVideoStats",(e=>this.statsCollector.getRemoteVideoTrackStats(e.uid)[e.uid])),SU(this,"handleGetRemoteAudioStats",(e=>this.statsCollector.getRemoteAudioTrackStats(e.uid)[e.uid])),this.store=e,this.statsCollector=t,this.statsCollector.addP2PChannel(this),this.statsUploader=new E1(this.store),this.bindStatsUploaderEvents(),this.isPlanB=!SJ().supportUnifiedPlan||AH("CHROME_FORCE_PLAN_B")&&qB(),this.shouldForwardP2PCreation=AH("FORWARD_P2P_CREATION")&&SJ().supportPCSetConfiguration&&zB(),this.shouldForwardP2PCreation&&(this.connection=this.isPlanB?new X1({},this.store):new _2({},this.store),this.bindConnectionEvents(this.connection))}async startP2PConnection(e){var t;this.state=FK.New;const n=this.shouldForwardP2PCreation&&"closed"===(null===(t=this.connection)||void 0===t?void 0:t.peerConnectionState);if(this.shouldForwardP2PCreation&&!n||(n&&this.connection&&(KH.warning("[".concat(this.store.clientId,"] P2PChannel.startP2PConnection ForwardP2P closed.")),this.connection.close(),this.unbindConnectionEvents(this.connection)),this.connection=this.isPlanB?new X1(e,this.store):new _2(e,this.store),this.bindConnectionEvents(this.connection)),!this.connection)throw new eG(ZB.UNEXPECTED_ERROR,"Cannot P2PChannel.startConnection before P2PConnection initialization .");return this._pcStatsUploadType=AH("NEW_ICE_RESTART")?UK.FIRST_CONNECTION:UK.OLD_FIRST_CONNECTION,this._isFirstConnected=!0,this._isInRestartIce=!1,this._isStartRestartIce=!1,this.connection.setConfiguration(e),this.connection.establishPromise}async connect(e){if(!this.connection)throw new eG(ZB.UNEXPECTED_ERROR,"Cannot P2PChannel.connect before P2PChannel.startP2PConnection .");AH("ENABLE_PREALLOC_PC")&&this.state===FK.Connected?await this.connection.updateRemoteConnect(e):(this.store.peerConnectionStart(),await this.connection.connect(e),this.statsUploader.startUploadTransportStats(),this.statsUploader.startUploadExtensionUsageStats(),this.state=FK.Connected)}updateRemoteRTPCapabilities(e){const t=Array.from(this.localTrackMap.entries()).filter((e=>{var t;let[n]=e;return Fv(t=[VK.LocalVideoLowTrack,VK.LocalVideoTrack]).call(t,n)})),n=t.map((e=>{let[,{id:t}]=e;return t})),r=t.map((e=>{let[t]=e;return t}));if(this.connection instanceof _2){if(ZH.updateRemoteRTPCapabilities(this.store.sessionId,{trackTypes:JSON.stringify(r),localCodecs:JSON.stringify(this.connection.localCodecs),remoteCodecs:JSON.stringify(e)}),!Fv(e).call(e,this.store.codec)){const t=["vp9","vp8","h264"].find((t=>Fv(e).call(e,t)));t&&(this.store.codec=t,KH.debug("[".concat(this.store.clientId,"] [").concat(this.store.p2pId," updateRemoteRTPCapabilities] default codec is not available, hence the fallback to ").concat(t,".")))}this.connection.updateRemoteRTPCapabilities(n,e)}}async getEstablishParams(){var e;if(this.connection instanceof _2&&"closed"!==this.connection.peerConnectionState&&Fv(e=[FK.New,FK.Connected]).call(e,this.state))return this.connection.establishPromise}async publishDataChannel(e){if(!this.connection||this.state!==FK.Connected){if(this.state===FK.Disconnected)throw new eG(ZB.UNEXPECTED_ERROR,"PeerConnection already disconnected.");return e.forEach((e=>{var t;Fv(t=this.pendingLocalDataChannels).call(t,e)||this.pendingLocalDataChannels.push(e)})),[]}const t=this.filterTobePublishedDataChannels(e);return 0===t.length?[]:(t.forEach((e=>{const t=Date.now();this.store.publish(e.id.toString(),"datachannel",t)})),await this.connection.createDataChannels(this.store.uid,t),t.forEach((e=>{this.localDataChannels.push(e);const t=Date.now();this.store.publish(e.id+"","datachannel",void 0,t)})),e.map((e=>({streamId:e.id,ordered:e.ordered,maxRetransmits:e.maxRetransmits,metadata:e.metadata,channelId:e._originDataChannelId}))))}publish(e,t,n){var r=this;return Cj((function*(){const i=yield wj(r.mutex.lock("From P2PChannel.publish"));try{if(!r.connection||r.state!==FK.Connected){if(r.state===FK.Disconnected)throw new eG(ZB.UNEXPECTED_ERROR,"PeerConnection already disconnected.");r.throwIfTrackTypeNotMatch(e);const t=e.filter((e=>-1===r.pendingLocalTracks.indexOf(e)));return void(r.pendingLocalTracks=r.pendingLocalTracks.concat(t))}r.store.pubId=r.store.pubId+1,E0.markPublishStart(r.store.clientId,r.store.pubId);const i=r.filterTobePublishedTracks(e,t,n);if(0===i.length)return void(yield wj(r.tryToUnmuteAudio(e)));yield*Ij(S2(r.doPublish(r.connection,i)))}finally{i()}}))()}doPublish(e,t){var n=this;return Cj((function*(){t.forEach((e=>{let{track:t,type:r}=e;const i=Date.now();n.store.publish(t.getTrackId(),r===VK.LocalAudioTrack?"audio":"video",i)})),n.bindLocalTrackEvents(t);const r=t.map((e=>{let{track:t}=e;return t})),i=yield wj(e.send(r,n.store.codec,n.store.audioCodec)),o=(yield wj(i.next())).value,s=n.createGatewayPublishMessage(t,o);let a;try{a=yield s}catch(e){throw i.throw(e),(null==e?void 0:e.code)===ZB.WS_ABORT&&t.forEach((e=>{let{track:t}=e;-1===n.pendingLocalTracks.indexOf(t)&&n.pendingLocalTracks.push(t)})),n.unbindLocalTrackEvents(t),e}const c=n.mapPubResToRemoteConfig(s,a,r),d=(yield wj(i.next(c))).value,l=AH("ENABLE_VIDEO_SEI");r.forEach((async e=>{const t=e.getRTCRtpTransceiver();t&&l&&(e.trackMediaType===kK.VIDEO?await async function(e,t){if(!SJ().supportWebRTCEncodedTransform)return void KH.warning("browser not support video encoded transform");if(tZ.has(e))return;if(!e.track)return;const n={track:e.track};if(IB()){if(!e.createEncodedStreams)return void KH.warning("browser not support createEncodedStreams() API");let i=null;try{i=e.createEncodedStreams()}catch(e){return void KH.error("create video-encoded-streams error",e&&e.message)}let o=[];t.on("sei-to-send",(e=>{o.push(e)}));const s=new TransformStream({transform(t,i){n.controller||(n.controller=i),e.track&&e.track.id!==n.track.id&&(KH.debug("video track changed: ".concat(n.track.id," => ").concat(e.track.id)),n.track.removeEventListener("ended",r),n.track=e.track,n.track.addEventListener("ended",r));const s=o.shift();s&&(t.data=function(e,t){const n=function(e){const t=e.length;let n=[],r=0;for(;r<t;)r+2<t&&0===e[r]&&0===e[r+1]&&(0===e[r+2]||1===e[r+2]||2===e[r+2]||3===e[r+2])?(n.push(e[r],e[r+1],3,e[r+2]),r+=3):(n.push(e[r]),r++);return new Uint8Array(n)}(t),r=n.length,i=Math.floor(r/255),o=r%255,s=new Uint8Array(6+i+1+r+e.byteLength);s[0]=0,s[1]=0,s[2]=0,s[3]=1,s[4]=6,s[5]=101;let a=0;for(;a<i;)s[6+a]=255,a++;return s[6+a]=o,a++,s.set(n,6+a),s.set(new Uint8Array(e),6+a+r),s.buffer}(t.data,s)),i.enqueue(t)}});i.readable.pipeThrough(s).pipeTo(i.writable)}else{if(!AB())return;{if("undefined"==typeof RTCRtpScriptTransform)return void KH.warning("browser not support RTCRtpScriptTransform");const i=Q$(),o=new MessageChannel;await new LO((e=>i.onmessage=t=>{"registered"===t.data&&e(void 0)}));const s=new RTCRtpScriptTransform(i,{name:"tx",port:o.port2},[o.port2]);e.transform=s,await new LO((e=>i.onmessage=t=>{"started"===t.data&&e(void 0)})),t.on("sei-to-send",(e=>{o.port1.postMessage({sei:e})})),o.port1.onmessage=t=>{var i;t.data.transformed&&e.track&&(null===(i=e.track)||void 0===i?void 0:i.id)!==n.track.id&&(KH.debug("video track changed: ".concat(n.track.id," => ").concat(e.track.id)),n.track.removeEventListener("ended",r),n.track=e.track,n.track.addEventListener("ended",r))},n.worker=i}}function r(){if(e.track){if(this.id!==e.track.id)return;e.track.removeEventListener("ended",r)}const t=tZ.get(e);if(t){tZ.delete(e);try{var n,i;null===(n=t.controller)||void 0===n||n.terminate(),null===(i=t.worker)||void 0===i||i.terminate()}catch(e){KH.warning(e&&e.message)}}}tZ.set(e,n),e.track.addEventListener("ended",r)}(t.sender,e):e.trackMediaType===kK.AUDIO&&await async function(e){if(!SJ().supportWebRTCEncodedTransform)return void KH.warning("browser not support audio encoded transform");if($$.has(e))return;if(!e.track)return;const t={track:e.track};if(IB()){if(!e.createEncodedStreams)return void KH.warning("browser not support createEncodedStreams() API");let r=null;try{r=e.createEncodedStreams()}catch(e){return void KH.error("create audio-encoded-streams error",e&&e.message)}const i=new TransformStream({transform(r,i){t.controller||(t.controller=i),e.track&&e.track.id!==t.track.id&&(KH.debug("audio track changed: ".concat(t.track.id," => ").concat(e.track.id)),t.track.removeEventListener("ended",n),t.track=e.track,t.track.addEventListener("ended",n)),i.enqueue(r)}});r.readable.pipeThrough(i).pipeTo(r.writable)}else if(AB()){if("undefined"==typeof RTCRtpScriptTransform)return void KH.warning("browser not support RTCRtpScriptTransform");const r=Q$(),i=new MessageChannel;await new LO((e=>r.onmessage=t=>{"registered"===t.data&&e(void 0)}));const o=new RTCRtpScriptTransform(r,{name:"tx",port:i.port2},[i.port2]);e.transform=o,await new LO((e=>r.onmessage=t=>{"started"===t.data&&e(void 0)})),i.port1.onmessage=r=>{var i;r.data.transformed&&e.track&&(null===(i=e.track)||void 0===i?void 0:i.id)!==t.track.id&&(KH.debug("audio track changed: ".concat(t.track.id," => ").concat(e.track.id)),t.track.removeEventListener("ended",n),t.track=e.track,t.track.addEventListener("ended",n))},t.worker=r}function n(){if(e.track){if(this.id!==e.track.id)return;e.track.removeEventListener("ended",n)}const t=$$.get(e);if(t){$$.delete(e);try{var r,i;null===(r=t.controller)||void 0===r||r.terminate(),null===(i=t.worker)||void 0===i||i.terminate()}catch(e){KH.warning(e&&e.message)}}}$$.set(e,t),e.track.addEventListener("ended",n)}(t.sender))})),t.forEach((e=>{let{type:t}=e;n.statsCollector.addLocalStats(t)})),n.assignLocalTracks(t,d),n.statsUploader.startUploadOutboundStats(),t.forEach((e=>{let{track:t,type:r}=e;const i=Date.now();n.store.publish(t.getTrackId(),r===VK.LocalAudioTrack?"audio":"video",void 0,i)}))}))()}async updateVideoStreamParameter(e,t){const n=this.localTrackMap.get(t);if(!n)return;if(!(n.track instanceof O$))return KH.warn("[updateVideoStreamParameter]: track is not an instance of LocalVideoTrack");if(!(this.connection instanceof _2||this.connection instanceof X1))return KH.warn("[updateVideoStreamParameter]: connection is not P2PConnection or P2PConnectionPlanB");const{track:r}=n,i=function(e,t){const n={};return e.height&&e.width&&(n.scaleResolutionDownBy=Az(e,t)),n.maxFramerate=e.framerate?Tz(e.framerate):void 0,n.maxBitrate=e.bitrate?1e3*e.bitrate:void 0,n}(e,r);if(r._encoderConfig||(r._encoderConfig={}),t!==VK.LocalVideoLowTrack||!AH("DISABLE_DUAL_STREAM_USE_ENCODING")&&SJ().supportDualStreamEncoding)null!=i.scaleResolutionDownBy&&(r._encoderConfig.scaleResolutionDownBy=i.scaleResolutionDownBy);else{const t=r._originMediaStreamTrack;if(!t.canvas)return KH.warn("[".concat(r.getTrackId(),"] no canvas on track"));!function(e,t){const n=e.canvas;t.width&&(n.width=Tz(t.width)),t.height&&(n.height=Tz(t.height)),t.framerate&&(n.stopCapture&&n.stopCapture(),n.stopCapture=bX((()=>{!n.startCapture&&n.stopCapture&&n.stopCapture(),n.startCapture&&n.startCapture()}),Tz(t.framerate)))}(t,e)}null!=i.maxBitrate&&(r._encoderConfig.bitrateMax=i.maxBitrate/1e3),null!=i.maxFramerate&&(r._encoderConfig.frameRate&&"object"==typeof r._encoderConfig.frameRate?r._encoderConfig.frameRate.max=i.maxFramerate:r._encoderConfig.frameRate={max:i.maxFramerate}),KH.debug("[".concat(r.getTrackId(),"] LowStreamEncoderConfig: , ").concat(JSON.stringify(r._encoderConfig))),await this.connection.updateRtpSenderEncodings(r)}publishLowStream(e){var t=this;return Cj((function*(){if(!t.connection||t.state!==FK.Connected)return;const n=yield wj(t.mutex.lock("Locking from P2PChannel.publishLowStream"));try{const n=t.localTrackMap.get(VK.LocalVideoTrack);if(!n)throw new eG(ZB.UNEXPECTED_ERROR,"Could not find high stream");if(t.localTrackMap.has(VK.LocalVideoLowTrack))throw new eG(ZB.UNEXPECTED_ERROR,"[".concat(t.store.clientId,"] Can't publish low stream when stream already publish"));const i=[{track:t.getLowVideoTrack(n.track,e),type:VK.LocalVideoLowTrack}];if(yield*Ij(S2(t.doPublish(t.connection,i))),n.track.muted||!n.track.enabled){var r;const e=null===(r=t.localTrackMap.get(VK.LocalVideoLowTrack))||void 0===r?void 0:r.id;void 0!==e&&(yield wj(t.connection.muteLocal([e])))}}finally{n()}}))()}async republish(){this.pendingLocalTracks.length>0&&(KH.debug("[".concat(this.store.clientId,"] Emit P2PChannelEvents.RequestRePublish to republish tracks.")),await xG(this,jK.RequestRePublish,this.pendingLocalTracks),this.emit(jK.MediaReconnectEnd,this.store.uid),this.pendingLocalTracks=[]),this.pendingLocalDataChannels.length>0&&(KH.debug("Emit P2PChannelEvents.RequestRePublishDataChannel to republish datachannels."),await xG(this,jK.RequestRePublishDataChannel,this.pendingLocalDataChannels),this.pendingLocalDataChannels=[])}async reSubscribe(e){for(let e=this.pendingRemoteTracks.length-1;e>=0;e--){const{user:t,kind:n}=this.pendingRemoteTracks[e];(n!==kK.AUDIO||t._audio_added_&&t._audioSSRC)&&(n!==kK.VIDEO||t._video_added_&&t._videoSSRC)||this.pendingRemoteTracks.splice(e,1)}if(e)await xG(this,jK.RequestReSubscribe,this.pendingRemoteTracks);else for(const{user:e,kind:t}of this.pendingRemoteTracks)await this.subscribe(e,t,t===kK.VIDEO?e._videoSSRC:e._audioSSRC);this.pendingRemoteTracks.forEach((e=>{let{user:t}=e;this.emit(jK.MediaReconnectEnd,t.uid)})),this.pendingRemoteTracks=[]}async unpublish(e){if(!this.connection||this.state!==FK.Connected)return void e.forEach((e=>{const t=this.pendingLocalTracks.indexOf(e);-1!==t&&this.pendingLocalTracks.splice(t,1)}));const t=this.filterTobeUnpublishedTracks(e);if(0===t.length)return;const n=t.find((e=>"videoLowTrack"===e[0]));return n&&n[1].track.close(),this.doUnpublish(this.connection,t)}async unpublishDataChannel(e){if(!this.connection||this.state!==FK.Connected)return void e.forEach((e=>{const t=this.pendingLocalDataChannels.indexOf(e);-1!==t&&this.pendingLocalDataChannels.splice(t,1)}));const t=this.filterTobeUnpublishedDataChannels(e);return 0!==t.length?(t.forEach((e=>{const t=this.localDataChannels.indexOf(e);-1!==t&&this.localDataChannels.splice(t,1)})),0===this.localDataChannels.length&&await this.connection.stopDataChannels(this.store.uid),t.map((e=>e.id))):void 0}async unpublishLowStream(){if(!this.connection||this.state!==FK.Connected)return;const e=this.localTrackMap.get(VK.LocalVideoLowTrack);if(!e)return;e.track.close();const t=[[VK.LocalVideoLowTrack,e]];return this.doUnpublish(this.connection,t)}async doUnpublish(e,t){const n=this.createGatewayUnpublishMessage(t);return await e.stopSending(t.map((e=>{let[,{id:t}]=e;return t}))),this.withdrawLocalTracks(t),this.unbindLocalTrackEvents(t.map((e=>{let[t,{track:n}]=e;return{type:t,track:n}}))),t.forEach((e=>{let[t]=e;this.statsCollector.removeLocalStats(t)})),0===this.localTrackMap.size&&this.statsUploader.stopUploadOutboundStats(),n}async subscribeDataChannel(e,t){if(!this.connection||this.state!==FK.Connected)throw new eG(ZB.INVALID_OPERATION,"Cannot subscribe remote user when peerConnection disconnected.");const n=t.filter((t=>{var n;return!(null!==(n=this.remoteDataChannelMap.get(e))&&void 0!==n&&n.get(t.id))}));if(0!==n.length)return await this.connection.createDataChannels(e.uid,n),n.forEach((t=>{var n;this.remoteDataChannelMap.has(e)?null===(n=this.remoteDataChannelMap.get(e))||void 0===n||n.set(t.id,t):this.remoteDataChannelMap.set(e,new Map([[t.id,t]]));const r=this.pendingRemoteDataChannels.findIndex((n=>{let{user:r,id:i}=n;return r.uid===e.uid&&i===t.id}));-1!==r&&this.pendingRemoteDataChannels.splice(r,1)})),n.map((e=>e.id))}async subscribe(e,t,n,r,i){var o;if(!this.connection||this.state!==FK.Connected)throw new eG(ZB.INVALID_OPERATION,"Cannot subscribe remote user when peerConnection disconnected.");if(null!==(o=this.remoteUserMap.get(e))&&void 0!==o&&o.has(t))return;let s,a,c;const d=this.connection.getPreMedia(n);if(d)KH.debug("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] preSSRCMap has ssrcId: ").concat(n,", no need to send sub to gateway.")),c=d.transceiver,s=d.track,a=d.id;else if(i){const n=i.find((e=>{let{stream_type:n}=e;return n===t}));if(!n)throw new eG(ZB.UNEXPECTED_ERROR,"Cannot subscribe to remote ".concat(t," for user: ").concat(e.uid," because subscribe answer from gateway does not contain stream_type: ").concat(t,"."));const r=await this.connection.receive(t,n.ssrcs,String(e._uintid),n.attributes);this.connection instanceof _2&&(c=r.transceiver),s=r.track,a=r.id}else{const i=await this.connection.receive(t,[{ssrcId:n,rtx:r}],String(e._uintid),void 0);this.connection instanceof _2&&(c=i.transceiver),s=i.track,a=i.id}t===kK.AUDIO?(e._audioTrack?e._audioTrack._updateOriginMediaStreamTrack(s):(e._audioTrack=new z$(s,e.uid,e._uintid,this.store),KH.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote audio track: ").concat(e._audioTrack.getTrackId()))),c&&e._audioTrack._updateRtpTransceiver(c),this.bindRemoteTrackEvents(e,e._audioTrack)):(e._videoTrack?e._videoTrack._updateOriginMediaStreamTrack(s):(e._videoTrack=new K$(s,e.uid,e._uintid,this.store),KH.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote video track: ").concat(e._videoTrack.getTrackId()))),c&&e._videoTrack._updateRtpTransceiver(c),this.bindRemoteTrackEvents(e,e._videoTrack)),AH("ENABLE_VIDEO_SEI")&&c&&(t==kK.VIDEO?await async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!SJ().supportWebRTCEncodedTransform)return void KH.warning("browser not support video encoded transform");if(!e.track)return;if(nZ.has(e)){const n=nZ.get(e);return void(n&&(n.onSei=t.onSei))}const n={track:e.track,onSei:t.onSei};if(IB()){if(!e.createEncodedStreams)return void KH.warning("browser not support createEncodedStreams() API");let t=null;try{t=e.createEncodedStreams()}catch(e){return void KH.error("create video-encoded-streams error",e&&e.message)}const i=new TransformStream({transform(t,i){n.controller||(n.controller=i),e.track&&e.track.id!==n.track.id&&(KH.debug("video track changed: ".concat(n.track.id," => ").concat(e.track.id)),n.track.removeEventListener("ended",r),n.track=e.track,n.track.addEventListener("ended",r));const o=function(e){const t=new DataView(e.data);let n=0;for(;n+4<e.data.byteLength;){if(0===t.getUint8(n+0)&&0===t.getUint8(n+1)&&0===t.getUint8(n+2)&&1===t.getUint8(n+3)&&6===t.getUint8(n+4)){let r=n+6,i=0,o=0;for(;255===(o=t.getUint8(r++));)i+=255;i+=o;const s=eZ(e.data,r,i);return new Uint8Array(s)}n++}return null}(t);o&&n.onSei&&n.onSei(o),i.enqueue(t)}});t.readable.pipeThrough(i).pipeTo(t.writable)}else if(AB()){if("undefined"==typeof RTCRtpScriptTransform)return void KH.warning("browser not support RTCRtpScriptTransform");const t=Q$(),i=new MessageChannel;await new LO((e=>t.onmessage=t=>{"registered"===t.data&&e(void 0)}));const o=new RTCRtpScriptTransform(t,{name:"rx",port:i.port2},[i.port2]);e.transform=o,await new LO((e=>t.onmessage=t=>{"started"===t.data&&e(void 0)})),i.port1.onmessage=t=>{var i;t.data.transformed&&e.track&&(null===(i=e.track)||void 0===i?void 0:i.id)!==n.track.id?(KH.debug("video track changed: ".concat(n.track.id," => ").concat(e.track.id)),n.track.removeEventListener("ended",r),n.track=e.track,n.track.addEventListener("ended",r)):t.data.sei&&n.onSei&&n.onSei(t.data.sei)},n.worker=t}function r(){if(e.track){if(this.id!==e.track.id)return;e.track.removeEventListener("ended",r)}!function(e){const t=nZ.get(e);if(t){nZ.delete(e);try{var n,r;null===(n=t.controller)||void 0===n||n.terminate(),null===(r=t.worker)||void 0===r||r.terminate()}catch(e){KH.warning(e&&e.message)}}}(e)}nZ.set(e,n),e.track.addEventListener("ended",r)}(c.receiver,{onSei:t=>{var n;null===(n=e._videoTrack)||void 0===n||n._onSei(t)}}):t==kK.AUDIO&&await async function(e){if(!SJ().supportWebRTCEncodedTransform)return void KH.warning("browser not support audio encoded transform");if(Z$.has(e))return;const t={track:e.track};if(IB()){if(!e.createEncodedStreams)return void KH.warning("browser not support createEncodedStreams() API");let r=null;try{r=e.createEncodedStreams()}catch(e){return void KH.error("create audio-encoded-streams error",e&&e.message)}const i=new TransformStream({transform(r,i){t.controller||(t.controller=i),e.track&&e.track.id!==t.track.id&&(KH.debug("audio track changed: ".concat(t.track.id," => ").concat(e.track.id)),t.track.removeEventListener("ended",n),t.track=e.track,t.track.addEventListener("ended",n)),i.enqueue(r)}});r.readable.pipeThrough(i).pipeTo(r.writable)}else if(AB()){if("undefined"==typeof RTCRtpScriptTransform)return void KH.warning("browser not support RTCRtpScriptTransform");const r=Q$(),i=new MessageChannel;await new LO((e=>r.onmessage=t=>{"registered"===t.data&&e(void 0)}));const o=new RTCRtpScriptTransform(r,{name:"rx",port:i.port2},[i.port2]);e.transform=o,await new LO((e=>r.onmessage=t=>{"started"===t.data&&e(void 0)})),i.port1.onmessage=r=>{var i;r.data.transformed&&e.track&&(null===(i=e.track)||void 0===i?void 0:i.id)!==t.track.id&&(KH.debug("audio track changed: ".concat(t.track.id," => ").concat(e.track.id)),t.track.removeEventListener("ended",n),t.track=e.track,t.track.addEventListener("ended",n))},t.worker=r}function n(){e.track.removeEventListener("ended",n),function(e){const t=Z$.get(e);if(t){Z$.delete(e);try{var n,r;null===(n=t.controller)||void 0===n||n.terminate(),null===(r=t.worker)||void 0===r||r.terminate()}catch(e){KH.warning(e&&e.message)}}}(e)}Z$.set(e,t),e.track.addEventListener("ended",n)}(c.receiver));const l=this.remoteUserMap.get(e);l?l.set(t,a):this.remoteUserMap.set(e,new Map([[t,a]])),this.statsCollector.addRemoteStats(e.uid),this.statsUploader.startUploadInboundStats();const h=this.pendingRemoteTracks.findIndex((n=>{let{user:r,kind:i}=n;return r.uid===e.uid&&t===i}));-1!==h&&(this.pendingRemoteTracks.splice(h,1),this.emit(jK.MediaReconnectEnd,e.uid))}async massSubscribe(e){return this.massSubscribeNoLock(e)}async massSubscribeNoLock(e){if(!this.connection||this.state!==FK.Connected)throw new eG(ZB.INVALID_OPERATION,"Cannot subscribeAll remote users when peerConnection disconnected.");e=e.filter((e=>{var t;let{user:n,mediaType:r}=e;return!(null!==(t=this.remoteUserMap.get(n))&&void 0!==t&&t.has(r))}));const t=[],n=new Map;e.forEach((e=>{if(!this.connection)return;const r=this.connection.getPreMedia(e.ssrcId);r?n.set(e.ssrcId,r):t.push(e)}));const r=await this.connection.batchReceive(t.map((e=>{let{user:t,mediaType:n,ssrcId:r,rtxSsrcId:i}=e;return{kind:n,ssrcMsg:[{ssrcId:r,rtx:i}],mslabel:String(t._uintid)}})));t.forEach(((e,t)=>{n.set(e.ssrcId,r[t])})),e.forEach((e=>{let{user:t,mediaType:r,ssrcId:i}=e;const o=n.get(i);if(!o)return void KH.debug("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] cannot find ").concat(t.uid," subscribe data,").concat(r,", ").concat(i));const{track:s,id:a,transceiver:c}=o;r===kK.AUDIO?(t._audioTrack?t._audioTrack._updateOriginMediaStreamTrack(s):(t._audioTrack=new z$(s,t.uid,t._uintid,this.store),KH.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote audio track: ").concat(t._audioTrack.getTrackId()))),c&&t._audioTrack._updateRtpTransceiver(c),this.bindRemoteTrackEvents(t,t._audioTrack)):(t._videoTrack?t._videoTrack._updateOriginMediaStreamTrack(s):(t._videoTrack=new K$(s,t.uid,t._uintid,this.store),KH.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote video track: ").concat(t._videoTrack.getTrackId()))),c&&t._videoTrack._updateRtpTransceiver(c),this.bindRemoteTrackEvents(t,t._videoTrack));const d=this.remoteUserMap.get(t);d?d.set(r,a):this.remoteUserMap.set(t,new Map([[r,a]])),this.statsCollector.addRemoteStats(t.uid),this.statsUploader.startUploadInboundStats();const l=this.pendingRemoteTracks.findIndex((e=>{let{user:n,kind:i}=e;return n.uid===t.uid&&r===i}));-1!==l&&(this.pendingRemoteTracks.splice(l,1),this.emit(jK.MediaReconnectEnd,t.uid))}))}async unsubscribe(e,t,n){const r=this.pendingRemoteTracks.filter((n=>{let{user:r,kind:i}=n;return void 0!==t?r.uid===e.uid&&t===i:r.uid===e.uid}));if(r.forEach((e=>{const t=this.pendingRemoteTracks.indexOf(e);this.pendingRemoteTracks.splice(t,1)})),this.connection&&this.state===FK.Connected||n||r.forEach((t=>{let{kind:n}=t;var r;if(n===kK.AUDIO)null===(r=e._audioTrack)||void 0===r||r._destroy(),e._audioTrack=void 0;else if(n===kK.VIDEO){var i;null===(i=e._videoTrack)||void 0===i||i._destroy(),e._videoTrack=void 0}})),!this.connection||this.state!==FK.Connected)return;const i=this.filterTobeUnSubscribedTracks(e,t);if(0===i.length)return;await this.connection.stopReceiving(i.map((e=>{let[,{id:t}]=e;return t})));const o=this.createUnsubscribeMessage(i);return this.withdrawRemoteTracks(i),0===this.remoteUserMap.size&&this.statsUploader.stopUploadInboundStats(),i.forEach((e=>{let[t,{kind:r}]=e;var i,o;if(r===kK.VIDEO&&t._videoSSRC&&(null===(i=this.connection)||void 0===i||i.setStatsRemoteVideoIsReady(t._videoSSRC,!1)),r===kK.VIDEO)this.unbindRemoteTrackEvents(t._videoTrack),n||(null===(o=t._videoTrack)||void 0===o||o._destroy(),t._videoTrack=void 0);else if(r===kK.AUDIO){var s;this.unbindRemoteTrackEvents(t._audioTrack),n||(null===(s=t._audioTrack)||void 0===s||s._destroy(),t._audioTrack=void 0)}})),o}async unsubscribeDataChannel(e,t){if(t.forEach((e=>{const t=this.pendingRemoteDataChannels.findIndex((t=>t.id===e.id));-1!==t&&this.pendingRemoteDataChannels.splice(t,1)})),!this.connection)return;const n=this.filterTobeUnSubscribedDataChannels(e,t);if(0===n.length)return;t.forEach((e=>{e._close()}));const r=this.remoteDataChannelMap.get(e);return n.forEach((e=>{r&&r.delete(e.id)})),r&&0===r.size&&(this.remoteDataChannelMap.delete(e),await this.connection.stopDataChannels(e.uid)),n.map((e=>e.id))}async massUnsubscribe(e){return this.massUnsubscribeNoLock(e)}async massUnsubscribeNoLock(e){let t=[];for(const{user:n,mediaType:r}of e){const e=this.pendingRemoteTracks.filter((e=>{let{user:t,kind:i}=e;return void 0!==r?t.uid===n.uid&&r===i:t.uid===n.uid}));e.forEach((e=>{const t=this.pendingRemoteTracks.indexOf(e);this.pendingRemoteTracks.splice(t,1)})),t=t.concat(e)}if(!this.connection||this.state!==FK.Connected)return void t.forEach((e=>{let{user:t,kind:n}=e;var r;if(n===kK.AUDIO)null===(r=t._audioTrack)||void 0===r||r._destroy(),t._audioTrack=void 0;else if(n===kK.VIDEO){var i;null===(i=t._videoTrack)||void 0===i||i._destroy(),t._videoTrack=void 0}}));const n=nb(e).call(e,((e,t)=>{let{user:n,mediaType:r}=t;const i=this.filterTobeUnSubscribedTracks(n,r);return e.concat(i)}),[]);if(0===n.length)return;await this.connection.stopReceiving(n.map((e=>{let[,{id:t}]=e;return t})));const r=this.createUnsubscribeAllMessage(n);return this.withdrawRemoteTracks(n),0===this.remoteUserMap.size&&this.statsUploader.stopUploadInboundStats(),n.forEach((e=>{let[t,{kind:n}]=e;var r,i;if(n===kK.VIDEO&&t._videoSSRC&&(null===(r=this.connection)||void 0===r||r.setStatsRemoteVideoIsReady(t._videoSSRC,!1)),n===kK.VIDEO)this.unbindRemoteTrackEvents(t._videoTrack),null===(i=t._videoTrack)||void 0===i||i._destroy(),t._videoTrack=void 0;else if(n===kK.AUDIO){var o;this.unbindRemoteTrackEvents(t._audioTrack),null===(o=t._audioTrack)||void 0===o||o._destroy(),t._audioTrack=void 0}})),r}isPreSubScribe(e){return!(!this.connection||this.state!==FK.Connected)&&!!this.connection.getPreMedia(e)}async muteRemote(e,t){if(!this.connection)return;const n=this.remoteUserMap.get(e);if(!n)return void KH.warning("[".concat(this.store.clientId,"] P2PChannel.muteRemote has no remote user ").concat(e.uid,"."));if(!n.get(t))return void KH.warning("[".concat(this.store.clientId,"] P2PChannel.muteRemote has no remote user ").concat(e.uid," media type ").concat(t,"."));const r=t===kK.VIDEO?e._videoSSRC:e._audioSSRC;void 0!==r&&this.connection.setStatsRemoteVideoIsReady(r,!1)}async unmuteRemote(e,t){return this.unmuteRemoteNoLock(e,t)}async unmuteRemoteNoLock(e,t){if(!this.connection)return;const n=this.remoteUserMap.get(e);n?n.get(t)||KH.warning("[".concat(this.store.clientId,"] P2PChannel.unmuteRemote has no remote user ").concat(e.uid," media type ").concat(t,".")):KH.warning("[".concat(this.store.clientId,"] P2PChannel.unmuteRemote has no remote user ").concat(e.uid,"."))}getAllTracks(e){const t=this.localTrackMap.get(VK.LocalAudioTrack);if((null==t?void 0:t.track)instanceof HQ){const n=t.track;return Array.from(this.localTrackMap.entries()).filter((e=>{let[t]=e;return t!==VK.LocalAudioTrack})).filter((t=>{let[n]=t;return!(e&&n===VK.LocalVideoLowTrack)})).map((e=>{let[,{track:t}]=e;return t})).concat(n.trackList)}return Array.from(this.localTrackMap.entries()).filter((t=>{let[n]=t;return!(e&&n===VK.LocalVideoLowTrack)})).map((e=>{let[,{track:t}]=e;return t}))}getAllDataChannels(){return this.localDataChannels}reportPublishEvent(e,t,n,r,i){if(e){const n=this.localTrackMap.get(VK.LocalAudioTrack),o=r?this.localTrackMap.get(VK.LocalVideoLowTrack):this.localTrackMap.get(VK.LocalVideoTrack);ZH.publish(this.store.sessionId,{eventElapse:E0.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:e,ec:t,audioName:null==n?void 0:n.track.getTrackLabel(),videoName:null==o?void 0:o.track.getTrackLabel(),screenshare:-1!==(null==o?void 0:o.track._hints.indexOf(BJ.SCREEN_TRACK)),audio:!!n,video:!!o,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:i})}else{var o;n||(n=[]);const s=n.find((e=>e instanceof jQ)),a=r?null===(o=this.localTrackMap.get(VK.LocalVideoTrack))||void 0===o?void 0:o.track:n.find((e=>e instanceof O$));ZH.publish(this.store.sessionId,{eventElapse:E0.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:e,ec:t,audioName:null==s?void 0:s.getTrackLabel(),videoName:null==a?void 0:a.getTrackLabel(),screenshare:-1!==(null==a?void 0:a._hints.indexOf(BJ.SCREEN_TRACK)),audio:!!s,video:!!a,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:i})}}reportSubscribeEvent(e,t,n,r){const i=r===kK.VIDEO?n._videoSSRC:n._audioSSRC;i&&ZH.subscribe(this.store.sessionId,{succ:e,ec:t,video:r===kK.VIDEO,audio:r===kK.AUDIO,peerid:n.uid,subscribeRequestid:i,p2pid:this.store.p2pId,eventElapse:E0.measureFromSubscribeStart(this.store.clientId,i),preSsrc:this.isPreSubScribe(i)})}reset(){KH.debug("[".concat(this.store.clientId,"] P2PChannel.reset")),this.mutex=new cH("P2PChannel-mutex"),this.connection&&(this.connection.close(),this.unbindConnectionEvents(this.connection),this.connection=void 0),this.shouldForwardP2PCreation&&(this.connection=this.isPlanB?new X1({},this.store):new _2({},this.store),this.bindConnectionEvents(this.connection)),this.statsUploader.stopUploadOutboundStats(),this.statsUploader.stopUploadInboundStats(),this.statsUploader.stopUploadTransportStats(),this.statsUploader.stopUploadExtensionUsageStats(),this.unbindLocalTrackEvents(),this.unbindAllRemoteTrackEvents(),this.unbindRtpTransceiver();const e=this.localTrackMap.get(VK.LocalAudioTrack);if((null==e?void 0:e.track)instanceof HQ){if(e.track.trackList.length>0){const t=e.track;e.track.trackList.forEach((e=>{t.removeAudioTrack(e)}))}e.track.close()}this.localTrackMap.clear(),this.remoteUserMap.clear(),this.statsCollector.removeRemoteStats(),this.statsCollector.removeLocalStats(),this.iceFailedCount=0,this.dtlsFailedCount=0,this.pendingLocalTracks=[],this.pendingRemoteTracks=[],this.localDataChannels=[],this.remoteDataChannelMap.clear(),this.pendingLocalDataChannels=[],this.pendingRemoteDataChannels=[],this.state=FK.Disconnected}getStats(){var e;return null===(e=this.connection)||void 0===e?void 0:e.getStats()}getRemoteVideoIsReady(e){var t;return(null===(t=this.connection)||void 0===t?void 0:t.getRemoteVideoIsReady(e))||!1}getLocalAudioVolume(){const e=this.localTrackMap.get(VK.LocalAudioTrack);if(e)return e.track.getVolumeLevel()}getLocalVideoSize(){const e=this.localTrackMap.get(VK.LocalVideoTrack);if(e)return{width:e.track.videoWidth||0,height:e.track.videoHeight||0}}getEncoderConfig(e){const t=this.localTrackMap.get(e);return t&&t.track instanceof O$||t&&t.track instanceof jQ?t.track._encoderConfig:void 0}getLocalMedia(e){return this.localTrackMap.get(e)}hasLocalMedia(){return this.localTrackMap.size>0}hasRemoteMedia(e,t){if(!e)return this.remoteUserMap.size>0;const n=this.remoteUserMap.get(e);return!!n&&(!t||n.has(t))}async hasRemoteMediaWithLock(e,t){if(!e)return this.remoteUserMap.size>0;const n=this.remoteUserMap.get(e);return!!n&&(!t||n.has(t))}getRemoteMedia(e){var t;const n=Array.from(Zx(t=this.remoteUserMap).call(t)).find((t=>t.uid===e));return n?{audioTrack:n.audioTrack,audioSSRC:n._audioSSRC,videoTrack:n.videoTrack,videoSSRC:n._videoSSRC}:{}}getAudioLevels(){let e=Array.from(this.remoteUserMap.entries()).map((e=>{let[t]=e;return{uid:t.uid,level:t.audioTrack?100*t.audioTrack._source.getAccurateVolumeLevel():0}}));const t=this.localTrackMap.get(VK.LocalAudioTrack);return t&&e.push({level:100*t.track._source.getAccurateVolumeLevel(),uid:this.store.uid}),e=XN(e).call(e,((e,t)=>e.level-t.level)),e}async disconnectForReconnect(){this.connection&&(KH.debug("[".concat(this.store.clientId,"] P2PChannel.disconnectForReconnect closing P2PConnection")),this.state=FK.Reconnecting,AH("KEEP_LAST_FRAME")&&0!==this.remoteUserMap.size&&Array.from(this.remoteUserMap.entries()).forEach((e=>{let[t]=e;var n;t._videoTrack&&t._videoTrack._player&&(null===(n=t._videoTrack._player.getVideoElement())||void 0===n||n.pause(),t._videoTrack._player.isKeepLastFrame=!0,t._videoTrack._originMediaStreamTrack.stop())})),this.connection.close(),this.unbindConnectionEvents(this.connection),this.connection=void 0,this.shouldForwardP2PCreation&&(this.connection=this.isPlanB?new X1({},this.store):new _2({},this.store),this.bindConnectionEvents(this.connection)),0!==this.localTrackMap.size&&(Array.from(this.localTrackMap.entries()).forEach((e=>{var t;let[n,{track:r}]=e;switch(n){case VK.LocalVideoTrack:Fv(t=r._hints).call(t,BJ.LOW_STREAM)?r.close():this.pendingLocalTracks.push(r);break;case VK.LocalAudioTrack:r instanceof HQ?this.pendingLocalTracks=this.pendingLocalTracks.concat(r.trackList):this.pendingLocalTracks.push(r);case VK.LocalVideoLowTrack:}})),this.emit(jK.MediaReconnectStart,this.store.uid)),this.unbindLocalTrackEvents(),this.localTrackMap.clear(),0!==this.remoteUserMap.size&&Array.from(this.remoteUserMap.entries()).forEach((e=>{let[t,n]=e;Array.from(Zx(n).call(n)).forEach((e=>{this.setPendingRemoteMedia(t,e)})),this.emit(jK.MediaReconnectStart,t.uid)})),this.unbindAllRemoteTrackEvents(),this.remoteUserMap.clear(),0!==this.localDataChannels.length&&(this.localDataChannels.forEach((e=>{this.pendingLocalDataChannels.push(e)})),this.localDataChannels.length=0),0!==this.remoteDataChannelMap.size&&(Array.from(this.remoteDataChannelMap.entries()).forEach((e=>{let[t,n]=e;Array.from(Zx(n).call(n)).forEach((e=>{this.setPendingRemoteDataChannel(t,e)}))})),this.remoteDataChannelMap.clear()),this.statsUploader.stopUploadOutboundStats(),this.statsUploader.stopUploadInboundStats(),this.statsUploader.stopUploadTransportStats(),KH.debug("[".concat(this.store.clientId,"] P2PChannel disconnected, waiting to reconnect.")))}hasPendingRemoteDataChannel(e,t){for(const n of this.pendingRemoteDataChannels){const{user:r,id:i}=n;if((e instanceof y1?e.uid:e)===r.uid&&i===t)return!0}return!1}setPendingRemoteDataChannel(e,t){this.hasPendingRemoteDataChannel(e,t)||this.pendingRemoteDataChannels.push({user:e,id:t})}hasPendingRemoteMedia(e,t){for(const n of this.pendingRemoteTracks){const{user:r,kind:i}=n;if((e instanceof y1?e.uid:e)===r.uid&&t===i)return!0}return!1}setPendingRemoteMedia(e,t){this.hasPendingRemoteMedia(e,t)||this.pendingRemoteTracks.push({user:e,kind:t})}restartICE(e){var t=this;return Cj((function*(){if(!t.connection||t.state!==FK.Connected)return;const n=yield wj(t.mutex.lock("From P2PChannel.restartICE"));let r;try{r=yield wj(t.connection.restartICE(e));const n=yield wj(r.next());if(n.done)return;const i=n.value,o=yield i;switch(t.reportPCDisconnectedOrFailed(e),e){case MK.TCP:t._pcStatsUploadType=UK.TCP_RESTART;break;case MK.RELAY:t._pcStatsUploadType=UK.RELAY_RESTART;break;default:t._pcStatsUploadType=UK.OLD_RESTART}t._isInRestartIce=!0,r.next(o)}catch(e){var i;null===(i=r)||void 0===i||i.throw(e)}finally{n()}}))()}getUplinkNetworkQuality(){if(!this.connection)return 0;const e=this.connection.getStats(),t=this.localTrackMap.get(VK.LocalVideoTrack),n=this.localTrackMap.get(VK.LocalAudioTrack),r=e.videoSend.find((e=>e.ssrc===(null==t?void 0:t.ssrcs[0].ssrcId))),i=e.audioSend.find((e=>e.ssrc===(null==n?void 0:n.ssrcs[0].ssrcId)));if(!r||!i)return 1;const o=PG(this,jK.NeedSignalRTT),s=r?r.rttMs:void 0,a=i?i.rttMs:void 0,c=s&&a?(s+a)/2:s||a,d=(c&&o?(c+o)/2:c||o)||0,l=100*e.sendPacketLossRate*.7/50+.3*d/1500,h=l<.17?1:l<.36?2:l<.59?3:l<.1?4:5,u=null==t?void 0:t.track;if(u&&u._encoderConfig&&-1===u._hints.indexOf(BJ.SCREEN_TRACK)){const t=u._encoderConfig.bitrateMax,n=e.bitrate.actualEncoded;if(t&&n){const e=(1e3*t-n)/(1e3*t);return nW[e<.15?0:e<.3?1:e<.45?2:e<.6?3:4][h]}}return h}getDownlinkNetworkQuality(){if(!this.connection)return 0;const e=this.connection.getStats();let t=0;return Array.from(this.remoteUserMap.entries()).forEach((n=>{let[r]=n;const i=r._audioSSRC,o=r._videoSSRC,s=e.audioRecv.find((e=>e.ssrc===i)),a=e.videoRecv.find((e=>e.ssrc===o));if(!s&&!a)return void(t+=1);const c=PG(this,jK.NeedSignalRTT),d=e.rtt,l=(d&&c?(d+c)/2:d||c)||0,h=s?s.jitterMs:void 0,u=e.recvPacketLossRate;let p=.7*u*100/50+.3*l/1500;h&&(p=.6*u*100/50+.2*l/1500+.2*h/400),t+=p<.1?1:p<.17?2:p<.36?3:p<.59?4:5})),this.remoteUserMap.size>0?Math.round(t/this.remoteUserMap.size):t}async muteLocalTrack(e){return new LO(((t,n)=>{this.handleMuteLocalTrack(e,t,n)}))}async replaceTrack(e,t){var n;if(KH.debug("[".concat(this.store.clientId,"] P2PChannel replaceTrack from [").concat(e.getTrackId(),"] to [").concat(t.getTrackId(),"]")),!this.connection||this.state!==FK.Connected)return;const r=Array.from(this.localTrackMap.entries()).find((t=>{let[,{track:n}]=t;return e===n}));if(!r)return;const i=r[0];if(e!==t&&(this.unbindLocalTrackEvents([{track:e,type:i}]),this.bindLocalTrackEvents([{track:t,type:i}]),r[1].track=t),await(null===(n=this.connection)||void 0===n?void 0:n.replaceTrack(t,r[1].id)),this.isPlanB){const e=r[1];e.id=t._mediaStreamTrack.id,this.localTrackMap.set(i,e)}if(i===VK.LocalVideoTrack&&!AH("DISABLE_DUAL_STREAM_USE_ENCODING")&&SJ().supportDualStreamEncoding){const t=this.localTrackMap.get(VK.LocalVideoLowTrack);if(t){const n=e._mediaStreamTrack.clone();t.track._originMediaStreamTrack.stop(),t.track._mediaStreamTrack=n,t.track._originMediaStreamTrack=n,await new LO(((e,n)=>{this.handleReplaceTrack(t.track,e,n,!0)}))}}}filterTobePublishedTracks(e,t,n){const r=[],i=this.getAllTracks();e=MG(e=e.filter((e=>-1===i.indexOf(e))));let o,s=!1;const a=this.localTrackMap.get(VK.LocalAudioTrack);for(const i of e){if(i instanceof O$&&(this.localTrackMap.has(VK.LocalVideoTrack)||s?new eG(ZB.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS).throw():(r.push({track:i,type:VK.LocalVideoTrack}),s=!0),t)){const e=this.getLowVideoTrack(i,n);r.push({track:e,type:VK.LocalVideoLowTrack})}if(i instanceof jQ)if(a){const e=a.track;if(e instanceof HQ)S1([i]),e.addAudioTrack(i),this.bindLocalAudioTrackEvents(i,!0);else{const t=T1([e,i]);KH.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection will replace audioTrack [").concat(t.getTrackId(),"]")),this.replaceTrack(e,t)}}else o instanceof HQ?(S1([i]),o.addAudioTrack(i)):o=o||!i._useAudioElement&&SJ().webAudioMediaStreamDest&&!i._bypassWebAudio?T1(o?[i,o]:[i]):i}return o&&(KH.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection will send audioTrack [").concat(o.getTrackId(),"]")),r.push({track:o,type:VK.LocalAudioTrack})),r}filterTobeUnpublishedTracks(e){const t=[],n=this.getAllTracks();e=MG(e=e.filter((e=>-1!==n.indexOf(e))));for(const n of e){if(n instanceof jQ){const e=this.localTrackMap.get(VK.LocalAudioTrack);if(!e)continue;e.track instanceof HQ?(e.track.removeAudioTrack(n),this.unbindLocalAudioTrackEvents(n),0===e.track.trackList.length&&(t.push([VK.LocalAudioTrack,e]),e.track.close())):t.push([VK.LocalAudioTrack,e])}if(n instanceof O$){const e=this.localTrackMap.get(VK.LocalVideoTrack);if(!e)continue;t.push([VK.LocalVideoTrack,e]);const n=this.localTrackMap.get(VK.LocalVideoLowTrack);n&&t.push([VK.LocalVideoLowTrack,n])}}return t}filterTobePublishedDataChannels(e){return(e=MG(e)).filter((e=>-1===this.localDataChannels.findIndex((t=>t.id===e.id))))}filterTobeUnpublishedDataChannels(e){return(e=(e=MG(e)).filter((e=>-1!==this.localDataChannels.indexOf(e)))).filter((e=>e._originDataChannel))}bindLocalTrackEvents(e){e.forEach((e=>{let{track:t,type:n}=e;switch(n){case VK.LocalVideoTrack:t.addListener(jJ.GET_STATS,this.handleGetLocalVideoStats),t.addListener(jJ.GET_RTC_STATS,this.handleGetRTCStats),t.addListener(jJ.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),t.addListener(jJ.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),t.addListener(jJ.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),t.addListener(jJ.NEED_UPDATE_VIDEO_SEND_PARAMETERS,this.handleUpdateVideoSendParameters),t.addListener(jJ.NEED_REPLACE_TRACK,this.handleReplaceTrack),t.addListener(jJ.NEED_MUTE_TRACK,this.handleMuteLocalTrack),t.addListener(jJ.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case VK.LocalAudioTrack:this.bindLocalAudioTrackEvents(t);case VK.LocalVideoLowTrack:}}))}bindLocalAudioTrackEvents(e,t){e instanceof HQ?e.trackList.forEach((e=>{e.addListener(jJ.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.addListener(jJ.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.addListener(jJ.GET_STATS,this.handleGetLocalAudioStats),e.addListener(jJ.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.addListener(jJ.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)})):(e.addListener(jJ.GET_STATS,this.handleGetLocalAudioStats),e.addListener(jJ.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.addListener(jJ.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.addListener(jJ.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.addListener(jJ.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack),t||(e.addListener(jJ.NEED_REPLACE_TRACK,this.handleReplaceTrack),e.addListener(jJ.NEED_REPLACE_MIXING_TRACK,this.handleReplaceMixingTrack)))}unbindLocalTrackEvents(e){e||(e=Array.from(this.localTrackMap.entries()).map((e=>{let[t,{track:n}]=e;return{track:n,type:t}}))),e.forEach((e=>{let{track:t,type:n}=e;switch(n){case VK.LocalVideoTrack:t.off(jJ.GET_STATS,this.handleGetLocalVideoStats),t.off(jJ.GET_RTC_STATS,this.handleGetRTCStats),t.off(jJ.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),t.off(jJ.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),t.off(jJ.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),t.off(jJ.NEED_UPDATE_VIDEO_SEND_PARAMETERS,this.handleUpdateVideoSendParameters),t.off(jJ.NEED_REPLACE_TRACK,this.handleReplaceTrack),t.off(jJ.NEED_MUTE_TRACK,this.handleMuteLocalTrack),t.off(jJ.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case VK.LocalAudioTrack:this.unbindLocalAudioTrackEvents(t);case VK.LocalVideoLowTrack:}}))}unbindLocalAudioTrackEvents(e){e instanceof HQ?e.trackList.forEach((e=>{e.off(jJ.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.off(jJ.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.off(jJ.GET_STATS,this.handleGetLocalAudioStats),e.off(jJ.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.off(jJ.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)})):(e.off(jJ.GET_STATS,this.handleGetLocalAudioStats),e.off(jJ.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.off(jJ.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.off(jJ.NEED_REPLACE_TRACK,this.handleReplaceTrack),e.off(jJ.NEED_REPLACE_MIXING_TRACK,this.handleReplaceMixingTrack),e.off(jJ.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.off(jJ.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack))}bindRemoteTrackEvents(e,t){t instanceof K$&&t.addListener(jJ.GET_STATS,(t=>{t(this.handleGetRemoteVideoStats(e))})),t instanceof z$&&t.addListener(jJ.GET_STATS,(t=>{t(this.handleGetRemoteAudioStats(e))}))}unbindRemoteTrackEvents(e){e&&e.removeAllListeners(jJ.GET_STATS)}unbindAllRemoteTrackEvents(){Array.from(this.remoteUserMap.entries()).forEach((e=>{let[t,n]=e;n.has(kK.AUDIO)&&this.unbindRemoteTrackEvents(t._audioTrack),n.has(kK.VIDEO)&&this.unbindRemoteTrackEvents(t._videoTrack)}))}createGatewayPublishMessage(e,t){return e.map(((e,n)=>{var r;let i,o,{track:s,type:a}=e;switch(a){case VK.LocalAudioTrack:i=RK.Audio,o={dtx:s instanceof BQ&&s._config.DTX,hq:!1,lq:!1,stereo:!1,speech:!1};break;case VK.LocalVideoTrack:i=Fv(r=s._hints).call(r,BJ.SCREEN_TRACK)?RK.Screen:RK.High,o=b2(b2({},Rz(s)),{},{codec:this.store.codec,svc_mode:aZ()});break;case VK.LocalVideoLowTrack:i=RK.Low,o=b2(b2({},Rz(s)),{},{codec:this.store.codec,svc_mode:aZ()})}return{stream_type:i,attributes:o,ssrcs:t[n]}}))}createGatewayUnpublishMessage(e){return e.map((e=>{var t;let n,[r,{track:i,ssrcs:o,id:s}]=e;switch(r){case VK.LocalVideoTrack:n=Fv(t=i._hints).call(t,BJ.SCREEN_TRACK)?RK.Screen:RK.High;break;case VK.LocalAudioTrack:n=RK.Audio;break;case VK.LocalVideoLowTrack:n=RK.Low}return{stream_type:n,ssrcs:o,mid:s}}))}assignLocalTracks(e,t){e.forEach(((e,n)=>{let{track:r,type:i}=e;this.localTrackMap.set(i,{track:r,id:t[n].id,ssrcs:t[n].localSSRC})}))}withdrawLocalTracks(e){e.forEach((e=>{let[t]=e;this.localTrackMap.delete(t)}))}bindConnectionEvents(e){e.onConnectionStateChange=async t=>{if(KH.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onConnectionStateChange(").concat(t,")")),this.emit(jK.PeerConnectionStateChange,t),"connected"!==t||this.store.keyMetrics.peerConnectionEnd||this.store.peerConnectionEnd(),"connected"===t&&(this._restartTimer&&(clearTimeout(this._restartTimer),this._restartTimer=void 0),(this._isFirstConnected||this._isInRestartIce)&&this.reportPCStats(Date.now(),!0,this._pcStatsUploadType),this._isInRestartIce=!1,this._isFirstConnected=!1,this._isStartRestartIce=!1),AH("NEW_ICE_RESTART")){var n;if(Fv(n=this._restartStates).call(n,t)){if(this._isStartRestartIce)return;this._isStartRestartIce=!0;const t=t=>{"disconnected"!==e.iceConnectionState&&"checking"!==e.iceConnectionState&&"failed"!==e.iceConnectionState||(KH.debug("[".concat(this.store.clientId,"] [P2PChannel] start use restartICE, type is ").concat(t)),"CONNECTED"===PG(this,jK.QueryClientConnectionState)&&this.emit(jK.RequestRestartICE,t))},n=()=>{"disconnected"!==e.iceConnectionState&&"checking"!==e.iceConnectionState&&"failed"!==e.iceConnectionState||(this.reportPCStats(Date.now(),!1,this._pcStatsUploadType),KH.debug("[".concat(this.store.clientId,"] P2PConnection disconnected timeout, force reconnect")),setTimeout((()=>this.emit(jK.P2PLost)),0),this.iceFailedCount+=1,this.requestReconnect())},r=AH("ICE_RESTART_INTERVAL");return void(this._restartTimer=window.setTimeout((()=>{if(AH("JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE")&&SJ().supportPCSetConfiguration)t(MK.RELAY),this._restartTimer=window.setTimeout(n,r);else if(xB())t(MK.UDP),this._restartTimer=window.setTimeout(n,4e3);else{if(t(MK.TCP),SJ().supportPCSetConfiguration)return void(this._restartTimer=window.setTimeout((()=>{t(MK.RELAY),this._restartTimer=window.setTimeout(n,r)}),r));this._restartTimer=window.setTimeout(n,r)}}),800))}}else{if("disconnected"===t&&"disconnected"===e.iceConnectionState)return setTimeout((()=>{"disconnected"===e.iceConnectionState&&AH("ICE_RESTART")&&"CONNECTED"===PG(this,jK.QueryClientConnectionState)&&this.emit(jK.RequestRestartICE)}),800),void setTimeout((()=>{"disconnected"===e.peerConnectionState&&(KH.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection disconnected timeout 4000ms, force reconnect")),this.reportPCStats(Date.now(),!1,this._pcStatsUploadType),this._isInRestartIce=!1,setTimeout((()=>this.emit(jK.P2PLost)),0),this.iceFailedCount+=1,this.requestReconnect())}),4e3);"failed"===t&&(KH.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection state failed, force reconnect")),this.reportPCDisconnectedOrFailed(),setTimeout((()=>this.emit(jK.P2PLost)),0),this.iceFailedCount+=1,await this.requestReconnect())}},e.onICEConnectionStateChange=e=>{"connected"!==e||this.store.keyMetrics.iceConnectionEnd||this.store.iceConnectionEnd(),KH.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onICEConnectionStateChange(").concat(e,")")),ZH.reportApiInvoke(this.store.sessionId,{name:"ICEConnectionStateChange",options:e,tag:yG.TRACER}).onSuccess(),this.emit(jK.IceConnectionStateChange,e)},e.onICETransportStateChange=e=>{KH.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onICETransportStateChange(").concat(e,")"))},e.onDTLSTransportStateChange=e=>{KH.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportStateChange(").concat(e,")"))},e.onDTLSTransportError=e=>{KH.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportError(").concat(e,")"))},e.onFirstAudioDecoded=e=>{var t;const n=Array.from(Zx(t=this.remoteUserMap).call(t)).find((t=>t._audioSSRC===e));var r;n&&(this.store.subscribe(n.uid,"audio",void 0,void 0,void 0,Date.now()),null===(r=n.audioTrack)||void 0===r||r.emit(qJ.FIRST_FRAME_DECODED),ZH.firstRemoteFrame(this.store.sessionId,JH.FIRST_AUDIO_DECODE,XH.FIRST_AUDIO_DECODE,{peer:n._uintid,subscribeElapse:E0.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId}))},e.onFirstAudioReceived=e=>{var t;const n=Array.from(Zx(t=this.remoteUserMap).call(t)).find((t=>t._audioSSRC===e));n&&ZH.firstRemoteFrame(this.store.sessionId,JH.FIRST_AUDIO_RECEIVED,XH.FIRST_AUDIO_RECEIVED,{peer:n._uintid,subscribeElapse:E0.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId})},e.onFirstVideoDecoded=(e,t,n)=>{this.reportVideoFirstFrameDecoded(e,t,n)},e.onFirstVideoReceived=e=>{var t;const n=Array.from(Zx(t=this.remoteUserMap).call(t)).find((t=>t._videoSSRC===e));n&&ZH.firstRemoteFrame(this.store.sessionId,JH.FIRST_VIDEO_RECEIVED,XH.FIRST_VIDEO_RECEIVED,{peer:n._uintid,subscribeElapse:E0.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId})},e.onSelectedLocalCandidateChanged=(e,t)=>{const n="relay"===e.candidateType,r="relay"===t.candidateType;"unknown"!==t.candidateType&&n===r||this.emit(jK.ConnectionTypeChange,n),KH.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.SelectedLocalCandidateChanged(").concat(JSON.stringify(Oz(t))," -> ").concat(JSON.stringify(Oz(e)),")"))},e.onSelectedRemoteCandidateChanged=(e,t)=>{KH.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.SelectedRemoteCandidateChanged(").concat(JSON.stringify(Oz(t))," -> ").concat(JSON.stringify(Oz(e)),")"))},e.onFirstVideoDecodedTimeout=e=>{this.reportVideoFirstFrameDecoded(e,void 0,void 0,!0)},e.getLocalVideoStats=()=>{const e=this.statsCollector.getLocalVideoTrackStats(),t=this.statsCollector.getRTCStats();return b2(b2({},e),t)}}unbindConnectionEvents(e){e.onConnectionStateChange=void 0,e.onICEConnectionStateChange=void 0,e.onICETransportStateChange=void 0,e.onDTLSTransportStateChange=void 0,e.onDTLSTransportError=void 0,e.onFirstAudioDecoded=void 0,e.onFirstAudioReceived=void 0,e.onFirstVideoDecoded=void 0,e.onFirstVideoReceived=void 0,e.onSelectedLocalCandidateChanged=void 0,e.onSelectedRemoteCandidateChanged=void 0,e.onFirstVideoDecodedTimeout=void 0,e.getLocalVideoStats=void 0}filterTobeMutedTracks(e){const t=[];if(-1===this.getAllTracks().indexOf(e))return t;const n=this.localTrackMap.get(VK.LocalAudioTrack);if(e instanceof jQ&&(null==n?void 0:n.track)instanceof HQ)return n.track.isActive||t.push([VK.LocalAudioTrack,n]),t;const r=Array.from(this.localTrackMap.entries()).find((t=>{let[,{track:n}]=t;return e===n}));if(r&&(t.push(r),r[0]===VK.LocalVideoTrack)){const e=this.localTrackMap.get(VK.LocalVideoLowTrack);e&&t.push([VK.LocalVideoLowTrack,e])}return t}filterTobeUnmutedTracks(e){const t=[],n=this.localTrackMap.get(VK.LocalAudioTrack);if(e instanceof jQ&&(null==n?void 0:n.track)instanceof HQ)return n.track.isActive&&t.push([VK.LocalAudioTrack,n]),t;const r=Array.from(this.localTrackMap.entries()).find((t=>{let[,{track:n}]=t;return e===n}));if(r)if(r[0]===VK.LocalVideoTrack){t.push(r);const e=this.localTrackMap.get(VK.LocalVideoLowTrack);e&&t.push([VK.LocalVideoLowTrack,e])}else t.push(r);return t}createMuteMessage(e){return e.map((e=>{var t;let n,[r,{track:i,ssrcs:o,id:s}]=e;switch(r){case VK.LocalAudioTrack:n=RK.Audio;break;case VK.LocalVideoTrack:n=Fv(t=i._hints).call(t,BJ.SCREEN_TRACK)?RK.Screen:RK.High;break;case VK.LocalVideoLowTrack:n=RK.Low}return{stream_type:n,ssrcs:o,mid:s}}))}createUnmuteMessage(e){return e.map((e=>{var t;let n,[r,{track:i,ssrcs:o,id:s}]=e;switch(r){case VK.LocalAudioTrack:n=RK.Audio;break;case VK.LocalVideoTrack:n=Fv(t=i._hints).call(t,BJ.SCREEN_TRACK)?RK.Screen:RK.High;break;case VK.LocalVideoLowTrack:n=RK.Low}return{stream_type:n,ssrcs:o,mid:s}}))}filterTobeUnSubscribedTracks(e,t){const n=[],r=this.remoteUserMap.get(e);if(!r)return n;if(t){const i=r.get(t);if(!i)return n;n.push([e,{kind:t,id:i}])}else Array.from(r.entries()).forEach((t=>{let[r,i]=t;n.push([e,{kind:r,id:i}])}));return n}filterTobeUnSubscribedDataChannels(e,t){const n=[];return t.forEach((t=>{var r;null!==(r=this.remoteDataChannelMap.get(e))&&void 0!==r&&r.has(t.id)&&n.push(t)})),n}createUnsubscribeMessage(e){const t=[];return e.forEach((e=>{let[n,{kind:r,id:i}]=e;switch(r){case kK.VIDEO:return void(n._videoSSRC&&t.push({stream_type:kK.VIDEO,ssrcId:n._videoSSRC}));case kK.AUDIO:return void(n._audioSSRC&&t.push({stream_type:kK.AUDIO,ssrcId:n._audioSSRC}))}})),t}createUnsubscribeAllMessage(e){const t=new Map;return e.forEach((e=>{let[n,{kind:r}]=e;if(t.has(n)){let e=t.get(n);r===kK.VIDEO?e|=IK.Video:e|=IK.Audio,t.set(n,e)}else r===kK.VIDEO?t.set(n,IK.Video):t.set(n,IK.Audio)})),{users:Array.from(t.entries()).map((e=>{let[t,n]=e;return{stream_id:t.uid,stream_type:n}}))}}withdrawRemoteTracks(e){e.forEach((e=>{let[t,{kind:n}]=e;const r=this.remoteUserMap.get(t);r&&(r.delete(n),0===Array.from(r.entries()).length&&this.remoteUserMap.delete(t))}))}async updateBitrateLimit(e){const t=this.localTrackMap.get(VK.LocalVideoTrack),n=this.localTrackMap.get(VK.LocalVideoLowTrack);t&&await t.track.setBitrateLimit(e.uplink),n&&e.low_stream_uplink&&await n.track.setBitrateLimit({max_bitrate:e.low_stream_uplink.bitrate,min_bitrate:e.low_stream_uplink.bitrate||0})}isP2PDisconnected(){return!this.connection||"connected"!==this.connection.peerConnectionState}mapPubResToRemoteConfig(e,t,n){return e.map(((e,r)=>{var i;let{stream_type:o}=e;const s=null===(i=t.find((e=>{let{stream_type:t}=e;return o===t})))||void 0===i?void 0:i.attributes;if(s&&AH("DISABLE_SCREEN_SHARE_REMB")){const e=n[r]._hints;(Fv(e).call(e,BJ.SCREEN_TRACK)||Fv(e).call(e,BJ.SCREEN_LOW_TRACK))&&(s.remb=!1,KH.debug("disable remb for screen share, hints:",e))}return s}))}async tryToUnmuteAudio(e){for(let n=0;n<e.length;n++)if(e[n]instanceof jQ){var t;const r=this.filterTobeUnmutedTracks(e[n]);if(0===r.length)continue;await(null===(t=this.connection)||void 0===t?void 0:t.unmuteLocal(r.map((e=>{let[,{id:t}]=e;return t}))));const i=this.createUnmuteMessage(r);return void await NG(this,jK.RequestUnmuteLocal,i)}}bindStatsUploaderEvents(){this.statsUploader.requestStats=()=>this.getStats(),this.statsUploader.requestLocalMedia=()=>Array.from(this.localTrackMap.entries()),this.statsUploader.requestRemoteMedia=()=>Array.from(this.remoteUserMap.entries()),this.statsUploader.requestVideoIsReady=e=>{var t;return!(null===(t=this.connection)||void 0===t||!t.getRemoteVideoIsReady(e))},this.statsUploader.requestUpload=(e,t)=>this.emit(jK.RequestUpload,e,t),this.statsUploader.requestUploadStats=e=>this.emit(jK.RequestUploadStats,e),this.statsUploader.requestAllTracks=()=>this.getAllTracks()}unbindStatsUploaderEvents(){this.statsUploader.requestStats=void 0,this.statsUploader.requestLocalMedia=void 0,this.statsUploader.requestRemoteMedia=void 0,this.statsUploader.requestVideoIsReady=void 0}async requestReconnect(){this.dtlsFailedCount+=1,await JG(hH(this.dtlsFailedCount,lH)),this.emit(jK.RequestReconnect)}async reconnectP2P(){const e=Array.from(this.localTrackMap.entries()),t=this.createGatewayUnpublishMessage(e);Array.from(this.remoteUserMap.entries()),t.length>0&&await xG(this,jK.RequestUnpublishForReconnectPC,t),this.disconnectForReconnect(),this.emit(jK.RequestReconnectPC)}canPublishLowStream(){return this.localTrackMap.has(VK.LocalVideoTrack)||this.pendingLocalTracks.some((e=>e instanceof O$))}throwIfTrackTypeNotMatch(e){if(e.filter((e=>e instanceof O$)).length>1)throw new eG(ZB.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(e.filter((e=>e instanceof jQ)).length>1&&(e.some((e=>e instanceof jQ&&e._bypassWebAudio))||!SJ().webAudioMediaStreamDest))throw new eG(ZB.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode");for(const t of e){if(t instanceof O$&&this.pendingLocalTracks.some((e=>e instanceof O$)))throw new eG(ZB.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(t instanceof jQ&&this.pendingLocalTracks.some((e=>e instanceof jQ))&&(!SJ().webAudioMediaStreamDest||t._bypassWebAudio||this.pendingLocalTracks.some((e=>e instanceof jQ&&e._bypassWebAudio))))throw new eG(ZB.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode")}}getLowVideoTrack(e,t){var n;const r=!AH("DISABLE_DUAL_STREAM_USE_ENCODING")&&SJ().supportDualStreamEncoding,i=b2(b2({},{width:160,height:120,framerate:15,bitrate:50}),t);let o;o=r?e._mediaStreamTrack.clone():r1(e,i);const s=XG(8,"track-low-"),a=new O$(o,b2(b2({},r&&{scaleResolutionDownBy:Az(i,e)}),{},{frameRate:i.framerate,bitrateMax:i.bitrate,bitrateMin:i.bitrate}),void 0,void 0,s);return a.on(KJ.TRANSCEIVER_UPDATED,(t=>{e._updateRtpTransceiver(t,GJ.LOW_STREAM)})),a._hints.push(BJ.LOW_STREAM),Fv(n=e._hints).call(n,BJ.SCREEN_TRACK)&&a._hints.push(BJ.SCREEN_LOW_TRACK),e.on("sei-to-send",(e=>{a.emit("sei-to-send",e)})),e.addListener(jJ.NEED_CLOSE,(()=>{a.close()})),a}async globalLock(){return this.mutex.lock("From P2PChannel.globalLock")}async reportPCStats(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(this.connection&&this.connection instanceof _2){var i,o,s,a;const c=this.store.keyMetrics.descriptionStart||0,{iceConnectionState:d,dtlsTransportState:l,peerConnectionState:h}=this.connection,{local:u,remote:p}=await this.connection.getSelectedCandidatePair();ZH.pcStats(this.store.sessionId,{startTime:c,eventElapse:e-c||0,iceconnectionsate:d,dtlsstate:l,connectionstate:h,intSucc:t?1:2,error:r,selectedLocalCandidateProtocol:null!==(i=null==u?void 0:u.protocol)&&void 0!==i?i:"",selectedLocalCandidateType:null!==(o=u.candidateType)&&void 0!==o?o:"",selectedLocalCandidateAddress:"".concat(u.address,":").concat(u.port),selectedRemoteCandidateProtocol:null!==(s=p.protocol)&&void 0!==s?s:"",selectedRemoteCandidateType:null!==(a=p.candidateType)&&void 0!==a?a:"",selectedRemoteCandidateAddress:"".concat(p.address,":").concat(p.port),restartCnt:n,preallocation:this.connection.isPreallocation})}}reportVideoFirstFrameDecoded(e,t,n,r){var i;const o=Array.from(Zx(i=this.remoteUserMap).call(i)).find((t=>t._videoSSRC===e));if(o){r||this.store.subscribe(o.uid,"video",void 0,void 0,void 0,void 0,Date.now());const i=this.store.keyMetrics,s=i.subscribe.find((e=>e.userId===o.uid&&"video"===e.type));ZH.firstRemoteVideoDecode(this.store.sessionId,JH.FIRST_VIDEO_DECODE,XH.FIRST_VIDEO_DECODE,{peer:o._uintid,videowidth:t,videoheight:n,subscribeElapse:E0.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId,apEnd:i.requestAPEnd||0,apStart:i.requestAPStart||0,joinGwEnd:i.joinGatewayEnd||0,joinGwStart:i.joinGatewayStart||0,pcEnd:i.peerConnectionEnd||0,pcStart:i.peerConnectionStart||0,subscriberEnd:(null==s?void 0:s.subscribeEnd)||0,subscriberStart:(null==s?void 0:s.subscribeStart)||0,videoAddNotify:(null==s?void 0:s.streamAdded)||0,state:r?1:0,firstFrame:(null==s?void 0:s.firstFrame)||0})}}async remoteMediaSsrcChanged(e,t,n){if(!this.connection)return!1;const r=this.remoteUserMap.get(e);if(!r)return!1;const i=r.get(t);if(!i)return!1;const o=await this.connection.getRemoteSSRC(i);return void 0!==o&&o!==n}unbindRtpTransceiver(){0!==this.localTrackMap.size&&Array.from(this.localTrackMap.entries()).forEach((e=>{let[t,{track:n}]=e;t===VK.LocalVideoLowTrack?n._updateRtpTransceiver(void 0,GJ.LOW_STREAM):n._updateRtpTransceiver(void 0)}))}reportPCDisconnectedOrFailed(e){this.connection&&this.connection instanceof _2&&("disconnected"!==this.connection.iceConnectionState&&"checking"!==this.connection.iceConnectionState&&"failed"!==this.connection.iceConnectionState||(this._isFirstConnected?(this.reportPCStats(Date.now(),!1,this._pcStatsUploadType),this._isFirstConnected=!1):this._pcStatsUploadType===UK.TCP_RESTART&&e===MK.RELAY?this.reportPCStats(Date.now(),!1,this._pcStatsUploadType):this.reportPCStats(Date.now(),!1,UK.DISCONNECTED_OR_FAILED)))}},YW(y2.prototype,"startP2PConnection",[C2],Object.getOwnPropertyDescriptor(y2.prototype,"startP2PConnection"),y2.prototype),YW(y2.prototype,"connect",[C2],Object.getOwnPropertyDescriptor(y2.prototype,"connect"),y2.prototype),YW(y2.prototype,"updateRemoteRTPCapabilities",[C2],Object.getOwnPropertyDescriptor(y2.prototype,"updateRemoteRTPCapabilities"),y2.prototype),YW(y2.prototype,"publishDataChannel",[C2],Object.getOwnPropertyDescriptor(y2.prototype,"publishDataChannel"),y2.prototype),YW(y2.prototype,"unpublish",[C2],Object.getOwnPropertyDescriptor(y2.prototype,"unpublish"),y2.prototype),YW(y2.prototype,"unpublishDataChannel",[C2],Object.getOwnPropertyDescriptor(y2.prototype,"unpublishDataChannel"),y2.prototype),YW(y2.prototype,"unpublishLowStream",[C2],Object.getOwnPropertyDescriptor(y2.prototype,"unpublishLowStream"),y2.prototype),YW(y2.prototype,"subscribeDataChannel",[C2],Object.getOwnPropertyDescriptor(y2.prototype,"subscribeDataChannel"),y2.prototype),YW(y2.prototype,"subscribe",[C2],Object.getOwnPropertyDescriptor(y2.prototype,"subscribe"),y2.prototype),YW(y2.prototype,"massSubscribe",[C2],Object.getOwnPropertyDescriptor(y2.prototype,"massSubscribe"),y2.prototype),YW(y2.prototype,"unsubscribe",[C2],Object.getOwnPropertyDescriptor(y2.prototype,"unsubscribe"),y2.prototype),YW(y2.prototype,"unsubscribeDataChannel",[C2],Object.getOwnPropertyDescriptor(y2.prototype,"unsubscribeDataChannel"),y2.prototype),YW(y2.prototype,"massUnsubscribe",[C2],Object.getOwnPropertyDescriptor(y2.prototype,"massUnsubscribe"),y2.prototype),YW(y2.prototype,"muteRemote",[C2],Object.getOwnPropertyDescriptor(y2.prototype,"muteRemote"),y2.prototype),YW(y2.prototype,"unmuteRemote",[C2],Object.getOwnPropertyDescriptor(y2.prototype,"unmuteRemote"),y2.prototype),YW(y2.prototype,"hasRemoteMediaWithLock",[C2],Object.getOwnPropertyDescriptor(y2.prototype,"hasRemoteMediaWithLock"),y2.prototype),YW(y2.prototype,"disconnectForReconnect",[C2],Object.getOwnPropertyDescriptor(y2.prototype,"disconnectForReconnect"),y2.prototype),YW(y2.prototype,"updateBitrateLimit",[C2],Object.getOwnPropertyDescriptor(y2.prototype,"updateBitrateLimit"),y2.prototype),YW(y2.prototype,"remoteMediaSsrcChanged",[C2],Object.getOwnPropertyDescriptor(y2.prototype,"remoteMediaSsrcChanged"),y2.prototype),y2);function C2(e,t,n){const r=e[t];if("function"!=typeof r)throw new Error("Cannot use mutex on object property.");return n.value=async function(){const e=this.mutex,n=await e.lock("From P2PChannel.".concat(t));try{for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return await r.apply(this,o)}finally{n()}},n}const w2={};function I2(e){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&KH.debug("install service ".concat(e.name)),w2[e.name]=e}function A2(e){const t=w2[e];if(!t)throw new eG(ZB.INVALID_OPERATION,"".concat(e," not found, please use AgoraRTC.use(").concat(e,"Service) to load it first"));return t}function O2(e,t){return A2("DataStream").create(e,t)}function x2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function N2(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x2(Object(n),!0).forEach((function(t){SU(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x2(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const P2=Date.now(),D2=new Map,L2=new Map;async function k2(e){const t=D2.get(e),n=Array.isArray(t)&&t[t.length-1],r=L2.get(e);if(!n)return void(r.isSyncing=!1);const i={uid:n.uid,payload:n.payload};0===r.firstRecvTs&&(r.firstRecvTs=n.recvTs,r.firstSendTs=n.sendTs);const o=n.sendTs-r.firstSendTs,s=o-(Date.now()-r.firstRecvTs);s>0&&(r.firstRecvTs=Date.now()-o);let a=n.mediaDelay+s;a<=0?(t.pop(),M2(n.context,i),a=0):a=Math.min(a,20),setTimeout((()=>t.length&&k2(e)),a)}function M2(e,t){e.safeEmit(wG.STREAM_MESSAGE,t.uid,t.payload),e.onStreamMessage&&e.onStreamMessage(t)}function U2(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;if(!e.syncWithAudio)return M2(n,{uid:e.uid,payload:e.payload});const r="".concat(n.id,"-").concat(e.uid),i=D2.get(r)||[],o=i.findIndex((t=>e.sendTs>=t.sendTs)),s=N2(N2({},e),{},{context:n,mediaDelay:t,recvTs:Date.now()});-1===o?i.push(s):i.splice(o,0,s),D2.set(r,i);let a=!1;var c;L2.has(r)?a=!(null===(c=L2.get(r))||void 0===c||!c.isSyncing):L2.set(r,{isSyncing:a,firstRecvTs:0,firstSendTs:0}),a||k2(r)}const V2=SB().name;function F2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function j2(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F2(Object(n),!0).forEach((function(t){SU(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F2(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const B2="websdk_ng_cache_parameter",G2=AH("MAX_PRELOAD_ASYNC_LENGTH"),H2=new Map,W2=[];let K2=null,z2=0,q2=0;const Y2=new Map,J2=function(e,t){const n=[];let r=0;const i=async()=>{const e=n.shift();e&&await e(),n.length>0&&r<t?i():r--};return async function(){for(var o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];return new LO((async(o,a)=>{n.push((async()=>{try{const t=await e(...s);o(t)}catch(e){a(e)}})),r<t&&(r++,i())}))}}(Q2,G2),X2=hB.CancelToken.source();async function Q2(e,t,n,r,i,o){try{if(!AH("ENABLE_PRELOAD"))return;if(!SJ().supportWebCrypto)return void BG((()=>{KH.warn("Your browser does not support preloading, this feature  be run in a secure environment")}),"preload_webcrypto_not_supported");if(!n&&null!==n)throw new eG(ZB.INVALID_PARAMS,"Invalid token: ".concat(n,". If you don not use token, set it to null"));n&&oG(n,"token",1,2047),oG(e,"appid",1,2047),dK(t),r&&lK(r);const s=QG();KH.debug("preload channel ".concat(t,", uid is ").concat(r));const a={appId:e,cname:t,token:n||e,uid:"string"!=typeof r?r:null,sid:s,proxyServer:i};let c,d;"string"==typeof r?(a.stringUid=r,[d,c]=await LO.all([d0(r,{sid:s,appId:e},X2.token),l0(j2(j2({},a),{},{token:n||e,uid:0}),X2.token)]),a.uid=d.uid,c.gatewayInfo.uid=a.uid,c.gatewayInfo.res.uid=a.uid):(o&&(a.stringUid=o),c=await l0(a,X2.token));const l={sid:s,appId:e,cname:t,token:n||e,uid:a.stringUid||r,intUid:a.uid||c.gatewayInfo.uid,stringUid:a.stringUid,ts:Date.now(),sua:d,ap:c};await async function(e){let t;try{e.uid&&Z2({appId:e.appId,cname:e.cname,token:e.token,uid:e.uid,stringUid:e.stringUid});const n=o5(e),r=await async function(e,t){try{const n=await window.crypto.subtle.importKey("raw",WG(t),"AES-GCM",!1,["encrypt"]),r=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:new Uint8Array(1)},n,GG(window.btoa(JSON.stringify(e))));return HG(new Uint8Array(r))}catch(e){return}}(e,e.token||e.appId);if(!r)return;t=r5(B2);const i=t?JSON.parse(t):[];i.push({[n]:r}),i.length>AH("AP_CACHE_NUM")&&i.shift(),i5(B2,JSON.stringify(i))}catch(e){KH.warn("Error caching server parameters:",e.message),i5(B2,"")}}(l),z2++}catch(e){throw q2++,function(e){K2||(K2=window.setTimeout((()=>{let t="";Y2.forEach(((e,n)=>{t+="".concat(n,": ").concat(e," ;")})),ZH.reportApiInvoke(null,{name:EG.PRELOAD,options:{success:z2,failed:q2,err:t}}).onError(e),z2=0,q2=0,Y2.clear(),K2=null}),1e4));const t=Y2.get(e.code)||0;Y2.set(e.code,t+1)}(e),e}}async function $2(e){try{if(AH("AP_REQUEST_DETAIL"))return;const t=Z2(e);if(!t||"disabled"!==e.cloudProxyServer)return;const n=await async function(e,t){try{const n=await window.crypto.subtle.importKey("raw",WG(t),"AES-GCM",!1,["decrypt"]),r=await window.crypto.subtle.decrypt({name:"AES-GCM",iv:new Uint8Array(1)},n,GG(e));return JSON.parse(window.atob(HG(new Uint8Array(r))))}catch(e){return}}(t,e.token||e.appId);if(!n)return;if(!function(e,t){return!(e.cname!==t.cname||e.appId!==t.appId||e.token!==t.token)&&(t.stringUid?e.stringUid===t.stringUid:"number"==typeof t.uid?e.uid===t.uid:e.uid==t.uid)}(n,e))return;if(n&&Date.now()-n.ts<AH("AP_CACHE_LIFETIME"))return n}catch(e){KH.warn("Error get preloadInfo",e.message)}}function Z2(e){let t;try{if(t=r5(B2),!t)return;const n=JSON.parse(t),r=o5(e),i=function(e,t){for(let n=e.length-1;n>=0;n--)if(t(e[n]))return n;return-1}(n,(e=>r in e));if(-1===i)return;const o=n.splice(i,1)[0];return i5(B2,JSON.stringify(n)),o[r]}catch(e){KH.warn("Error delete preload info: ".concat(t),e.message),i5(B2,"")}}function e5(e){if(e){let t=H2.get(e);t&&(window.clearTimeout(t),t=null,H2.delete(e)),Fv(W2).call(W2,e)||"disabled"!==e.cloudProxyServer||W2.push(e)}if(H2.size<AH("AP_CACHE_NUM")&&W2.length>0){const e=W2.shift();H2.set(e,window.setTimeout((async()=>{const{appId:t,cname:n,token:r,stringUid:i,uid:o,proxyServer:s}=e;try{await J2(t,n,r,o,s,i),H2.has(e)&&e5(e)}catch(t){KH.warn("update preload failed",t.message),t5(e)}}),AH("AP_UPDATE_INTERVAL")))}}function t5(e){const t=W2.indexOf(e);-1!==t&&W2.splice(t,1);let n=H2.get(e);n&&(window.clearTimeout(n),n=null,H2.delete(e),e5())}function n5(e,t){const n=e.sua,r=e.ap;t&&n&&ZH.reqUserAccount(e.sid,{lts:n.requestTime,elapse:n.elapse,success:!0,serverAddr:n.url,stringUid:t,uid:e.intUid,errorCode:null,extend:n.req}),ZH.reportResourceTiming(e.ap.url,e.sid),ZH.joinWebProxyAP(e.sid,{lts:r.requestTime,elapse:r.elapse,sucess:1,apServerAddr:r.url,turnServerAddrList:r.proxyInfo.addresses.map((e=>e.ip)).join(","),eventType:"disabled",unilbsServerIds:[Ez.CHOOSE_SERVER,Ez.CLOUD_PROXY_FALLBACK].toString()}),ZH.joinChooseServer(e.sid,{lts:r.requestTime,elapse:r.elapse,succ:!0,csAddr:r.url,opid:r.opid,serverList:r.gatewayInfo.gatewayAddrs.map((e=>e.address)),ec:null,cid:r.gatewayInfo.cid.toString(),uid:r.gatewayInfo.uid.toString(),csIp:r.gatewayInfo.csIp,unilbsServerIds:[Ez.CHOOSE_SERVER].toString(),isHttp3:r.isHttp3})}function r5(e){return window.atob(window.localStorage.getItem(e)||"")}function i5(e,t){window.localStorage.setItem(e,window.btoa(t))}function o5(e){let t="".concat(e.appId,"_").concat(e.cname);return"string"==typeof e.uid&&(t+="_s_".concat(e.uid)),"number"==typeof e.uid&&(t+="_".concat(e.uid)),e.token&&(t+="_".concat(e.token)),oH(t)}function s5(e,t){switch(t){case 0:for(;128&g5(e););break;case 2:d5(e,E5(e));break;case 5:d5(e,4);break;case 1:d5(e,8);break;default:throw new Error("Unimplemented type: "+t)}}function a5(e){return{low:e|=0,high:e>>31,unsigned:e>=0}}let c5=[];function d5(e,t){if(e.offset+t>e.limit)throw new Error("Skip past limit");e.offset+=t}function l5(e){return e.offset>=e.limit}function h5(e,t){let n=e.bytes,r=e.offset,i=e.limit,o=r+t;if(o>n.length){let t=new Uint8Array(2*o);t.set(n),e.bytes=t}return e.offset=o,o>i&&(e.limit=o),r}function u5(e,t){let n=e.offset;if(n+t>e.limit)throw new Error("Read past limit");return e.offset+=t,n}function p5(e,t){let n=h5(e,t.length);e.bytes.set(t,n)}function f5(e,t){let n=u5(e,t),r=String.fromCharCode,i=e.bytes,o="�",s="";for(let e=0;e<t;e++){let a,c,d,l,h=i[e+n];128&h?192==(224&h)?e+1>=t?s+=o:(a=i[e+n+1],128!=(192&a)?s+=o:(l=(31&h)<<6|63&a,l<128?s+=o:(s+=r(l),e++))):224==(240&h)?e+2>=t?s+=o:(a=i[e+n+1],c=i[e+n+2],32896!=(49344&(a|c<<8))?s+=o:(l=(15&h)<<12|(63&a)<<6|63&c,l<2048||l>=55296&&l<=57343?s+=o:(s+=r(l),e+=2))):240==(248&h)?e+3>=t?s+=o:(a=i[e+n+1],c=i[e+n+2],d=i[e+n+3],8421504!=(12632256&(a|c<<8|d<<16))?s+=o:(l=(7&h)<<18|(63&a)<<12|(63&c)<<6|63&d,l<65536||l>1114111?s+=o:(l-=65536,s+=r(55296+(l>>10),56320+(1023&l)),e+=3))):s+=o:s+=r(h)}return s}function m5(e,t){let n=t.length,r=0;for(let e=0;e<n;e++){let i=t.charCodeAt(e);i>=55296&&i<=56319&&e+1<n&&(i=(i<<10)+t.charCodeAt(++e)-56613888),r+=i<128?1:i<2048?2:i<65536?3:4}y5(e,r);let i=h5(e,r),o=e.bytes;for(let e=0;e<n;e++){let r=t.charCodeAt(e);r>=55296&&r<=56319&&e+1<n&&(r=(r<<10)+t.charCodeAt(++e)-56613888),r<128?o[i++]=r:(r<2048?o[i++]=r>>6&31|192:(r<65536?o[i++]=r>>12&15|224:(o[i++]=r>>18&7|240,o[i++]=r>>12&63|128),o[i++]=r>>6&63|128),o[i++]=63&r|128)}}function g5(e){return e.bytes[u5(e,1)]}function _5(e,t){let n=h5(e,1);e.bytes[n]=t}function E5(e){let t,n=0,r=0;do{t=g5(e),n<32&&(r|=(127&t)<<n),n+=7}while(128&t);return r}function y5(e,t){for(t>>>=0;t>=128;)_5(e,127&t|128),t>>>=7;_5(e,t)}function v5(e,t){let n,r=0,i=0,o=0;return n=g5(e),r=127&n,128&n&&(n=g5(e),r|=(127&n)<<7,128&n&&(n=g5(e),r|=(127&n)<<14,128&n&&(n=g5(e),r|=(127&n)<<21,128&n&&(n=g5(e),i=127&n,128&n&&(n=g5(e),i|=(127&n)<<7,128&n&&(n=g5(e),i|=(127&n)<<14,128&n&&(n=g5(e),i|=(127&n)<<21,128&n&&(n=g5(e),o=127&n,128&n&&(n=g5(e),o|=(127&n)<<7))))))))),{low:r|i<<28,high:i>>>4|o<<24,unsigned:t}}function b5(e,t){let n=t.low>>>0,r=(t.low>>>28|t.high<<4)>>>0,i=t.high>>>24,o=0===i?0===r?n<16384?n<128?1:2:n<1<<21?3:4:r<16384?r<128?5:6:r<1<<21?7:8:i<128?9:10,s=h5(e,o),a=e.bytes;switch(o){case 10:a[s+9]=i>>>7&1;case 9:a[s+8]=9!==o?128|i:127&i;case 8:a[s+7]=8!==o?r>>>21|128:r>>>21&127;case 7:a[s+6]=7!==o?r>>>14|128:r>>>14&127;case 6:a[s+5]=6!==o?r>>>7|128:r>>>7&127;case 5:a[s+4]=5!==o?128|r:127&r;case 4:a[s+3]=4!==o?n>>>21|128:n>>>21&127;case 3:a[s+2]=3!==o?n>>>14|128:n>>>14&127;case 2:a[s+1]=2!==o?n>>>7|128:n>>>7&127;case 1:a[s]=1!==o?128|n:127&n}}const S5={},T5={},R5=4294967296,C5=R5*R5,w5=C5/2,I5=P5(0,!0),A5=P5(0),O5=D5(0,-2147483648,!1),x5=D5(-1,2147483647,!1),N5=D5(-1,-1,!0);function P5(e,t){let n,r,i;return t?(i=0<=(e>>>=0)&&e<256)&&(r=T5[e],r)?r:(n=D5(e,0,!0),i&&(T5[e]=n),n):(i=-128<=(e|=0)&&e<128)&&(r=S5[e],r)?r:(n=D5(e,e<0?-1:0,!1),i&&(S5[e]=n),n)}function D5(e,t,n){return{low:0|e,high:0|t,unsigned:!!n}}function L5(e,t){if(isNaN(e))return t?I5:A5;if(t){if(e<0)return I5;if(e>=C5)return N5}else{if(e<=-w5)return O5;if(e+1>=w5)return x5}return e<0?t?I5:A5:D5(e%R5|0,e/R5|0,t)}function k5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}class M5 extends mG{get connectionState(){return this._connectionState}set connectionState(e){if(this._connectionState===e)return;const t=this._connectionState;this._connectionState=e,this.emit(qK.CONNECTION_STATE_CHANGE,e,t)}get quality(){return this._quality}set quality(e){this._quality=e>1?1:e<.1?.1:e,this._qualityTimer&&(window.clearTimeout(this._qualityTimer),this._qualityTimer=null),this._quality>=1||(this._qualityTimer=window.setTimeout((()=>{this.quality=this._quality/this._qualityRatio}),6e4))}constructor(e){var t;super(),SU(this,"name","AgoraRTCImageModeration"),SU(this,"_connectionState",zK.CONNECTING),SU(this,"_sequence",0),SU(this,"_moderationStartTime",void 0),SU(this,"_workerConnection",void 0),SU(this,"_workerMessageLengthLimit",void 0),SU(this,"_qualityRatio",void 0),SU(this,"_connectInfo",void 0),SU(this,"_cancelTokenSource",hB.CancelToken.source()),SU(this,"_retryConfig",void 0),SU(this,"_moderationInterval",void 0),SU(this,"_moderationTimer",null),SU(this,"_moderationMode",1),SU(this,"_quality",1),SU(this,"_qualityTimer",null),SU(this,"_ticket",void 0),SU(this,"_moderationIntervalMinimum",void 0),SU(this,"_uploadFailedNum",0),SU(this,"_uploadNum",0),SU(this,"_uploadTimer",null),SU(this,"_extraInfo",void 0),SU(this,"_vendor",""),SU(this,"_encoder",new TextEncoder),SU(this,"_moderationId",void 0),SU(this,"inspectImage",(()=>{if(this.connectionState!==zK.CONNECTED)throw new eW(ZB.OPERATION_ABORTED,"image moderation service connection status is ".concat(this.connectionState));this._moderationTimer&&(window.clearInterval(this._moderationTimer),this._moderationTimer=null),this._moderationTimer=window.setInterval((()=>{this.connectionState===zK.CONNECTED?this.requestToInspectImage():KH.debug("[".concat(this._moderationId,"] Moderation State is not connected , "),this.connectionState)}),this._moderationInterval<this._moderationIntervalMinimum?this._moderationIntervalMinimum:this._moderationInterval),this.requestToInspectImage()})),this._moderationId=XG(5,"image-moderation-"),this._workerMessageLengthLimit=AH("IMAGE_MODERATION_WORKER_MESSAGE_LENGTH_LIMIT"),this._moderationIntervalMinimum=AH("IMAGE_MODERATION_INTERVAL_MINIMUM"),this._moderationInterval=null!==(t=e.interval)&&void 0!==t?t:1e3,e.extraInfo&&(this._extraInfo=this._encoder.encode(e.extraInfo)),e.vendor&&(this._vendor=e.vendor),this._qualityRatio=AH("IMAGE_MODERATION_QUALITY_RATIO"),this._moderationStartTime=Number(Date.now()),this._workerConnection=new gz("worker-"+this._moderationId,lH),this.on(qK.STATE_CHANGE,((e,t)=>{KH.debug("[".concat(this._moderationId,"] Moderation operation :").concat(YK[e]," ").concat(t||""))})),this.handleWorkerEvents()}async init(e,t){this.emit(qK.STATE_CHANGE,YK.CONNECT_AP),this._connectInfo=e;const n=this._cancelTokenSource.token;return this._retryConfig=t,new LO(((r,i)=>{this.on(qK.CONNECTION_STATE_CHANGE,((e,t)=>{e===zK.CONNECTED&&r()})),this.requestAP(e,n,t).then((e=>{this.connectWorker(e)})).catch((e=>{i(e)}))}))}updateConfig(e){var t;this._moderationInterval=null!==(t=e.interval)&&void 0!==t?t:1e3,e.extraInfo&&(this._extraInfo=this._encoder.encode(e.extraInfo)),e.vendor&&(this._vendor=e.vendor),KH.debug("[".concat(this._moderationId,"] updateConfig: ").concat(JSON.stringify(e))),this.connectionState===zK.CONNECTED&&this.inspectImage()}async requestAP(e,t,n){const r=AH("WEBCS_DOMAIN").map((e=>"https://".concat(e,"/api/v1"))),i=await function(e,t,n,r){let{appId:i,areaCode:o,cname:s,sid:a,token:c,uid:d}=t;n0++;const l="moderation_plugin",h={service_name:l,json_body:JSON.stringify({appId:i,areaCode:o,cname:s,command:"allocateEdge",requestId:n0,seq:n0,sid:a,appToken:c,ts:Date.now(),uid:d+""})};let u,p,f=e[0];return uH((async()=>{u=Date.now();const e=await FZ(f,{data:h,cancelToken:n,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"},params:{action:"wrtc_gateway"}});if(p=Date.now()-u,0!==e.code){const t=new eW(ZB.UNEXPECTED_RESPONSE,"moderation plugin ap error, code"+e.code,{retry:!0,responseTime:p});throw KH.error(t.toString()),t}const t=JSON.parse(e.json_body);if(200!==t.code){const e=new eW(ZB.UNEXPECTED_RESPONSE,"moderation plugin ap error, code: ".concat(t.code,", reason: ").concat(t.reason),{code:t.code,responseTime:p});throw KH.error(e.toString()),e}if(!t.servers||!Array.isArray(t.servers)||0===t.servers.length){const e=new eW(ZB.UNEXPECTED_RESPONSE,"moderation plugin ap empty server",{code:t.code,responseTime:p});throw KH.error(e.toString()),e}if(!t.servers.some((e=>!!e.wss))){const e=new eW(ZB.UNEXPECTED_RESPONSE,"moderation plugin ap empty port",{code:t.code,responseTime:p});throw KH.error(e.toString()),e}const r=AH("IMAGE_MODERATION_WORKER_HOST");return{addressList:t.servers.map((e=>{let{address:t,wss:n}=e;if(t&&n)return"wss://".concat(t.replace(/\./g,"-"),".").concat(r,":").concat(n,"/moderation")})).filter((e=>!!e)),workerToken:t.workerToken,vid:t.vid,ticket:t.appTicket,responseTime:p}}),((t,n)=>(ZH.apworkerEvent(a,{success:!0,sc:200,serviceName:l,responseDetail:JSON.stringify(t.addressList),firstSuccess:0===n,responseTime:p,serverIp:e[n%e.length]}),!1)),((t,n)=>(ZH.apworkerEvent(a,{success:!1,sc:t.data&&t.data.code||200,serviceName:l,responseTime:p,serverIp:e[n%e.length]}),!!(t.code!==ZB.OPERATION_ABORTED&&t.code!==ZB.UNEXPECTED_RESPONSE||t.data&&t.data.retry)&&(f=e[(n+1)%e.length],!0))),r)}(r,e,t,n);this.emit(qK.STATE_CHANGE,YK.AP_CONNECTED);const{addressList:o,ticket:s}=i;return this._ticket=s,o}async connectWorker(e){this.emit(qK.STATE_CHANGE,YK.CONNECT_WORKER),await this._workerConnection.init(e,1e4)}handleWorkerEvents(){this._workerConnection.on(cK.CONNECTED,(async()=>{this.emit(qK.STATE_CHANGE,YK.WORKER_CONNECTED,this._workerConnection.url),this.connectionState=zK.CONNECTED})),this._workerConnection.on(cK.CLOSED,(()=>{this.connectionState=zK.CLOSED})),this._workerConnection.on(cK.FAILED,(()=>{this.connectionState=zK.CLOSED})),this._workerConnection.on(cK.RECONNECTING,(()=>{this.connectionState=this.connectionState===zK.CONNECTED?zK.RECONNECTING:zK.CONNECTING})),this._workerConnection.on(cK.ON_MESSAGE,(async e=>{if(e.data instanceof ArrayBuffer){const t=function(e){return function(e){let t={};e:for(;!l5(e);){let n=E5(e);switch(n>>>3){case 0:break e;case 1:t.code=E5(e);break;case 2:t.msg=f5(e,E5(e));break;case 3:t.requestId=f5(e,E5(e));break;case 4:t.timestamp=v5(e,!1);break;default:s5(e,7&n)}}return t}({bytes:t=e,offset:0,limit:t.length});var t}(new Uint8Array(e.data));AH("SHOW_IMAGE_MODERATION_WORKER_MESSAGE")&&KH.debug("[".concat(this._moderationId,"] Response message for worker of image moderation "),JSON.stringify(t)),this._uploadNum++,void 0===t.code||0===t.code||(this._uploadFailedNum++,KH.error("[".concat(this._moderationId,"] Error response from worke, code is ").concat(t.code,", msg is ").concat(t.msg)),this._uploadTimer||(this._uploadTimer=window.setTimeout((()=>{ZH.reportApiInvoke(this._connectInfo.sid||null,{name:EG.IMAGE_MODERATION_UPLOAD,options:[this._uploadFailedNum,this._uploadNum,t.code],tag:yG.TRACER}).onError(new eW(ZB.IMAGE_MODERATION_UPLOAD_FAILED,t.msg)),this._uploadTimer=null}),AH("IMAGE_MODERATION_UPLOAD_REPORT_INTERVAL"))))}else KH.error("[".concat(this._moderationId,"] Unexpected message type from worker"))})),this._workerConnection.on(cK.WILL_RECONNECT,((e,t,n)=>{"recover"===e&&n(e),n("tryNext")})),this._workerConnection.on(cK.REQUEST_NEW_URLS,((e,t)=>{this.requestAP(this._connectInfo,this._cancelTokenSource.token,this._retryConfig).then(e).catch(t)}))}static intToLong(e){return{low:e|=0,high:e>>31,unsigned:e>=0}}async requestToInspectImage(){const e=PG(this,qK.CLIENT_LOCAL_VIDEO_TRACK),t={appId:this._connectInfo.appId,cname:this._connectInfo.cname,cid:this._connectInfo.cid,sid:this._connectInfo.sid,uid:this._connectInfo.uid,vid:this._connectInfo.vid};if(e){if(!e.isPlaying)return void(AH("SHOW_IMAGE_MODERATION_WORKER_MESSAGE")&&KH.debug("Only the track being played can be inspected"));this._sequence++;const n=await this.generateRequestData(e,t);this._workerConnection.sendMessage(n,!0,!0)}else AH("SHOW_IMAGE_MODERATION_WORKER_MESSAGE")&&KH.debug("Only the track being published can be inspected")}async generateRequestData(e,t){let{appId:n,cname:r,cid:i,vid:o,sid:s,uid:a}=t;const c=Date.now(),d=await e.getCurrentFrameImage("image/jpeg",this.quality),l=await QX(d,n,r),h=this._sequence+"-"+i+"-"+a+"-"+c+"-"+XG(12,""),u={appId:n,cid:i,cname:r,deviceId:"",elapse:M5.intToLong(Number(c-this._moderationStartTime)),fileSize:d.buffer.byteLength,height:d.height,width:d.width,jpg:l,networkType:6,osType:7,requestId:h,sdkVersion:"4.22.1",sequence:this._sequence,sid:s,timestamp:L5(c),uid:a,vid:o,service:this._moderationMode,ticket:this._ticket,callbackData:this._extraInfo,vendorConfigs:this._vendor};void 0===this._extraInfo&&delete u.callbackData;const p=function(e){let t=function(){const e=c5.pop();return e?(e.offset=e.limit=0,e):{bytes:new Uint8Array(64),offset:0,limit:0}}();return function(e,t){let n=e.appId;void 0!==n&&(y5(t,10),m5(t,n));let r=e.cid;void 0!==r&&(y5(t,16),y5(t,r));let i=e.cname;void 0!==i&&(y5(t,26),m5(t,i));let o=e.deviceId;void 0!==o&&(y5(t,34),m5(t,o));let s=e.elapse;void 0!==s&&(y5(t,40),b5(t,s));let a=e.fileSize;void 0!==a&&(y5(t,48),b5(t,a5(a)));let c=e.height;void 0!==c&&(y5(t,56),b5(t,a5(c)));let d=e.jpg;void 0!==d&&(y5(t,66),y5(t,d.length),p5(t,d));let l=e.networkType;void 0!==l&&(y5(t,72),b5(t,a5(l)));let h=e.osType;void 0!==h&&(y5(t,80),b5(t,a5(h)));let u=e.requestId;void 0!==u&&(y5(t,90),m5(t,u));let p=e.sdkVersion;void 0!==p&&(y5(t,98),m5(t,p));let f=e.sequence;void 0!==f&&(y5(t,104),b5(t,a5(f)));let m=e.sid;void 0!==m&&(y5(t,114),m5(t,m));let g=e.timestamp;void 0!==g&&(y5(t,120),b5(t,g));let _=e.uid;void 0!==_&&(y5(t,128),y5(t,_));let E=e.vid;void 0!==E&&(y5(t,136),y5(t,E));let y=e.width;void 0!==y&&(y5(t,144),b5(t,a5(y)));let v=e.service;void 0!==v&&(y5(t,152),y5(t,v));let b=e.callbackData;void 0!==b&&(y5(t,162),y5(t,b.length),p5(t,b));let S=e.ticket;void 0!==S&&(y5(t,170),m5(t,S));let T=e.vendorConfigs;void 0!==T&&(y5(t,178),m5(t,T))}(e,t),function(e){let t=e.bytes,n=e.limit;return t.length===n?t:t.subarray(0,n)}(t)}(u);if(p.byteLength<this._workerMessageLengthLimit){if(AH("SHOW_IMAGE_MODERATION_WORKER_MESSAGE")){const e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k5(Object(n),!0).forEach((function(t){SU(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k5(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},u);delete e.jpg,KH.debug("[".concat(this._moderationId,"] Request message for worker of image moderation service: "),JSON.stringify(e))}return p}{const t=this.quality*this._qualityRatio;return this.quality=t,await this.generateRequestData(e,{appId:n,cname:r,cid:i,vid:o,sid:s,uid:a})}}close(){this._cancelTokenSource.cancel(),this._cancelTokenSource=hB.CancelToken.source(),this._workerConnection&&this._workerConnection.close(),this._moderationTimer&&window.clearInterval(this._moderationTimer),this._moderationTimer=null,this._uploadTimer&&window.clearTimeout(this._uploadTimer),this._uploadTimer=null,this.connectionState=zK.CLOSED,this.emit(qK.STATE_CHANGE,YK.CLOSED)}}function U5(e){if(rG(e.interval,"interval",1e3,1/0),e&&e.extraInfo&&e.extraInfo.length>1024)throw new eW(ZB.INVALID_PARAMS,"config.extraInfo length cannot exceed 1024 bytes");if(e&&e.vendor&&e.vendor.length>1024)throw new eW(ZB.INVALID_PARAMS,"config.vendor length cannot exceed 1024 bytes")}const V5={name:"ImageModeration",create:function(e){let{config:t}=e;return U5(t),new M5(t)}};var F5,j5,B5,G5,H5,W5,K5,z5,q5,Y5,J5,X5,Q5,$5,Z5,e3,t3,n3,r3,i3,o3,s3,a3,c3,d3,l3,h3,u3,p3,f3,m3,g3,_3,E3,y3,v3,b3,S3,T3,R3,C3;function w3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function I3(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w3(Object(n),!0).forEach((function(t){SU(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w3(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}cH.setLogger(KH);let A3=(F5=$H(),j5=$H({argsMap:(e,t)=>{if(!Array.isArray(t)){if(!(t instanceof fX))return[t];t=[t]}return t.map((e=>e?Object(e).toString():"null"))}}),B5=$H({argsMap:(e,t)=>(t||(t=[]),Array.isArray(t)||t.trackMediaType!==YJ.DATA?(Array.isArray(t)||(t=[t]),t.map((e=>e.getTrackId()))):[t.getChannelId()])}),G5=$H({argsMap:(e,t,n,r)=>["object"==typeof t?t.uid:t,n,r]}),H5=$H({argsMap:(e,t,n)=>[t,n]}),W5=$H({argsMap:(e,t)=>t.map((e=>{let{user:t,mediaType:n}=e;return[null==t?void 0:t.uid,n]}))}),K5=$H({argsMap:(e,t,n,r)=>["object"==typeof t?t.uid:t,n,r]}),z5=$H({argsMap:(e,t)=>t.map((e=>{let{user:t,mediaType:n}=e;return{uid:null==t?void 0:t.uid,mediaType:n}}))}),q5=$H(),Y5=$H(),J5=$H(),X5=$H(),Q5=$H(),$5=$H(),Z5=$H(),e3=$H(),t3=$H(),n3=$H(),r3=$H(),i3=$H(),o3=$H(),s3=$H(),a3=$H({argsMap:(e,t)=>[t]}),c3=$H(),d3=$H(),l3=$H(),h3=$H(),u3=$H(),p3=$H(),f3=$H(),m3=$H(),g3=$H({argsMap:(e,t)=>(Array.isArray(t)||(t=[t]),[JSON.stringify(t)])}),_3=$H(),E3=$H(),y3=$H(),v3=$H(),b3=$H(),S3=$H(),T3=$H({reportResult:!0}),R3=$H(),C3=class extends mG{get connectionState(){return this._gateway.state}get remoteUsers(){return this._users}get localTracks(){return this._p2pChannel.getAllTracks(!0)}get uid(){return this._uid}get channelName(){return this._channelName}get localDataChannels(){return this._p2pChannel.getAllDataChannels()}get mode(){return this._config.mode}get role(){var e;return(null===(e=this._config)||void 0===e?void 0:e.role)||"audience"}get codec(){return this._config.codec}get audioCodec(){return this._config.audioCodec||"opus"}get isStringUID(){return!!this._joinInfo&&!!this._joinInfo.stringUid}get __className__(){return"Client"}constructor(e){let t;if(super(),SU(this,"store",void 0),SU(this,"_uid",void 0),SU(this,"_channelName",void 0),SU(this,"_uintUid",void 0),SU(this,"_users",[]),SU(this,"_config",void 0),SU(this,"_clientId",void 0),SU(this,"_appId",void 0),SU(this,"_sessionId",null),SU(this,"_key",void 0),SU(this,"_rtmConfig",{}),SU(this,"_joinInfo",void 0),SU(this,"_gateway",void 0),SU(this,"_statsCollector",void 0),SU(this,"_configDistribute",void 0),SU(this,"_leaveMutex",new cH("client-leave")),SU(this,"_publishMutex",new cH("client-publish")),SU(this,"_renewTokenMutex",new cH("client-renewtoken")),SU(this,"_subscribeMutex",new cH("client-subscribe")),SU(this,"_encryptionMode","none"),SU(this,"_encryptionSecret",null),SU(this,"_encryptionSalt",null),SU(this,"_encryptDataStream",!1),SU(this,"_encryptDataStreamKey",null),SU(this,"_encryptDataStreamIv",null),SU(this,"_proxyServer",void 0),SU(this,"_turnServer",{servers:[],mode:"auto"}),SU(this,"_cloudProxyServerMode","disabled"),SU(this,"_isDualStreamEnabled",!1),SU(this,"_defaultStreamFallbackType",void 0),SU(this,"_lowStreamParameter",void 0),SU(this,"_streamFallbackTypeCacheMap",new Map),SU(this,"_remoteStreamTypeCacheMap",new Map),SU(this,"_axiosCancelSource",hB.CancelToken.source()),SU(this,"_audioVolumeIndicationInterval",void 0),SU(this,"_networkQualityInterval",void 0),SU(this,"_userOfflineTimeout",void 0),SU(this,"_streamRemovedTimeout",void 0),SU(this,"_liveTranscodeStreamingClient",void 0),SU(this,"_liveRawStreamingClient",void 0),SU(this,"_channelMediaRelayClient",void 0),SU(this,"_networkQualitySensitivity","normal"),SU(this,"_p2pChannel",void 0),SU(this,"_useLocalAccessPoint",!1),SU(this,"_setLocalAPVersion",void 0),SU(this,"_joinAndNotLeaveYet",!1),SU(this,"_numberOfJoinCount",0),SU(this,"_remoteDefaultVideoStreamType",void 0),SU(this,"_inspect",void 0),SU(this,"_moderation",void 0),SU(this,"_license",void 0),SU(this,"_pendingPublishedUsers",[]),SU(this,"ntpAlignErrorCount",0),SU(this,"remoteInboundOffset",0),SU(this,"_handleLocalTrackEnable",((e,t,n)=>{this.publish(e,!1).then(t).catch(n)})),SU(this,"_handleLocalTrackDisable",((e,t,n)=>{this.unpublish(e).then(t).catch(n)})),SU(this,"_handleUserOnline",(e=>{if(AH("BLOCK_LOCAL_CLIENT")&&iW(e.uid,this.channelName))return void KH.debug("[".concat(e.uid,"] will be ignored in local"));this.isStringUID&&"string"!=typeof e.uid&&KH.error("[".concat(this._clientId,"] StringUID is Mixed with UintUID"));const t=this._users.find((t=>t.uid===e.uid));if(t)t._trust_in_room_=!0,t._is_pre_created&&(t._is_pre_created=!1,this.safeEmit(wG.USER_JOINED,t));else{const t=new y1(e.uid,e.uint_id||e.uid);this._users.push(t),KH.debug("[".concat(this._clientId,"] user online"),e.uid),this.safeEmit(wG.USER_JOINED,t)}})),SU(this,"_handleUserOffline",(e=>{if(AH("BLOCK_LOCAL_CLIENT")&&iW(e.uid,this.channelName))return;const t=this._users.find((t=>t.uid===e.uid));t&&(this._handleRemoveStream(e),this._handleRemoveDataChannels(e),t._audio_pre_subscribed||t._video_pre_subscribed?t._is_pre_created=!0:kG(this._users,t),this._remoteStreamTypeCacheMap.delete(t.uid),this._streamFallbackTypeCacheMap.delete(t.uid),KH.debug("[".concat(this._clientId,"] user offline"),e.uid,"reason:",e.reason),this.safeEmit(wG.USER_LEAVED,t,e.reason))})),SU(this,"_handleAddAudioOrVideoStream",((e,t,n,r,i,o,s)=>{if(AH("BLOCK_LOCAL_CLIENT")&&iW(t,this.channelName))return;const a=this._users.find((e=>e.uid===t));if(!a)return void KH.error("[".concat(this._clientId,"] can not find target user!(on_add_stream)"));KH.debug("[".concat(this._clientId,"] stream added with uid ").concat(t,", type ").concat(e)),this.store.subscribe(a.uid,e,void 0,void 0,void 0,Date.now());const c="audio"===e?a.hasAudio:a.hasVideo;a._uintid||(a._uintid=i||t),"audio"===e?a._trust_audio_stream_added_state_=!0:a._trust_video_stream_added_state_=!0,"audio"===e?(a._audio_added_=!0,void 0!==n&&(a._audioSSRC=n),void 0!==r&&(a._cname=r),o&&(a._audioOrtc=o)):(a._video_added_=!0,void 0!==n&&(a._videoSSRC=n),void 0!==r&&(a._cname=r),void 0!==s&&(a._rtxSsrcId=s),o&&(a._videoOrtc=o)),("audio"===e?a.hasAudio:a.hasVideo)&&!c&&(KH.info("[".concat(this._clientId,"] remote user ").concat(a.uid," published ").concat(e)),this.safeEmit(wG.USER_PUBLISHED,a,e)),"video"===e?ZH.onGatewayStream(this._sessionId,JH.ON_ADD_VIDEO_STREAM,XH.ON_ADD_VIDEO_STREAM,{peer:i||t,ssrc:a._videoSSRC}):ZH.onGatewayStream(this._sessionId,JH.ON_ADD_AUDIO_STREAM,XH.ON_ADD_AUDIO_STREAM,{peer:i||t,ssrc:a._audioSSRC}),this._p2pChannel.remoteMediaSsrcChanged(a,e,n).then((t=>{if(t&&(KH.debug("[".concat(this._clientId,"] resubscribe ").concat(e," for user ").concat(a.uid," after rejoin because SSRC id changed.")),this._p2pChannel instanceof R2))return this._p2pChannel.unsubscribe(a,e,!0).then((()=>this._subscribe(a,e,!0).catch((e=>{KH.error("[".concat(this._clientId,"] resubscribe error"),e.toString())}))))})),this._p2pChannel.hasPendingRemoteMedia(a,e)&&(KH.debug("[".concat(this._clientId,"] resubscribe ").concat(e," for user ").concat(a.uid," after reconnect.")),this._subscribe(a,e,!0).catch((e=>{KH.error("[".concat(this._clientId,"] resubscribe error"),e.toString())})))})),SU(this,"_handleRemoveStream",(e=>{if(AH("BLOCK_LOCAL_CLIENT")&&iW(e.uid,this.channelName))return;const t=this._users.find((t=>t.uid===e.uid));if(!t)return void KH.warning("[".concat(this._clientId,"] can not find target user!(on_remove_stream)"));KH.debug("[".concat(this._clientId,"] stream removed with uid ").concat(e.uid));let n=()=>{};t.hasAudio&&t.hasVideo?n=()=>{KH.info("[".concat(this._clientId,"] remote user ").concat(t.uid," unpublished audio track")),this.safeEmit(wG.USER_UNPUBLISHED,t,"audio"),KH.info("[".concat(this._clientId,"] remote user ").concat(t.uid," unpublished video track")),this.safeEmit(wG.USER_UNPUBLISHED,t,"video")}:t.hasVideo?n=()=>{KH.info("[".concat(this._clientId,"] remote user ").concat(t.uid," unpublished video track")),this.safeEmit(wG.USER_UNPUBLISHED,t,"video")}:t.hasAudio&&(n=()=>{KH.info("[".concat(this._clientId,"] remote user ").concat(t.uid," unpublished audio track")),this.safeEmit(wG.USER_UNPUBLISHED,t,"audio")}),t._video_pre_subscribed||t._audio_pre_subscribed||(t._trust_audio_stream_added_state_=!0,t._trust_video_stream_added_state_=!0,t._audio_added_=!1,t._video_added_=!1,this._p2pChannel instanceof R2&&this._p2pChannel.unsubscribe(t).then((e=>{if(e)return this._gateway.unsubscribe(e,t.uid)})),t._audioSSRC=void 0,t._videoSSRC=void 0,t._audioOrtc=void 0,t._videoOrtc=void 0,t._rtxSsrcId=void 0),ZH.onGatewayStream(this._sessionId,JH.ON_REMOVE_STREAM,XH.ON_REMOVE_STREAM,{peer:e.uint_id||e.uid}),n()})),SU(this,"_handleSetStreamLocalEnable",((e,t,n)=>{if(AH("BLOCK_LOCAL_CLIENT")&&iW(t,this.channelName))return;const r=this._users.find((e=>e.uid===t));if(!r)return void KH.error("[".concat(this._clientId,"] can not find target user!(disable_local)"));KH.debug("[".concat(this._clientId,"] local ").concat(e," ").concat(n?"enabled":"disabled"," with uid ").concat(t));const i="audio"===e?r.hasAudio:r.hasVideo;if("audio"===e){r._trust_audio_enabled_state_=!0;const e=r._audio_enabled_;if(r._audio_enabled_=n,r._audio_enabled_===e)return;{const e=r._audio_enabled_?"enable-local-audio":"disable-local-audio";KH.debug("[".concat(this._clientId,"] user-info-updated, uid: ").concat(t,", msg: ").concat(e)),this.safeEmit(wG.USER_INFO_UPDATED,t,e)}}else{r._trust_video_enabled_state_=!0;const e=r._video_enabled_;if(r._video_enabled_=n,r._video_enabled_===e)return;{const e=r._video_enabled_?"enable-local-video":"disable-local-video";KH.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(t,", msg: ").concat(e)),this.safeEmit(wG.USER_INFO_UPDATED,t,e)}}const o="audio"===e?r.hasAudio:r.hasVideo;return i!==o?!i&&o?(KH.info("[".concat(this._clientId,"] remote user ").concat(t," published ").concat(e)),void this.safeEmit(wG.USER_PUBLISHED,r,e)):("video"===e&&r._videoTrack&&r._videoTrack._destroy(),"audio"===e&&r._audioTrack,this._p2pChannel.muteRemote(r,e),KH.info("[".concat(this._clientId,"] remote user ").concat(t," unpublished ").concat(e)),void this.safeEmit(wG.USER_UNPUBLISHED,r,e)):void 0})),SU(this,"_handleMuteStream",((e,t,n)=>{if(AH("BLOCK_LOCAL_CLIENT")&&iW(e,this.channelName))return;KH.debug("[".concat(this._clientId,"] receive mute message"),e,t,n);const r=this._users.find((t=>t.uid===e));if(!r)return void KH.warning("[".concat(this._clientId,"] can not find remote user, ignore mute event, uid: ").concat(e));const i="audio"===t?r.hasAudio:r.hasVideo;if("audio"===t){r._trust_audio_mute_state_=!0;const t=r._audio_muted_;if(r._audio_muted_=n,r._audio_muted_===t)return;{const t=r._audio_muted_?"mute-audio":"unmute-audio";KH.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(e,", msg: ").concat(t)),this.safeEmit(wG.USER_INFO_UPDATED,e,t)}}else{r._trust_video_mute_state_=!0;const t=r._video_muted_;if(r._video_muted_=n,r._video_muted_===t)return;{const t=r._video_muted_?"mute-video":"unmute-video";KH.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(e,", msg: ").concat(t)),this.safeEmit(wG.USER_INFO_UPDATED,e,t)}}const o="audio"===t?r.hasAudio:r.hasVideo;if(i!==o){if(!i&&o)return("audio"===t?r._audioSSRC:r._videoSSRC)?(KH.info("[".concat(this._clientId,"] remote user ").concat(e," published ").concat(t)),void this.safeEmit(wG.USER_PUBLISHED,r,t)):void KH.warning("[".concat(this._clientId,"] remote user ").concat(e," receive ").concat(t," unmute message  before add stream message, ").concat(t," SSRC doesn't exist yet."));"video"===t&&r._videoTrack&&!r._video_pre_subscribed&&r._videoTrack._destroy(),"audio"===t&&r._audioTrack,this._p2pChannel.muteRemote(r,t),KH.info("[".concat(this._clientId,"] remote user ").concat(e," unpublished ").concat(t)),this.safeEmit(wG.USER_UNPUBLISHED,r,t)}})),SU(this,"_handleP2PLost",(async e=>{KH.debug("[".concat(this._clientId,"] receive p2p lost"),e),parseInt(e.p2pid,10)===this.store.p2pId?await this._p2pChannel.requestReconnect():KH.warning("[".concat(this._clientId,"] P2PLost stream not found"),e)})),SU(this,"_handleTokenWillExpire",(()=>{KH.debug("[".concat(this._clientId,"] received message onTokenPrivilegeWillExpire")),this.safeEmit(wG.ON_TOKEN_PRIVILEGE_WILL_EXPIRE)})),SU(this,"_handleBeforeUnload",(e=>{"beforeunload"===e.type&&void 0!==e.returnValue&&""!==e.returnValue||(this.leave(),KH.info("[".concat(this._clientId,"] auto leave onbeforeunload or pagehide")))})),SU(this,"_handleUpdateNetworkQuality",(()=>{if("normal"===this._networkQualitySensitivity)return;if(navigator&&void 0!==navigator.onLine&&!navigator.onLine)return void this.safeEmit(wG.NETWORK_QUALITY,{downlinkNetworkQuality:6,uplinkNetworkQuality:6});const e={downlinkNetworkQuality:0,uplinkNetworkQuality:0};e.uplinkNetworkQuality=this._p2pChannel.getUplinkNetworkQuality(),e.downlinkNetworkQuality=this._p2pChannel.getDownlinkNetworkQuality(),this.safeEmit(wG.NETWORK_QUALITY,e)})),SU(this,"_handleP2PAddAudioOrVideoStream",((e,t,n,r)=>{const i=this._users.find((e=>e.uid===t));if(!i)return void KH.error("[".concat(this._clientId,"] can not find target user!(on_add_stream)"));KH.debug("[".concat(this._clientId,"] stream added with uid ").concat(t,", type ").concat(e)),this.store.subscribe(i.uid,e,void 0,void 0,void 0,Date.now());const o="audio"===e?i.hasAudio:i.hasVideo;"audio"===e?i._trust_audio_stream_added_state_=!0:i._trust_video_stream_added_state_=!0,"audio"===e?(i._audio_added_=!0,void 0!==n&&(i._audioSSRC=n),void 0!==r&&(i._audioMid=r)):(i._video_added_=!0,void 0!==n&&(i._videoSSRC=n),void 0!==r&&(i._videoMid=r)),("audio"===e?i.hasAudio:i.hasVideo)&&!o&&(KH.info("[".concat(this._clientId,"] remote user ").concat(i.uid," published ").concat(e)),this.safeEmit(wG.USER_PUBLISHED,i,e)),this._p2pChannel.hasPendingRemoteMedia(i,e)&&(KH.debug("[".concat(this._clientId,"] resubscribe ").concat(e," for user ").concat(i.uid," after reconnect.")),this._subscribe(i,e,!0).catch((e=>{KH.error("[".concat(this._clientId,"] resubscribe error"),e.toString())})))})),this._config=e,this._clientId=XG(5,"client-"),this.store=new NH(e.codec,e.audioCodec,e.mode,this._clientId),this.store.clientCreated(),e.proxyServer&&this.setProxyServer(e.proxyServer,!0),e.turnServer&&this.setTurnServer(e.turnServer,!0),KH.info("[".concat(this._clientId,"] Initializing AgoraRTC client v").concat(vH," build: ").concat(CH,", mode: ").concat(this.mode,", codec: ").concat(this.codec)),e.clientRoleOptions)try{CG(e.clientRoleOptions),t=Object.assign({},e.clientRoleOptions)}catch(e){KH.warning("[".concat(this._clientId,"] ").concat(e.toString()))}this._statsCollector=new G1(this.store),this._statsCollector.onStatsException=(e,t,n)=>{KH.debug("[".concat(this._clientId,"] receive exception msg, code: ").concat(e,", msg: ").concat(t,", uid: ").concat(n)),this.safeEmit(wG.EXCEPTION,{code:e,msg:t,uid:n})},this._statsCollector.onUploadPublishDuration=(e,t,n,r)=>{const i=this._users.find((t=>t.uid===e));i&&ZH.peerPublishStatus(this._sessionId,{subscribeElapse:r,audioPublishDuration:t,videoPublishDuration:n,peer:i._uintid})},this.store.useP2P="p2p"===e.mode,this._gateway=new MZ(this.store,{clientId:this._clientId,mode:this.mode,codec:this.codec,websocketRetryConfig:e.websocketRetryConfig||lH,httpRetryConfig:e.httpRetryConfig||lH,forceWaitGatewayResponse:void 0===e.forceWaitGatewayResponse||e.forceWaitGatewayResponse,statsCollector:this._statsCollector,role:e.role,clientRoleOptions:t}),this._configDistribute=new m0,this.store.useP2P?(this._p2pChannel=new V1(this.store,this._statsCollector),this._handleP2PEvents()):this._p2pChannel=new R2(this.store,this._statsCollector),this._handleP2PChannelEvents(),this._handleGatewayEvents(),this._handleGatewaySignalEvents()}async joinMeta(e,t,n,r,i){let o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],s=arguments.length>6&&void 0!==arguments[6]&&arguments[6];IH("JOIN_GATEWAY_USE_443PORT_ONLY",o),IH("JOIN_GATEWAY_USE_DUAL_DOMAIN",s);const a=this._gateway.signal.websocket;return a instanceof mz&&(a.use443PortOnly=o,a.tryDoubleDomain=s),async function(e,t,n){fB.get(e)||fB.set(e,[]),mB.get(e)||mB.set(e,t),gB.get(e)||gB.set(e,0);const r=fB.get(e),i=mB.get(e);if(!r||!i)throw new Error("concurrent: deferQueue or maxConcurrency is null");if(gB.get(e)===i){const e=pB();r.push(e),await e.promise}gB.set(e,gB.get(e)+1);for(var o=arguments.length,s=new Array(o>3?o-3:0),a=3;a<o;a++)s[a-3]=arguments[a];const c=await n(...s);return gB.set(e,gB.get(e)-1),gB.get(e)===i-1&&r.length>0&&(r[0].resolve(),r.shift()),0===gB.get(e)&&(fB.set(e,[]),mB.set(e,0),gB.set(e,0)),c}("client.join",AH("JOIN_MAX_CONCURRENCY"),this.join.bind(this),e,t,n,r,i)}async join(e,t,n,r,i){const o=++this._numberOfJoinCount;this.store.joinStart(),r&&(this.store.uid=r);const s="HTTPS"===(fH||fH||(fH=(window.location.protocol.split(":")[0]||"").toUpperCase(),fH)),a=yH()?window.isSecureContext:"Browser Not Support";if(!yH()&&!s||!window.isSecureContext){const e="The website must be running in a secure context (About secure context: https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts ), otherwise the media collection will be restricted by the browser";KH.warning(e)}"DISCONNECTED"===this.connectionState&&(this.store.avoidJoinStart=Math.round(Date.now()),KH.debug("[".concat(this._clientId,"] set avoidJoinStart to ").concat(this.store.avoidJoinStart))),ZH.setAppId(e);try{if(!n&&null!==n)throw new eW(ZB.INVALID_PARAMS,"Invalid token: ".concat(n,". If you don not use token, set it to null"));n&&oG(n,"token",1,2047),oG(e,"appid",1,2047),dK(t),r&&lK(r),i&&oG(i,"optionalInfo",1,2047)}catch(i){throw ZH.reportApiInvoke(QG(),{name:EG.JOIN,options:[e,t,n,r],states:{isHttps:s,isSecureContext:a},tag:yG.TRACER}).onError(i),i}if(this._leaveMutex.isLocked&&(KH.debug("[".concat(this._clientId,"] join: waiting leave operation")),(await this._leaveMutex.lock())(),KH.debug("[".concat(this._clientId,"] join: continue"))),this._joinAndNotLeaveYet=!0,"DISCONNECTED"!==this.connectionState){const i=new eW(ZB.INVALID_OPERATION,"[".concat(this._clientId,"] Client already in connecting/connected state"));throw ZH.reportApiInvoke(QG(),{name:EG.JOIN,options:[e,t,n,r],states:{isHttps:s,isSecureContext:a},tag:yG.TRACER}).onError(i),i}this._gateway.state="CONNECTING";const c=await $2({appId:e,cname:t,uid:r,stringUid:"string"==typeof r?r:void 0,token:n||e,cloudProxyServer:this._cloudProxyServerMode});if(!this._joinAndNotLeaveYet)throw new eW(ZB.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"));const d=(null==c?void 0:c.sid)||QG();KH.info("[".concat(this._clientId,"] start join channel ").concat(t,", join number: ").concat(o)),this._sessionId||(this._sessionId=d,this.store.sessionId=this._sessionId);const l=ZH.reportApiInvoke(d,{name:EG.JOIN,options:[e,t,n,r],states:{isHttps:s,isSecureContext:a},tag:yG.TRACER}),h=I3(I3(I3({},this._rtmConfig),{},{clientId:this._clientId,appId:e,sid:this._sessionId,cname:t,uid:"string"!=typeof r?r:null,turnServer:this._turnServer,proxyServer:this._proxyServer,token:n||e,cloudProxyServer:this._cloudProxyServerMode,optionalInfo:i,license:this._license,useLocalAccessPoint:this._useLocalAccessPoint,preload:!!c},void 0!==this._remoteDefaultVideoStreamType&&{defaultVideoStream:this._remoteDefaultVideoStreamType}),{},{apRequestDetail:AH("AP_REQUEST_DETAIL")||void 0});if(this._useLocalAccessPoint&&(h.setLocalAPVersion=this._setLocalAPVersion),"string"==typeof r&&(h.stringUid=r,this._uintUid?(h.uid=this._uintUid,this._uintUid=void 0):h.uid=0),"none"!==this._encryptionMode&&this._encryptionSecret){if(h.aesmode=this._encryptionMode,h.aespassword=await(async e=>{const t=function(){const e=window.atob("MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDCMnXAHkKIGAM+x4N22gCI+Wyu\nSTM9ztkT3uYslTT2PuKmZfPzhH6kVdO7PTjGCOZnAsyb3oTtWat0KcxQ4jxvqQV+\nHvYl3iI1Yd4vl2c3qRMJPLtRDfNxa2Mcxgq7e9aEUibzdd0st+OJAy3tOj/Y0aVy\nxQiYDz3vqa6bP29adwIDAQAB"),t=new Uint8Array(new ArrayBuffer(e.length));for(let n=0;n<e.length;n+=1)t[n]=e.charCodeAt(n);return t}(),n=await window.crypto.subtle.importKey("spki",t,{name:"RSA-OAEP",hash:"SHA-256"},!0,["encrypt"]),r=uG(e),i=await window.crypto.subtle.encrypt({name:"RSA-OAEP"},n,r);return function(e){let t="";for(let n=0;n<e.length;n+=1)t+=String.fromCharCode(e[n]);return window.btoa(t)}(new Uint8Array(i))})(this._encryptionSecret),!this._joinAndNotLeaveYet)throw new eW(ZB.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"));this._encryptionSalt&&(h.aessalt=this._encryptionSalt)}if(this._encryptDataStream&&("aes-128-gcm2"===this._encryptionMode||"aes-256-gcm2"===this._encryptionMode))if(this._encryptionSalt&&this._encryptionSecret)if(window.crypto.subtle){const e=new TextEncoder,t=AH("USE_PURE_ENCRYPTION_MASTER_KEY")?e.encode(h.appId+this._encryptionSecret+this._encryptionSecret):e.encode(h.appId+h.cname+this._encryptionSecret);this._encryptDataStreamIv=await async function(e,t,n){const r=await window.crypto.subtle.importKey("raw",t,"PBKDF2",!1,["deriveBits","deriveKey"]),i="aes-128-gcm2"===e?128:256,o=await window.crypto.subtle.deriveBits({name:"PBKDF2",iterations:1e3,hash:"SHA-256",salt:n},r,i+96);return new Uint8Array(o).subarray(i/8)}(this._encryptionMode,t,GG(this._encryptionSalt)),this._encryptDataStreamKey=await async function(e,t,n){const r=await window.crypto.subtle.importKey("raw",t,"PBKDF2",!1,["deriveBits","deriveKey"]),i="aes-128-gcm2"===e?128:256;return await window.crypto.subtle.deriveKey({name:"PBKDF2",iterations:1e3,hash:"SHA-256",salt:n},r,{name:"AES-GCM",length:i},!0,["encrypt","decrypt"])}(this._encryptionMode,t,GG(this._encryptionSalt))}else a?KH.warning("[".concat(this._clientId,"] encrypt datastream must be running in a secure context, fallback to plain data stream")):KH.warning("[".concat(this._clientId,"] current browser do not support WebCrypto ,fallback to plain data stream")),this._encryptDataStream=!1;else this._encryptDataStream=!1,KH.debug("[".concat(this._clientId,"] no salt / secret, cannot support encrypt data stream, fallback to plain data stream"));this._startSession(this._sessionId,{channel:t,appId:e,stringUid:h.stringUid});const u=this._sessionId;setTimeout((()=>{"CONNECTING"===this.connectionState&&u===this._sessionId&&ZH.joinChannelTimeout(this._sessionId,5)}),5e3);try{var p;let r;const i=h.cloudProxyServer;if(Fv(p=["proxy3","proxy4","proxy5"]).call(p,i)){const e=AH("PROXY_SERVER_TYPE3");Array.isArray(e)?h.proxyServer=e[0]:h.proxyServer=e}if(ZH.setProxyServer(h.proxyServer),KH.setProxyServer(h.proxyServer),this.store.requestAPStart(),c){if(KH.debug("[".concat(this._clientId,"] get serverInfo Success from Preload Cache ").concat(h.stringUid?", ".concat(h.stringUid," => ").concat(c.intUid):""," ")),h.stringUid&&!h.uid&&(h.uid=c.intUid),r={gatewayInfo:c.ap.gatewayInfo},AH("JOIN_WITH_FALLBACK_MEDIA_PROXY")&&"auto"===h.turnServer.mode)if(0===c.ap.proxyInfo.addresses.length)KH.warning("no edge services in ap response of proxy fallback, will not set proxy in iceServers");else{const e=(await Iz(c.ap.proxyInfo,c.ap.gatewayInfo.uid)).map((e=>({turnServerURL:e.address,tcpport:e.tcpport||TH.tcpport,udpport:e.udpport||TH.udpport,username:e.username||TH.username,password:e.password||TH.password,forceturn:!1,security:!0})));h.turnServer={mode:"manual",servers:e}}n5(c,h.stringUid)}else{if(h.stringUid&&!h.uid){let e;[e,r]=await LO.all([c0(h.stringUid,h,this._axiosCancelSource.token,this._config.httpRetryConfig||lH,this.store),a0(h,this._axiosCancelSource.token,this._config.httpRetryConfig||lH,!0,this.store)]),KH.debug("[".concat(this._clientId,"] getUserAccount Success ").concat(h.stringUid," => ").concat(e)),h.uid=e,r.gatewayInfo.uid=e,r.gatewayInfo.res.uid=e}else r=await a0(h,this._axiosCancelSource.token,this._config.httpRetryConfig||lH,!0,this.store);if(!this._joinAndNotLeaveYet)throw new eW(ZB.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"))}this.store.requestAPEnd(),setTimeout((()=>{this._configDistribute.startGetConfigDistribute(h,this._axiosCancelSource.token),this._configDistribute.on(PK.UPDATE_BITRATE_LIMIT,(e=>{this._p2pChannel.updateBitrateLimit(e)}))}),0),this._key=n||e;const o=r.gatewayInfo,s=h.uid?h.uid:o.uid;this._joinInfo=I3(I3({},h),{},{cid:o.cid,uid:s,vid:o.vid,apResponse:o.res,apGatewayAddress:o.apGatewayAddress,uni_lbs_ip:o.uni_lbs_ip,gatewayAddrs:o.gatewayAddrs}),this.store.intUid=s;const a=await this._joinGateway();if(!this._joinAndNotLeaveYet)throw new eW(ZB.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"));l.onSuccess(a),this._appId=e,this._channelName=h.cname,this._uid=a,this.store.uid=a,setTimeout((()=>{this._networkQualityInterval&&window.clearInterval(this._networkQualityInterval),this._networkQualityInterval=window.setInterval(this._handleUpdateNetworkQuality,2e3),window.addEventListener(AB()?"beforeunload":"pagehide",this._handleBeforeUnload),this._statsCollector.startUpdateStats()}),0);const d=h.stringUid?"string uid: ".concat(h.stringUid,",uid: ").concat(h.uid):"uid: ".concat(this._uid);return KH.info("[".concat(this._clientId,"] Joining channel success: channel: ").concat(t,",").concat(d)),setTimeout((()=>{KH.startUpload()}),5e3),this.store.joinEnd(),Fv(rW).call(rW,this)||rW.push(this),"disabled"===this._cloudProxyServerMode&&SJ().supportWebCrypto&&AH("ENABLE_PRELOAD")&&e5(this._joinInfo),a}catch(e){const t=Array.isArray(e)?e[0]:e;throw t&&t.code===ZB.OPERATION_ABORTED?KH.warning("[".concat(this._clientId,"] join number: ").concat(o,", Joining channel failed, rollback"),t):KH.error("[".concat(this._clientId,"] join number: ").concat(o,", Joining channel failed, rollback"),t),t.code!==ZB.OPERATION_ABORTED&&this._numberOfJoinCount===o&&(this._gateway.state="DISCONNECTED",this._reset()),l.onError(t),t}}_joinGateway(){if(!this._joinInfo||!this._key)throw new eW(ZB.INVALID_OPERATION);return this._gateway.join(this._joinInfo,this._key,!("disabled"!==this._joinInfo.cloudProxyServer||this._joinInfo.proxyServer||!AH("JOIN_WITH_FALLBACK_SIGNAL_PROXY")))}async leave(){KH.info("[".concat(this._clientId,"] Leaving channel")),window.removeEventListener(AB()?"beforeunload":"pagehide",this._handleBeforeUnload),this._reset(),function(e){const t=rW.indexOf(e);-1!==t&&rW.splice(t,1)}(this),this._statsCollector.stopUpdateStats();const e=await this._leaveMutex.lock();if("DISCONNECTED"===this.connectionState)return KH.info("[".concat(this._clientId,"] Leaving channel repeated, success")),void e();await this._gateway.leave("CONNECTED"!==this.connectionState),KH.info("[".concat(this._clientId,"] Leaving channel success")),this._joinAndNotLeaveYet=!1,this.store.resetJoinChannelServiceRecords(),e()}async publish(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!Array.isArray(e)){if(!(e instanceof fX))return this._publishDataChannel(e);e=[e]}if(0===e.length)throw new eW(ZB.INVALID_PARAMS,"param list is empty");const n=e;if("audience"===this._gateway.role)throw new eW(ZB.INVALID_OPERATION,"audience can not publish stream");for(const e of n){if(!(e instanceof fX))throw new eW(ZB.INVALID_PARAMS,"parameter is not local track");if(!e._enabled&&t)throw new eW(ZB.TRACK_IS_DISABLED,"can not publish a disabled track: ".concat(e.getTrackId()))}KH.info("[".concat(this._clientId,"] Publishing tracks, id ").concat(n.map((e=>"".concat(e.getTrackId()," ")))));const r=await this._publishMutex.lock();await this._configDistribute.awaitConfigDistributeComplete(),t&&n.forEach((e=>{const t=this._configDistribute.getBitrateLimit();e instanceof O$&&t&&e.setBitrateLimit(t.uplink)}));try{await this._publishHighStream(n),KH.info("[".concat(this._clientId,"] Publish success, id ").concat(n.map((e=>"".concat(e.getTrackId()," ")))))}catch(e){throw KH.error("[".concat(this._clientId,"] publish error"),e.toString()),e}finally{r()}}async _publishDataChannel(e){rG(e.id,"id",0,65535,!0),tG(e.ordered,"ordered"),oG(e.metadata,"metadata",0,512),KH.info("[".concat(this._clientId,"] Publishing datachannels, id ").concat(e.id));const t=await this._publishMutex.lock();try{if(-1!==this._p2pChannel.getAllDataChannels().findIndex((t=>t.id===e.id)))throw new eW(ZB.INVALID_PARAMS,"Invalid id: ".concat(e.id,". If you want to republish the datachannel, unpublish first"));if(!this._joinInfo||void 0===this._uid)throw new eW(ZB.INVALID_OPERATION,"Can't publish datachannel, haven't joined yet!");if("CONNECTED"!==this.connectionState&&"RECONNECTING"!==this.connectionState)throw new eW(ZB.INVALID_OPERATION,"can not publish datachannel in ".concat(this.connectionState," state"));if("auto"===this._turnServer.mode&&AH("FORCE_TURN")&&!AH("TURN_ENABLE_TCP")&&!AH("TURN_ENABLE_UDP"))throw new eW(ZB.UNEXPECTED_ERROR,"force TURN With No TURN Configuration");const t=function(e){return O2(e,!1)}(e),n=await this._p2pChannel.publishDataChannel([t]);if(n.length>0){if("number"!=typeof t._originDataChannelId)throw KH.error("[".concat(this._clientId,"] can not publish with mediaType datachannel, cannot get RTCDatachannel id")),new eW(ZB.CREATE_DATACHANNEL_ERROR);try{await LO.all(n.map((e=>this._uid&&this._gateway.publishDataChannel(this._uid,e,!0)))),await t._waitTillOpen()}catch(e){if(e.code!==ZB.DISCONNECT_P2P)throw e}}return KH.info("[".concat(this._clientId,"] Publish dataChannels success, id ").concat(t.id)),t}catch(e){throw KH.error("[".concat(this._clientId,"] publish datachannels error"),e.toString()),e}finally{t()}}async unpublish(e){if(!this._joinInfo||void 0===this._uid)throw new eW(ZB.INVALID_OPERATION,"Can't unpublish stream, haven't joined yet!");let t=[];if(e)if(Array.isArray(e))t=e;else{if(!(e instanceof fX))return this._unpublishDataChannel([e]);t=[e]}else this.store.useP2P||await this._unpublishDataChannel(),t=this._p2pChannel.getAllTracks(!0);KH.info("[".concat(this._clientId,"] Unpublish tracks, tracks ").concat(t.map((e=>"".concat(e.getTrackId()," ")))," "));const n=await this._publishMutex.lock();try{if(this._p2pChannel instanceof V1){const e=await this._p2pChannel.unpublish(t);e&&await this._gateway.sendExtensionMessage(JK.UNPUBLISH,{unpubMsg:e},!0)}else{const e=await this._p2pChannel.unpublish(t);e&&await this._gateway.unpublish(e,this._uid),KH.info("[".concat(this._clientId,"] Unpublish success,tracks ").concat(t.map((e=>"".concat(e.getTrackId())))))}}catch(e){throw KH.error("[".concat(this._clientId,"] unpublish error"),e.toString()),e}finally{n&&n()}}async _unpublishDataChannel(e){void 0!==e&&0!==e.length||(e=this._p2pChannel.getAllDataChannels()),KH.info("[".concat(this._clientId,"] Unpublish datachannels, datachannels ").concat(e.map((e=>"".concat(e.id," ")))," "));const t=await this._publishMutex.lock();try{const t=await this._p2pChannel.unpublishDataChannel(e);t&&await this._gateway.unpublishDataChannel(t),KH.info("[".concat(this._clientId,"] Unpublish dataChannel success,dataChannel ").concat(e.map((e=>"".concat(e.id)))))}catch(e){throw KH.error("[".concat(this._clientId,"] unpublish dataChannel error"),e.toString()),e}finally{t&&t()}}async subscribe(e,t,n){if(!(e instanceof y1)){const t=this.remoteUsers.find((t=>t.uid===e));if(!t)throw new eW(ZB.INVALID_REMOTE_USER,"user is not in the channel");e=t}return"datachannel"===t?this._subscribeDataChannel(e,n):this._subscribe(e,t)}async presubscribe(e,t){if(nG(t,"mediaType",["audio","video"]),this._p2pChannel instanceof V1)throw new eW(ZB.INVALID_OPERATION,"can't presub at p2p mode");if(!this._joinInfo)throw new eW(ZB.INVALID_OPERATION,"can't presub when not join");if("CONNECTED"!==this.connectionState&&"RECONNECTING"!==this.connectionState)throw new eW(ZB.INVALID_OPERATION,"can't presub in ".concat(this.connectionState," state"));const n=t===kK.AUDIO,r=t===kK.VIDEO,i=await this._subscribeMutex.lock();try{const{ssrcId:i,ortc:o,rtxSsrcId:s,cname:a,uint_id:c}=await this._gateway.presubscribe(e,t,!0);if(null==i)throw new eW(ZB.UNEXPECTED_RESPONSE,"no ssrc id");let d=this._users.find((t=>t.uid===e));d||(d=new y1(e,c||e),d._is_pre_created=!0,this._users.push(d)),a&&(d._cname=a),d._uintid||(d._uintid=c||e),n&&(d._audioSSRC=i,d._audio_pre_subscribed=!0,o&&(d._audioOrtc=o)),r&&(d._videoSSRC=i,d._video_pre_subscribed=!0,o&&(d._videoOrtc=o),null!=s&&(d._rtxSsrcId=s)),KH.info("[".concat(this._clientId,"] presub succeed ssrc: ").concat(i)),await this._p2pChannel.subscribe(d,t,i,s,o);const l=n?d._audioTrack:d._videoTrack;if(!l)throw new eW(ZB.UNEXPECTED_ERROR,"can not find remote track in user");return n&&(d._trust_audio_stream_added_state_=!0,d._audio_added_=!0),r&&(d._trust_video_stream_added_state_=!0,d._video_added_=!0),l}catch(t){throw KH.error("[".concat(this._clientId,"] presub user ").concat(e," error"),t),t}finally{i()}}async _subscribeDataChannel(e,t){var n;if(rG(t,"channelId",0,65535,!0),!this._joinInfo)throw new eW(ZB.INVALID_OPERATION,"Can't subscribe datachannel, not joined");if("CONNECTED"!==this.connectionState&&"RECONNECTING"!==this.connectionState)throw new eW(ZB.INVALID_OPERATION,"Can't subscribe datachannel in ".concat(this.connectionState," state"));const r=this._users.find((t=>t===e));if(!r)throw KH.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid,", this user is not in the channel")),new eW(ZB.INVALID_REMOTE_USER,"user is not in the channel");if(!e.hasAudio&&!e.hasVideo&&0===e._dataChannels.length)throw KH.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid,", user is not published")),new eW(ZB.INVALID_REMOTE_USER,"user is not published");const i=null===(n=e._dataChannels)||void 0===n?void 0:n.find((e=>e.id===t));if(!i)throw KH.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid," with mediaType datachannel, remote datachannel is not published")),new eW(ZB.REMOTE_USER_IS_NOT_PUBLISHED);const o=await this._subscribeMutex.lock();KH.info("[".concat(this._clientId,"] subscribe user ").concat(e.uid,", mediaType: datachannel"));try{const n=await this._p2pChannel.subscribeDataChannel(e,[i]);if(n&&Fv(n).call(n,i.id))try{var s;if("number"!=typeof i._originDataChannelId)throw KH.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid," with mediaType datachannel, cannot get RTCDatachannel")),new eW(ZB.CREATE_DATACHANNEL_ERROR);const t={id:i.id,datachannelId:i._originDataChannelId,ordered:i.ordered,maxRetransmits:i.maxRetransmits,metadata:null!==(s=i.metadata)&&void 0!==s?s:""};await this._gateway.subscribeDataChannel(e.uid,t,!0),await i._waitTillOpen()}catch(t){if((null==t?void 0:t.code)!==ZB.WS_ABORT)throw await this._p2pChannel.unsubscribeDataChannel(e,[i]),t;await this._p2pChannel.unsubscribeDataChannel(e,[i]),this._p2pChannel.setPendingRemoteDataChannel(e,i.id)}return KH.info("[".concat(this._clientId,"] subscribe success user ").concat(e.uid,", mediaType: datachannel")),i}finally{o()}}async _p2pSubscribe(e,t,n){if(nG(t,"mediaType",["audio","video"]),!this._joinInfo)throw new eW(ZB.INVALID_OPERATION,"Can't subscribe stream, not joined");if("CONNECTED"!==this.connectionState&&"RECONNECTING"!==this.connectionState)throw new eW(ZB.INVALID_OPERATION,"Can't subscribe stream in ".concat(this.connectionState," state"));const r=this._users.find((t=>t===e));if(!r){const t=new eW(ZB.INVALID_REMOTE_USER,"user is not in the channel");throw KH.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid,", this user is not in the channel")),t}if(!e.hasAudio&&!e.hasVideo){const t=new eW(ZB.INVALID_REMOTE_USER,"user is not published");throw KH.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid,", user is not published")),t}if(!n&&("audio"===t&&!e.hasAudio||"video"===t&&!e.hasVideo)){const n=new eW(ZB.REMOTE_USER_IS_NOT_PUBLISHED);throw KH.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid," with mediaType ").concat(t,", remote track is not published")),n}const i=await this._subscribeMutex.lock();KH.info("[".concat(this._clientId,"] subscribe user ").concat(e.uid,", mediaType: ").concat(t));try{if(await this._p2pChannel.hasRemoteMediaWithLock(e,t))await this._p2pChannel.unmuteRemote(e,t);else try{const n="audio"===t?e._audioSSRC:e._videoSSRC,r="audio"===t?e._audioMid:e._videoMid;this.store.subscribe(e.uid,t,Date.now()),this._p2pChannel instanceof V1&&await this._p2pChannel.subscribe(e,t,n,r)}catch(e){throw e}KH.info("[".concat(this._clientId,"] subscribe success user ").concat(e.uid,", mediaType: ").concat(t)),this._defaultStreamFallbackType&&this.setStreamFallbackOption(e.uid,this._defaultStreamFallbackType).catch((e=>{KH.warning("[".concat(this._clientId,"] auto set fallback failed"),e)}));const n="audio"===t?e._audioTrack:e._videoTrack;if(!n)throw new eW(ZB.UNEXPECTED_ERROR,"can not find remote track in user object");return n}catch(t){throw KH.error("[".concat(this._clientId,"] subscribe user ").concat(e.uid," error"),t),t}finally{i()}}async _subscribe(e,t,n){if(this._p2pChannel instanceof V1)return this._p2pSubscribe(e,t);if(nG(t,"mediaType",["audio","video"]),!this._joinInfo)throw new eW(ZB.INVALID_OPERATION,"Can't subscribe stream, not joined");if("CONNECTED"!==this.connectionState&&"RECONNECTING"!==this.connectionState)throw new eW(ZB.INVALID_OPERATION,"Can't subscribe stream in ".concat(this.connectionState," state"));const r=this._users.find((t=>t===e));if(!r){const t=new eW(ZB.INVALID_REMOTE_USER,"user is not in the channel");throw KH.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid,", this user is not in the channel")),t}if(!e.hasAudio&&!e.hasVideo){const t=new eW(ZB.INVALID_REMOTE_USER,"user is not published");throw KH.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid,", user is not published")),t}if(!(n||("audio"!==t||e.hasAudio&&void 0!==e._audioSSRC)&&("video"!==t||e.hasVideo&&void 0!==e._videoSSRC))){const n=new eW(ZB.REMOTE_USER_IS_NOT_PUBLISHED);throw KH.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid," with mediaType ").concat(t,", remote track is not published")),n}let i="audio"===t?e._audioSSRC:e._videoSSRC,o="audio"===t?e._audioOrtc:e._videoOrtc,s="video"===t?e._rtxSsrcId:void 0,a={stream_type:"audio"===t?kK.AUDIO:kK.VIDEO,ssrcId:i};const c=await this._subscribeMutex.lock();KH.info("[".concat(this._clientId,"] subscribe user ").concat(e.uid,", mediaType: ").concat(t));try{if(await this._p2pChannel.hasRemoteMediaWithLock(e,t))await this._p2pChannel.unmuteRemote(e,t);else try{const r="audio"===t?e._audioSSRC:e._videoSSRC;void 0!==r&&r!==i&&(i=r,o="audio"===t?e._audioOrtc:e._videoOrtc,s="video"===t?e._rtxSsrcId:void 0,a={stream_type:"audio"===t?kK.AUDIO:kK.VIDEO,ssrcId:i}),E0.markSubscribeStart(this.store.clientId,i),this.store.subscribe(e.uid,t,Date.now()),await this._p2pChannel.subscribe(e,t,i,s,o);try{this._p2pChannel.isPreSubScribe(i)||await this._gateway.subscribe(e.uid,a,!0)}catch(n){if((null==n?void 0:n.code)!==ZB.WS_ABORT)throw await this._p2pChannel.unsubscribe(e,t),n;await this._p2pChannel.unsubscribe(e,t,!0),this._p2pChannel.setPendingRemoteMedia(e,t)}this.store.subscribe(e.uid,t,void 0,Date.now()),this._p2pChannel.reportSubscribeEvent(!0,null,e,t)}catch(n){throw this._p2pChannel.reportSubscribeEvent(!1,null==n?void 0:n.code,e,t),n}KH.info("[".concat(this._clientId,"] subscribe success user ").concat(e.uid,", mediaType: ").concat(t)),this._defaultStreamFallbackType&&this.setStreamFallbackOption(e.uid,this._defaultStreamFallbackType).catch((e=>{KH.warning("[".concat(this._clientId,"] auto set fallback failed"),e)}));const r="audio"===t?e._audioTrack:e._videoTrack;if(!r)throw new eW(ZB.UNEXPECTED_ERROR,"can not find remote track in user object");return r}catch(t){throw KH.error("[".concat(this._clientId,"] subscribe user ").concat(e.uid," error"),t),t}finally{c()}}async massSubscribe(e){if(sG(e,"subscribeList"),!this._joinInfo)throw new eW(ZB.INVALID_OPERATION,"Can't subscribe stream, not joined");if("CONNECTED"!==this.connectionState&&"RECONNECTING"!==this.connectionState)throw new eW(ZB.INVALID_OPERATION,"Can't subscribe stream in ".concat(this.connectionState," state"));const t=Date.now(),n=new Map,r=await this._subscribeMutex.lock();KH.info("[".concat(this._clientId,"]start massSubscribe user ").concat(e.map((e=>{let{user:t,mediaType:n}=e;return"user: ".concat(null==t?void 0:t.uid,", mediaType: ").concat(n)})).join("; ")));const i=(e=[...e]).map((e=>{let{user:t,mediaType:n}=e;return{user:t,mediaType:n}})),o=await this._p2pChannel.globalLock();try{var s;for(let t=e.length-1;t>=0;t--){const r=e[t],{user:o,mediaType:s}=r;if(nG(s,"mediaType",["audio","video"]),!o){const e=new eW(ZB.INVALID_PARAMS,"user property does not exist in subscribeList item");throw KH.error("[".concat(this._clientId,"] user property does not exist in subscribeList item")),e}const a=this._users.find((e=>e===o));if(!a){const n=new eW(ZB.INVALID_REMOTE_USER,"user is not in the channel");KH.error("[".concat(this._clientId,"] can not massSubscribe ").concat(o.uid,", this user is not in the channel")),i[t].error=n,e.splice(t,1);continue}if("audio"===s&&(!o.hasAudio||void 0===o._audioSSRC)||"video"===s&&(!o.hasVideo||void 0===o._videoSSRC)){const n=new eW(ZB.REMOTE_USER_IS_NOT_PUBLISHED);KH.error("[".concat(this._clientId,"] can not subscribe ").concat(o.uid," with mediaType ").concat(s,", remote user is not published")),i[t].error=n,e.splice(t,1);continue}const c=IK.Video|IK.LwoVideo,d=n.get(o);if(d){if("video"===s?d&c:d&IK.Audio){e.splice(t,1),KH.warning("[".concat(this._clientId,"] repeat massSubscribe user:").concat(o.uid,", mediaType:").concat(s," twice"));continue}n.set(o,d|("video"===s?c:IK.Audio))}else n.set(o,"video"===s?c:IK.Audio)}for(let t=e.length-1;t>=0;t--){const r=e[t],{user:i,mediaType:o}=r,s=IK.Video|IK.LwoVideo;if(this._p2pChannel.hasRemoteMedia(i,o)){await this._p2pChannel.unmuteRemoteNoLock(i,o);const r=n.get(i);n.set(i,"video"===o?r^s:r^IK.Audio),e.splice(t,1)}}this.store.massSubscribe(e.map((e=>({userId:e.user.uid,type:e.mediaType}))),t);let r=nb(s=Array.from(n.entries())).call(s,((e,t)=>{let[n,r]=t;if(0===r)return e;const i={stream_id:n.uid,stream_type:r};return r&IK.Audio&&(i.audio_ssrc=n._audioSSRC),r&IK.Video&&(i.video_ssrc=n._videoSSRC),e.push(i),e}),[]);try{e.length>0&&await this._p2pChannel.massSubscribeNoLock(e.map((e=>{let{user:t,mediaType:n}=e;return{user:t,mediaType:n,ssrcId:n===kK.VIDEO?t._videoSSRC:t._audioSSRC,rtxSsrcId:n===kK.VIDEO?t._rtxSsrcId:void 0}})));const n=new Map;if(r=r.filter((e=>e.video_ssrc&&!this._p2pChannel.isPreSubScribe(e.video_ssrc)||e.audio_ssrc&&!this._p2pChannel.isPreSubScribe(e.audio_ssrc)||!e.video_ssrc&&!e.audio_ssrc)),r.length>0){const e=await this._gateway.subscribeAll(r,!0);((null==e?void 0:e.users)||[]).forEach((e=>{let{stream_id:t,video_error_code:r,audio_error_code:i,error_code:o}=e;(r||i||o)&&n.set(t,{video_error_code:r,audio_error_code:i,error_code:o})}))}if(Array.from(n.entries()).length>0){const e=[];Array.from(n.entries()).forEach((t=>{let[n,r]=t;const i=this.remoteUsers.find((e=>e.uid===n));if(i){let t;r.error_code||r.video_error_code&&r.audio_error_code?t=void 0:r.video_error_code?t=kK.VIDEO:r.audio_error_code&&(t=kK.AUDIO),e.push({user:i,mediaType:t})}})),e.length>0&&await this._p2pChannel.massUnsubscribeNoLock(e)}for(const e of i){const t=n.get(e.user.uid);if(t){const n=t.error_code||"audio"===e.mediaType&&t.audio_error_code||"video"===e.mediaType&&t.video_error_code;if(n){const t=nz(n);KH.error("user:".concat(e.user.uid," mediaType:").concat(e.mediaType," has massSubscribe error ").concat(t.desc)),e.error=new eW(ZB.SUBSCRIBE_FAILED,"code ".concat(n,": ").concat(t.desc))}}e.error||("video"===e.mediaType?e.track=e.user.videoTrack:e.track=e.user.audioTrack)}return this.store.massSubscribe(i.filter((e=>!e.error)).map((e=>({userId:e.user.uid,type:e.mediaType}))),void 0,Date.now()),i.forEach((e=>{var n;ZH.subscribe(this.store.sessionId,{succ:!!e.error,ec:(null===(n=e.error)||void 0===n?void 0:n.code)||null,video:e.mediaType===kK.VIDEO,audio:e.mediaType===kK.AUDIO,peerid:e.user.uid,subscribeRequestid:e.mediaType===kK.VIDEO?e.user._videoSSRC:e.user._audioSSRC,p2pid:this.store.p2pId,eventElapse:Math.floor(performance.now()-t),preSsrc:this._p2pChannel.isPreSubScribe(e.user._videoSSRC)},!0)})),KH.info("[".concat(this._clientId,"] massSubscribe success ").concat(e.map((e=>{let{user:t,mediaType:n}=e;return"user: ".concat(null==t?void 0:t.uid,", mediaType: ").concat(n)})).join("; "))),i}catch(t){throw await this._p2pChannel.massUnsubscribeNoLock(e),t}}finally{o(),r()}}async unsubscribe(e,t,n){if(!(e instanceof y1)){const t=this.remoteUsers.find((t=>t.uid===e));if(!t)throw new eW(ZB.INVALID_REMOTE_USER,"user is not in the channel");e=t}if(t||this.store.useP2P){if("datachannel"===t)return this._unsubscribeDataChannel(e,n)}else await this._unsubscribeDataChannel(e,n);if(t&&nG(t,"mediaType",["audio","video"]),!this._joinInfo)throw new eW(ZB.INVALID_OPERATION,"Can't unsubscribe stream, haven't joined yet!");const r=this._users.find((t=>t===e));if(!r){const t=new eW(ZB.INVALID_REMOTE_USER,"user is not in the channel");throw KH.error("[".concat(this._clientId,"] can not unsubscribe ").concat(e.uid,", user is not in the channel")),t}KH.info("[".concat(this._clientId,"] unsubscribe uid: ").concat(e.uid,", mediaType: ").concat(t));const i=await this._subscribeMutex.lock();try{if(this._p2pChannel instanceof V1)await this._p2pChannel.unsubscribe(e,t);else{const n=await this._p2pChannel.unsubscribe(e,t);n&&await this._gateway.unsubscribe(n,e.uid),t&&"audio"!==t||(e._audio_pre_subscribed=!1),t&&"video"!==t||(e._video_pre_subscribed=!1),e._is_pre_created&&kG(this._users,e),KH.info("[".concat(this._clientId,"] unsubscribe success uid: ").concat(e.uid,", mediaType: ").concat(t))}}catch(t){if(t.code===ZB.DISCONNECT_P2P)return void KH.warning("disconnecting p2p, abort unsubscribe request.");throw KH.error("[".concat(this._clientId,"] unsubscribe user ").concat(e.uid," error"),t.toString()),t}finally{i()}}async _unsubscribeDataChannel(e,t){if(t&&rG(t,"id",0,65535,!0),!this._joinInfo)throw new eW(ZB.INVALID_OPERATION,"Can't unsubscribe datachannel, haven't joined yet!");const n=this._users.find((t=>t===e));if(!n){const t=new eW(ZB.INVALID_REMOTE_USER,"user is not in the channel");throw KH.error("[".concat(this._clientId,"] can not unsubscribe ").concat(e.uid,", user is not in the channel")),t}let r;if("number"==typeof t){const n=e._dataChannels.find((e=>e.id===t));n&&(r=[n])}else r=e._dataChannels;if(void 0===r){const n=new eW(ZB.REMOTE_USER_IS_NOT_PUBLISHED);throw KH.error("[".concat(this._clientId,"] can not unsubscribe ").concat(e.uid," with channelId ").concat(t,", remote datachannel is not published")),n}KH.info("[".concat(this._clientId,"] unsubscribe uid: ").concat(e.uid,", mediaType: datachannel, ids: ").concat(r.map((e=>e.id))));try{const t=await this._p2pChannel.unsubscribeDataChannel(e,r);t&&await this._gateway.unsubscribeDataChannel(t,e.uid),KH.info("[".concat(this._clientId,"] unsubscribe datachannel success uid: ").concat(e.uid,", mediaType: datachannel, ids: ").concat(t))}catch(t){if(t.code===ZB.DISCONNECT_P2P)return void KH.warning("disconnecting p2p, abort unsubscribe request.");throw KH.error("[".concat(this._clientId,"] unsubscribe user ").concat(e.uid," error"),t.toString()),t}}async massUnsubscribe(e){if(sG(e,"unsubscribeList"),!this._joinInfo)throw new eW(ZB.INVALID_OPERATION,"Can't unsubscribeAll stream, haven't joined yet!");KH.info("[".concat(this._clientId,"] start massUnsubscribe ").concat(e.map((e=>{let{user:t,mediaType:n}=e;return"user: ".concat(null==t?void 0:t.uid,", mediaType: ").concat(n,";")})).join())),e=[...e];const t=new Map;for(let n=e.length-1;n>=0;n--){const{user:r,mediaType:i}=e[n];if(!r){const e=new eW(ZB.INVALID_PARAMS,"user property does not exist in unsubscribeList item");throw KH.error("[".concat(this._clientId,"] user property does not exist in unsubscribeList item")),e}nG(i,"mediaType",["video","audio",void 0]);const o=this._users.find((e=>e===r));if(!o){KH.warning("[".concat(this._clientId,"] can not unsubscribe ").concat(r.uid,", user is not in the channel")),e.splice(n,1);continue}const s=IK.Video|IK.LwoVideo;if(t.has(r)){const o=t.get(r);let a;switch(i){case"video":a=o&s;break;case"audio":a=o&IK.Audio;break;default:a=o&(IK.Audio|s)}if(a){KH.warning("[".concat(this._clientId,"] repeat massUnsubscribe user:").concat(r.uid,",mediaType:").concat(i," twice.")),e.splice(n,1);continue}i?"audio"===i?t.set(r,o|IK.Audio):"video"===i&&t.set(r,o|s):t.set(r,o|IK.Audio|s)}else i?"audio"===i?t.set(r,IK.Audio):"video"===i&&t.set(r,s):t.set(r,IK.Audio|s)}try{const t=await this._p2pChannel.massUnsubscribe(e);t&&await this._gateway.massUnsubscribe(t),KH.info("[".concat(this._clientId,"] massUnsubscribe success ").concat(e.map((e=>{let{user:t,mediaType:n}=e;return"user: ".concat(null==t?void 0:t.uid,", mediaType: ").concat(n,";")})).join()))}catch(e){if(e.code===ZB.DISCONNECT_P2P)return void KH.warning("[".concat(this._clientId,"] disconnecting p2p, abort unsubscribe request."));throw KH.error("[".concat(this._clientId,"] massUnsubscribe error"),e.toString()),e}}async setLowStreamParameter(e){!function(e){if(!e)throw new eG(ZB.INVALID_PARAMS);aG(e.width)||iG(e.width,"streamParameter.width"),aG(e.height)||iG(e.height,"streamParameter.height"),aG(e.framerate)||iG(e.framerate,"streamParameter.framerate"),aG(e.bitrate)||rG(e.bitrate,"streamParameter.bitrate")}(e),(!e.width&&e.height||e.width&&!e.height)&&KH.warning("[".concat(this._clientId,"] The width and height parameters take effect only when both are set")),KH.info("[".concat(this._clientId,"] set low stream parameter to"),JSON.stringify(e));const t=this._configDistribute.getLowStreamConfigDistribute();if(t&&t.bitrate&&e.bitrate&&t.bitrate<e.bitrate&&(e.bitrate=t.bitrate),this._lowStreamParameter=e,this._isDualStreamEnabled)return this._p2pChannel.updateVideoStreamParameter(e,VK.LocalVideoLowTrack)}async enableDualStream(){if(!SJ().supportDualStream)throw ZH.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!0,succ:!1}),new eW(ZB.NOT_SUPPORTED,"Your browser is not support dual stream");if(this._isDualStreamEnabled)throw new eW(ZB.INVALID_OPERATION,"Dual stream is already enabled");if(this._p2pChannel.canPublishLowStream())try{await this._publishLowStream()}catch(e){throw ZH.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!0,succ:!1}),e}this._isDualStreamEnabled=!0,ZH.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!0,succ:!0}),KH.info("[".concat(this._clientId,"] enable dual stream"))}async disableDualStream(){if(this._isDualStreamEnabled){if(!this._joinInfo)throw new eW(ZB.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if(this._p2pChannel.getLocalMedia(VK.LocalVideoLowTrack))try{const e=await this._p2pChannel.unpublishLowStream();e&&await this._gateway.unpublish(e,this._joinInfo.stringUid||this._joinInfo.uid)}catch(e){throw ZH.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!1,succ:!1}),e}this._isDualStreamEnabled=!1,ZH.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!1,succ:!0}),KH.info("[".concat(this._clientId,"] disable dual stream"))}}async setClientRole(e,t){if(function(e){nG(e,"role",["audience","host"])}(e),t&&CG(t),"rtc"===this.mode||"p2p"===this.mode)throw KH.warning("[".concat(this._clientId,"]").concat(this.mode," mode can not use setClientRole")),new eW(ZB.INVALID_OPERATION,"".concat(this.mode," mode can not use setClientRole"));if(t&&t.level&&"host"===e)throw new eW(ZB.INVALID_OPERATION,"host mode can not set audience latency level");if("audience"===e&&this._p2pChannel.hasLocalMedia())throw new eW(ZB.INVALID_OPERATION,"can not set client role to audience when publishing stream");await this._gateway.setClientRole(e,t),this._config.role=e,KH.info("[".concat(this._clientId,"] set client role to ").concat(e,", level: ").concat(t&&t.level))}getRemoteInboundOffset(){var e;const t=null===(e=this._p2pChannel.getStats())||void 0===e?void 0:e.audioSend[0];if(!t||!t.timestamp)return 0;const n=t.timestamp-Date.now();return Math.abs(n)>1e3+t.rttMs+100?this.ntpAlignErrorCount+=1:this.ntpAlignErrorCount=0,this.ntpAlignErrorCount>=3?n:0}getNtpWallTimeInMs(){return"visible"===document.visibilityState&&(this.remoteInboundOffset=this.getRemoteInboundOffset()),this.remoteInboundOffset+Date.now()+this._gateway.ntpOffset}setProxyServer(e,t){if(oG(e,"proxyServer"),!t){if("DISCONNECTED"!==this.connectionState)throw new eW(ZB.INVALID_OPERATION,"Set proxy server before join channel");if("disabled"!==this._cloudProxyServerMode||this._useLocalAccessPoint)throw new eW(ZB.INVALID_OPERATION,"You have already set the proxy")}this._proxyServer=e,ZH.setProxyServer(this._proxyServer),KH.setProxyServer(this._proxyServer),KH.info("[".concat(this._clientId,"] Set proxy server ").concat(t?"by initialize call":""," success."))}setTurnServer(e,t){if(Array.isArray(e)||(e=[e]),!t){if("DISCONNECTED"!==this.connectionState)throw new eW(ZB.INVALID_OPERATION,"Set turn server before join channel");if("disabled"!==this._cloudProxyServerMode||this._useLocalAccessPoint)throw new eW(ZB.INVALID_OPERATION,"You have already set the proxy")}if(TG(e))return this._turnServer={servers:e,mode:"original-manual"},void KH.info("[".concat(this._clientId,"] Set original turnserver ").concat(t?"by initialize call":""," success: ").concat(e.map((e=>e.urls)).join(","),"."));e.forEach((e=>RG(e))),this._turnServer={servers:e,mode:"manual"},KH.info("[".concat(this._clientId,"] Set turnserver ").concat(t?"by initialize call":""," success."))}setLicense(e){if("DISCONNECTED"!==this.connectionState)throw new eW(ZB.INVALID_OPERATION,"you should set license before join channel");if(oG(e,"license",32,32),!/^[A-Za-z\d]+$/.test(e))throw new eW(ZB.INVALID_PARAMS,"license should only contains characters from A-Z a-z 0-9");this._license=e,KH.info("[".concat(this._clientId,"] set license success"),e)}startProxyServer(e){if("DISCONNECTED"!==this.connectionState)throw new eW(ZB.INVALID_OPERATION,"Start proxy server before join channel");if(this._proxyServer||"manual"===this._turnServer.mode||this._useLocalAccessPoint)throw new eW(ZB.INVALID_OPERATION,"You have already set the proxy");const t=[3,4,5];let n;switch(void 0===e&&(e=3),e){case 1:case 2:throw new eW(ZB.NOT_SUPPORTED,"proxy mode 1/2 has been deprecated and not supported.");case 3:n="proxy3";break;case 4:n="proxy4";break;case 5:n="proxy5";break;default:throw new eW(ZB.INVALID_PARAMS,"proxy server mode must be ".concat(t.join("|")))}this._cloudProxyServerMode=n,this.store.cloudProxyServerMode=n,KH.info("[".concat(this._clientId,"] set cloud proxy server mode to"),this._cloudProxyServerMode)}stopProxyServer(){if("DISCONNECTED"!==this.connectionState)throw new eW(ZB.INVALID_OPERATION,"Stop proxy server after leave channel");ZH.setProxyServer(),KH.setProxyServer(),this._cloudProxyServerMode="disabled",this.store.cloudProxyServerMode="disabled",KH.info("[".concat(this._clientId,"] set cloud proxy server mode to"),this._cloudProxyServerMode),this._proxyServer=void 0,this._turnServer={mode:"auto",servers:[]}}setLocalAccessPointsV2(e){if(!e.accessPoints)throw new eW(ZB.INVALID_PARAMS,"accessPoints is required.");sG(e.accessPoints.serverList,"accessPoints.serverList"),oG(e.accessPoints.domain,"accessPoints.domain");const t=(e,t)=>{rG(e,t,0,65535,!0)};let n=443;if(e.accessPoints.port&&(t(e.accessPoints.port,"accessPoints.port"),n=e.accessPoints.port),this._proxyServer||"disabled"!==this._cloudProxyServerMode)throw new eW(ZB.INVALID_OPERATION,"set local access point failed, You have already set the cloud proxy");AH("CLOSE_AFB_FOR_LOCAL_AP")&&(IH("JOIN_WITH_FALLBACK_SIGNAL_PROXY",!1),IH("JOIN_WITH_FALLBACK_MEDIA_PROXY",!1));const r=/^((\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.){3}(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/,i=e.accessPoints.domain,o=e.accessPoints.serverList.map((e=>r.test(e)?"".concat(e.replace(/\./g,"-"),".").concat(i):e)),s=o.map((e=>"".concat(e,":").concat(n)));this._useLocalAccessPoint=!0,this._setLocalAPVersion=2,IH("WEBCS_DOMAIN",s),IH("WEBCS_DOMAIN_BACKUP_LIST",s),IH("GATEWAY_DOMAINS",[i]),e.report&&e.report.hostname&&Array.isArray(e.report.hostname)&&e.report.hostname.length?(sG(e.report.hostname,"report.hostname"),IH("EVENT_REPORT_DOMAIN",e.report.hostname[0]),IH("EVENT_REPORT_BACKUP_DOMAIN",e.report.hostname[1]||e.report.hostname[0])):(IH("EVENT_REPORT_DOMAIN",o[0]),IH("EVENT_REPORT_BACKUP_DOMAIN",o[1]||o[0]));let a=6443;e.report&&e.report.port&&(t(e.report.port,"report.port"),a=e.report.port),IH("STATS_COLLECTOR_PORT",a),e.report?IH("ENABLE_EVENT_REPORT",!0):IH("ENABLE_EVENT_REPORT",!1);let c="";e.log&&e.log.hostname&&Array.isArray(e.log.hostname)&&e.log.hostname.length?(sG(e.log.hostname,"log.hostname"),c=e.log.hostname[0]):c=o[0];let d=6444;e.log&&e.log.port&&(t(e.log.port,"log.port"),d=e.log.port),IH("LOG_UPLOAD_SERVER","".concat(c,":").concat(d));let l=[];e.cds&&e.cds.hostname&&Array.isArray(e.cds.hostname)&&e.cds.hostname.length?(sG(e.cds.hostname,"cds.hostname"),l=e.cds.hostname):l=o;let h=443;e.cds&&e.cds.port&&(t(e.cds.port,"cds.port"),h=e.cds.port),IH("CDS_AP",l.map((e=>"".concat(e,":").concat(h)))),e.cds?IH("ENABLE_CONFIG_DISTRIBUTE",!0):IH("ENABLE_CONFIG_DISTRIBUTE",!1),KH.info("set local access point v2 success")}setLocalAccessPoints(e,t){if(sG(e,"serverList"),oG(t,"domain"),this._proxyServer||"disabled"!==this._cloudProxyServerMode)throw new eW(ZB.INVALID_OPERATION,"set local access point failed, You have already set the cloud proxy");const n=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/;e=e.map((e=>n.test(e)?"".concat(e.replace(/\./g,"-"),".").concat(t):e)),this._useLocalAccessPoint=!0,this._setLocalAPVersion=1,IH("WEBCS_DOMAIN",e),IH("WEBCS_DOMAIN_BACKUP_LIST",e),IH("GATEWAY_DOMAINS",[t]),IH("EVENT_REPORT_DOMAIN",e[0]),IH("EVENT_REPORT_BACKUP_DOMAIN",e[1]||e[0]),IH("LOG_UPLOAD_SERVER","".concat(e[0],":6444")),KH.info("[".concat(this._clientId,"] set local access point success"))}async setRemoteDefaultVideoStreamType(e){if(nG(e,"streamType",[0,1,4,5,6,7,8,9]),this._remoteDefaultVideoStreamType=e,this._joinInfo)try{await this._gateway.setDefaultRemoteVideoStreamType(e),this._joinInfo.defaultVideoStream=this._remoteDefaultVideoStreamType}catch(e){throw KH.error("[".concat(this._clientId,"] set default remote video stream type error"),e.toString()),e}else KH.debug("[".concat(this._clientId,"] haven't joined yet, cache remoteDefaultVideoStreamType ").concat(e))}async setRemoteVideoStreamType(e,t){nG(t,"streamType",[0,1,4,5,6,7,8,9]);try{await this._gateway.setRemoteVideoStreamType(e,t),setTimeout((()=>{const t=this._users.find((t=>t.uid===e));t&&t.videoTrack&&t.videoTrack.updateMediaStreamTrackResolution()}),2e3)}catch(e){throw KH.error("[".concat(this._clientId,"] set remote video stream type error"),e.toString()),e}KH.info("[".concat(this._clientId,"] set remote ").concat(e," video stream type to ").concat(t)),this._remoteStreamTypeCacheMap.set(e,t)}async setStreamFallbackOption(e,t){nG(t,"fallbackType",[0,1,2,3,4,5,6,7,8]);try{await this._gateway.setStreamFallbackOption(e,t)}catch(e){throw KH.error("[".concat(this._clientId,"] set stream fallback option"),e.toString()),e}KH.info("[".concat(this._clientId,"] set remote ").concat(e," stream fallback type to ").concat(t)),this._streamFallbackTypeCacheMap.set(e,t)}setEncryptionConfig(e,t,n,r){!function(e){nG(e,"encryptionMode",["aes-128-xts","aes-256-xts","aes-128-ecb","sm4-128-ecb","aes-128-gcm","aes-256-gcm","aes-128-gcm2","aes-256-gcm2","none"])}(e),oG(t,"secret");const i=["aes-128-gcm2","aes-256-gcm2"];if(Fv(i).call(i,e)){if(!n||!(n instanceof Uint8Array&&32===n.length))throw new eW(ZB.INVALID_PARAMS,"salt must be an Uint8Array and exactly equal to 32 bytes")}else if(n)throw new eW(ZB.INVALID_PARAMS,"current encrypt mode does not need salt");if(r){if(tG(r,"encryptDataStream"),!Fv(i).call(i,e))throw new eW(ZB.INVALID_PARAMS,"current encrypt mode does not support data stream");this._encryptDataStream=!0}new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*,.<>?/:;'\"|{}\\[\\]])(?=.{8,})").test(t)||KH.warning("The secret is not strong:\n      The secret must contain at least 1 lowercase alphabetical character,\n      The secret must contain at least 1 uppercase alphabetical character,\n      The secret must contain at least 1 numeric character,\n      The secret must contain at least one special character,\n      The secret must be eight characters or longer.\n      "),this._encryptionMode=e,this._encryptionSecret=t,n&&(this._encryptionSalt=HG(n))}async renewToken(e){if(oG(e,"token",1,2047),!this._key||!this._joinInfo)throw new eW(ZB.INVALID_OPERATION,"renewToken should not be called before user join");const t=this._key;this._key=e,this._joinInfo&&(this._joinInfo.token=e);const n=await this._renewTokenMutex.lock();try{if(AH("USE_NEW_TOKEN")){KH.debug("[".concat(this._clientId,"] start renew token with ticket from unilbs"));const t=await u0(this._joinInfo,this._axiosCancelSource.token,this._config.httpRetryConfig||lH);KH.debug("[".concat(this._clientId,"] get ticket from unilbs success")),await this._gateway.renewToken({token:e,ticket:t})}else KH.debug("[".concat(this._clientId,"] start renew token without ticket")),await this._gateway.renewToken({token:e});KH.debug("[".concat(this._clientId,"] renewToken success"))}catch(e){throw this._key=t,this._joinInfo.token=t,KH.error("[".concat(this._clientId,"] renewToken failed"),e.toString()),e}finally{n()}}enableAudioVolumeIndicator(){this._audioVolumeIndicationInterval?KH.warning("you have already enabled audio volume indicator!"):this._audioVolumeIndicationInterval=window.setInterval((()=>{const e=this._p2pChannel.getAudioLevels();this.safeEmit(wG.VOLUME_INDICATOR,e)}),AH("AUDIO_VOLUME_INDICATION_INTERVAL")||2e3)}getRTCStats(){const e=this._statsCollector.getRTCStats(),t=this._gateway.getInChannelInfo();return e.Duration=Math.round(t.duration/1e3),e}async startLiveStreaming(e,t){if(!t){if("h264"!==this.codec)throw new eW(ZB.LIVE_STREAMING_INVALID_RAW_STREAM,"raw streaming is only support h264");if(!this._p2pChannel.hasLocalMedia())throw new eW(ZB.LIVE_STREAMING_INVALID_RAW_STREAM,"can not find stream to raw streaming")}if(this._liveRawStreamingClient&&this._liveRawStreamingClient.hasUrl(e)||this._liveTranscodeStreamingClient&&this._liveTranscodeStreamingClient.hasUrl(e))throw new eW(ZB.LIVE_STREAMING_TASK_CONFLICT);const n=t?hK.TRANSCODE:hK.RAW;return this._createLiveStreamingClient(n).startLiveStreamingTask(e,n)}setLiveTranscoding(e){return this._createLiveStreamingClient(hK.TRANSCODE).setTranscodingConfig(e)}async stopLiveStreaming(e){const t=[this._liveRawStreamingClient,this._liveTranscodeStreamingClient].filter((t=>t&&t.hasUrl(e)));if(!t.length)throw new eW(ZB.INVALID_PARAMS,"can not find live streaming url to stop");await LO.all(t.map((t=>t&&t.stopLiveStreamingTask(e))))}async startChannelMediaRelay(e){W1(e);const t=this._createChannelMediaRelayClient();await t.startChannelMediaRelay(e)}async updateChannelMediaRelay(e){W1(e);const t=this._createChannelMediaRelayClient();await t.updateChannelMediaRelay(e)}async stopChannelMediaRelay(){const e=this._createChannelMediaRelayClient();await e.stopChannelMediaRelay(),this._statsCollector.onStatsChanged&&(this._statsCollector.onStatsChanged=void 0)}async sendStreamMessage(e){var t;let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!this._joinInfo)throw new eW(ZB.INVALID_OPERATION,"can not send data stream, not joined");if(("string"==typeof e||e instanceof Uint8Array)&&(e={payload:e}),"string"==typeof e.payload){const t=new TextEncoder;e.payload=t.encode(e.payload)}let r=!1;if(this._encryptDataStream&&this._encryptDataStreamIv&&this._encryptDataStreamKey&&window.crypto.subtle&&Fv(t=["aes-128-gcm2","aes-256-gcm2"]).call(t,this._encryptionMode)&&(r=!0,e.payload=await async function(e,t,n){var r;const i=nb(r=Array.from(n)).call(r,((e,t)=>e+t),0),o={serverTs:0,seq:LH++,length:n.length,checkSum:i},s=new Uint8Array(rH(i,2)),a=new ArrayBuffer(DH),c=new DataView(a);c.setUint32(0,o.serverTs),c.setUint16(4,o.seq),c.setUint16(6,o.length),c.setUint16(8,o.checkSum);const d=16-n.length%16;n=KG(n,new Uint8Array(d));const l=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:e,tagLength:128,additionalData:s},t,n);return KG(new Uint8Array(a),new Uint8Array(l))}(this._encryptDataStreamIv,this._encryptDataStreamKey,e.payload)),new Blob([e.payload]).size>1024)throw new eW(ZB.INVALID_PARAMS,r?"encrypted stream message out of range.":"stream message out of range.");return this._gateway.signal.request(iK.DATA_STREAM,{payload:HG(e.payload),syncWithAudio:e.syncWithAudio,sendTs:Date.now()-P2},!n)}sendMetadata(e){if(!this._joinInfo)throw new eW(ZB.INVALID_OPERATION,"can not send metadata, not joined");if(new Blob([e]).size>1024)throw new eW(ZB.METADATA_OUT_OF_RANGE);return this._gateway.signal.request(iK.SEND_METADATA,{session_id:this._joinInfo.sid,metadata:HG(e)})}async sendCustomReportMessage(e){if(Array.isArray(e)||(e=[e]),e.forEach(qH),!this._joinInfo)throw new eW(ZB.INVALID_OPERATION,"can not send custom report, not joined");await ZH.sendCustomReportMessage(this._joinInfo.sid,e)}getLocalAudioStats(){return this._statsCollector.getLocalAudioTrackStats()}getRemoteAudioStats(){return this._statsCollector.getRemoteAudioTrackStats()}getLocalVideoStats(){return this._statsCollector.getLocalVideoTrackStats()}getRemoteVideoStats(){return this._statsCollector.getRemoteVideoTrackStats()}getRemoteNetworkQuality(){return this._statsCollector.getRemoteNetworkQualityStats()}async pickSVCLayer(e,t){nG(t.spatialLayer,"spatialLayer",[0,1,2,3]),nG(t.temporalLayer,"temporalLayer",[0,1,2,3]);try{await this._gateway.pickSVCLayer(e,t)}catch(e){throw KH.error("[".concat(this._clientId,"] pick SVC layer failed"),e.toString()),e}}async setRTMConfig(e){const{apRTM:t=!1,rtmFlag:n}=e;if(tG(t,"apRTM"),rG(n,"rtmFlag",0),this._rtmConfig.apRTM=t,this._rtmConfig.rtmFlag=n,KH.debug("[".concat(this._clientId,"] setRTMconfig ").concat(JSON.stringify(e)," in ").concat(this.connectionState," state")),("CONNECTED"===this.connectionState||"RECONNECTING"===this.connectionState)&&this._joinInfo)return this._joinInfo.apRTM=t,this._joinInfo.rtmFlag=n,this._gateway.setRTM2Flag(n)}_reset(){if(KH.debug("[".concat(this._clientId,"] reset client")),this._axiosCancelSource.cancel(),this._axiosCancelSource=hB.CancelToken.source(),this._streamFallbackTypeCacheMap=new Map,this._remoteStreamTypeCacheMap=new Map,this._configDistribute.stopGetConfigDistribute(),this._joinInfo&&t5(this._joinInfo),this._joinInfo=void 0,this._proxyServer=void 0,this._defaultStreamFallbackType=void 0,this._sessionId&&ZH.removeSid(this._sessionId),this._sessionId=null,this.store.sessionId=null,this._statsCollector.reset(),this._key=void 0,this._appId=void 0,this._uid=void 0,this.store.uid=void 0,this._channelName=void 0,this._encryptionMode="none",this._encryptionSecret=null,this._encryptionSalt=null,this._encryptDataStreamKey=null,this._encryptDataStreamIv=null,this._pendingPublishedUsers=[],this._users.forEach((e=>{e._audioTrack&&e._audioTrack._destroy(),e._videoTrack&&e._videoTrack._destroy(),e._dataChannels&&(e._dataChannels.forEach((e=>e._close())),e._dataChannels.length=0)})),this._users=[],this._audioVolumeIndicationInterval&&(window.clearInterval(this._audioVolumeIndicationInterval),this._audioVolumeIndicationInterval=void 0),"fallback"===this._cloudProxyServerMode&&(this._cloudProxyServerMode="disabled",this.store.cloudProxyServerMode="disabled"),this._p2pChannel.reset(),this._publishMutex=new cH("client-publish"),this._subscribeMutex=new cH("client-subscribe"),this._networkQualityInterval&&(window.clearInterval(this._networkQualityInterval),this._networkQualityInterval=void 0),this._liveRawStreamingClient&&(this._liveRawStreamingClient.terminate(),this._liveRawStreamingClient.removeAllListeners(),this._liveRawStreamingClient=void 0),this._liveTranscodeStreamingClient&&(this._liveTranscodeStreamingClient.terminate(),this._liveTranscodeStreamingClient.removeAllListeners(),this._liveTranscodeStreamingClient=void 0),this._channelMediaRelayClient&&(this._channelMediaRelayClient.dispose(),this._channelMediaRelayClient=void 0),this._inspect)try{this._inspect.close(),this._inspect=void 0}catch(e){}if(this._moderation)try{this.setImageModeration(!1)}catch(e){}}_startSession(e,t){var n;const r=e||QG();e?KH.debug("[".concat(this._clientId,"] new Session ").concat(r)):KH.debug("[".concat(this._clientId,"] renewSession ").concat(this._sessionId," => ").concat(r));const i=e?"":this._sessionId||"";this._sessionId=r,this.store.sessionId=r,ZH.addSid(r);const o={lts:(new Date).getTime(),mode:this.mode,buildFormat:2,stringUid:(null==t?void 0:t.stringUid)||(null===(n=this._joinInfo)||void 0===n?void 0:n.stringUid),channelProfile:"live"===this.mode?1:0,channelMode:0,isABTestSuccess:Number(this._configDistribute.isSuccess),lsid:i,clientRole:"audience"===this.role?2:1};ZH.sessionInit(this._sessionId,I3({cname:t.channel,appid:t.appId},o)),this._joinInfo&&(this._joinInfo.sid=r),this._gateway.joinInfo&&(this._gateway.joinInfo.sid=r)}async _publishHighStream(e){if(!this._joinInfo||void 0===this._uid)throw new eW(ZB.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if("CONNECTED"!==this.connectionState&&"RECONNECTING"!==this.connectionState)throw new eW(ZB.INVALID_OPERATION,"can not publish stream in ".concat(this.connectionState," state"));if("auto"===this._turnServer.mode&&AH("FORCE_TURN")&&!AH("TURN_ENABLE_TCP")&&!AH("TURN_ENABLE_UDP"))throw new eW(ZB.UNEXPECTED_ERROR,"force TURN With No TURN Configuration");KH.debug("[".concat(this._clientId,"] publish high stream"));try{const n=await this._p2pChannel.publish(e,this._isDualStreamEnabled,this._lowStreamParameter);if(this._p2pChannel instanceof V1){const t=(await n.next()).value;if(t){try{await this._gateway.sendExtensionMessage(JK.PUBLISH,t,!0)}catch(e){throw n.throw(e),e}await n.next()}this._p2pChannel.reportPublishEvent(!0,null)}else{const r=(await n.next()).value;if(r){var t;let i;try{i=await this._gateway.publish(this._uid,r,!0)}catch(e){if(e.code!==ZB.DISCONNECT_P2P)throw n.throw(e),e}await n.next((null===(t=i)||void 0===t?void 0:t.ortc)||[])}this._p2pChannel.reportPublishEvent(!0,null);for(const t of e)t instanceof O$&&t._encoderConfig&&this._gateway.setVideoProfile(t._encoderConfig),!t.muted&&t.enabled||await this._p2pChannel.muteLocalTrack(t)}}catch(t){if(this._p2pChannel.reportPublishEvent(!1,null==t?void 0:t.code,e),(null==t?void 0:t.code)===ZB.WS_ABORT)return;throw t}}async _publishLowStream(){if(!this._joinInfo||void 0===this._uid)throw new eW(ZB.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if("CONNECTED"!==this.connectionState&&"RECONNECTING"!==this.connectionState)throw new eW(ZB.INVALID_OPERATION,"can not publish stream in ".concat(this.connectionState," state"));KH.debug("[".concat(this._clientId,"] publish low stream"));const e=this._configDistribute.getLowStreamConfigDistribute();e&&e.bitrate&&(this._lowStreamParameter||(this._lowStreamParameter={width:160,height:120,framerate:15,bitrate:50}),this._lowStreamParameter&&this._lowStreamParameter.bitrate&&e.bitrate<this._lowStreamParameter.bitrate&&(this._lowStreamParameter.bitrate=e.bitrate));try{const e=await this._p2pChannel.publishLowStream(this._lowStreamParameter),n=(await e.next()).value;if(n){var t;let r;try{r=await this._gateway.publish(this._uid,n,!0)}catch(t){if(t.code!==ZB.DISCONNECT_P2P)throw e.throw(t),t}e.next((null===(t=r)||void 0===t?void 0:t.ortc)||[]),this._p2pChannel.reportPublishEvent(!0,null,void 0,!0)}}catch(e){if(this._p2pChannel.reportPublishEvent(!1,null==e?void 0:e.code,void 0,!0),(null==e?void 0:e.code)===ZB.WS_ABORT)return;throw e}}_createLiveStreamingClient(e){const t=()=>{if(!this._joinInfo||!this._appId)return new eW(ZB.INVALID_OPERATION,"can not create live streaming client, please join channel first").throw();const e=(t={joinInfo:this._joinInfo,appId:this._appId,websocketRetryConfig:this._config.websocketRetryConfig,httpRetryConfig:this._config.httpRetryConfig},A2("LiveStreaming").create(t));var t;return e.onLiveStreamError=(e,t)=>{ZH.reportApiInvoke(this._sessionId,{name:EG.ON_LIVE_STREAM_ERROR,options:[e,t],tag:yG.TRACER}).onSuccess(),this.safeEmit(wG.LIVE_STREAMING_ERROR,e,t)},e.onLiveStreamWarning=(e,t)=>{ZH.reportApiInvoke(this._sessionId,{name:EG.ON_LIVE_STREAM_WARNING,options:[e,t],tag:yG.TRACER}).onSuccess(),this.safeEmit(wG.LIVE_STREAMING_WARNING,e,t)},e.on(_K.REQUEST_WORKER_MANAGER_LIST,((e,t,n)=>{if(!this._joinInfo)return n(new eW(ZB.INVALID_OPERATION,"can not find join info to get worker manager"));(async function(e,t,n,r){const i=AH("UAP_AP").slice(0,AH("AJAX_REQUEST_CONCURRENT")).map((e=>t.proxyServer?"https://".concat(t.proxyServer,"/ap/?url=").concat(e+"/api/v1?action=uap"):"https://".concat(e,"/api/v1?action=uap")));return await function(e,t,n,r,i){JZ+=1;const o={sid:n.sid,command:"convergeAllocateEdge",uid:"666",appId:n.appId,ts:Math.floor(Date.now()/1e3),seq:JZ,requestId:JZ,version:vH,cname:n.cname},s={service_name:t,json_body:JSON.stringify(o)};let a,c,d=e[0];return uH((async()=>{a=Date.now();const e=await FZ(d,{data:s,cancelToken:r,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"}});if(c=Date.now()-a,0!==e.code){const t=new eW(ZB.UNEXPECTED_RESPONSE,"live streaming ap error, code"+e.code,{retry:!0,responseTime:c});throw KH.error(t.toString()),t}const n=JSON.parse(e.json_body);if(200!==n.code){const e=new eW(ZB.UNEXPECTED_RESPONSE,"live streaming app center error, code: ".concat(n.code,", reason: ").concat(n.reason),{code:n.code,responseTime:c});throw KH.error(e.toString()),e}if(!n.servers||0===n.servers.length){const e=new eW(ZB.UNEXPECTED_RESPONSE,"live streaming app center empty server",{code:n.code,responseTime:c});throw KH.error(e.toString()),e}const i=function(e,t){return{addressList:e.servers.map((e=>"wss://".concat(e.address.replace(/\./g,"-"),".").concat(AH("WORKER_DOMAIN"),":").concat(e.wss,"?serviceName=").concat(encodeURIComponent(t)))),workerToken:e.workerToken,vid:e.vid}}(n,t);return AH("LIVE_STREAMING_ADDRESS")&&(i.addressList=AH("LIVE_STREAMING_ADDRESS")instanceof Array?AH("LIVE_STREAMING_ADDRESS"):[AH("LIVE_STREAMING_ADDRESS")]),YZ(YZ({},i),{},{responseTime:c})}),((r,i)=>(ZH.apworkerEvent(n.sid,{success:!0,sc:200,serviceName:t,responseDetail:JSON.stringify(r.addressList),firstSuccess:0===i,responseTime:c,serverIp:e[i%e.length]}),!1)),((r,i)=>(ZH.apworkerEvent(n.sid,{success:!1,sc:r.data&&r.data.code||200,serviceName:t,responseTime:c,serverIp:e[i%e.length]}),!!(r.code!==ZB.OPERATION_ABORTED&&r.code!==ZB.UNEXPECTED_RESPONSE||r.data&&r.data.retry)&&(d=e[(i+1)%e.length],!0))),i)}(i,e,t,n,r)})(e,this._joinInfo,this._axiosCancelSource.token,lH).then(t).catch(n)})),e};return e===hK.RAW?(this._liveRawStreamingClient=this._liveRawStreamingClient||t(),this._liveRawStreamingClient):(this._liveTranscodeStreamingClient=this._liveTranscodeStreamingClient||t(),this._liveTranscodeStreamingClient)}_createChannelMediaRelayClient(){if(!this._joinInfo)return new eW(ZB.INVALID_OPERATION,"can not create channel media relay client, please join channel first").throw();if(!this._channelMediaRelayClient){const{sendResolutionWidth:t,sendResolutionHeight:n}=this.getLocalVideoStats(),r=(e={joinInfo:this._joinInfo,clientId:this._clientId,websocketRetryConfig:this._config.websocketRetryConfig,httpRetryConfig:this._config.httpRetryConfig,resolution:{width:t,height:n}},A2("ChannelMediaRelay").create(e));r.on("state",(e=>{e===SK.RELAY_STATE_FAILURE&&r&&r.dispose(),this.safeEmit(wG.CHANNEL_MEDIA_RELAY_STATE,e)})),r.on("event",(e=>{this.safeEmit(wG.CHANNEL_MEDIA_RELAY_EVENT,e)})),this._channelMediaRelayClient=r,this._statsCollector.onStatsChanged=(e,t)=>{var n;"resolution"===e&&(null===(n=this._channelMediaRelayClient)||void 0===n||n.setVideoProfile(t))}}var e;return this._channelMediaRelayClient}_handleUpdateDataChannel(e,t){const{added:n,deleted:r}=e,i=[];if(t){const e=[];this._users.forEach((t=>{t._dataChannels.forEach((r=>{n.every((e=>e.uid!==t._uintid||e.stream_id!==r.id))&&e.push({uid:t._uintid,stream_id:r.id,ordered:r.ordered,max_retrans_times:r.maxRetransmits,metadata:r.metadata})}))})),e.length>0&&this._handleUpdateDataChannel({added:[],deleted:e})}Array.isArray(n)&&n.length>0&&n.forEach((e=>{const{uid:n,stream_id:r,ordered:o,max_retrans_times:s,metadata:a}=e,c=this._users.find((e=>e._uintid===n));if(c){if(KH.debug("[".concat(this._clientId,"] data_channel added with uid ").concat(n)),Fv(i).call(i,c)||i.push(c),c._uintid||(c._uintid=n),-1===c._dataChannels.findIndex((t=>t.id===e.stream_id))){const e={id:r,ordered:!!o,maxRetransmits:s,metadata:a},n=function(e){return O2(e,!0)}(e);c._dataChannels.push(n),KH.info("[".concat(this._clientId,"] remote user ").concat(c.uid," published datachannel")),t||this.safeEmit(wG.USER_PUBLISHED,c,"datachannel",e)}this._p2pChannel.hasPendingRemoteDataChannel(c,e.stream_id)&&(KH.debug("[".concat(this._clientId,"] resubscribe datachannel for user ").concat(c.uid," after reconnect.")),this._subscribeDataChannel(c,e.stream_id).catch((e=>{KH.error("[".concat(this._clientId,"] resubscribe datachannel error"),e.toString())})))}else KH.error("[".concat(this._clientId,"] can not find target user!(on_add_data_channel)"))})),t&&(this.safeEmit(wG.PUBLISHED_USER_LIST,this._pendingPublishedUsers),this._pendingPublishedUsers=[]),Array.isArray(r)&&r.length>0&&r.forEach((e=>{const{uid:t,stream_id:n}=e,r=this._users.find((e=>e._uintid===t));if(!r)return void KH.error("[".concat(this._clientId,"] can not find target user!(on_delete_data_channel)"));const i=r._dataChannels.find((t=>t.id===e.stream_id));i&&(KH.debug("[".concat(this._clientId,"] data_stream delete with uid ").concat(t)),this._p2pChannel.unsubscribeDataChannel(r,[i]).then((e=>{if(r._dataChannels=r._dataChannels.filter((e=>e!==i)),e)return this._gateway.unsubscribeDataChannel(e,r.uid)})),KH.info("[".concat(this._clientId,"] remote user ").concat(t," unpublished datachannel ,id:").concat(i.id)),this.safeEmit(wG.USER_UNPUBLISHED,r,"datachannel",i._config))}))}_handleRemoveDataChannels(e){const t=this._users.find((t=>t.uid===e.uid));if(t){if(void 0!==t._dataChannels&&t._dataChannels.length>0){KH.debug("[".concat(this._clientId,"] datachannel removed with uid ").concat(e.uid));const n=()=>{KH.info("[".concat(this._clientId,"] remote user ").concat(t.uid," unpublished datachannel")),t._dataChannels.forEach((e=>{this.safeEmit(wG.USER_UNPUBLISHED,t,"datachannel",e._config)}))};this._p2pChannel.unsubscribeDataChannel(t,t._dataChannels).then((e=>{if(e)return this._gateway.unsubscribeDataChannel(e,t.uid)})),n()}}else KH.warning("[".concat(this._clientId,"] can not find target user!(on_remove_datachannel)"))}_handleGatewayEvents(){this._gateway.on(CK.DISCONNECT_P2P,(async()=>{await this._p2pChannel.disconnectForReconnect()})),this._gateway.on(CK.CONNECTION_STATE_CHANGE,((e,t,n)=>{var r;if(n===SG.FALLBACK)return;const i=()=>{this.safeEmit(wG.CONNECTION_STATE_CHANGE,e,t,n)};if(ZH.reportApiInvoke(this._sessionId||(null===(r=this._gateway.joinInfo)||void 0===r?void 0:r.sid)||null,{name:EG.CONNECTION_STATE_CHANGE,options:[e,t,n],tag:yG.TRACER}).onSuccess(JSON.stringify({cur:e,prev:t,reason:n})),KH.info("[".concat(this._clientId,"] connection state change: ").concat(t," -> ").concat(e)),"DISCONNECTED"===e)return this._reset(),void i();if("RECONNECTING"===e)this._users.forEach((e=>{e._trust_in_room_=!1,e._trust_audio_enabled_state_=!1,e._trust_video_enabled_state_=!1,e._trust_audio_mute_state_=!1,e._trust_video_mute_state_=!1,e._trust_audio_stream_added_state_=!1,e._trust_video_stream_added_state_=!1,e._is_pre_created||(e._audio_pre_subscribed||(e._audioSSRC=void 0,e._audioOrtc=void 0),e._video_pre_subscribed||(e._videoSSRC=void 0,e._videoOrtc=void 0,e._rtxSsrcId=void 0),e._cname=void 0)})),this._userOfflineTimeout&&window.clearTimeout(this._userOfflineTimeout),this._streamRemovedTimeout&&window.clearTimeout(this._streamRemovedTimeout),this._userOfflineTimeout=void 0,this._streamRemovedTimeout=void 0;else if("CONNECTED"===e){var o;this._streamFallbackTypeCacheMap.forEach(((e,t)=>{this._gateway.setStreamFallbackOption(t,e).catch((e=>{KH.warning("[".concat(this._clientId,"] auto set stream fallback option failed"),e)}))})),this._remoteStreamTypeCacheMap.forEach(((e,t)=>{this._gateway.setRemoteVideoStreamType(t,e).catch((e=>{KH.warning("[".concat(this._clientId,"] auto set remote stream type failed"),e)}))})),void 0!==this._remoteDefaultVideoStreamType&&void 0===(null===(o=this._joinInfo)||void 0===o?void 0:o.defaultVideoStream)&&this.setRemoteDefaultVideoStreamType(this._remoteDefaultVideoStreamType).then((()=>{KH.debug("[".concat(this._clientId,"] setRemoteDefaultVideoStreamType after gateway connected"))})).catch((e=>{KH.error("[".concat(this._clientId,"] setRemoteDefaultVideoStreamType after gateway failed, ").concat(e))})),this.store.useP2P||(this._p2pChannel.republish(),this._userOfflineTimeout=window.setTimeout((()=>{"CONNECTED"===this.connectionState&&(this._userOfflineTimeout=void 0,this._users.filter((e=>!e._trust_in_room_)).forEach((e=>{KH.debug("[".concat(this._clientId,"] user offline timeout, emit user offline ").concat(e.uid)),this._handleUserOffline({uid:e.uid})})))}),3e3),this._streamRemovedTimeout=window.setTimeout((()=>{"CONNECTED"===this.connectionState&&(this._streamRemovedTimeout=void 0,this._users.forEach((e=>{e._trust_audio_mute_state_||(KH.debug("[".concat(this._clientId,"] auto dispatch audio unmute event ").concat(e.uid)),this._handleMuteStream(e.uid,kK.AUDIO,!1)),e._trust_video_mute_state_||(KH.debug("[".concat(this._clientId,"] auto dispatch video unmute event ").concat(e.uid)),this._handleMuteStream(e.uid,kK.VIDEO,!1)),e._trust_audio_enabled_state_||(KH.debug("[".concat(this._clientId,"] auto dispatch enable local audio ").concat(e.uid)),this._handleSetStreamLocalEnable("audio",e.uid,!0)),e._trust_video_enabled_state_||(KH.debug("[".concat(this._clientId,"] auto dispatch enable local video ").concat(e.uid)),this._handleSetStreamLocalEnable("video",e.uid,!0)),e._trust_video_stream_added_state_||(KH.debug("[".concat(this._clientId,"] auto dispatch reset video stream added ").concat(e.uid)),this._handleResetAddStream(e,"video")),e._trust_audio_stream_added_state_||(KH.debug("[".concat(this._clientId,"] auto dispatch reset audio stream added ").concat(e.uid)),this._handleResetAddStream(e,"audio")),e._video_added_||e._audio_added_||(KH.debug("[".concat(this._clientId,"] auto dispatch stream remove ").concat(e.uid)),this._handleRemoveStream({uid:e.uid,uint_id:e._uintid}))})))}),1e3))}i()})),this._gateway.on(CK.REQUEST_NEW_GATEWAY_LIST,(async(e,t)=>{if(!this._joinInfo)return t(new eW(ZB.UNEXPECTED_ERROR,"can not recover, no join info"));try{let t;const n=await $2(I3(I3({},this._joinInfo),{},{uid:this._joinInfo.uid,stringUid:void 0}));n?(t=n.ap,n5(n),this._joinInfo.preload=!0):(t=await s0(this._joinInfo,this._axiosCancelSource.token,this._config.httpRetryConfig||lH,this.store),this._joinInfo.preload=!1),this._joinInfo&&(this._joinInfo.apResponse=t.gatewayInfo.res,this._joinInfo.gatewayAddrs=t.gatewayInfo.gatewayAddrs,this._joinInfo.uni_lbs_ip=t.gatewayInfo.uni_lbs_ip);const r=[];t.gatewayInfo.gatewayAddrs.forEach((e=>{let{address:t}=e;const[n,i]=t.split(":");this._joinInfo&&this._joinInfo.proxyServer?r.push({proxy:this._joinInfo.proxyServer,host:n,port:i}):r.push({host:n,port:i})})),e(r)}catch(e){t(e)}})),this._gateway.on(CK.NETWORK_QUALITY,(e=>{"normal"===this._networkQualitySensitivity&&this.safeEmit(wG.NETWORK_QUALITY,e)})),this._gateway.on(CK.STREAM_TYPE_CHANGE,((e,t)=>{this.safeEmit(wG.STREAM_TYPE_CHANGED,e,t),ZH.reportApiInvoke(this._sessionId,{name:EG.STREAM_TYPE_CHANGE,options:[e,t],tag:yG.TRACER}).onSuccess(JSON.stringify({uid:e,streamType:t}))})),this._gateway.on(CK.IS_P2P_DISCONNECTED,(e=>{this._p2pChannel.isP2PDisconnected()?e(!0):this._p2pChannel.hasLocalMedia()||this._p2pChannel.hasRemoteMedia()?e(!1):e(!0)})),this._gateway.on(CK.REQUEST_P2P_CONNECTION_PARAMS,(async(e,t,n)=>{try{let n=await this._p2pChannel.getEstablishParams();AH("ENABLE_PREALLOC_PC")&&n||(n=await this._p2pChannel.startP2PConnection(e)),t(n)}catch(e){n(e)}})),this._gateway.on(CK.JOIN_RESPONSE,((e,t)=>{if(this.store.useP2P)return;const n=pZ(e.ortc,t,e.attributes.userAttributes.preSubSsrcs);this._p2pChannel.connect(n)})),this._gateway.on(CK.PRE_CONNECT_PC,(async e=>{const{candidates:t,fingerprint:n}=e;if(this._joinInfo&&t.length>0&&!this._p2pChannel.isPlanB){var r;await this._p2pChannel.startP2PConnection({turnServer:this._joinInfo.turnServer});const{cert:e,cid:i}=this._joinInfo.apResponse;await this._p2pChannel.connect({iceParameters:{iceUfrag:"".concat(i,"_").concat(e),icePwd:"".concat(i,"_").concat(e)},dtlsParameters:{fingerprints:[{hashFunction:"sha-256",fingerprint:null!==(r=AH("FINGERPRINT"))&&void 0!==r?r:n}]},candidates:t,rtpCapabilities:{send:{audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]},recv:{audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]}},setup:"active",cname:"o/i14u9pJrxRKAsu",preallocation:!0})}}))}_handleGatewaySignalEvents(){this._gateway.signal.on(sK.ON_USER_ONLINE,this._handleUserOnline),this._gateway.signal.on(sK.ON_USER_OFFLINE,this._handleUserOffline),this._gateway.signal.on(sK.ON_ADD_AUDIO_STREAM,(e=>this._handleAddAudioOrVideoStream("audio",e.uid,e.ssrcId,e.cname,e.uint_id,e.ortc))),this._gateway.signal.on(sK.ON_ADD_VIDEO_STREAM,(e=>this._handleAddAudioOrVideoStream("video",e.uid,e.ssrcId,e.cname,e.uint_id,e.ortc,e.rtxSsrcId))),this._gateway.signal.on(sK.ON_REMOTE_DATASTREAM_UPDATE,(e=>{this._handleUpdateDataChannel(e)})),this._gateway.signal.on(sK.ON_REMOTE_FULL_DATASTREAM_INFO,(e=>{this._handleUpdateDataChannel({added:e.datastreams||[],deleted:[]},!0)})),this._gateway.signal.on(sK.ON_REMOVE_STREAM,this._handleRemoveStream),this._gateway.signal.on(sK.ON_P2P_LOST,this._handleP2PLost),this._gateway.signal.on(sK.MUTE_AUDIO,(e=>this._handleMuteStream(e.uid,kK.AUDIO,!0))),this._gateway.signal.on(sK.UNMUTE_AUDIO,(e=>this._handleMuteStream(e.uid,kK.AUDIO,!1))),this._gateway.signal.on(sK.MUTE_VIDEO,(e=>this._handleMuteStream(e.uid,kK.VIDEO,!0))),this._gateway.signal.on(sK.UNMUTE_VIDEO,(e=>this._handleMuteStream(e.uid,kK.VIDEO,!1))),this._gateway.signal.on(sK.RECEIVE_METADATA,(e=>{const t=GG(e.metadata);this.safeEmit(wG.RECEIVE_METADATA,e.uid,t)})),this._gateway.signal.on(sK.ON_DATA_STREAM,(async e=>{var t;if(!e)return;let n=GG(e.payload);if(this._encryptDataStream&&this._encryptDataStreamIv&&this._encryptDataStreamKey&&window.crypto.subtle&&Fv(t=["aes-128-gcm2","aes-256-gcm2"]).call(t,this._encryptionMode)){if(e.payload.length<DH)throw new eW(ZB.UNEXPECTED_RESPONSE,"payload length ".concat(e.payload.length," is less than header length ").concat(DH));const t=await async function(e,t,n){const r=n.subarray(0,DH),i=r.slice(8,DH),o=(i[0]<<8)+i[1],s=(r[6]<<8)+r[7],a=await window.crypto.subtle.decrypt({name:"AES-GCM",iv:e,tagLength:128,additionalData:new Uint8Array(rH(o,2))},t,n.subarray(DH));return new Uint8Array(a).subarray(0,s)}(this._encryptDataStreamIv,this._encryptDataStreamKey,n);n=t}let r=0;if(e.ordered||e.syncWithAudio){const t=this._p2pChannel.getStats(),n=this.remoteUsers.find((t=>t.uid===e.uid)),i=null==t?void 0:t.audioRecv.find((e=>e.ssrc===(null==n?void 0:n._audioSSRC)));r=null==i?void 0:i.jitterBufferMs}null==r&&(r=0),U2(I3(I3({},e),{},{payload:n}),r,{id:this._clientId,onStreamMessage:"function"==typeof this.onStreamMessage?this.onStreamMessage.bind(this):void 0,safeEmit:this.safeEmit.bind(this)})})),this._gateway.signal.on(sK.ON_CRYPT_ERROR,(()=>{BG((()=>{KH.warning("[".concat(this._clientId,"] on crypt error")),this.safeEmit(wG.CRYPT_ERROR)}),this._sessionId)})),this._gateway.signal.on(sK.ON_TOKEN_PRIVILEGE_WILL_EXPIRE,this._handleTokenWillExpire),this._gateway.signal.on(sK.ON_TOKEN_PRIVILEGE_DID_EXPIRE,(()=>{KH.warning("[".concat(this._clientId,"] received message onTokenPrivilegeDidExpire, please get new token and join again")),this._gateway.leave(!0,SG.TOKEN_EXPIRE),this.safeEmit(wG.ON_TOKEN_PRIVILEGE_DID_EXPIRE),this._reset()})),this._gateway.signal.on(sK.ON_STREAM_FALLBACK_UPDATE,(e=>{KH.debug("[".concat(this._clientId,"] stream fallback peerId: ").concat(e.stream_id,", attr: ").concat(e.stream_type)),this.safeEmit(wG.STREAM_FALLBACK,e.stream_id,1===e.stream_type?"fallback":"recover")})),this._gateway.signal.on(sK.ON_PUBLISH_STREAM,(e=>{this.uid===this._uid&&(this._p2pChannel.reportPublishEvent(!0,null,void 0,!1,JSON.stringify({proxy:e.proxy})),KH.info("[".concat(this._clientId,"] on publish stream, ").concat(JSON.stringify(e))))})),this._gateway.signal.on(sK.ENABLE_LOCAL_VIDEO,(e=>{this._handleSetStreamLocalEnable("video",e.uid,!0)})),this._gateway.signal.on(sK.DISABLE_LOCAL_VIDEO,(e=>{this._handleSetStreamLocalEnable("video",e.uid,!1)})),this._gateway.signal.on(rK.REQUEST_TIMEOUT,((e,t)=>{if(this._joinInfo)switch(e){case iK.PUBLISH:{if(!t)return;const e=t.ortc;if(e){var n,r;const i=e.some((e=>{let{stream_type:t}=e;return t===RK.Audio})),o=e.some((e=>{let{stream_type:t}=e;return t!==RK.Audio})),s=e.some((e=>{let{stream_type:t}=e;return t===RK.Screen||t===RK.ScreenLow}));"offer"===t.state&&ZH.publish(this._joinInfo.sid,{eventElapse:E0.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:!1,ec:ZB.TIMEOUT,audio:i,video:o,p2pid:t.p2p_id,publishRequestid:this.store.pubId,screenshare:s,audioName:i?null===(n=e.find((e=>{let{stream_type:t}=e;return t===RK.Audio})))||void 0===n||null===(n=n.ssrcs[0])||void 0===n?void 0:n.ssrcId.toString():void 0,videoName:o?null===(r=e.find((e=>{let{stream_type:t}=e;return t!==RK.Audio})))||void 0===r||null===(r=r.ssrcs[0])||void 0===r?void 0:r.ssrcId.toString():void 0})}break}case iK.SUBSCRIBE:t&&ZH.subscribe(this._joinInfo.sid,{succ:!1,ec:ZB.TIMEOUT,audio:t.stream_type===kK.AUDIO,video:t.stream_type===kK.VIDEO,peerid:t.stream_id,subscribeRequestid:t.ssrcId,p2pid:this.store.p2pId,eventElapse:E0.measureFromSubscribeStart(this.store.clientId,t.ssrcId),preSsrc:this._p2pChannel.isPreSubScribe(t.ssrcId)})}})),this._gateway.signal.on(sK.ON_P2P_OK,(e=>{this.uid,this._uid})),this._gateway.signal.on(sK.ON_PUBLISHED_USER_LIST,(e=>{if(null==e||!e.users)return;AH("BLOCK_LOCAL_CLIENT")&&(e.users=e.users.filter((e=>!iW(e.string_id||e.stream_id,this.channelName))));const t=[],n=[];for(const r of e.users){let e=this._users.find((e=>e._uintid===r.stream_id));e?e._trust_in_room_=!0:(e=new y1(r.string_id||r.stream_id,r.stream_id),this._users.push(e),0===this.getListeners(wG.PUBLISHED_USER_LIST).length&&(KH.debug("[".concat(this._clientId,"] user online"),r.stream_id),this.safeEmit(wG.USER_JOINED,e)));const i=IK.Audio&r.stream_type,o=(IK.Video|IK.LwoVideo)&r.stream_type,s=!!(65280&r.stream_type),a=i&&e.hasAudio,c=o&&e.hasVideo;o&&(e._trust_video_stream_added_state_=!0,e._video_added_=!0,e._videoSSRC=r.video_ssrc,e._rtxSsrcId=r.video_rtx),i&&(e._trust_audio_stream_added_state_=!0,e._audio_added_=!0,e._audioSSRC=r.audio_ssrc),i&&!a&&0===this.getListeners(wG.PUBLISHED_USER_LIST).length&&(KH.info("[".concat(this._clientId,"] remote user ").concat(e.uid," published audio")),this.safeEmit(wG.USER_PUBLISHED,e,"audio")),o&&!c&&0===this.getListeners(wG.PUBLISHED_USER_LIST).length&&(KH.info("[".concat(this._clientId,"] remote user ").concat(e.uid," published video")),this.safeEmit(wG.USER_PUBLISHED,e,"video")),(i&&!a||o&&!c||s)&&t.push(e),o&&this._p2pChannel.hasPendingRemoteMedia(e,"video")&&n.push({user:e,mediaType:"video"}),i&&this._p2pChannel.hasPendingRemoteMedia(e,"audio")&&n.push({user:e,mediaType:"audio"})}n.length>0&&(KH.debug("[".concat(this._clientId,"] RE massSubscribe after reconnect ").concat(n.map((e=>"user: ".concat(e.user.uid,", mediaType: ").concat(e.mediaType))).join("; ")," ")),this.massSubscribe(n).catch((e=>{KH.error("[".concat(this._clientId,"] mass resubscribe error"),e.toString())}))),this.getListeners(wG.PUBLISHED_USER_LIST).length>0?AH("ENABLE_DATASTREAM_2")?this._pendingPublishedUsers=t:(KH.info("[".concat(this._clientId,"] client emit user-list event, users: ").concat(t.map((e=>e.uid)).join(", "))),this.safeEmit(wG.PUBLISHED_USER_LIST,t)):KH.info("[".concat(this._clientId,"] client not emit user-list event case there is no user-list listener, users: ").concat(t.map((e=>e.uid)).join(", ")))})),this._gateway.signal.on(sK.ON_RTP_CAPABILITY_CHANGE,(e=>{const{video_codec:t}=e;this._p2pChannel instanceof R2&&this._p2pChannel.updateRemoteRTPCapabilities(t.map((e=>e.toLowerCase())).filter((e=>{var t;return Fv(t=Object.keys(PH)).call(t,e)})))}))}_handleP2PEvents(){this._gateway.signal.on(sK.ON_USER_OFFLINE,(()=>{this._p2pChannel.disconnectForReconnect()})),this._gateway.signal.on(JK.PUBLISH,((e,t,n)=>{const{uid:r}=e;e.forEach((e=>{const{kind:i,ssrcs:o,mid:s,isMuted:a}=e;this._handleP2PAddAudioOrVideoStream(i,r,o[0].ssrcId,s);const c=this._users.find((e=>e.uid===r));return c&&this._p2pChannel instanceof V1?this._p2pChannel.mockSubscribe(c,i,o[0].ssrcId,s).then((()=>{t()})).catch(n):t(),this._handleMuteStream(r,i,!!a)}))})),this._gateway.signal.on(JK.CALL,(async(e,t,n)=>{if(this._p2pChannel instanceof V1)try{var r;t(await this._p2pChannel.startP2P({turnServer:null===(r=this._joinInfo)||void 0===r?void 0:r.turnServer},e))}catch(e){n(e)}})),this._gateway.signal.on(rK.P2P_CONNECTION,(async e=>{this._p2pChannel instanceof V1&&await this._p2pChannel.p2pConnect(e)})),this._gateway.signal.on(JK.UNPUBLISH,(async(e,t,n)=>{if(this._p2pChannel instanceof V1){const{unpubMsg:r,uid:i}=e,o=this._users.find((e=>e.uid===i));if(!o)return KH.warning("[".concat(this._clientId,"] can not find remote user, ignore mute event, uid: ").concat(i)),void t();try{r.forEach((async e=>{let{stream_type:t}=e;const n=t===RK.Audio?kK.AUDIO:kK.VIDEO;await this._p2pChannel.unsubscribe(o,n),this._handleMuteStream(i,n,!0)})),t()}catch(e){n(e)}}})),this._gateway.signal.on(JK.CONTROL,(async(e,t)=>{const{action:n}=e;switch(n){case QK.MUTE_LOCAL_VIDEO:this._handleMuteStream(t,kK.VIDEO,!0);break;case QK.MUTE_LOCAL_AUDIO:this._handleMuteStream(t,kK.AUDIO,!0);break;case QK.UNMUTE_LOCAL_VIDEO:this._handleP2PAddAudioOrVideoStream("video",t),this._handleMuteStream(t,kK.VIDEO,!1);break;case QK.UNMUTE_LOCAL_AUDIO:this._handleP2PAddAudioOrVideoStream("audio",t),this._handleMuteStream(t,kK.AUDIO,!1)}})),this._gateway.signal.on(JK.RESTART_ICE,(async(e,t,n)=>{if(this._p2pChannel instanceof V1)try{const{direction:n,iceParameter:r}=e;n!==aK.SEND_ONLY||r?t(await this._p2pChannel.restartICE(n,r)):(this._p2pChannel.handleDisconnect(n),t())}catch(e){n(e)}})),this._gateway.signal.on(JK.CANDIDATE,(e=>{if(this._p2pChannel instanceof V1){const{candidate:t,direction:n}=e;this._p2pChannel.addRemoteCandidate(t,n)}})),this._p2pChannel.on(jK.RequestP2PRestartICE,(async(e,t,n)=>{try{const{direction:n}=e;t(await this._gateway.sendExtensionMessage(JK.RESTART_ICE,e,n===aK.SEND_ONLY))}catch(e){n(e)}})),this._p2pChannel.on(jK.LocalCandidate,(e=>{this._gateway.sendExtensionMessage(JK.CANDIDATE,JSON.stringify(e),!0)})),this._p2pChannel.on(jK.RequestP2PMuteLocal,(async(e,t,n)=>{try{await this._gateway.sendExtensionMessage(JK.CONTROL,e,!0),t()}catch(e){n(e)}})),this._p2pChannel.on(jK.RequestP2PUnmuteRemote,(async(e,t,n)=>{if(this._joinInfo)try{await this._gateway.unmuteRemote(e,this._joinInfo.stringUid||this._joinInfo.uid),t()}catch(e){e.code===ZB.DISCONNECT_P2P?t():n(e)}else t()})),this._p2pChannel.on(jK.RequestP2PMuteRemote,(async(e,t,n)=>{if(this._joinInfo)try{await this._gateway.muteRemote(e,this._joinInfo.stringUid||this._joinInfo.uid),t()}catch(e){e.code===ZB.DISCONNECT_P2P?t():n(e)}else t()})),this._p2pChannel.on(jK.StateChange,((e,t)=>{t===FK.Connected&&this._p2pChannel.republish()}))}_handleP2PChannelEvents(){this._p2pChannel.on(jK.RequestMuteLocal,(async(e,t,n)=>{if(this._joinInfo)try{await this._gateway.muteLocal(e,this._joinInfo.stringUid||this._joinInfo.uid),t()}catch(e){e.code===ZB.DISCONNECT_P2P?t():n(e)}else t()})),this._p2pChannel.on(jK.RequestUnmuteLocal,(async(e,t,n)=>{if(this._joinInfo)try{await this._gateway.unmuteLocal(e,this._joinInfo.stringUid||this._joinInfo.uid),t()}catch(e){e.code===ZB.DISCONNECT_P2P?t():n(e)}else t()})),this._p2pChannel.on(jK.RequestRePublish,((e,t,n)=>{this.publish(e,!1).then(t).catch(n)})),this._p2pChannel.on(jK.RequestRePublishDataChannel,((e,t,n)=>{LO.all(e.map((async e=>{const t=await this._p2pChannel.publishDataChannel([e]);try{t.forEach((e=>{this._uid&&this._gateway.publishDataChannel(this._uid,e,!0)}))}catch(e){if(e.code!==ZB.DISCONNECT_P2P)throw e}}))).then(t).catch(n)})),this._p2pChannel.on(jK.RequestReSubscribe,(async(e,t,n)=>{try{for(const{user:t,kind:n}of e)n===kK.VIDEO?await this.subscribe(t,"video"):await this.subscribe(t,"audio");t()}catch(e){n(e)}})),this._p2pChannel.on(jK.RequestUpload,((e,t)=>{this._gateway.upload(e,t)})),this._p2pChannel.on(jK.RequestUploadStats,(e=>{this._gateway.uploadWRTCStats(e)})),this._p2pChannel.on(jK.MediaReconnectStart,(e=>{this.safeEmit(wG.MEDIA_RECONNECT_START,e)})),this._p2pChannel.on(jK.MediaReconnectEnd,(e=>{this.safeEmit(wG.MEDIA_RECONNECT_END,e)})),this._p2pChannel.on(jK.NeedSignalRTT,(e=>{e(this._gateway.getSignalRTT())})),this._p2pChannel.on(jK.RequestRestartICE,(async e=>{if(this._p2pChannel instanceof V1)return;const t=await this._p2pChannel.restartICE(e),n=await t.next();if(n.done)return;const r=n.value;let i;try{i=await this._gateway.restartICE({iceParameters:r})}catch(e){return void t.throw(e)}const{iceParameters:o}=function(e){const t=e.iceParameters;return{iceParameters:{iceUfrag:t.iceUfrag,icePwd:t.icePwd}}}(i);await t.next({remoteIceParameters:o})})),this._p2pChannel.on(jK.RequestReconnect,(async()=>{this._gateway.reconnect()})),this._p2pChannel.on(jK.RequestReconnectPC,(async()=>{var e;const{iceParameters:t,dtlsParameters:n,rtpCapabilities:r}=await this._p2pChannel.startP2PConnection({turnServer:null===(e=this._joinInfo)||void 0===e?void 0:e.turnServer}),{gatewayEstablishParams:i,gatewayAddress:o}=await this._gateway.reconnectPC({iceParameters:t,dtlsParameters:n,rtpCapabilities:r}),s=pZ(i,o);await this._p2pChannel.connect(s),await this._p2pChannel.republish(),await this._p2pChannel.reSubscribe()})),this._p2pChannel.on(jK.RequestUnpublishForReconnectPC,(async(e,t,n)=>{this._joinInfo&&void 0!==this._uid?(await this._gateway.unpublish(e,this._uid),t()):n()})),this._p2pChannel.on(jK.P2PLost,(()=>{this.safeEmit(wG.P2P_LOST,this.store.uid)})),this._p2pChannel.on(jK.UpdateVideoEncoder,(e=>{e._encoderConfig&&this._gateway.setVideoProfile(e._encoderConfig)})),this._p2pChannel.on(jK.ConnectionTypeChange,(e=>{this.safeEmit(wG.IS_USING_CLOUD_PROXY,e)})),this._p2pChannel.on(jK.RequestLowStreamParameter,(e=>{e(this._lowStreamParameter||{width:160,height:120,framerate:15,bitrate:50})})),this._p2pChannel.on(jK.QueryClientConnectionState,(e=>{e(this.connectionState)}))}getKeyMetrics(){return this.store.keyMetrics}async enableContentInspect(e){if(!this._joinInfo||"CONNECTED"!==this.connectionState)throw new eW(ZB.INVALID_OPERATION,"[".concat(this._clientId,"] can not create content inspect, please join channel first"));if(this._inspect)throw new eW(ZB.INVALID_OPERATION,"[".concat(this._clientId,"] Inspect content service already in connecting/connected state"));try{const n=(t={config:e},A2("ContentInspect").create(t));this._inspect=n,this.handleVideoInspectEvents(n);const{appId:r,cname:i,sid:o,token:s,uid:a,cid:c,vid:d}=this._joinInfo;await n.init({appId:r,areaCode:"",cname:i,sid:o,token:s,uid:a,cid:c,vid:d?Number(d):0},lH)}catch(e){throw Array.isArray(e)?e[0]:e}var t}handleVideoInspectEvents(e){e.on(HK.CONNECTION_STATE_CHANGE,((t,n)=>{if(this.safeEmit(wG.CONTENT_INSPECT_CONNECTION_STATE_CHANGE,t,n),n===BK.CONNECTED){if("CONNECTED"!==this.connectionState)return void this.safeEmit(wG.CONTENT_INSPECT_ERROR,new eW(ZB.OPERATION_ABORTED,"Content inspect was cancelled because it left the channel"));e.inspectImage()}})),e.on(HK.INSPECT_RESULT,((e,t)=>{var n;if((null==t?void 0:t.code)===ZB.INVALID_OPERATION&&"DISCONNECTED"===this.connectionState)return KH.debug("Stop inspect content because that has left channel"),null==this||null===(n=this._inspect)||void 0===n||n.close(),void(this._inspect=void 0);this.safeEmit(wG.CONTENT_INSPECT_RESULT,e,t)})),e.on(HK.CLIENT_LOCAL_VIDEO_TRACK,(e=>{e(this.localTracks.filter((e=>"video"===e.trackMediaType))[0])}))}async disableContentInspect(){if(!this._inspect)throw new eW(ZB.INVALID_OPERATION,"[".concat(this._clientId,"] inspectVideoContent not started"));try{this._inspect.close(),this._inspect=void 0}catch(e){throw Array.isArray(e)?e[0]:e}}async setImageModeration(e,t){if(tG(e,"enabled"),e){if(!t)throw new eW(ZB.INVALID_PARAMS,"config is required");if(U5(t),!this._joinInfo)throw new eW(ZB.INVALID_OPERATION,"can not create image moderation, please join channel first");try{if(this._moderation)this._moderation.updateConfig(t);else{const e=(n={config:t},A2("ImageModeration").create(n));this._moderation=e,this.handleImageModerationEvents(e);const{appId:r,cname:i,sid:o,token:s,uid:a,cid:c,vid:d}=this._joinInfo;await e.init({appId:r,areaCode:"",cname:i,sid:o,token:s,uid:a,cid:c,vid:d?Number(d):0},lH)}}catch(e){throw Array.isArray(e)?e[0]:e}}else{var n;if(!this._moderation)throw new eW(ZB.INVALID_OPERATION,"[".concat(this._clientId,"] image moderation not started"));try{this._moderation.close(),this._moderation.removeAllListeners(),this._moderation=void 0}catch(e){throw Array.isArray(e)?e[0]:e}}}handleImageModerationEvents(e){e.on(qK.CONNECTION_STATE_CHANGE,((t,n)=>{if(this.safeEmit(wG.IMAGE_MODERATION_CONNECTION_STATE_CHANGE,t,n),t===zK.CONNECTED){if("CONNECTED"!==this.connectionState)throw this.setImageModeration(!1),new eW(ZB.OPERATION_ABORTED,"Image moderation was cancelled because it left the channel");e.inspectImage()}})),e.on(qK.CLIENT_LOCAL_VIDEO_TRACK,(e=>{e(this.localTracks.filter((e=>"video"===e.trackMediaType))[0])}))}setP2PTransport(e){if(function(e){nG(e,"transport",["default","auto","relay","sd-rtn"])}(e),"p2p"!==this.mode)throw new eW(ZB.INVALID_OPERATION,"only p2p mode can set p2pTransport");this.store.p2pTransport=e,KH.info("[".concat(this._clientId,"] set client p2pTransport to ").concat(e))}getJoinChannelServiceRecords(){return KH.debug("getJoinChannelServiceRecords"),this.store.joinChannelServiceRecords}async setPublishAudioFilterEnabled(e){tG(e,"enabled"),IH("ENABLE_PUBLISH_AUDIO_FILTER",e),this._joinInfo&&await this._gateway.setPublishAudioFilterEnabled(e)}_handleResetAddStream(e,t){switch(t){case"audio":e._audio_added_=!1,e._trust_audio_stream_added_state_=!0;break;case"video":e._video_added_=!1,e._trust_video_stream_added_state_=!0}}},YW(C3.prototype,"leave",[F5],Object.getOwnPropertyDescriptor(C3.prototype,"leave"),C3.prototype),YW(C3.prototype,"publish",[j5],Object.getOwnPropertyDescriptor(C3.prototype,"publish"),C3.prototype),YW(C3.prototype,"unpublish",[B5],Object.getOwnPropertyDescriptor(C3.prototype,"unpublish"),C3.prototype),YW(C3.prototype,"subscribe",[G5],Object.getOwnPropertyDescriptor(C3.prototype,"subscribe"),C3.prototype),YW(C3.prototype,"presubscribe",[H5],Object.getOwnPropertyDescriptor(C3.prototype,"presubscribe"),C3.prototype),YW(C3.prototype,"massSubscribe",[W5],Object.getOwnPropertyDescriptor(C3.prototype,"massSubscribe"),C3.prototype),YW(C3.prototype,"unsubscribe",[K5],Object.getOwnPropertyDescriptor(C3.prototype,"unsubscribe"),C3.prototype),YW(C3.prototype,"massUnsubscribe",[z5],Object.getOwnPropertyDescriptor(C3.prototype,"massUnsubscribe"),C3.prototype),YW(C3.prototype,"setLowStreamParameter",[q5],Object.getOwnPropertyDescriptor(C3.prototype,"setLowStreamParameter"),C3.prototype),YW(C3.prototype,"enableDualStream",[Y5],Object.getOwnPropertyDescriptor(C3.prototype,"enableDualStream"),C3.prototype),YW(C3.prototype,"disableDualStream",[J5],Object.getOwnPropertyDescriptor(C3.prototype,"disableDualStream"),C3.prototype),YW(C3.prototype,"setClientRole",[X5],Object.getOwnPropertyDescriptor(C3.prototype,"setClientRole"),C3.prototype),YW(C3.prototype,"setProxyServer",[Q5],Object.getOwnPropertyDescriptor(C3.prototype,"setProxyServer"),C3.prototype),YW(C3.prototype,"setTurnServer",[$5],Object.getOwnPropertyDescriptor(C3.prototype,"setTurnServer"),C3.prototype),YW(C3.prototype,"setLicense",[Z5],Object.getOwnPropertyDescriptor(C3.prototype,"setLicense"),C3.prototype),YW(C3.prototype,"startProxyServer",[e3],Object.getOwnPropertyDescriptor(C3.prototype,"startProxyServer"),C3.prototype),YW(C3.prototype,"stopProxyServer",[t3],Object.getOwnPropertyDescriptor(C3.prototype,"stopProxyServer"),C3.prototype),YW(C3.prototype,"setLocalAccessPointsV2",[n3],Object.getOwnPropertyDescriptor(C3.prototype,"setLocalAccessPointsV2"),C3.prototype),YW(C3.prototype,"setLocalAccessPoints",[r3],Object.getOwnPropertyDescriptor(C3.prototype,"setLocalAccessPoints"),C3.prototype),YW(C3.prototype,"setRemoteDefaultVideoStreamType",[i3],Object.getOwnPropertyDescriptor(C3.prototype,"setRemoteDefaultVideoStreamType"),C3.prototype),YW(C3.prototype,"setRemoteVideoStreamType",[o3],Object.getOwnPropertyDescriptor(C3.prototype,"setRemoteVideoStreamType"),C3.prototype),YW(C3.prototype,"setStreamFallbackOption",[s3],Object.getOwnPropertyDescriptor(C3.prototype,"setStreamFallbackOption"),C3.prototype),YW(C3.prototype,"setEncryptionConfig",[a3],Object.getOwnPropertyDescriptor(C3.prototype,"setEncryptionConfig"),C3.prototype),YW(C3.prototype,"renewToken",[c3],Object.getOwnPropertyDescriptor(C3.prototype,"renewToken"),C3.prototype),YW(C3.prototype,"enableAudioVolumeIndicator",[d3],Object.getOwnPropertyDescriptor(C3.prototype,"enableAudioVolumeIndicator"),C3.prototype),YW(C3.prototype,"startLiveStreaming",[l3],Object.getOwnPropertyDescriptor(C3.prototype,"startLiveStreaming"),C3.prototype),YW(C3.prototype,"setLiveTranscoding",[h3],Object.getOwnPropertyDescriptor(C3.prototype,"setLiveTranscoding"),C3.prototype),YW(C3.prototype,"stopLiveStreaming",[u3],Object.getOwnPropertyDescriptor(C3.prototype,"stopLiveStreaming"),C3.prototype),YW(C3.prototype,"startChannelMediaRelay",[p3],Object.getOwnPropertyDescriptor(C3.prototype,"startChannelMediaRelay"),C3.prototype),YW(C3.prototype,"updateChannelMediaRelay",[f3],Object.getOwnPropertyDescriptor(C3.prototype,"updateChannelMediaRelay"),C3.prototype),YW(C3.prototype,"stopChannelMediaRelay",[m3],Object.getOwnPropertyDescriptor(C3.prototype,"stopChannelMediaRelay"),C3.prototype),YW(C3.prototype,"sendCustomReportMessage",[g3],Object.getOwnPropertyDescriptor(C3.prototype,"sendCustomReportMessage"),C3.prototype),YW(C3.prototype,"pickSVCLayer",[_3],Object.getOwnPropertyDescriptor(C3.prototype,"pickSVCLayer"),C3.prototype),YW(C3.prototype,"setRTMConfig",[E3],Object.getOwnPropertyDescriptor(C3.prototype,"setRTMConfig"),C3.prototype),YW(C3.prototype,"enableContentInspect",[y3],Object.getOwnPropertyDescriptor(C3.prototype,"enableContentInspect"),C3.prototype),YW(C3.prototype,"disableContentInspect",[v3],Object.getOwnPropertyDescriptor(C3.prototype,"disableContentInspect"),C3.prototype),YW(C3.prototype,"setImageModeration",[b3],Object.getOwnPropertyDescriptor(C3.prototype,"setImageModeration"),C3.prototype),YW(C3.prototype,"setP2PTransport",[S3],Object.getOwnPropertyDescriptor(C3.prototype,"setP2PTransport"),C3.prototype),YW(C3.prototype,"getJoinChannelServiceRecords",[T3],Object.getOwnPropertyDescriptor(C3.prototype,"getJoinChannelServiceRecords"),C3.prototype),YW(C3.prototype,"setPublishAudioFilterEnabled",[R3],Object.getOwnPropertyDescriptor(C3.prototype,"setPublishAudioFilterEnabled"),C3.prototype),C3);class O3{constructor(e,t){SU(this,"id",0),SU(this,"element",void 0),SU(this,"peerPair",void 0),SU(this,"context",void 0),SU(this,"audioPlayerElement",void 0),SU(this,"audioTrack",void 0),O3.count+=1,this.id=O3.count,this.element=e,this.context=t}initPeers(){this.peerPair=[new RTCPeerConnection,new RTCPeerConnection],this.peerPair[1].ontrack=e=>{const t=document.createElement("audio");t.srcObject=new MediaStream([e.track]),t.play(),this.audioPlayerElement=t}}async switchSdp(){if(!this.peerPair)return;const e=async(e,t)=>{const n="offer"===t?await e.createOffer():await e.createAnswer();return await e.setLocalDescription(n),"complete"===e.iceGatheringState?e.localDescription:new LO((t=>{e.onicegatheringstatechange=()=>{"complete"===e.iceGatheringState&&t(e.localDescription)}}))},t=async(e,t)=>await e.setRemoteDescription(t);try{const n=await e(this.peerPair[0],"offer");await t(this.peerPair[1],n);const r=await e(this.peerPair[1],"answer");await t(this.peerPair[0],r)}catch(e){throw new eW(ZB.LOCAL_AEC_ERROR,e.toString()).print()}}async getTracksFromMediaElement(e){if(this.audioTrack)return this.audioTrack;let t;try{e instanceof HTMLVideoElement&&(e.captureStream?e.captureStream():e.mozCaptureStream()),t=this.context.createMediaStreamDestination(),this.context.createMediaElementSource(e).connect(t)}catch(e){throw new eW(ZB.LOCAL_AEC_ERROR,e.toString()).print()}if(!t)throw new eW(ZB.LOCAL_AEC_ERROR,"no dest node when local aec").print();const n=t.stream.getAudioTracks()[0];return this.audioTrack=n,n}getElement(){return this.element}async startEchoCancellation(){this.context.resume(),this.peerPair&&this.close(),this.initPeers();const e=this.element,t=await this.getTracksFromMediaElement(e);this.peerPair&&this.peerPair[0].addTrack(t),await this.switchSdp()}close(){KH.debug("close echo cancellation unit, id is",this.id),this.audioPlayerElement&&this.audioPlayerElement.pause(),this.peerPair&&this.peerPair.forEach((e=>{e.close()})),this.peerPair=void 0,this.audioPlayerElement=void 0}}var x3,N3;SU(O3,"count",0);const P3=window.AudioContext||window.webkitAudioContext,D3=new(x3=$H({report:ZH}),YW((N3=class{constructor(){SU(this,"units",[]),SU(this,"context",void 0)}processExternalMediaAEC(e){if(!this._doesEnvironmentNeedAEC())return KH.debug("the system does not need to process local aec"),-1;this.context||(this.context=new P3);let t=this.units.find((t=>t&&t.getElement()===e));return t||(t=new O3(e,this.context),this.units.push(t)),t.startEchoCancellation(),KH.debug("start processing local audio echo cancellation, id is",t.id),t.id}_doesEnvironmentNeedAEC(){return SB().name!==EB.SAFARI}}).prototype,"processExternalMediaAEC",[x3],Object.getOwnPropertyDescriptor(N3.prototype,"processExternalMediaAEC"),N3.prototype),N3);function L3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k3(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L3(Object(n),!0).forEach((function(t){SU(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L3(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const M3=window||document;function U3(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!M3)return;const n=Z7._cspEventHandlerPointer;if(n&&t)return void console.error(n,t);const r=e=>{if(!(e&&e.blockedURI&&(Z7.onSecurityPolicyViolation||Z7.getListeners(KK.SECURITY_POLICY_VIOLATION).length>0)))return;const t=e.blockedURI;AH("CSP_DETECTED_HOSTNAME_LIST").some((e=>Fv(t).call(t,e)))&&(Z7.onSecurityPolicyViolation&&"function"==typeof Z7.onSecurityPolicyViolation&&Z7.onSecurityPolicyViolation(e),Z7.getListeners(KK.SECURITY_POLICY_VIOLATION).length>0&&Z7.safeEmit(KK.SECURITY_POLICY_VIOLATION,e))};n&&M3.removeEventListener("securitypolicyviolation",n),(t||e&&"function"==typeof e||Z7.getListeners(KK.SECURITY_POLICY_VIOLATION).length>0)&&M3.addEventListener("securitypolicyviolation",r),Z7._cspEventHandlerPointer=r}var V3=Rg,F3=rF,j3=RegExp.prototype,B3=gg((function(e){return e===j3||V3(j3,e)?F3(e):e.flags}));function G3(e){let t=e.length;for(;--t>=0;)e[t]=0}const H3=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),W3=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),K3=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),z3=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),q3=new Array(576);G3(q3);const Y3=new Array(60);G3(Y3);const J3=new Array(512);G3(J3);const X3=new Array(256);G3(X3);const Q3=new Array(29);G3(Q3);const $3=new Array(30);function Z3(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}let e6,t6,n6;function r6(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}G3($3);const i6=e=>e<256?J3[e]:J3[256+(e>>>7)],o6=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},s6=(e,t,n)=>{e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,o6(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},a6=(e,t,n)=>{s6(e,n[2*t],n[2*t+1])},c6=(e,t)=>{let n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1},d6=(e,t,n)=>{const r=new Array(16);let i,o,s=0;for(i=1;i<=15;i++)s=s+n[i-1]<<1,r[i]=s;for(o=0;o<=t;o++){let t=e[2*o+1];0!==t&&(e[2*o]=c6(r[t]++,t))}},l6=e=>{let t;for(t=0;t<286;t++)e.dyn_ltree[2*t]=0;for(t=0;t<30;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},h6=e=>{e.bi_valid>8?o6(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},u6=(e,t,n,r)=>{const i=2*t,o=2*n;return e[i]<e[o]||e[i]===e[o]&&r[t]<=r[n]},p6=(e,t,n)=>{const r=e.heap[n];let i=n<<1;for(;i<=e.heap_len&&(i<e.heap_len&&u6(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!u6(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r},f6=(e,t,n)=>{let r,i,o,s,a=0;if(0!==e.sym_next)do{r=255&e.pending_buf[e.sym_buf+a++],r+=(255&e.pending_buf[e.sym_buf+a++])<<8,i=e.pending_buf[e.sym_buf+a++],0===r?a6(e,i,t):(o=X3[i],a6(e,o+256+1,t),s=H3[o],0!==s&&(i-=Q3[o],s6(e,i,s)),r--,o=i6(r),a6(e,o,n),s=W3[o],0!==s&&(r-=$3[o],s6(e,r,s)))}while(a<e.sym_next);a6(e,256,t)},m6=(e,t)=>{const n=t.dyn_tree,r=t.stat_desc.static_tree,i=t.stat_desc.has_stree,o=t.stat_desc.elems;let s,a,c,d=-1;for(e.heap_len=0,e.heap_max=573,s=0;s<o;s++)0!==n[2*s]?(e.heap[++e.heap_len]=d=s,e.depth[s]=0):n[2*s+1]=0;for(;e.heap_len<2;)c=e.heap[++e.heap_len]=d<2?++d:0,n[2*c]=1,e.depth[c]=0,e.opt_len--,i&&(e.static_len-=r[2*c+1]);for(t.max_code=d,s=e.heap_len>>1;s>=1;s--)p6(e,n,s);c=o;do{s=e.heap[1],e.heap[1]=e.heap[e.heap_len--],p6(e,n,1),a=e.heap[1],e.heap[--e.heap_max]=s,e.heap[--e.heap_max]=a,n[2*c]=n[2*s]+n[2*a],e.depth[c]=(e.depth[s]>=e.depth[a]?e.depth[s]:e.depth[a])+1,n[2*s+1]=n[2*a+1]=c,e.heap[1]=c++,p6(e,n,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],((e,t)=>{const n=t.dyn_tree,r=t.max_code,i=t.stat_desc.static_tree,o=t.stat_desc.has_stree,s=t.stat_desc.extra_bits,a=t.stat_desc.extra_base,c=t.stat_desc.max_length;let d,l,h,u,p,f,m=0;for(u=0;u<=15;u++)e.bl_count[u]=0;for(n[2*e.heap[e.heap_max]+1]=0,d=e.heap_max+1;d<573;d++)l=e.heap[d],u=n[2*n[2*l+1]+1]+1,u>c&&(u=c,m++),n[2*l+1]=u,l>r||(e.bl_count[u]++,p=0,l>=a&&(p=s[l-a]),f=n[2*l],e.opt_len+=f*(u+p),o&&(e.static_len+=f*(i[2*l+1]+p)));if(0!==m){do{for(u=c-1;0===e.bl_count[u];)u--;e.bl_count[u]--,e.bl_count[u+1]+=2,e.bl_count[c]--,m-=2}while(m>0);for(u=c;0!==u;u--)for(l=e.bl_count[u];0!==l;)h=e.heap[--d],h>r||(n[2*h+1]!==u&&(e.opt_len+=(u-n[2*h+1])*n[2*h],n[2*h+1]=u),l--)}})(e,t),d6(n,d,e.bl_count)},g6=(e,t,n)=>{let r,i,o=-1,s=t[1],a=0,c=7,d=4;for(0===s&&(c=138,d=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)i=s,s=t[2*(r+1)+1],++a<c&&i===s||(a<d?e.bl_tree[2*i]+=a:0!==i?(i!==o&&e.bl_tree[2*i]++,e.bl_tree[32]++):a<=10?e.bl_tree[34]++:e.bl_tree[36]++,a=0,o=i,0===s?(c=138,d=3):i===s?(c=6,d=3):(c=7,d=4))},_6=(e,t,n)=>{let r,i,o=-1,s=t[1],a=0,c=7,d=4;for(0===s&&(c=138,d=3),r=0;r<=n;r++)if(i=s,s=t[2*(r+1)+1],!(++a<c&&i===s)){if(a<d)do{a6(e,i,e.bl_tree)}while(0!=--a);else 0!==i?(i!==o&&(a6(e,i,e.bl_tree),a--),a6(e,16,e.bl_tree),s6(e,a-3,2)):a<=10?(a6(e,17,e.bl_tree),s6(e,a-3,3)):(a6(e,18,e.bl_tree),s6(e,a-11,7));a=0,o=i,0===s?(c=138,d=3):i===s?(c=6,d=3):(c=7,d=4)}};let E6=!1;const y6=(e,t,n,r)=>{s6(e,0+(r?1:0),3),h6(e),o6(e,n),o6(e,~n),n&&e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n};var v6={_tr_init:e=>{E6||((()=>{let e,t,n,r,i;const o=new Array(16);for(n=0,r=0;r<28;r++)for(Q3[r]=n,e=0;e<1<<H3[r];e++)X3[n++]=r;for(X3[n-1]=r,i=0,r=0;r<16;r++)for($3[r]=i,e=0;e<1<<W3[r];e++)J3[i++]=r;for(i>>=7;r<30;r++)for($3[r]=i<<7,e=0;e<1<<W3[r]-7;e++)J3[256+i++]=r;for(t=0;t<=15;t++)o[t]=0;for(e=0;e<=143;)q3[2*e+1]=8,e++,o[8]++;for(;e<=255;)q3[2*e+1]=9,e++,o[9]++;for(;e<=279;)q3[2*e+1]=7,e++,o[7]++;for(;e<=287;)q3[2*e+1]=8,e++,o[8]++;for(d6(q3,287,o),e=0;e<30;e++)Y3[2*e+1]=5,Y3[2*e]=c6(e,5);e6=new Z3(q3,H3,257,286,15),t6=new Z3(Y3,W3,0,30,15),n6=new Z3(new Array(0),K3,0,19,7)})(),E6=!0),e.l_desc=new r6(e.dyn_ltree,e6),e.d_desc=new r6(e.dyn_dtree,t6),e.bl_desc=new r6(e.bl_tree,n6),e.bi_buf=0,e.bi_valid=0,l6(e)},_tr_stored_block:y6,_tr_flush_block:(e,t,n,r)=>{let i,o,s=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=(e=>{let t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<256;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0})(e)),m6(e,e.l_desc),m6(e,e.d_desc),s=(e=>{let t;for(g6(e,e.dyn_ltree,e.l_desc.max_code),g6(e,e.dyn_dtree,e.d_desc.max_code),m6(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*z3[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t})(e),i=e.opt_len+3+7>>>3,o=e.static_len+3+7>>>3,o<=i&&(i=o)):i=o=n+5,n+4<=i&&-1!==t?y6(e,t,n,r):4===e.strategy||o===i?(s6(e,2+(r?1:0),3),f6(e,q3,Y3)):(s6(e,4+(r?1:0),3),((e,t,n,r)=>{let i;for(s6(e,t-257,5),s6(e,n-1,5),s6(e,r-4,4),i=0;i<r;i++)s6(e,e.bl_tree[2*z3[i]+1],3);_6(e,e.dyn_ltree,t-1),_6(e,e.dyn_dtree,n-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),f6(e,e.dyn_ltree,e.dyn_dtree)),l6(e),r&&h6(e)},_tr_tally:(e,t,n)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=n,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(X3[n]+256+1)]++,e.dyn_dtree[2*i6(t)]++),e.sym_next===e.sym_end),_tr_align:e=>{s6(e,2,3),a6(e,256,q3),(e=>{16===e.bi_valid?(o6(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)})(e)}},b6=(e,t,n,r)=>{let i=65535&e,o=e>>>16&65535,s=0;for(;0!==n;){s=n>2e3?2e3:n,n-=s;do{i=i+t[r++]|0,o=o+i|0}while(--s);i%=65521,o%=65521}return i|o<<16};const S6=new Uint32Array((()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t})());var T6=(e,t,n,r)=>{const i=S6,o=r+n;e^=-1;for(let n=r;n<o;n++)e=e>>>8^i[255&(e^t[n])];return~e},R6={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},C6={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:w6,_tr_stored_block:I6,_tr_flush_block:A6,_tr_tally:O6,_tr_align:x6}=v6,{Z_NO_FLUSH:N6,Z_PARTIAL_FLUSH:P6,Z_FULL_FLUSH:D6,Z_FINISH:L6,Z_BLOCK:k6,Z_OK:M6,Z_STREAM_END:U6,Z_STREAM_ERROR:V6,Z_DATA_ERROR:F6,Z_BUF_ERROR:j6,Z_DEFAULT_COMPRESSION:B6,Z_FILTERED:G6,Z_HUFFMAN_ONLY:H6,Z_RLE:W6,Z_FIXED:K6,Z_DEFAULT_STRATEGY:z6,Z_UNKNOWN:q6,Z_DEFLATED:Y6}=C6,J6=258,X6=262,Q6=42,$6=113,Z6=666,e4=(e,t)=>(e.msg=R6[t],t),t4=e=>2*e-(e>4?9:0),n4=e=>{let t=e.length;for(;--t>=0;)e[t]=0},r4=e=>{let t,n,r,i=e.w_size;t=e.hash_size,r=t;do{n=e.head[--r],e.head[r]=n>=i?n-i:0}while(--t);t=i,r=t;do{n=e.prev[--r],e.prev[r]=n>=i?n-i:0}while(--t)};let i4=(e,t,n)=>(t<<e.hash_shift^n)&e.hash_mask;const o4=e=>{const t=e.state;let n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))},s4=(e,t)=>{A6(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,o4(e.strm)},a4=(e,t)=>{e.pending_buf[e.pending++]=t},c4=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},d4=(e,t,n,r)=>{let i=e.avail_in;return i>r&&(i=r),0===i?0:(e.avail_in-=i,t.set(e.input.subarray(e.next_in,e.next_in+i),n),1===e.state.wrap?e.adler=b6(e.adler,t,i,n):2===e.state.wrap&&(e.adler=T6(e.adler,t,i,n)),e.next_in+=i,e.total_in+=i,i)},l4=(e,t)=>{let n,r,i=e.max_chain_length,o=e.strstart,s=e.prev_length,a=e.nice_match;const c=e.strstart>e.w_size-X6?e.strstart-(e.w_size-X6):0,d=e.window,l=e.w_mask,h=e.prev,u=e.strstart+J6;let p=d[o+s-1],f=d[o+s];e.prev_length>=e.good_match&&(i>>=2),a>e.lookahead&&(a=e.lookahead);do{if(n=t,d[n+s]===f&&d[n+s-1]===p&&d[n]===d[o]&&d[++n]===d[o+1]){o+=2,n++;do{}while(d[++o]===d[++n]&&d[++o]===d[++n]&&d[++o]===d[++n]&&d[++o]===d[++n]&&d[++o]===d[++n]&&d[++o]===d[++n]&&d[++o]===d[++n]&&d[++o]===d[++n]&&o<u);if(r=J6-(u-o),o=u-J6,r>s){if(e.match_start=t,s=r,r>=a)break;p=d[o+s-1],f=d[o+s]}}}while((t=h[t&l])>c&&0!=--i);return s<=e.lookahead?s:e.lookahead},h4=e=>{const t=e.w_size;let n,r,i;do{if(r=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-X6)&&(e.window.set(e.window.subarray(t,t+t-r),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),r4(e),r+=t),0===e.strm.avail_in)break;if(n=d4(e.strm,e.window,e.strstart+e.lookahead,r),e.lookahead+=n,e.lookahead+e.insert>=3)for(i=e.strstart-e.insert,e.ins_h=e.window[i],e.ins_h=i4(e,e.ins_h,e.window[i+1]);e.insert&&(e.ins_h=i4(e,e.ins_h,e.window[i+3-1]),e.prev[i&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=i,i++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<X6&&0!==e.strm.avail_in)},u4=(e,t)=>{let n,r,i,o=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,s=0,a=e.strm.avail_in;do{if(n=65535,i=e.bi_valid+42>>3,e.strm.avail_out<i)break;if(i=e.strm.avail_out-i,r=e.strstart-e.block_start,n>r+e.strm.avail_in&&(n=r+e.strm.avail_in),n>i&&(n=i),n<o&&(0===n&&t!==L6||t===N6||n!==r+e.strm.avail_in))break;s=t===L6&&n===r+e.strm.avail_in?1:0,I6(e,0,0,s),e.pending_buf[e.pending-4]=n,e.pending_buf[e.pending-3]=n>>8,e.pending_buf[e.pending-2]=~n,e.pending_buf[e.pending-1]=~n>>8,o4(e.strm),r&&(r>n&&(r=n),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+r),e.strm.next_out),e.strm.next_out+=r,e.strm.avail_out-=r,e.strm.total_out+=r,e.block_start+=r,n-=r),n&&(d4(e.strm,e.strm.output,e.strm.next_out,n),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n)}while(0===s);return a-=e.strm.avail_in,a&&(a>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=a&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-a,e.strm.next_in),e.strstart),e.strstart+=a,e.insert+=a>e.w_size-e.insert?e.w_size-e.insert:a),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),s?4:t!==N6&&t!==L6&&0===e.strm.avail_in&&e.strstart===e.block_start?2:(i=e.window_size-e.strstart,e.strm.avail_in>i&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,i+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),i>e.strm.avail_in&&(i=e.strm.avail_in),i&&(d4(e.strm,e.window,e.strstart,i),e.strstart+=i,e.insert+=i>e.w_size-e.insert?e.w_size-e.insert:i),e.high_water<e.strstart&&(e.high_water=e.strstart),i=e.bi_valid+42>>3,i=e.pending_buf_size-i>65535?65535:e.pending_buf_size-i,o=i>e.w_size?e.w_size:i,r=e.strstart-e.block_start,(r>=o||(r||t===L6)&&t!==N6&&0===e.strm.avail_in&&r<=i)&&(n=r>i?i:r,s=t===L6&&0===e.strm.avail_in&&n===r?1:0,I6(e,e.block_start,n,s),e.block_start+=n,o4(e.strm)),s?3:1)},p4=(e,t)=>{let n,r;for(;;){if(e.lookahead<X6){if(h4(e),e.lookahead<X6&&t===N6)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=i4(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-X6&&(e.match_length=l4(e,n)),e.match_length>=3)if(r=O6(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=i4(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=i4(e,e.ins_h,e.window[e.strstart+1]);else r=O6(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(s4(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===L6?(s4(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(s4(e,!1),0===e.strm.avail_out)?1:2},f4=(e,t)=>{let n,r,i;for(;;){if(e.lookahead<X6){if(h4(e),e.lookahead<X6&&t===N6)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=i4(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-X6&&(e.match_length=l4(e,n),e.match_length<=5&&(e.strategy===G6||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-3,r=O6(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=i&&(e.ins_h=i4(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,r&&(s4(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if(r=O6(e,0,e.window[e.strstart-1]),r&&s4(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=O6(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===L6?(s4(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(s4(e,!1),0===e.strm.avail_out)?1:2};function m4(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}const g4=[new m4(0,0,0,0,u4),new m4(4,4,8,4,p4),new m4(4,5,16,8,p4),new m4(4,6,32,32,p4),new m4(4,4,16,16,f4),new m4(8,16,32,32,f4),new m4(8,16,128,128,f4),new m4(8,32,128,256,f4),new m4(32,128,258,1024,f4),new m4(32,258,258,4096,f4)];function _4(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Y6,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),n4(this.dyn_ltree),n4(this.dyn_dtree),n4(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),n4(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),n4(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const E4=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.status!==Q6&&57!==t.status&&69!==t.status&&73!==t.status&&91!==t.status&&103!==t.status&&t.status!==$6&&t.status!==Z6?1:0},y4=e=>{if(E4(e))return e4(e,V6);e.total_in=e.total_out=0,e.data_type=q6;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=2===t.wrap?57:t.wrap?Q6:$6,e.adler=2===t.wrap?0:1,t.last_flush=-2,w6(t),M6},v4=e=>{const t=y4(e);return t===M6&&(e=>{e.window_size=2*e.w_size,n4(e.head),e.max_lazy_match=g4[e.level].max_lazy,e.good_match=g4[e.level].good_length,e.nice_match=g4[e.level].nice_length,e.max_chain_length=g4[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0})(e.state),t},b4=(e,t,n,r,i,o)=>{if(!e)return V6;let s=1;if(t===B6&&(t=6),r<0?(s=0,r=-r):r>15&&(s=2,r-=16),i<1||i>9||n!==Y6||r<8||r>15||t<0||t>9||o<0||o>K6||8===r&&1!==s)return e4(e,V6);8===r&&(r=9);const a=new _4;return e.state=a,a.strm=e,a.status=Q6,a.wrap=s,a.gzhead=null,a.w_bits=r,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=i+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+3-1)/3),a.window=new Uint8Array(2*a.w_size),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<i+6,a.pending_buf_size=4*a.lit_bufsize,a.pending_buf=new Uint8Array(a.pending_buf_size),a.sym_buf=a.lit_bufsize,a.sym_end=3*(a.lit_bufsize-1),a.level=t,a.strategy=o,a.method=n,v4(e)};var S4=b4,T4=(e,t)=>E4(e)||2!==e.state.wrap?V6:(e.state.gzhead=t,M6),R4=(e,t)=>{if(E4(e)||t>k6||t<0)return e?e4(e,V6):V6;const n=e.state;if(!e.output||0!==e.avail_in&&!e.input||n.status===Z6&&t!==L6)return e4(e,0===e.avail_out?j6:V6);const r=n.last_flush;if(n.last_flush=t,0!==n.pending){if(o4(e),0===e.avail_out)return n.last_flush=-1,M6}else if(0===e.avail_in&&t4(t)<=t4(r)&&t!==L6)return e4(e,j6);if(n.status===Z6&&0!==e.avail_in)return e4(e,j6);if(n.status===Q6&&0===n.wrap&&(n.status=$6),n.status===Q6){let t=Y6+(n.w_bits-8<<4)<<8,r=-1;if(r=n.strategy>=H6||n.level<2?0:n.level<6?1:6===n.level?2:3,t|=r<<6,0!==n.strstart&&(t|=32),t+=31-t%31,c4(n,t),0!==n.strstart&&(c4(n,e.adler>>>16),c4(n,65535&e.adler)),e.adler=1,n.status=$6,o4(e),0!==n.pending)return n.last_flush=-1,M6}if(57===n.status)if(e.adler=0,a4(n,31),a4(n,139),a4(n,8),n.gzhead)a4(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),a4(n,255&n.gzhead.time),a4(n,n.gzhead.time>>8&255),a4(n,n.gzhead.time>>16&255),a4(n,n.gzhead.time>>24&255),a4(n,9===n.level?2:n.strategy>=H6||n.level<2?4:0),a4(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(a4(n,255&n.gzhead.extra.length),a4(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=T6(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69;else if(a4(n,0),a4(n,0),a4(n,0),a4(n,0),a4(n,0),a4(n,9===n.level?2:n.strategy>=H6||n.level<2?4:0),a4(n,3),n.status=$6,o4(e),0!==n.pending)return n.last_flush=-1,M6;if(69===n.status){if(n.gzhead.extra){let t=n.pending,r=(65535&n.gzhead.extra.length)-n.gzindex;for(;n.pending+r>n.pending_buf_size;){let i=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+i),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>t&&(e.adler=T6(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex+=i,o4(e),0!==n.pending)return n.last_flush=-1,M6;t=0,r-=i}let i=new Uint8Array(n.gzhead.extra);n.pending_buf.set(i.subarray(n.gzindex,n.gzindex+r),n.pending),n.pending+=r,n.gzhead.hcrc&&n.pending>t&&(e.adler=T6(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex=0}n.status=73}if(73===n.status){if(n.gzhead.name){let t,r=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>r&&(e.adler=T6(e.adler,n.pending_buf,n.pending-r,r)),o4(e),0!==n.pending)return n.last_flush=-1,M6;r=0}t=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,a4(n,t)}while(0!==t);n.gzhead.hcrc&&n.pending>r&&(e.adler=T6(e.adler,n.pending_buf,n.pending-r,r)),n.gzindex=0}n.status=91}if(91===n.status){if(n.gzhead.comment){let t,r=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>r&&(e.adler=T6(e.adler,n.pending_buf,n.pending-r,r)),o4(e),0!==n.pending)return n.last_flush=-1,M6;r=0}t=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,a4(n,t)}while(0!==t);n.gzhead.hcrc&&n.pending>r&&(e.adler=T6(e.adler,n.pending_buf,n.pending-r,r))}n.status=103}if(103===n.status){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(o4(e),0!==n.pending))return n.last_flush=-1,M6;a4(n,255&e.adler),a4(n,e.adler>>8&255),e.adler=0}if(n.status=$6,o4(e),0!==n.pending)return n.last_flush=-1,M6}if(0!==e.avail_in||0!==n.lookahead||t!==N6&&n.status!==Z6){let r=0===n.level?u4(n,t):n.strategy===H6?((e,t)=>{let n;for(;;){if(0===e.lookahead&&(h4(e),0===e.lookahead)){if(t===N6)return 1;break}if(e.match_length=0,n=O6(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(s4(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===L6?(s4(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(s4(e,!1),0===e.strm.avail_out)?1:2})(n,t):n.strategy===W6?((e,t)=>{let n,r,i,o;const s=e.window;for(;;){if(e.lookahead<=J6){if(h4(e),e.lookahead<=J6&&t===N6)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(i=e.strstart-1,r=s[i],r===s[++i]&&r===s[++i]&&r===s[++i])){o=e.strstart+J6;do{}while(r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&i<o);e.match_length=J6-(o-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(n=O6(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=O6(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(s4(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===L6?(s4(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(s4(e,!1),0===e.strm.avail_out)?1:2})(n,t):g4[n.level].func(n,t);if(3!==r&&4!==r||(n.status=Z6),1===r||3===r)return 0===e.avail_out&&(n.last_flush=-1),M6;if(2===r&&(t===P6?x6(n):t!==k6&&(I6(n,0,0,!1),t===D6&&(n4(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),o4(e),0===e.avail_out))return n.last_flush=-1,M6}return t!==L6?M6:n.wrap<=0?U6:(2===n.wrap?(a4(n,255&e.adler),a4(n,e.adler>>8&255),a4(n,e.adler>>16&255),a4(n,e.adler>>24&255),a4(n,255&e.total_in),a4(n,e.total_in>>8&255),a4(n,e.total_in>>16&255),a4(n,e.total_in>>24&255)):(c4(n,e.adler>>>16),c4(n,65535&e.adler)),o4(e),n.wrap>0&&(n.wrap=-n.wrap),0!==n.pending?M6:U6)},C4=e=>{if(E4(e))return V6;const t=e.state.status;return e.state=null,t===$6?e4(e,F6):M6},w4=(e,t)=>{let n=t.length;if(E4(e))return V6;const r=e.state,i=r.wrap;if(2===i||1===i&&r.status!==Q6||r.lookahead)return V6;if(1===i&&(e.adler=b6(e.adler,t,n,0)),r.wrap=0,n>=r.w_size){0===i&&(n4(r.head),r.strstart=0,r.block_start=0,r.insert=0);let e=new Uint8Array(r.w_size);e.set(t.subarray(n-r.w_size,n),0),t=e,n=r.w_size}const o=e.avail_in,s=e.next_in,a=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,h4(r);r.lookahead>=3;){let e=r.strstart,t=r.lookahead-2;do{r.ins_h=i4(r,r.ins_h,r.window[e+3-1]),r.prev[e&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=e,e++}while(--t);r.strstart=e,r.lookahead=2,h4(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,e.next_in=s,e.input=a,e.avail_in=o,r.wrap=i,M6};const I4=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var A4=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(const t in n)I4(n,t)&&(e[t]=n[t])}}return e},O4=e=>{let t=0;for(let n=0,r=e.length;n<r;n++)t+=e[n].length;const n=new Uint8Array(t);for(let t=0,r=0,i=e.length;t<i;t++){let i=e[t];n.set(i,r),r+=i.length}return n};let x4=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){x4=!1}const N4=new Uint8Array(256);for(let e=0;e<256;e++)N4[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;N4[254]=N4[254]=1;var P4=e=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);let t,n,r,i,o,s=e.length,a=0;for(i=0;i<s;i++)n=e.charCodeAt(i),55296==(64512&n)&&i+1<s&&(r=e.charCodeAt(i+1),56320==(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),i++)),a+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(a),o=0,i=0;o<a;i++)n=e.charCodeAt(i),55296==(64512&n)&&i+1<s&&(r=e.charCodeAt(i+1),56320==(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),i++)),n<128?t[o++]=n:n<2048?(t[o++]=192|n>>>6,t[o++]=128|63&n):n<65536?(t[o++]=224|n>>>12,t[o++]=128|n>>>6&63,t[o++]=128|63&n):(t[o++]=240|n>>>18,t[o++]=128|n>>>12&63,t[o++]=128|n>>>6&63,t[o++]=128|63&n);return t},D4=(e,t)=>{const n=t||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));let r,i;const o=new Array(2*n);for(i=0,r=0;r<n;){let t=e[r++];if(t<128){o[i++]=t;continue}let s=N4[t];if(s>4)o[i++]=65533,r+=s-1;else{for(t&=2===s?31:3===s?15:7;s>1&&r<n;)t=t<<6|63&e[r++],s--;s>1?o[i++]=65533:t<65536?o[i++]=t:(t-=65536,o[i++]=55296|t>>10&1023,o[i++]=56320|1023&t)}}return((e,t)=>{if(t<65534&&e.subarray&&x4)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n})(o,i)},L4=(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let n=t-1;for(;n>=0&&128==(192&e[n]);)n--;return n<0||0===n?t:n+N4[e[n]]>t?n:t},k4=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const M4=Object.prototype.toString,{Z_NO_FLUSH:U4,Z_SYNC_FLUSH:V4,Z_FULL_FLUSH:F4,Z_FINISH:j4,Z_OK:B4,Z_STREAM_END:G4,Z_DEFAULT_COMPRESSION:H4,Z_DEFAULT_STRATEGY:W4,Z_DEFLATED:K4}=C6;function z4(e){this.options=A4({level:H4,method:K4,chunkSize:16384,windowBits:15,memLevel:8,strategy:W4},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new k4,this.strm.avail_out=0;let n=S4(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==B4)throw new Error(R6[n]);if(t.header&&T4(this.strm,t.header),t.dictionary){let e;if(e="string"==typeof t.dictionary?P4(t.dictionary):"[object ArrayBuffer]"===M4.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,n=w4(this.strm,e),n!==B4)throw new Error(R6[n]);this._dict_set=!0}}function q4(e,t){const n=new z4(t);if(n.push(e,!0),n.err)throw n.msg||R6[n.err];return n.result}z4.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize;let i,o;if(this.ended)return!1;for(o=t===~~t?t:!0===t?j4:U4,"string"==typeof e?n.input=P4(e):"[object ArrayBuffer]"===M4.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;)if(0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),(o===V4||o===F4)&&n.avail_out<=6)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else{if(i=R4(n,o),i===G4)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),i=C4(this.strm),this.onEnd(i),this.ended=!0,i===B4;if(0!==n.avail_out){if(o>0&&n.next_out>0)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else if(0===n.avail_in)break}else this.onData(n.output)}return!0},z4.prototype.onData=function(e){this.chunks.push(e)},z4.prototype.onEnd=function(e){e===B4&&(this.result=O4(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var Y4={Deflate:z4,deflate:q4,deflateRaw:function(e,t){return(t=t||{}).raw=!0,q4(e,t)},gzip:function(e,t){return(t=t||{}).gzip=!0,q4(e,t)},constants:C6};const J4=16209;var X4=function(e,t){let n,r,i,o,s,a,c,d,l,h,u,p,f,m,g,_,E,y,v,b,S,T,R,C;const w=e.state;n=e.next_in,R=e.input,r=n+(e.avail_in-5),i=e.next_out,C=e.output,o=i-(t-e.avail_out),s=i+(e.avail_out-257),a=w.dmax,c=w.wsize,d=w.whave,l=w.wnext,h=w.window,u=w.hold,p=w.bits,f=w.lencode,m=w.distcode,g=(1<<w.lenbits)-1,_=(1<<w.distbits)-1;e:do{p<15&&(u+=R[n++]<<p,p+=8,u+=R[n++]<<p,p+=8),E=f[u&g];t:for(;;){if(y=E>>>24,u>>>=y,p-=y,y=E>>>16&255,0===y)C[i++]=65535&E;else{if(!(16&y)){if(!(64&y)){E=f[(65535&E)+(u&(1<<y)-1)];continue t}if(32&y){w.mode=16191;break e}e.msg="invalid literal/length code",w.mode=J4;break e}v=65535&E,y&=15,y&&(p<y&&(u+=R[n++]<<p,p+=8),v+=u&(1<<y)-1,u>>>=y,p-=y),p<15&&(u+=R[n++]<<p,p+=8,u+=R[n++]<<p,p+=8),E=m[u&_];n:for(;;){if(y=E>>>24,u>>>=y,p-=y,y=E>>>16&255,!(16&y)){if(!(64&y)){E=m[(65535&E)+(u&(1<<y)-1)];continue n}e.msg="invalid distance code",w.mode=J4;break e}if(b=65535&E,y&=15,p<y&&(u+=R[n++]<<p,p+=8,p<y&&(u+=R[n++]<<p,p+=8)),b+=u&(1<<y)-1,b>a){e.msg="invalid distance too far back",w.mode=J4;break e}if(u>>>=y,p-=y,y=i-o,b>y){if(y=b-y,y>d&&w.sane){e.msg="invalid distance too far back",w.mode=J4;break e}if(S=0,T=h,0===l){if(S+=c-y,y<v){v-=y;do{C[i++]=h[S++]}while(--y);S=i-b,T=C}}else if(l<y){if(S+=c+l-y,y-=l,y<v){v-=y;do{C[i++]=h[S++]}while(--y);if(S=0,l<v){y=l,v-=y;do{C[i++]=h[S++]}while(--y);S=i-b,T=C}}}else if(S+=l-y,y<v){v-=y;do{C[i++]=h[S++]}while(--y);S=i-b,T=C}for(;v>2;)C[i++]=T[S++],C[i++]=T[S++],C[i++]=T[S++],v-=3;v&&(C[i++]=T[S++],v>1&&(C[i++]=T[S++]))}else{S=i-b;do{C[i++]=C[S++],C[i++]=C[S++],C[i++]=C[S++],v-=3}while(v>2);v&&(C[i++]=C[S++],v>1&&(C[i++]=C[S++]))}break}}break}}while(n<r&&i<s);v=p>>3,n-=v,p-=v<<3,u&=(1<<p)-1,e.next_in=n,e.next_out=i,e.avail_in=n<r?r-n+5:5-(n-r),e.avail_out=i<s?s-i+257:257-(i-s),w.hold=u,w.bits=p};const Q4=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),$4=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Z4=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),e8=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var t8=(e,t,n,r,i,o,s,a)=>{const c=a.bits;let d,l,h,u,p,f,m=0,g=0,_=0,E=0,y=0,v=0,b=0,S=0,T=0,R=0,C=null;const w=new Uint16Array(16),I=new Uint16Array(16);let A,O,x,N=null;for(m=0;m<=15;m++)w[m]=0;for(g=0;g<r;g++)w[t[n+g]]++;for(y=c,E=15;E>=1&&0===w[E];E--);if(y>E&&(y=E),0===E)return i[o++]=20971520,i[o++]=20971520,a.bits=1,0;for(_=1;_<E&&0===w[_];_++);for(y<_&&(y=_),S=1,m=1;m<=15;m++)if(S<<=1,S-=w[m],S<0)return-1;if(S>0&&(0===e||1!==E))return-1;for(I[1]=0,m=1;m<15;m++)I[m+1]=I[m]+w[m];for(g=0;g<r;g++)0!==t[n+g]&&(s[I[t[n+g]]++]=g);if(0===e?(C=N=s,f=20):1===e?(C=Q4,N=$4,f=257):(C=Z4,N=e8,f=0),R=0,g=0,m=_,p=o,v=y,b=0,h=-1,T=1<<y,u=T-1,1===e&&T>852||2===e&&T>592)return 1;for(;;){A=m-b,s[g]+1<f?(O=0,x=s[g]):s[g]>=f?(O=N[s[g]-f],x=C[s[g]-f]):(O=96,x=0),d=1<<m-b,l=1<<v,_=l;do{l-=d,i[p+(R>>b)+l]=A<<24|O<<16|x}while(0!==l);for(d=1<<m-1;R&d;)d>>=1;if(0!==d?(R&=d-1,R+=d):R=0,g++,0==--w[m]){if(m===E)break;m=t[n+s[g]]}if(m>y&&(R&u)!==h){for(0===b&&(b=y),p+=_,v=m-b,S=1<<v;v+b<E&&(S-=w[v+b],!(S<=0));)v++,S<<=1;if(T+=1<<v,1===e&&T>852||2===e&&T>592)return 1;h=R&u,i[h]=y<<24|v<<16|p-o}}return 0!==R&&(i[p+R]=m-b<<24|64<<16),a.bits=y,0};const{Z_FINISH:n8,Z_BLOCK:r8,Z_TREES:i8,Z_OK:o8,Z_STREAM_END:s8,Z_NEED_DICT:a8,Z_STREAM_ERROR:c8,Z_DATA_ERROR:d8,Z_MEM_ERROR:l8,Z_BUF_ERROR:h8,Z_DEFLATED:u8}=C6,p8=16180,f8=16190,m8=16191,g8=16192,_8=16194,E8=16199,y8=16200,v8=16206,b8=16209,S8=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function T8(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const R8=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<p8||t.mode>16211?1:0},C8=e=>{if(R8(e))return c8;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=p8,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,o8},w8=e=>{if(R8(e))return c8;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,C8(e)},I8=(e,t)=>{let n;if(R8(e))return c8;const r=e.state;return t<0?(n=0,t=-t):(n=5+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?c8:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,w8(e))},A8=(e,t)=>{if(!e)return c8;const n=new T8;e.state=n,n.strm=e,n.window=null,n.mode=p8;const r=I8(e,t);return r!==o8&&(e.state=null),r};let O8,x8,N8=!0;const P8=e=>{if(N8){O8=new Int32Array(512),x8=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(t8(1,e.lens,0,288,O8,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;t8(2,e.lens,0,32,x8,0,e.work,{bits:5}),N8=!1}e.lencode=O8,e.lenbits=9,e.distcode=x8,e.distbits=5},D8=(e,t,n,r)=>{let i;const o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),r>=o.wsize?(o.window.set(t.subarray(n-o.wsize,n),0),o.wnext=0,o.whave=o.wsize):(i=o.wsize-o.wnext,i>r&&(i=r),o.window.set(t.subarray(n-r,n-r+i),o.wnext),(r-=i)?(o.window.set(t.subarray(n-r,n),0),o.wnext=r,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0};var L8=w8,k8=A8,M8=(e,t)=>{let n,r,i,o,s,a,c,d,l,h,u,p,f,m,g,_,E,y,v,b,S,T,R=0;const C=new Uint8Array(4);let w,I;const A=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(R8(e)||!e.output||!e.input&&0!==e.avail_in)return c8;n=e.state,n.mode===m8&&(n.mode=g8),s=e.next_out,i=e.output,c=e.avail_out,o=e.next_in,r=e.input,a=e.avail_in,d=n.hold,l=n.bits,h=a,u=c,T=o8;e:for(;;)switch(n.mode){case p8:if(0===n.wrap){n.mode=g8;break}for(;l<16;){if(0===a)break e;a--,d+=r[o++]<<l,l+=8}if(2&n.wrap&&35615===d){0===n.wbits&&(n.wbits=15),n.check=0,C[0]=255&d,C[1]=d>>>8&255,n.check=T6(n.check,C,2,0),d=0,l=0,n.mode=16181;break}if(n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&d)<<8)+(d>>8))%31){e.msg="incorrect header check",n.mode=b8;break}if((15&d)!==u8){e.msg="unknown compression method",n.mode=b8;break}if(d>>>=4,l-=4,S=8+(15&d),0===n.wbits&&(n.wbits=S),S>15||S>n.wbits){e.msg="invalid window size",n.mode=b8;break}n.dmax=1<<n.wbits,n.flags=0,e.adler=n.check=1,n.mode=512&d?16189:m8,d=0,l=0;break;case 16181:for(;l<16;){if(0===a)break e;a--,d+=r[o++]<<l,l+=8}if(n.flags=d,(255&B3(n))!==u8){e.msg="unknown compression method",n.mode=b8;break}if(57344&B3(n)){e.msg="unknown header flags set",n.mode=b8;break}n.head&&(n.head.text=d>>8&1),512&B3(n)&&4&n.wrap&&(C[0]=255&d,C[1]=d>>>8&255,n.check=T6(n.check,C,2,0)),d=0,l=0,n.mode=16182;case 16182:for(;l<32;){if(0===a)break e;a--,d+=r[o++]<<l,l+=8}n.head&&(n.head.time=d),512&B3(n)&&4&n.wrap&&(C[0]=255&d,C[1]=d>>>8&255,C[2]=d>>>16&255,C[3]=d>>>24&255,n.check=T6(n.check,C,4,0)),d=0,l=0,n.mode=16183;case 16183:for(;l<16;){if(0===a)break e;a--,d+=r[o++]<<l,l+=8}n.head&&(n.head.xflags=255&d,n.head.os=d>>8),512&B3(n)&&4&n.wrap&&(C[0]=255&d,C[1]=d>>>8&255,n.check=T6(n.check,C,2,0)),d=0,l=0,n.mode=16184;case 16184:if(1024&B3(n)){for(;l<16;){if(0===a)break e;a--,d+=r[o++]<<l,l+=8}n.length=d,n.head&&(n.head.extra_len=d),512&B3(n)&&4&n.wrap&&(C[0]=255&d,C[1]=d>>>8&255,n.check=T6(n.check,C,2,0)),d=0,l=0}else n.head&&(n.head.extra=null);n.mode=16185;case 16185:if(1024&B3(n)&&(p=n.length,p>a&&(p=a),p&&(n.head&&(S=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(o,o+p),S)),512&B3(n)&&4&n.wrap&&(n.check=T6(n.check,r,p,o)),a-=p,o+=p,n.length-=p),n.length))break e;n.length=0,n.mode=16186;case 16186:if(2048&B3(n)){if(0===a)break e;p=0;do{S=r[o+p++],n.head&&S&&n.length<65536&&(n.head.name+=String.fromCharCode(S))}while(S&&p<a);if(512&B3(n)&&4&n.wrap&&(n.check=T6(n.check,r,p,o)),a-=p,o+=p,S)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=16187;case 16187:if(4096&B3(n)){if(0===a)break e;p=0;do{S=r[o+p++],n.head&&S&&n.length<65536&&(n.head.comment+=String.fromCharCode(S))}while(S&&p<a);if(512&B3(n)&&4&n.wrap&&(n.check=T6(n.check,r,p,o)),a-=p,o+=p,S)break e}else n.head&&(n.head.comment=null);n.mode=16188;case 16188:if(512&B3(n)){for(;l<16;){if(0===a)break e;a--,d+=r[o++]<<l,l+=8}if(4&n.wrap&&d!==(65535&n.check)){e.msg="header crc mismatch",n.mode=b8;break}d=0,l=0}n.head&&(n.head.hcrc=B3(n)>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=m8;break;case 16189:for(;l<32;){if(0===a)break e;a--,d+=r[o++]<<l,l+=8}e.adler=n.check=S8(d),d=0,l=0,n.mode=f8;case f8:if(0===n.havedict)return e.next_out=s,e.avail_out=c,e.next_in=o,e.avail_in=a,n.hold=d,n.bits=l,a8;e.adler=n.check=1,n.mode=m8;case m8:if(t===r8||t===i8)break e;case g8:if(n.last){d>>>=7&l,l-=7&l,n.mode=v8;break}for(;l<3;){if(0===a)break e;a--,d+=r[o++]<<l,l+=8}switch(n.last=1&d,d>>>=1,l-=1,3&d){case 0:n.mode=16193;break;case 1:if(P8(n),n.mode=E8,t===i8){d>>>=2,l-=2;break e}break;case 2:n.mode=16196;break;case 3:e.msg="invalid block type",n.mode=b8}d>>>=2,l-=2;break;case 16193:for(d>>>=7&l,l-=7&l;l<32;){if(0===a)break e;a--,d+=r[o++]<<l,l+=8}if((65535&d)!=(d>>>16^65535)){e.msg="invalid stored block lengths",n.mode=b8;break}if(n.length=65535&d,d=0,l=0,n.mode=_8,t===i8)break e;case _8:n.mode=16195;case 16195:if(p=n.length,p){if(p>a&&(p=a),p>c&&(p=c),0===p)break e;i.set(r.subarray(o,o+p),s),a-=p,o+=p,c-=p,s+=p,n.length-=p;break}n.mode=m8;break;case 16196:for(;l<14;){if(0===a)break e;a--,d+=r[o++]<<l,l+=8}if(n.nlen=257+(31&d),d>>>=5,l-=5,n.ndist=1+(31&d),d>>>=5,l-=5,n.ncode=4+(15&d),d>>>=4,l-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=b8;break}n.have=0,n.mode=16197;case 16197:for(;n.have<n.ncode;){for(;l<3;){if(0===a)break e;a--,d+=r[o++]<<l,l+=8}n.lens[A[n.have++]]=7&d,d>>>=3,l-=3}for(;n.have<19;)n.lens[A[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,w={bits:n.lenbits},T=t8(0,n.lens,0,19,n.lencode,0,n.work,w),n.lenbits=w.bits,T){e.msg="invalid code lengths set",n.mode=b8;break}n.have=0,n.mode=16198;case 16198:for(;n.have<n.nlen+n.ndist;){for(;R=n.lencode[d&(1<<n.lenbits)-1],g=R>>>24,_=R>>>16&255,E=65535&R,!(g<=l);){if(0===a)break e;a--,d+=r[o++]<<l,l+=8}if(E<16)d>>>=g,l-=g,n.lens[n.have++]=E;else{if(16===E){for(I=g+2;l<I;){if(0===a)break e;a--,d+=r[o++]<<l,l+=8}if(d>>>=g,l-=g,0===n.have){e.msg="invalid bit length repeat",n.mode=b8;break}S=n.lens[n.have-1],p=3+(3&d),d>>>=2,l-=2}else if(17===E){for(I=g+3;l<I;){if(0===a)break e;a--,d+=r[o++]<<l,l+=8}d>>>=g,l-=g,S=0,p=3+(7&d),d>>>=3,l-=3}else{for(I=g+7;l<I;){if(0===a)break e;a--,d+=r[o++]<<l,l+=8}d>>>=g,l-=g,S=0,p=11+(127&d),d>>>=7,l-=7}if(n.have+p>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=b8;break}for(;p--;)n.lens[n.have++]=S}}if(n.mode===b8)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=b8;break}if(n.lenbits=9,w={bits:n.lenbits},T=t8(1,n.lens,0,n.nlen,n.lencode,0,n.work,w),n.lenbits=w.bits,T){e.msg="invalid literal/lengths set",n.mode=b8;break}if(n.distbits=6,n.distcode=n.distdyn,w={bits:n.distbits},T=t8(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,w),n.distbits=w.bits,T){e.msg="invalid distances set",n.mode=b8;break}if(n.mode=E8,t===i8)break e;case E8:n.mode=y8;case y8:if(a>=6&&c>=258){e.next_out=s,e.avail_out=c,e.next_in=o,e.avail_in=a,n.hold=d,n.bits=l,X4(e,u),s=e.next_out,i=e.output,c=e.avail_out,o=e.next_in,r=e.input,a=e.avail_in,d=n.hold,l=n.bits,n.mode===m8&&(n.back=-1);break}for(n.back=0;R=n.lencode[d&(1<<n.lenbits)-1],g=R>>>24,_=R>>>16&255,E=65535&R,!(g<=l);){if(0===a)break e;a--,d+=r[o++]<<l,l+=8}if(_&&!(240&_)){for(y=g,v=_,b=E;R=n.lencode[b+((d&(1<<y+v)-1)>>y)],g=R>>>24,_=R>>>16&255,E=65535&R,!(y+g<=l);){if(0===a)break e;a--,d+=r[o++]<<l,l+=8}d>>>=y,l-=y,n.back+=y}if(d>>>=g,l-=g,n.back+=g,n.length=E,0===_){n.mode=16205;break}if(32&_){n.back=-1,n.mode=m8;break}if(64&_){e.msg="invalid literal/length code",n.mode=b8;break}n.extra=15&_,n.mode=16201;case 16201:if(n.extra){for(I=n.extra;l<I;){if(0===a)break e;a--,d+=r[o++]<<l,l+=8}n.length+=d&(1<<n.extra)-1,d>>>=n.extra,l-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=16202;case 16202:for(;R=n.distcode[d&(1<<n.distbits)-1],g=R>>>24,_=R>>>16&255,E=65535&R,!(g<=l);){if(0===a)break e;a--,d+=r[o++]<<l,l+=8}if(!(240&_)){for(y=g,v=_,b=E;R=n.distcode[b+((d&(1<<y+v)-1)>>y)],g=R>>>24,_=R>>>16&255,E=65535&R,!(y+g<=l);){if(0===a)break e;a--,d+=r[o++]<<l,l+=8}d>>>=y,l-=y,n.back+=y}if(d>>>=g,l-=g,n.back+=g,64&_){e.msg="invalid distance code",n.mode=b8;break}n.offset=E,n.extra=15&_,n.mode=16203;case 16203:if(n.extra){for(I=n.extra;l<I;){if(0===a)break e;a--,d+=r[o++]<<l,l+=8}n.offset+=d&(1<<n.extra)-1,d>>>=n.extra,l-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=b8;break}n.mode=16204;case 16204:if(0===c)break e;if(p=u-c,n.offset>p){if(p=n.offset-p,p>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=b8;break}p>n.wnext?(p-=n.wnext,f=n.wsize-p):f=n.wnext-p,p>n.length&&(p=n.length),m=n.window}else m=i,f=s-n.offset,p=n.length;p>c&&(p=c),c-=p,n.length-=p;do{i[s++]=m[f++]}while(--p);0===n.length&&(n.mode=y8);break;case 16205:if(0===c)break e;i[s++]=n.length,c--,n.mode=y8;break;case v8:if(n.wrap){for(;l<32;){if(0===a)break e;a--,d|=r[o++]<<l,l+=8}if(u-=c,e.total_out+=u,n.total+=u,4&n.wrap&&u&&(e.adler=n.check=B3(n)?T6(n.check,i,u,s-u):b6(n.check,i,u,s-u)),u=c,4&n.wrap&&(B3(n)?d:S8(d))!==n.check){e.msg="incorrect data check",n.mode=b8;break}d=0,l=0}n.mode=16207;case 16207:if(n.wrap&&B3(n)){for(;l<32;){if(0===a)break e;a--,d+=r[o++]<<l,l+=8}if(4&n.wrap&&d!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=b8;break}d=0,l=0}n.mode=16208;case 16208:T=s8;break e;case b8:T=d8;break e;case 16210:return l8;default:return c8}return e.next_out=s,e.avail_out=c,e.next_in=o,e.avail_in=a,n.hold=d,n.bits=l,(n.wsize||u!==e.avail_out&&n.mode<b8&&(n.mode<v8||t!==n8))&&D8(e,e.output,e.next_out,u-e.avail_out),h-=e.avail_in,u-=e.avail_out,e.total_in+=h,e.total_out+=u,n.total+=u,4&n.wrap&&u&&(e.adler=n.check=B3(n)?T6(n.check,i,u,e.next_out-u):b6(n.check,i,u,e.next_out-u)),e.data_type=n.bits+(n.last?64:0)+(n.mode===m8?128:0)+(n.mode===E8||n.mode===_8?256:0),(0===h&&0===u||t===n8)&&T===o8&&(T=h8),T},U8=e=>{if(R8(e))return c8;let t=e.state;return t.window&&(t.window=null),e.state=null,o8},V8=(e,t)=>{if(R8(e))return c8;const n=e.state;return 2&n.wrap?(n.head=t,t.done=!1,o8):c8},F8=(e,t)=>{const n=t.length;let r,i,o;return R8(e)?c8:(r=e.state,0!==r.wrap&&r.mode!==f8?c8:r.mode===f8&&(i=1,i=b6(i,t,n,0),i!==r.check)?d8:(o=D8(e,t,n,n),o?(r.mode=16210,l8):(r.havedict=1,o8)))},j8=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const B8=Object.prototype.toString,{Z_NO_FLUSH:G8,Z_FINISH:H8,Z_OK:W8,Z_STREAM_END:K8,Z_NEED_DICT:z8,Z_STREAM_ERROR:q8,Z_DATA_ERROR:Y8,Z_MEM_ERROR:J8}=C6;function X8(e){this.options=A4({chunkSize:65536,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&!(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new k4,this.strm.avail_out=0;let n=k8(this.strm,t.windowBits);if(n!==W8)throw new Error(R6[n]);if(this.header=new j8,V8(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=P4(t.dictionary):"[object ArrayBuffer]"===B8.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=F8(this.strm,t.dictionary),n!==W8)))throw new Error(R6[n])}function Q8(e,t){const n=new X8(t);if(n.push(e),n.err)throw n.msg||R6[n.err];return n.result}X8.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize,i=this.options.dictionary;let o,s,a;if(this.ended)return!1;for(s=t===~~t?t:!0===t?H8:G8,"[object ArrayBuffer]"===B8.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){for(0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),o=M8(n,s),o===z8&&i&&(o=F8(n,i),o===W8?o=M8(n,s):o===Y8&&(o=z8));n.avail_in>0&&o===K8&&n.state.wrap>0&&0!==e[n.next_in];)L8(n),o=M8(n,s);switch(o){case q8:case Y8:case z8:case J8:return this.onEnd(o),this.ended=!0,!1}if(a=n.avail_out,n.next_out&&(0===n.avail_out||o===K8))if("string"===this.options.to){let e=L4(n.output,n.next_out),t=n.next_out-e,i=D4(n.output,e);n.next_out=t,n.avail_out=r-t,t&&n.output.set(n.output.subarray(e,e+t),0),this.onData(i)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(o!==W8||0!==a){if(o===K8)return o=U8(this.strm),this.onEnd(o),this.ended=!0,!0;if(0===n.avail_in)break}}return!0},X8.prototype.onData=function(e){this.chunks.push(e)},X8.prototype.onEnd=function(e){e===W8&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=O4(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var $8={Inflate:X8,inflate:Q8,inflateRaw:function(e,t){return(t=t||{}).raw=!0,Q8(e,t)},ungzip:Q8,constants:C6};const{Deflate:Z8,deflate:e7,deflateRaw:t7,gzip:n7}=Y4,{Inflate:r7,inflate:i7,inflateRaw:o7,ungzip:s7}=$8;var a7=e7,c7=i7,d7=function(e){return e[e.ONE_BYTE=0]="ONE_BYTE",e[e.TWO_BYTE=1]="TWO_BYTE",e}(d7||{});class l7{constructor(){SU(this,"_sequence",0),SU(this,"_startTime",Date.now()),SU(this,"isUseOneByte",!0)}get startTime(){const e=Date.now()-this._startTime;return e<Math.pow(2,16)?e:(this._startTime+=Math.pow(2,16),this.startTime)}get sequence(){return this._sequence<Math.pow(2,32)?this._sequence++:(this._sequence-=Math.pow(2,32),this.sequence)}serialize(e){const t={commonPacketHeader:{length:0,reserved:0,extension:0,sequence:this.sequence},commonStreamHeader:this.startTime,extension:void 0,payload:e};if(e.byteLength>128){const n=new Uint8Array(4);n.set([1,0,0,0]);const r={id:0,length:4,data:n.buffer},i={profile:this.isUseOneByte?0:1,length:this.isUseOneByte?5:6,datas:[r]};t.commonPacketHeader.extension=1,t.extension=i,t.payload=this.compress(e),t.commonPacketHeader.length=8+(t.extension.length+2)+t.payload.byteLength}else t.commonPacketHeader.length=8+t.payload.byteLength;AH("SHOW_DATASTREAM2_LOG")&&KH.debug("send data header: ".concat(JSON.stringify(t.commonPacketHeader)));const n=new ArrayBuffer(t.commonPacketHeader.length),r=new Uint8Array(n),i=new DataView(n);let o=0;if(i.setUint16(o,t.commonPacketHeader.extension<<15|t.commonPacketHeader.reserved<<14|t.commonPacketHeader.length,!0),o+=2,i.setUint32(o,t.commonPacketHeader.sequence,!0),o+=4,i.setUint16(o,t.commonStreamHeader,!0),o+=2,t.extension){const e=this.serializeExtension(t.extension);r.set(new Uint8Array(e),o),o+=e.byteLength}if(r.set(new Uint8Array(t.payload),o),o+=t.payload.byteLength,o!==t.commonPacketHeader.length)throw Error("serialize error!");return n}deserialize(e){if(e.byteLength<4)return new ArrayBuffer(0);const t=new DataView(e);let n=0;const r=t.getUint16(n,!0);n+=2;const i={length:16383&r,reserved:(16384&r)>>14,extension:(32768&r)>>15,sequence:t.getUint16(n+2,!0)<<16|t.getUint16(n,!0)};let o,s;if(n+=4,AH("SHOW_DATASTREAM2_LOG")&&KH.debug("receive data header: ".concat(JSON.stringify(i))),t.getUint16(n,!0),n+=2,i.extension){s=this.deserializeExtension(e.slice(n)),n+=2+s.length,o=e.slice(n);let t=!1;if(s.datas.length>0){const e=s.datas.find((e=>0===e.id));e&&(t=!(1&~new DataView(e.data).getUint32(0,!0)))}o=t?this.decompress(o):o}else o=e.slice(8);return o}serializeExtension(e){const{profile:t,length:n,datas:r}=e,i=new ArrayBuffer(n+2),o=new Uint8Array(i),s=new DataView(i);let a=0;if(s.setUint8(a++,t),s.setUint8(a++,n),r.forEach((e=>{t?(s.setUint8(a++,e.id),s.setUint8(a++,e.length),o.set(new Uint8Array(e.data),a),a+=e.data.byteLength):(s.setUint8(a++,e.id|e.length<<4),o.set(new Uint8Array(e.data),a),a+=e.data.byteLength)})),a!==n+2)throw Error("serialize extension error, is ".concat(a,"!==").concat(n+2));return i}deserializeExtension(e){const t=new DataView(e);let n=0;const r=t.getUint8(n);n++;const i=t.getUint8(n);n++;const o=r===d7.TWO_BYTE,s=[],a=new DataView(e,2);let c=0;for(;c<i;){let e=0,t=0,n=new ArrayBuffer(0);o?(e=a.getUint8(c),c++,t=a.getUint8(c),c++):(e=15&a.getUint8(c),t=a.getUint8(c)>>4,c++),t>0&&(n=a.buffer.slice(c+2,c+2+t),c+=n.byteLength),s.push({id:e,length:t,data:n})}if(c!==i)throw Error("parse error");return{profile:r,length:i,datas:s}}decompress(e){return c7(new Uint8Array(e))}compress(e){return a7(new Uint8Array(e))}}const h7={name:"DataStream",create:(e,t)=>{const n=t?new J$(e):new X$(e);return n.useDataStream(new l7),n}};class u7 extends mG{constructor(e,t,n){super(),SU(this,"ws",void 0),SU(this,"requestId",1),SU(this,"heartBeatTimer",void 0),SU(this,"joinInfo",void 0),SU(this,"clientId",void 0),SU(this,"onOpen",(()=>{this.emit("open"),this.startHeartBeatCheck()})),SU(this,"onClose",(e=>{this.emit("close"),this.dispose()})),SU(this,"onMessage",(e=>{const t=JSON.parse(e.data);if(!t||"serverResponse"!==t.command||!t.requestId)return t&&"serverStatus"===t.command&&t.serverStatus&&t.serverStatus.command?(this.emit("status",t.serverStatus),void this.emit(t.serverStatus.command,t.serverStatus)):void 0;this.emit("req_".concat(t.requestId),t)})),this.joinInfo=e,this.clientId=t,this.ws=new gz("cross-channel-".concat(this.clientId),n),this.ws.on(cK.RECONNECTING,(()=>{this.ws.reconnectMode="retry",this.emit("reconnecting")})),this.ws.on(cK.CONNECTED,this.onOpen),this.ws.on(cK.ON_MESSAGE,this.onMessage),this.ws.on(cK.CLOSED,this.onClose)}isConnect(){return"connected"===this.ws.state}sendMessage(e){const t=this.requestId++;return e.requestId=t,e.seq=t,this.ws.sendMessage(e),t}waitStatus(e){return new LO(((t,n)=>{const r=window.setTimeout((()=>{n(new eW(ZB.TIMEOUT,"wait status timeout, status: ".concat(e)))}),5e3);this.once(e,(i=>{window.clearTimeout(r),i.state&&0!==i.state?n(new eW(ZB.CROSS_CHANNEL_WAIT_STATUS_ERROR,"wait status error, status: ".concat(e))):t(void 0)})),this.once("dispose",(()=>{window.clearTimeout(r),n(new eW(ZB.WS_ABORT))}))}))}async request(e){if("closed"===this.ws.state)throw new eW(ZB.WS_DISCONNECT);"connected"!==this.ws.state&&await(()=>new LO(((e,t)=>{this.ws.once(cK.CLOSED,(()=>t(new eW(ZB.WS_ABORT)))),this.ws.once(cK.CONNECTED,e)})))();const t=this.sendMessage(e),n=new LO(((e,n)=>{const r=()=>{n(new eW(ZB.WS_ABORT))};this.ws.once(cK.RECONNECTING,r),this.ws.once(cK.CLOSED,r),this.once("req_".concat(t),e),JG(3e3).then((()=>{this.removeAllListeners("req_".concat(t)),this.ws.off(cK.RECONNECTING,r),this.ws.off(cK.CLOSED,r),n(new eW(ZB.TIMEOUT,"cross channel ws request timeout"))}))})),r=await n;if(!r||200!==r.code)throw new eW(ZB.CROSS_CHANNEL_SERVER_ERROR_RESPONSE,"response: ".concat(JSON.stringify(r)));return r}async connect(e){this.ws.removeAllListeners(cK.REQUEST_NEW_URLS),this.ws.on(cK.REQUEST_NEW_URLS,(t=>{t(e)})),await this.ws.init(e)}dispose(){this.clearHeartBeatCheck(),this.emit("dispose"),this.removeAllListeners(),this.ws.close()}sendPing(e){const t=this.requestId++;return e.requestId=t,this.ws.sendMessage(e),t}startHeartBeatCheck(){this.heartBeatTimer&&window.clearInterval(this.heartBeatTimer),this.heartBeatTimer=window.setInterval((()=>{this.sendPing({command:"ping",appId:this.joinInfo.appId,cname:this.joinInfo.cname,uid:this.joinInfo.uid.toString(),sid:this.joinInfo.sid,ts:+new Date,requestId:0})}),3e3)}clearHeartBeatCheck(){window.clearInterval(this.heartBeatTimer),this.heartBeatTimer=void 0}}class p7 extends mG{set state(e){e!==this._state&&(e!==SK.RELAY_STATE_FAILURE&&(this.errorCode=TK.RELAY_OK),this.emit("state",e,this.errorCode),this._state=e)}get state(){return this._state}constructor(e,t,n,r,i){super(),SU(this,"joinInfo",void 0),SU(this,"sid",void 0),SU(this,"clientId",void 0),SU(this,"cancelToken",hB.CancelToken.source()),SU(this,"workerToken",void 0),SU(this,"requestId",0),SU(this,"signal",void 0),SU(this,"prevChannelMediaConfig",void 0),SU(this,"httpRetryConfig",void 0),SU(this,"_resolution",void 0),SU(this,"_state",SK.RELAY_STATE_IDLE),SU(this,"errorCode",TK.RELAY_OK),SU(this,"onStatus",(e=>{KH.debug("[".concat(this.clientId,"] ChannelMediaStatus: ").concat(JSON.stringify(e))),e&&e.command&&("onAudioPacketReceived"===e.command&&this.emit("event",bK.PACKET_RECEIVED_AUDIO_FROM_SRC),"onVideoPacketReceived"===e.command&&this.emit("event",bK.PACKET_RECEIVED_VIDEO_FROM_SRC),"onSrcTokenPrivilegeDidExpire"===e.command&&(this.errorCode=TK.SRC_TOKEN_EXPIRED,this.state=SK.RELAY_STATE_FAILURE),"onDestTokenPrivilegeDidExpire"===e.command&&(this.errorCode=TK.DEST_TOKEN_EXPIRED,this.state=SK.RELAY_STATE_FAILURE))})),SU(this,"onReconnect",(async()=>{KH.debug("[".concat(this.clientId,"] ChannelMediaSocket disconnect, reconnecting")),this.emit("event",bK.NETWORK_DISCONNECTED),this.state=SK.RELAY_STATE_IDLE,this.prevChannelMediaConfig&&this.sendStartRelayMessage(this.prevChannelMediaConfig).catch((e=>{this.state!==SK.RELAY_STATE_IDLE&&(KH.error("auto restart channel media relay failed",e.toString()),this.errorCode=TK.SERVER_CONNECTION_LOST,this.state=SK.RELAY_STATE_FAILURE)}))})),this.joinInfo=e,this.clientId=t,this.sid=QG(),this.signal=new u7(this.joinInfo,this.clientId,n),this.httpRetryConfig=r,this._resolution=i}async startChannelMediaRelay(e){if(this.state!==SK.RELAY_STATE_IDLE)throw new eW(ZB.INVALID_OPERATION);this.state=SK.RELAY_STATE_CONNECTING,await this.connect(),KH.debug("[".concat(this.clientId,"] startChannelMediaRelay: connect success"));try{await this.sendStartRelayMessage(e)}catch(e){if(e.data&&e.data.serverResponse&&"SetSourceChannel"===e.data.serverResponse.command)throw new eW(ZB.CROSS_CHANNEL_FAILED_JOIN_SRC);if(e.data&&e.data.serverResponse&&"SetDestChannelStatus"===e.serverResponse.command)throw new eW(ZB.CROSS_CHANNEL_FAILED_JOIN_DEST);if(e.data&&e.data.serverResponse&&"StartPacketTransfer"===e.serverResponse.command)throw new eW(ZB.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST);throw e}this.prevChannelMediaConfig=e}async updateChannelMediaRelay(e){if(this.state!==SK.RELAY_STATE_RUNNING)throw new eW(ZB.INVALID_OPERATION);await this.sendUpdateMessage(e),this.prevChannelMediaConfig=e}async setVideoProfile(e){if(this._resolution=e,this.state!==SK.RELAY_STATE_RUNNING)throw new eW(ZB.INVALID_OPERATION);const t=this.genMessage(vK.SetVideoProfile);await this.signal.request(t),KH.debug("[".concat(this.clientId,"] startChannelMediaRelay: setVideoProfile success"))}async stopChannelMediaRelay(){await this.sendStopRelayMessage(),KH.debug("[".concat(this.clientId,"] stopChannelMediaRelay: send stop message success")),this.state=SK.RELAY_STATE_IDLE,this.dispose()}dispose(){KH.debug("[".concat(this.clientId,"] disposeChannelMediaRelay")),this.cancelToken.cancel(),this.cancelToken=hB.CancelToken.source(),this.state=SK.RELAY_STATE_IDLE,this.emit("dispose"),this.signal.dispose(),this.prevChannelMediaConfig=void 0}async connect(){const e=await async function(e,t,n){const r=AH("UAP_AP").slice(0,AH("AJAX_REQUEST_CONCURRENT")).map((t=>e.proxyServer?"https://".concat(e.proxyServer,"/ap/?url=").concat(t+"/api/v1?action=uap"):"https://".concat(t,"/api/v1?action=uap"))),i=r.map((r=>function(e,t,n,r){const i={command:"convergeAllocateEdge",sid:t.sid,appId:t.appId,token:t.token,ts:Date.now(),version:vH,cname:t.cname,uid:t.uid.toString(),requestId:XZ,seq:XZ};XZ+=1;const o={service_name:"tele_channel",json_body:JSON.stringify(i)};return uH((async()=>{const t=await FZ(e,{data:o,cancelToken:n,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":61}});if(0!==t.code){const e=new eW(ZB.UNEXPECTED_RESPONSE,"cross channel ap error, code"+t.code,{retry:!0});throw KH.error(e.toString()),e}const r=JSON.parse(t.json_body);if(200!==r.code){const e=new eW(ZB.UNEXPECTED_RESPONSE,"cross channel app center error, code: ".concat(r.code,", reason: ").concat(r.reason));throw KH.error(e.toString()),e}if(!r.servers||0===r.servers.length){const e=new eW(ZB.UNEXPECTED_RESPONSE,"cross channel app center empty server");throw KH.error(e.toString()),e}return{vid:r.vid,workerToken:r.workerToken,addressList:(AH("CHANNEL_MEDIA_RELAY_SERVERS")||r.servers).map((e=>"wss://".concat(e.address.replace(/\./g,"-"),".").concat(AH("WORKER_DOMAIN"),":").concat(e.wss)))}}),void 0,(e=>!!(e.code!==ZB.OPERATION_ABORTED&&e.code!==ZB.UNEXPECTED_RESPONSE||e.data&&e.data.retry)),r)}(r,e,t,n)));try{const e=await r0(i);return i.forEach((e=>e.cancel())),e}catch(e){throw e[0]}}(this.joinInfo,this.cancelToken.token,this.httpRetryConfig);this.workerToken=e.workerToken,await this.signal.connect(e.addressList),this.emit("event",bK.NETWORK_CONNECTED),this.signal.on("status",this.onStatus),this.signal.on("reconnecting",this.onReconnect)}async sendStartRelayMessage(e){const t=this.genMessage(vK.StopPacketTransfer);await this.signal.request(t),await this.signal.waitStatus("Normal Quit"),KH.debug("[".concat(this.clientId,"] startChannelMediaRelay: StopPacketTransfer success"));const n=this.genMessage(vK.SetSdkProfile,e);await this.signal.request(n),KH.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSdkProfile success"));const r=this.genMessage(vK.SetSourceChannel,e);await this.signal.request(r),await this.signal.waitStatus("SetSourceChannelStatus"),this.emit("event",bK.PACKET_JOINED_SRC_CHANNEL),KH.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSourceChannel success"));const i=this.genMessage(vK.SetSourceUserId,e);await this.signal.request(i),KH.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSourceUserId success"));const o=this.genMessage(vK.SetDestChannel,e);await this.signal.request(o),await this.signal.waitStatus("SetDestChannelStatus"),this.emit("event",bK.PACKET_JOINED_DEST_CHANNEL),KH.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetDestChannel success"));const s=this.genMessage(vK.StartPacketTransfer,e);await this.signal.request(s),this.emit("event",bK.PACKET_SENT_TO_DEST_CHANNEL),this.state=SK.RELAY_STATE_RUNNING,KH.debug("[".concat(this.clientId,"] startChannelMediaRelay: StartPacketTransfer success")),this.setVideoProfile(this._resolution)}async sendUpdateMessage(e){const t=this.genMessage(vK.UpdateDestChannel,e);await this.signal.request(t),this.emit("event",bK.PACKET_UPDATE_DEST_CHANNEL),KH.debug("[".concat(this.clientId,"] sendUpdateMessage: UpdateDestChannel success"))}async sendStopRelayMessage(){const e=this.genMessage(vK.StopPacketTransfer);await this.signal.request(e),KH.debug("[".concat(this.clientId,"] sendStopRelayMessage: StopPacketTransfer success"))}genMessage(e,t){const n=[],r=[],i=[];this.requestId+=1;const o={appId:this.joinInfo.appId,cname:this.joinInfo.cname,uid:this.joinInfo.uid.toString(),sdkVersion:vH,sid:this.sid,ts:Date.now(),requestId:this.requestId,seq:this.requestId,allocate:!0,clientRequest:{}};"4.22.1"===o.sdkVersion&&(o.sdkVersion="0.0.1");let s=null,a=null;switch(e){case vK.SetSdkProfile:return o.clientRequest={command:"SetSdkProfile",type:"multi_channel"},o;case vK.SetSourceChannel:if(a=t&&t.getSrcChannelMediaInfo(),!a)throw new eW(ZB.UNEXPECTED_ERROR,"can not find source config");return o.clientRequest={command:"SetSourceChannel",uid:"0",channelName:a.channelName,token:a.token||this.joinInfo.appId},o;case vK.SetSourceUserId:if(a=t&&t.getSrcChannelMediaInfo(),!a)throw new eW(ZB.UNEXPECTED_ERROR,"can not find source config");return o.clientRequest={command:"SetSourceUserId",uid:a.uid+""},o;case vK.SetDestChannel:if(s=t&&t.getDestChannelMediaInfo(),!s)throw new eW(ZB.UNEXPECTED_ERROR,"can not find dest config");return s.forEach((e=>{n.push(e.channelName),r.push(e.uid+""),i.push(e.token||this.joinInfo.appId)})),o.clientRequest={command:"SetDestChannel",channelName:n,uid:r,token:i},o;case vK.StartPacketTransfer:return o.clientRequest={command:"StartPacketTransfer"},o;case vK.Reconnect:return o.clientRequest={command:"Reconnect"},o;case vK.StopPacketTransfer:return o.clientRequest={command:"StopPacketTransfer"},o;case vK.UpdateDestChannel:if(s=t&&t.getDestChannelMediaInfo(),!s)throw new eW(ZB.UNEXPECTED_ERROR,"can not find dest config");return s.forEach((e=>{n.push(e.channelName),r.push(e.uid+""),i.push(e.token||this.joinInfo.appId)})),o.clientRequest={command:"UpdateDestChannel",channelName:n,uid:r,token:i},o;case vK.SetVideoProfile:o.clientRequest={command:"SetVideoProfile",width:this._resolution.width,height:this._resolution.height}}return o}}const f7={name:"ChannelMediaRelay",create:function(e){return new p7(e.joinInfo,e.clientId,e.websocketRetryConfig||lH,e.httpRetryConfig||lH,e.resolution)}};function m7(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g7(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m7(Object(n),!0).forEach((function(t){SU(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m7(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class _7 extends mG{constructor(e,t,n,r){super(),SU(this,"spec",void 0),SU(this,"token",void 0),SU(this,"websocket",void 0),SU(this,"pingpongTimer",void 0),SU(this,"reconnectMode","retry"),SU(this,"serviceMode",void 0),SU(this,"reqId",0),SU(this,"commandReqId",0),SU(this,"handleWebSocketOpen",(()=>{this.reconnectMode="retry",this.startPingPong()})),SU(this,"handleWebSocketMessage",(e=>{if(!e.data)return;const t=JSON.parse(e.data);t.requestId?this.emit("@".concat(t.requestId,"-").concat(t.sid),t):(ZH.workerEvent(this.spec.sid,{actionType:"status",serverCode:t.code,workerType:this.serviceMode===hK.TRANSCODE?1:2}),this.emit(gK.PUBLISH_STREAM_STATUS,t))})),this.spec=t,this.token=e,this.serviceMode=r,this.websocket=new gz("live-streaming",n),this.websocket.on(cK.CONNECTED,this.handleWebSocketOpen),this.websocket.on(cK.ON_MESSAGE,this.handleWebSocketMessage),this.websocket.on(cK.REQUEST_NEW_URLS,((e,t)=>{xG(this,gK.REQUEST_NEW_ADDRESS).then(e).catch(t)})),this.websocket.on(cK.RECONNECTING,(()=>{this.websocket.reconnectMode=this.reconnectMode}))}init(e){return this.websocket.init(e)}async request(e,t,n,r){this.reqId+=1,"request"===e&&(this.commandReqId+=1);const i=this.commandReqId,o=this.reqId;if(!o||!this.websocket)throw new eW(ZB.UNEXPECTED_ERROR);const s=g7({command:e,sdkVersion:"4.22.1"===vH?"0.0.1":vH,seq:o,requestId:o,allocate:n,cname:this.spec.cname,appId:this.spec.appId,sid:this.spec.sid,uid:this.spec.uid.toString(),ts:Math.floor(Date.now()/1e3)},t);if("closed"===this.websocket.state)throw new eW(ZB.WS_DISCONNECT);const a=()=>new LO(((e,t)=>{this.websocket.once(cK.CLOSED,(()=>t(new eW(ZB.WS_ABORT)))),this.websocket.once(cK.CONNECTED,e)}));"connected"!==this.websocket.state&&await a(),s.clientRequest&&(s.clientRequest.workerToken=this.token);const c=new LO(((e,t)=>{const n=()=>{t(new eW(ZB.WS_ABORT))};this.websocket.once(cK.RECONNECTING,n),this.websocket.once(cK.CLOSED,n),this.once("@".concat(o,"-").concat(this.spec.sid),(t=>{e(t)}))}));r&&ZH.workerEvent(this.spec.sid,g7(g7({},r),{},{requestId:i,actionType:"request",payload:JSON.stringify(t.clientRequest),serverCode:0,code:0}));const d=Date.now();this.websocket.sendMessage(s);let l=null;try{l=await c}catch(r){if("closed"===this.websocket.state)throw r;return await a(),await this.request(e,t,n)}return r&&ZH.workerEvent(this.spec.sid,g7(g7({},r),{},{requestId:i,actionType:"response",payload:JSON.stringify(l.serverResponse),serverCode:l.code,success:200===l.code,responseTime:Date.now()-d})),200!==l.code&&this.handleResponseError(l),l}tryNextAddress(){this.reconnectMode="tryNext",this.websocket.reconnect("tryNext")}close(){const e="4.22.1"===vH?"0.0.1":vH;this.reqId+=1,"connected"===this.websocket.state?(this.websocket.sendMessage({command:"request",appId:this.spec.appId,cname:this.spec.cname,uid:this.spec.uid.toString(),sdkVersion:e,sid:this.spec.sid,seq:this.reqId,ts:Math.floor(Date.now()/1e3),requestId:this.reqId,clientRequest:{command:"DestroyWorker"}}),this.websocket.close(!1,!0)):this.websocket.close(!1),this.pingpongTimer&&(window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0)}handleResponseError(e){switch(e.code){case EK.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM:return void KH.warning("live stream response already exists stream");case EK.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR:case EK.LIVE_STREAM_RESPONSE_BAD_STREAM:case EK.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR:return new eW(ZB.LIVE_STREAMING_INVALID_ARGUMENT,"",{code:e.code}).throw();case EK.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST:if("UnpublishStream"===e.serverResponse.command)return;throw new eW(ZB.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case EK.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED:return new eW(ZB.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED,"",{code:e.code}).throw();case EK.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:{const t=new eW(ZB.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE);return this.emit(gK.WARNING,t,e.serverResponse.url)}case EK.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN:{const t=new eW(ZB.LIVE_STREAMING_WARN_FREQUENT_REQUEST);return this.emit(gK.WARNING,t,e.serverResponse.url)}case EK.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH:throw new eW(ZB.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case EK.LIVE_STREAM_RESPONSE_NOT_SUPPORTED:return new eW(ZB.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED,"",{code:e.code}).throw();case EK.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM:{const t=new eW(ZB.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT);return this.emit(gK.WARNING,t,e.serverResponse.url)}case EK.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR:return new eW(ZB.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:e.code}).throw();case EK.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT:throw new eW(ZB.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream resource limit",{retry:!0,changeAddress:!0});case EK.LIVE_STREAM_RESPONSE_WORKER_LOST:case EK.LIVE_STREAM_RESPONSE_WORKER_QUIT:if("UnpublishStream"===e.serverResponse.command)return;throw new eW(ZB.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case EK.ERROR_FAIL_SEND_MESSAGE:if("UnpublishStream"===e.serverResponse.command)return;if("UpdateTranscoding"===e.serverResponse.command||"ControlStream"===e.serverResponse.command)return new eW(ZB.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{code:e.code}).throw();throw new eW(ZB.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case EK.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case EK.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case EK.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case EK.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:return new eW(ZB.LIVE_STREAMING_CDN_ERROR,"",{code:e.code}).throw()}}startPingPong(){this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval((()=>{"connected"===this.websocket.state&&this.request("ping",{}).catch($G)}),6e3)}}function E7(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y7(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E7(Object(n),!0).forEach((function(t){SU(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E7(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class v7 extends mG{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:lH,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:lH;super(),SU(this,"onLiveStreamWarning",void 0),SU(this,"onLiveStreamError",void 0),SU(this,"spec",void 0),SU(this,"retryTimeout",1e4),SU(this,"connection",void 0),SU(this,"httpRetryConfig",void 0),SU(this,"wsRetryConfig",void 0),SU(this,"streamingTasks",new Map),SU(this,"isStartingStreamingTask",!1),SU(this,"taskMutex",new cH("live-streaming")),SU(this,"cancelToken",hB.CancelToken.source()),SU(this,"transcodingConfig",void 0),SU(this,"uapResponse",void 0),SU(this,"lastTaskId",1),SU(this,"statusError",new Map),this.spec=e,this.httpRetryConfig=n,this.wsRetryConfig=t}async setTranscodingConfig(e){const t=y7(y7({},mK),e);66!==t.videoCodecProfile&&77!==t.videoCodecProfile&&100!==t.videoCodecProfile&&(KH.debug("[".concat(this.spec.clientId,"] set transcoding config, fix video codec profile: ").concat(t.videoCodecProfile," -> 100")),t.videoCodecProfile=100),t.transcodingUsers||(t.transcodingUsers=t.userConfigs),t.transcodingUsers&&(t.transcodingUsers=t.transcodingUsers.map((e=>y7(y7(y7({},uK),e),{},{zOrder:e.zOrder?e.zOrder+1:1})))),function(e){aG(e.width)||rG(e.width,"config.width",0,1e4),aG(e.height)||rG(e.height,"config.height",0,1e4),aG(e.videoBitrate)||rG(e.videoBitrate,"config.videoBitrate",1,1e6),aG(e.videoFrameRate)||rG(e.videoFrameRate,"config.videoFrameRate"),aG(e.lowLatency)||tG(e.lowLatency,"config.lowLatency"),aG(e.audioSampleRate)||nG(e.audioSampleRate,"config.audioSampleRate",[32e3,44100,48e3]),aG(e.audioBitrate)||rG(e.audioBitrate,"config.audioBitrate",1,128),aG(e.audioChannels)||nG(e.audioChannels,"config.audioChannels",[1,2,3,4,5]),aG(e.videoGop)||rG(e.videoGop,"config.videoGop"),aG(e.videoCodecProfile)||nG(e.videoCodecProfile,"config.videoCodecProfile",[66,77,100]),aG(e.userCount)||rG(e.userCount,"config.userCount",0,17),aG(e.backgroundColor)||rG(e.backgroundColor,"config.backgroundColor",0,16777215),aG(e.userConfigExtraInfo)||oG(e.userConfigExtraInfo,"config.userConfigExtraInfo",0,4096,!1),e.transcodingUsers&&!aG(e.transcodingUsers)&&(sG(e.transcodingUsers,"config.transcodingUsers"),e.transcodingUsers.forEach(((e,t)=>{lK(e.uid),aG(e.x)||rG(e.x,"transcodingUser[".concat(t,"].x"),0,1e4),aG(e.y)||rG(e.y,"transcodingUser[".concat(t,"].y"),0,1e4),aG(e.width)||rG(e.width,"transcodingUser[".concat(t,"].width"),0,1e4),aG(e.height)||rG(e.height,"transcodingUser[".concat(t,"].height"),0,1e4),aG(e.zOrder)||rG(e.zOrder-1,"transcodingUser[".concat(t,"].zOrder"),0,100),aG(e.alpha)||rG(e.alpha,"transcodingUser[".concat(t,"].alpha"),0,1,!1)}))),aG(e.watermark)||fK(e.watermark,"watermark"),aG(e.backgroundImage)||fK(e.backgroundImage,"backgroundImage"),e.images&&!aG(e.images)&&(sG(e.images,"config.images"),e.images.forEach(((e,t)=>{fK(e,"images[".concat(t,"]"))})))}(t);const n=[];t.images&&n.push(...t.images.map((e=>y7(y7(y7({},pK),e),{},{zOrder:255})))),t.backgroundImage&&(n.push(y7(y7(y7({},pK),t.backgroundImage),{},{zOrder:0})),delete t.backgroundImage),t.watermark&&(n.push(y7(y7(y7({},pK),t.watermark),{},{zOrder:255})),delete t.watermark),t.images=n,t.transcodingUsers&&(t.userConfigs=t.transcodingUsers.map((e=>y7({},e))),t.userCount=t.transcodingUsers.length,delete t.transcodingUsers);const r=(t.userConfigs||[]).map((e=>"number"==typeof e.uid?LO.resolve(e.uid):c0(e.uid,this.spec,this.cancelToken.token,this.httpRetryConfig)));if((await LO.all(r)).forEach(((e,n)=>{t.userConfigs&&t.userConfigs[n]&&(t.userConfigs[n].uid=e)})),this.transcodingConfig=t,this.connection)try{var i;const e=await this.connection.request("request",{clientRequest:{command:"UpdateTranscoding",transcodingConfig:this.transcodingConfig}},!1,{command:"UpdateTranscoding",workerType:1,requestByUser:!0,tid:Array.from(Fz(i=this.streamingTasks).call(i)).map((e=>e.taskId)).join("#")});KH.debug("[".concat(this.spec.clientId,"] update live transcoding config success, code: ").concat(e.code,", config:"),JSON.stringify(this.transcodingConfig))}catch(e){if(!e.data||!e.data.retry)throw e;e.data.changeAddress&&this.connection.tryNextAddress(),this.streamingTasks.forEach((t=>{KH.warning("[".concat(this.spec.clientId,"] live streaming receive error"),e.toString(),"try to republish",t.url),this.startLiveStreamingTask(t.url,t.mode,e).then((()=>{KH.debug("[".concat(this.spec.clientId,"] live streaming republish ").concat(t.url," success"))})).catch((e=>{KH.error("[".concat(this.spec.clientId,"] live streaming republish failed"),t.url,e.toString()),this.onLiveStreamError&&this.onLiveStreamError(t.url,e)}))}))}}async startLiveStreamingTask(e,t,n){if(!this.transcodingConfig&&t===hK.TRANSCODE)throw new eW(ZB.INVALID_OPERATION,"[LiveStreaming] no transcoding config found, can not start transcoding streaming task");const r={command:"PublishStream",ts:Date.now(),url:e,uid:this.spec.uid.toString(),autoDestroyTime:100,acceptImageTimeout:!0};KH.debug("[".concat(this.spec.clientId,"] start live streaming ").concat(e,", mode: ").concat(t));const i=await this.taskMutex.lock();if(!this.connection&&n)return void i();if(this.streamingTasks.get(e)&&!n)return i(),new eW(ZB.LIVE_STREAMING_TASK_CONFLICT).throw();try{this.connection||(this.connection=await this.connect(t))}catch(e){throw i(),e}switch(t){case hK.TRANSCODE:r.transcodingConfig=y7({},this.transcodingConfig);case hK.RAW:}this.uapResponse&&this.uapResponse.vid&&(r.vid=this.uapResponse.vid),this.isStartingStreamingTask=!0;const o=this.lastTaskId++;try{const s=new LO(((t,r)=>{JG(this.retryTimeout).then((()=>{if(n)return r(n);const t=this.statusError.get(e);return t?(this.statusError.delete(e),r(t)):void 0}))})),a=await LO.race([this.connection.request("request",{clientRequest:r},!0,{url:e,command:"PublishStream",workerType:t===hK.TRANSCODE?1:2,requestByUser:!n,tid:o.toString()}),s]);this.isStartingStreamingTask=!1,KH.debug("[".concat(this.spec.clientId,"] live streaming started, code: ").concat(a.code)),this.streamingTasks.set(e,{clientRequest:r,mode:t,url:e,taskId:o}),i()}catch(r){if(i(),this.isStartingStreamingTask=!1,!r.data||!r.data.retry||n)throw r;return r.data.changeAddress?(this.connection.tryNextAddress(),await this.startLiveStreamingTask(e,t,r)):await this.startLiveStreamingTask(e,t,r)}}stopLiveStreamingTask(e){return new LO(((t,n)=>{const r=this.streamingTasks.get(e);if(!r||!this.connection)return new eW(ZB.UNEXPECTED_ERROR,"can not find streaming task to stop").throw();const i=r.mode;r.abortTask=()=>{KH.debug("[".concat(this.spec.clientId,"] stop live streaming success(worker exception)")),this.streamingTasks.delete(e),t()},this.connection.request("request",{clientRequest:{command:"UnpublishStream",url:r.url}},!1,{url:e,command:"UnPublishStream",workerType:i===hK.TRANSCODE?1:2,requestByUser:!0,tid:(this.lastTaskId++).toString()}).then((n=>{KH.debug("[".concat(this.spec.clientId,"] stop live streaming success, code: ").concat(n.code)),this.streamingTasks.delete(e),0===this.streamingTasks.size&&(this.connection&&this.connection.close(),this.connection=void 0),t()})).catch(n)}))}resetAllTask(){var e;const t=Array.from(Fz(e=this.streamingTasks).call(e));this.terminate();for(const e of t)this.startLiveStreamingTask(e.url,e.mode).catch((t=>{this.onLiveStreamError&&this.onLiveStreamError(e.url,t)}))}terminate(){this.cancelToken&&this.cancelToken.cancel(),this.streamingTasks=new Map,this.isStartingStreamingTask=!1,this.statusError=new Map,this.cancelToken=hB.CancelToken.source(),this.uapResponse=void 0,this.connection&&this.connection.close(),this.connection=void 0}async connect(e){if(this.connection)throw new eW(ZB.UNEXPECTED_ERROR,"live streaming connection has already connected");const t=await xG(this,_K.REQUEST_WORKER_MANAGER_LIST,e);return this.uapResponse=t,this.connection=new _7(t.workerToken,this.spec,this.wsRetryConfig,e),this.connection.on(gK.WARNING,((e,t)=>this.onLiveStreamWarning&&this.onLiveStreamWarning(t,e))),this.connection.on(gK.PUBLISH_STREAM_STATUS,(e=>this.handlePublishStreamServer(e))),this.connection.on(gK.REQUEST_NEW_ADDRESS,((t,n)=>{if(!this.connection)return n(new eW(ZB.UNEXPECTED_ERROR,"can not get new live streaming address list"));xG(this,_K.REQUEST_WORKER_MANAGER_LIST,e).then((e=>{this.uapResponse=e,t(e.addressList)})).catch(n)})),await this.connection.init(t.addressList),this.connection}handlePublishStreamServer(e){const t=e.serverStatus&&e.serverStatus.url||"empty_url",n=this.streamingTasks.get(t),r=e.reason;switch(e.code){case EK.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case EK.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case EK.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case EK.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:{const r=new eW(ZB.LIVE_STREAMING_CDN_ERROR,"",{code:e.code});if(n)return KH.error(r.toString()),this.onLiveStreamError&&this.onLiveStreamError(t,r);if(!this.isStartingStreamingTask)return;this.statusError.set(t,r)}case EK.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:{const e=new eW(ZB.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE,r);return this.onLiveStreamWarning&&this.onLiveStreamWarning(t,e)}case EK.LIVE_STREAM_RESPONSE_WORKER_LOST:case EK.LIVE_STREAM_RESPONSE_WORKER_QUIT:{var i;if(!this.connection)return;this.connection.tryNextAddress();const t=Array.from(Fz(i=this.streamingTasks).call(i));for(const n of t)n.abortTask?n.abortTask():(KH.warning("[".concat(this.spec.clientId,"] publish stream status code"),e.code,"try to republish",n.url),this.startLiveStreamingTask(n.url,n.mode,new eW(ZB.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:e.code})).then((()=>{KH.debug("[".concat(this.spec.clientId,"] republish live stream success"),n.url)})).catch((e=>{KH.error(e.toString()),this.onLiveStreamError&&this.onLiveStreamError(n.url,e)})));return}}}hasUrl(e){return this.streamingTasks.has(e)}}const b7={name:"LiveStreaming",create:function(e){return new v7(e.joinInfo,e.websocketRetryConfig||lH,e.httpRetryConfig||lH)}};function S7(e){let t={};e:for(;!L7(e);){let n=W7(e);switch(n>>>3){case 0:break e;case 1:t.requestId=U7(e,W7(e));break;case 2:t.requestType=W7(e)>>>0;break;case 3:t.scorePorn=G7(e);break;case 4:t.scoreSexy=G7(e);break;case 5:t.scoreNeutral=G7(e);break;case 6:t.requestScene=W7(e)>>>0;break;case 7:t.scene=W7(e)>>>0;break;default:C7(e,7&n)}}return t}function T7(e,t){let n=e.service;void 0!==n&&(K7(t,8),K7(t,n));let r=e.vendor;void 0!==r&&(K7(t,16),K7(t,r));let i=e.token;void 0!==i&&(K7(t,26),V7(t,i));let o=e.callbackUrl;void 0!==o&&(K7(t,34),V7(t,o))}function R7(e){let t=W7(e),n=e.limit;return e.limit=e.offset+t,n}function C7(e,t){switch(t){case 0:for(;128&j7(e););break;case 2:D7(e,W7(e));break;case 5:D7(e,4);break;case 1:D7(e,8);break;default:throw new Error("Unimplemented type: "+t)}}let w7=new Float32Array(1);new Uint8Array(w7.buffer);let I7=new Float64Array(1),A7=new Uint8Array(I7.buffer);function O7(e){return{low:e|=0,high:e>>31,unsigned:e>=0}}let x7=[];function N7(){const e=x7.pop();return e?(e.offset=e.limit=0,e):{bytes:new Uint8Array(64),offset:0,limit:0}}function P7(e){x7.push(e)}function D7(e,t){if(e.offset+t>e.limit)throw new Error("Skip past limit");e.offset+=t}function L7(e){return e.offset>=e.limit}function k7(e,t){let n=e.bytes,r=e.offset,i=e.limit,o=r+t;if(o>n.length){let t=new Uint8Array(2*o);t.set(n),e.bytes=t}return e.offset=o,o>i&&(e.limit=o),r}function M7(e,t){let n=e.offset;if(n+t>e.limit)throw new Error("Read past limit");return e.offset+=t,n}function U7(e,t){let n=M7(e,t),r=String.fromCharCode,i=e.bytes,o="�",s="";for(let e=0;e<t;e++){let a,c,d,l,h=i[e+n];128&h?192==(224&h)?e+1>=t?s+=o:(a=i[e+n+1],128!=(192&a)?s+=o:(l=(31&h)<<6|63&a,l<128?s+=o:(s+=r(l),e++))):224==(240&h)?e+2>=t?s+=o:(a=i[e+n+1],c=i[e+n+2],32896!=(49344&(a|c<<8))?s+=o:(l=(15&h)<<12|(63&a)<<6|63&c,l<2048||l>=55296&&l<=57343?s+=o:(s+=r(l),e+=2))):240==(248&h)?e+3>=t?s+=o:(a=i[e+n+1],c=i[e+n+2],d=i[e+n+3],8421504!=(12632256&(a|c<<8|d<<16))?s+=o:(l=(7&h)<<18|(63&a)<<12|(63&c)<<6|63&d,l<65536||l>1114111?s+=o:(l-=65536,s+=r(55296+(l>>10),56320+(1023&l)),e+=3))):s+=o:s+=r(h)}return s}function V7(e,t){let n=t.length,r=0;for(let e=0;e<n;e++){let i=t.charCodeAt(e);i>=55296&&i<=56319&&e+1<n&&(i=(i<<10)+t.charCodeAt(++e)-56613888),r+=i<128?1:i<2048?2:i<65536?3:4}K7(e,r);let i=k7(e,r),o=e.bytes;for(let e=0;e<n;e++){let r=t.charCodeAt(e);r>=55296&&r<=56319&&e+1<n&&(r=(r<<10)+t.charCodeAt(++e)-56613888),r<128?o[i++]=r:(r<2048?o[i++]=r>>6&31|192:(r<65536?o[i++]=r>>12&15|224:(o[i++]=r>>18&7|240,o[i++]=r>>12&63|128),o[i++]=r>>6&63|128),o[i++]=63&r|128)}}function F7(e,t){let n=k7(e,t.limit),r=e.bytes,i=t.bytes;for(let e=0,o=t.limit;e<o;e++)r[e+n]=i[e]}function j7(e){return e.bytes[M7(e,1)]}function B7(e,t){let n=k7(e,1);e.bytes[n]=t}function G7(e){let t=M7(e,8),n=e.bytes;return A7[0]=n[t++],A7[1]=n[t++],A7[2]=n[t++],A7[3]=n[t++],A7[4]=n[t++],A7[5]=n[t++],A7[6]=n[t++],A7[7]=n[t++],I7[0]}function H7(e,t){let n=k7(e,8),r=e.bytes;I7[0]=t,r[n++]=A7[0],r[n++]=A7[1],r[n++]=A7[2],r[n++]=A7[3],r[n++]=A7[4],r[n++]=A7[5],r[n++]=A7[6],r[n++]=A7[7]}function W7(e){let t,n=0,r=0;do{t=j7(e),n<32&&(r|=(127&t)<<n),n+=7}while(128&t);return r}function K7(e,t){for(t>>>=0;t>=128;)B7(e,127&t|128),t>>>=7;B7(e,t)}function z7(e,t){let n=t.low>>>0,r=(t.low>>>28|t.high<<4)>>>0,i=t.high>>>24,o=0===i?0===r?n<16384?n<128?1:2:n<1<<21?3:4:r<16384?r<128?5:6:r<1<<21?7:8:i<128?9:10,s=k7(e,o),a=e.bytes;switch(o){case 10:a[s+9]=i>>>7&1;case 9:a[s+8]=9!==o?128|i:127&i;case 8:a[s+7]=8!==o?r>>>21|128:r>>>21&127;case 7:a[s+6]=7!==o?r>>>14|128:r>>>14&127;case 6:a[s+5]=6!==o?r>>>7|128:r>>>7&127;case 5:a[s+4]=5!==o?128|r:127&r;case 4:a[s+3]=4!==o?n>>>21|128:n>>>21&127;case 3:a[s+2]=3!==o?n>>>14|128:n>>>14&127;case 2:a[s+1]=2!==o?n>>>7|128:n>>>7&127;case 1:a[s]=1!==o?128|n:127&n}}function q7(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}const Y7=new Map([["moderation",1],["supervise",2]]);function J7(e){return{low:e|=0,high:e>>31,unsigned:e>=0}}class X7 extends mG{get connectionState(){return this._connectionState}set connectionState(e){if(this._connectionState===e)return;const t=this._connectionState;this._connectionState=e,this.emit(HK.CONNECTION_STATE_CHANGE,t,e)}get inspectType(){return this._inspectType}set inspectType(e){var t;this._inspectMode=nb(t=e.map((e=>Y7.get(e)||0))).call(t,((e,t)=>e+t)),this._inspectType=e}get quality(){return this._quality}set quality(e){this._quality=e>1?1:e<.1?.1:e,this.qualityTimer&&(window.clearTimeout(this.qualityTimer),this.qualityTimer=null),this._quality>=1||(this.qualityTimer=window.setTimeout((()=>{this.quality=this._quality/this.qualityRatio}),6e4))}constructor(e){super(),SU(this,"name","AgoraRTCVideoContentInspect"),SU(this,"_connectionState",BK.CONNECTING),SU(this,"_innerConnectionState",void 0),SU(this,"sequence",0),SU(this,"inspectStartTime",void 0),SU(this,"workerManagerConnection",void 0),SU(this,"workerConnection",void 0),SU(this,"workerMessageLengthLimit",void 0),SU(this,"inspectIntervalMinimum",void 0),SU(this,"qualityRatio",void 0),SU(this,"_connectInfo",void 0),SU(this,"_cancelTokenSource",hB.CancelToken.source()),SU(this,"_retryConfig",void 0),SU(this,"wmSequence",0),SU(this,"inspectInterval",void 0),SU(this,"inspectTimer",null),SU(this,"ossFilePrefix",void 0),SU(this,"extraInfo",void 0),SU(this,"_inspectType",void 0),SU(this,"_inspectMode",void 0),SU(this,"_quality",1),SU(this,"qualityTimer",null),SU(this,"_inspectId",void 0),SU(this,"_needWorkUrlOnly",!1),SU(this,"inspectImage",(()=>{if(this.connectionState!==BK.CONNECTED)throw new eW(ZB.OPERATION_ABORTED,"content inspect service connection status is ".concat(this.connectionState));this.inspectTimer&&(window.clearInterval(this.inspectTimer),this.inspectTimer=null),this.inspectTimer=window.setInterval((()=>{this.connectionState===BK.CONNECTED?this.requestToInspectImage():KH.debug("[".concat(this._inspectId,"] Inspect State is not connected , "),this.connectionState)}),this.inspectInterval<this.inspectIntervalMinimum?this.inspectIntervalMinimum:this.inspectInterval),this.requestToInspectImage()})),this._inspectId=XG(5,"inspect-"),this.workerMessageLengthLimit=AH("VIDEO_INSPECT_WORKER_MESSAGE_LENGTH_LIMIT"),this.inspectIntervalMinimum=AH("VIDEO_INSPECT_INTERVAL_MINIMUM"),this.qualityRatio=AH("VIDEO_INSPECT_QUALITY_RATIO"),this.inspectInterval=e.interval,this.ossFilePrefix=e.ossFilePrefix,this.extraInfo=e.extraInfo,this.inspectType=e.inspectType,this.inspectStartTime=Number(Date.now()),this.workerManagerConnection=new gz("worker-manager-"+this._inspectId,lH),this.on(HK.STATE_CHANGE,((e,t)=>{this._innerConnectionState=e,KH.debug("[".concat(this._inspectId,"] Inspect operation :").concat(GK[e]," ").concat(t||""))})),this.handleWorkerManagerEvents(),this.workerConnection=new gz("worker-"+this._inspectId,lH),this.handleWorkerEvents()}async init(e,t){this.emit(HK.STATE_CHANGE,GK.CONNECT_AP),this._connectInfo=e;const n=this._cancelTokenSource.token;return this._retryConfig=t,new LO(((r,i)=>{this.on(HK.CONNECTION_STATE_CHANGE,((e,t)=>{t===BK.CONNECTED&&r()})),this.requestAP(e,n,t).then((e=>{this.connectWorkerManager(e)})).catch((e=>{i(e)}))}))}async requestAP(e,t,n){const r=AH("WEBCS_DOMAIN").map((e=>"https://".concat(e,"/api/v1"))),i=await function(e,t,n,r){let{appId:i,areaCode:o,cname:s,sid:a,token:c,uid:d}=t;n0++;const l="image_moderation_api",h={service_name:l,json_body:JSON.stringify({appId:i,areaCode:o,cname:s,command:"allocateEdge",requestId:n0,seq:n0,sid:a,token:c,ts:Date.now(),uid:d+""})};let u,p,f=e[0];return uH((async()=>{u=Date.now();const e=await FZ(f,{data:h,cancelToken:n,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"},params:{action:"wrtc_gateway"}});if(p=Date.now()-u,0!==e.code){const t=new eW(ZB.UNEXPECTED_RESPONSE,"image inspect ap error, code"+e.code,{retry:!0,responseTime:p});throw KH.error(t.toString()),t}const t=JSON.parse(e.json_body);if(200!==t.code){const e=new eW(ZB.UNEXPECTED_RESPONSE,"image inspect ap error, code: ".concat(t.code,", reason: ").concat(t.reason),{code:t.code,responseTime:p});throw KH.error(e.toString()),e}if(!t.servers||!Array.isArray(t.servers)||0===t.servers.length){const e=new eW(ZB.UNEXPECTED_RESPONSE,"image inspect ap empty server",{code:t.code,responseTime:p});throw KH.error(e.toString()),e}const r=AH("VIDEO_INSPECT_WORKER_MANAGER_HOST"),i=AH("VIDEO_INSPECT_WORKER_MANAGER_PORT");return{addressList:t.servers.map((e=>{let{address:t,wss:n}=e;if(t&&n)return"wss://".concat(t.replace(/\./g,"-"),".").concat(r,":").concat(i||n)})).filter((e=>!!e)),workerToken:t.workerToken,vid:t.vid,responseTime:p}}),((t,n)=>(ZH.apworkerEvent(a,{success:!0,sc:200,serviceName:l,responseDetail:JSON.stringify(t.addressList),firstSuccess:0===n,responseTime:p,serverIp:e[n%e.length]}),!1)),((t,n)=>(ZH.apworkerEvent(a,{success:!1,sc:t.data&&t.data.code||200,serviceName:l,responseTime:p,serverIp:e[n%e.length]}),!!(t.code!==ZB.OPERATION_ABORTED&&t.code!==ZB.UNEXPECTED_RESPONSE||t.data&&t.data.retry)&&(f=e[(n+1)%e.length],!0))),r)}(r,e,t,n);this.emit(HK.STATE_CHANGE,GK.AP_CONNECTED);const{addressList:o}=i;return this.wmSequence++,o}async connectWorkerManager(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._needWorkUrlOnly=t,this.emit(HK.STATE_CHANGE,GK.CONNECT_WORKER_MANAGER),await this.workerManagerConnection.init(e,1e4)}async connectWorker(e){await this.workerConnection.init([e])}handleWorkerManagerEvents(){this.workerManagerConnection.on(cK.CONNECTED,(async()=>{this.emit(HK.STATE_CHANGE,GK.WORKER_MANAGER_CONNECTED,this.workerManagerConnection.url),this.workerManagerConnection.sendMessage({appId:this._connectInfo.appId,cname:this._connectInfo.cname,uid:this._connectInfo.uid+"",sdkVersion:"4.22.1",sid:this._connectInfo.sid,seq:this.wmSequence,ts:Number(Date.now()),requestId:Math.floor(1e12*Math.random()),allocate:!0,clientRequest:{command:"join"}},!0)})),this.workerManagerConnection.on(cK.CLOSED,(()=>{this._innerConnectionState<GK.GET_WORKER_MANAGER_RESPONSE&&KH.debug("[".concat(this._inspectId,"] Inspect worker manager is closed before connecting worker"))})),this.workerManagerConnection.on(cK.FAILED,(()=>{this._innerConnectionState<GK.GET_WORKER_MANAGER_RESPONSE&&KH.debug("[".concat(this._inspectId,"] Connecting inspect worker manager is failed before connecting worker"))})),this.workerManagerConnection.on(cK.RECONNECTING,(()=>{this._innerConnectionState<GK.GET_WORKER_MANAGER_RESPONSE&&KH.debug("[".concat(this._inspectId,"] Inspect worker manager is reconnecting before connecting worker"))})),this.workerManagerConnection.on(cK.ON_MESSAGE,(async e=>{this.emit(HK.STATE_CHANGE,GK.GET_WORKER_MANAGER_RESPONSE);const t=this.workerManagerConnection.url;this.workerManagerConnection.close();const n=JSON.parse(e.data);if(200!==n.code)throw KH.error("[".concat(this._inspectId,"] Unexpected code ").concat(n.code," from worker manager")),new eW(ZB.UNEXPECTED_RESPONSE,"response code of worker is unexpected",n);if(!(n.serverResponse&&n.serverResponse.portWss&&t))throw KH.error("[".concat(this._inspectId,"] Unexpected content from worker manager : ").concat(JSON.stringify(n))),new eW(ZB.UNEXPECTED_RESPONSE,"response content of worker is unexpected",n);{const e=AH("VIDEO_INSPECT_WORKER_PORT")||n.serverResponse.portWss,r=t.replace(/:\d+\/?$/,":".concat(e));this.emit(HK.STATE_CHANGE,GK.CONNECT_WORKER,r),this._needWorkUrlOnly?this.emit(HK.REQUEST_NEW_WORKER_URL,r):await this.connectWorker(r)}})),this.workerManagerConnection.on(cK.WILL_RECONNECT,((e,t,n)=>{n(e)})),this.workerManagerConnection.on(cK.REQUEST_NEW_URLS,((e,t)=>{this.requestAP(this._connectInfo,this._cancelTokenSource.token,this._retryConfig).then(e).catch(t)}))}handleWorkerEvents(){this.workerConnection.on(cK.CONNECTED,(async()=>{this.emit(HK.STATE_CHANGE,GK.WORKER_CONNECTED,this.workerConnection.url),this.connectionState=BK.CONNECTED})),this.workerConnection.on(cK.ON_MESSAGE,(async e=>{if(e.data instanceof ArrayBuffer){const n=function(e){return function(e){let t={};e:for(;!L7(e);){let n=W7(e);switch(n>>>3){case 0:break e;case 1:t.code=W7(e);break;case 2:t.msg=U7(e,W7(e));break;case 3:{let n=R7(e);t.data=S7(e),e.limit=n;break}default:C7(e,7&n)}}return t}({bytes:t=e,offset:0,limit:t.length});var t}(new Uint8Array(e.data));if(AH("SHOW_VIDEO_INSPECT_WORKER_MESSAGE")&&KH.debug("[".concat(this._inspectId,"] Response message for worker of inspect content "),JSON.stringify(n)),200===n.code){if(Array.isArray(this.inspectType)&&1===this.inspectType.length&&"supervise"===this.inspectType[0])return void this.emit(HK.INSPECT_RESULT,void 0,void 0);if(n.data&&n.data.scorePorn&&n.data.scoreSexy&&n.data.scoreNeutral){var t;const e={porn:n.data.scorePorn,sexy:n.data.scoreSexy,neutral:n.data.scoreNeutral},r=nb(t=Object.keys(e)).call(t,((t,n)=>e[t]>e[n]?t:n),"porn"),i=Object.keys(e).find((e=>e===r));this.emit(HK.INSPECT_RESULT,i)}else this.emit(HK.INSPECT_RESULT,void 0,new eW(ZB.UNEXPECTED_RESPONSE,n.code+"","There is an unexpected data on message"))}else this.emit(HK.INSPECT_RESULT,void 0,new eW(ZB.UNEXPECTED_RESPONSE,n.code+"",n.msg))}else KH.error("[".concat(this._inspectId,"] Unexpected message type from worker")),this.emit(HK.INSPECT_RESULT,void 0,new eW(ZB.UNEXPECTED_RESPONSE,"invalid worker message type"))})),this.workerConnection.on(cK.CLOSED,(()=>{this.connectionState=BK.CLOSED})),this.workerConnection.on(cK.FAILED,(()=>{this.connectionState=BK.CLOSED})),this.workerConnection.on(cK.RECONNECTING,(()=>{this.connectionState=this.connectionState===BK.CONNECTED?BK.RECONNECTING:BK.CONNECTING})),this.workerConnection.on(cK.WILL_RECONNECT,((e,t,n)=>{"recover"===e&&n(e),n("tryNext")})),this.workerConnection.on(cK.REQUEST_NEW_URLS,((e,t)=>{this.workerManagerConnection.close(),this.once(HK.REQUEST_NEW_WORKER_URL,(t=>{e([t])})),this.requestAP(this._connectInfo,this._cancelTokenSource.token,this._retryConfig).then((e=>{this.connectWorkerManager(e,!0)})).catch((e=>{t(e)}))}))}async requestToInspectImage(){this.sequence++;const e=PG(this,HK.CLIENT_LOCAL_VIDEO_TRACK),t={appId:this._connectInfo.appId,cname:this._connectInfo.cname,cid:this._connectInfo.cid,sid:this._connectInfo.sid,uid:this._connectInfo.uid,vid:this._connectInfo.vid};if(e){if(!e.isPlaying)return void this.emit(HK.INSPECT_RESULT,void 0,new eW(ZB.INVALID_OPERATION,"Only the track being played can be inspected"));const n=await this.generateRequestData(e,t);this.workerConnection.sendMessage(n,!0,!0)}else this.emit(HK.INSPECT_RESULT,void 0,new eW(ZB.INVALID_OPERATION,"Only the track being published can be inspected"))}async generateRequestData(e,t){let{appId:n,cname:r,cid:i,vid:o,sid:s,uid:a}=t;const c=Date.now(),d=await e.getCurrentFrameImage("image/jpeg",this.quality),l=await QX(d,n,r),h=this.sequence+"-"+i+"-"+a+"-"+c+"-"+XG(12,""),u={appId:n,cid:i,cname:r,deviceId:"",elapse:J7(Number(c-this.inspectStartTime)),fileSize:l.byteLength,jpgEncryption:2,height:d.height,width:d.width,jpg:l,networkType:6,osType:7,requestId:h,sdkVersion:"4.22.1",sequence:this.sequence,sid:s,timestamp:J7(c),uid:a,vid:o,service:this._inspectMode,callbackData:this.extraInfo,ossFilePrefix:this.ossFilePrefix};void 0===this.extraInfo&&delete u.callbackData,void 0===this.ossFilePrefix&&delete u.ossFilePrefix;const p=function(e){let t=N7();return function(e,t){let n=e.appId;void 0!==n&&(K7(t,10),V7(t,n));let r=e.cid;void 0!==r&&(K7(t,16),K7(t,r));let i=e.cname;void 0!==i&&(K7(t,26),V7(t,i));let o=e.deviceId;void 0!==o&&(K7(t,34),V7(t,o));let s=e.elapse;void 0!==s&&(K7(t,40),z7(t,s));let a=e.fileSize;void 0!==a&&(K7(t,48),z7(t,O7(a)));let c=e.height;void 0!==c&&(K7(t,56),z7(t,O7(c)));let d=e.jpg;void 0!==d&&(K7(t,66),K7(t,d.length),function(e,t){let n=k7(e,t.length);e.bytes.set(t,n)}(t,d));let l=e.networkType;void 0!==l&&(K7(t,72),z7(t,O7(l)));let h=e.osType;void 0!==h&&(K7(t,80),z7(t,O7(h)));let u=e.requestId;void 0!==u&&(K7(t,90),V7(t,u));let p=e.sdkVersion;void 0!==p&&(K7(t,98),V7(t,p));let f=e.sequence;void 0!==f&&(K7(t,104),z7(t,O7(f)));let m=e.sid;void 0!==m&&(K7(t,114),V7(t,m));let g=e.timestamp;void 0!==g&&(K7(t,120),z7(t,g));let _=e.uid;void 0!==_&&(K7(t,128),K7(t,_));let E=e.vid;void 0!==E&&(K7(t,136),K7(t,E));let y=e.width;void 0!==y&&(K7(t,144),z7(t,O7(y)));let v=e.service;void 0!==v&&(K7(t,152),K7(t,v));let b=e.callbackData;void 0!==b&&(K7(t,162),V7(t,b));let S=e.jpgEncryption;void 0!==S&&(K7(t,168),K7(t,S));let T=e.requestType;void 0!==T&&(K7(t,176),K7(t,T));let R=e.scorePorn;void 0!==R&&(K7(t,185),H7(t,R));let C=e.scoreSexy;void 0!==C&&(K7(t,193),H7(t,C));let w=e.scoreNeutral;void 0!==w&&(K7(t,201),H7(t,w));let I=e.scene;void 0!==I&&(K7(t,208),K7(t,I));let A=e.ossFilePrefix;void 0!==A&&(K7(t,218),V7(t,A));let O=e.serviceVendor;if(void 0!==O)for(let e of O){K7(t,226);let n=N7();T7(e,n),K7(t,n.limit),F7(t,n),P7(n)}}(e,t),function(e){let t=e.bytes,n=e.limit;return t.length===n?t:t.subarray(0,n)}(t)}(u);if(p.byteLength<this.workerMessageLengthLimit){if(AH("SHOW_VIDEO_INSPECT_WORKER_MESSAGE")){const e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q7(Object(n),!0).forEach((function(t){SU(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q7(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},u);delete e.jpg,KH.debug("[".concat(this._inspectId,"] Request message for worker of inspect content "),JSON.stringify(e))}return p}{const t=this.quality*this.qualityRatio;return this.quality=t,await this.generateRequestData(e,{appId:n,cname:r,cid:i,vid:o,sid:s,uid:a})}}close(){this._cancelTokenSource.cancel(),this._cancelTokenSource=hB.CancelToken.source(),this.workerManagerConnection&&this.workerManagerConnection.close(),this.workerConnection&&this.workerConnection.close(),this.inspectTimer&&window.clearInterval(this.inspectTimer),this.inspectTimer=null,this.connectionState=BK.CLOSED,this.emit(HK.STATE_CHANGE,GK.CLOSED)}}const Q7={name:"ContentInspect",create:function(e){let{config:t}=e;return function(e){if(!e)throw new eW(ZB.INVALID_PARAMS,"inspectConfig is necessary.");if(!e.inspectType||!Array.isArray(e.inspectType))throw new eW(ZB.INVALID_PARAMS,"inspectConfig.inspectType is necessary and is an instance of Array.");{const t=[...new Set(e.inspectType)];t.forEach((e=>{var t;if(!Fv(t=["supervise","moderation"]).call(t,e))throw new eW(ZB.INVALID_PARAMS,"".concat(e," is not a valid inspect type."))})),e.inspectType=t}if(e&&e.extraInfo&&e.extraInfo.length>1024)throw new eW(ZB.INVALID_PARAMS,"inspectConfig.extraInfo length cannot exceed 1024 bytes")}(t),new X7(t)}};IH("PROCESS_ID","process-".concat(XG(8,""),"-").concat(XG(4,""),"-").concat(XG(4,""),"-").concat(XG(4,""),"-").concat(XG(12,""))),function(){let e;try{e=window.localStorage.getItem("websdk_ng_global_parameter")}catch(e){return void KH.error("Error loading sdk config",e.message)}if(e)try{const t=JSON.parse(window.atob(e)),n=Date.now();KH.debug("Loading global parameters from cache",t),Object.keys(t).forEach((e=>{if(Object.prototype.hasOwnProperty.call(wH,e)){const{value:r,expires:i}=t[e];if(i&&i<=n)return;OH[e]=r,wH[e]=r}}))}catch(t){KH.error("Error loading mutableParamsCache: ".concat(e),t.message)}}(),Array.isArray(OH.AREAS)&&OH.AREAS.length>0&&zZ(OH.AREAS,!0);const $7=(e,t,n)=>{KH.debug("setParameter key:".concat(e,", value:").concat(JSON.stringify(t))),IH(e,t,n)};I2(f7,!1),I2(b7,!1),I2(V5,!1),I2(Q7,!1),I2(h7,!1);const Z7=function(e){const t=new mG,n=e,r={getListeners:t.getListeners.bind(t),on:(e,n)=>(function(e,t){e===KK.SECURITY_POLICY_VIOLATION&&U3(t,!0)}(e,n),t.on.bind(t)(e,n)),addListener:t.addListener.bind(t),once:t.once.bind(t),off:t.off.bind(t),removeAllListeners:t.removeAllListeners.bind(t),emit:t.emit.bind(t),safeEmit:t.safeEmit.bind(t)};return k3(k3({},n),r)}({__TRACK_LIST__:VJ,VERSION:vH,BUILD:CH,ESM_BUNDLER:!1,ESM:!0,UMD:!1,DEV:!1,setParameter:$7,getParameter:AH,getSupportedCodec:async function(){let e={audio:[],video:[]};try{let t=new RTCPeerConnection;const n=await async function(e){let t;return SJ().supportUnifiedPlan?(e.addTransceiver("video",{direction:"recvonly"}),e.addTransceiver("audio",{direction:"recvonly"}),t=(await e.createOffer()).sdp):t=(await e.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0})).sdp,t}(t);if(!n)return e;t.close(),t=null,e=function(e){const t={video:[],audio:[]};return e.match(/ VP8/i)&&t.video.push("VP8"),e.match(/ VP9/i)&&t.video.push("VP9"),e.match(/ AV1/i)&&t.video.push("AV1"),e.match(/ H264/i)&&t.video.push("H264"),e.match(/ H265/i)&&t.video.push("H265"),e.match(/ opus/i)&&t.audio.push("OPUS"),e.match(/ PCMU/i)&&t.audio.push("PCMU"),e.match(/ PCMA/i)&&t.audio.push("PCMA"),e.match(/ G722/i)&&t.audio.push("G722"),t}(n)}catch(e){throw new eW(ZB.CREATE_OFFER_FAILED,e.toString&&e.toString()).print()}return e},checkSystemRequirements:function(){const e=ZH.reportApiInvoke(null,{name:EG.CHECK_SYSTEM_REQUIREMENTS,options:[],tag:yG.TRACER});let t=!1;try{const e=window.RTCPeerConnection,n=navigator.mediaDevices&&navigator.mediaDevices.getUserMedia,r=window.WebSocket;t=!!(e&&n&&r),t&&zB()&&DB(75)&&(new e).close()}catch(e){return KH.error("check system requirement failed: ",e),!1}let n=!1;const r=SB();r.name===EB.CHROME&&Number(r.version)>=58&&("WebKit"!==vB.engine.name||function(){const e=SB();if(wB()){if(e.os===_B.MAC_OS)return!0;if(e.os===_B.IOS){const e=vB.os.version&&vB.os.version.split(".");if(e&&14===Number(e[0])&&e[1]&&Number(e[1])>=3)return!0;if(e&&Number(e[0])>14)return!0}}return!1}())&&(n=!0),(r.name===EB.FIREFOX&&Number(r.version)>=56||r.name===EB.OPERA&&Number(r.version)>=45||r.name===EB.SAFARI&&Number(r.version)>=11||"WebKit"===r.name&&(NB()||HB())&&r.osVersion&&Number(r.osVersion.split(".")[0])>=11||WB()||SB().name===EB.QQ)&&(n=!0),KH.debug("checkSystemRequirements, api:",t,"browser",n);const i=t&&n;return e.onSuccess(i),i},getDevices:function(e){return LX.enumerateDevices(!0,!0,e)},getMicrophones:function(e){return LX.getRecordingDevices(e)},getCameras:function(e){return LX.getCamerasDevices(e)},getElectronScreenSources:wX,getPlaybackDevices:function(e){return LX.getSpeakers(e)},createClient:function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{codec:"vp8",audioCodec:"opus",mode:"rtc"};const n=ZH.reportApiInvoke(null,{name:EG.CREATE_CLIENT,options:[t],tag:yG.TRACER});try{!function(e){nG(e.codec,"config.codec",["vp8","vp9","av1","h264","h265"]),nG(e.mode,"config.mode",["rtc","live","p2p"]),void 0!==e.audioCodec&&nG(e.audioCodec,"config.audioCodec",["opus","pcmu","pcma","g722"]),void 0!==e.proxyServer&&oG(e.proxyServer,"config.proxyServer",1,1e4),void 0!==e.turnServer&&RG(e.turnServer),void 0!==e.httpRetryConfig&&vG(e.httpRetryConfig),void 0!==e.websocketRetryConfig&&vG(e.websocketRetryConfig)}(t)}catch(e){throw n.onError(e),e}return(MB(16,0,!0)||UB(16,0,!0))&&("vp9"===t.codec&&(t.codec="vp8",KH.debug("browser not support vp9, force use vp8")),IH("UNSUPPORTED_VIDEO_CODEC",["vp9"])),void 0===t.audioCodec&&(t.audioCodec="opus"),n.onSuccess(),new A3(I3(I3({forceWaitGatewayResponse:!0},t),{},{role:Fv(e=["rtc","p2p"]).call(e,t.mode)?"host":t.role||"audience"}))},createCameraVideoTrack:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=AH("CAMERA_CAPTURE_CONFIG"),n=ZH.reportApiInvoke(null,{tag:yG.TRACER,name:EG.CREATE_CAM_VIDEO_TRACK,options:[uX({},e),t]});t&&(e.encoderConfig=t);const r=JX(e),i=XG(8,"track-cam-");let o=null;KH.info("start create camera video track with config",JSON.stringify(e),"trackId",i);try{o=(await xX({video:r},i)).getVideoTracks()[0]||null}catch(e){throw n.onError(e),e}if(!o){const e=new eG(ZB.UNEXPECTED_ERROR,"can not find track in media stream");return n.onError(e),e.throw(KH)}e.optimizationMode&&N$(i,o,e,DJ(e.encoderConfig));const s=new x$(o,e,r,e.scalabiltyMode?kJ(e.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},e.optimizationMode,i);return n.onSuccess(s.getTrackId()),KH.info("create camera video success, trackId:",i),s},createCustomVideoTrack:function(e){const t=ZH.reportApiInvoke(null,{tag:yG.TRACER,name:EG.CREATE_CUSTOM_VIDEO_TRACK,options:[e]}),n=new O$(e.mediaStreamTrack,{width:e.width,height:e.height,frameRate:e.frameRate,bitrateMax:e.bitrateMax,bitrateMin:e.bitrateMin},e.scalabiltyMode?kJ(e.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},e.optimizationMode,XG(8,"track-cus-"),[BJ.CUSTOM_TRACK]);return t.onSuccess(n.getTrackId()),KH.info("create custom video track success with config",e,"trackId",n.getTrackId()),n},createScreenVideoTrack:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"disable";const n=ZH.reportApiInvoke(null,{tag:yG.TRACER,name:EG.CREATE_SCREEN_VIDEO_TRACK,options:[uX({},e),t]});e.encoderConfig?"string"==typeof e.encoderConfig||e.encoderConfig.width&&e.encoderConfig.height||(e.encoderConfig.width={max:1920},e.encoderConfig.height={max:1080}):e.encoderConfig="1080p_2";const r=function(e){const t={};e.screenSourceType&&(t.mediaSource=e.screenSourceType),e.extensionId&&IB()&&(t.extensionId=e.extensionId);const{displaySurface:n,selfBrowserSurface:r,surfaceSwitching:i,systemAudio:o}=e;(PB(107)||LB(107)||VB(93))&&(n&&(nG(n,"displaySurface",["browser","window","monitor"]),t.displaySurface=n),r?(nG(r,"selfBrowserSurface",["exclude","include"]),t.selfBrowserSurface=r):t.selfBrowserSurface="include",i&&(nG(i,"surfaceSwitching",["exclude","include"]),t.surfaceSwitching=i)),(PB(105)||LB(105)||VB(91))&&o&&(nG(o,"systemAudio",["exclude","include"]),t.systemAudio=o),e.electronScreenSourceId&&(t.sourceId=e.electronScreenSourceId);const s=e.encoderConfig?LJ(e.encoderConfig):null;return t.mandatory={chromeMediaSource:"desktop",maxWidth:s?s.width:void 0,maxHeight:s?s.height:void 0},s&&(s.frameRate&&("number"==typeof s.frameRate?(t.mandatory.maxFrameRate=s.frameRate,t.mandatory.minFrameRate=s.frameRate):(t.mandatory.maxFrameRate=s.frameRate.max||s.frameRate.ideal||s.frameRate.exact||void 0,t.mandatory.minFrameRate=s.frameRate.min||s.frameRate.ideal||s.frameRate.exact||void 0),t.frameRate=s.frameRate),s.width&&(t.width=s.width),s.height&&(t.height=s.height)),t}(e),i=XG(8,"track-scr-v-");let o=null,s=null;const a=SJ();if(!a.supportShareAudio&&"enable"===t){const e=new eG(ZB.NOT_SUPPORTED,"your browser or platform is not support share-screen with audio");return n.onError(e),e.throw(KH)}KH.info("start create screen video track with config",e,"withAudio",t,"trackId",i);try{const e=await xX({screen:r,screenAudio:"auto"===t?a.supportShareAudio:"enable"===t},i);o=e.getVideoTracks()[0]||null,s=e.getAudioTracks()[0]||null}catch(e){throw n.onError(e),e}if(!o){const e=new eG(ZB.UNEXPECTED_ERROR,"can not find track in media stream");return n.onError(e),e.throw(KH)}if(!s&&"enable"===t){o&&o.stop();const e=new eG(ZB.SHARE_AUDIO_NOT_ALLOWED);return n.onError(e),e.throw(KH)}e.optimizationMode||(e.optimizationMode="detail"),e.optimizationMode&&(N$(i,o,e,e.encoderConfig&&LJ(e.encoderConfig)||void 0),e.encoderConfig&&"string"!=typeof e.encoderConfig&&(e.encoderConfig.bitrateMin=e.encoderConfig.bitrateMax));const c=new O$(o,e.encoderConfig?LJ(e.encoderConfig):{},e.scalabiltyMode?kJ(e.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},e.optimizationMode,i,[BJ.SCREEN_TRACK]);if(!s)return n.onSuccess(c.getTrackId()),KH.info("create screen video track success","video:",c.getTrackId()),c;const d=new jQ(s,void 0,XG(8,"track-scr-a-"),!1);return n.onSuccess([c.getTrackId(),d.getTrackId()]),KH.info("create screen video track success","video:",c.getTrackId(),"audio:",d.getTrackId()),[c,d]},createMicrophoneAndCameraTracks:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=AH("CAMERA_CAPTURE_CONFIG"),r=ZH.reportApiInvoke(null,{tag:yG.TRACER,name:EG.CREATE_MIC_AND_CAM_TRACKS,options:[e,t,n]});n&&(t.encoderConfig=n);const i=JX(t),o=XX(e),s=XG(8,"track-mic-"),a=XG(8,"track-cam-");let c=null,d=null;KH.info("start create camera video track(".concat(a,") and microphone audio track(").concat(s,") with config, audio: ").concat(JSON.stringify(e),", video: ").concat(JSON.stringify(t)));try{const e=await xX({audio:o,video:i},"".concat(s,"-").concat(a));c=e.getAudioTracks()[0],d=e.getVideoTracks()[0]}catch(e){throw r.onError(e),e}if(!c||!d){const e=new eG(ZB.UNEXPECTED_ERROR,"can not find tracks in media stream");return r.onError(e),e.throw(KH)}t.optimizationMode&&N$(a,d,t,DJ(t.encoderConfig));const l=new BQ(c,e,o,s),h=new x$(d,t,i,t.scalabiltyMode?kJ(t.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},t.optimizationMode,a);return r.onSuccess([l.getTrackId(),h.getTrackId()]),KH.info("create camera video track(".concat(a,") and microphone audio track(").concat(s,") success")),[l,h]},createMicrophoneAudioTrack:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=ZH.reportApiInvoke(null,{tag:yG.TRACER,name:EG.CREATE_MIC_AUDIO_TRACK,options:[e]}),n=XX(e),r=XG(8,"track-mic-");let i=null;KH.info("start create microphone audio track with config",JSON.stringify(e),"trackId",r);try{i=(await xX({audio:n},r)).getAudioTracks()[0]||null}catch(e){throw t.onError(e),e}if(!i){const e=new eG(ZB.UNEXPECTED_ERROR,"can not find track in media stream");return t.onError(e),e.throw(KH)}const o=new BQ(i,e,n,r);return t.onSuccess(o.getTrackId()),KH.info("create microphone audio track success, trackId:",r),o},createCustomAudioTrack:function(e){const t=ZH.reportApiInvoke(null,{tag:yG.TRACER,name:EG.CREATE_CUSTOM_AUDIO_TRACK,options:[e]}),n=new jQ(e.mediaStreamTrack,e.encoderConfig?UJ(e.encoderConfig):{},XG(8,"track-cus-"),!1);return KH.info("create custom audio track success with config",e,"trackId",n.getTrackId()),t.onSuccess(n.getTrackId()),n},createBufferSourceAudioTrack:async function(e){var t;const{cacheOnlineFile:n,encoderConfig:r}=e;let{source:i}=e;const o={source:i instanceof AudioBuffer?"AudioBuffer":i instanceof File?null!==(t=File.name)&&void 0!==t?t:"File":i,cacheOnlineFile:n,encoderConfig:r},s=ZH.reportApiInvoke(null,{tag:yG.TRACER,name:EG.CREATE_BUFFER_AUDIO_TRACK,options:[o]});if(AH("DISABLE_WEBAUDIO"))throw new eG(ZB.NOT_SUPPORTED,"can not create BufferSourceAudioTrack when WebAudio disabled");const a=XG(8,"track-buf-");KH.info("start create buffer source audio track with config",JSON.stringify(o),"trackId",a);const c=i;if(!(i instanceof AudioBuffer))try{i=await async function(e,t){let n=null;if("string"==typeof e){const t=KQ.get(e);if(t)return KH.debug("use cached audio resource: ",e),t;try{n=(await uH((()=>hB.get(e,{responseType:"arraybuffer"})),void 0,void 0,{maxRetryCount:3})).data}catch(e){throw new eG(ZB.FETCH_AUDIO_FILE_FAILED,e.toString())}}else{const t=new LO(((t,n)=>{const r=new FileReader;r.onload=e=>{e.target?t(e.target.result):n(new eG(ZB.READ_LOCAL_AUDIO_FILE_ERROR))},r.onerror=()=>{n(new eG(ZB.READ_LOCAL_AUDIO_FILE_ERROR))},r.readAsArrayBuffer(e)}));n=await t}const r=await function(e){const t=EX();return new LO(((n,r)=>{t.decodeAudioData(e,(e=>{n(e)}),(e=>{r(new eG(ZB.DECODE_AUDIO_FILE_FAILED,e.toString()))}))}))}(n);return"string"==typeof e&&t&&KQ.set(e,r),r}(i,n)}catch(e){return s.onError(e),e.throw(KH)}const d=new WQ(i),l=new GQ(c,d,r?UJ(r):{},a);return KH.info("create buffer source audio track success, trackId:",a),s.onSuccess(l.getTrackId()),l},setAppType:function(e){if(KH.debug("setAppType: ".concat(e)),!(Number.isInteger(e)&&e>=0))throw KH.debug("Invalid appType"),new eW(ZB.INVALID_PARAMS,"invalid app type",e);IH("APP_TYPE",Math.floor(e))},setLogLevel:function(e){KH.setLogLevel(e)},enableLogUpload:function(){AH("USE_NEW_LOG")?IH("UPLOAD_LOG",!0):KH.enableLogUpload()},disableLogUpload:function(){AH("USE_NEW_LOG")?IH("UPLOAD_LOG",!1):KH.disableLogUpload()},createChannelMediaRelayConfiguration:function(){return new H1},checkAudioTrackIsActive:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;const n=ZH.reportApiInvoke(null,{tag:yG.TRACER,name:EG.CHECK_AUDIO_TRACK_IS_ACTIVE,options:[t]});if(!(e instanceof jQ||e instanceof z$)){const e=new eW(ZB.INVALID_TRACK,"the parameter is not a audio track");return n.onError(e),e.throw()}t&&t<1e3&&(t=1e3);const r=e instanceof jQ?e.getTrackLabel():"remote_track",i=e.getVolumeLevel();let o=i,s=i;const a=Date.now();return new LO((i=>{const c=setInterval((()=>{const d=e.getVolumeLevel();o=d>o?d:o,s=d<s?d:s;const l=o-s>1e-4,h=Date.now()-a;if(l||h>t){clearInterval(c);const t=l,s={duration:h,deviceLabel:r,maxVolumeLevel:o,result:t};KH.info("[track-".concat(e.getTrackId(),"] check audio track active completed. ").concat(JSON.stringify(s))),n.onSuccess(s),i(t)}}),200)}))},checkVideoTrackIsActive:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;const n=ZH.reportApiInvoke(null,{tag:yG.TRACER,name:EG.CHECK_VIDEO_TRACK_IS_ACTIVE,options:[t]});if(!(e instanceof O$||e instanceof K$)){const e=new eW(ZB.INVALID_TRACK,"the parameter is not a video track");return n.onError(e),e.throw()}t&&t<1e3&&(t=1e3);const r=e instanceof O$?e.getTrackLabel():"remote_track",i=e.getMediaStreamTrack(!0),o=document.createElement("video");o.style.width="1px",o.style.height="1px",o.setAttribute("muted",""),o.muted=!0,o.setAttribute("playsinline",""),o.controls=!1,(AB()||wB())&&(o.style.opacity="0.01",o.style.position="fixed",o.style.left="0",o.style.top="0",document.body.appendChild(o)),o.srcObject=new MediaStream([i]),o.play();const s=document.createElement("canvas");s.width=160,s.height=120;let a=0,c=0;try{const e=Date.now();a=await function(e,t,n){let r,i=0,o=null;return new LO(((s,a)=>{setTimeout((()=>{r&&(r(),s(i))}),t),r=bX((()=>{!function(){i>4&&r&&(r(),s(i));const t=n.getContext("2d");if(!t){const e=new eW(ZB.UNEXPECTED_ERROR,"can not get canvas 2d context.");return KH.error(e.toString()),void a(e)}t.drawImage(e,0,0,160,120);const c=t.getImageData(0,0,n.width,n.height),d=Math.floor(c.data.length/3);if(o){for(let e=0;e<d;e+=3)if(c.data[e]!==o[e])return i+=1,void(o=c.data);o=c.data}else o=c.data}()}),30)}))}(o,t,s),c=Date.now()-e}catch(e){throw n.onError(e),e}V2===EB.SAFARI&&(o.pause(),o.remove()),o.srcObject=null;const d=a>4,l={duration:c,changedPicNum:a,deviceLabel:r,result:d};return KH.info("[track-".concat(e.getTrackId(),"] check video track active completed. ").concat(JSON.stringify(l))),n.onSuccess(l),d},setArea:zZ,audioElementPlayCenter:jX,resumeAudioContext:function(){jX.autoResumeAfterInterruption(!0)},processExternalMediaAEC:function(e){D3.processExternalMediaAEC(e)},registerExtensions:function(e){const t=AH("PLUGIN_INFO")||[];e.forEach((e=>{"name"in e&&!Fv(t).call(t,e.name)&&t.push(e.name);const n=e;n.__registered__=!0,n.logger.hookLog=KH.extLog,n.reporter.hookApiInvoke=ZH.extApiInvoke,n.parameters&&Object.keys(n.parameters).forEach((e=>{n.parameters[e]=AH(e)}))})),$7("PLUGIN_INFO",t)},ChannelMediaRelayError:TK,ChannelMediaRelayEvent:bK,ChannelMediaRelayState:SK,RemoteStreamFallbackType:WJ,RemoteStreamType:HJ,ConnectionDisconnectedReason:SG,AudienceLatencyLevelType:bG,AREAS:AK,preload:async function(e,t,n,r){return Q2(e,t,n,r)}});Object.defineProperties(Z7,{onAudioAutoplayFailed:{get:()=>MX.onAudioAutoplayFailed,set:e=>{MX.onAudioAutoplayFailed=e}},onAutoplayFailed:{get:()=>MX.onAutoplayFailed,set:e=>{MX.onAutoplayFailed=e}},_onSecurityPolicyViolation:{value:void 0,writable:!0},_cspEventHandlerPointer:{value:void 0,writable:!0},onSecurityPolicyViolation:{get:()=>Z7._onSecurityPolicyViolation,set(e){Z7._onSecurityPolicyViolation=e,U3(e)}},__CLIENT_LIST__:{get:()=>AH("SHOW_GLOBAL_CLIENT_LIST")?rW:[]}}),LX.on(iX.CAMERA_DEVICE_CHANGED,(e=>{KH.info("camera device changed",JSON.stringify(e)),Z7.onCameraChanged&&Z7.onCameraChanged(e),Z7.safeEmit(KK.CAMERA_CHANGED,e)})),LX.on(iX.RECORDING_DEVICE_CHANGED,(e=>{KH.info("microphone device changed",JSON.stringify(e)),Z7.onMicrophoneChanged&&Z7.onMicrophoneChanged(e),Z7.safeEmit(KK.MICROPHONE_CHANGED,e)})),LX.on(iX.PLAYOUT_DEVICE_CHANGED,(e=>{KH.debug("playout device changed",JSON.stringify(e)),Z7.onPlaybackDeviceChanged&&Z7.onPlaybackDeviceChanged(e),Z7.safeEmit(KK.PLAYBACK_DEVICE_CHANGED,e)})),jX.onAutoplayFailed=()=>{KH.info("detect audio element autoplay failed"),MX.onAudioAutoplayFailed&&MX.onAudioAutoplayFailed()},_X.on("autoplay-failed",(()=>{KH.info("detect webaudio autoplay failed"),MX.onAudioAutoplayFailed&&MX.onAudioAutoplayFailed(),Z7.safeEmit(KK.AUTOPLAY_FAILED)})),_X.on(CJ.STATE_CHANGE,((e,t)=>{KH.info("audio context state changed: ".concat(t," => ").concat(e)),Z7.onAudioContextStateChanged&&Z7.onAudioContextStateChanged(e,t),Z7.safeEmit(KK.AUDIO_CONTEXT_STATE_CHANGED,e,t)})),LG.on(OG.NETWORK_STATE_CHANGE,((e,t)=>{KH.info("[network-indicator] network state changed, ".concat(t," => ").concat(e))})),window&&(window.__ARTC__=Z7);var e9={class:"modal fade",id:"prescriptionModal","data-backdrop":"static","data-keyboard":"false","aria-labelledby":"prescriptionModalLabel","aria-hidden":"true"},t9={class:"modal-dialog modal-dialog-centered"},n9={class:"modal-content"},r9={class:"modal-body"},i9={style:{border:"solid 1px lightgray","margin-top":"10px",padding:"5px"}},o9={class:"row prescription"},s9={class:"col"},a9={class:"row prescription"},c9={class:"col"},d9={class:"col"},l9={class:"row prescription"},h9={class:"col"},u9={class:"col"},p9={class:"row prescription"},f9={class:"col"},m9={class:"col"},g9={class:"row"},_9={class:"col"},E9=["onClick"],y9={class:"row prescription"},v9={class:"col"},b9=["onUpdate:modelValue"],S9={class:"row prescription"},T9={class:"col"},R9=["onUpdate:modelValue"],C9={class:"col"},w9=["onUpdate:modelValue"],I9={class:"row prescription"},A9={class:"col"},O9=["onUpdate:modelValue"],x9={class:"col"},N9=["onUpdate:modelValue"],P9={class:"row prescription"},D9={class:"col"},L9=["onUpdate:modelValue"],k9={class:"col"},M9=["onUpdate:modelValue"],U9={class:"modal-footer"};function V9(e){return V9="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},V9(e)}function F9(){F9=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function d(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(e){d=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var o=t&&t.prototype instanceof _?t:_,s=Object.create(o.prototype),a=new x(r||[]);return i(s,"_invoke",{value:w(e,n,a)}),s}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var u="suspendedStart",p="suspendedYield",f="executing",m="completed",g={};function _(){}function E(){}function y(){}var v={};d(v,s,(function(){return this}));var b=Object.getPrototypeOf,S=b&&b(b(N([])));S&&S!==n&&r.call(S,s)&&(v=S);var T=y.prototype=_.prototype=Object.create(v);function R(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){function n(i,o,s,a){var c=h(e[i],e,o);if("throw"!==c.type){var d=c.arg,l=d.value;return l&&"object"==V9(l)&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,s,a)}),(function(e){n("throw",e,s,a)})):t.resolve(l).then((function(e){d.value=e,s(d)}),(function(e){return n("throw",e,s,a)}))}a(c.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function w(t,n,r){var i=u;return function(o,s){if(i===f)throw Error("Generator is already running");if(i===m){if("throw"===o)throw s;return{value:e,done:!0}}for(r.method=o,r.arg=s;;){var a=r.delegate;if(a){var c=I(a,r);if(c){if(c===g)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===u)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=f;var d=h(t,n,r);if("normal"===d.type){if(i=r.done?m:p,d.arg===g)continue;return{value:d.arg,done:r.done}}"throw"===d.type&&(i=m,r.method="throw",r.arg=d.arg)}}}function I(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,I(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var o=h(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,g;var s=o.arg;return s?s.done?(n[t.resultName]=s.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function N(t){if(t||""===t){var n=t[s];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(V9(t)+" is not iterable")}return E.prototype=y,i(T,"constructor",{value:y,configurable:!0}),i(y,"constructor",{value:E,configurable:!0}),E.displayName=d(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===E||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,d(e,c,"GeneratorFunction")),e.prototype=Object.create(T),e},t.awrap=function(e){return{__await:e}},R(C.prototype),d(C.prototype,a,(function(){return this})),t.AsyncIterator=C,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var s=new C(l(e,n,r,i),o);return t.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},R(T),d(T,c,"Generator"),d(T,s,(function(){return this})),d(T,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=N,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return a.type="throw",a.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return i("end");if(s.tryLoc<=this.prev){var c=r.call(s,"catchLoc"),d=r.call(s,"finallyLoc");if(c&&d){if(this.prev<s.catchLoc)return i(s.catchLoc,!0);if(this.prev<s.finallyLoc)return i(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return i(s.catchLoc,!0)}else{if(!d)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return i(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;O(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:N(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}function j9(e,t,n,r,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,i)}function B9(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return G9(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?G9(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}function G9(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const H9={props:{activity_id:{type:Number},baseUrl:{type:String},code:{type:String},form_type:{type:String}},data:function(){return{prescriptionSubmitted:!1,generic_name:"",brandname:"",dosage:"",quantity:"",formulation:"",frequency:"",duration:"",prescribed_activity_id:"",prescriptions:[]}},created:function(){var e=this.code;this.fetchPrescriptions(e)},methods:{checkRequiredProperties:function(e){return e.generic_name?e.dosage?e.quantity?e.formulation?e.frequency?!!e.duration||(Lobibox.alert("error",{msg:"Please input duration"}),!1):(Lobibox.alert("error",{msg:"Please input frequency"}),!1):(Lobibox.alert("error",{msg:"Please input formulation"}),!1):(Lobibox.alert("error",{msg:"Please input quantity"}),!1):(Lobibox.alert("error",{msg:"Please input dosage"}),!1):(Lobibox.alert("error",{msg:"Please input generic name"}),!1)},savePrescriptions:function(){var e=this;if(this.checkRequiredProperties(this)){var t,n=B9(this.prescriptions);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!this.checkRequiredProperties(r))return}}catch(e){n.e(e)}finally{n.f()}var i={singlePrescription:{generic_name:this.generic_name,brandname:this.brandname,dosage:this.dosage,quantity:this.quantity,formulation:this.formulation,frequency:this.frequency,duration:this.duration,code:this.code,activity_id:this.activity_id,form_type:this.form_type,prescribed_activity_id:this.prescribed_activity_id},multiplePrescriptions:this.prescriptions};Lobibox.alert("success",{msg:"Prescriptions saved successfully!"}),$("#prescriptionModal").modal("hide"),console.log("Combined Prescription Data:",i),ug().post("".concat(this.baseUrl,"/api/video/prescriptions"),i).then((function(t){console.log("Prescription submitted successfully",t.data),e.prescriptions=[],e.fetchPrescriptions(e.code)})).catch((function(e){console.error("Error submitting prescription",e)}))}},addEmptyPrescriptionBlock:function(){this.prescriptions.push({generic_name:"",brandname:"",dosage:"",quantity:"",formulation:"",frequency:"",duration:""})},deletePrescription:function(e){var t=this,n=this.prescriptions[e];n.id?confirm("Are you sure you want to delete this prescription?")&&ug().delete("".concat(this.baseUrl,"/api/video/prescriptions/").concat(n.id)).then((function(n){Lobibox.alert("success",{msg:"Prescription deleted successfully!"}),console.log("Prescription deleted successfully",n.data),t.prescriptions.splice(e,1)})).catch((function(e){console.error("Error deleting prescription",e)})):this.prescriptions.splice(e,1)},fetchPrescriptions:function(e){var t=this;return function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function s(e){j9(o,r,i,s,a,"next",e)}function a(e){j9(o,r,i,s,a,"throw",e)}s(void 0)}))}}(F9().mark((function n(){var r,i;return F9().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,ug().get("".concat(t.baseUrl,"/api/video/prescriptions/").concat(e));case 3:r=n.sent,t.prescriptions=r.data.prescriptions,(i=t.prescriptions[0])?(t.generic_name=i.generic_name||"",t.brandname=i.brandname||"",t.dosage=i.dosage||"",t.quantity=i.quantity||"",t.formulation=i.formulation||"",t.frequency=i.frequency||"",t.duration=i.duration||"",t.prescribed_activity_id=i.prescribed_activity_id||"",t.prescriptions=t.prescriptions.slice(1)):console.error("No prescriptions available."),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),console.error("Error fetching prescriptions:",n.t0);case 12:case"end":return n.stop()}}),n,null,[[0,9]])})))()}}};var W9=n(5072),K9=n.n(W9),z9=n(9036),q9={insert:"head",singleton:!1};K9()(z9.A,q9);z9.A.locals;var Y9=n(6262);const J9=(0,Y9.A)(H9,[["render",function(e,t,n,r,i,o){return Vs(),Ws("div",e9,[Qs("div",t9,[Qs("div",n9,[t[30]||(t[30]=ra('<div class="modal-header" data-v-2ef66500><h5 class="modal-title fs-5" id="prescriptionModalLabel" data-v-2ef66500><i class="bi bi-prescription" data-v-2ef66500></i> Prescription</h5><button type="button" class="close" data-dismiss="modal" aria-label="Close" data-v-2ef66500><span aria-hidden="true" data-v-2ef66500>×</span></button></div>',1)),Qs("div",r9,[t[25]||(t[25]=ra('<div class="container" data-v-2ef66500>Ex. <div class="row row-circle" data-v-2ef66500><div class="circle1" data-v-2ef66500>1</div><div class="circle2" data-v-2ef66500>2</div><div class="circle3" data-v-2ef66500>3</div><div class="circle4" data-v-2ef66500>4</div><div class="circle5" data-v-2ef66500>5</div></div><div class="row row-presLabel" data-v-2ef66500><div class="col col-presLabel" data-v-2ef66500><div class="col-Label" data-v-2ef66500><span class="underline" data-v-2ef66500>Paracetamol</span><span class="underline" data-v-2ef66500>(Biogesic)</span><span class="underline" data-v-2ef66500>500mg</span><span class="underline" data-v-2ef66500>#30</span><span class="underline" data-v-2ef66500>Tablet</span></div></div></div><div class="row row-circle" data-v-2ef66500><div class="circle6" data-v-2ef66500>6</div><div class="circle7" data-v-2ef66500>7</div></div><div class="row row-presLabel" data-v-2ef66500><div class="col col-presLabel" data-v-2ef66500><div class="col-Label" data-v-2ef66500>Sig: <span class="underline" data-v-2ef66500>1 Tab</span> for <span class="underline" data-v-2ef66500>Every 4 hours</span></div></div></div></div>',1)),Qs("div",i9,[Qs("div",o9,[Qs("div",s9,[t[10]||(t[10]=Qs("label",{for:"generic_name"},[na("1.) Generic Name:"),Qs("span",{style:{color:"red"}},"*")],-1)),pr(Qs("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=function(e){return i.generic_name=e}),class:"form-control form-control-sm"},null,512),[[pd,i.generic_name]])])]),Qs("div",a9,[Qs("div",c9,[t[11]||(t[11]=Qs("label",{for:"brandname"},"2.) Brand Name: (Optional)",-1)),pr(Qs("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=function(e){return i.brandname=e}),class:"form-control form-control-sm"},null,512),[[pd,i.brandname]])]),Qs("div",d9,[t[12]||(t[12]=Qs("label",{for:"dosage"},[na("3.) Dosage:"),Qs("span",{style:{color:"red"}},"*")],-1)),pr(Qs("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=function(e){return i.dosage=e}),class:"form-control form-control-sm"},null,512),[[pd,i.dosage]])])]),Qs("div",l9,[Qs("div",h9,[t[13]||(t[13]=Qs("label",{for:"quantity"},[na("4.) Quantity:"),Qs("span",{style:{color:"red"}},"*")],-1)),pr(Qs("input",{type:"number","onUpdate:modelValue":t[3]||(t[3]=function(e){return i.quantity=e}),class:"form-control form-control-sm"},null,512),[[pd,i.quantity]])]),Qs("div",u9,[t[14]||(t[14]=Qs("label",{for:"formulation"},[na("5.) Formulation:"),Qs("span",{style:{color:"red"}},"*")],-1)),pr(Qs("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=function(e){return i.formulation=e}),class:"form-control form-control-sm"},null,512),[[pd,i.formulation]])])]),Qs("div",p9,[Qs("div",f9,[t[15]||(t[15]=Qs("label",{for:"frequency"},[na("6.) Frequency:"),Qs("span",{style:{color:"red"}},"*")],-1)),pr(Qs("input",{type:"text","onUpdate:modelValue":t[5]||(t[5]=function(e){return i.frequency=e}),class:"form-control form-control-sm"},null,512),[[pd,i.frequency]])]),Qs("div",m9,[t[16]||(t[16]=Qs("label",{for:"duration"},[na("7.) Duration:"),Qs("span",{style:{color:"red"}},"*")],-1)),pr(Qs("input",{type:"text","onUpdate:modelValue":t[6]||(t[6]=function(e){return i.duration=e}),class:"form-control form-control-sm"},null,512),[[pd,i.duration]])])])]),(Vs(!0),Ws(Ps,null,Bi(i.prescriptions,(function(e,n){return Vs(),Ws("div",{key:n,style:{border:"solid 1px slategray","margin-top":"10px",padding:"5px"}},[Qs("div",g9,[Qs("div",_9,[Qs("button",{class:"btn btn-danger btn-sm",onClick:function(e){return o.deletePrescription(n)}},t[17]||(t[17]=[Qs("i",{class:"bi bi-trash"},null,-1)]),8,E9)])]),Qs("div",y9,[Qs("div",v9,[t[18]||(t[18]=Qs("label",{for:"generic_name"},[na("1.) Generic Name:"),Qs("span",{style:{color:"red"}},"*")],-1)),pr(Qs("input",{type:"text","onUpdate:modelValue":function(t){return e.generic_name=t},class:"form-control form-control-sm"},null,8,b9),[[pd,e.generic_name]])])]),Qs("div",S9,[Qs("div",T9,[t[19]||(t[19]=Qs("label",{for:"brandname"},"2.) Brand Name: (Optional)",-1)),pr(Qs("input",{type:"text","onUpdate:modelValue":function(t){return e.brandname=t},class:"form-control form-control-sm"},null,8,R9),[[pd,e.brandname]])]),Qs("div",C9,[t[20]||(t[20]=Qs("label",{for:"dosage"},[na("3.) Dosage:"),Qs("span",{style:{color:"red"}},"*")],-1)),pr(Qs("input",{type:"text","onUpdate:modelValue":function(t){return e.dosage=t},class:"form-control form-control-sm"},null,8,w9),[[pd,e.dosage]])])]),Qs("div",I9,[Qs("div",A9,[t[21]||(t[21]=Qs("label",{for:"quantity"},[na("4.) Quantity:"),Qs("span",{style:{color:"red"}},"*")],-1)),pr(Qs("input",{type:"number","onUpdate:modelValue":function(t){return e.quantity=t},class:"form-control form-control-sm"},null,8,O9),[[pd,e.quantity]])]),Qs("div",x9,[t[22]||(t[22]=Qs("label",{for:"formulation"},[na("5.) Formulation:"),Qs("span",{style:{color:"red"}},"*")],-1)),pr(Qs("input",{type:"text","onUpdate:modelValue":function(t){return e.formulation=t},class:"form-control form-control-sm"},null,8,N9),[[pd,e.formulation]])])]),Qs("div",P9,[Qs("div",D9,[t[23]||(t[23]=Qs("label",{for:"frequency"},[na("6.) Frequency:"),Qs("span",{style:{color:"red"}},"*")],-1)),pr(Qs("input",{type:"text","onUpdate:modelValue":function(t){return e.frequency=t},class:"form-control form-control-sm"},null,8,L9),[[pd,e.frequency]])]),Qs("div",k9,[t[24]||(t[24]=Qs("label",{for:"duration"},[na("7.) Duration:"),Qs("span",{style:{color:"red"}},"*")],-1)),pr(Qs("input",{type:"text","onUpdate:modelValue":function(t){return e.duration=t},class:"form-control form-control-sm"},null,8,M9),[[pd,e.duration]])])])])})),128))]),Qs("div",U9,[t[29]||(t[29]=Qs("button",{class:"btn btn-secondary btn-sm",type:"button","data-dismiss":"modal"},"Close",-1)),Qs("button",{class:"btn btn-primary btn-sm",type:"button",onClick:t[7]||(t[7]=function(e){return o.addEmptyPrescriptionBlock()})},t[26]||(t[26]=[Qs("i",{class:"bi bi-prescription2"},null,-1),na(" Add Prescription")])),i.prescriptionSubmitted?(Vs(),Ws("button",{key:0,class:"btn btn-success btn-sm",type:"button",onClick:t[8]||(t[8]=function(e){return o.savePrescriptions()})},t[27]||(t[27]=[Qs("i",{class:"bi bi-prescription"},null,-1),na(" Update Prescription")]))):(Vs(),Ws("button",{key:1,class:"btn btn-success btn-sm",type:"button",onClick:t[9]||(t[9]=function(e){return o.savePrescriptions()})},t[28]||(t[28]=[Qs("i",{class:"bi bi-prescription"},null,-1),na(" Submit Prescription")])))])])])])}],["__scopeId","data-v-2ef66500"]]);var X9={class:"modal fade",id:"labRequestModal","data-backdrop":"static","data-keyboard":"false","aria-labelledby":"prescriptionModalLabel","aria-hidden":"true"},Q9={class:"modal-dialog modal-dialog-centered modal-lg"},$9={class:"modal-content"},Z9={class:"modal-body"},eee={class:"input-group mb-3"},tee={id:"modal-body-scroll"},nee=["value"],ree={class:"form-check-label",for:"checkbox1"},iee={class:"modal-footer"};window.axios=n(2505),window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";var oee=document.head.querySelector('meta[name="csrf-token"]');oee?window.axios.defaults.headers.common["X-CSRF-TOKEN"]=oee.content:console.error("CSRF token not found: https://laravel.com/docs/csrf#csrf-x-csrf-token");const see={get:function(e,t,n){return axios.get(e,{params:t,headers:n})},deletes:function(e,t,n){return axios.delete(e,{params:t,headers:n})},post:function(e,t,n){return axios.post(e,t,n)},put:function(e,t,n){return axios.put(e,t,n)}};var aee=$("#broadcasting_url").val();function cee(e){return see.post(aee+"/api/laboratories",e)}function dee(e){return dee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dee(e)}function lee(){lee=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function d(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(e){d=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var o=t&&t.prototype instanceof _?t:_,s=Object.create(o.prototype),a=new x(r||[]);return i(s,"_invoke",{value:w(e,n,a)}),s}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var u="suspendedStart",p="suspendedYield",f="executing",m="completed",g={};function _(){}function E(){}function y(){}var v={};d(v,s,(function(){return this}));var b=Object.getPrototypeOf,S=b&&b(b(N([])));S&&S!==n&&r.call(S,s)&&(v=S);var T=y.prototype=_.prototype=Object.create(v);function R(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){function n(i,o,s,a){var c=h(e[i],e,o);if("throw"!==c.type){var d=c.arg,l=d.value;return l&&"object"==dee(l)&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,s,a)}),(function(e){n("throw",e,s,a)})):t.resolve(l).then((function(e){d.value=e,s(d)}),(function(e){return n("throw",e,s,a)}))}a(c.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function w(t,n,r){var i=u;return function(o,s){if(i===f)throw Error("Generator is already running");if(i===m){if("throw"===o)throw s;return{value:e,done:!0}}for(r.method=o,r.arg=s;;){var a=r.delegate;if(a){var c=I(a,r);if(c){if(c===g)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===u)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=f;var d=h(t,n,r);if("normal"===d.type){if(i=r.done?m:p,d.arg===g)continue;return{value:d.arg,done:r.done}}"throw"===d.type&&(i=m,r.method="throw",r.arg=d.arg)}}}function I(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,I(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var o=h(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,g;var s=o.arg;return s?s.done?(n[t.resultName]=s.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function N(t){if(t||""===t){var n=t[s];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(dee(t)+" is not iterable")}return E.prototype=y,i(T,"constructor",{value:y,configurable:!0}),i(y,"constructor",{value:E,configurable:!0}),E.displayName=d(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===E||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,d(e,c,"GeneratorFunction")),e.prototype=Object.create(T),e},t.awrap=function(e){return{__await:e}},R(C.prototype),d(C.prototype,a,(function(){return this})),t.AsyncIterator=C,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var s=new C(l(e,n,r,i),o);return t.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},R(T),d(T,c,"Generator"),d(T,s,(function(){return this})),d(T,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=N,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return a.type="throw",a.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return i("end");if(s.tryLoc<=this.prev){var c=r.call(s,"catchLoc"),d=r.call(s,"finallyLoc");if(c&&d){if(this.prev<s.catchLoc)return i(s.catchLoc,!0);if(this.prev<s.finallyLoc)return i(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return i(s.catchLoc,!0)}else{if(!d)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return i(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;O(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:N(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}function hee(e,t,n,r,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,i)}function uee(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function s(e){hee(o,r,i,s,a,"next",e)}function a(e){hee(o,r,i,s,a,"throw",e)}s(void 0)}))}}function pee(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,s,a=[],c=!0,d=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(a.push(r.value),a.length!==t);c=!0);}catch(e){d=!0,i=e}finally{try{if(!c&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(d)throw i}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return fee(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?fee(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fee(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const mee={data:function(){return{baseUrl:$("#broadcasting_url").val(),searchTerm:"",laboratories:[],laboratoriesHolder:[],checkedLaboratories:[]}},props:{activity_id:{type:Number},requested_by:{type:Number}},mounted:function(){console.log(this.activity_id),this.__getLaboratories()},methods:{searchLaboratories:function(){var e=this.searchTerm.toLowerCase(),t=new RegExp(e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"i");this.laboratories=e?Object.entries(this.laboratoriesHolder).filter((function(e){var n=pee(e,2),r=n[0],i=n[1];return t.test(r.toLowerCase())||t.test(i.toLowerCase())})).reduce((function(e,t){var n=pee(t,2),r=n[0],i=n[1];return e[r]=i,e}),{}):this.laboratoriesHolder},submitForm:function(){if(this.checkedLaboratories.length>0){var e={activity_id:this.activity_id,requested_by:this.requested_by,laboratory_code:this.checkedLaboratories};return this.__saveLaboratories(e),$("#labRequestModal").modal("hide"),void Lobibox.notify("success",{title:"Laboratory Request",msg:"Laboratory successfully request",img:this.baseUrl+"/resources/img/ro7.png"})}Lobibox.alert("error",{msg:"Please select a laboratory to request"})},__getLaboratories:function(){var e=this;return uee(lee().mark((function t(){var n;return lee().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,see.get(aee+"/api/laboratories");case 2:n=t.sent,e.laboratories=n.data,e.laboratoriesHolder=n.data;case 5:case"end":return t.stop()}}),t)})))()},__saveLaboratories:function(e){return uee(lee().mark((function t(){var n;return lee().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,cee(e);case 2:n=t.sent,console.log(n.data);case 4:case"end":return t.stop()}}),t)})))()}}};var gee=n(2542),_ee={insert:"head",singleton:!1};K9()(gee.A,_ee);gee.A.locals;function Eee(e){return Eee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Eee(e)}function yee(){yee=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function d(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(e){d=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var o=t&&t.prototype instanceof _?t:_,s=Object.create(o.prototype),a=new x(r||[]);return i(s,"_invoke",{value:w(e,n,a)}),s}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var u="suspendedStart",p="suspendedYield",f="executing",m="completed",g={};function _(){}function E(){}function y(){}var v={};d(v,s,(function(){return this}));var b=Object.getPrototypeOf,S=b&&b(b(N([])));S&&S!==n&&r.call(S,s)&&(v=S);var T=y.prototype=_.prototype=Object.create(v);function R(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){function n(i,o,s,a){var c=h(e[i],e,o);if("throw"!==c.type){var d=c.arg,l=d.value;return l&&"object"==Eee(l)&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,s,a)}),(function(e){n("throw",e,s,a)})):t.resolve(l).then((function(e){d.value=e,s(d)}),(function(e){return n("throw",e,s,a)}))}a(c.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function w(t,n,r){var i=u;return function(o,s){if(i===f)throw Error("Generator is already running");if(i===m){if("throw"===o)throw s;return{value:e,done:!0}}for(r.method=o,r.arg=s;;){var a=r.delegate;if(a){var c=I(a,r);if(c){if(c===g)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===u)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=f;var d=h(t,n,r);if("normal"===d.type){if(i=r.done?m:p,d.arg===g)continue;return{value:d.arg,done:r.done}}"throw"===d.type&&(i=m,r.method="throw",r.arg=d.arg)}}}function I(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,I(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var o=h(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,g;var s=o.arg;return s?s.done?(n[t.resultName]=s.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function N(t){if(t||""===t){var n=t[s];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(Eee(t)+" is not iterable")}return E.prototype=y,i(T,"constructor",{value:y,configurable:!0}),i(y,"constructor",{value:E,configurable:!0}),E.displayName=d(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===E||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,d(e,c,"GeneratorFunction")),e.prototype=Object.create(T),e},t.awrap=function(e){return{__await:e}},R(C.prototype),d(C.prototype,a,(function(){return this})),t.AsyncIterator=C,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var s=new C(l(e,n,r,i),o);return t.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},R(T),d(T,c,"Generator"),d(T,s,(function(){return this})),d(T,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=N,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return a.type="throw",a.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return i("end");if(s.tryLoc<=this.prev){var c=r.call(s,"catchLoc"),d=r.call(s,"finallyLoc");if(c&&d){if(this.prev<s.catchLoc)return i(s.catchLoc,!0);if(this.prev<s.finallyLoc)return i(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return i(s.catchLoc,!0)}else{if(!d)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return i(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;O(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:N(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}function vee(e,t,n,r,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,i)}function bee(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function s(e){vee(o,r,i,s,a,"next",e)}function a(e){vee(o,r,i,s,a,"throw",e)}s(void 0)}))}}const See={name:"RecoApp",components:{PrescriptionModal:J9,LabRequestModal:(0,Y9.A)(mee,[["render",function(e,t,n,r,i,o){return Vs(),Ws("div",X9,[Qs("div",Q9,[Qs("div",$9,[t[5]||(t[5]=ra('<div class="modal-header" data-v-0c45a2e6><h5 class="modal-title fs-5" id="prescriptionModalLabel" data-v-0c45a2e6><i class="bi bi-prescription2" data-v-0c45a2e6></i> Lab Request</h5><button type="button" class="close" data-dismiss="modal" aria-label="Close" data-v-0c45a2e6><span aria-hidden="true" data-v-0c45a2e6>×</span></button></div>',1)),Qs("div",Z9,[Qs("div",eee,[pr(Qs("input",{type:"text",class:"form-control",placeholder:"Search Laboratory...","aria-label":"Search...","aria-describedby":"searchButton","onUpdate:modelValue":t[0]||(t[0]=function(e){return i.searchTerm=e}),onKeyup:t[1]||(t[1]=function(){return o.searchLaboratories&&o.searchLaboratories.apply(o,arguments)})},null,544),[[pd,i.searchTerm]])]),Qs("div",tee,[(Vs(!0),Ws(Ps,null,Bi(i.laboratories,(function(e,n){return Vs(),Ws("div",{class:"form-check laboratory-check",key:n},[pr(Qs("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=function(e){return i.checkedLaboratories=e}),value:n},null,8,nee),[[fd,i.checkedLaboratories]]),Qs("label",ree,pe("".concat(n," - ").concat(e)),1)])})),128))])]),Qs("div",iee,[Qs("button",{class:"btn btn-success btn-sm",type:"button",onClick:t[3]||(t[3]=function(){return o.submitForm&&o.submitForm.apply(o,arguments)})},t[4]||(t[4]=[Qs("i",{class:"bi bi-save"},null,-1),na(" Submit")]))])])])])}],["__scopeId","data-v-0c45a2e6"]])},data:function(){return{showAudio:!1,showVedio:!1,Endcall:!1,showUpward:!1,showPrescription:!1,showLab:!1,ringingPhoneUrl:$("#broadcasting_url").val()+"/public/ringing.mp3",baseUrl:$("#broadcasting_url").val(),doctorUrl:$("#broadcasting_url").val()+"/resources/img/video/Doctor5.png",doctorUrl1:$("#broadcasting_url").val()+"/resources/img/video/Doctor6.png",declineUrl:$("#broadcasting_url").val()+"/resources/img/video/decline.png",videoCallUrl:$("#broadcasting_url").val()+"/resources/img/video/videocall.png",micUrl:$("#broadcasting_url").val()+"/resources/img/video/mic.png",dohLogoUrl:$("#broadcasting_url").val()+"/resources/img/video/doh-logo.png",tracking_id:this.getUrlVars().id,referral_code:this.getUrlVars().code,referring_md:this.getUrlVars().referring_md,activity_id:this.getUrlVars().activity_id,options:{appId:"0fc02f6b7ce04fbcb1991d71df2dbe0d",channel:this.getUrlVars().code,token:null,uid:0},form:{pregnant:{notes_diagnoses:"",other_diagnoses:"",other_reason_referral:""}},patient_age:"",file_path:[],file_name:[],icd:[],reason:{},formBaby:{},videoStreaming:!0,audioStreaming:!0,channelParameters:{localAudioTrack:null,localVideoTrack:null,remoteAudioTrack:null,remoteVideoTrack:null,remoteUid:null},showDiv:!1,prescription:"",prescriptionSubmitted:!1,form_type:"pregnant"}},mounted:function(){var e=this;ug().get("".concat(this.baseUrl,"/doctor/referral/video/pregnant/form/").concat(this.tracking_id)).then((function(t){var n=t.data;console.log("testing"),console.log(n),e.form=n.form.pregnant,e.formBaby=n.form.baby,"y"===n.age_type?e.patient_age=n.patient_age+" Years Old":"m"===n.age_type&&(e.patient_age=n.patient_age+" Months Old"),e.icd=n.icd,console.log("testing\n"+e.icd),e.file_path=n.file_path,e.file_name=n.file_name,e.reason=n.reason,console.log(n)})).catch((function(e){console.log(e)})),window.addEventListener("click",this.showDivAgain)},beforeUnmount:function(){window.removeEventListener("click",this.showDivAgain)},props:["user"],created:function(){var e=this;$(document).ready((function(){console.log("ready!"),e.ringingPhoneFunc()})),this.startBasicCall()},methods:{startBasicCall:function(){var e=this;return bee(yee().mark((function t(){var n,r,i,o;return yee().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=Z7.createClient({mode:"rtc",codec:"vp8"}),r=document.createElement("div"),(i=document.createElement("div")).id=e.options.uid,o=e,n.on("user-published",function(){var e=bee(yee().mark((function e(t,i){return yee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.subscribe(t,i);case 2:console.log("subscribe success"),"video"==i&&(console.log("remote"),o.channelParameters.remoteVideoTrack=t.videoTrack,o.channelParameters.remoteAudioTrack=t.audioTrack,o.channelParameters.remoteUid=t.uid.toString(),r.id=t.uid.toString(),o.channelParameters.remoteUid=t.uid.toString(),o.$refs.ringingPhone.pause(),document.body.append(r),$(".remotePlayerDiv").html(r),$(".remotePlayerDiv").removeAttr("style").css("display","unset"),$(r).addClass("remotePlayerLayer"),o.channelParameters.remoteVideoTrack.play(r)),"audio"==i&&(o.channelParameters.remoteAudioTrack=t.audioTrack,o.channelParameters.remoteAudioTrack.play()),n.on("user-unpublished",(function(e){console.log(e.uid+"has left the channel")}));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),window.onload=function(){o.joinVideo(n,o.channelParameters,i,o)};case 7:case"end":return t.stop()}}),t)})))()},getUrlVars:function(){for(var e,t=[],n=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),r=0;r<n.length;r++)e=n[r].split("="),t.push(e[0]),t[e[0]]=e[1];return t},joinVideo:function(e,t,n,r){return bee(yee().mark((function i(){return yee().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return console.log("local"),i.next=3,e.join(r.options.appId,r.options.channel,r.options.token,r.options.uid);case 3:return i.next=5,Z7.createMicrophoneAudioTrack();case 5:return t.localAudioTrack=i.sent,i.next=8,Z7.createCameraVideoTrack();case 8:return t.localVideoTrack=i.sent,document.body.append(n),$(".localPlayerDiv").html(n),$(n).addClass("localPlayerLayer"),i.next=14,e.publish([t.localAudioTrack,t.localVideoTrack]);case 14:t.localVideoTrack.play(n),console.log("publish success!");case 16:case"end":return i.stop()}}),i)})))()},leaveChannel:function(){confirm("Are you sure you want to leave this channel?")&&window.top.close()},videoStreamingOnAndOff:function(){this.videoStreaming=!this.videoStreaming,this.channelParameters.localVideoTrack.setEnabled(this.videoStreaming)},audioStreamingOnAnddOff:function(){this.audioStreaming=!this.audioStreaming,this.channelParameters.localAudioTrack.setEnabled(this.audioStreaming)},showDivAgain:function(){this.showDiv=!0},clearTimeout:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){clearTimeout(this.timeoutId)})),ringingPhoneFunc:function(){var e=this;return bee(yee().mark((function t(){var n;return yee().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.ringingPhone.play();case 2:n=e,setTimeout((function(){console.log("pause"),n.$refs.ringingPhone.pause()}),6e4);case 4:case"end":return t.stop()}}),t)})))()},submitPrescription:function(){var e=this;if(this.prescription){var t={code:this.referral_code,prescription:this.prescription,form_type:this.form_type};ug().post("".concat(this.baseUrl,"/api/video/prescription/update"),t).then((function(t){console.log(t),"success"===t.data?(e.prescriptionSubmitted=!0,Lobibox.alert("success",{msg:"Successfully submitted prescription!"})):Lobibox.alert("error",{msg:"Error in server!"})}))}else Lobibox.alert("error",{msg:"No prescription inputted!"})},generatePrescription:function(){var e=this,t={code:this.referral_code,form_type:this.form_type,activity_id:this.activity_id};ug().post("".concat(this.baseUrl,"/api/video/prescription/check"),t).then((function(t){console.log(t),"success"===t.data.status?window.open("".concat(e.baseUrl,"/doctor/print/prescription/").concat(e.tracking_id,"/").concat(t.data.prescriptions[0].prescribed_activity_id),"_blank"):Lobibox.alert("error",{msg:"No added prescription!"})})).catch((function(e){console.log(e)}))},endorseUpward:function(){var e=this;Lobibox.confirm({msg:"Do you want to endorse this patient for an upward level of referral?",callback:function(t,n,r){if("yes"==n){var i={code:e.referral_code,form_type:e.form_type};ug().post("".concat(e.baseUrl,"/api/video/upward"),i).then((function(e){console.log(e.data),"success"===e.data.trim()?Lobibox.alert("success",{msg:"Successfully endorse the patient for upward referral!"}):Lobibox.alert("error",{msg:"Error in server!"})}))}}})}}};var Tee=n(6953),Ree={insert:"head",singleton:!1};K9()(Tee.A,Ree);Tee.A.locals;const Cee=(0,Y9.A)(See,[["render",function(e,t,n,r,i,o){var s=ki("PrescriptionModal"),a=ki("LabRequestModal");return Vs(),Ws(Ps,null,[Qs("audio",{ref:"ringingPhone",src:i.ringingPhoneUrl,loop:""},null,8,kp),Qs("div",Mp,[Qs("div",Up,[Qs("div",Vp,[Qs("div",Fp,[Qs("div",jp,[t[17]||(t[17]=Qs("div",{id:"calling"},[Qs("h3",null,"Calling...")],-1)),Qs("img",{src:i.doctorUrl,class:"img-fluid",alt:"Image1"},null,8,Bp)]),$s(cc,{name:"fade"},{default:ur((function(){return[i.showDiv?(Vs(),Ws("div",Gp,[Qs("div",Hp,[i.showAudio?(Vs(),Ws("div",Wp," Audio ")):ia("",!0),Qs("button",{class:J(["btn btn-success btn-lg mic-button",{"mic-button-slash":!i.audioStreaming}]),onClick:t[0]||(t[0]=function(){return o.audioStreamingOnAnddOff&&o.audioStreamingOnAnddOff.apply(o,arguments)}),type:"button",onMouseover:t[1]||(t[1]=function(e){return i.showAudio=!0}),onMouseleave:t[2]||(t[2]=function(e){return i.showAudio=!1})},t[18]||(t[18]=[Qs("i",{class:"bi-mic-fill"},null,-1)]),34)]),t[24]||(t[24]=na("   ")),Qs("div",Kp,[i.showVedio?(Vs(),Ws("div",zp," Video ")):ia("",!0),Qs("button",{class:J(["btn btn-success btn-lg video-button",{"video-button-slash":!i.videoStreaming}]),onClick:t[3]||(t[3]=function(){return o.videoStreamingOnAndOff&&o.videoStreamingOnAndOff.apply(o,arguments)}),type:"button",onMouseover:t[4]||(t[4]=function(e){return i.showVedio=!0}),onMouseleave:t[5]||(t[5]=function(e){return i.showVedio=!1})},t[19]||(t[19]=[Qs("i",{class:"bi-camera-video-fill"},null,-1)]),34)]),t[25]||(t[25]=na("   ")),Qs("div",qp,[i.Endcall?(Vs(),Ws("div",Yp," Endcall ")):ia("",!0),Qs("button",{class:"btn btn-danger btn-lg decline-button",onClick:t[6]||(t[6]=function(){return o.leaveChannel&&o.leaveChannel.apply(o,arguments)}),type:"button",onMouseover:t[7]||(t[7]=function(e){return i.Endcall=!0}),onMouseleave:t[8]||(t[8]=function(e){return i.Endcall=!1})},t[20]||(t[20]=[Qs("i",{class:"bi-telephone-x-fill"},null,-1)]),32)]),Qs("div",Jp,[i.showUpward?(Vs(),Ws("div",Xp," Upward ")):ia("",!0),"no"==i.referring_md?(Vs(),Ws("button",{key:1,class:"btn btn-warning btn-lg upward-button",onClick:t[9]||(t[9]=function(){return o.endorseUpward&&o.endorseUpward.apply(o,arguments)}),type:"button",style:{"margin-left":"10px"},onMouseover:t[10]||(t[10]=function(e){return i.showUpward=!0}),onMouseleave:t[11]||(t[11]=function(e){return i.showUpward=!1})},t[21]||(t[21]=[Qs("i",{class:"bi-hospital"},null,-1)]),32)):ia("",!0)]),Qs("div",Qp,[i.showPrescription?(Vs(),Ws("div",$p," Prescription ")):ia("",!0),"no"==i.referring_md?(Vs(),Ws("button",{key:1,class:"btn btn-success btn-lg prescription-button","data-toggle":"modal","data-target":"#prescriptionModal",type:"button",onMouseover:t[12]||(t[12]=function(e){return i.showPrescription=!0}),onMouseleave:t[13]||(t[13]=function(e){return i.showPrescription=!1})},t[22]||(t[22]=[Qs("i",{class:"bi bi-prescription"},null,-1)]),32)):ia("",!0)]),Qs("div",Zp,[i.showLab?(Vs(),Ws("div",ef," Lab Request ")):ia("",!0),"no"==i.referring_md?(Vs(),Ws("button",{key:1,class:"btn btn-primary btn-lg prescription-button","data-toggle":"modal","data-target":"#labRequestModal",type:"button",onMouseover:t[14]||(t[14]=function(e){return i.showLab=!0}),onMouseleave:t[15]||(t[15]=function(e){return i.showLab=!1})},t[23]||(t[23]=[Qs("i",{class:"bi-card-checklist"},null,-1)]),32)):ia("",!0)])])):ia("",!0)]})),_:1}),Qs("div",tf,[Qs("img",{src:i.doctorUrl1,id:"local-image",class:"img2",alt:"Image2"},null,8,nf)])])]),Qs("div",rf,[Qs("div",of,[Qs("div",sf,[Qs("div",null,[Qs("img",{src:i.dohLogoUrl,alt:"Image3",class:"dohLogo"},null,8,af)]),t[92]||(t[92]=ra('<div class="formHeader"><p>Republic of the Philippines</p><p>DEPARTMENT OF HEALTH</p><p><b>CENTRAL VISAYAS CENTER for HEALTH DEVELOPMENT</b></p><p>Osmeña Boulevard Sambag II, Cebu City, 6000 Philippines</p><p> Regional Director&#39;s Office Tel. No. (032) 253-6355 Fax No. (032) 254-0109 </p><p> Official Website: <span style="color:blue;">http://www.ro7.doh.gov.ph</span> Email Address: dohro7@gmail.com </p></div><div class="clinical"><span style="color:#4caf50;"><b>BEmONC/CEmONC REFERRAL FORM</b></span></div>',2)),Qs("div",cf,[Qs("table",df,[Qs("tbody",null,[t[40]||(t[40]=Qs("tr",null,[Qs("th",{colspan:"12"},"REFERRAL RECORD")],-1)),Qs("tr",null,[t[27]||(t[27]=Qs("td",{colspan:"6"},"Who is referring",-1)),Qs("td",lf,[t[26]||(t[26]=na(" Record Number: ")),Qs("span",hf,pe(i.form.record_no),1)])]),Qs("tr",null,[Qs("td",uf,[t[28]||(t[28]=na(" Referred Date: ")),Qs("span",pf,pe(i.form.referred_date),1)])]),Qs("tr",null,[Qs("td",ff,[t[29]||(t[29]=na(" Referring Name: ")),Qs("span",mf,pe(i.form.md_referring),1)]),Qs("td",gf,[t[30]||(t[30]=na(" Arrival Date: ")),Qs("span",_f,pe(i.form.arrival_date),1)])]),Qs("tr",null,[Qs("td",Ef,[t[31]||(t[31]=na(" Contact # of Referring MD/HCW: ")),Qs("span",yf,pe(i.form.referring_md_contact),1)])]),Qs("tr",null,[Qs("td",vf,[t[32]||(t[32]=na(" Referring Facility: ")),Qs("span",bf,pe(i.form.referring_facility),1)])]),Qs("tr",null,[Qs("td",Sf,[t[33]||(t[33]=na(" Facility Contact #: ")),Qs("span",Tf,pe(i.form.referring_contact),1)])]),Qs("tr",null,[Qs("td",Rf,[t[34]||(t[34]=na(" Accompanied by the Health Worker: ")),Qs("span",Cf,pe(i.form.health_worker),1)])]),Qs("tr",null,[Qs("td",wf,[t[35]||(t[35]=na(" Referred to: ")),Qs("span",If,pe(i.form.referred_facility),1)]),Qs("td",Af,[t[36]||(t[36]=na(" Department: ")),Qs("span",Of,pe(i.form.department),1)])]),Qs("tr",null,[Qs("td",xf,[t[37]||(t[37]=na(" Covid Number: ")),Qs("span",Nf,pe(i.form.covid_number),1)])]),Qs("tr",null,[Qs("td",Pf,[t[38]||(t[38]=na(" Clinical Status: ")),Qs("span",Df,pe(i.form.refer_clinical_status),1)])]),Qs("tr",null,[Qs("td",Lf,[t[39]||(t[39]=na(" Surviellance Category: ")),Qs("span",kf,pe(i.form.refer_sur_category),1)])])])]),Qs("div",Mf,[Qs("div",Uf,[Qs("table",null,[Qs("tbody",null,[t[69]||(t[69]=Qs("tr",null,[Qs("th",{colspan:"6",class:"padded-header"},"WOMAN")],-1)),Qs("tr",Vf,[Qs("td",Ff,[t[41]||(t[41]=na(" Name: ")),Qs("span",jf,pe(i.form.woman_name),1)])]),Qs("tr",Bf,[Qs("td",Gf,[t[42]||(t[42]=na(" Age: ")),Qs("span",Hf,pe(i.form.woman_age),1),t[43]||(t[43]=Qs("br",null,null,-1)),t[44]||(t[44]=Qs("small",null,"(at time of referral)",-1))])]),Qs("tr",Wf,[Qs("td",Kf,[t[45]||(t[45]=na(" Address: ")),t[46]||(t[46]=Qs("br",null,null,-1)),Qs("span",zf,pe(i.form.patient_address),1)])]),Qs("tr",qf,[Qs("td",Yf,[t[47]||(t[47]=na(" Main Reason for Referral: ")),t[48]||(t[48]=Qs("br",null,null,-1)),Qs("span",Jf,pe(i.form.woman_reason),1)])]),Qs("tr",Xf,[Qs("td",Qf,[t[49]||(t[49]=na(" Major Findings (Clinica and BP,Temp,Lab) ")),t[50]||(t[50]=Qs("br",null,null,-1)),Qs("span",$f,pe(i.form.woman_major_findings),1)])]),t[70]||(t[70]=Qs("tr",{class:"bg-gray"},[Qs("td",{colspan:"6",class:"padded-header"},[Qs("strong",null,"Treatments Give Time")])],-1)),Qs("tr",Zf,[Qs("td",em,[t[51]||(t[51]=na(" Before Referral: ")),t[52]||(t[52]=Qs("br",null,null,-1)),Qs("span",tm,pe(i.form.woman_before_treatment),1),t[53]||(t[53]=na(" - ")),Qs("span",nm,pe(i.form.woman_before_given_time),1)])]),Qs("tr",rm,[Qs("td",im,[t[54]||(t[54]=na(" During Referral: ")),t[55]||(t[55]=Qs("br",null,null,-1)),Qs("span",om,pe(i.form.woman_during_transport),1),t[56]||(t[56]=na(" - ")),Qs("span",sm,pe(i.form.woman_transport_given_time),1)])]),Qs("tr",am,[Qs("td",cm,[t[57]||(t[57]=na(" Information Given to the Woman and Companion About the Reason for Referral ")),t[58]||(t[58]=Qs("br",null,null,-1)),Qs("span",dm,pe(i.form.woman_information_given),1)])]),i.icd.length>0?(Vs(),Ws("tr",lm,[Qs("td",hm,[t[59]||(t[59]=na(" ICD-10 Code and Description: ")),(Vs(!0),Ws(Ps,null,Bi(i.icd,(function(e){return Vs(),Ws("li",{key:e.code},[Qs("span",um,pe(e.code)+" - "+pe(e.description),1)])})),128))])])):ia("",!0),i.form.notes_diagnoses?(Vs(),Ws("tr",pm,[Qs("td",fm,[t[60]||(t[60]=na(" Diagnosis/Impression: ")),t[61]||(t[61]=Qs("br",null,null,-1)),Qs("span",mm,pe(i.form.notes_diagnoses),1)])])):ia("",!0),i.form.other_diagnoses?(Vs(),Ws("tr",gm,[Qs("td",_m,[t[62]||(t[62]=na(" Other Diagnoses: ")),t[63]||(t[63]=Qs("br",null,null,-1)),Qs("span",Em,pe(i.form.other_diagnoses),1)])])):ia("",!0),i.reason?(Vs(),Ws("tr",ym,[Qs("td",vm,[t[64]||(t[64]=na(" Reason for referral: ")),t[65]||(t[65]=Qs("br",null,null,-1)),Qs("span",bm,pe(i.reason.reason),1)])])):ia("",!0),i.form.other_reason_referral?(Vs(),Ws("tr",Sm,[Qs("td",Tm,[t[66]||(t[66]=na(" Reason for referral: ")),t[67]||(t[67]=Qs("br",null,null,-1)),Qs("span",Rm,pe(i.form.other_reason_referral),1)])])):ia("",!0),i.file_path?(Vs(),Ws("tr",Cm,[Qs("td",wm,[i.file_path.length>1?(Vs(),Ws("span",Im,"File Attachments: ")):(Vs(),Ws("span",Am,"File Attachment: ")),t[68]||(t[68]=Qs("br",null,null,-1)),(Vs(!0),Ws(Ps,null,Bi(i.file_path,(function(e,t){return Vs(),Ws("span",{key:t},[(Vs(),Ws("a",{href:e,key:t,id:"file_download",class:"reason",target:"_blank",download:""},pe(i.file_name[t]),9,Om)),t+1!==i.file_path.length?(Vs(),Ws("span",xm,", ")):ia("",!0)])})),128))])])):ia("",!0)])])]),Qs("div",Nm,[Qs("table",null,[Qs("tbody",null,[t[89]||(t[89]=Qs("tr",{class:"bg-gray"},[Qs("th",{colspan:"6",class:"padded-header"},"BABY")],-1)),Qs("tr",Pm,[Qs("td",Dm,[t[71]||(t[71]=na(" Name: ")),Qs("span",Lm,pe(i.formBaby.baby_name),1)])]),Qs("tr",km,[Qs("td",Mm,[t[72]||(t[72]=na(" Date of Birth: ")),Qs("span",Um,pe(i.formBaby.baby_dob),1)])]),Qs("tr",Vm,[Qs("td",Fm,[t[73]||(t[73]=na(" Birth Weight: ")),Qs("span",jm,pe(i.formBaby.weight),1)])]),Qs("tr",Bm,[Qs("td",Gm,[t[74]||(t[74]=na(" Gestational Age: ")),Qs("span",Hm,pe(i.formBaby.gestational_age),1)])]),Qs("tr",Wm,[Qs("td",Km,[t[75]||(t[75]=na(" Main Reason for Referral: ")),t[76]||(t[76]=Qs("br",null,null,-1)),Qs("span",zm,pe(i.formBaby.baby_reason),1)])]),Qs("tr",qm,[Qs("td",Ym,[t[77]||(t[77]=na(" Major Findings (Clinical and BP,Temp,Lab) ")),t[78]||(t[78]=Qs("br",null,null,-1)),Qs("span",Jm,pe(i.formBaby.baby_major_findings),1)])]),Qs("tr",Xm,[Qs("td",Qm,[t[79]||(t[79]=na(" Last (Breast) Feed (Time): ")),t[80]||(t[80]=Qs("br",null,null,-1)),Qs("span",$m,pe(i.formBaby.baby_last_feed),1)])]),t[90]||(t[90]=Qs("tr",{class:"bg-gray"},[Qs("td",{colspan:"6",class:"padded-header"},[Qs("strong",null,"Treatments Give Time")])],-1)),Qs("tr",Zm,[Qs("td",eg,[t[81]||(t[81]=na(" Before Referral: ")),t[82]||(t[82]=Qs("br",null,null,-1)),Qs("span",tg,pe(i.formBaby.baby_before_treatment),1),t[83]||(t[83]=na(" - ")),Qs("span",ng,pe(i.formBaby.baby_before_given_time),1)])]),Qs("tr",rg,[Qs("td",ig,[t[84]||(t[84]=na(" During Transport: ")),t[85]||(t[85]=Qs("br",null,null,-1)),Qs("span",og,pe(i.formBaby.baby_during_transport),1),t[86]||(t[86]=na(" - ")),Qs("span",sg,pe(i.formBaby.baby_transport_given_time),1)])]),Qs("tr",ag,[Qs("td",cg,[t[87]||(t[87]=na(" Information Given to the Woman and Companion About the Reason for Referral ")),t[88]||(t[88]=Qs("br",null,null,-1)),Qs("span",dg,pe(i.formBaby.baby_information_given),1)])])])])])]),"yes"==i.referring_md?(Vs(),Ws("div",lg,[Qs("button",{class:"btn btn-success btn-md btn-block",type:"button",onClick:t[16]||(t[16]=function(e){return o.generatePrescription()})},t[91]||(t[91]=[Qs("i",{class:"bi bi-prescription"},null,-1),na(" Generate Prescription ")]))])):ia("",!0)])])])])]),$s(s,{activity_id:parseInt(i.activity_id),baseUrl:i.baseUrl,code:i.referral_code,form_type:i.form_type},null,8,["activity_id","baseUrl","code","form_type"]),$s(a,{activity_id:parseInt(i.activity_id),requested_by:parseInt(n.user.id)},null,8,["activity_id","requested_by"])])],64)}]]);Md({name:"App",components:{"video-app-pregnant":Cee}}).mount("#app_video_pregnant")})()})();
